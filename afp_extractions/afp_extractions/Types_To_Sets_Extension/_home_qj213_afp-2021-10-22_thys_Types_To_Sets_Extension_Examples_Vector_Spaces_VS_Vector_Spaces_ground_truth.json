{"file_name": "/home/qj213/afp-2021-10-22/thys/Types_To_Sets_Extension/Examples/Vector_Spaces/VS_Vector_Spaces.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Types_To_Sets_Extension", "problem_names": ["lemma vector_space_with_overloaded[ud_with]: \n  \"vector_space = vector_space_with (+) 0 (-) uminus\"", "lemma vector_space_pair_with_overloaded[ud_with]: \n  \"vector_space_pair = \n    (\n      \\<lambda>scale\\<^sub>1 scale\\<^sub>2. \n        vector_space_pair_with (+) 0 (-) uminus scale\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\"", "lemma linear_with_overloaded[ud_with]: \n  \"Vector_Spaces.linear = \n    (\n      \\<lambda>scale\\<^sub>1 scale\\<^sub>2. \n        linear_with (+) 0 (-) uminus scale\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\"", "lemma finite_dimensional_vector_space_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space = \n    finite_dimensional_vector_space_with (+) 0 (-) uminus\"", "lemma finite_dimensional_vector_space_pair_1_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space_pair_1 = \n    (\n      \\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2. \n        finite_dimensional_vector_space_pair_1_with \n          (+) 0 (-) uminus scale\\<^sub>1 basis\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\"", "lemma finite_dimensional_vector_space_pair_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space_pair = \n    (\n      \\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2 basis\\<^sub>2. \n        finite_dimensional_vector_space_pair_with \n          (+) 0 (-) uminus scale\\<^sub>1 basis\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2 basis\\<^sub>2\n    )\"", "lemma scale_closed'[simp]: \"\\<forall>a. \\<forall>x\\<in>U\\<^sub>V\\<^sub>S. a *s\\<^sub>o\\<^sub>w x \\<in> U\\<^sub>V\\<^sub>S\"", "lemma minus_closed'[simp]: \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. \\<forall>y\\<in>U\\<^sub>V\\<^sub>S. x -\\<^sub>V\\<^sub>S y \\<in> U\\<^sub>V\\<^sub>S\"", "lemma uminus_closed'[simp]: \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. -\\<^sub>V\\<^sub>S x \\<in> U\\<^sub>V\\<^sub>S\"", "lemma vector_space_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n            vector_space_ow \n              (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale\n        )\"\n  shows \"PP lhs vector_space_with\"", "lemma vector_space_pair_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n          vector_space_pair_ow \n            (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n        )\"\n    shows \"PP lhs vector_space_pair_with\"", "lemma linear_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>1 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f.\n          linear_ow \n            (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f\n        )\n      \"\n    shows \"PP lhs linear_with\"", "lemma linear_with_transfer'[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"\n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (B ===> B) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f.\n          linear_ow \n            (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f\n        )\n      \"\n    shows \"PP lhs linear_with\"", "lemma finite_dimensional_vector_space_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        rel_set B ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n            finite_dimensional_vector_space_ow \n              (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_with\"", "lemma finite_dimensional_vector_space_pair_1_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        rel_set B\\<^sub>1 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n          finite_dimensional_vector_space_pair_1_ow \n            (Collect (Domainp B\\<^sub>1)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_pair_1_with\"", "lemma finite_dimensional_vector_space_pair_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        rel_set B\\<^sub>1 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        rel_set B\\<^sub>2 ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2.\n          finite_dimensional_vector_space_pair_ow \n            (Collect (Domainp B\\<^sub>1)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_pair_with\"", "lemmas ab_group_add_ow_axioms = implicit\\<^sub>M.ab_group_add_ow_axioms", "lemmas vector_space_ow_axioms = implicit\\<^sub>V\\<^sub>S.vector_space_ow_axioms", "lemma vector_space_on_alt_def: \"vector_space_on U\\<^sub>V\\<^sub>S = module_on U\\<^sub>V\\<^sub>S\"", "lemma implicit_vector_space_ow[tts_implicit]:\n  \"vector_space_ow U\\<^sub>V\\<^sub>S (+) 0 (-) uminus = vector_space_on U\\<^sub>V\\<^sub>S\"", "lemma implicit_linear_on[tts_implicit]:\n  \"linear_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2\"", "lemma implicit_finite_dimensional_vector_space_on[tts_implicit]:\n  \"finite_dimensional_vector_space_ow U\\<^sub>V\\<^sub>S (+) 0 minus uminus scale basis = \n    finite_dimensional_vector_space_on U\\<^sub>V\\<^sub>S scale basis\"", "lemma implicit_vector_space_pair_on[tts_implicit]:\n  \"vector_space_pair_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>1 \n    U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2\"", "lemma implicit_finite_dimensional_vector_space_pair_1_on[tts_implicit]:\n  \"finite_dimensional_vector_space_pair_1_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    finite_dimensional_vector_space_pair_1_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1\"", "lemma implicit_finite_dimensional_vector_space_pair_on[tts_implicit]:\n  \"finite_dimensional_vector_space_pair_ow \n      U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 basis1 \n      U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 basis2 = \n    finite_dimensional_vector_space_pair_on \n      U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1 basis2\"", "lemma dim_eq_card:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and BV: \"span B = span V\" \n    and B: \"\\<not>dependent B\"\n  shows \"dim V = card B\"", "lemma dim_transfer[transfer_rule]: \n  includes lifting_syntax                               \n  assumes [transfer_domain_rule]: \"Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\"\n    and [transfer_rule]: \"right_total A\" \"bi_unique A\"\n    and [transfer_rule]: \"(A ===> A ===> A) plus plus'\"\n    and [transfer_rule]: \"((=) ===> A ===> A) scale scale'\"\n    and [transfer_rule]: \"A 0 zero'\"\n  shows \"(rel_set A ===> (=)) dim (dim.with plus' zero' 0 scale')\""], "translations": [["", "lemma vector_space_with_overloaded[ud_with]: \n  \"vector_space = vector_space_with (+) 0 (-) uminus\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space = vector_space_with (+) (0::'b) (-) uminus", "unfolding vector_space_def vector_space_with_def vector_space_with_axioms_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>scale.\n        ((\\<forall>a x y. scale a (x + y) = scale a x + scale a y) \\<and>\n         (\\<forall>a b x. scale (a + b) x = scale a x + scale b x)) \\<and>\n        (\\<forall>a b x. scale a (scale b x) = scale (a * b) x) \\<and>\n        (\\<forall>x. scale (1::'a) x = x)) =\n    (\\<lambda>scale.\n        class.ab_group_add (+) (0::'b) (-) uminus \\<and>\n        ((\\<forall>a x y. scale a (x + y) = scale a x + scale a y) \\<and>\n         (\\<forall>a b x. scale (a + b) x = scale a x + scale b x)) \\<and>\n        (\\<forall>a b x. scale a (scale b x) = scale (a * b) x) \\<and>\n        (\\<forall>x. scale (1::'a) x = x))", "by (simp add: field_axioms ab_group_add_axioms)"], ["", "locale vector_space_pair_with =\n  VS\\<^sub>1: vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"['vs_1, 'vs_1] \\<Rightarrow> 'vs_1\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\"  (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>1\\<close> 75)\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"['vs_2, 'vs_2] \\<Rightarrow> 'vs_2\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>2\\<close> 75)"], ["", "lemma vector_space_pair_with_overloaded[ud_with]: \n  \"vector_space_pair = \n    (\n      \\<lambda>scale\\<^sub>1 scale\\<^sub>2. \n        vector_space_pair_with (+) 0 (-) uminus scale\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_pair =\n    (\\<lambda>scale\\<^sub>1.\n        vector_space_pair_with (+) (0::'b) (-) uminus scale\\<^sub>1 (+)\n         (0::'c) (-) uminus)", "unfolding vector_space_pair_def vector_space_pair_with_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s1 s2. vector_space s1 \\<and> vector_space s2) =\n    (\\<lambda>scale\\<^sub>1 scale\\<^sub>2.\n        vector_space_with (+) (0::'b) (-) uminus scale\\<^sub>1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus scale\\<^sub>2)", "unfolding vector_space_with_overloaded"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s1 s2.\n        vector_space_with (+) (0::'b) (-) uminus s1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus s2) =\n    (\\<lambda>scale\\<^sub>1 scale\\<^sub>2.\n        vector_space_with (+) (0::'b) (-) uminus scale\\<^sub>1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus scale\\<^sub>2)", ".."], ["", "locale linear_with =\n  VS\\<^sub>1: vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 +\n  module_hom_with \n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n    f \n  for plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"['vs_1, 'vs_1] \\<Rightarrow> 'vs_1\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\"  (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>1\\<close> 75)\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"['vs_2, 'vs_2] \\<Rightarrow> 'vs_2\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>2\\<close> 75)\n    and f :: \"'vs_1 \\<Rightarrow> 'vs_2\""], ["", "lemma linear_with_overloaded[ud_with]: \n  \"Vector_Spaces.linear = \n    (\n      \\<lambda>scale\\<^sub>1 scale\\<^sub>2. \n        linear_with (+) 0 (-) uminus scale\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Vector_Spaces.linear =\n    (\\<lambda>scale\\<^sub>1.\n        linear_with (+) (0::'b) (-) uminus scale\\<^sub>1 (+) (0::'c) (-)\n         uminus)", "unfolding \n    Vector_Spaces.linear_def linear_with_def \n    vector_space_with_overloaded module_hom_with_overloaded"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s1 s2 f.\n        vector_space_with (+) (0::'b) (-) uminus s1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus s2 \\<and>\n        module_hom_with (+) (0::'b) (-) uminus s1 (+) (0::'c) (-) uminus s2\n         f) =\n    (\\<lambda>scale\\<^sub>1 scale\\<^sub>2 f.\n        vector_space_with (+) (0::'b) (-) uminus scale\\<^sub>1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus scale\\<^sub>2 \\<and>\n        module_hom_with (+) (0::'b) (-) uminus scale\\<^sub>1 (+) (0::'c) (-)\n         uminus scale\\<^sub>2 f)", ".."], ["", "locale finite_dimensional_vector_space_with = \n  vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale\n  for plus\\<^sub>V\\<^sub>S :: \"['vs, 'vs] \\<Rightarrow> 'vs\"\n    and zero\\<^sub>V\\<^sub>S \n    and minus\\<^sub>V\\<^sub>S \n    and uminus\\<^sub>V\\<^sub>S \n    and scale :: \"['f::field, 'vs] \\<Rightarrow> 'vs\" +\n  fixes basis :: \"'vs set\"\n  assumes finite_basis: \"finite basis\"\n    and independent_basis: \"independent_with 0 0\\<^sub>V\\<^sub>S (+\\<^sub>V\\<^sub>S) (*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h) basis\"\n    and span_basis: \"span.with 0\\<^sub>V\\<^sub>S (+\\<^sub>V\\<^sub>S) (*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h) basis = UNIV\""], ["", "lemma finite_dimensional_vector_space_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space = \n    finite_dimensional_vector_space_with (+) 0 (-) uminus\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space =\n    finite_dimensional_vector_space_with (+) (0::'b) (-) uminus", "unfolding\n    finite_dimensional_vector_space_def\n    finite_dimensional_vector_space_axioms_def\n    finite_dimensional_vector_space_with_def\n    finite_dimensional_vector_space_with_axioms_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>scale Basis.\n        vector_space scale \\<and>\n        finite Basis \\<and>\n        \\<not> module.dependent scale Basis \\<and>\n        module.span scale Basis = UNIV) =\n    (\\<lambda>scale basis.\n        vector_space_with (+) (0::'b) (-) uminus scale \\<and>\n        finite basis \\<and>\n        (with (0::'a) (0::'b) (+) scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n        (with (0::'b) (+) scale : \\<guillemotleft>span\\<guillemotright> basis) =\n        UNIV)", "by (intro ext)\n    (\n      auto simp: \n        vector_space_with_overloaded \n        dependent.with \n        module_iff_vector_space\n        span.with \n    )"], ["", "locale finite_dimensional_vector_space_pair_1_with = \n  VS\\<^sub>1: finite_dimensional_vector_space_with \n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1 +\n  VS\\<^sub>2: vector_space_with \n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"['vs_1, 'vs_1] \\<Rightarrow> 'vs_1\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>1\\<close> 75)\n    and basis\\<^sub>1\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"['vs_2, 'vs_2] \\<Rightarrow> 'vs_2\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>2\\<close> 75)"], ["", "lemma finite_dimensional_vector_space_pair_1_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space_pair_1 = \n    (\n      \\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2. \n        finite_dimensional_vector_space_pair_1_with \n          (+) 0 (-) uminus scale\\<^sub>1 basis\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2\n    )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_1 =\n    (\\<lambda>scale\\<^sub>1 basis\\<^sub>1.\n        finite_dimensional_vector_space_pair_1_with (+) (0::'b) (-) uminus\n         scale\\<^sub>1 basis\\<^sub>1 (+) (0::'c) (-) uminus)", "unfolding\n    finite_dimensional_vector_space_pair_1_def\n    finite_dimensional_vector_space_pair_1_with_def    \n    vector_space_with_overloaded"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s1 B1 s2.\n        finite_dimensional_vector_space s1 B1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus s2) =\n    (\\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2.\n        finite_dimensional_vector_space_with (+) (0::'b) (-) uminus\n         scale\\<^sub>1 basis\\<^sub>1 \\<and>\n        vector_space_with (+) (0::'c) (-) uminus scale\\<^sub>2)", "by (simp add: finite_dimensional_vector_space_with_overloaded)"], ["", "locale finite_dimensional_vector_space_pair_with = \n  VS\\<^sub>1: finite_dimensional_vector_space_with \n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1 +\n  VS\\<^sub>2: finite_dimensional_vector_space_with \n    plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2\n  for plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"['vs_1, 'vs_1] \\<Rightarrow> 'vs_1\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>1\\<close> 75)\n    and basis\\<^sub>1\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"['vs_2, 'vs_2] \\<Rightarrow> 'vs_2\" (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>w\\<^sub>i\\<^sub>t\\<^sub>h\\<^sub>'_\\<^sub>2\\<close> 75)\n    and basis\\<^sub>2"], ["", "lemma finite_dimensional_vector_space_pair_with_overloaded[ud_with]: \n  \"finite_dimensional_vector_space_pair = \n    (\n      \\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2 basis\\<^sub>2. \n        finite_dimensional_vector_space_pair_with \n          (+) 0 (-) uminus scale\\<^sub>1 basis\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>2 basis\\<^sub>2\n    )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair =\n    (\\<lambda>scale\\<^sub>1 basis\\<^sub>1.\n        finite_dimensional_vector_space_pair_with (+) (0::'b) (-) uminus\n         scale\\<^sub>1 basis\\<^sub>1 (+) (0::'c) (-) uminus)", "unfolding\n    finite_dimensional_vector_space_pair_def\n    finite_dimensional_vector_space_pair_with_def\n    finite_dimensional_vector_space_with_overloaded"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>s1 B1 s2 B2.\n        finite_dimensional_vector_space_with (+) (0::'b) (-) uminus s1\n         B1 \\<and>\n        finite_dimensional_vector_space_with (+) (0::'c) (-) uminus s2 B2) =\n    (\\<lambda>scale\\<^sub>1 basis\\<^sub>1 scale\\<^sub>2 basis\\<^sub>2.\n        finite_dimensional_vector_space_with (+) (0::'b) (-) uminus\n         scale\\<^sub>1 basis\\<^sub>1 \\<and>\n        finite_dimensional_vector_space_with (+) (0::'c) (-) uminus\n         scale\\<^sub>2 basis\\<^sub>2)", ".."], ["", "subsection\\<open>\\<open>vector_space_ow\\<close>\\<close>"], ["", "subsubsection\\<open>Definitions and common properties\\<close>"], ["", "text\\<open>Single vector space.\\<close>"], ["", "locale vector_space_ow = ab_group_add_ow U\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n  for U\\<^sub>V\\<^sub>S :: \"'vs set\" \n    and plus\\<^sub>V\\<^sub>S (infixl \\<open>+\\<^sub>V\\<^sub>S\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S (\\<open>0\\<^sub>V\\<^sub>S\\<close>)\n    and minus\\<^sub>V\\<^sub>S (infixl \\<open>-\\<^sub>V\\<^sub>S\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S (\\<open>-\\<^sub>V\\<^sub>S _\\<close> [81] 80) +\n  fixes scale :: \"['f::field, 'vs] \\<Rightarrow> 'vs\" (infixr \"*s\\<^sub>o\\<^sub>w\" 75)\n  assumes scale_closed[simp, intro]: \"x \\<in> U\\<^sub>V\\<^sub>S \\<Longrightarrow> a *s\\<^sub>o\\<^sub>w x \\<in> U\\<^sub>V\\<^sub>S\"\n    and scale_right_distrib[algebra_simps]: \n    \"\\<lbrakk> x \\<in> U\\<^sub>V\\<^sub>S; y \\<in> U\\<^sub>V\\<^sub>S \\<rbrakk> \\<Longrightarrow> a *s\\<^sub>o\\<^sub>w (x +\\<^sub>V\\<^sub>S y) = a *s\\<^sub>o\\<^sub>w x +\\<^sub>V\\<^sub>S a *s\\<^sub>o\\<^sub>w y\"\n    and scale_left_distrib[algebra_simps]: \n      \"x \\<in> U\\<^sub>V\\<^sub>S \\<Longrightarrow> (a + b) *s\\<^sub>o\\<^sub>w x = a *s\\<^sub>o\\<^sub>w x +\\<^sub>V\\<^sub>S b *s\\<^sub>o\\<^sub>w x\"\n    and scale_scale[simp]: \n      \"x \\<in> U\\<^sub>V\\<^sub>S \\<Longrightarrow> a *s\\<^sub>o\\<^sub>w (b *s\\<^sub>o\\<^sub>w x) = (a * b) *s\\<^sub>o\\<^sub>w x\"\n    and scale_one[simp]: \"x \\<in> U\\<^sub>V\\<^sub>S \\<Longrightarrow> 1 *s\\<^sub>o\\<^sub>w x = x\"\nbegin"], ["", "lemma scale_closed'[simp]: \"\\<forall>a. \\<forall>x\\<in>U\\<^sub>V\\<^sub>S. a *s\\<^sub>o\\<^sub>w x \\<in> U\\<^sub>V\\<^sub>S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a.\n       \\<forall>x\\<in>U\\<^sub>V\\<^sub>S.\n          a *s\\<^sub>o\\<^sub>w x \\<in> U\\<^sub>V\\<^sub>S", "by simp"], ["", "lemma minus_closed'[simp]: \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. \\<forall>y\\<in>U\\<^sub>V\\<^sub>S. x -\\<^sub>V\\<^sub>S y \\<in> U\\<^sub>V\\<^sub>S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>U\\<^sub>V\\<^sub>S.\n       \\<forall>y\\<in>U\\<^sub>V\\<^sub>S.\n          x -\\<^sub>V\\<^sub>S y \\<in> U\\<^sub>V\\<^sub>S", "by (simp add: ab_diff_conv_add_uminus add_closed' uminus_closed)"], ["", "lemma uminus_closed'[simp]: \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. -\\<^sub>V\\<^sub>S x \\<in> U\\<^sub>V\\<^sub>S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>U\\<^sub>V\\<^sub>S.\n       -\\<^sub>V\\<^sub>S x \\<in> U\\<^sub>V\\<^sub>S", "by (simp add: uminus_closed)"], ["", "tts_register_sbts \\<open>(*s\\<^sub>o\\<^sub>w)\\<close> | U\\<^sub>V\\<^sub>S"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Domainp VSA = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S);\n     bi_unique VSA; right_total VSA\\<rbrakk>\n    \\<Longrightarrow> \\<exists>rcdt.\n                         rel_fun (=) (rel_fun VSA VSA) (*s\\<^sub>o\\<^sub>w)\n                          rcdt", "by (rule tts_AB_C_transfer[OF scale_closed]) \n    (auto simp: bi_unique_eq right_total_eq)"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: module_ow U\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale"], ["proof (prove)\ngoal (1 subgoal):\n 1. module_ow U\\<^sub>V\\<^sub>S (+\\<^sub>V\\<^sub>S) 0\\<^sub>V\\<^sub>S\n     (-\\<^sub>V\\<^sub>S) uminus\\<^sub>V\\<^sub>S (*s\\<^sub>o\\<^sub>w)", "by unfold_locales (simp_all add: scale_right_distrib scale_left_distrib)"], ["", "end"], ["", "ud \\<open>vector_space.dim\\<close>"], ["", "ud dim' \\<open>dim\\<close>"], ["", "text\\<open>Pair of vector spaces.\\<close>"], ["", "locale vector_space_pair_ow = \n  VS\\<^sub>1: vector_space_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"'vs_1 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>1\\<close> 75)\n    and U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"'vs_2 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>2\\<close> 75)\nbegin"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: module_pair_ow \n  U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n  U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. module_pair_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (+\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1) 0\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (-\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1)\n     uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (*s\\<^sub>o\\<^sub>w\\<^sub>_\\<^sub>1) U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (+\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2) 0\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (-\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2)\n     uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (*s\\<^sub>o\\<^sub>w\\<^sub>_\\<^sub>2)", "by unfold_locales"], ["", "end"], ["", "text\\<open>Linear map.\\<close>"], ["", "locale linear_ow =\n  VS\\<^sub>1: vector_space_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 +\n  module_hom_ow \n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n    f \n  for U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"'vs_1 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>1\\<close> 75)\n    and U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"'vs_2 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>2\\<close> 75)\n    and f :: \"'vs_1 \\<Rightarrow> 'vs_2\"\nbegin"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: vector_space_pair_ow\n  U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n  U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_pair_ow U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (+\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1) 0\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (-\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1)\n     uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n     (*s\\<^sub>o\\<^sub>w\\<^sub>_\\<^sub>1) U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (+\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2) 0\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (-\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2)\n     uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n     (*s\\<^sub>o\\<^sub>w\\<^sub>_\\<^sub>2)", "by unfold_locales"], ["", "end"], ["", "text\\<open>Single finite dimensional vector space.\\<close>"], ["", "locale finite_dimensional_vector_space_ow = \n  vector_space_ow U\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale\n  for U\\<^sub>V\\<^sub>S :: \"'vs set\"\n    and plus\\<^sub>V\\<^sub>S (infixl \\<open>+\\<^sub>V\\<^sub>S\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S (\\<open>0\\<^sub>V\\<^sub>S\\<close>)\n    and minus\\<^sub>V\\<^sub>S (infixl \\<open>-\\<^sub>V\\<^sub>S\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S (\\<open>-\\<^sub>V\\<^sub>S _\\<close> [81] 80) \n    and scale :: \"['f::field, 'vs] \\<Rightarrow> 'vs\" (infixr \"*s\\<^sub>o\\<^sub>w\" 75) +\n  fixes basis :: \"'vs set\"\n  assumes basis_closed: \"basis \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and finite_basis: \"finite basis\"\n    and independent_basis: \"independent_with 0 zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale basis\"\n    and span_basis: \"span.with zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale basis = U\\<^sub>V\\<^sub>S\""], ["", "text\\<open>Pair of finite dimensional vector spaces.\\<close>"], ["", "locale finite_dimensional_vector_space_pair_1_ow =\n  VS\\<^sub>1: finite_dimensional_vector_space_ow\n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1 +\n  VS\\<^sub>2: vector_space_ow \n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"'vs_1 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>1\\<close> 75)\n    and basis\\<^sub>1\n    and U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"'vs_2 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>2\\<close> 75)"], ["", "locale finite_dimensional_vector_space_pair_ow = \n  VS\\<^sub>1: finite_dimensional_vector_space_ow \n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1 + \n  VS\\<^sub>2: finite_dimensional_vector_space_ow \n    U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2\n  for U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 :: \"'vs_1 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>1 _\\<close> [81] 80)\n    and scale\\<^sub>1 :: \"['f::field, 'vs_1] \\<Rightarrow> 'vs_1\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>1\\<close> 75)\n    and basis\\<^sub>1\n    and U\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 :: \"'vs_2 set\"\n    and plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>+\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>0\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close>)\n    and minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (infixl \\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2\\<close> 65)\n    and uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 (\\<open>-\\<^sub>V\\<^sub>S\\<^sub>'_\\<^sub>2 _\\<close> [81] 80)\n    and scale\\<^sub>2 :: \"['f::field, 'vs_2] \\<Rightarrow> 'vs_2\" (infixr \\<open>*s\\<^sub>o\\<^sub>w\\<^sub>'_\\<^sub>2\\<close> 75)\n    and basis\\<^sub>2"], ["", "subsubsection\\<open>Transfer.\\<close>"], ["", "lemma vector_space_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n            vector_space_ow \n              (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale\n        )\"\n  shows \"PP lhs vector_space_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs vector_space_with", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. PP lhs vector_space_with", "let ?rhs = \n    \"(\n      \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n        (\\<forall>a \\<in> UNIV. \\<forall>x \\<in> UNIV. scale a x \\<in> UNIV) \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale\n    )\""], ["proof (state)\ngoal (1 subgoal):\n 1. PP lhs vector_space_with", "have \"PP lhs ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n         (\\<forall>a\\<in>UNIV.\n             \\<forall>x\\<in>UNIV. scale a x \\<in> UNIV) \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n          minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale)", "unfolding \n      PP_def lhs_def\n      vector_space_ow_def vector_space_with_def\n      vector_space_ow_axioms_def vector_space_with_axioms_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===> (B ===> B) ===> ((=) ===> B ===> B) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n         ab_group_add_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n          zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n          uminus\\<^sub>V\\<^sub>S \\<and>\n         ((\\<forall>x a.\n              x \\<in> Collect (Domainp B) \\<longrightarrow>\n              scale a x \\<in> Collect (Domainp B)) \\<and>\n          (\\<forall>x y a.\n              x \\<in> Collect (Domainp B) \\<longrightarrow>\n              y \\<in> Collect (Domainp B) \\<longrightarrow>\n              scale a (plus\\<^sub>V\\<^sub>S x y) =\n              plus\\<^sub>V\\<^sub>S (scale a x) (scale a y))) \\<and>\n         (\\<forall>x a b.\n             x \\<in> Collect (Domainp B) \\<longrightarrow>\n             scale (a + b) x =\n             plus\\<^sub>V\\<^sub>S (scale a x) (scale b x)) \\<and>\n         (\\<forall>x a b.\n             x \\<in> Collect (Domainp B) \\<longrightarrow>\n             scale a (scale b x) = scale (a * b) x) \\<and>\n         (\\<forall>x.\n             x \\<in> Collect (Domainp B) \\<longrightarrow>\n             scale (1::'c) x = x))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n         (\\<forall>a\\<in>UNIV.\n             \\<forall>x\\<in>UNIV. scale a x \\<in> UNIV) \\<and>\n         class.ab_group_add plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n          minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S \\<and>\n         ((\\<forall>a x y.\n              scale a (plus\\<^sub>V\\<^sub>S x y) =\n              plus\\<^sub>V\\<^sub>S (scale a x) (scale a y)) \\<and>\n          (\\<forall>a b x.\n              scale (a + b) x =\n              plus\\<^sub>V\\<^sub>S (scale a x) (scale b x))) \\<and>\n         (\\<forall>a b x. scale a (scale b x) = scale (a * b) x) \\<and>\n         (\\<forall>x. scale (1::'c) x = x))", "apply transfer_prover_start"], ["proof (prove)\ngoal (30 subgoals):\n 1. Transfer.Rel (=) ?bb73 (1::'c)\n 2. Transfer.Rel (B ===> B ===> ?Rah73) ?ba73 (=)\n 3. Transfer.Rel ((B ===> ?Rah73) ===> ?Rad73) ?az73 All\n 4. Transfer.Rel ((=) ===> (=) ===> (=)) ?ay73 (*)\n 5. Transfer.Rel (B ===> B ===> ?Rag73) ?ax73 (=)\n 6. Transfer.Rel ((B ===> ?Rag73) ===> ?Raf73) ?aw73 All\n 7. Transfer.Rel (((=) ===> ?Raf73) ===> ?Rae73) ?av73 All\n 8. Transfer.Rel (((=) ===> ?Rae73) ===> ?Rac73) ?au73 All\n 9. Transfer.Rel (?Rac73 ===> ?Rad73 ===> ?Rt73) ?at73 (\\<and>)\n 10. Transfer.Rel ((=) ===> (=) ===> (=)) ?as73 (+)\nA total of 30 subgoals...", "apply transfer_step+"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n        ab_group_add_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n         zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n         uminus\\<^sub>V\\<^sub>S \\<and>\n        ((\\<forall>x a.\n             x \\<in> Collect (Domainp B) \\<longrightarrow>\n             scale a x \\<in> Collect (Domainp B)) \\<and>\n         (\\<forall>x y a.\n             x \\<in> Collect (Domainp B) \\<longrightarrow>\n             y \\<in> Collect (Domainp B) \\<longrightarrow>\n             scale a (plus\\<^sub>V\\<^sub>S x y) =\n             plus\\<^sub>V\\<^sub>S (scale a x) (scale a y))) \\<and>\n        (\\<forall>x a b.\n            x \\<in> Collect (Domainp B) \\<longrightarrow>\n            scale (a + b) x =\n            plus\\<^sub>V\\<^sub>S (scale a x) (scale b x)) \\<and>\n        (\\<forall>x a b.\n            x \\<in> Collect (Domainp B) \\<longrightarrow>\n            scale a (scale b x) = scale (a * b) x) \\<and>\n        (\\<forall>x.\n            x \\<in> Collect (Domainp B) \\<longrightarrow>\n            scale (1::'c) x = x)) =\n    (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale.\n        (\\<forall>a\\<in>{x. x \\<in> UNIV}.\n            \\<forall>x\\<in>Collect (Domainp B).\n               scale a x \\<in> Collect (Domainp B)) \\<and>\n        ab_group_add_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n         zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n         uminus\\<^sub>V\\<^sub>S \\<and>\n        ((\\<forall>a\\<in>{x. x \\<in> UNIV}.\n             \\<forall>x\\<in>Collect (Domainp B).\n                \\<forall>y\\<in>Collect (Domainp B).\n                   scale a (plus\\<^sub>V\\<^sub>S x y) =\n                   plus\\<^sub>V\\<^sub>S (scale a x) (scale a y)) \\<and>\n         (\\<forall>a\\<in>{x. x \\<in> UNIV}.\n             \\<forall>b\\<in>{x. x \\<in> UNIV}.\n                \\<forall>x\\<in>Collect (Domainp B).\n                   scale (a + b) x =\n                   plus\\<^sub>V\\<^sub>S (scale a x) (scale b x))) \\<and>\n        (\\<forall>a\\<in>{x. x \\<in> UNIV}.\n            \\<forall>b\\<in>{x. x \\<in> UNIV}.\n               \\<forall>x\\<in>Collect (Domainp B).\n                  scale a (scale b x) = scale (a * b) x) \\<and>\n        (\\<forall>x\\<in>Collect (Domainp B). scale (1::'c) x = x))", "by (intro ext) blast"], ["proof (state)\nthis:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale.\n       (\\<forall>a\\<in>UNIV.\n           \\<forall>x\\<in>UNIV. scale a x \\<in> UNIV) \\<and>\n       vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale)\n\ngoal (1 subgoal):\n 1. PP lhs vector_space_with", "then"], ["proof (chain)\npicking this:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale.\n       (\\<forall>a\\<in>UNIV.\n           \\<forall>x\\<in>UNIV. scale a x \\<in> UNIV) \\<and>\n       vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale)", "show ?thesis"], ["proof (prove)\nusing this:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale.\n       (\\<forall>a\\<in>UNIV.\n           \\<forall>x\\<in>UNIV. scale a x \\<in> UNIV) \\<and>\n       vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale)\n\ngoal (1 subgoal):\n 1. PP lhs vector_space_with", "by simp"], ["proof (state)\nthis:\n  PP lhs vector_space_with\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vector_space_pair_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n          vector_space_pair_ow \n            (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n        )\"\n    shows \"PP lhs vector_space_pair_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs vector_space_pair_with", "unfolding PP_def lhs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1.\n         vector_space_pair_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          (Collect (Domainp B\\<^sub>2)))\n     vector_space_pair_with", "unfolding vector_space_pair_ow_def vector_space_pair_with_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n         vector_space_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n         vector_space_ow (Collect (Domainp B\\<^sub>2))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2)\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n         vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2)", "by transfer_prover"], ["", "lemma linear_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>1 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f.\n          linear_ow \n            (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f\n        )\n      \"\n    shows \"PP lhs linear_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs linear_with", "unfolding PP_def lhs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>1 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1.\n         linear_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          (Collect (Domainp B\\<^sub>2)))\n     linear_with", "unfolding linear_ow_def linear_with_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>1 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 f.\n         vector_space_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n         vector_space_ow (Collect (Domainp B\\<^sub>2))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 \\<and>\n         module_hom_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          (Collect (Domainp B\\<^sub>2)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 f)\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 f.\n         vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 \\<and>\n         module_hom_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 f)", "by transfer_prover"], ["", "lemma linear_with_transfer'[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"\n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        (B ===> B) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f.\n          linear_ow \n            (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n            (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n            f\n        )\n      \"\n    shows \"PP lhs linear_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs linear_with", "unfolding PP_def lhs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===>\n     (B ===> B) ===>\n     ((=) ===> B ===> B) ===>\n     (B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===>\n     (B ===> B) ===> ((=) ===> B ===> B) ===> (B ===> B) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1.\n         linear_ow (Collect (Domainp B))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          (Collect (Domainp B)))\n     linear_with", "using assms(1,2)"], ["proof (prove)\nusing this:\n  bi_unique B\n  right_total B\n\ngoal (1 subgoal):\n 1. ((B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===>\n     (B ===> B) ===>\n     ((=) ===> B ===> B) ===>\n     (B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===>\n     (B ===> B) ===> ((=) ===> B ===> B) ===> (B ===> B) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1.\n         linear_ow (Collect (Domainp B))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          (Collect (Domainp B)))\n     linear_with", "by (rule linear_with_transfer[OF assms(1,2)])"], ["", "lemma finite_dimensional_vector_space_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \"bi_unique B\" \"right_total B\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B ===> B ===> B) ===>\n        B ===>\n        (B ===> B ===> B) ===>\n        (B ===> B) ===>\n        ((=) ===> B ===> B) ===>\n        rel_set B ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n            finite_dimensional_vector_space_ow \n              (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_with", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_with", "let ?rhs = \n    \"(\n      \\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n        basis \\<subseteq> UNIV \\<and>\n        finite_dimensional_vector_space_with \n          plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis\n    )\""], ["proof (state)\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_with", "have \"PP lhs ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n         basis \\<subseteq> UNIV \\<and>\n         finite_dimensional_vector_space_with plus\\<^sub>V\\<^sub>S\n          zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n          scale basis)", "unfolding \n      PP_def lhs_def\n      finite_dimensional_vector_space_ow_def \n      finite_dimensional_vector_space_with_def\n      finite_dimensional_vector_space_ow_axioms_def\n      finite_dimensional_vector_space_with_axioms_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B ===> B ===> B) ===>\n     B ===>\n     (B ===> B ===> B) ===>\n     (B ===> B) ===> ((=) ===> B ===> B) ===> rel_set B ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n         vector_space_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n          zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n          scale \\<and>\n         (basis \\<subseteq> Collect (Domainp B) \\<and> finite basis) \\<and>\n         (with (0::'c) zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n         (with zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>span\\<guillemotright> basis) =\n         Collect (Domainp B))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n         minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n         basis \\<subseteq> UNIV \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n          minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale \\<and>\n         finite basis \\<and>\n         (with (0::'c) zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n         (with zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>span\\<guillemotright> basis) =\n         UNIV)", "apply transfer_prover_start"], ["proof (prove)\ngoal (15 subgoals):\n 1. Transfer.Rel ?Rw31 ?am31 UNIV\n 2. Transfer.Rel\n     (B ===>\n      (B ===> B ===> B) ===> ((=) ===> B ===> B) ===> rel_set B ===> ?Rv31)\n     ?al31 span.with\n 3. Transfer.Rel (?Rv31 ===> ?Rw31 ===> ?Rs31) ?ak31 (=)\n 4. Transfer.Rel ?Ru31 ?aj31 (0::'c)\n 5. Transfer.Rel\n     (?Ru31 ===>\n      B ===>\n      (B ===> B ===> B) ===> ((=) ===> B ===> B) ===> rel_set B ===> ?Rt31)\n     ?ai31 dependent.with\n 6. Transfer.Rel (?Rt31 ===> ?Rr31) ?ah31 Not\n 7. Transfer.Rel (?Rr31 ===> ?Rs31 ===> ?Rq31) ?ag31 (\\<and>)\n 8. Transfer.Rel (rel_set B ===> ?Rp31) ?af31 finite\n 9. Transfer.Rel (?Rp31 ===> ?Rq31 ===> ?Ro31) ?ae31 (\\<and>)\n 10. Transfer.Rel\n      ((B ===> B ===> B) ===>\n       B ===>\n       (B ===> B ===> B) ===>\n       (B ===> B) ===> ((=) ===> B ===> B) ===> ?Rn31)\n      ?ad31 vector_space_with\nA total of 15 subgoals...", "apply transfer_step+"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n        vector_space_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n         zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n         scale \\<and>\n        (basis \\<subseteq> Collect (Domainp B) \\<and> finite basis) \\<and>\n        (with (0::'c) zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n        (with zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>span\\<guillemotright> basis) =\n        Collect (Domainp B)) =\n    (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S\n        minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S scale basis.\n        basis \\<subseteq> Collect (Domainp B) \\<and>\n        vector_space_ow (Collect (Domainp B)) plus\\<^sub>V\\<^sub>S\n         zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n         scale \\<and>\n        finite basis \\<and>\n        (with (0::'c) zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n        (with zero\\<^sub>V\\<^sub>S plus\\<^sub>V\\<^sub>S scale : \\<guillemotleft>span\\<guillemotright> basis) =\n        Collect (Domainp B))", "by blast"], ["proof (state)\nthis:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale basis.\n       basis \\<subseteq> UNIV \\<and>\n       finite_dimensional_vector_space_with plus\\<^sub>V\\<^sub>S\n        zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n        scale basis)\n\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_with", "then"], ["proof (chain)\npicking this:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale basis.\n       basis \\<subseteq> UNIV \\<and>\n       finite_dimensional_vector_space_with plus\\<^sub>V\\<^sub>S\n        zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n        scale basis)", "show ?thesis"], ["proof (prove)\nusing this:\n  PP lhs\n   (\\<lambda>plus\\<^sub>V\\<^sub>S zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S\n       uminus\\<^sub>V\\<^sub>S scale basis.\n       basis \\<subseteq> UNIV \\<and>\n       finite_dimensional_vector_space_with plus\\<^sub>V\\<^sub>S\n        zero\\<^sub>V\\<^sub>S minus\\<^sub>V\\<^sub>S uminus\\<^sub>V\\<^sub>S\n        scale basis)\n\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_with", "by simp"], ["proof (state)\nthis:\n  PP lhs finite_dimensional_vector_space_with\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma finite_dimensional_vector_space_pair_1_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        rel_set B\\<^sub>1 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (=)\n    )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n          finite_dimensional_vector_space_pair_1_ow \n            (Collect (Domainp B\\<^sub>1)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_pair_1_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_pair_1_with", "unfolding PP_def lhs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     rel_set B\\<^sub>1 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1.\n         finite_dimensional_vector_space_pair_1_ow\n          (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n          (Collect (Domainp B\\<^sub>2)))\n     finite_dimensional_vector_space_pair_1_with", "unfolding \n    finite_dimensional_vector_space_pair_1_ow_def\n    finite_dimensional_vector_space_pair_1_with_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     rel_set B\\<^sub>1 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n         finite_dimensional_vector_space_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          basis\\<^sub>1 \\<and>\n         vector_space_ow (Collect (Domainp B\\<^sub>2))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2)\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2.\n         finite_dimensional_vector_space_with\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          basis\\<^sub>1 \\<and>\n         vector_space_with plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2)", "by transfer_prover"], ["", "lemma finite_dimensional_vector_space_pair_with_transfer[transfer_rule]:\n  includes lifting_syntax\n  assumes [transfer_rule]: \n    \"bi_unique B\\<^sub>1\" \"right_total B\\<^sub>1\" \"bi_unique B\\<^sub>2\" \"right_total B\\<^sub>2\"     \n  fixes PP lhs\n  defines\n    \"PP \\<equiv> \n      (\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        B\\<^sub>1 ===>\n        (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        (B\\<^sub>1 ===> B\\<^sub>1) ===>\n        ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n        rel_set B\\<^sub>1 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        B\\<^sub>2 ===>\n        (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        (B\\<^sub>2 ===> B\\<^sub>2) ===>\n        ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n        rel_set B\\<^sub>2 ===>\n        (=)\n      )\"\n    and\n      \"lhs \\<equiv> \n        (\n          \\<lambda>\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2.\n          finite_dimensional_vector_space_pair_ow \n            (Collect (Domainp B\\<^sub>1)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n            (Collect (Domainp B\\<^sub>2)) \n              plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2\n        )\"\n    shows \"PP lhs finite_dimensional_vector_space_pair_with\""], ["proof (prove)\ngoal (1 subgoal):\n 1. PP lhs finite_dimensional_vector_space_pair_with", "unfolding PP_def lhs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     rel_set B\\<^sub>1 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> rel_set B\\<^sub>2 ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1.\n         finite_dimensional_vector_space_pair_ow\n          (Collect (Domainp B\\<^sub>1)) plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n          (Collect (Domainp B\\<^sub>2)))\n     finite_dimensional_vector_space_pair_with", "unfolding \n    finite_dimensional_vector_space_pair_ow_def\n    finite_dimensional_vector_space_pair_with_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     B\\<^sub>1 ===>\n     (B\\<^sub>1 ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     (B\\<^sub>1 ===> B\\<^sub>1) ===>\n     ((=) ===> B\\<^sub>1 ===> B\\<^sub>1) ===>\n     rel_set B\\<^sub>1 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     B\\<^sub>2 ===>\n     (B\\<^sub>2 ===> B\\<^sub>2 ===> B\\<^sub>2) ===>\n     (B\\<^sub>2 ===> B\\<^sub>2) ===>\n     ((=) ===> B\\<^sub>2 ===> B\\<^sub>2) ===> rel_set B\\<^sub>2 ===> (=))\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2.\n         finite_dimensional_vector_space_ow (Collect (Domainp B\\<^sub>1))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          basis\\<^sub>1 \\<and>\n         finite_dimensional_vector_space_ow (Collect (Domainp B\\<^sub>2))\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n          basis\\<^sub>2)\n     (\\<lambda>plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis\\<^sub>1\n         plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n         uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis\\<^sub>2.\n         finite_dimensional_vector_space_with\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>1 scale\\<^sub>1\n          basis\\<^sub>1 \\<and>\n         finite_dimensional_vector_space_with\n          plus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          zero\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          minus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2\n          uminus\\<^sub>V\\<^sub>S\\<^sub>_\\<^sub>2 scale\\<^sub>2\n          basis\\<^sub>2)", "by transfer_prover"], ["", "subsection\\<open>\\<open>vector_space_on\\<close>\\<close>"], ["", "locale vector_space_on = module_on U\\<^sub>V\\<^sub>S scale\n  for U\\<^sub>V\\<^sub>S and scale :: \"'a::field \\<Rightarrow> 'b::ab_group_add \\<Rightarrow> 'b\" (infixr \"*s\" 75)\nbegin"], ["", "notation scale (infixr \"*s\" 75)"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: vector_space_ow U\\<^sub>V\\<^sub>S \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale"], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus (*s)", "by unfold_locales \n    (simp_all add: scale_right_distrib_on scale_left_distrib_on)"], ["", "lemmas ab_group_add_ow_axioms = implicit\\<^sub>M.ab_group_add_ow_axioms"], ["", "lemmas vector_space_ow_axioms = implicit\\<^sub>V\\<^sub>S.vector_space_ow_axioms"], ["", "definition dim :: \"'b set \\<Rightarrow> nat\"\n  where \"dim V = (if \\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S. \\<not> dependent b \\<and> span b = span V\n    then card (SOME b. b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> \\<not> dependent b \\<and> span b = span V)\n    else 0)\""], ["", "end"], ["", "lemma vector_space_on_alt_def: \"vector_space_on U\\<^sub>V\\<^sub>S = module_on U\\<^sub>V\\<^sub>S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_on U\\<^sub>V\\<^sub>S = module_on U\\<^sub>V\\<^sub>S", "unfolding vector_space_on_def module_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>scale.\n        ((\\<forall>x y a.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             y \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale a (x + y) = scale a x + scale a y) \\<and>\n         (\\<forall>x a b.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale (a + b) x = scale a x + scale b x) \\<and>\n         (\\<forall>x a b.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale a (scale b x) = scale (a * b) x)) \\<and>\n        ((\\<forall>x.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale (1::'a) x = x) \\<and>\n         (\\<forall>x y.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             y \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             x + y \\<in> U\\<^sub>V\\<^sub>S)) \\<and>\n        (0::'b) \\<in> U\\<^sub>V\\<^sub>S \\<and>\n        (\\<forall>x a.\n            x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n            scale a x \\<in> U\\<^sub>V\\<^sub>S)) =\n    (\\<lambda>scale.\n        ((\\<forall>x y a.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             y \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale a (x + y) = scale a x + scale a y) \\<and>\n         (\\<forall>x a b.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale (a + b) x = scale a x + scale b x) \\<and>\n         (\\<forall>x a b.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale a (scale b x) = scale (a * b) x)) \\<and>\n        ((\\<forall>x.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             scale (1::'a) x = x) \\<and>\n         (\\<forall>x y.\n             x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             y \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n             x + y \\<in> U\\<^sub>V\\<^sub>S)) \\<and>\n        (0::'b) \\<in> U\\<^sub>V\\<^sub>S \\<and>\n        (\\<forall>x a.\n            x \\<in> U\\<^sub>V\\<^sub>S \\<longrightarrow>\n            scale a x \\<in> U\\<^sub>V\\<^sub>S))", "by auto"], ["", "lemma implicit_vector_space_ow[tts_implicit]:\n  \"vector_space_ow U\\<^sub>V\\<^sub>S (+) 0 (-) uminus = vector_space_on U\\<^sub>V\\<^sub>S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus =\n    vector_space_on U\\<^sub>V\\<^sub>S", "proof(intro ext, rule iffI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus\n        x \\<Longrightarrow>\n       vector_space_on U\\<^sub>V\\<^sub>S x\n 2. \\<And>x.\n       vector_space_on U\\<^sub>V\\<^sub>S x \\<Longrightarrow>\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus x", "fix s :: \"'a \\<Rightarrow> 'b \\<Rightarrow> 'b\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus\n        x \\<Longrightarrow>\n       vector_space_on U\\<^sub>V\\<^sub>S x\n 2. \\<And>x.\n       vector_space_on U\\<^sub>V\\<^sub>S x \\<Longrightarrow>\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus x", "assume \"vector_space_ow U\\<^sub>V\\<^sub>S (+) 0 (-) uminus s\""], ["proof (state)\nthis:\n  vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus s\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus\n        x \\<Longrightarrow>\n       vector_space_on U\\<^sub>V\\<^sub>S x\n 2. \\<And>x.\n       vector_space_on U\\<^sub>V\\<^sub>S x \\<Longrightarrow>\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus x", "then"], ["proof (chain)\npicking this:\n  vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus s", "interpret vector_space_ow U\\<^sub>V\\<^sub>S \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus s"], ["proof (prove)\nusing this:\n  vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus s\n\ngoal (1 subgoal):\n 1. vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus s", "."], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus\n        x \\<Longrightarrow>\n       vector_space_on U\\<^sub>V\\<^sub>S x\n 2. \\<And>x.\n       vector_space_on U\\<^sub>V\\<^sub>S x \\<Longrightarrow>\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus x", "show \"vector_space_on U\\<^sub>V\\<^sub>S s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_on U\\<^sub>V\\<^sub>S s", "by \n      (\n        simp add: \n          scale_left_distrib \n          scale_right_distrib\n          module_on_def \n          vector_space_on_def\n      )"], ["proof (state)\nthis:\n  vector_space_on U\\<^sub>V\\<^sub>S s\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       vector_space_on U\\<^sub>V\\<^sub>S x \\<Longrightarrow>\n       vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-) uminus x", "qed (rule vector_space_on.vector_space_ow_axioms)"], ["", "locale linear_on = \n  VS\\<^sub>1: vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2 +\n  module_hom_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 f\n  for U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 and scale\\<^sub>1::\"'a::field \\<Rightarrow> 'b \\<Rightarrow> 'b::ab_group_add\"\n    and scale\\<^sub>2::\"'a::field \\<Rightarrow> 'c \\<Rightarrow> 'c::ab_group_add\"\n    and f"], ["", "lemma implicit_linear_on[tts_implicit]:\n  \"linear_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. linear_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+) (0::'a) (-) uminus scale\\<^sub>1\n     U\\<^sub>M\\<^sub>_\\<^sub>2 (+) (0::'b) (-) uminus scale\\<^sub>2 =\n    linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n     scale\\<^sub>1 scale\\<^sub>2", "unfolding linear_ow_def linear_on_def tts_implicit"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>f.\n        vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n        vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2 \\<and>\n        module_hom_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n         scale\\<^sub>1 scale\\<^sub>2 f) =\n    (\\<lambda>f.\n        vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n        vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2 \\<and>\n        module_hom_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n         scale\\<^sub>1 scale\\<^sub>2 f)", ".."], ["", "locale finite_dimensional_vector_space_on =\n  vector_space_on U\\<^sub>V\\<^sub>S scale \n  for U\\<^sub>V\\<^sub>S :: \"'b::ab_group_add set\" \n    and scale :: \"'a::field \\<Rightarrow> 'b \\<Rightarrow> 'b\" +\n  fixes basis :: \"'b set\"\n  assumes finite_basis: \"finite basis\"\n    and independent_basis: \"\\<not> dependent basis\"\n    and span_basis: \"span basis = U\\<^sub>V\\<^sub>S\" \n    and basis_subset: \"basis \\<subseteq> U\\<^sub>V\\<^sub>S\"\nbegin"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: \n  finite_dimensional_vector_space_ow U\\<^sub>V\\<^sub>S \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale basis"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'b) (-)\n     uminus (*s) basis", "by unfold_locales \n    (\n      simp_all add: \n        finite_basis \n        implicit_dependent_with \n        independent_basis  \n        implicit_span_with\n        span_basis\n        basis_subset\n    )"], ["", "end"], ["", "lemma implicit_finite_dimensional_vector_space_on[tts_implicit]:\n  \"finite_dimensional_vector_space_ow U\\<^sub>V\\<^sub>S (+) 0 minus uminus scale basis = \n    finite_dimensional_vector_space_on U\\<^sub>V\\<^sub>S scale basis\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_ow U\\<^sub>V\\<^sub>S (+) (0::'a) (-)\n     uminus scale basis =\n    finite_dimensional_vector_space_on U\\<^sub>V\\<^sub>S scale basis", "unfolding \n    finite_dimensional_vector_space_ow_def \n    finite_dimensional_vector_space_on_def  \n    finite_dimensional_vector_space_ow_axioms_def\n    finite_dimensional_vector_space_on_axioms_def  \n    vector_space_on_alt_def\n    tts_implicit"], ["proof (prove)\ngoal (1 subgoal):\n 1. (module_on U\\<^sub>V\\<^sub>S scale \\<and>\n     (basis \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> finite basis) \\<and>\n     (with (0::'b) (0::'a) (+) scale : \\<guillemotleft>independent\\<guillemotright> basis) \\<and>\n     (with (0::'a) (+) scale : \\<guillemotleft>span\\<guillemotright> basis) =\n     U\\<^sub>V\\<^sub>S) =\n    (module_on U\\<^sub>V\\<^sub>S scale \\<and>\n     (finite basis \\<and> \\<not> module_on.dependent scale basis) \\<and>\n     module_on.span scale basis = U\\<^sub>V\\<^sub>S \\<and>\n     basis \\<subseteq> U\\<^sub>V\\<^sub>S)", "by (metis module_on.implicit_dependent_with module_on.implicit_span_with)"], ["", "locale vector_space_pair_on = \n  VS\\<^sub>1: vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 +\n  VS\\<^sub>2: vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for U\\<^sub>M\\<^sub>_\\<^sub>1:: \"'b::ab_group_add set\" and U\\<^sub>M\\<^sub>_\\<^sub>2::\"'c::ab_group_add set\"\n    and scale\\<^sub>1::\"'a::field \\<Rightarrow> _ \\<Rightarrow> _\" (infixr \\<open>*s\\<^sub>1\\<close> 75) \n    and scale\\<^sub>2::\"'a \\<Rightarrow> _ \\<Rightarrow> _\" (infixr \\<open>*s\\<^sub>2\\<close> 75)\nbegin"], ["", "notation scale\\<^sub>1 (infixr \\<open>*s\\<^sub>1\\<close> 75)"], ["", "notation scale\\<^sub>2 (infixr \\<open>*s\\<^sub>2\\<close> 75)"], ["", "sublocale module_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. module_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n     (*s\\<^sub>1) (*s\\<^sub>2)", "by unfold_locales"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: \n  vector_space_pair_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>1 \n    U\\<^sub>M\\<^sub>_\\<^sub>2 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_pair_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+) (0::'b) (-) uminus\n     (*s\\<^sub>1) U\\<^sub>M\\<^sub>_\\<^sub>2 (+) (0::'c) (-) uminus\n     (*s\\<^sub>2)", "by unfold_locales"], ["", "end"], ["", "lemma implicit_vector_space_pair_on[tts_implicit]:\n  \"vector_space_pair_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 (-) uminus scale\\<^sub>1 \n    U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_pair_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+) (0::'a) (-) uminus\n     scale\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+) (0::'c) (-) uminus\n     scale\\<^sub>2 =\n    vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n     scale\\<^sub>1 scale\\<^sub>2", "unfolding vector_space_pair_ow_def vector_space_pair_on_def tts_implicit"], ["proof (prove)\ngoal (1 subgoal):\n 1. (vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n     vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2) =\n    (vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 \\<and>\n     vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2)", ".."], ["", "locale finite_dimensional_vector_space_pair_1_on =\n  VS\\<^sub>1: finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis1 +\n  VS\\<^sub>2: vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2\n  for U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n    and scale\\<^sub>1::\"'a::field \\<Rightarrow> 'b::ab_group_add \\<Rightarrow> 'b\"\n    and scale\\<^sub>2::\"'a::field \\<Rightarrow> 'c::ab_group_add \\<Rightarrow> 'c\"\n    and basis1\nbegin"], ["", "sublocale vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n     scale\\<^sub>1 scale\\<^sub>2", "by unfold_locales"], ["", "sublocale implicit\\<^sub>V\\<^sub>S:\n  finite_dimensional_vector_space_pair_1_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>1 basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_1_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+)\n     (0::'b) (-) uminus (*s\\<^sub>1) basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+)\n     (0::'c) (-) uminus (*s\\<^sub>2)", "by unfold_locales"], ["", "end"], ["", "lemma implicit_finite_dimensional_vector_space_pair_1_on[tts_implicit]:\n  \"finite_dimensional_vector_space_pair_1_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 = \n    finite_dimensional_vector_space_pair_1_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_1_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+)\n     (0::'a) (-) uminus scale\\<^sub>1 basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+)\n     (0::'c) (-) uminus scale\\<^sub>2 =\n    finite_dimensional_vector_space_pair_1_on U\\<^sub>M\\<^sub>_\\<^sub>1\n     U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1", "unfolding \n    finite_dimensional_vector_space_pair_1_ow_def \n    finite_dimensional_vector_space_pair_1_on_def \n    tts_implicit"], ["proof (prove)\ngoal (1 subgoal):\n 1. (finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1\n      scale\\<^sub>1 basis1 \\<and>\n     vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2) =\n    (finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1\n      scale\\<^sub>1 basis1 \\<and>\n     vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2)", ".."], ["", "locale finite_dimensional_vector_space_pair_on =\n  VS\\<^sub>1: finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1 scale\\<^sub>1 basis1 +\n  VS\\<^sub>2: finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>2 basis2\n  for U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n    and scale\\<^sub>1::\"'a::field \\<Rightarrow> 'b::ab_group_add \\<Rightarrow> 'b\"\n    and scale\\<^sub>2::\"'a::field \\<Rightarrow> 'c::ab_group_add \\<Rightarrow> 'c\"\n    and basis1 basis2\nbegin"], ["", "sublocale finite_dimensional_vector_space_pair_1_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_1_on U\\<^sub>M\\<^sub>_\\<^sub>1\n     U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1", "by unfold_locales"], ["", "sublocale implicit\\<^sub>V\\<^sub>S: \n  finite_dimensional_vector_space_pair_ow \n    U\\<^sub>M\\<^sub>_\\<^sub>1 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>1 basis1 \n    U\\<^sub>M\\<^sub>_\\<^sub>2 \\<open>(+)\\<close> 0 \\<open>(-)\\<close> uminus scale\\<^sub>2 basis2"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+)\n     (0::'b) (-) uminus (*s\\<^sub>1) basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+)\n     (0::'c) (-) uminus (*s\\<^sub>2) basis2", "by unfold_locales"], ["", "end"], ["", "lemma implicit_finite_dimensional_vector_space_pair_on[tts_implicit]:\n  \"finite_dimensional_vector_space_pair_ow \n      U\\<^sub>M\\<^sub>_\\<^sub>1 (+) 0 minus uminus scale\\<^sub>1 basis1 \n      U\\<^sub>M\\<^sub>_\\<^sub>2 (+) 0 (-) uminus scale\\<^sub>2 basis2 = \n    finite_dimensional_vector_space_pair_on \n      U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1 basis2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite_dimensional_vector_space_pair_ow U\\<^sub>M\\<^sub>_\\<^sub>1 (+)\n     (0::'a) (-) uminus scale\\<^sub>1 basis1 U\\<^sub>M\\<^sub>_\\<^sub>2 (+)\n     (0::'c) (-) uminus scale\\<^sub>2 basis2 =\n    finite_dimensional_vector_space_pair_on U\\<^sub>M\\<^sub>_\\<^sub>1\n     U\\<^sub>M\\<^sub>_\\<^sub>2 scale\\<^sub>1 scale\\<^sub>2 basis1 basis2", "unfolding \n    finite_dimensional_vector_space_pair_ow_def \n    finite_dimensional_vector_space_pair_on_def \n    tts_implicit"], ["proof (prove)\ngoal (1 subgoal):\n 1. (finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1\n      scale\\<^sub>1 basis1 \\<and>\n     finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2\n      scale\\<^sub>2 basis2) =\n    (finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>1\n      scale\\<^sub>1 basis1 \\<and>\n     finite_dimensional_vector_space_on U\\<^sub>M\\<^sub>_\\<^sub>2\n      scale\\<^sub>2 basis2)", ".."], ["", "subsection\\<open>Relativization : part I\\<close>"], ["", "context vector_space_on\nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>V\\<^sub>S::'b set\\<close>)\n  rewriting ctr_simps\n  substituting ab_group_add_ow_axioms\n    and vector_space_ow_axioms\n    and implicit\\<^sub>M.module_ow_axioms\n  applying \n    [\n      OF \n        implicit\\<^sub>M.carrier_ne \n        implicit\\<^sub>M.add_closed' \n        implicit\\<^sub>M.zero_closed \n        implicit\\<^sub>V\\<^sub>S.minus_closed' \n        implicit\\<^sub>V\\<^sub>S.uminus_closed' \n        implicit\\<^sub>V\\<^sub>S.scale_closed',\n      unfolded tts_implicit\n    ]\nbegin"], ["", "tts_lemma linear_id: \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) id\"\n  is vector_space.linear_id"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_ident: \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) (\\<lambda>x. x)\"\n  is vector_space.linear_ident"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_scale_self: \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) ((*s) c)\"\n  is vector_space.linear_scale_self"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_scale_left:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"linear_on UNIV U\\<^sub>V\\<^sub>S (*) (*s) (\\<lambda>r. r *s x)\"\n    is vector_space.linear_scale_left"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_uminus: \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) uminus\"\n    is vector_space.linear_uminus"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_imp_scale[\"consumes\" - 1, \"case_names\" \"1\"]:\n  assumes \"range D \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on UNIV U\\<^sub>V\\<^sub>S (*) (*s) D\"\n    and \"\\<And>d. \\<lbrakk>d \\<in> U\\<^sub>V\\<^sub>S; D = (\\<lambda>x. x *s d)\\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is vector_space.linear_imp_scale"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma scale_eq_0_iff:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"(a *s x = 0) = (a = 0 \\<or> x = 0)\"\n    is vector_space.scale_eq_0_iff"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma scale_left_imp_eq:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\" and \"y \\<in> U\\<^sub>V\\<^sub>S\" and \"a \\<noteq> 0\" and \"a *s x = a *s y\"\n  shows \"x = y\"\n    is vector_space.scale_left_imp_eq"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma scale_right_imp_eq:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\" and \"x \\<noteq> 0\" and \"a *s x = b *s x\"\n  shows \"a = b\"\n    is vector_space.scale_right_imp_eq"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma scale_cancel_left:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\" and \"y \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"(a *s x = a *s y) = (x = y \\<or> a = 0)\"\n    is vector_space.scale_cancel_left"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma scale_cancel_right:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"(a *s x = b *s x) = (a = b \\<or> x = 0)\"\n    is vector_space.scale_cancel_right"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma injective_scale:\n  assumes \"c \\<noteq> 0\"\n  shows \"inj_on ((*s) c) U\\<^sub>V\\<^sub>S\"\n    is vector_space.injective_scale"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dependent_def:\n  assumes \"P \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"dependent P = (\\<exists>x\\<in>P. x \\<in> span (P - {x}))\"\n    is vector_space.dependent_def"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dependent_single:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"dependent {x} = (x = 0)\"\n    is vector_space.dependent_single"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma in_span_insert:\n  assumes \"a \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"b \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"a \\<in> span (insert b S)\"\n    and \"a \\<notin> span S\"\n  shows \"b \\<in> span (insert a S)\"\n    is vector_space.in_span_insert"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dependent_insertD:\n  assumes \"a \\<in> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"a \\<notin> span S\" and \"dependent (insert a S)\"\n  shows \"dependent S\"\n    is vector_space.dependent_insertD"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_insertI:\n  assumes \"a \\<in> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"a \\<notin> span S\" and \"\\<not> dependent S\"\n  shows \"\\<not> dependent (insert a S)\"\n    is vector_space.independent_insertI"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_insert:\n  assumes \"a \\<in> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"(\\<not> dependent (insert a S)) = \n    (if a \\<in> S then \\<not> dependent S else \\<not> dependent S \\<and> a \\<notin> span S)\"\n    is vector_space.independent_insert"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma maximal_independent_subset_extend[\"consumes\" - 1, \"case_names\" \"1\"]:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> V\"\n    and \"\\<not> dependent S\"\n    and \"\\<And>B. \\<lbrakk>B \\<subseteq> U\\<^sub>V\\<^sub>S; S \\<subseteq> B; B \\<subseteq> V; \\<not> dependent B; V \\<subseteq> span B\\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is vector_space.maximal_independent_subset_extend"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma maximal_independent_subset[\"consumes\" - 1, \"case_names\" \"1\"]:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"\\<And>B. \\<lbrakk>B \\<subseteq> U\\<^sub>V\\<^sub>S; B \\<subseteq> V; \\<not> dependent B; V \\<subseteq> span B\\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is vector_space.maximal_independent_subset"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma in_span_delete:\n  assumes \"a \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"b \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"a \\<in> span S\"\n    and \"a \\<notin> span (S - {b})\"\n  shows \"b \\<in> span (insert a (S - {b}))\"\n    is vector_space.in_span_delete"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_redundant:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"x \\<in> span S\"\n  shows \"span (insert x S) = span S\"\n    is vector_space.span_redundant"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_trans:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"y \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"x \\<in> span S\"\n    and \"y \\<in> span (insert x S)\"\n  shows \"y \\<in> span S\"\n    is vector_space.span_trans"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_insert_0:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"span (insert 0 S) = span S\"\n    is vector_space.span_insert_0"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_delete_0:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"span (S - {0}) = span S\"\n    is vector_space.span_delete_0"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_image_scale:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"finite S\" and \"\\<And>x. \\<lbrakk>x \\<in> U\\<^sub>V\\<^sub>S; x \\<in> S\\<rbrakk> \\<Longrightarrow> c x \\<noteq> 0\"\n  shows \"span ((\\<lambda>x. c x *s x) ` S) = span S\"\n    is vector_space.span_image_scale"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma exchange_lemma:\n  assumes \"T \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"finite T\"\n    and \"\\<not>dependent S\"\n    and \"S \\<subseteq> span T\"\n  shows \"\\<exists>t'\\<in>Pow U\\<^sub>V\\<^sub>S. \n    card t' = card T \\<and> finite t' \\<and> S \\<subseteq> t' \\<and> t' \\<subseteq> S \\<union> T \\<and> S \\<subseteq> span t'\"\n    is vector_space.exchange_lemma"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_span_bound:\n  assumes \"T \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"finite T\"\n    and \"\\<not> dependent S\"\n    and \"S \\<subseteq> span T\"\n  shows \"finite S \\<and> card S \\<le> card T\"\n    is vector_space.independent_span_bound"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_explicit_finite_subsets:\n  assumes \"A \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"(\\<not> dependent A) = \n    (\n      \\<forall>x\\<subseteq>U\\<^sub>V\\<^sub>S. \n        x \\<subseteq> A \\<longrightarrow> \n        finite x \\<longrightarrow> \n        (\\<forall>f. (\\<Sum>v\\<in>x. f v *s v) = 0 \\<longrightarrow> (\\<forall>x\\<in>x. f x = 0))\n    )\"\n    given vector_space.independent_explicit_finite_subsets"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<subseteq> U\\<^sub>V\\<^sub>S;\n     \\<And>A.\n        A \\<subseteq> U\\<^sub>V\\<^sub>S \\<Longrightarrow>\n        (\\<not> local.dependent A) =\n        (\\<forall>S\\<in>Pow U\\<^sub>V\\<^sub>S.\n            S \\<subseteq> A \\<longrightarrow>\n            finite S \\<longrightarrow>\n            (\\<forall>u.\n                (\\<Sum>v\\<in>S. u v *s v) = (0::'b) \\<longrightarrow>\n                (\\<forall>v\\<in>S. u v = (0::'a))))\\<rbrakk>\n    \\<Longrightarrow> (\\<not> local.dependent A) =\n                      (\\<forall>x\\<subseteq>U\\<^sub>V\\<^sub>S.\n                          x \\<subseteq> A \\<longrightarrow>\n                          finite x \\<longrightarrow>\n                          (\\<forall>f.\n                              (\\<Sum>v\\<in>x. f v *s v) =\n                              (0::'b) \\<longrightarrow>\n                              (\\<forall>x\\<in>x. f x = (0::'a))))", "by auto"], ["", "tts_lemma independent_if_scalars_zero:\n  assumes \"A \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"finite A\"\n    and \"\\<And>f x. \\<lbrakk>x \\<in> U\\<^sub>V\\<^sub>S; (\\<Sum>x\\<in>A. f x *s x) = 0; x \\<in> A\\<rbrakk> \\<Longrightarrow> f x = 0\"\n  shows \"\\<not> dependent A\"\n    is vector_space.independent_if_scalars_zero"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma subspace_sums:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"subspace S\" and \"subspace T\"\n  shows \"subspace {x \\<in> U\\<^sub>V\\<^sub>S. \\<exists>a\\<in>U\\<^sub>V\\<^sub>S. \\<exists>b\\<in>U\\<^sub>V\\<^sub>S. x = a + b \\<and> a \\<in> S \\<and> b \\<in> T}\"\n    is vector_space.subspace_sums"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma bij_if_span_eq_span_bases:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"C \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"\\<not>dependent B\"\n    and \"\\<not>dependent C\"\n    and \"span B = span C\"\n  shows \"\\<exists>x. bij_betw x B C \\<and> (\\<forall>a\\<in>U\\<^sub>V\\<^sub>S. x a \\<in> U\\<^sub>V\\<^sub>S)\"\n    given vector_space.bij_if_span_eq_span_bases"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>B \\<subseteq> U\\<^sub>V\\<^sub>S;\n     C \\<subseteq> U\\<^sub>V\\<^sub>S; \\<not> local.dependent B;\n     \\<not> local.dependent C; local.span B = local.span C;\n     \\<And>B C.\n        \\<lbrakk>B \\<subseteq> U\\<^sub>V\\<^sub>S;\n         C \\<subseteq> U\\<^sub>V\\<^sub>S; \\<not> local.dependent B;\n         \\<not> local.dependent C; local.span B = local.span C\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S}.\n                             bij_betw f B C\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         bij_betw x B C \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>V\\<^sub>S.\n                             x a \\<in> U\\<^sub>V\\<^sub>S)", "by blast"], ["", "end"], ["", "end"], ["", "subsection\\<open>Transfer: \\<open>dim\\<close>\\<close>"], ["", "context vector_space_on\nbegin"], ["", "lemma dim_eq_card:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and BV: \"span B = span V\" \n    and B: \"\\<not>dependent B\"\n  shows \"dim V = card B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.dim V = card B", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. local.dim V = card B", "define p where \"p b \\<equiv> b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> \\<not>dependent b \\<and> span b = span V\" for b"], ["proof (state)\nthis:\n  p ?b \\<equiv>\n  ?b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n  \\<not> local.dependent ?b \\<and> local.span ?b = local.span V\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "from assms"], ["proof (chain)\npicking this:\n  B \\<subseteq> U\\<^sub>V\\<^sub>S\n  V \\<subseteq> U\\<^sub>V\\<^sub>S\n  local.span B = local.span V\n  \\<not> local.dependent B", "have \"p (SOME B. p B)\""], ["proof (prove)\nusing this:\n  B \\<subseteq> U\\<^sub>V\\<^sub>S\n  V \\<subseteq> U\\<^sub>V\\<^sub>S\n  local.span B = local.span V\n  \\<not> local.dependent B\n\ngoal (1 subgoal):\n 1. p (SOME B. p B)", "by (intro someI[of p B], unfold p_def) simp"], ["proof (state)\nthis:\n  p (SOME B. p B)\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "then"], ["proof (chain)\npicking this:\n  p (SOME B. p B)", "have \"\\<exists>f. bij_betw f B (SOME B. p B) \\<and> (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S)\""], ["proof (prove)\nusing this:\n  p (SOME B. p B)\n\ngoal (1 subgoal):\n 1. \\<exists>f.\n       bij_betw f B (SOME B. p B) \\<and>\n       (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S)", "by (subst (asm) p_def, intro bij_if_span_eq_span_bases) (simp_all add: assms)"], ["proof (state)\nthis:\n  \\<exists>f.\n     bij_betw f B (SOME B. p B) \\<and>\n     (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S)\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "then"], ["proof (chain)\npicking this:\n  \\<exists>f.\n     bij_betw f B (SOME B. p B) \\<and>\n     (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S)", "have \"card B = card (SOME B. p B)\""], ["proof (prove)\nusing this:\n  \\<exists>f.\n     bij_betw f B (SOME B. p B) \\<and>\n     (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S)\n\ngoal (1 subgoal):\n 1. card B = card (SOME B. p B)", "by (auto intro: bij_betw_same_card)"], ["proof (state)\nthis:\n  card B = card (SOME B. p B)\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "then"], ["proof (chain)\npicking this:\n  card B = card (SOME B. p B)", "show ?thesis"], ["proof (prove)\nusing this:\n  card B = card (SOME B. p B)\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "using assms(1,3,4)"], ["proof (prove)\nusing this:\n  card B = card (SOME B. p B)\n  B \\<subseteq> U\\<^sub>V\\<^sub>S\n  local.span B = local.span V\n  \\<not> local.dependent B\n\ngoal (1 subgoal):\n 1. local.dim V = card B", "unfolding dim_def p_def"], ["proof (prove)\nusing this:\n  card B =\n  card\n   (SOME B.\n       B \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n       \\<not> local.dependent B \\<and> local.span B = local.span V)\n  B \\<subseteq> U\\<^sub>V\\<^sub>S\n  local.span B = local.span V\n  \\<not> local.dependent B\n\ngoal (1 subgoal):\n 1. (if \\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n           \\<not> local.dependent b \\<and> local.span b = local.span V\n     then card\n           (SOME b.\n               b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n               \\<not> local.dependent b \\<and> local.span b = local.span V)\n     else 0) =\n    card B", "by auto"], ["proof (state)\nthis:\n  local.dim V = card B\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma dim_transfer[transfer_rule]: \n  includes lifting_syntax                               \n  assumes [transfer_domain_rule]: \"Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\"\n    and [transfer_rule]: \"right_total A\" \"bi_unique A\"\n    and [transfer_rule]: \"(A ===> A ===> A) plus plus'\"\n    and [transfer_rule]: \"((=) ===> A ===> A) scale scale'\"\n    and [transfer_rule]: \"A 0 zero'\"\n  shows \"(rel_set A ===> (=)) dim (dim.with plus' zero' 0 scale')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (rel_set A ===> (=)) local.dim (dim.with plus' zero' (0::'a) scale')", "proof(rule rel_funI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "(* preliminaries *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have rt_rlA: \"right_total (rel_set A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. right_total (rel_set A)", "using assms"], ["proof (prove)\nusing this:\n  Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\n  right_total A\n  bi_unique A\n  (A ===> A ===> A) (+) plus'\n  ((=) ===> A ===> A) (*s) scale'\n  A (0::'b) zero'\n\ngoal (1 subgoal):\n 1. right_total (rel_set A)", "using right_total_rel_set"], ["proof (prove)\nusing this:\n  Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\n  right_total A\n  bi_unique A\n  (A ===> A ===> A) (+) plus'\n  ((=) ===> A ===> A) (*s) scale'\n  A (0::'b) zero'\n  right_total ?A \\<Longrightarrow> right_total (rel_set ?A)\n\ngoal (1 subgoal):\n 1. right_total (rel_set A)", "by auto"], ["proof (state)\nthis:\n  right_total (rel_set A)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have Dom_rsA: \"Domainp (rel_set A) x = (x \\<subseteq> U\\<^sub>V\\<^sub>S)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Domainp (rel_set A) x = (x \\<subseteq> U\\<^sub>V\\<^sub>S)", "by (meson Domainp_set assms(1) in_mono subsetI)"], ["proof (state)\nthis:\n  Domainp (rel_set A) ?x = (?x \\<subseteq> U\\<^sub>V\\<^sub>S)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "(* hypothesis and preliminary derived results *)"], ["proof (state)\nthis:\n  Domainp (rel_set A) ?x = (?x \\<subseteq> U\\<^sub>V\\<^sub>S)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "fix V V'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "assume [transfer_rule]: \"rel_set A V V'\""], ["proof (state)\nthis:\n  rel_set A V V'\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "with assms"], ["proof (chain)\npicking this:\n  Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\n  right_total A\n  bi_unique A\n  (A ===> A ===> A) (+) plus'\n  ((=) ===> A ===> A) (*s) scale'\n  A (0::'b) zero'\n  rel_set A V V'", "have subset: \"V \\<subseteq> U\\<^sub>V\\<^sub>S\""], ["proof (prove)\nusing this:\n  Domainp A = (\\<lambda>x. x \\<in> U\\<^sub>V\\<^sub>S)\n  right_total A\n  bi_unique A\n  (A ===> A ===> A) (+) plus'\n  ((=) ===> A ===> A) (*s) scale'\n  A (0::'b) zero'\n  rel_set A V V'\n\ngoal (1 subgoal):\n 1. V \\<subseteq> U\\<^sub>V\\<^sub>S", "by (metis Domainp.DomainI rel_setD1 subsetI)"], ["proof (state)\nthis:\n  V \\<subseteq> U\\<^sub>V\\<^sub>S\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "then"], ["proof (chain)\npicking this:\n  V \\<subseteq> U\\<^sub>V\\<^sub>S", "have \"span V \\<subseteq> U\\<^sub>V\\<^sub>S\""], ["proof (prove)\nusing this:\n  V \\<subseteq> U\\<^sub>V\\<^sub>S\n\ngoal (1 subgoal):\n 1. local.span V \\<subseteq> U\\<^sub>V\\<^sub>S", "by (simp add: span_minimal subspace_UNIV)"], ["proof (state)\nthis:\n  local.span V \\<subseteq> U\\<^sub>V\\<^sub>S\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "(* convenience definitions *)"], ["proof (state)\nthis:\n  local.span V \\<subseteq> U\\<^sub>V\\<^sub>S\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define P' where \"P' =\n    (\n      \\<exists>b. \n        (with 0 zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and> \n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) = \n          (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n    )\""], ["proof (state)\nthis:\n  P' =\n  (\\<exists>b.\n      (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n      (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n      (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define P where \"P = \n    (\\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S. \\<not> dependent b \\<and> span b = span V)\""], ["proof (state)\nthis:\n  P =\n  (\\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n      \\<not> local.dependent b \\<and> local.span b = local.span V)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have \"P = P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P = P'", "unfolding P_def P'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n        \\<not> local.dependent b \\<and> local.span b = local.span V) =\n    (\\<exists>b.\n        (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))", "by (transfer, unfold tts_implicit) blast"], ["proof (state)\nthis:\n  P = P'\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define f where \"f b = (b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> \\<not> dependent b \\<and> span b = span V)\" for b"], ["proof (state)\nthis:\n  f ?b =\n  (?b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n   \\<not> local.dependent ?b \\<and> local.span ?b = local.span V)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define f' where \"f' b = (b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> f b)\" for b"], ["proof (state)\nthis:\n  f' ?b = (?b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and> f ?b)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have \"f = f'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f = f'", "unfolding f'_def f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n        \\<not> local.dependent b \\<and> local.span b = local.span V) =\n    (\\<lambda>b.\n        b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n        b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n        \\<not> local.dependent b \\<and> local.span b = local.span V)", "by simp"], ["proof (state)\nthis:\n  f = f'\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define g where \"g b = \n    (\n      (with 0 zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and> \n      (with zero' plus' scale': \\<guillemotleft>span\\<guillemotright> b) = \n      (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n    )\"\n    for b"], ["proof (state)\nthis:\n  g ?b =\n  ((with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> ?b) \\<and>\n   (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> ?b) =\n   (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "define g' where \"g' b = (b \\<subseteq> UNIV \\<and> g b)\" for b"], ["proof (state)\nthis:\n  g' ?b = (?b \\<subseteq> UNIV \\<and> g ?b)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have \"g = g'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g = g'", "unfolding g_def g'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')) =\n    (\\<lambda>b.\n        b \\<subseteq> UNIV \\<and>\n        (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n        (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))", "by simp"], ["proof (state)\nthis:\n  g = g'\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "(* towards Eps_unique_transfer_lemma *)"], ["proof (state)\nthis:\n  g = g'\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have fg[transfer_rule]: \"(rel_set A ===> (=)) f g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (rel_set A ===> (=)) f g", "unfolding \\<open>g = g'\\<close>"], ["proof (prove)\ngoal (1 subgoal):\n 1. (rel_set A ===> (=)) f g'", "unfolding f_def g'_def g_def tts_implicit[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (rel_set A ===> (=))\n     (\\<lambda>b.\n         b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n         (with (0::'a) (0::'b) (+) (*s) : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n         (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> b) =\n         (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> V))\n     (\\<lambda>b.\n         b \\<subseteq> UNIV \\<and>\n         (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n         (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n         (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))", "apply transfer_prover_start"], ["proof (prove)\ngoal (21 subgoals):\n 1. Transfer.Rel ?Rx26 ?as26 V'\n 2. Transfer.Rel ?Rw26 ?ar26 scale'\n 3. Transfer.Rel ?Rv26 ?aq26 plus'\n 4. Transfer.Rel ?Ru26 ?ap26 zero'\n 5. Transfer.Rel (?Ru26 ===> ?Rv26 ===> ?Rw26 ===> ?Rx26 ===> ?Rq26) ?ao26\n     span.with\n 6. Transfer.Rel ?Rt26 ?an26 scale'\n 7. Transfer.Rel ?Rs26 ?am26 plus'\n 8. Transfer.Rel ?Rr26 ?al26 zero'\n 9. Transfer.Rel (?Rr26 ===> ?Rs26 ===> ?Rt26 ===> rel_set A ===> ?Rp26)\n     ?ak26 span.with\n 10. Transfer.Rel (?Rp26 ===> ?Rq26 ===> ?Rj26) ?aj26 (=)\nA total of 21 subgoals...", "apply transfer_step+"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n        (with (0::'a) (0::'b) (+) (*s) : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n        (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> b) =\n        (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> V)) =\n    (\\<lambda>b.\n        b \\<subseteq> {x. x \\<in> U\\<^sub>V\\<^sub>S} \\<and>\n        (with (0::'a) (0::'b) (+) (*s) : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n        (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> b) =\n        (with (0::'b) (+) (*s) : \\<guillemotleft>span\\<guillemotright> V))", "by simp"], ["proof (state)\nthis:\n  (rel_set A ===> (=)) f g\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have ex_Dom_rsA: \"\\<exists>x. Domainp (rel_set A) x \\<and> f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x. Domainp (rel_set A) x \\<and> f x", "unfolding Dom_rsA f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<subseteq>U\\<^sub>V\\<^sub>S.\n       x \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n       \\<not> local.dependent x \\<and> local.span x = local.span V", "by \n      (\n        meson   \n          \\<open>span V \\<subseteq> U\\<^sub>V\\<^sub>S\\<close> \n          maximal_independent_subset \n          span_subspace \n          subspace_span \n          subset\n      )"], ["proof (state)\nthis:\n  \\<exists>x. Domainp (rel_set A) x \\<and> f x\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "have card_xy: \"\\<And>x y. \\<lbrakk>g x; g y\\<rbrakk> \\<Longrightarrow> card x = card y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x y. \\<lbrakk>g x; g y\\<rbrakk> \\<Longrightarrow> card x = card y", "by (transfer, unfold f_def) (metis dim_eq_card)"], ["proof (state)\nthis:\n  \\<lbrakk>g ?x; g ?y\\<rbrakk> \\<Longrightarrow> card ?x = card ?y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "(* main *)"], ["proof (state)\nthis:\n  \\<lbrakk>g ?x; g ?y\\<rbrakk> \\<Longrightarrow> card ?x = card ?y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       rel_set A x y \\<Longrightarrow>\n       local.dim x = dim.with plus' zero' (0::'a) scale' y", "show \"dim V = dim.with plus' zero' 0 scale' V'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. local.dim V = dim.with plus' zero' (0::'a) scale' V'", "proof(cases \\<open>P'\\<close>)"], ["proof (state)\ngoal (2 subgoals):\n 1. P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'\n 2. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "case True"], ["proof (state)\nthis:\n  P'\n\ngoal (2 subgoals):\n 1. P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'\n 2. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "then"], ["proof (chain)\npicking this:\n  P'", "have P"], ["proof (prove)\nusing this:\n  P'\n\ngoal (1 subgoal):\n 1. P", "unfolding \\<open>P = P'\\<close>"], ["proof (prove)\nusing this:\n  P'\n\ngoal (1 subgoal):\n 1. P'", "."], ["proof (state)\nthis:\n  P\n\ngoal (2 subgoals):\n 1. P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'\n 2. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "then"], ["proof (chain)\npicking this:\n  P", "have dim: \"dim V = card (SOME b. f b)\""], ["proof (prove)\nusing this:\n  P\n\ngoal (1 subgoal):\n 1. local.dim V = card (SOME b. f b)", "unfolding dim_def P_def f_def"], ["proof (prove)\nusing this:\n  \\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n     \\<not> local.dependent b \\<and> local.span b = local.span V\n\ngoal (1 subgoal):\n 1. (if \\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n           \\<not> local.dependent b \\<and> local.span b = local.span V\n     then card\n           (SOME b.\n               b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n               \\<not> local.dependent b \\<and> local.span b = local.span V)\n     else 0) =\n    card\n     (SOME b.\n         b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n         \\<not> local.dependent b \\<and> local.span b = local.span V)", "by simp"], ["proof (state)\nthis:\n  local.dim V = card (SOME b. f b)\n\ngoal (2 subgoals):\n 1. P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'\n 2. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "from True"], ["proof (chain)\npicking this:\n  P'", "have dw: \"dim.with plus' zero' 0 scale' V' = card (SOME b. g b)\""], ["proof (prove)\nusing this:\n  P'\n\ngoal (1 subgoal):\n 1. dim.with plus' zero' (0::'a) scale' V' = card (SOME b. g b)", "unfolding dim.with_def P'_def g_def"], ["proof (prove)\nusing this:\n  \\<exists>b.\n     (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n     (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n     (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n\ngoal (1 subgoal):\n 1. (if \\<exists>b.\n           (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n           (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n           (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n     then card\n           (SOME b.\n               (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n               (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n               (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))\n     else 0) =\n    card\n     (SOME b.\n         (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n         (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n         (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))", "by simp"], ["proof (state)\nthis:\n  dim.with plus' zero' (0::'a) scale' V' = card (SOME b. g b)\n\ngoal (2 subgoals):\n 1. P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'\n 2. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "from Eps_unique_transfer_lemma[\n        OF rt_rlA fg card_transfer[OF \\<open>bi_unique A\\<close>] ex_Dom_rsA card_xy, \n        simplified,\n        unfolded Dom_rsA,\n        folded f'_def \\<open>f = f'\\<close>\n        ]"], ["proof (chain)\npicking this:\n  card (SOME x. f x) = card (Eps g)", "show \"dim V = dim.with plus' zero' 0 scale' V'\""], ["proof (prove)\nusing this:\n  card (SOME x. f x) = card (Eps g)\n\ngoal (1 subgoal):\n 1. local.dim V = dim.with plus' zero' (0::'a) scale' V'", "unfolding dim dw"], ["proof (prove)\nusing this:\n  card (SOME x. f x) = card (Eps g)\n\ngoal (1 subgoal):\n 1. card (Eps f) = card (Eps g)", "by simp"], ["proof (state)\nthis:\n  local.dim V = dim.with plus' zero' (0::'a) scale' V'\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "case False"], ["proof (state)\nthis:\n  \\<not> P'\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "then"], ["proof (chain)\npicking this:\n  \\<not> P'", "have \"\\<not>P\""], ["proof (prove)\nusing this:\n  \\<not> P'\n\ngoal (1 subgoal):\n 1. \\<not> P", "unfolding \\<open>P = P'\\<close>"], ["proof (prove)\nusing this:\n  \\<not> P'\n\ngoal (1 subgoal):\n 1. \\<not> P'", "."], ["proof (state)\nthis:\n  \\<not> P\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "then"], ["proof (chain)\npicking this:\n  \\<not> P", "have dim: \"dim V = 0\""], ["proof (prove)\nusing this:\n  \\<not> P\n\ngoal (1 subgoal):\n 1. local.dim V = 0", "unfolding dim_def P_def"], ["proof (prove)\nusing this:\n  \\<not> (\\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n             \\<not> local.dependent b \\<and> local.span b = local.span V)\n\ngoal (1 subgoal):\n 1. (if \\<exists>b\\<subseteq>U\\<^sub>V\\<^sub>S.\n           \\<not> local.dependent b \\<and> local.span b = local.span V\n     then card\n           (SOME b.\n               b \\<subseteq> U\\<^sub>V\\<^sub>S \\<and>\n               \\<not> local.dependent b \\<and> local.span b = local.span V)\n     else 0) =\n    0", "by auto"], ["proof (state)\nthis:\n  local.dim V = 0\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "moreover"], ["proof (state)\nthis:\n  local.dim V = 0\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "from False"], ["proof (chain)\npicking this:\n  \\<not> P'", "have dw: \"dim.with plus' zero'  0 scale' V' = 0\""], ["proof (prove)\nusing this:\n  \\<not> P'\n\ngoal (1 subgoal):\n 1. dim.with plus' zero' (0::'a) scale' V' = 0", "unfolding dim.with_def P'_def g_def"], ["proof (prove)\nusing this:\n  \\<nexists>b.\n     (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n     (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n     (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n\ngoal (1 subgoal):\n 1. (if \\<exists>b.\n           (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n           (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n           (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V')\n     then card\n           (SOME b.\n               (with (0::'a) zero' plus' scale' : \\<guillemotleft>independent\\<guillemotright> b) \\<and>\n               (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> b) =\n               (with zero' plus' scale' : \\<guillemotleft>span\\<guillemotright> V'))\n     else 0) =\n    0", "by auto"], ["proof (state)\nthis:\n  dim.with plus' zero' (0::'a) scale' V' = 0\n\ngoal (1 subgoal):\n 1. \\<not> P' \\<Longrightarrow>\n    local.dim V = dim.with plus' zero' (0::'a) scale' V'", "ultimately"], ["proof (chain)\npicking this:\n  local.dim V = 0\n  dim.with plus' zero' (0::'a) scale' V' = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  local.dim V = 0\n  dim.with plus' zero' (0::'a) scale' V' = 0\n\ngoal (1 subgoal):\n 1. local.dim V = dim.with plus' zero' (0::'a) scale' V'", "by simp"], ["proof (state)\nthis:\n  local.dim V = dim.with plus' zero' (0::'a) scale' V'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  local.dim V = dim.with plus' zero' (0::'a) scale' V'\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsection\\<open>Relativization: part II\\<close>"], ["", "context vector_space_on\nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>V\\<^sub>S::'b set\\<close>)\n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and \n      (\n        \\<open>?scale::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b::ab_group_add\\<close> to \n        \\<open>(*s)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>\n      )\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>)\n  rewriting ctr_simps\n  substituting ab_group_add_ow_axioms \n    and vector_space_ow_axioms\n    and implicit\\<^sub>M.module_ow_axioms\n  eliminating \\<open>?a \\<in> ?A\\<close> and \\<open>?B \\<subseteq> ?C\\<close> through auto\n  applying \n    [\n      OF \n        implicit\\<^sub>M.carrier_ne \n        implicit\\<^sub>V\\<^sub>S.minus_closed' \n        implicit\\<^sub>V\\<^sub>S.uminus_closed', \n      unfolded tts_implicit\n     ]\nbegin"], ["", "tts_lemma dim_unique:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"B \\<subseteq> V\"\n    and \"V \\<subseteq> span B\"\n    and \"\\<not> dependent B\"\n    and \"card B = n\"\n  shows \"dim V = n\"\n    is vector_space.dim_unique"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma basis_card_eq_dim:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"B \\<subseteq> V\" and \"V \\<subseteq> span B\" and \"\\<not> dependent B\"\n  shows \"card B = dim V\"\n    is vector_space.basis_card_eq_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_eq_card_independent:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"\\<not> dependent B\"\n  shows \"dim B = card B\"\n    is vector_space.dim_eq_card_independent"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_span:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"dim (span S) = dim S\"\n    is vector_space.dim_span"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_span_eq_card_independent:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"\\<not> dependent B\"\n  shows \"dim (span B) = card B\"\n    is vector_space.dim_span_eq_card_independent"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_le_card:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"W \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"V \\<subseteq> span W\" and \"finite W\"\n  shows \"dim V \\<le> card W\"\n    is vector_space.dim_le_card"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_eq_dim:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"span S = span T\"\n  shows \"dim S = dim T\"\n    is vector_space.span_eq_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_le_card':\n  assumes \"s \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"finite s\"\n  shows \"dim s \\<le> card s\"\n    is vector_space.dim_le_card'"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma span_card_ge_dim:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"B \\<subseteq> V\" and \"V \\<subseteq> span B\" and \"finite B\"\n  shows \"dim V \\<le> card B\"\n    is vector_space.span_card_ge_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "end"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>V\\<^sub>S::'b set\\<close>) \n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>?scale::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b\\<close> to \\<open>(*s)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>)\n  rewriting ctr_simps\n  substituting ab_group_add_ow_axioms \n    and vector_space_ow_axioms\n    and implicit\\<^sub>M.module_ow_axioms\n  applying \n    [\n      OF \n        implicit\\<^sub>M.carrier_ne \n        implicit\\<^sub>V\\<^sub>S.minus_closed' \n        implicit\\<^sub>V\\<^sub>S.uminus_closed', \n        unfolded tts_implicit\n     ]\nbegin"], ["", "tts_lemma basis_exists:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"\\<And>B. \n      \\<lbrakk>\n        B \\<subseteq> U\\<^sub>V\\<^sub>S; \n        B \\<subseteq> V; \n        \\<not> dependent B; \n        V \\<subseteq> span B; \n        card B = dim V\n      \\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is vector_space.basis_exists"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "end"], ["", "end"], ["", "context finite_dimensional_vector_space_on \nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>V\\<^sub>S::'b set\\<close>)\n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>?scale::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b\\<close> to \\<open>(*s)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>)\n  rewriting ctr_simps\n  substituting ab_group_add_ow_axioms\n    and vector_space_ow_axioms\n    and implicit\\<^sub>V\\<^sub>S.finite_dimensional_vector_space_ow_axioms\n    and implicit\\<^sub>M.module_ow_axioms\n  eliminating \\<open>?a \\<in> ?A\\<close> and \\<open>?B \\<subseteq> ?C\\<close> through auto\n  applying \n    [\n      OF \n        implicit\\<^sub>M.carrier_ne \n        implicit\\<^sub>V\\<^sub>S.minus_closed' \n        implicit\\<^sub>V\\<^sub>S.uminus_closed' \n        basis_subset, \n      unfolded tts_implicit\n    ]\nbegin"], ["", "tts_lemma finiteI_independent:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"\\<not> dependent B\"\n  shows \"finite B\"\n  is finite_dimensional_vector_space.finiteI_independent"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_empty: \"dim {} = 0\"\n  is finite_dimensional_vector_space.dim_empty"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_insert:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"dim (insert x S) = (if x \\<in> span S then dim S else dim S + 1)\"\n    is finite_dimensional_vector_space.dim_insert"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_singleton:\n  assumes \"x \\<in> U\\<^sub>V\\<^sub>S\"\n  shows \"dim {x} = (if x = 0 then 0 else 1)\"\n    is finite_dimensional_vector_space.dim_singleton"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma choose_subspace_of_subspace[\"consumes\" - 1, \"case_names\" \"1\"]:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"n \\<le> dim S\"\n    and \"\\<And>T. \\<lbrakk>T \\<subseteq> U\\<^sub>V\\<^sub>S; subspace T; T \\<subseteq> span S; dim T = n\\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is finite_dimensional_vector_space.choose_subspace_of_subspace"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma basis_subspace_exists[\"consumes\" - 1, \"case_names\" \"1\"]:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"subspace S\"\n    and \"\\<And>B. \n      \\<lbrakk>\n        B \\<subseteq> U\\<^sub>V\\<^sub>S; \n        finite B; \n        B \\<subseteq> S; \n        \\<not> dependent B; \n        span B = S; \n        card B = dim S\n      \\<rbrakk> \\<Longrightarrow> thesis\"\n  shows thesis\n    is finite_dimensional_vector_space.basis_subspace_exists"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_mono:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"W \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"V \\<subseteq> span W\"\n  shows \"dim V \\<le> dim W\"\n    is finite_dimensional_vector_space.dim_mono"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_subset:\n  assumes \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> T\"\n  shows \"dim S \\<le> dim T\"\n    is finite_dimensional_vector_space.dim_subset"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_eq_0:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"(dim S = 0) = (S \\<subseteq> {0})\"\n    is finite_dimensional_vector_space.dim_eq_0"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_UNIV: \"dim U\\<^sub>V\\<^sub>S = card basis\"\n    is finite_dimensional_vector_space.dim_UNIV"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_card_le_dim:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"B \\<subseteq> V\" and \"\\<not> dependent B\"\n  shows \"card B \\<le> dim V\"\n    is finite_dimensional_vector_space.independent_card_le_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma card_ge_dim_independent:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"B \\<subseteq> V\" and \"\\<not> dependent B\" and \"dim V \\<le> card B\"\n  shows \"V \\<subseteq> span B\"\n    is finite_dimensional_vector_space.card_ge_dim_independent"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma card_le_dim_spanning:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"B \\<subseteq> V\"\n    and \"V \\<subseteq> span B\"\n    and \"finite B\"\n    and \"card B \\<le> dim V\"\n  shows \"\\<not> dependent B\"\n    is finite_dimensional_vector_space.card_le_dim_spanning"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma card_eq_dim:\n  assumes \"V \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"B \\<subseteq> V\" and \"card B = dim V\" and \"finite B\"\n  shows \"(\\<not> dependent B) = (V \\<subseteq> span B)\"\n    is finite_dimensional_vector_space.card_eq_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma subspace_dim_equal:\n  assumes \"T \\<subseteq> U\\<^sub>V\\<^sub>S\"\n    and \"subspace S\"\n    and \"subspace T\"\n    and \"S \\<subseteq> T\"\n    and \"dim T \\<le> dim S\"\n  shows \"S = T\"\n    is finite_dimensional_vector_space.subspace_dim_equal"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_eq_span:\n  assumes \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> T\" and \"dim T \\<le> dim S\"\n  shows \"span S = span T\"\n    is finite_dimensional_vector_space.dim_eq_span"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_psubset:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"span S \\<subset> span T\"\n  shows \"dim S < dim T\"\n    is finite_dimensional_vector_space.dim_psubset"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma indep_card_eq_dim_span:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"\\<not> dependent B\"\n  shows \"finite B \\<and> card B = dim (span B)\"\n    is finite_dimensional_vector_space.indep_card_eq_dim_span"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_bound_general:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"\\<not> dependent S\"\n  shows \"finite S \\<and> card S \\<le> dim S\"\n    is finite_dimensional_vector_space.independent_bound_general"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma independent_explicit:\n  assumes \"B \\<subseteq> U\\<^sub>V\\<^sub>S\"\n  shows \"(\\<not> dependent B) = \n    (finite B \\<and> (\\<forall>x. (\\<Sum>v\\<in>B. x v *s v) = 0 \\<longrightarrow> (\\<forall>a\\<in>B. x a = 0)))\"\n    is finite_dimensional_vector_space.independent_explicit"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dim_sums_Int:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"subspace S\" and \"subspace T\"\n  shows \n    \"dim {x \\<in> U\\<^sub>V\\<^sub>S. \\<exists>y\\<in>U\\<^sub>V\\<^sub>S. \\<exists>z\\<in>U\\<^sub>V\\<^sub>S. x = y + z \\<and> y \\<in> S \\<and> z \\<in> T} + dim (S \\<inter> T) = \n      dim S + dim T\"\n    is finite_dimensional_vector_space.dim_sums_Int"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma dependent_biggerset_general:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"finite S \\<Longrightarrow> dim S < card S\"\n  shows \"dependent S\"\n    is finite_dimensional_vector_space.dependent_biggerset_general"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma subset_le_dim:\n  assumes \"S \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"T \\<subseteq> U\\<^sub>V\\<^sub>S\" and \"S \\<subseteq> span T\"\n  shows \"dim S \\<le> dim T\"\n    is finite_dimensional_vector_space.subset_le_dim"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inj_imp_surj:\n  assumes \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f\"\n    and \"inj_on f U\\<^sub>V\\<^sub>S\"\n  shows \"f ` U\\<^sub>V\\<^sub>S = U\\<^sub>V\\<^sub>S\"\n    is finite_dimensional_vector_space.linear_inj_imp_surj"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_surj_imp_inj:\n  assumes \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f\"\n    and \"f ` U\\<^sub>V\\<^sub>S = U\\<^sub>V\\<^sub>S\"\n  shows \"inj_on f U\\<^sub>V\\<^sub>S\"\n    is finite_dimensional_vector_space.linear_surj_imp_inj"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inverse_left:\n  assumes \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f' x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f'\"\n  shows \"(\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. (f \\<circ> f') x = id x) = (\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. (f' \\<circ> f) x = id x)\"\n    is finite_dimensional_vector_space.linear_inverse_left[unfolded fun_eq_iff]"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma left_inverse_linear:\n  assumes \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. g x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f\"\n    and \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. (g \\<circ> f) x = id x\"\n  shows \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) g\"\n    is finite_dimensional_vector_space.left_inverse_linear[unfolded fun_eq_iff]"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma right_inverse_linear:\n  assumes \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. f x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. g x \\<in> U\\<^sub>V\\<^sub>S\"\n    and \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) f\"\n    and \"\\<forall>x\\<in>U\\<^sub>V\\<^sub>S. (f \\<circ> g) x = id x\"\n  shows \"linear_on U\\<^sub>V\\<^sub>S U\\<^sub>V\\<^sub>S (*s) (*s) g\"\n    is finite_dimensional_vector_space.right_inverse_linear[unfolded fun_eq_iff]"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "end"], ["", "end"], ["", "context vector_space_pair_on \nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>1::'b set\\<close>) and (?'c to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>2::'c set\\<close>) \n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>?s1.0::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b\\<close> to \\<open>(*s\\<^sub>1)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>) \n    and (\\<open>(+)::?'c::ab_group_add\\<Rightarrow>?'c\\<Rightarrow>?'c\\<close> to \\<open>(+)::'c\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>?s2.0::?'a::field \\<Rightarrow>?'c::ab_group_add\\<Rightarrow>?'c\\<close> to \\<open>(*s\\<^sub>2)::'a\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>0::?'c::ab_group_add\\<close> to \\<open>0::'c\\<close>)\n  rewriting ctr_simps\n  substituting VS\\<^sub>1.ab_group_add_ow_axioms\n    and VS\\<^sub>1.vector_space_ow_axioms\n    and VS\\<^sub>2.ab_group_add_ow_axioms\n    and VS\\<^sub>2.vector_space_ow_axioms\n    and implicit\\<^sub>V\\<^sub>S.vector_space_pair_ow_axioms\n    and VS\\<^sub>1.implicit\\<^sub>M.module_ow_axioms\n    and VS\\<^sub>2.implicit\\<^sub>M.module_ow_axioms\n  eliminating \\<open>?a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\\<close> and \\<open>?B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\\<close> and \\<open>?a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\\<close> and \\<open>?B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\\<close> \n    through auto\n  applying  \n    [\n      OF \n        VS\\<^sub>1.implicit\\<^sub>M.carrier_ne VS\\<^sub>2.implicit\\<^sub>M.carrier_ne \n        VS\\<^sub>1.implicit\\<^sub>M.minus_closed' VS\\<^sub>1.implicit\\<^sub>M.uminus_closed' \n        VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.minus_closed' VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.uminus_closed',\n      unfolded tts_implicit\n    ]\nbegin"], ["", "tts_lemma linear_add:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"b1 \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"b2 \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"f (b1 + b2) = f b1 + f b2\"\n    is vector_space_pair.linear_add"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_scale:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"b \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"f (r *s\\<^sub>1 b) = r *s\\<^sub>2 f b\"\n    is vector_space_pair.linear_scale"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_neg:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"f (- x) = - f x\"\n    is vector_space_pair.linear_neg"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_diff:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"y \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"f (x - y) = f x - f y\"\n    is vector_space_pair.linear_diff"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_sum:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"range g \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"f (sum g S) = (\\<Sum>a\\<in>S. f (g a))\"\nis vector_space_pair.linear_sum"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inj_on_iff_eq_0:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"s \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>1.subspace s\"\n  shows \"inj_on f s = (\\<forall>x\\<in>s. f x = 0 \\<longrightarrow> x = 0)\"\n    is vector_space_pair.linear_inj_on_iff_eq_0"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inj_iff_eq_0:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1 = (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x = 0 \\<longrightarrow> x = 0)\"\n    is vector_space_pair.linear_inj_iff_eq_0"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_subspace_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>1.subspace S\"\n  shows \"VS\\<^sub>2.subspace (f ` S)\"\n    is vector_space_pair.linear_subspace_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_subspace_kernel:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"VS\\<^sub>1.subspace {x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1. f x = 0}\"\n    is vector_space_pair.linear_subspace_kernel"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_span_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"VS\\<^sub>2.span (f ` S) = f ` VS\\<^sub>1.span S\"\n    is vector_space_pair.linear_span_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_dependent_inj_imageD:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"s \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>2.dependent (f ` s)\"\n    and \"inj_on f (VS\\<^sub>1.span s)\"\n  shows \"VS\\<^sub>1.dependent s\"\n    is vector_space_pair.linear_dependent_inj_imageD"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_eq_0_on_span:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"b \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"\\<And>x. \\<lbrakk>x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1; x \\<in> b\\<rbrakk> \\<Longrightarrow> f x = 0\"\n    and \"x \\<in> VS\\<^sub>1.span b\"\n  shows \"f x = 0\"\n    is vector_space_pair.linear_eq_0_on_span"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_independent_injective_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"s \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"\\<not> VS\\<^sub>1.dependent s\"\n    and \"inj_on f (VS\\<^sub>1.span s)\"\n  shows \"\\<not> VS\\<^sub>2.dependent (f ` s)\"\n    is vector_space_pair.linear_independent_injective_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inj_on_span_independent_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"\\<not> VS\\<^sub>2.dependent (f ` B)\"\n    and \"inj_on f B\"\n  shows \"inj_on f (VS\\<^sub>1.span B)\"\n    is vector_space_pair.linear_inj_on_span_independent_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_inj_on_span_iff_independent_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"\\<not> VS\\<^sub>2.dependent (f ` B)\"\n  shows \"inj_on f (VS\\<^sub>1.span B) = inj_on f B\"\n    is vector_space_pair.linear_inj_on_span_iff_independent_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_subspace_linear_preimage:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>2.subspace S\"\n  shows \"VS\\<^sub>1.subspace {x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> S}\"\n    is vector_space_pair.linear_subspace_linear_preimage"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_spans_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"V \\<subseteq> VS\\<^sub>1.span B\"\n  shows \"f ` V \\<subseteq> VS\\<^sub>2.span (f ` B)\"\n    is vector_space_pair.linear_spans_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_spanning_surjective_image:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"U\\<^sub>M\\<^sub>_\\<^sub>1 \\<subseteq> VS\\<^sub>1.span S\"\n    and \"f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\"\n  shows \"U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> VS\\<^sub>2.span (f ` S)\"\n    is vector_space_pair.linear_spanning_surjective_image"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_eq_on_span:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. g x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) g\"\n    and \"\\<And>x. \\<lbrakk>x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1; x \\<in> B\\<rbrakk> \\<Longrightarrow> f x = g x\"\n    and \"x \\<in> VS\\<^sub>1.span B\"\n  shows \"f x = g x\"\n    is vector_space_pair.linear_eq_on_span"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_scale_right:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. c *s\\<^sub>2 f x)\"\n    is vector_space_pair.linear_compose_scale_right"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_add:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. g x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) g\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. f x + g x)\"\n    is vector_space_pair.linear_compose_add"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_zero:\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. 0)\"\n    is vector_space_pair.linear_zero"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_sub:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. g x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) g\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. f x - g x)\"\n    is vector_space_pair.linear_compose_sub"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_neg:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. - f x)\"\n    is vector_space_pair.linear_compose_neg"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_scale:\n  assumes \"c \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 UNIV (*s\\<^sub>1) (*) f\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. f x *s\\<^sub>2 c)\"\n    is vector_space_pair.linear_compose_scale"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_indep_image_lemma:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"finite B\"\n    and \"\\<not> VS\\<^sub>2.dependent (f ` B)\"\n    and \"inj_on f B\"\n    and \"x \\<in> VS\\<^sub>1.span B\"\n    and \"f x = 0\"\n  shows \"x = 0\"\n    is vector_space_pair.linear_indep_image_lemma"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_eq_on:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. g x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) g\"\n    and \"x \\<in> VS\\<^sub>1.span B\"\n    and \"\\<And>b. \\<lbrakk>b \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1; b \\<in> B\\<rbrakk> \\<Longrightarrow> f b = g b\"\n  shows \"f x = g x\"\n    is vector_space_pair.linear_eq_on"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_compose_sum:\n  assumes \"\\<forall>x. \\<forall>y\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x y \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<forall>x\\<in>S. linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (f x)\"\n  shows \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) (\\<lambda>x. \\<Sum>a\\<in>S. f a x)\"\n    is vector_space_pair.linear_compose_sum"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_independent_extend_subspace:\n  assumes \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<not> VS\\<^sub>1.dependent B\"\n  shows \n    \"\\<exists>x.\n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) x \\<and> \n      (\\<forall>a\\<in>B. x a = f a) \\<and> \n      x ` U\\<^sub>M\\<^sub>_\\<^sub>1 = VS\\<^sub>2.span (f ` B)\"\n    given vector_space_pair.linear_independent_extend_subspace"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n        f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     \\<not> VS\\<^sub>1.dependent B;\n     \\<And>B f.\n        \\<lbrakk>B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n            f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         \\<not> VS\\<^sub>1.dependent B\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2}.\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                              U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                              (*s\\<^sub>2) g \\<and>\n                             (\\<forall>x\\<in>B. g x = f x) \\<and>\n                             g ` U\\<^sub>M\\<^sub>_\\<^sub>1 =\n                             VS\\<^sub>2.span (f ` B)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                          U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                          (*s\\<^sub>2) x \\<and>\n                         (\\<forall>a\\<in>B. x a = f a) \\<and>\n                         x ` U\\<^sub>M\\<^sub>_\\<^sub>1 =\n                         VS\\<^sub>2.span (f ` B)", "by auto"], ["", "tts_lemma linear_independent_extend:\n  assumes \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"\\<not> VS\\<^sub>1.dependent B\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and> \n      (\\<forall>a\\<in>B. x a = f a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) x\"\n    given vector_space_pair.linear_independent_extend"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n        f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     \\<not> VS\\<^sub>1.dependent B;\n     \\<And>B f.\n        \\<lbrakk>B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n            f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         \\<not> VS\\<^sub>1.dependent B\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2}.\n                             (\\<forall>x\\<in>B. g x = f x) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                              U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                              (*s\\<^sub>2) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n                         (\\<forall>a\\<in>B. x a = f a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                          U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                          (*s\\<^sub>2) x", "by auto"], ["", "tts_lemma linear_exists_left_inverse_on:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>1.subspace V\"\n    and \"inj_on f V\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> V \\<and> \n      (\\<forall>a\\<in>V. x (f a) = a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_exists_left_inverse_on"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     VS\\<^sub>1.subspace V; inj_on f V;\n     \\<And>f V.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         VS\\<^sub>1.subspace V; inj_on f V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             g ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                             \\<subseteq> V \\<and>\n                             (\\<forall>v\\<in>V. g (f v) = v) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> V \\<and>\n                         (\\<forall>a\\<in>V. x (f a) = a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "tts_lemma linear_exists_right_inverse_on:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>1.subspace V\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> V \\<and> \n      (\\<forall>a\\<in>f ` V. f (x a) = a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_exists_right_inverse_on"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     VS\\<^sub>1.subspace V;\n     \\<And>f V.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         V \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         VS\\<^sub>1.subspace V\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             g ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                             \\<subseteq> V \\<and>\n                             (\\<forall>v\\<in>f ` V. f (g v) = v) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> V \\<and>\n                         (\\<forall>a\\<in>f ` V. f (x a) = a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "tts_lemma linear_inj_on_left_inverse:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"inj_on f (VS\\<^sub>1.span S)\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> VS\\<^sub>1.span S \\<and> \n      (\\<forall>a\\<in>VS\\<^sub>1.span S. x (f a) = a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_inj_on_left_inverse"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     inj_on f (VS\\<^sub>1.span S);\n     \\<And>f S.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         inj_on f (VS\\<^sub>1.span S)\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             g ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                             \\<subseteq> VS\\<^sub>1.span S \\<and>\n                             (\\<forall>x\\<in>VS\\<^sub>1.span S.\n                                 g (f x) = x) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         x ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                         \\<subseteq> VS\\<^sub>1.span S \\<and>\n                         (\\<forall>a\\<in>VS\\<^sub>1.span S.\n                             x (f a) = a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "tts_lemma linear_surj_right_inverse:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>2.span T \\<subseteq> f ` VS\\<^sub>1.span S\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      x ` U\\<^sub>M\\<^sub>_\\<^sub>2 \\<subseteq> VS\\<^sub>1.span S \\<and> \n      (\\<forall>a\\<in>VS\\<^sub>2.span T. f (x a) = a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_surj_right_inverse"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     VS\\<^sub>2.span T \\<subseteq> f ` VS\\<^sub>1.span S;\n     \\<And>f T S.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         VS\\<^sub>2.span T \\<subseteq> f ` VS\\<^sub>1.span S\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             g ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                             \\<subseteq> VS\\<^sub>1.span S \\<and>\n                             (\\<forall>x\\<in>VS\\<^sub>2.span T.\n                                 f (g x) = x) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         x ` U\\<^sub>M\\<^sub>_\\<^sub>2\n                         \\<subseteq> VS\\<^sub>1.span S \\<and>\n                         (\\<forall>a\\<in>VS\\<^sub>2.span T.\n                             f (x a) = a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "tts_lemma finite_basis_to_basis_subspace_isomorphism:\n  assumes \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"VS\\<^sub>1.subspace S\"\n    and \"VS\\<^sub>2.subspace T\"\n    and \"VS\\<^sub>1.dim S = VS\\<^sub>2.dim T\"\n    and \"finite B\"\n    and \"B \\<subseteq> S\"\n    and \"\\<not> VS\\<^sub>1.dependent B\"\n    and \"S \\<subseteq> VS\\<^sub>1.span B\"\n    and \"card B = VS\\<^sub>1.dim S\"\n    and \"finite C\"\n    and \"C \\<subseteq> T\"\n    and \"\\<not> VS\\<^sub>2.dependent C\"\n    and \"T \\<subseteq> VS\\<^sub>2.span C\"\n    and \"card C = VS\\<^sub>2.dim T\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) x \\<and> \n      x ` B = C \\<and> \n      inj_on x S \\<and> x ` S = T\"\n    given vector_space_pair.finite_basis_to_basis_subspace_isomorphism"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n     VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T; finite B;\n     B \\<subseteq> S; \\<not> VS\\<^sub>1.dependent B;\n     S \\<subseteq> VS\\<^sub>1.span B; card B = VS\\<^sub>1.dim S; finite C;\n     C \\<subseteq> T; \\<not> VS\\<^sub>2.dependent C;\n     T \\<subseteq> VS\\<^sub>2.span C; card C = VS\\<^sub>2.dim T;\n     \\<And>S T B C.\n        \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n         VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T;\n         finite B; B \\<subseteq> S; \\<not> VS\\<^sub>1.dependent B;\n         S \\<subseteq> VS\\<^sub>1.span B; card B = VS\\<^sub>1.dim S;\n         finite C; C \\<subseteq> T; \\<not> VS\\<^sub>2.dependent C;\n         T \\<subseteq> VS\\<^sub>2.span C; card C = VS\\<^sub>2.dim T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2}.\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                              U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                              (*s\\<^sub>2) f \\<and>\n                             f ` B = C \\<and>\n                             inj_on f S \\<and> f ` S = T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                          U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                          (*s\\<^sub>2) x \\<and>\n                         x ` B = C \\<and> inj_on x S \\<and> x ` S = T", "by auto"], ["", "tts_lemma linear_subspace_vimage:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"VS\\<^sub>2.subspace S\"\n  shows \"VS\\<^sub>1.subspace (f -` S \\<inter> U\\<^sub>M\\<^sub>_\\<^sub>1)\"\n    is vector_space_pair.linear_subspace_vimage"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_injective_left_inverse:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. (x \\<circ> f) a = id a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_injective_left_inverse[unfolded fun_eq_iff]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1;\n     \\<And>f.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                                 (g \\<circ> f) x = id x) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             (x \\<circ> f) a = id a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "tts_lemma linear_surjective_right_inverse:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. (f \\<circ> x) a = id a) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x\"\n    given vector_space_pair.linear_surjective_right_inverse[unfolded fun_eq_iff]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2;\n     \\<And>f.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\\<rbrakk>\n        \\<Longrightarrow> \\<exists>g\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                                 (f \\<circ> g) x = id x) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) g\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             (f \\<circ> x) a = id a) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x", "by auto"], ["", "end"], ["", "end"], ["", "context finite_dimensional_vector_space_pair_1_on \nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>1::'b set\\<close>) and (?'c to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>2::'c set\\<close>) \n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>?s1.0::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b\\<close> to \\<open>(*s\\<^sub>1)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>) \n    and (\\<open>(+)::?'c::ab_group_add\\<Rightarrow>?'c\\<Rightarrow>?'c\\<close> to \\<open>(+)::'c\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>?s2.0::?'a::field \\<Rightarrow>?'c::ab_group_add\\<Rightarrow>?'c\\<close> to \\<open>(*s\\<^sub>2)::'a\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>0::?'c::ab_group_add\\<close> to \\<open>0::'c\\<close>)\n  rewriting ctr_simps\n  substituting VS\\<^sub>1.ab_group_add_ow_axioms\n    and VS\\<^sub>1.vector_space_ow_axioms\n    and VS\\<^sub>2.ab_group_add_ow_axioms\n    and VS\\<^sub>2.vector_space_ow_axioms\n    and implicit\\<^sub>V\\<^sub>S.vector_space_pair_ow_axioms\n    and VS\\<^sub>1.implicit\\<^sub>M.module_ow_axioms\n    and VS\\<^sub>2.implicit\\<^sub>M.module_ow_axioms \n    and implicit\\<^sub>V\\<^sub>S.finite_dimensional_vector_space_pair_1_ow_axioms\n  applying  \n    [\n      OF \n        VS\\<^sub>1.implicit\\<^sub>M.carrier_ne VS\\<^sub>2.implicit\\<^sub>M.carrier_ne \n        VS\\<^sub>1.implicit\\<^sub>V\\<^sub>S.minus_closed' VS\\<^sub>1.implicit\\<^sub>V\\<^sub>S.uminus_closed' \n        VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.minus_closed' VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.uminus_closed'\n        VS\\<^sub>1.basis_subset,\n      unfolded tts_implicit\n    ]\nbegin"], ["", "tts_lemma lt_dim_image_eq:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"inj_on f (VS\\<^sub>1.span S)\"\n  shows \"VS\\<^sub>2.dim (f ` S) = VS\\<^sub>1.dim S\"\n    is finite_dimensional_vector_space_pair_1.dim_image_eq"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma lt_dim_image_le:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n  shows \"VS\\<^sub>2.dim (f ` S) \\<le> VS\\<^sub>1.dim S\"\n    is finite_dimensional_vector_space_pair_1.dim_image_le"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "end"], ["", "end"], ["", "context finite_dimensional_vector_space_pair_on \nbegin"], ["", "tts_context\n  tts: (?'b to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>1::'b set\\<close>) and (?'c to \\<open>U\\<^sub>M\\<^sub>_\\<^sub>2::'c set\\<close>) \n  sbterms: (\\<open>(+)::?'b::ab_group_add\\<Rightarrow>?'b\\<Rightarrow>?'b\\<close> to \\<open>(+)::'b\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>?s1.0::?'a::field \\<Rightarrow>?'b::ab_group_add\\<Rightarrow>?'b\\<close> to \\<open>(*s\\<^sub>1)::'a\\<Rightarrow>'b\\<Rightarrow>'b\\<close>)\n    and (\\<open>0::?'b::ab_group_add\\<close> to \\<open>0::'b\\<close>) \n    and (\\<open>(+)::?'c::ab_group_add\\<Rightarrow>?'c\\<Rightarrow>?'c\\<close> to \\<open>(+)::'c\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>?s2.0::?'a::field \\<Rightarrow>?'c::ab_group_add\\<Rightarrow>?'c\\<close> to \\<open>(*s\\<^sub>2)::'a\\<Rightarrow>'c\\<Rightarrow>'c\\<close>)\n    and (\\<open>0::?'c::ab_group_add\\<close> to \\<open>0::'c\\<close>)\n  rewriting ctr_simps\n  substituting VS\\<^sub>1.ab_group_add_ow_axioms\n    and VS\\<^sub>1.vector_space_ow_axioms\n    and VS\\<^sub>2.ab_group_add_ow_axioms\n    and VS\\<^sub>2.vector_space_ow_axioms\n    and implicit\\<^sub>V\\<^sub>S.vector_space_pair_ow_axioms\n    and VS\\<^sub>1.implicit\\<^sub>M.module_ow_axioms\n    and VS\\<^sub>2.implicit\\<^sub>M.module_ow_axioms \n    and implicit\\<^sub>V\\<^sub>S.finite_dimensional_vector_space_pair_ow_axioms\n  applying  \n    [\n      OF \n        VS\\<^sub>1.implicit\\<^sub>M.carrier_ne VS\\<^sub>2.implicit\\<^sub>M.carrier_ne \n        VS\\<^sub>1.implicit\\<^sub>V\\<^sub>S.minus_closed' VS\\<^sub>1.implicit\\<^sub>V\\<^sub>S.uminus_closed' \n        VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.minus_closed' VS\\<^sub>2.implicit\\<^sub>V\\<^sub>S.uminus_closed'\n        VS\\<^sub>1.basis_subset VS\\<^sub>2.basis_subset,\n      unfolded tts_implicit\n    ]\nbegin"], ["", "tts_lemma linear_surjective_imp_injective:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 = VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\"\n  shows \"inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    is finite_dimensional_vector_space_pair.linear_surjective_imp_injective"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_injective_imp_surjective:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 = VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\"\n  shows \"f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    is finite_dimensional_vector_space_pair.linear_injective_imp_surjective"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "tts_lemma linear_injective_isomorphism:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 = VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\"\n  shows \n    \"\\<exists>x. \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x (f a) = a) \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. f (x a) = a)\"\n    given finite_dimensional_vector_space_pair.linear_injective_isomorphism"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1;\n     VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 =\n     VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1;\n     \\<And>f.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         inj_on f U\\<^sub>M\\<^sub>_\\<^sub>1;\n         VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 =\n         VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f'\\<in>{f.\n     \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n        f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) f' \\<and>\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                                 f' (f x) = x) \\<and>\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                                 f (f' x) = x)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x (f a) = a) \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             f (x a) = a)", "by auto"], ["", "tts_lemma linear_surjective_isomorphism:\n  assumes \"\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) f\"\n    and \"f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 = VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\"\n  shows \n    \"\\<exists>x.\n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and> \n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>2 U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2) (*s\\<^sub>1) x \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x (f a) = a) \\<and> \n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2. f (x a) = a)\"\n    given finite_dimensional_vector_space_pair.linear_surjective_isomorphism"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n      (*s\\<^sub>1) (*s\\<^sub>2) f;\n     f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2;\n     VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 =\n     VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1;\n     \\<And>f.\n        \\<lbrakk>\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                    f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2\n          (*s\\<^sub>1) (*s\\<^sub>2) f;\n         f ` U\\<^sub>M\\<^sub>_\\<^sub>1 = U\\<^sub>M\\<^sub>_\\<^sub>2;\n         VS\\<^sub>2.dim U\\<^sub>M\\<^sub>_\\<^sub>2 =\n         VS\\<^sub>1.dim U\\<^sub>M\\<^sub>_\\<^sub>1\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f'\\<in>{f.\n     \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n        f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1}.\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                              U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                              (*s\\<^sub>1) f' \\<and>\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                                 f' (f x) = x) \\<and>\n                             (\\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                                 f (f' x) = x)\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>1) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>2\n                          U\\<^sub>M\\<^sub>_\\<^sub>1 (*s\\<^sub>2)\n                          (*s\\<^sub>1) x \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x (f a) = a) \\<and>\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>2.\n                             f (x a) = a)", "by auto"], ["", "tts_lemma basis_to_basis_subspace_isomorphism:\n  assumes \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"C \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"VS\\<^sub>1.subspace S\"\n    and \"VS\\<^sub>2.subspace T\"\n    and \"VS\\<^sub>1.dim S = VS\\<^sub>2.dim T\"\n    and \"B \\<subseteq> S\"\n    and \"\\<not> VS\\<^sub>1.dependent B\"\n    and \"S \\<subseteq> VS\\<^sub>1.span B\"\n    and \"card B = VS\\<^sub>1.dim S\"\n    and \"C \\<subseteq> T\"\n    and \"\\<not> VS\\<^sub>2.dependent C\"\n    and \"T \\<subseteq> VS\\<^sub>2.span C\"\n    and \"card C = VS\\<^sub>2.dim T\"\n  shows\n    \"\\<exists>x.\n      (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n      linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) x \\<and>\n      x ` B = C \\<and>\n      inj_on x S \\<and>\n      x ` S = T\"\n  given finite_dimensional_vector_space_pair.basis_to_basis_subspace_isomorphism"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2;\n     B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     C \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n     VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T;\n     B \\<subseteq> S; \\<not> VS\\<^sub>1.dependent B;\n     S \\<subseteq> VS\\<^sub>1.span B; card B = VS\\<^sub>1.dim S;\n     C \\<subseteq> T; \\<not> VS\\<^sub>2.dependent C;\n     T \\<subseteq> VS\\<^sub>2.span C; card C = VS\\<^sub>2.dim T;\n     \\<And>S T B C.\n        \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2;\n         B \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         C \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n         VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T;\n         B \\<subseteq> S; \\<not> VS\\<^sub>1.dependent B;\n         S \\<subseteq> VS\\<^sub>1.span B; card B = VS\\<^sub>1.dim S;\n         C \\<subseteq> T; \\<not> VS\\<^sub>2.dependent C;\n         T \\<subseteq> VS\\<^sub>2.span C; card C = VS\\<^sub>2.dim T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2}.\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                              U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                              (*s\\<^sub>2) f \\<and>\n                             f ` B = C \\<and>\n                             inj_on f S \\<and> f ` S = T\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                          U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                          (*s\\<^sub>2) x \\<and>\n                         x ` B = C \\<and> inj_on x S \\<and> x ` S = T", "by auto"], ["", "tts_lemma subspace_isomorphism:\n  assumes \"S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1\"\n    and \"T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2\"\n    and \"VS\\<^sub>1.subspace S\"\n    and \"VS\\<^sub>2.subspace T\"\n    and \"VS\\<^sub>1.dim S = VS\\<^sub>2.dim T\"\n  shows \"\\<exists>x.\n    (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1. x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n    (inj_on x S \\<and> x ` S = T) \\<and>\n    linear_on U\\<^sub>M\\<^sub>_\\<^sub>1 U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1) (*s\\<^sub>2) x\"\n    given finite_dimensional_vector_space_pair.subspace_isomorphism"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n     T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n     VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T;\n     \\<And>S T.\n        \\<lbrakk>S \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>1;\n         T \\<subseteq> U\\<^sub>M\\<^sub>_\\<^sub>2; VS\\<^sub>1.subspace S;\n         VS\\<^sub>2.subspace T; VS\\<^sub>1.dim S = VS\\<^sub>2.dim T\\<rbrakk>\n        \\<Longrightarrow> \\<exists>f\\<in>{f.\n    \\<forall>x\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n       f x \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2}.\n                             (inj_on f S \\<and> f ` S = T) \\<and>\n                             linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                              U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                              (*s\\<^sub>2) f\\<rbrakk>\n    \\<Longrightarrow> \\<exists>x.\n                         (\\<forall>a\\<in>U\\<^sub>M\\<^sub>_\\<^sub>1.\n                             x a \\<in> U\\<^sub>M\\<^sub>_\\<^sub>2) \\<and>\n                         (inj_on x S \\<and> x ` S = T) \\<and>\n                         linear_on U\\<^sub>M\\<^sub>_\\<^sub>1\n                          U\\<^sub>M\\<^sub>_\\<^sub>2 (*s\\<^sub>1)\n                          (*s\\<^sub>2) x", "by auto"], ["", "end"], ["", "end"], ["", "text\\<open>\\newpage\\<close>"], ["", "end"]]}