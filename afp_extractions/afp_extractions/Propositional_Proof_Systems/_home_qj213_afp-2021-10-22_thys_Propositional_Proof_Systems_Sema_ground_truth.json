{"file_name": "/home/qj213/afp-2021-10-22/thys/Propositional_Proof_Systems/Sema.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Propositional_Proof_Systems", "problem_names": ["lemma irrelevant_atom[simp]: \"A \\<notin> atoms F \\<Longrightarrow> (\\<A>(A := V)) \\<Turnstile> F \\<longleftrightarrow> \\<A> \\<Turnstile> F\"", "lemma relevant_atoms_same_semantics: \"\\<forall>k \\<in> atoms F. \\<A>\\<^sub>1 k = \\<A>\\<^sub>2 k \\<Longrightarrow> \\<A>\\<^sub>1 \\<Turnstile> F \\<longleftrightarrow> \\<A>\\<^sub>2 \\<Turnstile> F\"", "lemma \"formula_semantics_alt \\<A> F \\<longleftrightarrow> \\<A> \\<Turnstile> F\"", "lemma \"A \\<Turnstile> F \\<longleftrightarrow> formula_semantics_tt A F\"", "lemma top_semantics[simp,intro!]: \"A \\<Turnstile> \\<top>\"", "lemma BigAnd_semantics[simp]: \"A \\<Turnstile> \\<^bold>\\<And>F \\<longleftrightarrow> (\\<forall>f \\<in> set F. A \\<Turnstile> f)\"", "lemma BigOr_semantics[simp]: \"A \\<Turnstile> \\<^bold>\\<Or>F \\<longleftrightarrow> (\\<exists>f \\<in> set F. A \\<Turnstile> f)\"", "lemma entail_sat: \"\\<Gamma> \\<TTurnstile> \\<bottom> \\<longleftrightarrow> \\<not> sat \\<Gamma>\"", "lemma pn_atoms_updates: \"p \\<notin> snd (pn_atoms F) \\<Longrightarrow> n \\<notin> fst (pn_atoms F) \\<Longrightarrow>\n  ((M \\<Turnstile> F \\<longrightarrow> (M(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F))) \\<and> ((\\<not>(M \\<Turnstile> F)) \\<longrightarrow> \\<not>(M(n := True) \\<Turnstile> F) \\<and> \\<not>(M(p := False) \\<Turnstile> F))\"", "lemma const_simplifier_correct: \"\\<A> \\<Turnstile> simplify_consts F \\<longleftrightarrow> \\<A> \\<Turnstile> F\""], "translations": [["", "lemma irrelevant_atom[simp]: \"A \\<notin> atoms F \\<Longrightarrow> (\\<A>(A := V)) \\<Turnstile> F \\<longleftrightarrow> \\<A> \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<notin> atoms F \\<Longrightarrow>\n    \\<A>(A := V) \\<Turnstile> F = \\<A> \\<Turnstile> F", "by (induction F; simp)"], ["", "lemma relevant_atoms_same_semantics: \"\\<forall>k \\<in> atoms F. \\<A>\\<^sub>1 k = \\<A>\\<^sub>2 k \\<Longrightarrow> \\<A>\\<^sub>1 \\<Turnstile> F \\<longleftrightarrow> \\<A>\\<^sub>2 \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>k\\<in>atoms F.\n       \\<A>\\<^sub>1 k = \\<A>\\<^sub>2 k \\<Longrightarrow>\n    \\<A>\\<^sub>1 \\<Turnstile> F = \\<A>\\<^sub>2 \\<Turnstile> F", "by(induction F; simp)"], ["", "context begin"], ["", "text\\<open>Just a definition more similar to~\\cite[p. 5]{schoening1987logik}.\nUnfortunately, using this as the main definition would get in the way of automated reasoning all the time.\\<close>"], ["", "private"], ["", "primrec formula_semantics_alt where\n\"formula_semantics_alt \\<A> (Atom k) = \\<A> k\" |\n\"formula_semantics_alt \\<A> (Bot) = False\" |\n\"formula_semantics_alt \\<A> (Not a) = (if formula_semantics_alt \\<A> a then False else True)\" |\n\"formula_semantics_alt \\<A> (And a b) = (if formula_semantics_alt \\<A> a then formula_semantics_alt \\<A> b else False)\" |\n\"formula_semantics_alt \\<A> (Or a b) = (if formula_semantics_alt \\<A> a then True else formula_semantics_alt \\<A> b)\" |\n\"formula_semantics_alt \\<A> (Imp a b) = (if formula_semantics_alt \\<A> a then formula_semantics_alt \\<A> b else True)\""], ["", "private"], ["", "lemma \"formula_semantics_alt \\<A> F \\<longleftrightarrow> \\<A> \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. formula_semantics_alt \\<A> F = \\<A> \\<Turnstile> F", "by(induction F; simp)"], ["", "text\\<open>If you fancy a definition more similar to~\\cite[p. 39]{gallier2015logic},\nthis is probably the closest you can go without going incredibly ugly.\\<close>"], ["", "private"], ["", "primrec formula_semantics_tt where\n\"formula_semantics_tt \\<A> (Atom k) = \\<A> k\" |\n\"formula_semantics_tt \\<A> (Bot) = False\" |\n\"formula_semantics_tt \\<A> (Not a) = (case formula_semantics_tt \\<A> a of True \\<Rightarrow> False | False \\<Rightarrow> True)\" |\n\"formula_semantics_tt \\<A> (And a b) = (case (formula_semantics_tt \\<A> a, formula_semantics_tt \\<A> b) of\n  (False, False) \\<Rightarrow> False\n| (False, True) \\<Rightarrow> False\n| (True, False) \\<Rightarrow> False\n| (True, True) \\<Rightarrow> True)\" |\n\"formula_semantics_tt \\<A> (Or a b) = (case (formula_semantics_tt \\<A> a, formula_semantics_tt \\<A> b) of\n  (False, False) \\<Rightarrow> False\n| (False, True) \\<Rightarrow> True\n| (True, False) \\<Rightarrow> True\n| (True, True) \\<Rightarrow> True)\" |\n\"formula_semantics_tt \\<A> (Imp a b) = (case (formula_semantics_tt \\<A> a, formula_semantics_tt \\<A> b) of\n  (False, False) \\<Rightarrow> True\n| (False, True) \\<Rightarrow> True\n| (True, False) \\<Rightarrow> False\n| (True, True) \\<Rightarrow> True)\""], ["", "private"], ["", "lemma \"A \\<Turnstile> F \\<longleftrightarrow> formula_semantics_tt A F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<Turnstile> F = formula_semantics_tt A F", "by(induction F; simp split: prod.splits bool.splits)"], ["", "end"], ["", "definition entailment :: \"'a formula set \\<Rightarrow> 'a formula \\<Rightarrow> bool\" (\"(_ \\<TTurnstile>/ _)\" (* \\TTurnstile *) [53,53] 53) where\n\"\\<Gamma> \\<TTurnstile> F \\<equiv> (\\<forall>\\<A>. ((\\<forall>G \\<in> \\<Gamma>. \\<A> \\<Turnstile> G) \\<longrightarrow> (\\<A> \\<Turnstile> F)))\""], ["", "text\\<open>We write entailment differently than semantics (\\<open>\\<Turnstile>\\<close> vs. \\<open>\\<TTurnstile>\\<close>).\nFor humans, it is usually pretty clear what is meant in a specific situation, \nbut it often needs to be decided from context that Isabelle/HOL does not have.\\<close>"], ["", "text\\<open>Some helpers for the derived connectives\\<close>"], ["", "lemma top_semantics[simp,intro!]: \"A \\<Turnstile> \\<top>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<Turnstile> \\<top>", "unfolding Top_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<Turnstile> \\<bottom> \\<^bold>\\<rightarrow> \\<bottom>", "by simp"], ["", "lemma BigAnd_semantics[simp]: \"A \\<Turnstile> \\<^bold>\\<And>F \\<longleftrightarrow> (\\<forall>f \\<in> set F. A \\<Turnstile> f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<Turnstile> \\<^bold>\\<And>F =\n    (\\<forall>f\\<in>set F. A \\<Turnstile> f)", "by(induction F; simp)"], ["", "lemma BigOr_semantics[simp]: \"A \\<Turnstile> \\<^bold>\\<Or>F \\<longleftrightarrow> (\\<exists>f \\<in> set F. A \\<Turnstile> f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<Turnstile> \\<^bold>\\<Or>F = (\\<exists>f\\<in>set F. A \\<Turnstile> f)", "by(induction F; simp)"], ["", "text\\<open>Definitions for sets of formulae, used for compactness and model existence.\\<close>"], ["", "definition \"sat S \\<equiv> \\<exists>\\<A>. \\<forall>F \\<in> S. \\<A> \\<Turnstile> F\""], ["", "definition \"fin_sat S \\<equiv> (\\<forall>s \\<subseteq> S. finite s \\<longrightarrow> sat s)\""], ["", "lemma entail_sat: \"\\<Gamma> \\<TTurnstile> \\<bottom> \\<longleftrightarrow> \\<not> sat \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<TTurnstile> \\<bottom> = (\\<not> sat \\<Gamma>)", "(* btw. *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Gamma> \\<TTurnstile> \\<bottom> = (\\<not> sat \\<Gamma>)", "unfolding sat_def entailment_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>\\<A>.\n        (\\<forall>G\\<in>\\<Gamma>. \\<A> \\<Turnstile> G) \\<longrightarrow>\n        \\<A> \\<Turnstile> \\<bottom>) =\n    (\\<nexists>\\<A>. \\<forall>F\\<in>\\<Gamma>. \\<A> \\<Turnstile> F)", "by simp"], ["", "lemma pn_atoms_updates: \"p \\<notin> snd (pn_atoms F) \\<Longrightarrow> n \\<notin> fst (pn_atoms F) \\<Longrightarrow>\n  ((M \\<Turnstile> F \\<longrightarrow> (M(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F))) \\<and> ((\\<not>(M \\<Turnstile> F)) \\<longrightarrow> \\<not>(M(n := True) \\<Turnstile> F) \\<and> \\<not>(M(p := False) \\<Turnstile> F))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>p \\<notin> snd (pn_atoms F);\n     n \\<notin> fst (pn_atoms F)\\<rbrakk>\n    \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\n                       M(p := True) \\<Turnstile> F \\<and>\n                       M(n := False) \\<Turnstile> F) \\<and>\n                      (\\<not> M \\<Turnstile> F \\<longrightarrow>\n                       \\<not> M(n := True) \\<Turnstile> F \\<and>\n                       \\<not> M(p := False) \\<Turnstile> F)", "proof(induction F arbitrary: n p)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)\n 6. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<rightarrow> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<rightarrow> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow>\n                                 F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2)", "case (Imp F G)"], ["proof (state)\nthis:\n  \\<lbrakk>?p \\<notin> snd (pn_atoms F);\n   ?n \\<notin> fst (pn_atoms F)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> F \\<and>\n                     M(?n := False) \\<Turnstile> F) \\<and>\n                    (\\<not> M \\<Turnstile> F \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> F \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> F)\n  \\<lbrakk>?p \\<notin> snd (pn_atoms G);\n   ?n \\<notin> fst (pn_atoms G)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> G \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> G \\<and>\n                     M(?n := False) \\<Turnstile> G) \\<and>\n                    (\\<not> M \\<Turnstile> G \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> G \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> G)\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<rightarrow> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<rightarrow> G))\n\ngoal (6 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)\n 6. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<rightarrow> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<rightarrow> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow>\n                                 F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2)", "from Imp.prems"], ["proof (chain)\npicking this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<rightarrow> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<rightarrow> G))", "have prems:\n     \"p \\<notin> fst (pn_atoms F)\" \"p \\<notin> snd (pn_atoms G)\"\n     \"n \\<notin> snd (pn_atoms F)\" \"n \\<notin> fst (pn_atoms G)\""], ["proof (prove)\nusing this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<rightarrow> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<rightarrow> G))\n\ngoal (1 subgoal):\n 1. (p \\<notin> fst (pn_atoms F) &&& p \\<notin> snd (pn_atoms G)) &&&\n    n \\<notin> snd (pn_atoms F) &&& n \\<notin> fst (pn_atoms G)", "by(simp_all add: prod_unions_def split: prod.splits)"], ["proof (state)\nthis:\n  p \\<notin> fst (pn_atoms F)\n  p \\<notin> snd (pn_atoms G)\n  n \\<notin> snd (pn_atoms F)\n  n \\<notin> fst (pn_atoms G)\n\ngoal (6 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)\n 6. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<rightarrow> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<rightarrow> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow>\n                                 F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2)", "have IH1: \"M \\<Turnstile> F \\<Longrightarrow> M(n := True) \\<Turnstile> F\" \" M \\<Turnstile> F \\<Longrightarrow> M(p := False) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(p := True) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(n := False) \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(n := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(p := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := False) \\<Turnstile> F)", "using Imp.IH(1)[OF prems(3) prems(1)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> F \\<longrightarrow>\n   M(n := True) \\<Turnstile> F \\<and> M(p := False) \\<Turnstile> F) \\<and>\n  (\\<not> M \\<Turnstile> F \\<longrightarrow>\n   \\<not> M(p := True) \\<Turnstile> F \\<and>\n   \\<not> M(n := False) \\<Turnstile> F)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(n := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(p := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := False) \\<Turnstile> F)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<Longrightarrow> M(n := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(p := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := False) \\<Turnstile> F\n\ngoal (6 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)\n 6. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<rightarrow> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<rightarrow> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow>\n                                 F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2)", "have IH2: \"M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\" \"M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(n := True) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(p := False) \\<Turnstile> G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "using Imp.IH(2)[OF prems(2) prems(4)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> G \\<and> M(n := False) \\<Turnstile> G) \\<and>\n  (\\<not> M \\<Turnstile> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> G)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (6 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)\n 6. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<rightarrow> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<rightarrow> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<rightarrow> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow>\n                                 F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<rightarrow> F2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<longrightarrow>\n     M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n     M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G) \\<and>\n    (\\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n     \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G)", "proof(intro conjI; intro impI)"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "assume \"M \\<Turnstile> F \\<^bold>\\<rightarrow> G\""], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "then"], ["proof (chain)\npicking this:\n  M \\<Turnstile> F \\<^bold>\\<rightarrow> G", "consider \"\\<not> M \\<Turnstile> F\" | \"M \\<Turnstile>G\""], ["proof (prove)\nusing this:\n  M \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> thesis;\n     M \\<Turnstile> G \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "thus \"M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and> M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "using IH1(3,4) IH2(1,2)"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := False) \\<Turnstile> F\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "by cases simp_all"], ["proof (state)\nthis:\n  M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n  M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "assume \"\\<not>(M \\<Turnstile> F \\<^bold>\\<rightarrow> G)\""], ["proof (state)\nthis:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "hence \"M \\<Turnstile> F\" \"\\<not>M \\<Turnstile> G\""], ["proof (prove)\nusing this:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (1 subgoal):\n 1. M \\<Turnstile> F &&& \\<not> M \\<Turnstile> G", "by simp_all"], ["proof (state)\nthis:\n  M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "thus \"\\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and> \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\""], ["proof (prove)\nusing this:\n  M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "using IH1(1,2) IH2(3,4)"], ["proof (prove)\nusing this:\n  M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n  M \\<Turnstile> F \\<Longrightarrow> M(n := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(p := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G", "by simp"], ["proof (state)\nthis:\n  \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n  \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n   M(n := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G) \\<and>\n  (\\<not> M \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<rightarrow> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<rightarrow> G)\n\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "case (And F G)"], ["proof (state)\nthis:\n  \\<lbrakk>?p \\<notin> snd (pn_atoms F);\n   ?n \\<notin> fst (pn_atoms F)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> F \\<and>\n                     M(?n := False) \\<Turnstile> F) \\<and>\n                    (\\<not> M \\<Turnstile> F \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> F \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> F)\n  \\<lbrakk>?p \\<notin> snd (pn_atoms G);\n   ?n \\<notin> fst (pn_atoms G)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> G \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> G \\<and>\n                     M(?n := False) \\<Turnstile> G) \\<and>\n                    (\\<not> M \\<Turnstile> G \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> G \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> G)\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<and> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<and> G))\n\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "from And.prems"], ["proof (chain)\npicking this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<and> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<and> G))", "have prems:\n     \"p \\<notin> snd (pn_atoms F)\" \"p \\<notin> snd (pn_atoms G)\"\n     \"n \\<notin> fst (pn_atoms F)\" \"n \\<notin> fst (pn_atoms G)\""], ["proof (prove)\nusing this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<and> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<and> G))\n\ngoal (1 subgoal):\n 1. (p \\<notin> snd (pn_atoms F) &&& p \\<notin> snd (pn_atoms G)) &&&\n    n \\<notin> fst (pn_atoms F) &&& n \\<notin> fst (pn_atoms G)", "by(simp_all add: prod_unions_def split: prod.splits)"], ["proof (state)\nthis:\n  p \\<notin> snd (pn_atoms F)\n  p \\<notin> snd (pn_atoms G)\n  n \\<notin> fst (pn_atoms F)\n  n \\<notin> fst (pn_atoms G)\n\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "have IH1: \"M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\" \" M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(n := True) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(p := False) \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> F)", "using And.IH(1)[OF prems(1) prems(3)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> F \\<longrightarrow>\n   M(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n  (\\<not> M \\<Turnstile> F \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> F \\<and>\n   \\<not> M(p := False) \\<Turnstile> F)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> F)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "have IH2: \"M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\" \"M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(n := True) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(p := False) \\<Turnstile> G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "using And.IH(2)[OF prems(2) prems(4)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> G \\<and> M(n := False) \\<Turnstile> G) \\<and>\n  (\\<not> M \\<Turnstile> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> G)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (5 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<and> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<and> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<and> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<and> F2)\n 5. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<Turnstile> F \\<^bold>\\<and> G \\<longrightarrow>\n     M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n     M(n := False) \\<Turnstile> F \\<^bold>\\<and> G) \\<and>\n    (\\<not> M \\<Turnstile> F \\<^bold>\\<and> G \\<longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n     \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G)", "proof(intro conjI; intro impI)"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G", "assume \"\\<not>M \\<Turnstile> F \\<^bold>\\<and> G\""], ["proof (state)\nthis:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G", "then"], ["proof (chain)\npicking this:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<and> G", "consider \"\\<not> M \\<Turnstile> F\" | \"\\<not> M \\<Turnstile>G\""], ["proof (prove)\nusing this:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> thesis;\n     \\<not> M \\<Turnstile> G \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   \\<not> M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G", "thus \"\\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and> \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   \\<not> M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G", "using IH1 IH2"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<not> M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   \\<not> M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G", "by cases simp_all"], ["proof (state)\nthis:\n  \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n  \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal (1 subgoal):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "assume \"M \\<Turnstile> F \\<^bold>\\<and> G\""], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal (1 subgoal):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "hence \"M \\<Turnstile> F\" \"M \\<Turnstile> G\""], ["proof (prove)\nusing this:\n  M \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal (1 subgoal):\n 1. M \\<Turnstile> F &&& M \\<Turnstile> G", "by simp_all"], ["proof (state)\nthis:\n  M \\<Turnstile> F\n  M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. M \\<Turnstile> F \\<^bold>\\<and> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "thus \"M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and> M(n := False) \\<Turnstile> F \\<^bold>\\<and> G \""], ["proof (prove)\nusing this:\n  M \\<Turnstile> F\n  M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "using IH1 IH2"], ["proof (prove)\nusing this:\n  M \\<Turnstile> F\n  M \\<Turnstile> G\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<and> G", "by simp"], ["proof (state)\nthis:\n  M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n  M(n := False) \\<Turnstile> F \\<^bold>\\<and> G\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (M \\<Turnstile> F \\<^bold>\\<and> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n   M(n := False) \\<Turnstile> F \\<^bold>\\<and> G) \\<and>\n  (\\<not> M \\<Turnstile> F \\<^bold>\\<and> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<and> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<and> G)\n\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "case (Or F G)"], ["proof (state)\nthis:\n  \\<lbrakk>?p \\<notin> snd (pn_atoms F);\n   ?n \\<notin> fst (pn_atoms F)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> F \\<and>\n                     M(?n := False) \\<Turnstile> F) \\<and>\n                    (\\<not> M \\<Turnstile> F \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> F \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> F)\n  \\<lbrakk>?p \\<notin> snd (pn_atoms G);\n   ?n \\<notin> fst (pn_atoms G)\\<rbrakk>\n  \\<Longrightarrow> (M \\<Turnstile> G \\<longrightarrow>\n                     M(?p := True) \\<Turnstile> G \\<and>\n                     M(?n := False) \\<Turnstile> G) \\<and>\n                    (\\<not> M \\<Turnstile> G \\<longrightarrow>\n                     \\<not> M(?n := True) \\<Turnstile> G \\<and>\n                     \\<not> M(?p := False) \\<Turnstile> G)\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<or> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<or> G))\n\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "from Or.prems"], ["proof (chain)\npicking this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<or> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<or> G))", "have prems:\n     \"p \\<notin> snd (pn_atoms F)\" \"p \\<notin> snd (pn_atoms G)\"\n     \"n \\<notin> fst (pn_atoms F)\" \"n \\<notin> fst (pn_atoms G)\""], ["proof (prove)\nusing this:\n  p \\<notin> snd (pn_atoms (F \\<^bold>\\<or> G))\n  n \\<notin> fst (pn_atoms (F \\<^bold>\\<or> G))\n\ngoal (1 subgoal):\n 1. (p \\<notin> snd (pn_atoms F) &&& p \\<notin> snd (pn_atoms G)) &&&\n    n \\<notin> fst (pn_atoms F) &&& n \\<notin> fst (pn_atoms G)", "by(simp_all add: prod_unions_def split: prod.splits)"], ["proof (state)\nthis:\n  p \\<notin> snd (pn_atoms F)\n  p \\<notin> snd (pn_atoms G)\n  n \\<notin> fst (pn_atoms F)\n  n \\<notin> fst (pn_atoms G)\n\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "have IH1: \"M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\" \" M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(n := True) \\<Turnstile> F\" \"\\<not> M \\<Turnstile> F \\<Longrightarrow> \\<not> M(p := False) \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> F)", "using Or.IH(1)[OF prems(1) prems(3)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> F \\<longrightarrow>\n   M(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n  (\\<not> M \\<Turnstile> F \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> F \\<and>\n   \\<not> M(p := False) \\<Turnstile> F)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F) &&&\n     (M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F)) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F) &&&\n    (\\<not> M \\<Turnstile> F \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> F)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "have IH2: \"M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\" \"M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(n := True) \\<Turnstile> G\" \"\\<not> M \\<Turnstile> G \\<Longrightarrow> \\<not> M(p := False) \\<Turnstile> G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "using Or.IH(2)[OF prems(2) prems(4)]"], ["proof (prove)\nusing this:\n  (M \\<Turnstile> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> G \\<and> M(n := False) \\<Turnstile> G) \\<and>\n  (\\<not> M \\<Turnstile> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> G)\n\ngoal (1 subgoal):\n 1. ((M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G) &&&\n     (M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G)) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> G) &&&\n    (\\<not> M \\<Turnstile> G \\<Longrightarrow>\n     \\<not> M(p := False) \\<Turnstile> G)", "by blast+"], ["proof (state)\nthis:\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (4 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)\n 4. \\<And>F1 F2 n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F1);\n                    n \\<notin> fst (pn_atoms F1)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F1 \\<longrightarrow>\nM(p := True) \\<Turnstile> F1 \\<and> M(n := False) \\<Turnstile> F1) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F1 \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F1 \\<and>\n\\<not> M(p := False) \\<Turnstile> F1);\n        \\<And>n p.\n           \\<lbrakk>p \\<notin> snd (pn_atoms F2);\n            n \\<notin> fst (pn_atoms F2)\\<rbrakk>\n           \\<Longrightarrow> (M \\<Turnstile> F2 \\<longrightarrow>\n                              M(p := True) \\<Turnstile> F2 \\<and>\n                              M(n := False) \\<Turnstile> F2) \\<and>\n                             (\\<not> M \\<Turnstile> F2 \\<longrightarrow>\n                              \\<not> M(n := True) \\<Turnstile> F2 \\<and>\n                              \\<not> M(p := False) \\<Turnstile> F2);\n        p \\<notin> snd (pn_atoms (F1 \\<^bold>\\<or> F2));\n        n \\<notin> fst (pn_atoms (F1 \\<^bold>\\<or> F2))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          M(p := True) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2 \\<and>\n                          M(n := False) \\<Turnstile>\n                          F1 \\<^bold>\\<or> F2) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2 \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 F1 \\<^bold>\\<or> F2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (M \\<Turnstile> F \\<^bold>\\<or> G \\<longrightarrow>\n     M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n     M(n := False) \\<Turnstile> F \\<^bold>\\<or> G) \\<and>\n    (\\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<longrightarrow>\n     \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n     \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G)", "proof(intro conjI; intro impI)"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<or> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "assume \"M \\<Turnstile> F \\<^bold>\\<or> G\""], ["proof (state)\nthis:\n  M \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<or> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "then"], ["proof (chain)\npicking this:\n  M \\<Turnstile> F \\<^bold>\\<or> G", "consider \"M \\<Turnstile> F\" | \"M \\<Turnstile>G\""], ["proof (prove)\nusing this:\n  M \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<Turnstile> F \\<Longrightarrow> thesis;\n     M \\<Turnstile> G \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (2 subgoals):\n 1. M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<or> G\n 2. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "thus \"M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and> M(n := False) \\<Turnstile> F \\<^bold>\\<or> G\""], ["proof (prove)\nusing this:\n  \\<lbrakk>M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<or> G", "using IH1 IH2"], ["proof (prove)\nusing this:\n  \\<lbrakk>M \\<Turnstile> F \\<Longrightarrow> ?thesis;\n   M \\<Turnstile> G \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    M(n := False) \\<Turnstile> F \\<^bold>\\<or> G", "by cases simp_all"], ["proof (state)\nthis:\n  M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n  M(n := False) \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "assume \"\\<not>M \\<Turnstile> F \\<^bold>\\<or> G\""], ["proof (state)\nthis:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "hence \"\\<not>M \\<Turnstile> F\" \"\\<not>M \\<Turnstile> G\""], ["proof (prove)\nusing this:\n  \\<not> M \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F &&& \\<not> M \\<Turnstile> G", "by simp_all"], ["proof (state)\nthis:\n  \\<not> M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<Longrightarrow>\n    \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "thus \"\\<not>M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and> \\<not>M(p := False) \\<Turnstile> F \\<^bold>\\<or> G \""], ["proof (prove)\nusing this:\n  \\<not> M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "using IH1 IH2"], ["proof (prove)\nusing this:\n  \\<not> M \\<Turnstile> F\n  \\<not> M \\<Turnstile> G\n  M \\<Turnstile> F \\<Longrightarrow> M(p := True) \\<Turnstile> F\n  M \\<Turnstile> F \\<Longrightarrow> M(n := False) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> F\n  \\<not> M \\<Turnstile> F \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> F\n  M \\<Turnstile> G \\<Longrightarrow> M(p := True) \\<Turnstile> G\n  M \\<Turnstile> G \\<Longrightarrow> M(n := False) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(n := True) \\<Turnstile> G\n  \\<not> M \\<Turnstile> G \\<Longrightarrow>\n  \\<not> M(p := False) \\<Turnstile> G\n\ngoal (1 subgoal):\n 1. \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n    \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G", "by simp"], ["proof (state)\nthis:\n  \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n  \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (M \\<Turnstile> F \\<^bold>\\<or> G \\<longrightarrow>\n   M(p := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n   M(n := False) \\<Turnstile> F \\<^bold>\\<or> G) \\<and>\n  (\\<not> M \\<Turnstile> F \\<^bold>\\<or> G \\<longrightarrow>\n   \\<not> M(n := True) \\<Turnstile> F \\<^bold>\\<or> G \\<and>\n   \\<not> M(p := False) \\<Turnstile> F \\<^bold>\\<or> G)\n\ngoal (3 subgoals):\n 1. \\<And>x n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms (Atom x));\n        n \\<notin> fst (pn_atoms (Atom x))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> Atom x \\<longrightarrow>\n                          M(p := True) \\<Turnstile> Atom x \\<and>\n                          M(n := False) \\<Turnstile> Atom x) \\<and>\n                         (\\<not> M \\<Turnstile> Atom x \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> Atom x \\<and>\n                          \\<not> M(p := False) \\<Turnstile> Atom x)\n 2. \\<And>n p.\n       \\<lbrakk>p \\<notin> snd (pn_atoms \\<bottom>);\n        n \\<notin> fst (pn_atoms \\<bottom>)\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<bottom> \\<and>\n                          M(n := False) \\<Turnstile> \\<bottom>) \\<and>\n                         (\\<not> M \\<Turnstile> \\<bottom> \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile> \\<bottom> \\<and>\n                          \\<not> M(p := False) \\<Turnstile> \\<bottom>)\n 3. \\<And>F n p.\n       \\<lbrakk>\\<And>n p.\n                   \\<lbrakk>p \\<notin> snd (pn_atoms F);\n                    n \\<notin> fst (pn_atoms F)\\<rbrakk>\n                   \\<Longrightarrow> (M \\<Turnstile> F \\<longrightarrow>\nM(p := True) \\<Turnstile> F \\<and> M(n := False) \\<Turnstile> F) \\<and>\n                                     (\\<not> M \\<Turnstile>\n       F \\<longrightarrow>\n\\<not> M(n := True) \\<Turnstile> F \\<and>\n\\<not> M(p := False) \\<Turnstile> F);\n        p \\<notin> snd (pn_atoms (\\<^bold>\\<not> F));\n        n \\<notin> fst (pn_atoms (\\<^bold>\\<not> F))\\<rbrakk>\n       \\<Longrightarrow> (M \\<Turnstile> \\<^bold>\\<not> F \\<longrightarrow>\n                          M(p := True) \\<Turnstile> \\<^bold>\\<not> F \\<and>\n                          M(n := False) \\<Turnstile>\n                          \\<^bold>\\<not> F) \\<and>\n                         (\\<not> M \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<longrightarrow>\n                          \\<not> M(n := True) \\<Turnstile>\n                                 \\<^bold>\\<not> F \\<and>\n                          \\<not> M(p := False) \\<Turnstile>\n                                 \\<^bold>\\<not> F)", "qed simp_all"], ["", "lemma const_simplifier_correct: \"\\<A> \\<Turnstile> simplify_consts F \\<longleftrightarrow> \\<A> \\<Turnstile> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<A> \\<Turnstile> simplify_consts F = \\<A> \\<Turnstile> F", "by (induction F) (auto simp add: Let_def isstop_def Top_def split: formula.splits)"], ["", "end"]]}