{"file_name": "/home/qj213/afp-2021-10-22/thys/Propositional_Proof_Systems/Sema_Craig.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Propositional_Proof_Systems", "problem_names": ["lemma subst_true_false:\n  assumes \"\\<A> \\<Turnstile> F\"\n  shows \"\\<A> \\<Turnstile> ((F[\\<top> / n]) \\<^bold>\\<or> (F[\\<bottom> / n]))\"", "theorem interpolation:\n  assumes \"\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\"\n  obtains \\<rho> where\n    \"\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>\" \"\\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\"\n    \"atoms \\<rho> \\<subseteq> atoms \\<Gamma>\"\n    \"atoms \\<rho> \\<subseteq> atoms \\<Delta>\"", "lemma \"interpolate (And (Atom (0::nat)) (Atom 1)) (Or (Atom 1) (Atom 2)) = \n  (\\<top> \\<^bold>\\<and> Atom 1) \\<^bold>\\<or> (\\<bottom> \\<^bold>\\<and> Atom 1)\"", "lemma \"let P = Atom (0 :: nat); Q = Atom 1; R = Atom 2; T = Atom 3;\n\\<phi> = (\\<^bold>\\<not>(P \\<^bold>\\<and> Q)) \\<^bold>\\<rightarrow> (\\<^bold>\\<not>R \\<^bold>\\<and> Q);\n\\<psi> = (T \\<^bold>\\<rightarrow> P) \\<^bold>\\<or> (T \\<^bold>\\<rightarrow> (\\<^bold>\\<not>R));\nI = interpolate \\<phi> \\<psi> in\n(size I) = 23 \\<and> simplify_consts I = Atom 2 \\<^bold>\\<rightarrow> Atom 0\"", "theorem nonexistential_interpolation:\n  assumes \"\\<Turnstile> F \\<^bold>\\<rightarrow> H\"\n  shows\n    \"\\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\" (is \"?t1\") \"\\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\" (is \"?t2\")\n    \"atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\" (is \"?s\")"], "translations": [["", "lemma subst_true_false:\n  assumes \"\\<A> \\<Turnstile> F\"\n  shows \"\\<A> \\<Turnstile> ((F[\\<top> / n]) \\<^bold>\\<or> (F[\\<bottom> / n]))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<A> \\<Turnstile> F[\\<top>/n] \\<^bold>\\<or> F[\\<bottom>/n]", "using assms"], ["proof (prove)\nusing this:\n  \\<A> \\<Turnstile> F\n\ngoal (1 subgoal):\n 1. \\<A> \\<Turnstile> F[\\<top>/n] \\<^bold>\\<or> F[\\<bottom>/n]", "by(cases \"\\<A> n\"; simp add: substitution_lemma fun_upd_idem)"], ["", "theorem interpolation:\n  assumes \"\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\"\n  obtains \\<rho> where\n    \"\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>\" \"\\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\"\n    \"atoms \\<rho> \\<subseteq> atoms \\<Gamma>\"\n    \"atoms \\<rho> \\<subseteq> atoms \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof(goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?as = \"atoms \\<Gamma> - atoms \\<Delta>\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have fas: \"finite ?as\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (atoms \\<Gamma> - atoms \\<Delta>)", "by simp"], ["proof (state)\nthis:\n  finite (atoms \\<Gamma> - atoms \\<Delta>)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from fas assms"], ["proof (chain)\npicking this:\n  finite (atoms \\<Gamma> - atoms \\<Delta>)\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>", "have \"\\<exists>\\<rho>. ((\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>) \\<and> (\\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>) \\<and> (atoms \\<rho> \\<subseteq> atoms \\<Gamma>) \\<and> (atoms \\<rho> \\<subseteq> atoms \\<Delta>))\""], ["proof (prove)\nusing this:\n  finite (atoms \\<Gamma> - atoms \\<Delta>)\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<rho>.\n       \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n       \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Delta>", "proof(induction ?as arbitrary: \\<Gamma> rule: finite_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma>.\n       \\<lbrakk>{} = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>\n 2. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "case empty"], ["proof (state)\nthis:\n  {} = atoms \\<Gamma> - atoms \\<Delta>\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma>.\n       \\<lbrakk>{} = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>\n 2. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "from \\<open>{} = atoms \\<Gamma> - atoms \\<Delta>\\<close>"], ["proof (chain)\npicking this:\n  {} = atoms \\<Gamma> - atoms \\<Delta>", "have \"atoms \\<Gamma> \\<subseteq> atoms \\<Delta>\""], ["proof (prove)\nusing this:\n  {} = atoms \\<Gamma> - atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. atoms \\<Gamma> \\<subseteq> atoms \\<Delta>", "by blast"], ["proof (state)\nthis:\n  atoms \\<Gamma> \\<subseteq> atoms \\<Delta>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma>.\n       \\<lbrakk>{} = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>\n 2. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "with \\<open>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<close>"], ["proof (chain)\npicking this:\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n  atoms \\<Gamma> \\<subseteq> atoms \\<Delta>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n  atoms \\<Gamma> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<rho>.\n       \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n       \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Delta>", "by(intro exI[where x=\\<Gamma>]) simp"], ["proof (state)\nthis:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "case (insert a A)"], ["proof (state)\nthis:\n  finite A\n  a \\<notin> A\n  \\<lbrakk>A = atoms ?\\<Gamma> - atoms \\<Delta>;\n   \\<Turnstile> ?\\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>\\<rho>.\n                       \\<Turnstile> ?\\<Gamma> \\<^bold>\\<rightarrow>\n                                    \\<rho> \\<and>\n                       \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n                                    \\<Delta> \\<and>\n                       atoms \\<rho> \\<subseteq> atoms ?\\<Gamma> \\<and>\n                       atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  a \\<triangleright> A = atoms \\<Gamma> - atoms \\<Delta>\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "hence e: \"a \\<in> atoms \\<Gamma>\" \"a \\<notin> atoms \\<Delta>\""], ["proof (prove)\nusing this:\n  finite A\n  a \\<notin> A\n  \\<lbrakk>A = atoms ?\\<Gamma> - atoms \\<Delta>;\n   \\<Turnstile> ?\\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n  \\<Longrightarrow> \\<exists>\\<rho>.\n                       \\<Turnstile> ?\\<Gamma> \\<^bold>\\<rightarrow>\n                                    \\<rho> \\<and>\n                       \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n                                    \\<Delta> \\<and>\n                       atoms \\<rho> \\<subseteq> atoms ?\\<Gamma> \\<and>\n                       atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  a \\<triangleright> A = atoms \\<Gamma> - atoms \\<Delta>\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n\ngoal (1 subgoal):\n 1. a \\<in> atoms \\<Gamma> &&& a \\<notin> atoms \\<Delta>", "by auto"], ["proof (state)\nthis:\n  a \\<in> atoms \\<Gamma>\n  a \\<notin> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "define \\<Gamma>' where \"\\<Gamma>' = (\\<Gamma>[\\<top> / a]) \\<^bold>\\<or> (\\<Gamma>[\\<bottom> / a])\""], ["proof (state)\nthis:\n  \\<Gamma>' = \\<Gamma>[\\<top>/a] \\<^bold>\\<or> \\<Gamma>[\\<bottom>/a]\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "have su: \"atoms \\<Gamma>' \\<subseteq> atoms \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atoms \\<Gamma>' \\<subseteq> atoms \\<Gamma>", "unfolding \\<Gamma>'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. atoms (\\<Gamma>[\\<top>/a] \\<^bold>\\<or> \\<Gamma>[\\<bottom>/a])\n    \\<subseteq> atoms \\<Gamma>", "by(cases \"a \\<in> atoms \\<Gamma>\"; simp add: subst_atoms)"], ["proof (state)\nthis:\n  atoms \\<Gamma>' \\<subseteq> atoms \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "from \\<open>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<close> e"], ["proof (chain)\npicking this:\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n  a \\<in> atoms \\<Gamma>\n  a \\<notin> atoms \\<Delta>", "have \"\\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<Delta>\""], ["proof (prove)\nusing this:\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\n  a \\<in> atoms \\<Gamma>\n  a \\<notin> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<Delta>", "by (auto simp add: substitution_lemma \\<Gamma>'_def)"], ["proof (state)\nthis:\n  \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "from \\<open>a \\<triangleright> A = atoms \\<Gamma> - atoms \\<Delta>\\<close> \\<open>a \\<notin> A\\<close> e"], ["proof (chain)\npicking this:\n  a \\<triangleright> A = atoms \\<Gamma> - atoms \\<Delta>\n  a \\<notin> A\n  a \\<in> atoms \\<Gamma>\n  a \\<notin> atoms \\<Delta>", "have \"A = atoms \\<Gamma>' - atoms \\<Delta>\""], ["proof (prove)\nusing this:\n  a \\<triangleright> A = atoms \\<Gamma> - atoms \\<Delta>\n  a \\<notin> A\n  a \\<in> atoms \\<Gamma>\n  a \\<notin> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. A = atoms \\<Gamma>' - atoms \\<Delta>", "by(simp add: subst_atoms \\<Gamma>'_def) blast"], ["proof (state)\nthis:\n  A = atoms \\<Gamma>' - atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "from insert.hyps(3)[OF this \\<open>\\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<Delta>\\<close>]"], ["proof (chain)\npicking this:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma>' \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>", "obtain \\<rho> where \\<rho>: \"\\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>\" \"\\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\" \"atoms \\<rho> \\<subseteq> atoms \\<Gamma>'\" \"atoms \\<rho> \\<subseteq> atoms \\<Delta>\""], ["proof (prove)\nusing this:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma>' \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>';\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by clarify"], ["proof (state)\nthis:\n  \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>\n  \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\n  atoms \\<rho> \\<subseteq> atoms \\<Gamma>'\n  atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "have \"\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>", "using \\<rho>(1) subst_true_false"], ["proof (prove)\nusing this:\n  \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>\n  ?\\<A> \\<Turnstile> ?F \\<Longrightarrow>\n  ?\\<A> \\<Turnstile> ?F[\\<top>/?n] \\<^bold>\\<or> ?F[\\<bottom>/?n]\n\ngoal (1 subgoal):\n 1. \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>", "unfolding \\<Gamma>'_def"], ["proof (prove)\nusing this:\n  \\<Turnstile> (\\<Gamma>[\\<top>/a] \\<^bold>\\<or>\n                \\<Gamma>[\\<bottom>/a]) \\<^bold>\\<rightarrow>\n               \\<rho>\n  ?\\<A> \\<Turnstile> ?F \\<Longrightarrow>\n  ?\\<A> \\<Turnstile> ?F[\\<top>/?n] \\<^bold>\\<or> ?F[\\<bottom>/?n]\n\ngoal (1 subgoal):\n 1. \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>", "by fastforce"], ["proof (state)\nthis:\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>x F \\<Gamma>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>\\<Gamma>.\n           \\<lbrakk>F = atoms \\<Gamma> - atoms \\<Delta>;\n            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n           \\<Longrightarrow> \\<exists>\\<rho>.\n                                \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n       \\<rho> \\<and>\n                                \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n       \\<Delta> \\<and>\n                                atoms \\<rho>\n                                \\<subseteq> atoms \\<Gamma> \\<and>\n                                atoms \\<rho> \\<subseteq> atoms \\<Delta>;\n        x \\<triangleright> F = atoms \\<Gamma> - atoms \\<Delta>;\n        \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<Delta>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<rho>.\n                            \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow>\n   \\<rho> \\<and>\n                            \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow>\n   \\<Delta> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n                            atoms \\<rho> \\<subseteq> atoms \\<Delta>", "with \\<rho> su"], ["proof (chain)\npicking this:\n  \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>\n  \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\n  atoms \\<rho> \\<subseteq> atoms \\<Gamma>'\n  atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  atoms \\<Gamma>' \\<subseteq> atoms \\<Gamma>\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>", "show ?case"], ["proof (prove)\nusing this:\n  \\<Turnstile> \\<Gamma>' \\<^bold>\\<rightarrow> \\<rho>\n  \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>\n  atoms \\<rho> \\<subseteq> atoms \\<Gamma>'\n  atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  atoms \\<Gamma>' \\<subseteq> atoms \\<Gamma>\n  \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>\n\ngoal (1 subgoal):\n 1. \\<exists>\\<rho>.\n       \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n       \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n       atoms \\<rho> \\<subseteq> atoms \\<Delta>", "by(intro exI[where x=\\<rho>]) simp"], ["proof (state)\nthis:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "case 1"], ["proof (state)\nthis:\n  \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> ?\\<rho>;\n   \\<Turnstile> ?\\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Gamma>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. (\\<And>\\<rho>.\n        \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho>;\n         \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n         atoms \\<rho> \\<subseteq> atoms \\<Gamma>;\n         atoms \\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> ?\\<rho>;\n   \\<Turnstile> ?\\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Gamma>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n  \\<Longrightarrow> thesis", "show thesis"], ["proof (prove)\nusing this:\n  \\<exists>\\<rho>.\n     \\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> \\<rho> \\<and>\n     \\<Turnstile> \\<rho> \\<^bold>\\<rightarrow> \\<Delta> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Gamma> \\<and>\n     atoms \\<rho> \\<subseteq> atoms \\<Delta>\n  \\<lbrakk>\\<Turnstile> \\<Gamma> \\<^bold>\\<rightarrow> ?\\<rho>;\n   \\<Turnstile> ?\\<rho> \\<^bold>\\<rightarrow> \\<Delta>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Gamma>;\n   atoms ?\\<rho> \\<subseteq> atoms \\<Delta>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>The above proof is constructive, and it is actually very easy to write a procedure down.\\<close>"], ["", "function interpolate where\n\"interpolate F H = (\nlet K = atoms F - atoms H in\n  if K = {}\n  then F\n  else (\n    let k = Min K\n    in interpolate ((F[\\<top> / k]) \\<^bold>\\<or> (F[\\<bottom> / k])) H\n  )\n)\""], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>F H. x = (F, H) \\<Longrightarrow> P) \\<Longrightarrow> P\n 2. \\<And>F H Fa Ha.\n       (F, H) = (Fa, Ha) \\<Longrightarrow>\n       (let K = atoms F - atoms H\n        in if K = {} then F\n           else let k = Min K\n                in interpolate_sumC\n                    (F[\\<top>/k] \\<^bold>\\<or> F[\\<bottom>/k], H)) =\n       (let K = atoms Fa - atoms Ha\n        in if K = {} then Fa\n           else let k = Min K\n                in interpolate_sumC\n                    (Fa[\\<top>/k] \\<^bold>\\<or> Fa[\\<bottom>/k], Ha))", "by pat_completeness simp"], ["", "(* I tried Inf instead of Min first. Only has downsides. *)"], ["", "text\\<open>Showing termination is slightly technical\\dots\\<close>"], ["", "termination interpolate"], ["proof (prove)\ngoal (1 subgoal):\n 1. All interpolate_dom", "apply(relation \"measure (\\<lambda>(F,H). card (atoms F - atoms H))\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. wf (measure (\\<lambda>(F, H). card (atoms F - atoms H)))\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; x \\<noteq> {}; xa = Min x\\<rbrakk>\n       \\<Longrightarrow> ((F[\\<top>/xa] \\<^bold>\\<or> F[\\<bottom>/xa], H),\n                          F, H)\n                         \\<in> measure\n                                (\\<lambda>(F, H). card (atoms F - atoms H))", "(* \"measure (\\<lambda>(F,H). card (atoms F))\" also works, but doesn't make things more beautiful *)"], ["proof (prove)\ngoal (2 subgoals):\n 1. wf (measure (\\<lambda>(F, H). card (atoms F - atoms H)))\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; x \\<noteq> {}; xa = Min x\\<rbrakk>\n       \\<Longrightarrow> ((F[\\<top>/xa] \\<^bold>\\<or> F[\\<bottom>/xa], H),\n                          F, H)\n                         \\<in> measure\n                                (\\<lambda>(F, H). card (atoms F - atoms H))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. wf (measure (\\<lambda>(F, H). card (atoms F - atoms H)))", "by simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; x \\<noteq> {}; xa = Min x\\<rbrakk>\n       \\<Longrightarrow> ((F[\\<top>/xa] \\<^bold>\\<or> F[\\<bottom>/xa], H),\n                          F, H)\n                         \\<in> measure\n                                (\\<lambda>(F, H). card (atoms F - atoms H))", "apply (simp add: subst_atoms_simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> (Min (atoms F - atoms H)\n                          \\<in> atoms F \\<longrightarrow>\n                          card\n                           (atoms F - {Min (atoms F - atoms H)} - atoms H)\n                          < card (atoms F - atoms H)) \\<and>\n                         Min (atoms F - atoms H) \\<in> atoms F", "apply(intro conjI impI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> card\n                          (atoms F - {Min (atoms F - atoms H)} - atoms H)\n                         < card (atoms F - atoms H)\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<in> atoms F", "apply(intro psubset_card_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> finite (atoms F - atoms H)\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> atoms F - {Min (atoms F - atoms H)} - atoms H\n                         \\<subset> atoms F - atoms H\n 3. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<in> atoms F", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x_ = atoms F_ - atoms H_; \\<not> atoms F_ \\<subseteq> atoms H_;\n     xa_ = Min (atoms F_ - atoms H_);\n     Min (atoms F_ - atoms H_) \\<in> atoms F_\\<rbrakk>\n    \\<Longrightarrow> finite (atoms F_ - atoms H_)", "by simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> atoms F - {Min (atoms F - atoms H)} - atoms H\n                         \\<subset> atoms F - atoms H\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<in> atoms F", "apply(subgoal_tac \"Min (atoms F - atoms H) \\<notin> atoms H\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H); Min (atoms F - atoms H) \\<in> atoms F;\n        Min (atoms F - atoms H) \\<notin> atoms H\\<rbrakk>\n       \\<Longrightarrow> atoms F - {Min (atoms F - atoms H)} - atoms H\n                         \\<subset> atoms F - atoms H\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<notin> atoms H\n 3. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<in> atoms F", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x_ = atoms F_ - atoms H_; \\<not> atoms F_ \\<subseteq> atoms H_;\n     xa_ = Min (atoms F_ - atoms H_);\n     Min (atoms F_ - atoms H_) \\<in> atoms F_;\n     Min (atoms F_ - atoms H_) \\<notin> atoms H_\\<rbrakk>\n    \\<Longrightarrow> atoms F_ - {Min (atoms F_ - atoms H_)} - atoms H_\n                      \\<subset> atoms F_ - atoms H_", "by blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H);\n        Min (atoms F - atoms H) \\<in> atoms F\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<notin> atoms H\n 2. \\<And>F H x xa.\n       \\<lbrakk>x = atoms F - atoms H; \\<not> atoms F \\<subseteq> atoms H;\n        xa = Min (atoms F - atoms H)\\<rbrakk>\n       \\<Longrightarrow> Min (atoms F - atoms H) \\<in> atoms F", "apply (meson atoms_finite Diff_eq_empty_iff Diff_iff Min_in finite_Diff)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "text\\<open>Surprisingly, @{const interpolate} is even executable,\n  despite all the set operations involving @{const atoms}\\<close>"], ["", "lemma \"interpolate (And (Atom (0::nat)) (Atom 1)) (Or (Atom 1) (Atom 2)) = \n  (\\<top> \\<^bold>\\<and> Atom 1) \\<^bold>\\<or> (\\<bottom> \\<^bold>\\<and> Atom 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. interpolate (Atom 0 \\<^bold>\\<and> Atom 1)\n     (Atom 1 \\<^bold>\\<or> Atom 2) =\n    (\\<top> \\<^bold>\\<and> Atom 1) \\<^bold>\\<or>\n    (\\<bottom> \\<^bold>\\<and> Atom 1)", "by simp"], ["", "value[code] \"simplify_consts (interpolate (And (Atom (0::nat)) (Atom 1)) (Or (Atom 1) (Atom 2)))\""], ["", "(* and the wikipedia example: *)"], ["", "lemma \"let P = Atom (0 :: nat); Q = Atom 1; R = Atom 2; T = Atom 3;\n\\<phi> = (\\<^bold>\\<not>(P \\<^bold>\\<and> Q)) \\<^bold>\\<rightarrow> (\\<^bold>\\<not>R \\<^bold>\\<and> Q);\n\\<psi> = (T \\<^bold>\\<rightarrow> P) \\<^bold>\\<or> (T \\<^bold>\\<rightarrow> (\\<^bold>\\<not>R));\nI = interpolate \\<phi> \\<psi> in\n(size I) = 23 \\<and> simplify_consts I = Atom 2 \\<^bold>\\<rightarrow> Atom 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. let P = Atom 0; Q = Atom 1; R = Atom 2; T = Atom 3;\n        \\<phi> =\n          \\<^bold>\\<not> (P \\<^bold>\\<and> Q) \\<^bold>\\<rightarrow>\n          \\<^bold>\\<not> R \\<^bold>\\<and> Q;\n        \\<psi> =\n          (T \\<^bold>\\<rightarrow> P) \\<^bold>\\<or>\n          (T \\<^bold>\\<rightarrow> \\<^bold>\\<not> R);\n        I = interpolate \\<phi> \\<psi>\n    in size I = 23 \\<and>\n       simplify_consts I = Atom 2 \\<^bold>\\<rightarrow> Atom 0", "by code_simp"], ["", "theorem nonexistential_interpolation:\n  assumes \"\\<Turnstile> F \\<^bold>\\<rightarrow> H\"\n  shows\n    \"\\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\" (is \"?t1\") \"\\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\" (is \"?t2\")\n    \"atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\" (is \"?s\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H &&&\n    \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H &&&\n    atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\n 2. \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\n 3. atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "let ?as = \"atoms F - atoms H\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\n 2. \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\n 3. atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "have fas: \"finite ?as\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (atoms F - atoms H)", "by simp"], ["proof (state)\nthis:\n  finite (atoms F - atoms H)\n\ngoal (3 subgoals):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\n 2. \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\n 3. atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "hence \"?t1 \\<and> ?t2 \\<and> ?s\""], ["proof (prove)\nusing this:\n  finite (atoms F - atoms H)\n\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n    \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n    atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "using assms"], ["proof (prove)\nusing this:\n  finite (atoms F - atoms H)\n  \\<Turnstile> F \\<^bold>\\<rightarrow> H\n\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n    \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n    atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "proof(induction \"card ?as\" arbitrary: F H)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "case (Suc n)"], ["proof (state)\nthis:\n  \\<lbrakk>n = card (atoms ?F - atoms ?H); finite (atoms ?F - atoms ?H);\n   \\<Turnstile> ?F \\<^bold>\\<rightarrow> ?H\\<rbrakk>\n  \\<Longrightarrow> \\<Turnstile> ?F \\<^bold>\\<rightarrow>\n                                 interpolate ?F ?H \\<and>\n                    \\<Turnstile> interpolate ?F ?H \\<^bold>\\<rightarrow>\n                                 ?H \\<and>\n                    atoms (interpolate ?F ?H)\n                    \\<subseteq> atoms ?F \\<inter> atoms ?H\n  Suc n = card (atoms F - atoms H)\n  finite (atoms F - atoms H)\n  \\<Turnstile> F \\<^bold>\\<rightarrow> H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "let ?inf = \"Min (atoms F - atoms H)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "define G where \"G = (F[\\<top> / ?inf]) \\<^bold>\\<or> (F[\\<bottom> / ?inf])\""], ["proof (state)\nthis:\n  G =\n  F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n  F[\\<bottom>/Min (atoms F - atoms H)]\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "have e: \"Min (atoms F - atoms H) \\<in> atoms F - atoms H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Min (atoms F - atoms H) \\<in> atoms F - atoms H", "by (metis Min_in Suc.hyps(2) Suc.prems(1) card.empty nat.simps(3))"], ["proof (state)\nthis:\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "with Suc(2)"], ["proof (chain)\npicking this:\n  Suc n = card (atoms F - atoms H)\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H", "have \"n = card (atoms G - atoms H)\""], ["proof (prove)\nusing this:\n  Suc n = card (atoms F - atoms H)\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (1 subgoal):\n 1. n = card (atoms G - atoms H)", "unfolding G_def subst_atoms_simp"], ["proof (prove)\nusing this:\n  Suc n = card (atoms F - atoms H)\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (1 subgoal):\n 1. n =\n    card\n     (atoms\n       (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n        F[\\<bottom>/Min (atoms F - atoms H)]) -\n      atoms H)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "assume a1: \"Suc n = card (atoms F - atoms H)\""], ["proof (state)\nthis:\n  Suc n = card (atoms F - atoms H)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "assume \"Min (atoms F - atoms H) \\<in> atoms F - atoms H\""], ["proof (state)\nthis:\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "hence a2: \"Min (atoms F - atoms H) \\<in> atoms F \\<and> Min (atoms F - atoms H) \\<notin> atoms H\""], ["proof (prove)\nusing this:\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (1 subgoal):\n 1. Min (atoms F - atoms H) \\<in> atoms F \\<and>\n    Min (atoms F - atoms H) \\<notin> atoms H", "by simp"], ["proof (state)\nthis:\n  Min (atoms F - atoms H) \\<in> atoms F \\<and>\n  Min (atoms F - atoms H) \\<notin> atoms H\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "have \"n = card (atoms F - atoms H) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n = card (atoms F - atoms H) - 1", "using a1"], ["proof (prove)\nusing this:\n  Suc n = card (atoms F - atoms H)\n\ngoal (1 subgoal):\n 1. n = card (atoms F - atoms H) - 1", "by presburger"], ["proof (state)\nthis:\n  n = card (atoms F - atoms H) - 1\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "hence \"n = card (atoms (F[\\<top> / Min (atoms F - atoms H)]) \\<union> atoms (F[\\<bottom> / Min (atoms F - atoms H)]) - atoms H)\""], ["proof (prove)\nusing this:\n  n = card (atoms F - atoms H) - 1\n\ngoal (1 subgoal):\n 1. n =\n    card\n     (atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n      atoms (F[\\<bottom>/Min (atoms F - atoms H)]) -\n      atoms H)", "using a2"], ["proof (prove)\nusing this:\n  n = card (atoms F - atoms H) - 1\n  Min (atoms F - atoms H) \\<in> atoms F \\<and>\n  Min (atoms F - atoms H) \\<notin> atoms H\n\ngoal (1 subgoal):\n 1. n =\n    card\n     (atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n      atoms (F[\\<bottom>/Min (atoms F - atoms H)]) -\n      atoms H)", "by (metis (full_types) formula.set(2) Diff_insert Diff_insert2 Suc.prems(1) Un_absorb Un_empty_right card_Diff_singleton e subst_atoms top_atoms_simp)"], ["proof (state)\nthis:\n  n =\n  card\n   (atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n    atoms (F[\\<bottom>/Min (atoms F - atoms H)]) -\n    atoms H)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "(* you need to tell sledgehammer about formula.set if you want it to find a proof here\\<dots> *)"], ["proof (state)\nthis:\n  n =\n  card\n   (atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n    atoms (F[\\<bottom>/Min (atoms F - atoms H)]) -\n    atoms H)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Suc n = card (atoms F - atoms H);\n     Min (atoms F - atoms H) \\<in> atoms F - atoms H\\<rbrakk>\n    \\<Longrightarrow> n =\n                      card\n                       (atoms\n                         (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                          F[\\<bottom>/Min (atoms F - atoms H)]) -\n                        atoms H)", "thus \"n = card (atoms ((F[\\<top> / Min (atoms F - atoms H)]) \\<^bold>\\<or> (F[\\<bottom> / Min (atoms F - atoms H)])) - atoms H)\""], ["proof (prove)\nusing this:\n  n =\n  card\n   (atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n    atoms (F[\\<bottom>/Min (atoms F - atoms H)]) -\n    atoms H)\n\ngoal (1 subgoal):\n 1. n =\n    card\n     (atoms\n       (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n        F[\\<bottom>/Min (atoms F - atoms H)]) -\n      atoms H)", "by simp"], ["proof (state)\nthis:\n  n =\n  card\n   (atoms\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)]) -\n    atoms H)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  n = card (atoms G - atoms H)\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "moreover"], ["proof (state)\nthis:\n  n = card (atoms G - atoms H)\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "have \"finite (atoms G - atoms H)\" \"\\<Turnstile> G \\<^bold>\\<rightarrow> H\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (atoms G - atoms H) &&& \\<Turnstile> G \\<^bold>\\<rightarrow> H", "using Suc(3-) e"], ["proof (prove)\nusing this:\n  finite (atoms F - atoms H)\n  \\<Turnstile> F \\<^bold>\\<rightarrow> H\n  Min (atoms F - atoms H) \\<in> atoms F - atoms H\n\ngoal (1 subgoal):\n 1. finite (atoms G - atoms H) &&& \\<Turnstile> G \\<^bold>\\<rightarrow> H", "by(auto simp: G_def substitution_lemma)"], ["proof (state)\nthis:\n  finite (atoms G - atoms H)\n  \\<Turnstile> G \\<^bold>\\<rightarrow> H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "ultimately"], ["proof (chain)\npicking this:\n  n = card (atoms G - atoms H)\n  finite (atoms G - atoms H)\n  \\<Turnstile> G \\<^bold>\\<rightarrow> H", "have IH: \"\\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H\" \"\\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H\" \n        \"atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H\""], ["proof (prove)\nusing this:\n  n = card (atoms G - atoms H)\n  finite (atoms G - atoms H)\n  \\<Turnstile> G \\<^bold>\\<rightarrow> H\n\ngoal (1 subgoal):\n 1. \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H &&&\n    \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H &&&\n    atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H", "using Suc"], ["proof (prove)\nusing this:\n  n = card (atoms G - atoms H)\n  finite (atoms G - atoms H)\n  \\<Turnstile> G \\<^bold>\\<rightarrow> H\n  \\<lbrakk>n = card (atoms ?F - atoms ?H); finite (atoms ?F - atoms ?H);\n   \\<Turnstile> ?F \\<^bold>\\<rightarrow> ?H\\<rbrakk>\n  \\<Longrightarrow> \\<Turnstile> ?F \\<^bold>\\<rightarrow>\n                                 interpolate ?F ?H \\<and>\n                    \\<Turnstile> interpolate ?F ?H \\<^bold>\\<rightarrow>\n                                 ?H \\<and>\n                    atoms (interpolate ?F ?H)\n                    \\<subseteq> atoms ?F \\<inter> atoms ?H\n  Suc n = card (atoms F - atoms H)\n  finite (atoms F - atoms H)\n  \\<Turnstile> F \\<^bold>\\<rightarrow> H\n\ngoal (1 subgoal):\n 1. \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H &&&\n    \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H &&&\n    atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H", "by blast+"], ["proof (state)\nthis:\n  \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H\n  \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H\n  atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "moreover"], ["proof (state)\nthis:\n  \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H\n  \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H\n  atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "have \"\\<Turnstile> F \\<^bold>\\<rightarrow> G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> G", "unfolding G_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow>\n                 F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                 F[\\<bottom>/Min (atoms F - atoms H)]", "using subst_true_false"], ["proof (prove)\nusing this:\n  ?\\<A> \\<Turnstile> ?F \\<Longrightarrow>\n  ?\\<A> \\<Turnstile> ?F[\\<top>/?n] \\<^bold>\\<or> ?F[\\<bottom>/?n]\n\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow>\n                 F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n                 F[\\<bottom>/Min (atoms F - atoms H)]", "by fastforce"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "moreover"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "{"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "(* sledgehammer\\<dots> *)"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "assume a1: \"atoms (interpolate ((F[\\<top>/Min (atoms F - atoms H)]) \\<^bold>\\<or> (F[\\<bottom>/Min (atoms F - atoms H)])) H) \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union> atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and> atoms (interpolate ((F[\\<top>/Min (atoms F - atoms H)]) \\<^bold>\\<or> (F[\\<bottom>/Min (atoms F - atoms H)])) H) \\<subseteq> atoms H\""], ["proof (state)\nthis:\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n              atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms H\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "have f2: \"atoms ((\\<bottom>::'a formula) \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atoms (\\<bottom> \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>", "by simp"], ["proof (state)\nthis:\n  atoms (\\<bottom> \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "then"], ["proof (chain)\npicking this:\n  atoms (\\<bottom> \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>", "have f3: \"atoms F - {Min (atoms F - atoms H)} = atoms (F[\\<top>/Min (atoms F - atoms H)])\""], ["proof (prove)\nusing this:\n  atoms (\\<bottom> \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>\n\ngoal (1 subgoal):\n 1. atoms F - {Min (atoms F - atoms H)} =\n    atoms (F[\\<top>/Min (atoms F - atoms H)])", "by (metis (no_types) DiffD1 Top_def Un_empty_right e formula.simps(91) subst_atoms)"], ["proof (state)\nthis:\n  atoms F - {Min (atoms F - atoms H)} =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "have \"atoms (F[\\<bottom>/Min (atoms F - atoms H)]) = atoms (F[\\<top>/Min (atoms F - atoms H)])\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n    atoms (F[\\<top>/Min (atoms F - atoms H)])", "using f2"], ["proof (prove)\nusing this:\n  atoms (\\<bottom> \\<^bold>\\<rightarrow> \\<bottom>) = atoms \\<bottom>\n\ngoal (1 subgoal):\n 1. atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n    atoms (F[\\<top>/Min (atoms F - atoms H)])", "by (metis (no_types) DiffD1 Top_def e subst_atoms)"], ["proof (state)\nthis:\n  atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "then"], ["proof (chain)\npicking this:\n  atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])", "have \"\\<not> atoms F \\<subseteq> atoms H \\<longrightarrow> atoms (interpolate ((F[\\<top>/Min (atoms F - atoms H)]) \\<^bold>\\<or> (F[\\<bottom>/Min (atoms F - atoms H)])) H) \\<subseteq> atoms F\""], ["proof (prove)\nusing this:\n  atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])\n\ngoal (1 subgoal):\n 1. \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n    atoms\n     (interpolate\n       (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n        F[\\<bottom>/Min (atoms F - atoms H)])\n       H)\n    \\<subseteq> atoms F", "using f3 a1"], ["proof (prove)\nusing this:\n  atoms (F[\\<bottom>/Min (atoms F - atoms H)]) =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])\n  atoms F - {Min (atoms F - atoms H)} =\n  atoms (F[\\<top>/Min (atoms F - atoms H)])\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n              atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms H\n\ngoal (1 subgoal):\n 1. \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n    atoms\n     (interpolate\n       (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n        F[\\<bottom>/Min (atoms F - atoms H)])\n       H)\n    \\<subseteq> atoms F", "by blast"], ["proof (state)\nthis:\n  \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms F\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "}"], ["proof (state)\nthis:\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n              atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms H \\<Longrightarrow>\n  \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms F\n\ngoal (2 subgoals):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H\n 2. \\<And>x F H.\n       \\<lbrakk>\\<And>F H.\n                   \\<lbrakk>x = card (atoms F - atoms H);\n                    finite (atoms F - atoms H);\n                    \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n                   \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\n            interpolate F H \\<and>\n                                     \\<Turnstile> interpolate F\n             H \\<^bold>\\<rightarrow>\n            H \\<and>\n                                     atoms (interpolate F H)\n                                     \\<subseteq> atoms F \\<inter> atoms H;\n        Suc x = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "ultimately"], ["proof (chain)\npicking this:\n  \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H\n  \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H\n  atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n              atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms H \\<Longrightarrow>\n  \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms F", "show ?case"], ["proof (prove)\nusing this:\n  \\<Turnstile> G \\<^bold>\\<rightarrow> interpolate G H\n  \\<Turnstile> interpolate G H \\<^bold>\\<rightarrow> H\n  atoms (interpolate G H) \\<subseteq> atoms G \\<inter> atoms H\n  \\<Turnstile> F \\<^bold>\\<rightarrow> G\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms (F[\\<top>/Min (atoms F - atoms H)]) \\<union>\n              atoms (F[\\<bottom>/Min (atoms F - atoms H)]) \\<and>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms H \\<Longrightarrow>\n  \\<not> atoms F \\<subseteq> atoms H \\<longrightarrow>\n  atoms\n   (interpolate\n     (F[\\<top>/Min (atoms F - atoms H)] \\<^bold>\\<or>\n      F[\\<bottom>/Min (atoms F - atoms H)])\n     H)\n  \\<subseteq> atoms F\n\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n    \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n    atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "by (intro conjI; subst interpolate.simps; simp del: interpolate.simps add: Let_def G_def; blast?)"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n  \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n  atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\n\ngoal (1 subgoal):\n 1. \\<And>F H.\n       \\<lbrakk>0 = card (atoms F - atoms H); finite (atoms F - atoms H);\n        \\<Turnstile> F \\<^bold>\\<rightarrow> H\\<rbrakk>\n       \\<Longrightarrow> \\<Turnstile> F \\<^bold>\\<rightarrow>\ninterpolate F H \\<and>\n                         \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow>\nH \\<and>\n                         atoms (interpolate F H)\n                         \\<subseteq> atoms F \\<inter> atoms H", "qed auto"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n  \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n  atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\n\ngoal (3 subgoals):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\n 2. \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\n 3. atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "thus \"?t1\" \"?t2\" \"?s\""], ["proof (prove)\nusing this:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H \\<and>\n  \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H \\<and>\n  atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\n\ngoal (1 subgoal):\n 1. \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H &&&\n    \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H &&&\n    atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H", "by simp_all"], ["proof (state)\nthis:\n  \\<Turnstile> F \\<^bold>\\<rightarrow> interpolate F H\n  \\<Turnstile> interpolate F H \\<^bold>\\<rightarrow> H\n  atoms (interpolate F H) \\<subseteq> atoms F \\<inter> atoms H\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>So no, the proof is by no means easier this way.\n  Admittedly, part of the fuzz is due to @{const Min},\n  but replacing atoms with something that returns lists doesn't make it better.\\<close>"], ["", "end"]]}