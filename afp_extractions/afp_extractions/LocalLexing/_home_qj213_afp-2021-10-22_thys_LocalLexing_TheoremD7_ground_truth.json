{"file_name": "/home/qj213/afp-2021-10-22/thys/LocalLexing/TheoremD7.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/LocalLexing", "problem_names": ["lemma Derives1_keep_first_terminal: \"Derives1 (x#u) i r (y#v) \\<Longrightarrow> is_terminal x \\<Longrightarrow> x = y\"", "lemma Derives1_nonterminal_head:\n  assumes \"Derives1 u i r (N#v)\"\n  assumes \"is_nonterminal N\"\n  shows \"\\<exists> u' M. u = M#u' \\<and> is_nonterminal M\"", "lemma sentence_starts_with_nonterminal:\n  assumes \"is_nonterminal N\"\n  assumes \"derives u []\"\n  shows \"\\<exists> X r. u@[N] = X#r \\<and> is_nonterminal X\"", "lemma Derives1_nonterminal_head':\n  assumes \"Derives1 u i r (v1@[N]@v2)\"\n  assumes \"is_nonterminal N\"\n  assumes \"derives v1 []\"\n  shows \"\\<exists> u' M. u = M#u' \\<and> is_nonterminal M\"", "lemma thmD7_helper: \n  assumes \"LeftDerivation [\\<SS>] D (N#v)\"\n  assumes \"is_nonterminal N\"\n  assumes \"\\<SS> \\<noteq> N\"  \n  shows \"\\<exists> n M a a1 a2 w. n < length D \\<and> (M, a) \\<in> \\<RR> \\<and> LeftDerivation [\\<SS>] (take n D) (M#w) \\<and> \n    a = a1 @ [N] @ a2 \\<and> derives a1 []\"", "lemma head_of_item_\\<beta>_is_next_symbol: \n  \"wellformed_item x \\<Longrightarrow> item_\\<beta> x = t#\\<delta> \\<Longrightarrow> next_symbol x = Some t\"", "lemma next_symbol_predicts: \"next_symbol x = Some N \\<Longrightarrow> (N, a) \\<in> \\<RR> \\<Longrightarrow> k = item_end x \\<Longrightarrow> \n  init_item (N, a) k \\<in> Predict k {x}\"", "lemma thmD7_LeftDerivation: \"LeftDerivation [\\<SS>] D (N#\\<gamma>) \\<Longrightarrow> is_nonterminal N \\<Longrightarrow> (N, \\<alpha>) \\<in> \\<RR> \\<Longrightarrow> \n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\"", "theorem thmD7: \"is_derivation (N#\\<gamma>) \\<Longrightarrow> is_nonterminal N \\<Longrightarrow> (N, \\<alpha>) \\<in> \\<RR> \\<Longrightarrow> \n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\""], "translations": [["", "lemma Derives1_keep_first_terminal: \"Derives1 (x#u) i r (y#v) \\<Longrightarrow> is_terminal x \\<Longrightarrow> x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Derives1 (x # u) i r (y # v); is_terminal x\\<rbrakk>\n    \\<Longrightarrow> x = y", "by (metis Derives1_leftmost Derives1_take leftmost_cons_terminal list.sel(1) not_le take_Cons')"], ["", "lemma Derives1_nonterminal_head:\n  assumes \"Derives1 u i r (N#v)\"\n  assumes \"is_nonterminal N\"\n  shows \"\\<exists> u' M. u = M#u' \\<and> is_nonterminal M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "from assms"], ["proof (chain)\npicking this:\n  Derives1 u i r (N # v)\n  is_nonterminal N", "have nonempty_u: \"u \\<noteq> []\""], ["proof (prove)\nusing this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n\ngoal (1 subgoal):\n 1. u \\<noteq> []", "by (metis Derives1_bound less_nat_zero_code list.size(3))"], ["proof (state)\nthis:\n  u \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "have \"\\<exists> u' M. u = M#u'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u'", "using count_terminals.cases nonempty_u"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x = [] \\<Longrightarrow> ?P;\n   \\<And>x xs. ?x = x # xs \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  u \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u'", "by blast"], ["proof (state)\nthis:\n  \\<exists>u' M. u = M # u'\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "then"], ["proof (chain)\npicking this:\n  \\<exists>u' M. u = M # u'", "obtain u' M where split_u: \"u = M#u'\""], ["proof (prove)\nusing this:\n  \\<exists>u' M. u = M # u'\n\ngoal (1 subgoal):\n 1. (\\<And>M u'. u = M # u' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u = M # u'\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "have is_sentence_u: \"is_sentence u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_sentence u", "using assms"], ["proof (prove)\nusing this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n\ngoal (1 subgoal):\n 1. is_sentence u", "using Derives1_sentence1"], ["proof (prove)\nusing this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n  Derives1 ?a ?i ?r ?b \\<Longrightarrow> is_sentence ?a\n\ngoal (1 subgoal):\n 1. is_sentence u", "by blast"], ["proof (state)\nthis:\n  is_sentence u\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "then"], ["proof (chain)\npicking this:\n  is_sentence u", "have \"is_terminal M \\<or> is_nonterminal M\""], ["proof (prove)\nusing this:\n  is_sentence u\n\ngoal (1 subgoal):\n 1. is_terminal M \\<or> is_nonterminal M", "using is_sentence_cons is_symbol_distinct split_u"], ["proof (prove)\nusing this:\n  is_sentence u\n  is_sentence (?N # ?s) = (is_symbol ?N \\<and> is_sentence ?s)\n  is_symbol ?x \\<Longrightarrow> is_terminal ?x \\<noteq> is_nonterminal ?x\n  u = M # u'\n\ngoal (1 subgoal):\n 1. is_terminal M \\<or> is_nonterminal M", "by blast"], ["proof (state)\nthis:\n  is_terminal M \\<or> is_nonterminal M\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "then"], ["proof (chain)\npicking this:\n  is_terminal M \\<or> is_nonterminal M", "show ?thesis"], ["proof (prove)\nusing this:\n  is_terminal M \\<or> is_nonterminal M\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "proof (induct rule: disjCases2)"], ["proof (state)\ngoal (2 subgoals):\n 1. is_terminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n 2. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "case 1"], ["proof (state)\nthis:\n  is_terminal M\n\ngoal (2 subgoals):\n 1. is_terminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n 2. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "have \"is_terminal N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_terminal N", "using \"1.hyps\" Derives1_keep_first_terminal \n        assms(1) split_u"], ["proof (prove)\nusing this:\n  is_terminal M\n  \\<lbrakk>Derives1 (?x # ?u) ?i ?r (?y # ?v); is_terminal ?x\\<rbrakk>\n  \\<Longrightarrow> ?x = ?y\n  Derives1 u i r (N # v)\n  u = M # u'\n\ngoal (1 subgoal):\n 1. is_terminal N", "by blast"], ["proof (state)\nthis:\n  is_terminal N\n\ngoal (2 subgoals):\n 1. is_terminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n 2. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "with assms"], ["proof (chain)\npicking this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n  is_terminal N", "have \"False\""], ["proof (prove)\nusing this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n  is_terminal N\n\ngoal (1 subgoal):\n 1. False", "using is_terminal_nonterminal"], ["proof (prove)\nusing this:\n  Derives1 u i r (N # v)\n  is_nonterminal N\n  is_terminal N\n  \\<lbrakk>is_terminal ?x; is_nonterminal ?x\\<rbrakk>\n  \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. is_terminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n 2. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "then"], ["proof (chain)\npicking this:\n  False", "show ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "by blast"], ["proof (state)\nthis:\n  \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n\ngoal (1 subgoal):\n 1. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "case 2"], ["proof (state)\nthis:\n  is_nonterminal M\n\ngoal (1 subgoal):\n 1. is_nonterminal M \\<Longrightarrow>\n    \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "with split_u"], ["proof (chain)\npicking this:\n  u = M # u'\n  is_nonterminal M", "show ?case"], ["proof (prove)\nusing this:\n  u = M # u'\n  is_nonterminal M\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "by blast"], ["proof (state)\nthis:\n  \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sentence_starts_with_nonterminal:\n  assumes \"is_nonterminal N\"\n  assumes \"derives u []\"\n  shows \"\\<exists> X r. u@[N] = X#r \\<and> is_nonterminal X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "proof (cases \"u = []\")"], ["proof (state)\ngoal (2 subgoals):\n 1. u = [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X\n 2. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "case True"], ["proof (state)\nthis:\n  u = []\n\ngoal (2 subgoals):\n 1. u = [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X\n 2. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "thus ?thesis"], ["proof (prove)\nusing this:\n  u = []\n\ngoal (1 subgoal):\n 1. \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "using assms(1)"], ["proof (prove)\nusing this:\n  u = []\n  is_nonterminal N\n\ngoal (1 subgoal):\n 1. \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "by blast"], ["proof (state)\nthis:\n  \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X\n\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "case False"], ["proof (state)\nthis:\n  u \\<noteq> []\n\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "then"], ["proof (chain)\npicking this:\n  u \\<noteq> []", "have \"\\<exists> X r. u = X#r\""], ["proof (prove)\nusing this:\n  u \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<exists>X r. u = X # r", "using count_terminals.cases"], ["proof (prove)\nusing this:\n  u \\<noteq> []\n  \\<lbrakk>?x = [] \\<Longrightarrow> ?P;\n   \\<And>x xs. ?x = x # xs \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. \\<exists>X r. u = X # r", "by blast"], ["proof (state)\nthis:\n  \\<exists>X r. u = X # r\n\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "then"], ["proof (chain)\npicking this:\n  \\<exists>X r. u = X # r", "obtain X r where Xr: \"u = X#r\""], ["proof (prove)\nusing this:\n  \\<exists>X r. u = X # r\n\ngoal (1 subgoal):\n 1. (\\<And>X r. u = X # r \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  u = X # r\n\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "then"], ["proof (chain)\npicking this:\n  u = X # r", "have \"is_nonterminal X\""], ["proof (prove)\nusing this:\n  u = X # r\n\ngoal (1 subgoal):\n 1. is_nonterminal X", "by (metis False assms(2) count_terminals.simps derives_count_terminals_leq \n      derives_is_sentence is_sentence_cons is_symbol_distinct not_le zero_less_Suc)"], ["proof (state)\nthis:\n  is_nonterminal X\n\ngoal (1 subgoal):\n 1. u \\<noteq> [] \\<Longrightarrow>\n    \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "with Xr"], ["proof (chain)\npicking this:\n  u = X # r\n  is_nonterminal X", "show ?thesis"], ["proof (prove)\nusing this:\n  u = X # r\n  is_nonterminal X\n\ngoal (1 subgoal):\n 1. \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X", "by auto"], ["proof (state)\nthis:\n  \\<exists>X r. u @ [N] = X # r \\<and> is_nonterminal X\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Derives1_nonterminal_head':\n  assumes \"Derives1 u i r (v1@[N]@v2)\"\n  assumes \"is_nonterminal N\"\n  assumes \"derives v1 []\"\n  shows \"\\<exists> u' M. u = M#u' \\<and> is_nonterminal M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "from sentence_starts_with_nonterminal[OF assms(2,3)]"], ["proof (chain)\npicking this:\n  \\<exists>X r. v1 @ [N] = X # r \\<and> is_nonterminal X", "obtain X r where \"v1 @ [N] = X # r \\<and> is_nonterminal X\""], ["proof (prove)\nusing this:\n  \\<exists>X r. v1 @ [N] = X # r \\<and> is_nonterminal X\n\ngoal (1 subgoal):\n 1. (\\<And>X r.\n        v1 @ [N] = X # r \\<and> is_nonterminal X \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  v1 @ [N] = X # r \\<and> is_nonterminal X\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "then"], ["proof (chain)\npicking this:\n  v1 @ [N] = X # r \\<and> is_nonterminal X", "show ?thesis"], ["proof (prove)\nusing this:\n  v1 @ [N] = X # r \\<and> is_nonterminal X\n\ngoal (1 subgoal):\n 1. \\<exists>u' M. u = M # u' \\<and> is_nonterminal M", "by (metis Derives1_nonterminal_head append_Cons append_assoc assms(1))"], ["proof (state)\nthis:\n  \\<exists>u' M. u = M # u' \\<and> is_nonterminal M\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma thmD7_helper: \n  assumes \"LeftDerivation [\\<SS>] D (N#v)\"\n  assumes \"is_nonterminal N\"\n  assumes \"\\<SS> \\<noteq> N\"  \n  shows \"\\<exists> n M a a1 a2 w. n < length D \\<and> (M, a) \\<in> \\<RR> \\<and> LeftDerivation [\\<SS>] (take n D) (M#w) \\<and> \n    a = a1 @ [N] @ a2 \\<and> derives a1 []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n M a a1 a2 w.\n       n < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>n M a a1 a2 w.\n       n < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "have \"\\<exists> n u v. LeftDerivation [\\<SS>] (take n D) (u@[N]@v) \\<and> derives u []\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n u v.\n       LeftDerivation [\\<SS>] (take n D) (u @ [N] @ v) \\<and> derives u []", "apply (rule_tac x=\"length D\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u v.\n       LeftDerivation [\\<SS>] (take (length D) D) (u @ [N] @ v) \\<and>\n       derives u []", "apply (rule_tac x=\"[]\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>v.\n       LeftDerivation [\\<SS>] (take (length D) D) ([] @ [N] @ v) \\<and>\n       derives [] []", "apply (rule_tac x=\"v\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. LeftDerivation [\\<SS>] (take (length D) D) ([] @ [N] @ v) \\<and>\n    derives [] []", "using assms"], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] D (N # v)\n  is_nonterminal N\n  \\<SS> \\<noteq> N\n\ngoal (1 subgoal):\n 1. LeftDerivation [\\<SS>] (take (length D) D) ([] @ [N] @ v) \\<and>\n    derives [] []", "by simp"], ["proof (state)\nthis:\n  \\<exists>n u v.\n     LeftDerivation [\\<SS>] (take n D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. \\<exists>n M a a1 a2 w.\n       n < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  \\<exists>n u v.\n     LeftDerivation [\\<SS>] (take n D) (u @ [N] @ v) \\<and> derives u []", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>n u v.\n     LeftDerivation [\\<SS>] (take n D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. \\<exists>n M a a1 a2 w.\n       n < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "proof (induct rule: ex_minimal_witness)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "case (Minimal K)"], ["proof (state)\nthis:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "have nonzero_K: \"K \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. K \\<noteq> 0", "proof (cases \"K = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. K = 0 \\<Longrightarrow> K \\<noteq> 0\n 2. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "case True"], ["proof (state)\nthis:\n  K = 0\n\ngoal (2 subgoals):\n 1. K = 0 \\<Longrightarrow> K \\<noteq> 0\n 2. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "with Minimal"], ["proof (chain)\npicking this:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  K = 0", "have \"\\<exists> u v. [\\<SS>] = u@[N]@v\""], ["proof (prove)\nusing this:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  K = 0\n\ngoal (1 subgoal):\n 1. \\<exists>u v. [\\<SS>] = u @ [N] @ v", "using LeftDerivation.simps(1) take_0"], ["proof (prove)\nusing this:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  K = 0\n  LeftDerivation ?a [] ?b = (?a = ?b)\n  take 0 ?xs = []\n\ngoal (1 subgoal):\n 1. \\<exists>u v. [\\<SS>] = u @ [N] @ v", "by auto"], ["proof (state)\nthis:\n  \\<exists>u v. [\\<SS>] = u @ [N] @ v\n\ngoal (2 subgoals):\n 1. K = 0 \\<Longrightarrow> K \\<noteq> 0\n 2. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "with assms"], ["proof (chain)\npicking this:\n  LeftDerivation [\\<SS>] D (N # v)\n  is_nonterminal N\n  \\<SS> \\<noteq> N\n  \\<exists>u v. [\\<SS>] = u @ [N] @ v", "have \"False\""], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] D (N # v)\n  is_nonterminal N\n  \\<SS> \\<noteq> N\n  \\<exists>u v. [\\<SS>] = u @ [N] @ v\n\ngoal (1 subgoal):\n 1. False", "by (simp add: Cons_eq_append_conv)"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. K = 0 \\<Longrightarrow> K \\<noteq> 0\n 2. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "then"], ["proof (chain)\npicking this:\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. K \\<noteq> 0", "by simp"], ["proof (state)\nthis:\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "case False"], ["proof (state)\nthis:\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. K \\<noteq> 0 \\<Longrightarrow> K \\<noteq> 0", "then"], ["proof (chain)\npicking this:\n  K \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. K \\<noteq> 0", "by arith"], ["proof (state)\nthis:\n  K \\<noteq> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "from Minimal(1)"], ["proof (chain)\npicking this:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []", "obtain u v where uv: \"LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\""], ["proof (prove)\nusing this:\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. (\\<And>u v.\n        LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n        derives u [] \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "from nonzero_K"], ["proof (chain)\npicking this:\n  K \\<noteq> 0", "have \"take K D \\<noteq> []\""], ["proof (prove)\nusing this:\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. take K D \\<noteq> []", "using Minimal.hyps(2) less_nat_zero_code nat_neq_iff take_eq_Nil uv"], ["proof (prove)\nusing this:\n  K \\<noteq> 0\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  (?n < 0) = False\n  (?m \\<noteq> ?n) = (?m < ?n \\<or> ?n < ?m)\n  (take ?n ?xs = []) = (?n = 0 \\<or> ?xs = [])\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. take K D \\<noteq> []", "by force"], ["proof (state)\nthis:\n  take K D \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  take K D \\<noteq> []", "have \"\\<exists> E e. (take K D) = E@[e]\""], ["proof (prove)\nusing this:\n  take K D \\<noteq> []\n\ngoal (1 subgoal):\n 1. \\<exists>E e. take K D = E @ [e]", "using rev_exhaust"], ["proof (prove)\nusing this:\n  take K D \\<noteq> []\n  \\<lbrakk>?xs = [] \\<Longrightarrow> ?P;\n   \\<And>ys y. ?xs = ys @ [y] \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. \\<exists>E e. take K D = E @ [e]", "by blast"], ["proof (state)\nthis:\n  \\<exists>E e. take K D = E @ [e]\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  \\<exists>E e. take K D = E @ [e]", "obtain E e where Ee: \"take K D = E@[e]\""], ["proof (prove)\nusing this:\n  \\<exists>E e. take K D = E @ [e]\n\ngoal (1 subgoal):\n 1. (\\<And>E e.\n        take K D = E @ [e] \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  take K D = E @ [e]\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "with uv"], ["proof (chain)\npicking this:\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  take K D = E @ [e]", "have \"\\<exists> x. LeftDerivation [\\<SS>] E x \\<and> LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\""], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  take K D = E @ [e]\n\ngoal (1 subgoal):\n 1. \\<exists>x.\n       LeftDerivation [\\<SS>] E x \\<and>\n       LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)", "by (simp add: LeftDerivation_append)"], ["proof (state)\nthis:\n  \\<exists>x.\n     LeftDerivation [\\<SS>] E x \\<and>\n     LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  \\<exists>x.\n     LeftDerivation [\\<SS>] E x \\<and>\n     LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)", "obtain x where x: \"LeftDerivation [\\<SS>] E x \\<and> LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\""], ["proof (prove)\nusing this:\n  \\<exists>x.\n     LeftDerivation [\\<SS>] E x \\<and>\n     LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        LeftDerivation [\\<SS>] E x \\<and>\n        LeftDerives1 x (fst e) (snd e) (u @ [N] @ v) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)", "have \"\\<exists> w M. x = M#w \\<and> is_nonterminal M\""], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. \\<exists>w M. x = M # w \\<and> is_nonterminal M", "using Derives1_nonterminal_head' LeftDerives1_implies_Derives1 assms(2) uv"], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n  \\<lbrakk>Derives1 ?u ?i ?r (?v1.0 @ [?N] @ ?v2.0); is_nonterminal ?N;\n   derives ?v1.0 []\\<rbrakk>\n  \\<Longrightarrow> \\<exists>u' M. ?u = M # u' \\<and> is_nonterminal M\n  LeftDerives1 ?a ?i ?r ?b \\<Longrightarrow> Derives1 ?a ?i ?r ?b\n  is_nonterminal N\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. \\<exists>w M. x = M # w \\<and> is_nonterminal M", "by blast"], ["proof (state)\nthis:\n  \\<exists>w M. x = M # w \\<and> is_nonterminal M\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "then"], ["proof (chain)\npicking this:\n  \\<exists>w M. x = M # w \\<and> is_nonterminal M", "obtain w M where split_x: \"x = M#w\" and is_nonterminal_M: \"is_nonterminal M\""], ["proof (prove)\nusing this:\n  \\<exists>w M. x = M # w \\<and> is_nonterminal M\n\ngoal (1 subgoal):\n 1. (\\<And>M w.\n        \\<lbrakk>x = M # w; is_nonterminal M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = M # w\n  is_nonterminal M\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "from Ee nonzero_K"], ["proof (chain)\npicking this:\n  take K D = E @ [e]\n  K \\<noteq> 0", "have E: \"E = take (K - 1) D\""], ["proof (prove)\nusing this:\n  take K D = E @ [e]\n  K \\<noteq> 0\n\ngoal (1 subgoal):\n 1. E = take (K - 1) D", "by (metis Minimal.hyps(2) butlast_snoc butlast_take dual_order.strict_implies_order \n          le_less_linear take_all uv)"], ["proof (state)\nthis:\n  E = take (K - 1) D\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "have \"leftmost (fst e) (M#w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. leftmost (fst e) (M # w)", "using x LeftDerives1_def split_x"], ["proof (prove)\nusing this:\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n  LeftDerives1 ?u ?i ?r ?v = (leftmost ?i ?u \\<and> Derives1 ?u ?i ?r ?v)\n  x = M # w\n\ngoal (1 subgoal):\n 1. leftmost (fst e) (M # w)", "by blast"], ["proof (state)\nthis:\n  leftmost (fst e) (M # w)\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "with is_nonterminal_M"], ["proof (chain)\npicking this:\n  is_nonterminal M\n  leftmost (fst e) (M # w)", "have fst_e: \"fst e = 0\""], ["proof (prove)\nusing this:\n  is_nonterminal M\n  leftmost (fst e) (M # w)\n\ngoal (1 subgoal):\n 1. fst e = 0", "by (simp add: leftmost_cons_nonterminal leftmost_unique)"], ["proof (state)\nthis:\n  fst e = 0\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "have Derives1: \"Derives1 x 0 (snd e) (u @ [N] @ v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Derives1 x 0 (snd e) (u @ [N] @ v)", "using LeftDerives1_implies_Derives1 fst_e x"], ["proof (prove)\nusing this:\n  LeftDerives1 ?a ?i ?r ?b \\<Longrightarrow> Derives1 ?a ?i ?r ?b\n  fst e = 0\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. Derives1 x 0 (snd e) (u @ [N] @ v)", "by auto"], ["proof (state)\nthis:\n  Derives1 x 0 (snd e) (u @ [N] @ v)\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "have x_splits_at: \"splits_at x 0 [] M w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. splits_at x 0 [] M w", "by (simp add: split_x splits_at_def)"], ["proof (state)\nthis:\n  splits_at x 0 [] M w\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "from Derives1 x_splits_at"], ["proof (chain)\npicking this:\n  Derives1 x 0 (snd e) (u @ [N] @ v)\n  splits_at x 0 [] M w", "have pq: \"\\<exists>p q. u = [] @ p \\<and> v = q @ w \\<and> snd (snd e) = p @ [N] @ q\""], ["proof (prove)\nusing this:\n  Derives1 x 0 (snd e) (u @ [N] @ v)\n  splits_at x 0 [] M w\n\ngoal (1 subgoal):\n 1. \\<exists>p q.\n       u = [] @ p \\<and> v = q @ w \\<and> snd (snd e) = p @ [N] @ q", "proof (induct rule: Derives1_X_is_part_of_rule)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<beta>.\n       \\<lbrakk>x = u @ [N] @ \\<beta>; length u < 0;\n        Derives1 \\<beta> (0 - length u - 1) (snd e) v\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "case (Suffix \\<alpha>)"], ["proof (state)\nthis:\n  x = u @ [N] @ \\<alpha>\n  length u < 0\n  Derives1 \\<alpha> (0 - length u - 1) (snd e) v\n\ngoal (2 subgoals):\n 1. \\<And>\\<beta>.\n       \\<lbrakk>x = u @ [N] @ \\<beta>; length u < 0;\n        Derives1 \\<beta> (0 - length u - 1) (snd e) v\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "thus ?case"], ["proof (prove)\nusing this:\n  x = u @ [N] @ \\<alpha>\n  length u < 0\n  Derives1 \\<alpha> (0 - length u - 1) (snd e) v\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "case (Prefix \\<beta>)"], ["proof (state)\nthis:\n  x = \\<beta> @ [N] @ v\n  Derives1 \\<beta> 0 (snd e) u\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  x = \\<beta> @ [N] @ v\n  Derives1 \\<beta> 0 (snd e) u", "have derives_\\<beta>: \"derives \\<beta> []\""], ["proof (prove)\nusing this:\n  x = \\<beta> @ [N] @ v\n  Derives1 \\<beta> 0 (snd e) u\n\ngoal (1 subgoal):\n 1. derives \\<beta> []", "using Derives1_implies_derives1 derives1_implies_derives derives_trans uv"], ["proof (prove)\nusing this:\n  x = \\<beta> @ [N] @ v\n  Derives1 \\<beta> 0 (snd e) u\n  Derives1 ?u ?i ?r ?v \\<Longrightarrow> derives1 ?u ?v\n  derives1 ?a ?b \\<Longrightarrow> derives ?a ?b\n  \\<lbrakk>derives ?a ?b; derives ?b ?c\\<rbrakk>\n  \\<Longrightarrow> derives ?a ?c\n  LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n\ngoal (1 subgoal):\n 1. derives \\<beta> []", "by blast"], ["proof (state)\nthis:\n  derives \\<beta> []\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha>.\n       \\<lbrakk>x = \\<alpha> @ [N] @ v;\n        Derives1 \\<alpha> 0 (snd e) u\\<rbrakk>\n       \\<Longrightarrow> False", "with Prefix(1) x Minimal E nonzero_K"], ["proof (chain)\npicking this:\n  x = \\<beta> @ [N] @ v\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  E = take (K - 1) D\n  K \\<noteq> 0\n  derives \\<beta> []", "show \"False\""], ["proof (prove)\nusing this:\n  x = \\<beta> @ [N] @ v\n  LeftDerivation [\\<SS>] E x \\<and>\n  LeftDerives1 x (fst e) (snd e) (u @ [N] @ v)\n  \\<exists>u v.\n     LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and> derives u []\n  ?k < K \\<Longrightarrow>\n  \\<nexists>u v.\n     LeftDerivation [\\<SS>] (take ?k D) (u @ [N] @ v) \\<and> derives u []\n  E = take (K - 1) D\n  K \\<noteq> 0\n  derives \\<beta> []\n\ngoal (1 subgoal):\n 1. False", "by (meson diff_less less_nat_zero_code less_one nat_neq_iff)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>p q. u = [] @ p \\<and> v = q @ w \\<and> snd (snd e) = p @ [N] @ q\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "from this[simplified]"], ["proof (chain)\npicking this:\n  \\<exists>q. v = q @ w \\<and> snd (snd e) = u @ N # q", "obtain q where q: \"v = q @ w \\<and> snd (snd e) = u @ N # q\""], ["proof (prove)\nusing this:\n  \\<exists>q. v = q @ w \\<and> snd (snd e) = u @ N # q\n\ngoal (1 subgoal):\n 1. (\\<And>q.\n        v = q @ w \\<and> snd (snd e) = u @ N # q \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  v = q @ w \\<and> snd (snd e) = u @ N # q\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "have M_def: \"fst (snd e) = M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fst (snd e) = M", "using Derives1 Derives1_nonterminal x_splits_at"], ["proof (prove)\nusing this:\n  Derives1 x 0 (snd e) (u @ [N] @ v)\n  \\<lbrakk>Derives1 ?a ?i ?r ?b;\n   splits_at ?a ?i ?\\<alpha> ?N ?\\<beta>\\<rbrakk>\n  \\<Longrightarrow> fst ?r = ?N \\<and> is_nonterminal ?N\n  splits_at x 0 [] M w\n\ngoal (1 subgoal):\n 1. fst (snd e) = M", "by blast"], ["proof (state)\nthis:\n  fst (snd e) = M\n\ngoal (1 subgoal):\n 1. \\<And>K.\n       \\<lbrakk>\\<exists>u v.\n                   LeftDerivation [\\<SS>] (take K D) (u @ [N] @ v) \\<and>\n                   derives u [];\n        \\<And>k.\n           k < K \\<Longrightarrow>\n           \\<nexists>u v.\n              LeftDerivation [\\<SS>] (take k D) (u @ [N] @ v) \\<and>\n              derives u []\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n M a a1 a2 w.\n                            n < length D \\<and>\n                            (M, a) \\<in> \\<RR> \\<and>\n                            LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n                            a = a1 @ [N] @ a2 \\<and> derives a1 []", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n M a a1 a2 w.\n       n < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "apply (rule_tac x=\"K-1\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>M a a1 a2 w.\n       K - 1 < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "apply (rule_tac x=\"M\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a a1 a2 w.\n       K - 1 < length D \\<and>\n       (M, a) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n       a = a1 @ [N] @ a2 \\<and> derives a1 []", "apply (rule_tac x=\"snd (snd e)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a1 a2 w.\n       K - 1 < length D \\<and>\n       (M, snd (snd e)) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n       snd (snd e) = a1 @ [N] @ a2 \\<and> derives a1 []", "apply (rule_tac x=\"u\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a2 w.\n       K - 1 < length D \\<and>\n       (M, snd (snd e)) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n       snd (snd e) = u @ [N] @ a2 \\<and> derives u []", "apply (rule_tac x=\"q\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>w.\n       K - 1 < length D \\<and>\n       (M, snd (snd e)) \\<in> \\<RR> \\<and>\n       LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n       snd (snd e) = u @ [N] @ q \\<and> derives u []", "apply (rule_tac x=\"w\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. K - 1 < length D \\<and>\n    (M, snd (snd e)) \\<in> \\<RR> \\<and>\n    LeftDerivation [\\<SS>] (take (K - 1) D) (M # w) \\<and>\n    snd (snd e) = u @ [N] @ q \\<and> derives u []", "by (metis Derives1 Derives1_rule E Ee M_def One_nat_def Suc_pred pq append_Nil \n          append_same_eq dual_order.strict_implies_order le_less_linear nonzero_K not_Cons_self2 \n          not_gr0 not_less_eq prod.collapse q self_append_conv split_x take_all uv x)"], ["proof (state)\nthis:\n  \\<exists>n M a a1 a2 w.\n     n < length D \\<and>\n     (M, a) \\<in> \\<RR> \\<and>\n     LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n     a = a1 @ [N] @ a2 \\<and> derives a1 []\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>n M a a1 a2 w.\n     n < length D \\<and>\n     (M, a) \\<in> \\<RR> \\<and>\n     LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n     a = a1 @ [N] @ a2 \\<and> derives a1 []\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma head_of_item_\\<beta>_is_next_symbol: \n  \"wellformed_item x \\<Longrightarrow> item_\\<beta> x = t#\\<delta> \\<Longrightarrow> next_symbol x = Some t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>wellformed_item x; item_\\<beta> x = t # \\<delta>\\<rbrakk>\n    \\<Longrightarrow> next_symbol x = Some t", "using next_symbol_def next_symbol_starts_item_\\<beta> wellformed_complete_item_\\<beta>"], ["proof (prove)\nusing this:\n  next_symbol ?x =\n  (if is_complete ?x then None else Some (item_rhs ?x ! item_dot ?x))\n  \\<lbrakk>wellformed_item ?x; next_symbol ?x = Some ?t\\<rbrakk>\n  \\<Longrightarrow> \\<exists>\\<delta>. item_\\<beta> ?x = ?t # \\<delta>\n  \\<lbrakk>wellformed_item ?x; is_complete ?x\\<rbrakk>\n  \\<Longrightarrow> item_\\<beta> ?x = []\n\ngoal (1 subgoal):\n 1. \\<lbrakk>wellformed_item x; item_\\<beta> x = t # \\<delta>\\<rbrakk>\n    \\<Longrightarrow> next_symbol x = Some t", "by fastforce"], ["", "lemma next_symbol_predicts: \"next_symbol x = Some N \\<Longrightarrow> (N, a) \\<in> \\<RR> \\<Longrightarrow> k = item_end x \\<Longrightarrow> \n  init_item (N, a) k \\<in> Predict k {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>next_symbol x = Some N; (N, a) \\<in> \\<RR>;\n     k = item_end x\\<rbrakk>\n    \\<Longrightarrow> init_item (N, a) k \\<in> Predict k {x}", "using Predict_def bin_def"], ["proof (prove)\nusing this:\n  Predict ?k ?I =\n  ?I \\<union>\n  {uu_.\n   \\<exists>r x.\n      uu_ = init_item r ?k \\<and>\n      r \\<in> \\<RR> \\<and>\n      x \\<in> bin ?I ?k \\<and> next_symbol x = Some (fst r)}\n  bin ?I ?k = {x \\<in> ?I. item_end x = ?k}\n\ngoal (1 subgoal):\n 1. \\<lbrakk>next_symbol x = Some N; (N, a) \\<in> \\<RR>;\n     k = item_end x\\<rbrakk>\n    \\<Longrightarrow> init_item (N, a) k \\<in> Predict k {x}", "by auto"], ["", "lemma thmD7_LeftDerivation: \"LeftDerivation [\\<SS>] D (N#\\<gamma>) \\<Longrightarrow> is_nonterminal N \\<Longrightarrow> (N, \\<alpha>) \\<in> \\<RR> \\<Longrightarrow> \n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>LeftDerivation [\\<SS>] D (N # \\<gamma>); is_nonterminal N;\n     (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n    \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "proof (induct \"length D\" arbitrary: D N \\<gamma> \\<alpha> rule: less_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>D N \\<gamma> \\<alpha>.\n       \\<lbrakk>\\<And>Da N \\<gamma> \\<alpha>.\n                   \\<lbrakk>length Da < length D;\n                    LeftDerivation [\\<SS>] Da (N # \\<gamma>);\n                    is_nonterminal N; (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n                   \\<Longrightarrow> init_item (N, \\<alpha>) 0\n                                     \\<in> \\<pi> 0 {} Init;\n        LeftDerivation [\\<SS>] D (N # \\<gamma>); is_nonterminal N;\n        (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n       \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "case less"], ["proof (state)\nthis:\n  \\<lbrakk>length ?D < length D; LeftDerivation [\\<SS>] ?D (?N # ?\\<gamma>);\n   is_nonterminal ?N; (?N, ?\\<alpha>) \\<in> \\<RR>\\<rbrakk>\n  \\<Longrightarrow> init_item (?N, ?\\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n  LeftDerivation [\\<SS>] D (N # \\<gamma>)\n  is_nonterminal N\n  (N, \\<alpha>) \\<in> \\<RR>\n\ngoal (1 subgoal):\n 1. \\<And>D N \\<gamma> \\<alpha>.\n       \\<lbrakk>\\<And>Da N \\<gamma> \\<alpha>.\n                   \\<lbrakk>length Da < length D;\n                    LeftDerivation [\\<SS>] Da (N # \\<gamma>);\n                    is_nonterminal N; (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n                   \\<Longrightarrow> init_item (N, \\<alpha>) 0\n                                     \\<in> \\<pi> 0 {} Init;\n        LeftDerivation [\\<SS>] D (N # \\<gamma>); is_nonterminal N;\n        (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n       \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "let ?trivial = \"\\<SS> = N\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>D N \\<gamma> \\<alpha>.\n       \\<lbrakk>\\<And>Da N \\<gamma> \\<alpha>.\n                   \\<lbrakk>length Da < length D;\n                    LeftDerivation [\\<SS>] Da (N # \\<gamma>);\n                    is_nonterminal N; (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n                   \\<Longrightarrow> init_item (N, \\<alpha>) 0\n                                     \\<in> \\<pi> 0 {} Init;\n        LeftDerivation [\\<SS>] D (N # \\<gamma>); is_nonterminal N;\n        (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n       \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have \"?trivial \\<or> \\<not> ?trivial\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<SS> = N \\<or> \\<SS> \\<noteq> N", "by blast"], ["proof (state)\nthis:\n  \\<SS> = N \\<or> \\<SS> \\<noteq> N\n\ngoal (1 subgoal):\n 1. \\<And>D N \\<gamma> \\<alpha>.\n       \\<lbrakk>\\<And>Da N \\<gamma> \\<alpha>.\n                   \\<lbrakk>length Da < length D;\n                    LeftDerivation [\\<SS>] Da (N # \\<gamma>);\n                    is_nonterminal N; (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n                   \\<Longrightarrow> init_item (N, \\<alpha>) 0\n                                     \\<in> \\<pi> 0 {} Init;\n        LeftDerivation [\\<SS>] D (N # \\<gamma>); is_nonterminal N;\n        (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n       \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "then"], ["proof (chain)\npicking this:\n  \\<SS> = N \\<or> \\<SS> \\<noteq> N", "show ?case"], ["proof (prove)\nusing this:\n  \\<SS> = N \\<or> \\<SS> \\<noteq> N\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "proof (induct rule: disjCases2)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<SS> = N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n 2. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "case 1"], ["proof (state)\nthis:\n  \\<SS> = N\n\ngoal (2 subgoals):\n 1. \\<SS> = N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n 2. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "then"], ["proof (chain)\npicking this:\n  \\<SS> = N", "have \"init_item (N, \\<alpha>) 0 \\<in> Init\""], ["proof (prove)\nusing this:\n  \\<SS> = N\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0 \\<in> Init", "apply (subst Init_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<SS> = N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0\n    \\<in> {init_item r 0 |r. r \\<in> \\<RR> \\<and> fst r = \\<SS>}", "by (auto simp add: less)"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0 \\<in> Init\n\ngoal (2 subgoals):\n 1. \\<SS> = N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n 2. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "then"], ["proof (chain)\npicking this:\n  init_item (N, \\<alpha>) 0 \\<in> Init", "show ?case"], ["proof (prove)\nusing this:\n  init_item (N, \\<alpha>) 0 \\<in> Init\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "by (meson \\<pi>_regular contra_subsetD regular_implies_setmonotone subset_setmonotone)"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "case 2"], ["proof (state)\nthis:\n  \\<SS> \\<noteq> N\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "from thmD7_helper[OF less(2) less(3) 2]"], ["proof (chain)\npicking this:\n  \\<exists>n M a a1 a2 w.\n     n < length D \\<and>\n     (M, a) \\<in> \\<RR> \\<and>\n     LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n     a = a1 @ [N] @ a2 \\<and> derives a1 []", "obtain n M a a1 a2 w where \"n < length D\" and  \"(M, a) \\<in> \\<RR>\" and  \n          \"LeftDerivation [\\<SS>] (take n D) (M # w)\" and \"a = a1 @ [N] @ a2\" and \"derives a1 []\""], ["proof (prove)\nusing this:\n  \\<exists>n M a a1 a2 w.\n     n < length D \\<and>\n     (M, a) \\<in> \\<RR> \\<and>\n     LeftDerivation [\\<SS>] (take n D) (M # w) \\<and>\n     a = a1 @ [N] @ a2 \\<and> derives a1 []\n\ngoal (1 subgoal):\n 1. (\\<And>n M a w a1 a2.\n        \\<lbrakk>n < length D; (M, a) \\<in> \\<RR>;\n         LeftDerivation [\\<SS>] (take n D) (M # w); a = a1 @ [N] @ a2;\n         derives a1 []\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  n < length D\n  (M, a) \\<in> \\<RR>\n  LeftDerivation [\\<SS>] (take n D) (M # w)\n  a = a1 @ [N] @ a2\n  derives a1 []\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "note M = this"], ["proof (state)\nthis:\n  n < length D\n  (M, a) \\<in> \\<RR>\n  LeftDerivation [\\<SS>] (take n D) (M # w)\n  a = a1 @ [N] @ a2\n  derives a1 []\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "let ?x = \"init_item (M, a) 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have x_dom: \"?x \\<in> \\<pi> 0 {} Init\""], ["proof (prove)\ngoal (1 subgoal):\n 1. init_item (M, a) 0 \\<in> \\<pi> 0 {} Init", "apply (rule less(1)[OF _ M(3) _ M(2)])"], ["proof (prove)\ngoal (2 subgoals):\n 1. length (take n D) < length D\n 2. is_nonterminal M", "using M(1)"], ["proof (prove)\nusing this:\n  n < length D\n\ngoal (2 subgoals):\n 1. length (take n D) < length D\n 2. is_nonterminal M", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. is_nonterminal M", "using M(2)"], ["proof (prove)\nusing this:\n  (M, a) \\<in> \\<RR>\n\ngoal (1 subgoal):\n 1. is_nonterminal M", "by simp"], ["proof (state)\nthis:\n  init_item (M, a) 0 \\<in> \\<pi> 0 {} Init\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have wellformed_x: \"wellformed_item ?x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wellformed_item (init_item (M, a) 0)", "by (simp add: M(2))"], ["proof (state)\nthis:\n  wellformed_item (init_item (M, a) 0)\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "let ?y = \"inc_dot (length a1) ?x\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have \"?y \\<in> \\<pi> 0 {} {?x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inc_dot (length a1) (init_item (M, a) 0)\n    \\<in> \\<pi> 0 {} {init_item (M, a) 0}", "apply (rule thmD6[where \\<omega>=\"[N] @ a2\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. wellformed_item (init_item (M, a) 0)\n 2. item_\\<beta> (init_item (M, a) 0) = a1 @ [N] @ a2\n 3. item_end (init_item (M, a) 0) = 0\n 4. derives a1 []", "using wellformed_x"], ["proof (prove)\nusing this:\n  wellformed_item (init_item (M, a) 0)\n\ngoal (4 subgoals):\n 1. wellformed_item (init_item (M, a) 0)\n 2. item_\\<beta> (init_item (M, a) 0) = a1 @ [N] @ a2\n 3. item_end (init_item (M, a) 0) = 0\n 4. derives a1 []", "by (auto simp add: M)"], ["proof (state)\nthis:\n  inc_dot (length a1) (init_item (M, a) 0)\n  \\<in> \\<pi> 0 {} {init_item (M, a) 0}\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "with x_dom"], ["proof (chain)\npicking this:\n  init_item (M, a) 0 \\<in> \\<pi> 0 {} Init\n  inc_dot (length a1) (init_item (M, a) 0)\n  \\<in> \\<pi> 0 {} {init_item (M, a) 0}", "have y_dom: \"?y \\<in> \\<pi> 0 {} Init\""], ["proof (prove)\nusing this:\n  init_item (M, a) 0 \\<in> \\<pi> 0 {} Init\n  inc_dot (length a1) (init_item (M, a) 0)\n  \\<in> \\<pi> 0 {} {init_item (M, a) 0}\n\ngoal (1 subgoal):\n 1. inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init", "using \\<pi>_subset_elem_trans empty_subsetI insert_subset"], ["proof (prove)\nusing this:\n  init_item (M, a) 0 \\<in> \\<pi> 0 {} Init\n  inc_dot (length a1) (init_item (M, a) 0)\n  \\<in> \\<pi> 0 {} {init_item (M, a) 0}\n  \\<lbrakk>?Y \\<subseteq> \\<pi> ?k ?T ?X; ?z \\<in> \\<pi> ?k ?T ?Y\\<rbrakk>\n  \\<Longrightarrow> ?z \\<in> \\<pi> ?k ?T ?X\n  {} \\<subseteq> ?A\n  (insert ?x ?A \\<subseteq> ?B) = (?x \\<in> ?B \\<and> ?A \\<subseteq> ?B)\n\ngoal (1 subgoal):\n 1. inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init", "by blast"], ["proof (state)\nthis:\n  inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have wellformed_y: \"wellformed_item ?y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wellformed_item (inc_dot (length a1) (init_item (M, a) 0))", "using M(4) wellformed_inc_dot wellformed_x"], ["proof (prove)\nusing this:\n  a = a1 @ [N] @ a2\n  \\<lbrakk>wellformed_item ?x;\n   item_dot ?x + ?d \\<le> length (item_rhs ?x)\\<rbrakk>\n  \\<Longrightarrow> wellformed_item (inc_dot ?d ?x)\n  wellformed_item (init_item (M, a) 0)\n\ngoal (1 subgoal):\n 1. wellformed_item (inc_dot (length a1) (init_item (M, a) 0))", "by auto"], ["proof (state)\nthis:\n  wellformed_item (inc_dot (length a1) (init_item (M, a) 0))\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have \"item_\\<beta> ?y = N#a2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. item_\\<beta> (inc_dot (length a1) (init_item (M, a) 0)) = N # a2", "by (simp add: M(4) item_\\<beta>_def)"], ["proof (state)\nthis:\n  item_\\<beta> (inc_dot (length a1) (init_item (M, a) 0)) = N # a2\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "then"], ["proof (chain)\npicking this:\n  item_\\<beta> (inc_dot (length a1) (init_item (M, a) 0)) = N # a2", "have next_symbol_y: \"next_symbol ?y = Some N\""], ["proof (prove)\nusing this:\n  item_\\<beta> (inc_dot (length a1) (init_item (M, a) 0)) = N # a2\n\ngoal (1 subgoal):\n 1. next_symbol (inc_dot (length a1) (init_item (M, a) 0)) = Some N", "by (simp add: head_of_item_\\<beta>_is_next_symbol wellformed_y)"], ["proof (state)\nthis:\n  next_symbol (inc_dot (length a1) (init_item (M, a) 0)) = Some N\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "let ?z = \"init_item (N, \\<alpha>) 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "have \"?z \\<in> Predict 0 {?y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0\n    \\<in> Predict 0 {inc_dot (length a1) (init_item (M, a) 0)}", "by (simp add: less.prems(3) next_symbol_predicts next_symbol_y)"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0\n  \\<in> Predict 0 {inc_dot (length a1) (init_item (M, a) 0)}\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "then"], ["proof (chain)\npicking this:\n  init_item (N, \\<alpha>) 0\n  \\<in> Predict 0 {inc_dot (length a1) (init_item (M, a) 0)}", "have \"?z \\<in> \\<pi> 0 {} {?y}\""], ["proof (prove)\nusing this:\n  init_item (N, \\<alpha>) 0\n  \\<in> Predict 0 {inc_dot (length a1) (init_item (M, a) 0)}\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0\n    \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}", "using Predict_subset_\\<pi>"], ["proof (prove)\nusing this:\n  init_item (N, \\<alpha>) 0\n  \\<in> Predict 0 {inc_dot (length a1) (init_item (M, a) 0)}\n  Predict ?k ?X \\<subseteq> \\<pi> ?k ?T ?X\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0\n    \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}", "by auto"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0\n  \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}\n\ngoal (1 subgoal):\n 1. \\<SS> \\<noteq> N \\<Longrightarrow>\n    init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "with y_dom"], ["proof (chain)\npicking this:\n  inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init\n  init_item (N, \\<alpha>) 0\n  \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}", "show \"?z \\<in> \\<pi> 0 {} Init\""], ["proof (prove)\nusing this:\n  inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init\n  init_item (N, \\<alpha>) 0\n  \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "using \\<pi>_subset_elem_trans empty_subsetI insert_subset"], ["proof (prove)\nusing this:\n  inc_dot (length a1) (init_item (M, a) 0) \\<in> \\<pi> 0 {} Init\n  init_item (N, \\<alpha>) 0\n  \\<in> \\<pi> 0 {} {inc_dot (length a1) (init_item (M, a) 0)}\n  \\<lbrakk>?Y \\<subseteq> \\<pi> ?k ?T ?X; ?z \\<in> \\<pi> ?k ?T ?Y\\<rbrakk>\n  \\<Longrightarrow> ?z \\<in> \\<pi> ?k ?T ?X\n  {} \\<subseteq> ?A\n  (insert ?x ?A \\<subseteq> ?B) = (?x \\<in> ?B \\<and> ?A \\<subseteq> ?B)\n\ngoal (1 subgoal):\n 1. init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "by blast"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem thmD7: \"is_derivation (N#\\<gamma>) \\<Longrightarrow> is_nonterminal N \\<Longrightarrow> (N, \\<alpha>) \\<in> \\<RR> \\<Longrightarrow> \n  init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_derivation (N # \\<gamma>); is_nonterminal N;\n     (N, \\<alpha>) \\<in> \\<RR>\\<rbrakk>\n    \\<Longrightarrow> init_item (N, \\<alpha>) 0 \\<in> \\<pi> 0 {} Init", "by (metis \\<L>\\<^sub>P_is_word derives_implies_leftderives_cons empty_in_\\<L>\\<^sub>P is_derivation_def \n  leftderives_implies_LeftDerivation self_append_conv2 thmD7_LeftDerivation)"], ["", "end"], ["", "end"]]}