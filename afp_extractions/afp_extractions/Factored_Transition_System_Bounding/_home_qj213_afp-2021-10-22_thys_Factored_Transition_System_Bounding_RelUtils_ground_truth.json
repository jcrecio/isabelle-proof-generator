{"file_name": "/home/qj213/afp-2021-10-22/thys/Factored_Transition_System_Bounding/RelUtils.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Factored_Transition_System_Bounding", "problem_names": ["lemma TC_equiv_tranclp: \"TC R a b \\<longleftrightarrow> (R\\<^sup>+\\<^sup>+ a b)\"", "lemma TC_IMP_NOT_TC_CONJ_1:\n  fixes R P  and  x y\n  assumes \"\\<not>(R\\<^sup>+\\<^sup>+ x y)\"\n  shows \"\\<not>((\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y)\"", "lemma TC_IMP_NOT_TC_CONJ:\n  fixes R R' P x y\n  assumes \"\\<forall>x y. P x y \\<longrightarrow> R' x y \\<longrightarrow> R x y\" \"\\<not>R\\<^sup>+\\<^sup>+ x y\"\n  shows \"\\<not>(\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\"", "lemma TC_INDUCT:\n  fixes R :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" and P\n  assumes \"(\\<forall>x y. R x y \\<longrightarrow> P x y)\" \"(\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z)\" \n  shows \"\\<forall>u v. (TC R) u v \\<longrightarrow> P u v\"", "lemma REFL_IMP_3_CONJ_1:\n  fixes R P x y\n  assumes \"((\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y)\"\n  shows \"R\\<^sup>+\\<^sup>+ x y\"", "lemma REFL_IMP_3_CONJ:\n  fixes R'\n  assumes \"reflexive R'\" \n  shows \"(\\<forall>P x y. \n    (R'\\<^sup>+\\<^sup>+ x y) \\<longrightarrow> ( ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y) \\<or> (\\<exists>z. \\<not>P z \\<and> R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)))\"", "lemma REFL_TC_CONJ:\n  fixes R R' :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" and P x y\n  assumes \"reflexive R'\" \"\\<forall>x y. P x \\<and> P y \\<longrightarrow> (R' x y \\<longrightarrow> R x y)\" \"\\<not>(R\\<^sup>+\\<^sup>+ x y)\"\n  shows \"(\\<not>(R'\\<^sup>+\\<^sup>+ x y) \\<or> (\\<exists>z. \\<not>P z \\<and> (R')\\<^sup>+\\<^sup>+ x z \\<and> (R')\\<^sup>+\\<^sup>+ z y))\"", "lemma TC_CASES1_NEQ:\n  fixes R x z\n  assumes \"R\\<^sup>+\\<^sup>+ x z\"\n  shows \"R x z \\<or> (\\<exists>y :: 'a. \\<not>(x = y) \\<and> \\<not>(y = z) \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\""], "translations": [["", "lemma TC_equiv_tranclp: \"TC R a b \\<longleftrightarrow> (R\\<^sup>+\\<^sup>+ a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "have \"TC R a b \\<Longrightarrow> (R\\<^sup>+\\<^sup>+ a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b", "unfolding TC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>P.\n       (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       P a b \\<Longrightarrow>\n    R\\<^sup>+\\<^sup>+ a b", "using tranclp.r_into_trancl tranclp_trans"], ["proof (prove)\nusing this:\n  ?r ?a ?b \\<Longrightarrow> ?r\\<^sup>+\\<^sup>+ ?a ?b\n  \\<lbrakk>?r\\<^sup>+\\<^sup>+ ?x ?y; ?r\\<^sup>+\\<^sup>+ ?y ?z\\<rbrakk>\n  \\<Longrightarrow> ?r\\<^sup>+\\<^sup>+ ?x ?z\n\ngoal (1 subgoal):\n 1. \\<forall>P.\n       (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       P a b \\<Longrightarrow>\n    R\\<^sup>+\\<^sup>+ a b", "by metis"], ["proof (state)\nthis:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "}"], ["proof (state)\nthis:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "moreover"], ["proof (state)\nthis:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "{"], ["proof (state)\nthis:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "have \"(R\\<^sup>+\\<^sup>+ a b) \\<Longrightarrow> TC R a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>+\\<^sup>+ a b \\<Longrightarrow> TC R a b", "proof(induction rule: tranclp.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b. R a b \\<Longrightarrow> TC R a b\n 2. \\<And>a b c.\n       \\<lbrakk>R\\<^sup>+\\<^sup>+ a b; TC R a b; R b c\\<rbrakk>\n       \\<Longrightarrow> TC R a c", "case (r_into_trancl a b)"], ["proof (state)\nthis:\n  R a b\n\ngoal (2 subgoals):\n 1. \\<And>a b. R a b \\<Longrightarrow> TC R a b\n 2. \\<And>a b c.\n       \\<lbrakk>R\\<^sup>+\\<^sup>+ a b; TC R a b; R b c\\<rbrakk>\n       \\<Longrightarrow> TC R a c", "then"], ["proof (chain)\npicking this:\n  R a b", "show ?case"], ["proof (prove)\nusing this:\n  R a b\n\ngoal (1 subgoal):\n 1. TC R a b", "by(subst TC_def; auto)"], ["proof (state)\nthis:\n  TC R a b\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>R\\<^sup>+\\<^sup>+ a b; TC R a b; R b c\\<rbrakk>\n       \\<Longrightarrow> TC R a c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>R\\<^sup>+\\<^sup>+ a b; TC R a b; R b c\\<rbrakk>\n       \\<Longrightarrow> TC R a c", "case (trancl_into_trancl a b c)"], ["proof (state)\nthis:\n  R\\<^sup>+\\<^sup>+ a b\n  R b c\n  TC R a b\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>R\\<^sup>+\\<^sup>+ a b; TC R a b; R b c\\<rbrakk>\n       \\<Longrightarrow> TC R a c", "then"], ["proof (chain)\npicking this:\n  R\\<^sup>+\\<^sup>+ a b\n  R b c\n  TC R a b", "show ?case"], ["proof (prove)\nusing this:\n  R\\<^sup>+\\<^sup>+ a b\n  R b c\n  TC R a b\n\ngoal (1 subgoal):\n 1. TC R a c", "unfolding TC_def"], ["proof (prove)\nusing this:\n  R\\<^sup>+\\<^sup>+ a b\n  R b c\n  \\<forall>P.\n     (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     P a b\n\ngoal (1 subgoal):\n 1. \\<forall>P.\n       (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       P a c", "by blast"], ["proof (state)\nthis:\n  TC R a c\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  R\\<^sup>+\\<^sup>+ a b \\<Longrightarrow> TC R a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "}"], ["proof (state)\nthis:\n  R\\<^sup>+\\<^sup>+ a b \\<Longrightarrow> TC R a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "ultimately"], ["proof (chain)\npicking this:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n  R\\<^sup>+\\<^sup>+ a b \\<Longrightarrow> TC R a b", "show ?thesis"], ["proof (prove)\nusing this:\n  TC R a b \\<Longrightarrow> R\\<^sup>+\\<^sup>+ a b\n  R\\<^sup>+\\<^sup>+ a b \\<Longrightarrow> TC R a b\n\ngoal (1 subgoal):\n 1. TC R a b = R\\<^sup>+\\<^sup>+ a b", "by fast"], ["proof (state)\nthis:\n  TC R a b = R\\<^sup>+\\<^sup>+ a b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TC_IMP_NOT_TC_CONJ_1:\n  fixes R P  and  x y\n  assumes \"\\<not>(R\\<^sup>+\\<^sup>+ x y)\"\n  shows \"\\<not>((\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "from assms(1)"], ["proof (chain)\npicking this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y", "have 1: \"\\<not>TC R x y\""], ["proof (prove)\nusing this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> TC R x y", "using TC_equiv_tranclp"], ["proof (prove)\nusing this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n  TC ?R ?a ?b = ?R\\<^sup>+\\<^sup>+ ?a ?b\n\ngoal (1 subgoal):\n 1. \\<not> TC R x y", "by fast"], ["proof (state)\nthis:\n  \\<not> TC R x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "{"], ["proof (state)\nthis:\n  \\<not> TC R x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "assume P: \"\\<not>TC R x y\""], ["proof (state)\nthis:\n  \\<not> TC R x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> TC R x y", "obtain P where a: \"(\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and> (\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow> \\<not>P x y\""], ["proof (prove)\nusing this:\n  \\<not> TC R x y\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n        (\\<forall>x y z.\n            P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n        \\<not> P x y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding TC_def"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>P.\n             (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n             (\\<forall>x y z.\n                 P x y \\<and> P y z \\<longrightarrow>\n                 P x z) \\<longrightarrow>\n             P x y)\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n        (\\<forall>x y z.\n            P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n        \\<not> P x y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n  (\\<forall>x y z.\n      P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n  \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "{"], ["proof (state)\nthis:\n  (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n  (\\<forall>x y z.\n      P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n  \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "assume P_1: \"(\\<forall>x y. R x y \\<longrightarrow> P x y)\" \"(\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z)\""], ["proof (state)\nthis:\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z", "have \"(\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y)\" \"(\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z)\""], ["proof (prove)\nusing this:\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y &&&\n    \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z", "by blast+"], ["proof (state)\nthis:\n  \\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "moreover"], ["proof (state)\nthis:\n  \\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "from a and P_1"], ["proof (chain)\npicking this:\n  (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n  (\\<forall>x y z.\n      P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n  \\<not> P x y\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z", "have \"\\<not>P x y\""], ["proof (prove)\nusing this:\n  (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n  (\\<forall>x y z.\n      P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n  \\<not> P x y\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<not> P x y", "by blast"], ["proof (state)\nthis:\n  \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> P x y", "have \"\\<exists>P. (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and> (\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow> \\<not>P x y\""], ["proof (prove)\nusing this:\n  \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<exists>P.\n       (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       \\<not> P x y", "by blast"], ["proof (state)\nthis:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x y. R x y \\<longrightarrow> P x y;\n   \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P.\n                       (\\<forall>x y.\n                           R x y \\<and> P x y \\<longrightarrow>\n                           P x y) \\<and>\n                       (\\<forall>x y z.\n                           P x y \\<and> P y z \\<longrightarrow>\n                           P x z) \\<longrightarrow>\n                       \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<forall>x y. R x y \\<longrightarrow> P x y;\n   \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P.\n                       (\\<forall>x y.\n                           R x y \\<and> P x y \\<longrightarrow>\n                           P x y) \\<and>\n                       (\\<forall>x y z.\n                           P x y \\<and> P y z \\<longrightarrow>\n                           P x z) \\<longrightarrow>\n                       \\<not> P x y", "have \"\\<exists>P. \n      (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and> (\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow> \\<not>P x y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>x y. R x y \\<longrightarrow> P x y;\n   \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\\<rbrakk>\n  \\<Longrightarrow> \\<exists>P.\n                       (\\<forall>x y.\n                           R x y \\<and> P x y \\<longrightarrow>\n                           P x y) \\<and>\n                       (\\<forall>x y z.\n                           P x y \\<and> P y z \\<longrightarrow>\n                           P x z) \\<longrightarrow>\n                       \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<exists>P.\n       (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       \\<not> P x y", "by blast"], ["proof (state)\nthis:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "}"], ["proof (state)\nthis:\n  \\<not> TC R x y \\<Longrightarrow>\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "note 2 = this"], ["proof (state)\nthis:\n  \\<not> TC R x y \\<Longrightarrow>\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "{"], ["proof (state)\nthis:\n  \\<not> TC R x y \\<Longrightarrow>\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "from 1 2"], ["proof (chain)\npicking this:\n  \\<not> TC R x y\n  \\<not> TC R x y \\<Longrightarrow>\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y", "have \"\\<exists>P. \n      (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and> (\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow> \\<not>P x y\""], ["proof (prove)\nusing this:\n  \\<not> TC R x y\n  \\<not> TC R x y \\<Longrightarrow>\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<exists>P.\n       (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n       (\\<forall>x y z.\n           P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n       \\<not> P x y", "by blast"], ["proof (state)\nthis:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y", "have \"\\<not>TC (\\<lambda>x y. R x y \\<and> P x y) x y\""], ["proof (prove)\nusing this:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y", "unfolding TC_def"], ["proof (prove)\nusing this:\n  \\<exists>P.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> P x y) \\<and>\n     (\\<forall>x y z.\n         P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n     \\<not> P x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Pa.\n               (\\<forall>x y.\n                   R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n               (\\<forall>x y z.\n                   Pa x y \\<and> Pa y z \\<longrightarrow>\n                   Pa x z) \\<longrightarrow>\n               Pa x y)", "by (metis assms tranclp.r_into_trancl tranclp_trans)"], ["proof (state)\nthis:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y", "have \"\\<not>(\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\""], ["proof (prove)\nusing this:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "using TC_equiv_tranclp"], ["proof (prove)\nusing this:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y\n  TC ?R ?a ?b = ?R\\<^sup>+\\<^sup>+ ?a ?b\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "by fast"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "}"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "by blast"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma TC_IMP_NOT_TC_CONJ:\n  fixes R R' P x y\n  assumes \"\\<forall>x y. P x y \\<longrightarrow> R' x y \\<longrightarrow> R x y\" \"\\<not>R\\<^sup>+\\<^sup>+ x y\"\n  shows \"\\<not>(\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "from assms(2)"], ["proof (chain)\npicking this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y", "have 1: \"\\<not>(\\<lambda>x y. R x y \\<and> P x  y)\\<^sup>+\\<^sup>+ x y\""], ["proof (prove)\nusing this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "using TC_IMP_NOT_TC_CONJ_1[where P=\"\\<lambda>x y. P x y\"]"], ["proof (prove)\nusing this:\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n  \\<not> ?R\\<^sup>+\\<^sup>+ ?x ?y \\<Longrightarrow>\n  \\<not> (\\<lambda>x y. ?R x y \\<and> P x y)\\<^sup>+\\<^sup>+ ?x ?y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "by blast"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "{"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "{"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "from 1"], ["proof (chain)\npicking this:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "have  \"\\<not>TC (\\<lambda>x y. R x y \\<and> P x  y) x y\""], ["proof (prove)\nusing this:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y", "using TC_equiv_tranclp"], ["proof (prove)\nusing this:\n  \\<not> (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n  TC ?R ?a ?b = ?R\\<^sup>+\\<^sup>+ ?a ?b\n\ngoal (1 subgoal):\n 1. \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y", "by fast"], ["proof (state)\nthis:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y", "have \"\\<exists>Pa.\n      (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and> (\\<forall>x y z. Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \n      \\<longrightarrow> \\<not>Pa x y\""], ["proof (prove)\nusing this:\n  \\<not> TC (\\<lambda>x y. R x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<exists>Pa.\n       (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n       (\\<forall>x y z.\n           Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n       \\<not> Pa x y", "unfolding TC_def"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>Pa.\n             (\\<forall>x y.\n                 R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n             (\\<forall>x y z.\n                 Pa x y \\<and> Pa y z \\<longrightarrow>\n                 Pa x z) \\<longrightarrow>\n             Pa x y)\n\ngoal (1 subgoal):\n 1. \\<exists>Pa.\n       (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n       (\\<forall>x y z.\n           Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n       \\<not> Pa x y", "by blast"], ["proof (state)\nthis:\n  \\<exists>Pa.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n     (\\<forall>x y z.\n         Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n     \\<not> Pa x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "}"], ["proof (state)\nthis:\n  \\<exists>Pa.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n     (\\<forall>x y z.\n         Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n     \\<not> Pa x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<exists>Pa.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n     (\\<forall>x y z.\n         Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n     \\<not> Pa x y", "obtain Pa where a: \n      \"(\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and> (\\<forall>x y z. Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow> \\<not>Pa x y\""], ["proof (prove)\nusing this:\n  \\<exists>Pa.\n     (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n     (\\<forall>x y z.\n         Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n     \\<not> Pa x y\n\ngoal (1 subgoal):\n 1. (\\<And>Pa.\n        (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n        (\\<forall>x y z.\n            Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n        \\<not> Pa x y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n  (\\<forall>x y z.\n      Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n  \\<not> Pa x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n  (\\<forall>x y z.\n      Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n  \\<not> Pa x y", "have \"\\<not>(\\<forall>Pa. (\\<forall>x y. R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and> (\\<forall>x y z. Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow> Pa x y)\""], ["proof (prove)\nusing this:\n  (\\<forall>x y. R x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n  (\\<forall>x y z.\n      Pa x y \\<and> Pa y z \\<longrightarrow> Pa x z) \\<longrightarrow>\n  \\<not> Pa x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Pa.\n               (\\<forall>x y.\n                   R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n               (\\<forall>x y z.\n                   Pa x y \\<and> Pa y z \\<longrightarrow>\n                   Pa x z) \\<longrightarrow>\n               Pa x y)", "by (metis assms(1) assms(2) tranclp.r_into_trancl tranclp_trans)"], ["proof (state)\nthis:\n  \\<not> (\\<forall>Pa.\n             (\\<forall>x y.\n                 R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n             (\\<forall>x y z.\n                 Pa x y \\<and> Pa y z \\<longrightarrow>\n                 Pa x z) \\<longrightarrow>\n             Pa x y)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>Pa.\n             (\\<forall>x y.\n                 R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n             (\\<forall>x y z.\n                 Pa x y \\<and> Pa y z \\<longrightarrow>\n                 Pa x z) \\<longrightarrow>\n             Pa x y)", "have \"\\<not>TC (\\<lambda>x y. R' x y \\<and> P x y) x y\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>Pa.\n             (\\<forall>x y.\n                 R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n             (\\<forall>x y z.\n                 Pa x y \\<and> Pa y z \\<longrightarrow>\n                 Pa x z) \\<longrightarrow>\n             Pa x y)\n\ngoal (1 subgoal):\n 1. \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y", "unfolding TC_def"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>Pa.\n             (\\<forall>x y.\n                 R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n             (\\<forall>x y z.\n                 Pa x y \\<and> Pa y z \\<longrightarrow>\n                 Pa x z) \\<longrightarrow>\n             Pa x y)\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>Pa.\n               (\\<forall>x y.\n                   R' x y \\<and> P x y \\<longrightarrow> Pa x y) \\<and>\n               (\\<forall>x y z.\n                   Pa x y \\<and> Pa y z \\<longrightarrow>\n                   Pa x z) \\<longrightarrow>\n               Pa x y)", "by blast"], ["proof (state)\nthis:\n  \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "}"], ["proof (state)\nthis:\n  \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "then"], ["proof (chain)\npicking this:\n  \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "using TC_equiv_tranclp"], ["proof (prove)\nusing this:\n  \\<not> TC (\\<lambda>x y. R' x y \\<and> P x y) x y\n  TC ?R ?a ?b = ?R\\<^sup>+\\<^sup>+ ?a ?b\n\ngoal (1 subgoal):\n 1. \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y", "by fast"], ["proof (state)\nthis:\n  \\<not> (\\<lambda>x y. R' x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed\n\n\\<comment> \\<open>NOTE added lemma (relationScript.sml:314)\\<close>"], ["", "lemma TC_INDUCT:\n  fixes R :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" and P\n  assumes \"(\\<forall>x y. R x y \\<longrightarrow> P x y)\" \"(\\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z)\" \n  shows \"\\<forall>u v. (TC R) u v \\<longrightarrow> P u v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>u v. TC R u v \\<longrightarrow> P u v", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<forall>u v. TC R u v \\<longrightarrow> P u v", "unfolding TC_def"], ["proof (prove)\nusing this:\n  \\<forall>x y. R x y \\<longrightarrow> P x y\n  \\<forall>x y z. P x y \\<and> P y z \\<longrightarrow> P x z\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       (\\<forall>P.\n           (\\<forall>x y. R x y \\<longrightarrow> P x y) \\<and>\n           (\\<forall>x y z.\n               P x y \\<and> P y z \\<longrightarrow> P x z) \\<longrightarrow>\n           P u v) \\<longrightarrow>\n       P u v", "by metis"], ["", "lemma REFL_IMP_3_CONJ_1:\n  fixes R P x y\n  assumes \"((\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y)\"\n  shows \"R\\<^sup>+\\<^sup>+ x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>+\\<^sup>+ x y", "using assms"], ["proof (prove)\nusing this:\n  (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. R\\<^sup>+\\<^sup>+ x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y \\<Longrightarrow>\n    R\\<^sup>+\\<^sup>+ x y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. R\\<^sup>+\\<^sup>+ x y", "using assms TC_IMP_NOT_TC_CONJ_1"], ["proof (prove)\nusing this:\n  (\\<lambda>x y. R x y \\<and> P x y)\\<^sup>+\\<^sup>+ x y\n  \\<not> ?R\\<^sup>+\\<^sup>+ ?x ?y \\<Longrightarrow>\n  \\<not> (\\<lambda>x y. ?R x y \\<and> ?P x y)\\<^sup>+\\<^sup>+ ?x ?y\n\ngoal (1 subgoal):\n 1. R\\<^sup>+\\<^sup>+ x y", "by fast"], ["proof (state)\nthis:\n  R\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma REFL_IMP_3_CONJ:\n  fixes R'\n  assumes \"reflexive R'\" \n  shows \"(\\<forall>P x y. \n    (R'\\<^sup>+\\<^sup>+ x y) \\<longrightarrow> ( ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y) \\<or> (\\<exists>z. \\<not>P z \\<and> R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "fix P"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "have \"\\<forall>x y. R' x y \\<longrightarrow> (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or> (\\<exists>z. \\<not> P z \\<and> R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       R' x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "proof (auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>R' x y;\n        \\<forall>z.\n           R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n           P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>R' x y;\n        \\<forall>z.\n           R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n           P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x y", "assume P: \"R' x y\" \"\\<forall>z. R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow> P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\""], ["proof (state)\nthis:\n  R' x y\n  \\<forall>z.\n     R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n     P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>R' x y;\n        \\<forall>z.\n           R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n           P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x y", "then"], ["proof (chain)\npicking this:\n  R' x y\n  \\<forall>z.\n     R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n     P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y", "show \"(\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\""], ["proof (prove)\nusing this:\n  R' x y\n  \\<forall>z.\n     R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n     P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>R' x y;\n     \\<forall>z.\n        R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n        P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x y.\n                          R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                       x y", "have a: \"\\<And>a. \\<not> R' x a \\<or> \\<not> R' a y \\<or> P a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a. \\<not> R' x a \\<or> \\<not> R' a y \\<or> P a", "using P(2)"], ["proof (prove)\nusing this:\n  \\<forall>z.\n     R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n     P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\n\ngoal (1 subgoal):\n 1. \\<And>a. \\<not> R' x a \\<or> \\<not> R' a y \\<or> P a", "by blast"], ["proof (state)\nthis:\n  \\<not> R' x ?a \\<or> \\<not> R' ?a y \\<or> P ?a\n\ngoal (1 subgoal):\n 1. \\<lbrakk>R' x y;\n     \\<forall>z.\n        R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n        P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x y.\n                          R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                       x y", "have \"reflexive R'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. reflexive R'", "by (meson assms)"], ["proof (state)\nthis:\n  reflexive R'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>R' x y;\n     \\<forall>z.\n        R'\\<^sup>+\\<^sup>+ x z \\<longrightarrow>\n        P z \\<or> \\<not> R'\\<^sup>+\\<^sup>+ z y\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x y.\n                          R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                       x y", "then"], ["proof (chain)\npicking this:\n  reflexive R'", "show ?thesis"], ["proof (prove)\nusing this:\n  reflexive R'\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y", "using a P(1)"], ["proof (prove)\nusing this:\n  reflexive R'\n  \\<not> R' x ?a \\<or> \\<not> R' ?a y \\<or> P ?a\n  R' x y\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y", "by (simp add: reflexive_def tranclp.r_into_trancl)"], ["proof (state)\nthis:\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "}"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "moreover"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "{"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "have \"\\<forall>x y z. ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or> (\\<exists>z. \\<not> P z \\<and> R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n         ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or> (\\<exists>za. \\<not> P za \\<and> R'\\<^sup>+\\<^sup>+ y za \\<and> R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n         (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or> (\\<exists>za. \\<not> P za \\<and> R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n         y \\<or>\n        (\\<exists>z.\n            \\<not> P z \\<and>\n            R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n       ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z \\<or>\n        (\\<exists>za.\n            \\<not> P za \\<and>\n            R'\\<^sup>+\\<^sup>+ y za \\<and>\n            R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        z \\<or>\n       (\\<exists>za.\n           \\<not> P za \\<and>\n           R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)", "proof (auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ y za;\n        R'\\<^sup>+\\<^sup>+ za z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z\n 2. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "fix x y z za"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ y za;\n        R'\\<^sup>+\\<^sup>+ za z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z\n 2. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "assume P: \"\\<forall>za. R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow> P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\" \"(\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\"\n          \"\\<not> P za\" \"R'\\<^sup>+\\<^sup>+ y za\" \"R'\\<^sup>+\\<^sup>+ za z\""], ["proof (state)\nthis:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ y za\n  R'\\<^sup>+\\<^sup>+ za z\n\ngoal (2 subgoals):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ y za;\n        R'\\<^sup>+\\<^sup>+ za z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z\n 2. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "then"], ["proof (chain)\npicking this:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ y za\n  R'\\<^sup>+\\<^sup>+ za z", "show \"(\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z\""], ["proof (prove)\nusing this:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ y za\n  R'\\<^sup>+\\<^sup>+ za z\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z", "using P"], ["proof (prove)\nusing this:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ y za\n  R'\\<^sup>+\\<^sup>+ za z\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ y za\n  R'\\<^sup>+\\<^sup>+ za z\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z", "by (meson P rtranclp_tranclp_tranclp TC_IMP_NOT_TC_CONJ_1  tranclp_into_rtranclp)"], ["proof (state)\nthis:\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z\n\ngoal (1 subgoal):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "fix x y z za"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "assume P: \"\\<forall>za. R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow> P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\" \"\\<not> P za\" \"R'\\<^sup>+\\<^sup>+ x za\" \"R'\\<^sup>+\\<^sup>+ za y\" \n          \"(\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z\""], ["proof (state)\nthis:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ x za\n  R'\\<^sup>+\\<^sup>+ za y\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z\n\ngoal (1 subgoal):\n 1. \\<And>x y z za.\n       \\<lbrakk>\\<forall>za.\n                   R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n                   P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z;\n        \\<not> P za; R'\\<^sup>+\\<^sup>+ x za; R'\\<^sup>+\\<^sup>+ za y;\n        (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n         z\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x y.\n                             R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                          x z", "then"], ["proof (chain)\npicking this:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ x za\n  R'\\<^sup>+\\<^sup>+ za y\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z", "show \"(\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z\""], ["proof (prove)\nusing this:\n  \\<forall>za.\n     R'\\<^sup>+\\<^sup>+ x za \\<longrightarrow>\n     P za \\<or> \\<not> R'\\<^sup>+\\<^sup>+ za z\n  \\<not> P za\n  R'\\<^sup>+\\<^sup>+ x za\n  R'\\<^sup>+\\<^sup>+ za y\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z\n\ngoal (1 subgoal):\n 1. (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z", "by (meson P TC_IMP_NOT_TC_CONJ_1 tranclp_trans)"], ["proof (state)\nthis:\n  (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n      (\\<exists>z.\n          \\<not> P z \\<and>\n          R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ y za \\<and>\n          R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n     (\\<exists>za.\n         \\<not> P za \\<and>\n         R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "}"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n      (\\<exists>z.\n          \\<not> P z \\<and>\n          R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ y za \\<and>\n          R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n     (\\<exists>za.\n         \\<not> P za \\<and>\n         R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n  \\<forall>x y z.\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n      (\\<exists>z.\n          \\<not> P z \\<and>\n          R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ y za \\<and>\n          R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n     (\\<exists>za.\n         \\<not> P za \\<and>\n         R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)", "have \"\\<forall>u v. \n      TC R' u v \n      \\<longrightarrow> (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ u v \\<or> (\\<exists>z. \\<not> P z \\<and> R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)\""], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n  \\<forall>x y z.\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n      (\\<exists>z.\n          \\<not> P z \\<and>\n          R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ y za \\<and>\n          R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n     (\\<exists>za.\n         \\<not> P za \\<and>\n         R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       TC R' u v \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ u\n        v \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)", "using TC_INDUCT[where R=\"R'\" and\n          P=\"\\<lambda>x y. ( ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y) \\<or> (\\<exists>z. \\<not>P z \\<and> R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y))\"]"], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     R' x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n  \\<forall>x y z.\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n      (\\<exists>z.\n          \\<not> P z \\<and>\n          R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n     ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ y za \\<and>\n          R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n     (\\<exists>za.\n         \\<not> P za \\<and>\n         R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\n  \\<lbrakk>\\<forall>x y.\n              R' x y \\<longrightarrow>\n              (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n               y \\<or>\n              (\\<exists>z.\n                  \\<not> P z \\<and>\n                  R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y);\n   \\<forall>x y z.\n      ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)) \\<and>\n      ((\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ y\n        z \\<or>\n       (\\<exists>za.\n           \\<not> P za \\<and>\n           R'\\<^sup>+\\<^sup>+ y za \\<and>\n           R'\\<^sup>+\\<^sup>+ za z)) \\<longrightarrow>\n      (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x z \\<or>\n      (\\<exists>za.\n          \\<not> P za \\<and>\n          R'\\<^sup>+\\<^sup>+ x za \\<and> R'\\<^sup>+\\<^sup>+ za z)\\<rbrakk>\n  \\<Longrightarrow> \\<forall>u v.\n                       TC R' u v \\<longrightarrow>\n                       (\\<lambda>x y.\n                           R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+\n                        u v \\<or>\n                       (\\<exists>z.\n                           \\<not> P z \\<and>\n                           R'\\<^sup>+\\<^sup>+ u z \\<and>\n                           R'\\<^sup>+\\<^sup>+ z v)\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       TC R' u v \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ u\n        v \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)", "by fast"], ["proof (state)\nthis:\n  \\<forall>u v.\n     TC R' u v \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ u v \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "}"], ["proof (state)\nthis:\n  \\<forall>u v.\n     TC R' u v \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> ?P2 x \\<and> ?P2 y)\\<^sup>+\\<^sup>+ u\n      v \\<or>\n     (\\<exists>z.\n         \\<not> ?P2 z \\<and>\n         R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "then"], ["proof (chain)\npicking this:\n  \\<forall>u v.\n     TC R' u v \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> ?P2 x \\<and> ?P2 y)\\<^sup>+\\<^sup>+ u\n      v \\<or>\n     (\\<exists>z.\n         \\<not> ?P2 z \\<and>\n         R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>u v.\n     TC R' u v \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> ?P2 x \\<and> ?P2 y)\\<^sup>+\\<^sup>+ u\n      v \\<or>\n     (\\<exists>z.\n         \\<not> ?P2 z \\<and>\n         R'\\<^sup>+\\<^sup>+ u z \\<and> R'\\<^sup>+\\<^sup>+ z v)\n\ngoal (1 subgoal):\n 1. \\<forall>P x y.\n       R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n       (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x\n        y \\<or>\n       (\\<exists>z.\n           \\<not> P z \\<and>\n           R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "by (simp add: TC_equiv_tranclp)"], ["proof (state)\nthis:\n  \\<forall>P x y.\n     R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma REFL_TC_CONJ:\n  fixes R R' :: \"'a \\<Rightarrow> 'a \\<Rightarrow> bool\" and P x y\n  assumes \"reflexive R'\" \"\\<forall>x y. P x \\<and> P y \\<longrightarrow> (R' x y \\<longrightarrow> R x y)\" \"\\<not>(R\\<^sup>+\\<^sup>+ x y)\"\n  shows \"(\\<not>(R'\\<^sup>+\\<^sup>+ x y) \\<or> (\\<exists>z. \\<not>P z \\<and> (R')\\<^sup>+\\<^sup>+ x z \\<and> (R')\\<^sup>+\\<^sup>+ z y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n    (\\<exists>z.\n        \\<not> P z \\<and>\n        R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "using assms"], ["proof (prove)\nusing this:\n  reflexive R'\n  \\<forall>x y.\n     P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n    (\\<exists>z.\n        \\<not> P z \\<and>\n        R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "proof (cases \"\\<not>R'\\<^sup>+\\<^sup>+ x y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y; \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)\n 2. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y;\n     \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y; \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)\n 2. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y;\n     \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)", "case False"], ["proof (state)\nthis:\n  \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\n\ngoal (2 subgoals):\n 1. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y; \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)\n 2. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y;\n     \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\n\ngoal (1 subgoal):\n 1. \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n    (\\<exists>z.\n        \\<not> P z \\<and>\n        R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "using assms \n      TC_IMP_NOT_TC_CONJ[where P=\"\\<lambda>x y. P x \\<and> P y\"]\n      REFL_IMP_3_CONJ[of R']"], ["proof (prove)\nusing this:\n  \\<not> \\<not> R'\\<^sup>+\\<^sup>+ x y\n  reflexive R'\n  \\<forall>x y.\n     P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y\n  \\<not> R\\<^sup>+\\<^sup>+ x y\n  \\<lbrakk>\\<forall>x y.\n              P x \\<and> P y \\<longrightarrow>\n              ?R' x y \\<longrightarrow> ?R x y;\n   \\<not> ?R\\<^sup>+\\<^sup>+ ?x ?y\\<rbrakk>\n  \\<Longrightarrow> \\<not> (\\<lambda>x y.\n                               ?R' x y \\<and>\n                               P x \\<and> P y)\\<^sup>+\\<^sup>+\n                            ?x ?y\n  reflexive R' \\<Longrightarrow>\n  \\<forall>P x y.\n     R'\\<^sup>+\\<^sup>+ x y \\<longrightarrow>\n     (\\<lambda>x y. R' x y \\<and> P x \\<and> P y)\\<^sup>+\\<^sup>+ x y \\<or>\n     (\\<exists>z.\n         \\<not> P z \\<and>\n         R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n    (\\<exists>z.\n        \\<not> P z \\<and>\n        R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)", "by blast"], ["proof (state)\nthis:\n  \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n  (\\<exists>z.\n      \\<not> P z \\<and>\n      R'\\<^sup>+\\<^sup>+ x z \\<and> R'\\<^sup>+\\<^sup>+ z y)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>reflexive R';\n     \\<forall>x y.\n        P x \\<and> P y \\<longrightarrow> R' x y \\<longrightarrow> R x y;\n     \\<not> R\\<^sup>+\\<^sup>+ x y; \\<not> R'\\<^sup>+\\<^sup>+ x y\\<rbrakk>\n    \\<Longrightarrow> \\<not> R'\\<^sup>+\\<^sup>+ x y \\<or>\n                      (\\<exists>z.\n                          \\<not> P z \\<and>\n                          R'\\<^sup>+\\<^sup>+ x z \\<and>\n                          R'\\<^sup>+\\<^sup>+ z y)", "qed blast\n\n\\<comment> \\<open>NOTE \n  This is not a trivial translation: 'TC\\_INDUCT' in relationScript.sml:314 differs significantly\nfrom 'trancl\\_induct' and 'trancl\\_trans\\_induct' in Transitive\\_Closure:375, 391\\<close>"], ["", "lemma TC_CASES1_NEQ:\n  fixes R x z\n  assumes \"R\\<^sup>+\\<^sup>+ x z\"\n  shows \"R x z \\<or> (\\<exists>y :: 'a. \\<not>(x = y) \\<and> \\<not>(y = z) \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "fix u v"], ["proof (state)\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "have \"\\<forall>x y. R x y \\<longrightarrow> R x y \\<or> (\\<exists>ya. x \\<noteq> ya \\<and> ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y.\n       R x y \\<longrightarrow>\n       R x y \\<or>\n       (\\<exists>ya.\n           x \\<noteq> ya \\<and>\n           ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)", "by meson"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R x y \\<longrightarrow>\n     R x y \\<or>\n     (\\<exists>ya.\n         x \\<noteq> ya \\<and>\n         ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "moreover"], ["proof (state)\nthis:\n  \\<forall>x y.\n     R x y \\<longrightarrow>\n     R x y \\<or>\n     (\\<exists>ya.\n         x \\<noteq> ya \\<and>\n         ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "have \"\\<forall>x y z. \n      (R x y \\<or> (\\<exists>ya. x \\<noteq> ya \\<and> ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \n      \\<and> (R y z \\<or> (\\<exists>ya. y \\<noteq> ya \\<and> ya \\<noteq> z \\<and> R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \n      \\<longrightarrow> R x z \\<or> (\\<exists>y. x \\<noteq> y \\<and> y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (R x y \\<or>\n        (\\<exists>ya.\n            x \\<noteq> ya \\<and>\n            ya \\<noteq> y \\<and>\n            R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n       (R y z \\<or>\n        (\\<exists>ya.\n            y \\<noteq> ya \\<and>\n            ya \\<noteq> z \\<and>\n            R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n       R x z \\<or>\n       (\\<exists>y.\n           x \\<noteq> y \\<and>\n           y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "by (metis tranclp.r_into_trancl tranclp_trans)"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     (R x y \\<or>\n      (\\<exists>ya.\n          x \\<noteq> ya \\<and>\n          ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n     (R y z \\<or>\n      (\\<exists>ya.\n          y \\<noteq> ya \\<and>\n          ya \\<noteq> z \\<and>\n          R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n     R x z \\<or>\n     (\\<exists>y.\n         x \\<noteq> y \\<and>\n         y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>x y.\n     R x y \\<longrightarrow>\n     R x y \\<or>\n     (\\<exists>ya.\n         x \\<noteq> ya \\<and>\n         ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\n  \\<forall>x y z.\n     (R x y \\<or>\n      (\\<exists>ya.\n          x \\<noteq> ya \\<and>\n          ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n     (R y z \\<or>\n      (\\<exists>ya.\n          y \\<noteq> ya \\<and>\n          ya \\<noteq> z \\<and>\n          R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n     R x z \\<or>\n     (\\<exists>y.\n         x \\<noteq> y \\<and>\n         y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "have \"TC R u v \\<longrightarrow> R u v \\<or> (\\<exists>y. u \\<noteq> y \\<and> y \\<noteq> v \\<and> R u y \\<and> R\\<^sup>+\\<^sup>+ y v)\""], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     R x y \\<longrightarrow>\n     R x y \\<or>\n     (\\<exists>ya.\n         x \\<noteq> ya \\<and>\n         ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\n  \\<forall>x y z.\n     (R x y \\<or>\n      (\\<exists>ya.\n          x \\<noteq> ya \\<and>\n          ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n     (R y z \\<or>\n      (\\<exists>ya.\n          y \\<noteq> ya \\<and>\n          ya \\<noteq> z \\<and>\n          R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n     R x z \\<or>\n     (\\<exists>y.\n         x \\<noteq> y \\<and>\n         y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\n\ngoal (1 subgoal):\n 1. TC R u v \\<longrightarrow>\n    R u v \\<or>\n    (\\<exists>y.\n        u \\<noteq> y \\<and>\n        y \\<noteq> v \\<and> R u y \\<and> R\\<^sup>+\\<^sup>+ y v)", "using TC_INDUCT[where P=\"\\<lambda>x z. R x z \\<or> (\\<exists>y :: 'a. \\<not>(x = y) \\<and> \\<not>(y = z) \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\"]"], ["proof (prove)\nusing this:\n  \\<forall>x y.\n     R x y \\<longrightarrow>\n     R x y \\<or>\n     (\\<exists>ya.\n         x \\<noteq> ya \\<and>\n         ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)\n  \\<forall>x y z.\n     (R x y \\<or>\n      (\\<exists>ya.\n          x \\<noteq> ya \\<and>\n          ya \\<noteq> y \\<and> R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n     (R y z \\<or>\n      (\\<exists>ya.\n          y \\<noteq> ya \\<and>\n          ya \\<noteq> z \\<and>\n          R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n     R x z \\<or>\n     (\\<exists>y.\n         x \\<noteq> y \\<and>\n         y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\n  \\<lbrakk>\\<forall>x y.\n              ?R x y \\<longrightarrow>\n              R x y \\<or>\n              (\\<exists>ya.\n                  x \\<noteq> ya \\<and>\n                  ya \\<noteq> y \\<and>\n                  R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y);\n   \\<forall>x y z.\n      (R x y \\<or>\n       (\\<exists>ya.\n           x \\<noteq> ya \\<and>\n           ya \\<noteq> y \\<and>\n           R x ya \\<and> R\\<^sup>+\\<^sup>+ ya y)) \\<and>\n      (R y z \\<or>\n       (\\<exists>ya.\n           y \\<noteq> ya \\<and>\n           ya \\<noteq> z \\<and>\n           R y ya \\<and> R\\<^sup>+\\<^sup>+ ya z)) \\<longrightarrow>\n      R x z \\<or>\n      (\\<exists>y.\n          x \\<noteq> y \\<and>\n          y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\\<rbrakk>\n  \\<Longrightarrow> \\<forall>u v.\n                       TC ?R u v \\<longrightarrow>\n                       R u v \\<or>\n                       (\\<exists>y.\n                           u \\<noteq> y \\<and>\n                           y \\<noteq> v \\<and>\n                           R u y \\<and> R\\<^sup>+\\<^sup>+ y v)\n\ngoal (1 subgoal):\n 1. TC R u v \\<longrightarrow>\n    R u v \\<or>\n    (\\<exists>y.\n        u \\<noteq> y \\<and>\n        y \\<noteq> v \\<and> R u y \\<and> R\\<^sup>+\\<^sup>+ y v)", "by blast"], ["proof (state)\nthis:\n  TC R u v \\<longrightarrow>\n  R u v \\<or>\n  (\\<exists>y.\n      u \\<noteq> y \\<and>\n      y \\<noteq> v \\<and> R u y \\<and> R\\<^sup>+\\<^sup>+ y v)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "}"], ["proof (state)\nthis:\n  TC R ?u2 ?v2 \\<longrightarrow>\n  R ?u2 ?v2 \\<or>\n  (\\<exists>y.\n      ?u2 \\<noteq> y \\<and>\n      y \\<noteq> ?v2 \\<and> R ?u2 y \\<and> R\\<^sup>+\\<^sup>+ y ?v2)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "then"], ["proof (chain)\npicking this:\n  TC R ?u2 ?v2 \\<longrightarrow>\n  R ?u2 ?v2 \\<or>\n  (\\<exists>y.\n      ?u2 \\<noteq> y \\<and>\n      y \\<noteq> ?v2 \\<and> R ?u2 y \\<and> R\\<^sup>+\\<^sup>+ y ?v2)", "show ?thesis"], ["proof (prove)\nusing this:\n  TC R ?u2 ?v2 \\<longrightarrow>\n  R ?u2 ?v2 \\<or>\n  (\\<exists>y.\n      ?u2 \\<noteq> y \\<and>\n      y \\<noteq> ?v2 \\<and> R ?u2 y \\<and> R\\<^sup>+\\<^sup>+ y ?v2)\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "using assms TC_equiv_tranclp"], ["proof (prove)\nusing this:\n  TC R ?u2 ?v2 \\<longrightarrow>\n  R ?u2 ?v2 \\<or>\n  (\\<exists>y.\n      ?u2 \\<noteq> y \\<and>\n      y \\<noteq> ?v2 \\<and> R ?u2 y \\<and> R\\<^sup>+\\<^sup>+ y ?v2)\n  R\\<^sup>+\\<^sup>+ x z\n  TC ?R ?a ?b = ?R\\<^sup>+\\<^sup>+ ?a ?b\n\ngoal (1 subgoal):\n 1. R x z \\<or>\n    (\\<exists>y.\n        x \\<noteq> y \\<and>\n        y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)", "by (simp add: TC_equiv_tranclp)"], ["proof (state)\nthis:\n  R x z \\<or>\n  (\\<exists>y.\n      x \\<noteq> y \\<and>\n      y \\<noteq> z \\<and> R x y \\<and> R\\<^sup>+\\<^sup>+ y z)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}