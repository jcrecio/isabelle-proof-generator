{"file_name": "/home/qj213/afp-2021-10-22/thys/Sunflowers/Sunflower.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Sunflowers", "problem_names": ["lemma sunflower_subset: \"F \\<subseteq> G \\<Longrightarrow> sunflower G \\<Longrightarrow> sunflower F\"", "lemma pairwise_disjnt_imp_sunflower: \n  \"pairwise disjnt F \\<Longrightarrow> sunflower F\"", "lemma card2_sunflower: assumes \"finite S\" and \"card S \\<le> 2\" \n  shows \"sunflower S\"", "lemma empty_sunflower: \"sunflower {}\"", "lemma singleton_sunflower: \"sunflower {A}\"", "lemma doubleton_sunflower: \"sunflower {A,B}\"", "lemma sunflower_imp_union_intersect_unique: \n  assumes \"sunflower S\"\n    and \"x \\<in> (\\<Union> S) - (\\<Inter> S)\" \n  shows \"\\<exists>! A. A \\<in> S \\<and> x \\<in> A\"", "lemma union_intersect_unique_imp_sunflower: \n  assumes \"\\<And> x. x \\<in> (\\<Union> S) - (\\<Inter> S) \\<Longrightarrow> \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\" \n  shows \"sunflower S\"", "lemma sunflower_iff_union_intersect_unique: \n  \"sunflower S \\<longleftrightarrow> (\\<forall> x \\<in> \\<Union> S - \\<Inter> S. \\<exists>! A. A \\<in> S \\<and> x \\<in> A)\" \n  (is \"?l = ?r\")", "lemma sunflower_iff_intersect_Uniq: \n  \"sunflower S \\<longleftrightarrow> (\\<forall> x.  x \\<in> \\<Inter> S \\<or> (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A))\" \n  (is \"?l = ?r\")", "lemma sunflower_card_subset_lift: fixes F :: \"'a set set\" \n  assumes sunflower: \"\\<And> G :: ('a + nat) set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A = k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and kF: \"\\<forall> A \\<in> F. finite A \\<and> card A \\<le> k\"\n    and cardF: \"card F > c\"\n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r\"", "lemma sunflower_card_core_lift: \n  assumes finE: \"finite (E :: 'a set)\" \n    and sunflower: \"\\<And> G :: 'a set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A \\<le> k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and F: \"\\<forall> A \\<in> F. A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\" \n    and cardF: \"card F > (card E choose s) * c\"\n    and s: \"s \\<noteq> 0\"\n    and r: \"r \\<noteq> 0\" \n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r \\<and> card (\\<Inter> S) \\<ge> s\"", "lemma sunflower_nonempty_core_lift: \n  assumes finE: \"finite (E :: 'a set)\" \n    and sunflower: \"\\<And> G :: 'a set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A \\<le> k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and F: \"\\<forall> A \\<in> F. A \\<subseteq> E \\<and> card A \\<le> k\" \n    and empty: \"{} \\<notin> F\" \n    and cardF: \"card F > card E * c\"\n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r \\<and> (\\<Inter> S) \\<noteq> {}\""], "translations": [["", "lemma sunflower_subset: \"F \\<subseteq> G \\<Longrightarrow> sunflower G \\<Longrightarrow> sunflower F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>F \\<subseteq> G; sunflower G\\<rbrakk>\n    \\<Longrightarrow> sunflower F", "unfolding sunflower_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>F \\<subseteq> G;\n     \\<forall>x.\n        (\\<exists>A B.\n            A \\<in> G \\<and>\n            B \\<in> G \\<and>\n            A \\<noteq> B \\<and>\n            x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n        (\\<forall>A. A \\<in> G \\<longrightarrow> x \\<in> A)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>x.\n                         (\\<exists>A B.\n                             A \\<in> F \\<and>\n                             B \\<in> F \\<and>\n                             A \\<noteq> B \\<and>\n                             x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n                         (\\<forall>A. A \\<in> F \\<longrightarrow> x \\<in> A)", "by blast"], ["", "lemma pairwise_disjnt_imp_sunflower: \n  \"pairwise disjnt F \\<Longrightarrow> sunflower F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pairwise disjnt F \\<Longrightarrow> sunflower F", "unfolding sunflower_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. pairwise disjnt F \\<Longrightarrow>\n    \\<forall>x.\n       (\\<exists>A B.\n           A \\<in> F \\<and>\n           B \\<in> F \\<and>\n           A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n       (\\<forall>A. A \\<in> F \\<longrightarrow> x \\<in> A)", "by (metis disjnt_insert1 mk_disjoint_insert pairwiseD)"], ["", "lemma card2_sunflower: assumes \"finite S\" and \"card S \\<le> 2\" \n  shows \"sunflower S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sunflower S", "from assms"], ["proof (chain)\npicking this:\n  finite S\n  card S \\<le> 2", "have \"card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2\""], ["proof (prove)\nusing this:\n  finite S\n  card S \\<le> 2\n\ngoal (1 subgoal):\n 1. card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2", "by linarith"], ["proof (state)\nthis:\n  card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2\n\ngoal (1 subgoal):\n 1. sunflower S", "with \\<open>finite S\\<close>"], ["proof (chain)\npicking this:\n  finite S\n  card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2", "obtain A B where \"S = {} \\<or> S = {A} \\<or> S = {A,B}\""], ["proof (prove)\nusing this:\n  finite S\n  card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2\n\ngoal (1 subgoal):\n 1. (\\<And>A B.\n        S = {} \\<or> S = {A} \\<or> S = {A, B} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using card_2_iff[of S] card_1_singleton_iff[of S]"], ["proof (prove)\nusing this:\n  finite S\n  card S = 0 \\<or> card S = Suc 0 \\<or> card S = 2\n  (card S = 2) = (\\<exists>x y. S = {x, y} \\<and> x \\<noteq> y)\n  (card S = Suc 0) = (\\<exists>x. S = {x})\n\ngoal (1 subgoal):\n 1. (\\<And>A B.\n        S = {} \\<or> S = {A} \\<or> S = {A, B} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S = {} \\<or> S = {A} \\<or> S = {A, B}\n\ngoal (1 subgoal):\n 1. sunflower S", "thus ?thesis"], ["proof (prove)\nusing this:\n  S = {} \\<or> S = {A} \\<or> S = {A, B}\n\ngoal (1 subgoal):\n 1. sunflower S", "unfolding sunflower_def"], ["proof (prove)\nusing this:\n  S = {} \\<or> S = {A} \\<or> S = {A, B}\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<exists>A B.\n           A \\<in> S \\<and>\n           B \\<in> S \\<and>\n           A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n       (\\<forall>A. A \\<in> S \\<longrightarrow> x \\<in> A)", "by auto"], ["proof (state)\nthis:\n  sunflower S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma empty_sunflower: \"sunflower {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower {}", "by (rule card2_sunflower, auto)"], ["", "lemma singleton_sunflower: \"sunflower {A}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower {A}", "by (rule card2_sunflower, auto)"], ["", "lemma doubleton_sunflower: \"sunflower {A,B}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower {A, B}", "by (rule card2_sunflower, auto, cases \"A = B\", auto)"], ["", "lemma sunflower_imp_union_intersect_unique: \n  assumes \"sunflower S\"\n    and \"x \\<in> (\\<Union> S) - (\\<Inter> S)\" \n  shows \"\\<exists>! A. A \\<in> S \\<and> x \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!A. A \\<in> S \\<and> x \\<in> A", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>!A. A \\<in> S \\<and> x \\<in> A", "from assms"], ["proof (chain)\npicking this:\n  sunflower S\n  x \\<in> \\<Union> S - \\<Inter> S", "obtain A where A: \"A \\<in> S\" \"x \\<in> A\""], ["proof (prove)\nusing this:\n  sunflower S\n  x \\<in> \\<Union> S - \\<Inter> S\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>A \\<in> S; x \\<in> A\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<in> S\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<exists>!A. A \\<in> S \\<and> x \\<in> A", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!A. A \\<in> S \\<and> x \\<in> A", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. ?a \\<in> S \\<and> x \\<in> ?a\n 2. \\<And>A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow> A = ?a", "show \"A \\<in> S \\<and> x \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<in> S \\<and> x \\<in> A", "using A"], ["proof (prove)\nusing this:\n  A \\<in> S\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. A \\<in> S \\<and> x \\<in> A", "by auto"], ["proof (state)\nthis:\n  A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>Aa. Aa \\<in> S \\<and> x \\<in> Aa \\<Longrightarrow> Aa = A", "fix B"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Aa. Aa \\<in> S \\<and> x \\<in> Aa \\<Longrightarrow> Aa = A", "assume B: \"B \\<in> S \\<and> x \\<in> B\""], ["proof (state)\nthis:\n  B \\<in> S \\<and> x \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>Aa. Aa \\<in> S \\<and> x \\<in> Aa \\<Longrightarrow> Aa = A", "show \"B = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B = A", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. B \\<noteq> A \\<Longrightarrow> False", "assume \"B \\<noteq> A\""], ["proof (state)\nthis:\n  B \\<noteq> A\n\ngoal (1 subgoal):\n 1. B \\<noteq> A \\<Longrightarrow> False", "with A B"], ["proof (chain)\npicking this:\n  A \\<in> S\n  x \\<in> A\n  B \\<in> S \\<and> x \\<in> B\n  B \\<noteq> A", "have \"\\<exists>A B. A \\<in> S \\<and> B \\<in> S \\<and> A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B\""], ["proof (prove)\nusing this:\n  A \\<in> S\n  x \\<in> A\n  B \\<in> S \\<and> x \\<in> B\n  B \\<noteq> A\n\ngoal (1 subgoal):\n 1. \\<exists>A B.\n       A \\<in> S \\<and>\n       B \\<in> S \\<and> A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B", "by auto"], ["proof (state)\nthis:\n  \\<exists>A B.\n     A \\<in> S \\<and>\n     B \\<in> S \\<and> A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B\n\ngoal (1 subgoal):\n 1. B \\<noteq> A \\<Longrightarrow> False", "from \\<open>sunflower S\\<close>[unfolded sunflower_def, rule_format, OF this]"], ["proof (chain)\npicking this:\n  ?A \\<in> S \\<Longrightarrow> x \\<in> ?A", "have \"x \\<in> \\<Inter> S\""], ["proof (prove)\nusing this:\n  ?A \\<in> S \\<Longrightarrow> x \\<in> ?A\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Inter> S", "by auto"], ["proof (state)\nthis:\n  x \\<in> \\<Inter> S\n\ngoal (1 subgoal):\n 1. B \\<noteq> A \\<Longrightarrow> False", "with assms"], ["proof (chain)\npicking this:\n  sunflower S\n  x \\<in> \\<Union> S - \\<Inter> S\n  x \\<in> \\<Inter> S", "show False"], ["proof (prove)\nusing this:\n  sunflower S\n  x \\<in> \\<Union> S - \\<Inter> S\n  x \\<in> \\<Inter> S\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  B = A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma union_intersect_unique_imp_sunflower: \n  assumes \"\\<And> x. x \\<in> (\\<Union> S) - (\\<Inter> S) \\<Longrightarrow> \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\" \n  shows \"sunflower S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S", "unfolding sunflower_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<exists>A B.\n           A \\<in> S \\<and>\n           B \\<in> S \\<and>\n           A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n       (\\<forall>A. A \\<in> S \\<longrightarrow> x \\<in> A)", "proof (intro allI impI, elim exE conjE, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> S; Aa \\<in> S; B \\<in> S; Aa \\<noteq> B; x \\<in> Aa;\n        x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "case (1 x C A B)"], ["proof (state)\nthis:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> S; Aa \\<in> S; B \\<in> S; Aa \\<noteq> B; x \\<in> Aa;\n        x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "hence x: \"x \\<in> \\<Union> S\""], ["proof (prove)\nusing this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union> S", "by auto"], ["proof (state)\nthis:\n  x \\<in> \\<Union> S\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> S; Aa \\<in> S; B \\<in> S; Aa \\<noteq> B; x \\<in> Aa;\n        x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> C", "proof (cases \"x \\<in> \\<Inter> S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C\n 2. x \\<notin> \\<Inter> S \\<Longrightarrow> x \\<in> C", "case False"], ["proof (state)\nthis:\n  x \\<notin> \\<Inter> S\n\ngoal (2 subgoals):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C\n 2. x \\<notin> \\<Inter> S \\<Longrightarrow> x \\<in> C", "with assms[of x] x"], ["proof (chain)\npicking this:\n  x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\n  x \\<in> \\<Union> S\n  x \\<notin> \\<Inter> S", "have \"\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\""], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\n  x \\<in> \\<Union> S\n  x \\<notin> \\<Inter> S\n\ngoal (1 subgoal):\n 1. \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A", "by blast"], ["proof (state)\nthis:\n  \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\n\ngoal (2 subgoals):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C\n 2. x \\<notin> \\<Inter> S \\<Longrightarrow> x \\<in> C", "with 1"], ["proof (chain)\npicking this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n  \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A", "have False"], ["proof (prove)\nusing this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n  \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. False", "unfolding Uniq_def"], ["proof (prove)\nusing this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n  \\<forall>xa y.\n     xa \\<in> S \\<and> x \\<in> xa \\<longrightarrow>\n     y \\<in> S \\<and> x \\<in> y \\<longrightarrow> y = xa\n\ngoal (1 subgoal):\n 1. False", "by blast"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C\n 2. x \\<notin> \\<Inter> S \\<Longrightarrow> x \\<in> C", "thus ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. x \\<in> C", ".."], ["proof (state)\nthis:\n  x \\<in> C\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C", "case True"], ["proof (state)\nthis:\n  x \\<in> \\<Inter> S\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Inter> S \\<Longrightarrow> x \\<in> C", "with 1"], ["proof (chain)\npicking this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n  x \\<in> \\<Inter> S", "show ?thesis"], ["proof (prove)\nusing this:\n  C \\<in> S\n  A \\<in> S\n  B \\<in> S\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n  x \\<in> \\<Inter> S\n\ngoal (1 subgoal):\n 1. x \\<in> C", "by blast"], ["proof (state)\nthis:\n  x \\<in> C\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<in> C\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sunflower_iff_union_intersect_unique: \n  \"sunflower S \\<longleftrightarrow> (\\<forall> x \\<in> \\<Union> S - \\<Inter> S. \\<exists>! A. A \\<in> S \\<and> x \\<in> A)\" \n  (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S =\n    (\\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n        \\<exists>!A. A \\<in> S \\<and> x \\<in> A)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. sunflower S \\<Longrightarrow>\n    \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n 2. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "assume ?l"], ["proof (state)\nthis:\n  sunflower S\n\ngoal (2 subgoals):\n 1. sunflower S \\<Longrightarrow>\n    \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n 2. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "from sunflower_imp_union_intersect_unique[OF this]"], ["proof (chain)\npicking this:\n  ?x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>!A. A \\<in> S \\<and> ?x \\<in> A", "show ?r"], ["proof (prove)\nusing this:\n  ?x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>!A. A \\<in> S \\<and> ?x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n     \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "assume ?r"], ["proof (state)\nthis:\n  \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n     \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "hence *: \"\\<forall>x\\<in>\\<Union> S - \\<Inter> S. \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n     \\<exists>!A. A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A", "unfolding ex1_iff_ex_Uniq"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n     (\\<exists>A. A \\<in> S \\<and> x \\<in> A) \\<and>\n     (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n     \\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>\\<Union> S - \\<Inter> S.\n       \\<exists>!A. A \\<in> S \\<and> x \\<in> A \\<Longrightarrow>\n    sunflower S", "show ?l"], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S", "by (rule union_intersect_unique_imp_sunflower, insert *, auto)"], ["proof (state)\nthis:\n  sunflower S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sunflower_iff_intersect_Uniq: \n  \"sunflower S \\<longleftrightarrow> (\\<forall> x.  x \\<in> \\<Inter> S \\<or> (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A))\" \n  (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S =\n    (\\<forall>x.\n        x \\<in> \\<Inter> S \\<or>\n        (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. sunflower S \\<Longrightarrow>\n    \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)\n 2. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A.\n          A \\<in> S \\<and> x \\<in> A) \\<Longrightarrow>\n    sunflower S", "assume ?l"], ["proof (state)\nthis:\n  sunflower S\n\ngoal (2 subgoals):\n 1. sunflower S \\<Longrightarrow>\n    \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)\n 2. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A.\n          A \\<in> S \\<and> x \\<in> A) \\<Longrightarrow>\n    sunflower S", "from sunflower_imp_union_intersect_unique[OF this]"], ["proof (chain)\npicking this:\n  ?x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>!A. A \\<in> S \\<and> ?x \\<in> A", "show ?r"], ["proof (prove)\nusing this:\n  ?x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  \\<exists>!A. A \\<in> S \\<and> ?x \\<in> A\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)", "unfolding ex1_iff_ex_Uniq"], ["proof (prove)\nusing this:\n  ?x \\<in> \\<Union> S - \\<Inter> S \\<Longrightarrow>\n  (\\<exists>A. A \\<in> S \\<and> ?x \\<in> A) \\<and>\n  (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> ?x \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)", "by (metis (no_types, lifting) DiffI UnionI Uniq_I)"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> \\<Inter> S \\<or>\n     (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A.\n          A \\<in> S \\<and> x \\<in> A) \\<Longrightarrow>\n    sunflower S", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A.\n          A \\<in> S \\<and> x \\<in> A) \\<Longrightarrow>\n    sunflower S", "assume ?r"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<in> \\<Inter> S \\<or>\n     (\\<exists>\\<^sub>\\<le>\\<^sub>1 A. A \\<in> S \\<and> x \\<in> A)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> \\<Inter> S \\<or>\n       (\\<exists>\\<^sub>\\<le>\\<^sub>1 A.\n          A \\<in> S \\<and> x \\<in> A) \\<Longrightarrow>\n    sunflower S", "show ?l"], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower S", "by (rule union_intersect_unique_imp_sunflower, insert \\<open>?r\\<close>, auto)"], ["proof (state)\nthis:\n  sunflower S\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>If there exists sunflowers whenever all elements are sets of \n  the same cardinality @{term r}, then there also exists sunflowers \n  whenever all elements are sets with cardinality at most @{term r}.\\<close>"], ["", "lemma sunflower_card_subset_lift: fixes F :: \"'a set set\" \n  assumes sunflower: \"\\<And> G :: ('a + nat) set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A = k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and kF: \"\\<forall> A \\<in> F. finite A \\<and> card A \\<le> k\"\n    and cardF: \"card F > c\"\n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "let ?n = \"Suc c\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from cardF"], ["proof (chain)\npicking this:\n  c < card F", "have \"card F \\<ge> ?n\""], ["proof (prove)\nusing this:\n  c < card F\n\ngoal (1 subgoal):\n 1. Suc c \\<le> card F", "by auto"], ["proof (state)\nthis:\n  Suc c \\<le> card F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "then"], ["proof (chain)\npicking this:\n  Suc c \\<le> card F", "obtain FF where sub: \"FF \\<subseteq> F\" and cardF: \"card FF = ?n\""], ["proof (prove)\nusing this:\n  Suc c \\<le> card F\n\ngoal (1 subgoal):\n 1. (\\<And>FF.\n        \\<lbrakk>FF \\<subseteq> F; card FF = Suc c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule obtain_subset_with_card_n)"], ["proof (state)\nthis:\n  FF \\<subseteq> F\n  card FF = Suc c\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "let ?N = \"{0 ..< ?n}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from cardF"], ["proof (chain)\npicking this:\n  card FF = Suc c", "have \"finite FF\""], ["proof (prove)\nusing this:\n  card FF = Suc c\n\ngoal (1 subgoal):\n 1. finite FF", "by (simp add: card_ge_0_finite)"], ["proof (state)\nthis:\n  finite FF\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from ex_bij_betw_nat_finite[OF this, unfolded cardF]"], ["proof (chain)\npicking this:\n  \\<exists>h. bij_betw h {0..<Suc c} FF", "obtain f where f: \"bij_betw f ?N FF\""], ["proof (prove)\nusing this:\n  \\<exists>h. bij_betw h {0..<Suc c} FF\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        bij_betw f {0..<Suc c} FF \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  bij_betw f {0..<Suc c} FF\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence injf: \"inj_on f ?N\""], ["proof (prove)\nusing this:\n  bij_betw f {0..<Suc c} FF\n\ngoal (1 subgoal):\n 1. inj_on f {0..<Suc c}", "by (rule bij_betw_imp_inj_on)"], ["proof (state)\nthis:\n  inj_on f {0..<Suc c}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "have Ff: \"FF = f ` ?N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. FF = f ` {0..<Suc c}", "by (metis bij_betw_imp_surj_on f)"], ["proof (state)\nthis:\n  FF = f ` {0..<Suc c}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "define g where \"g = (\\<lambda> i. (Inl ` f i) \\<union> (Inr ` {0 ..< (k - card (f i))}))\""], ["proof (state)\nthis:\n  g = (\\<lambda>i. Inl ` f i \\<union> Inr ` {0..<k - card (f i)})\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "have injg: \"inj_on g ?N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on g {0..<Suc c}", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>i. Inl ` f i \\<union> Inr ` {0..<k - card (f i)})\n     {0..<Suc c}", "using f"], ["proof (prove)\nusing this:\n  bij_betw f {0..<Suc c} FF\n\ngoal (1 subgoal):\n 1. inj_on (\\<lambda>i. Inl ` f i \\<union> Inr ` {0..<k - card (f i)})\n     {0..<Suc c}", "proof (intro inj_onI, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>bij_betw f {0..<Suc c} FF; x \\<in> {0..<Suc c};\n        y \\<in> {0..<Suc c};\n        Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n        Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\\<rbrakk>\n       \\<Longrightarrow> x = y", "case (1 x y)"], ["proof (state)\nthis:\n  bij_betw f {0..<Suc c} FF\n  x \\<in> {0..<Suc c}\n  y \\<in> {0..<Suc c}\n  Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n  Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>bij_betw f {0..<Suc c} FF; x \\<in> {0..<Suc c};\n        y \\<in> {0..<Suc c};\n        Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n        Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\\<rbrakk>\n       \\<Longrightarrow> x = y", "hence \"f x = f y\""], ["proof (prove)\nusing this:\n  bij_betw f {0..<Suc c} FF\n  x \\<in> {0..<Suc c}\n  y \\<in> {0..<Suc c}\n  Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n  Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\n\ngoal (1 subgoal):\n 1. f x = f y", "by auto"], ["proof (state)\nthis:\n  f x = f y\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       \\<lbrakk>bij_betw f {0..<Suc c} FF; x \\<in> {0..<Suc c};\n        y \\<in> {0..<Suc c};\n        Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n        Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\\<rbrakk>\n       \\<Longrightarrow> x = y", "with injf 1"], ["proof (chain)\npicking this:\n  inj_on f {0..<Suc c}\n  bij_betw f {0..<Suc c} FF\n  x \\<in> {0..<Suc c}\n  y \\<in> {0..<Suc c}\n  Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n  Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\n  f x = f y", "show \"x = y\""], ["proof (prove)\nusing this:\n  inj_on f {0..<Suc c}\n  bij_betw f {0..<Suc c} FF\n  x \\<in> {0..<Suc c}\n  y \\<in> {0..<Suc c}\n  Inl ` f x \\<union> Inr ` {0..<k - card (f x)} =\n  Inl ` f y \\<union> Inr ` {0..<k - card (f y)}\n  f x = f y\n\ngoal (1 subgoal):\n 1. x = y", "by (meson inj_onD)"], ["proof (state)\nthis:\n  x = y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  inj_on g {0..<Suc c}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence cardgN: \"card (g ` ?N) > c\""], ["proof (prove)\nusing this:\n  inj_on g {0..<Suc c}\n\ngoal (1 subgoal):\n 1. c < card (g ` {0..<Suc c})", "by (simp add: card_image)"], ["proof (state)\nthis:\n  c < card (g ` {0..<Suc c})\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "{"], ["proof (state)\nthis:\n  c < card (g ` {0..<Suc c})\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "assume \"i \\<in> ?N\""], ["proof (state)\nthis:\n  i \\<in> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence \"f i \\<in> FF\""], ["proof (prove)\nusing this:\n  i \\<in> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. f i \\<in> FF", "unfolding Ff"], ["proof (prove)\nusing this:\n  i \\<in> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. f i \\<in> f ` {0..<Suc c}", "by auto"], ["proof (state)\nthis:\n  f i \\<in> FF\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "with sub"], ["proof (chain)\npicking this:\n  FF \\<subseteq> F\n  f i \\<in> FF", "have \"f i \\<in> F\""], ["proof (prove)\nusing this:\n  FF \\<subseteq> F\n  f i \\<in> FF\n\ngoal (1 subgoal):\n 1. f i \\<in> F", "by auto"], ["proof (state)\nthis:\n  f i \\<in> F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence \"card (f i) \\<le> k\" \"finite (f i)\""], ["proof (prove)\nusing this:\n  f i \\<in> F\n\ngoal (1 subgoal):\n 1. card (f i) \\<le> k &&& finite (f i)", "using kF"], ["proof (prove)\nusing this:\n  f i \\<in> F\n  \\<forall>A\\<in>F. finite A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. card (f i) \\<le> k &&& finite (f i)", "by auto"], ["proof (state)\nthis:\n  card (f i) \\<le> k\n  finite (f i)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence \"card (g i) = k \\<and> finite (g i)\""], ["proof (prove)\nusing this:\n  card (f i) \\<le> k\n  finite (f i)\n\ngoal (1 subgoal):\n 1. card (g i) = k \\<and> finite (g i)", "unfolding g_def"], ["proof (prove)\nusing this:\n  card (f i) \\<le> k\n  finite (f i)\n\ngoal (1 subgoal):\n 1. card (Inl ` f i \\<union> Inr ` {0..<k - card (f i)}) = k \\<and>\n    finite (Inl ` f i \\<union> Inr ` {0..<k - card (f i)})", "by (subst card_Un_disjoint, auto, subst (1 2) card_image, auto intro: inj_onI)"], ["proof (state)\nthis:\n  card (g i) = k \\<and> finite (g i)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "}"], ["proof (state)\nthis:\n  ?i2 \\<in> {0..<Suc c} \\<Longrightarrow>\n  card (g ?i2) = k \\<and> finite (g ?i2)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "hence \"\\<forall> A \\<in> g ` ?N. finite A \\<and> card A = k\""], ["proof (prove)\nusing this:\n  ?i2 \\<in> {0..<Suc c} \\<Longrightarrow>\n  card (g ?i2) = k \\<and> finite (g ?i2)\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>g ` {0..<Suc c}. finite A \\<and> card A = k", "by auto"], ["proof (state)\nthis:\n  \\<forall>A\\<in>g ` {0..<Suc c}. finite A \\<and> card A = k\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from sunflower[OF this cardgN]"], ["proof (chain)\npicking this:\n  \\<exists>S\\<subseteq>g ` {0..<Suc c}. sunflower S \\<and> card S = r", "obtain S where SgN: \"S \\<subseteq> g ` ?N\" and sf: \"sunflower S\" and card: \"card S = r\""], ["proof (prove)\nusing this:\n  \\<exists>S\\<subseteq>g ` {0..<Suc c}. sunflower S \\<and> card S = r\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S \\<subseteq> g ` {0..<Suc c}; sunflower S;\n         card S = r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S \\<subseteq> g ` {0..<Suc c}\n  sunflower S\n  card S = r\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from SgN"], ["proof (chain)\npicking this:\n  S \\<subseteq> g ` {0..<Suc c}", "obtain N where NN: \"N \\<subseteq> ?N\" and SgN: \"S = g ` N\""], ["proof (prove)\nusing this:\n  S \\<subseteq> g ` {0..<Suc c}\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>N \\<subseteq> {0..<Suc c}; S = g ` N\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (meson subset_image_iff)"], ["proof (state)\nthis:\n  N \\<subseteq> {0..<Suc c}\n  S = g ` N\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from injg NN"], ["proof (chain)\npicking this:\n  inj_on g {0..<Suc c}\n  N \\<subseteq> {0..<Suc c}", "have inj_g: \"inj_on g N\""], ["proof (prove)\nusing this:\n  inj_on g {0..<Suc c}\n  N \\<subseteq> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. inj_on g N", "by (rule inj_on_subset)"], ["proof (state)\nthis:\n  inj_on g N\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from injf NN"], ["proof (chain)\npicking this:\n  inj_on f {0..<Suc c}\n  N \\<subseteq> {0..<Suc c}", "have inj_f: \"inj_on f N\""], ["proof (prove)\nusing this:\n  inj_on f {0..<Suc c}\n  N \\<subseteq> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. inj_on f N", "by (rule inj_on_subset)"], ["proof (state)\nthis:\n  inj_on f N\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "from card_image[OF inj_g] SgN card"], ["proof (chain)\npicking this:\n  card (g ` N) = card N\n  S = g ` N\n  card S = r", "have cardN: \"card N = r\""], ["proof (prove)\nusing this:\n  card (g ` N) = card N\n  S = g ` N\n  card S = r\n\ngoal (1 subgoal):\n 1. card N = r", "by auto"], ["proof (state)\nthis:\n  card N = r\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "let ?S = \"f ` N\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r", "proof (intro exI[of _ ?S] conjI)"], ["proof (state)\ngoal (3 subgoals):\n 1. f ` N \\<subseteq> F\n 2. sunflower (f ` N)\n 3. card (f ` N) = r", "from NN"], ["proof (chain)\npicking this:\n  N \\<subseteq> {0..<Suc c}", "show \"?S \\<subseteq> F\""], ["proof (prove)\nusing this:\n  N \\<subseteq> {0..<Suc c}\n\ngoal (1 subgoal):\n 1. f ` N \\<subseteq> F", "using Ff sub"], ["proof (prove)\nusing this:\n  N \\<subseteq> {0..<Suc c}\n  FF = f ` {0..<Suc c}\n  FF \\<subseteq> F\n\ngoal (1 subgoal):\n 1. f ` N \\<subseteq> F", "by auto"], ["proof (state)\nthis:\n  f ` N \\<subseteq> F\n\ngoal (2 subgoals):\n 1. sunflower (f ` N)\n 2. card (f ` N) = r", "from card_image[OF inj_f] cardN"], ["proof (chain)\npicking this:\n  card (f ` N) = card N\n  card N = r", "show \"card ?S = r\""], ["proof (prove)\nusing this:\n  card (f ` N) = card N\n  card N = r\n\ngoal (1 subgoal):\n 1. card (f ` N) = r", "by auto"], ["proof (state)\nthis:\n  card (f ` N) = r\n\ngoal (1 subgoal):\n 1. sunflower (f ` N)", "show \"sunflower ?S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sunflower (f ` N)", "unfolding sunflower_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (\\<exists>A B.\n           A \\<in> f ` N \\<and>\n           B \\<in> f ` N \\<and>\n           A \\<noteq> B \\<and> x \\<in> A \\<and> x \\<in> B) \\<longrightarrow>\n       (\\<forall>A. A \\<in> f ` N \\<longrightarrow> x \\<in> A)", "proof (intro allI impI, elim exE conjE, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "case (1 x C A B)"], ["proof (state)\nthis:\n  C \\<in> f ` N\n  A \\<in> f ` N\n  B \\<in> f ` N\n  A \\<noteq> B\n  x \\<in> A\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>A \\<in> f ` N\\<close>"], ["proof (chain)\npicking this:\n  A \\<in> f ` N", "obtain i where i: \"i \\<in> N\" and A: \"A = f i\""], ["proof (prove)\nusing this:\n  A \\<in> f ` N\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i \\<in> N; A = f i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i \\<in> N\n  A = f i\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>B \\<in> f ` N\\<close>"], ["proof (chain)\npicking this:\n  B \\<in> f ` N", "obtain j where j: \"j \\<in> N\" and B: \"B = f j\""], ["proof (prove)\nusing this:\n  B \\<in> f ` N\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>j \\<in> N; B = f j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  j \\<in> N\n  B = f j\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>C \\<in> f ` N\\<close>"], ["proof (chain)\npicking this:\n  C \\<in> f ` N", "obtain k where k: \"k \\<in> N\" and C: \"C = f k\""], ["proof (prove)\nusing this:\n  C \\<in> f ` N\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<in> N; C = f k\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  k \\<in> N\n  C = f k\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "hence gk: \"g k \\<in> g ` N\""], ["proof (prove)\nusing this:\n  k \\<in> N\n  C = f k\n\ngoal (1 subgoal):\n 1. g k \\<in> g ` N", "by auto"], ["proof (state)\nthis:\n  g k \\<in> g ` N\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>A \\<noteq> B\\<close> A B"], ["proof (chain)\npicking this:\n  A \\<noteq> B\n  A = f i\n  B = f j", "have ij: \"i \\<noteq> j\""], ["proof (prove)\nusing this:\n  A \\<noteq> B\n  A = f i\n  B = f j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j", "by auto"], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from inj_g ij i j"], ["proof (chain)\npicking this:\n  inj_on g N\n  i \\<noteq> j\n  i \\<in> N\n  j \\<in> N", "have gij: \"g i \\<noteq> g j\""], ["proof (prove)\nusing this:\n  inj_on g N\n  i \\<noteq> j\n  i \\<in> N\n  j \\<in> N\n\ngoal (1 subgoal):\n 1. g i \\<noteq> g j", "by (metis inj_on_contraD)"], ["proof (state)\nthis:\n  g i \\<noteq> g j\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>x \\<in> A\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> A", "have memi: \"Inl x \\<in> g i\""], ["proof (prove)\nusing this:\n  x \\<in> A\n\ngoal (1 subgoal):\n 1. Inl x \\<in> g i", "unfolding A g_def"], ["proof (prove)\nusing this:\n  x \\<in> f i\n\ngoal (1 subgoal):\n 1. Inl x \\<in> Inl ` f i \\<union> Inr ` {0..<k - card (f i)}", "by auto"], ["proof (state)\nthis:\n  Inl x \\<in> g i\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from \\<open>x \\<in> B\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> B", "have memj: \"Inl x \\<in> g j\""], ["proof (prove)\nusing this:\n  x \\<in> B\n\ngoal (1 subgoal):\n 1. Inl x \\<in> g j", "unfolding B g_def"], ["proof (prove)\nusing this:\n  x \\<in> f j\n\ngoal (1 subgoal):\n 1. Inl x \\<in> Inl ` f j \\<union> Inr ` {0..<k - card (f j)}", "by auto"], ["proof (state)\nthis:\n  Inl x \\<in> g j\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "have \"\\<exists>A B. A \\<in> g ` N \\<and> B \\<in> g ` N \\<and> A \\<noteq> B \\<and> Inl x \\<in> A \\<and> Inl x \\<in> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A B.\n       A \\<in> g ` N \\<and>\n       B \\<in> g ` N \\<and>\n       A \\<noteq> B \\<and> Inl x \\<in> A \\<and> Inl x \\<in> B", "using memi memj gij i j"], ["proof (prove)\nusing this:\n  Inl x \\<in> g i\n  Inl x \\<in> g j\n  g i \\<noteq> g j\n  i \\<in> N\n  j \\<in> N\n\ngoal (1 subgoal):\n 1. \\<exists>A B.\n       A \\<in> g ` N \\<and>\n       B \\<in> g ` N \\<and>\n       A \\<noteq> B \\<and> Inl x \\<in> A \\<and> Inl x \\<in> B", "by auto"], ["proof (state)\nthis:\n  \\<exists>A B.\n     A \\<in> g ` N \\<and>\n     B \\<in> g ` N \\<and>\n     A \\<noteq> B \\<and> Inl x \\<in> A \\<and> Inl x \\<in> B\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "from sf[unfolded sunflower_def SgN, rule_format, OF this gk]"], ["proof (chain)\npicking this:\n  Inl x \\<in> g k", "have \"Inl x \\<in> g k\""], ["proof (prove)\nusing this:\n  Inl x \\<in> g k\n\ngoal (1 subgoal):\n 1. Inl x \\<in> g k", "."], ["proof (state)\nthis:\n  Inl x \\<in> g k\n\ngoal (1 subgoal):\n 1. \\<And>x A Aa B.\n       \\<lbrakk>A \\<in> f ` N; Aa \\<in> f ` N; B \\<in> f ` N; Aa \\<noteq> B;\n        x \\<in> Aa; x \\<in> B\\<rbrakk>\n       \\<Longrightarrow> x \\<in> A", "thus \"x \\<in> C\""], ["proof (prove)\nusing this:\n  Inl x \\<in> g k\n\ngoal (1 subgoal):\n 1. x \\<in> C", "unfolding C g_def"], ["proof (prove)\nusing this:\n  Inl x \\<in> Inl ` f k \\<union> Inr ` {0..<k - card (f k)}\n\ngoal (1 subgoal):\n 1. x \\<in> f k", "by auto"], ["proof (state)\nthis:\n  x \\<in> C\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sunflower (f ` N)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<subseteq>F. sunflower S \\<and> card S = r\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We provide another sunflower lifting lemma that ensures \n  non-empty cores. Here, all elements must be taken \n  from a finite set, and the bound is multiplied the cardinality.\\<close>"], ["", "lemma sunflower_card_core_lift: \n  assumes finE: \"finite (E :: 'a set)\" \n    and sunflower: \"\\<And> G :: 'a set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A \\<le> k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and F: \"\\<forall> A \\<in> F. A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\" \n    and cardF: \"card F > (card E choose s) * c\"\n    and s: \"s \\<noteq> 0\"\n    and r: \"r \\<noteq> 0\" \n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r \\<and> card (\\<Inter> S) \\<ge> s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "let ?g = \"\\<lambda> (A :: 'a set) x. card x = s \\<and> x \\<subseteq> A\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "let ?E = \"{X. X \\<subseteq> E \\<and> card X = s}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from cardF"], ["proof (chain)\npicking this:\n  (card E choose s) * c < card F", "have finF: \"finite F\""], ["proof (prove)\nusing this:\n  (card E choose s) * c < card F\n\ngoal (1 subgoal):\n 1. finite F", "by (metis card.infinite le_0_eq less_le)"], ["proof (state)\nthis:\n  finite F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from cardF"], ["proof (chain)\npicking this:\n  (card E choose s) * c < card F", "have FnE: \"F \\<noteq> {}\""], ["proof (prove)\nusing this:\n  (card E choose s) * c < card F\n\ngoal (1 subgoal):\n 1. F \\<noteq> {}", "by force"], ["proof (state)\nthis:\n  F \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "{"], ["proof (state)\nthis:\n  F \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from FnE"], ["proof (chain)\npicking this:\n  F \\<noteq> {}", "obtain B where B: \"B \\<in> F\""], ["proof (prove)\nusing this:\n  F \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>B. B \\<in> F \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  B \\<in> F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "with F[rule_format, OF B]"], ["proof (chain)\npicking this:\n  B \\<subseteq> E \\<and> s \\<le> card B \\<and> card B \\<le> k\n  B \\<in> F", "obtain A where \"A \\<subseteq> E\" \"card A = s\""], ["proof (prove)\nusing this:\n  B \\<subseteq> E \\<and> s \\<le> card B \\<and> card B \\<le> k\n  B \\<in> F\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>A \\<subseteq> E; card A = s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (meson obtain_subset_with_card_n order_trans)"], ["proof (state)\nthis:\n  A \\<subseteq> E\n  card A = s\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "hence \"?E \\<noteq> {}\""], ["proof (prove)\nusing this:\n  A \\<subseteq> E\n  card A = s\n\ngoal (1 subgoal):\n 1. {X. X \\<subseteq> E \\<and> card X = s} \\<noteq> {}", "using B"], ["proof (prove)\nusing this:\n  A \\<subseteq> E\n  card A = s\n  B \\<in> F\n\ngoal (1 subgoal):\n 1. {X. X \\<subseteq> E \\<and> card X = s} \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  {X. X \\<subseteq> E \\<and> card X = s} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "}"], ["proof (state)\nthis:\n  {X. X \\<subseteq> E \\<and> card X = s} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "note EnE = this"], ["proof (state)\nthis:\n  {X. X \\<subseteq> E \\<and> card X = s} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "define f where \"f = (\\<lambda> A. SOME x. ?g A x)\""], ["proof (state)\nthis:\n  f = (\\<lambda>A. SOME x. card x = s \\<and> x \\<subseteq> A)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from finE"], ["proof (chain)\npicking this:\n  finite E", "have finiteE: \"finite ?E\""], ["proof (prove)\nusing this:\n  finite E\n\ngoal (1 subgoal):\n 1. finite {X. X \\<subseteq> E \\<and> card X = s}", "by simp"], ["proof (state)\nthis:\n  finite {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have \"f \\<in> F \\<rightarrow> ?E\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> F \\<rightarrow> {X. X \\<subseteq> E \\<and> card X = s}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> F \\<Longrightarrow>\n       f x \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "fix B"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> F \\<Longrightarrow>\n       f x \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "assume B: \"B \\<in> F\""], ["proof (state)\nthis:\n  B \\<in> F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> F \\<Longrightarrow>\n       f x \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "with F[rule_format, OF B]"], ["proof (chain)\npicking this:\n  B \\<subseteq> E \\<and> s \\<le> card B \\<and> card B \\<le> k\n  B \\<in> F", "have \"\\<exists> x. ?g B x\""], ["proof (prove)\nusing this:\n  B \\<subseteq> E \\<and> s \\<le> card B \\<and> card B \\<le> k\n  B \\<in> F\n\ngoal (1 subgoal):\n 1. \\<exists>x. card x = s \\<and> x \\<subseteq> B", "by (meson obtain_subset_with_card_n)"], ["proof (state)\nthis:\n  \\<exists>x. card x = s \\<and> x \\<subseteq> B\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> F \\<Longrightarrow>\n       f x \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "from someI_ex[OF this] B F"], ["proof (chain)\npicking this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> B) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> B) \\<subseteq> B\n  B \\<in> F\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k", "show \"f B \\<in> ?E\""], ["proof (prove)\nusing this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> B) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> B) \\<subseteq> B\n  B \\<in> F\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. f B \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "unfolding f_def"], ["proof (prove)\nusing this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> B) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> B) \\<subseteq> B\n  B \\<in> F\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. (SOME x. card x = s \\<and> x \\<subseteq> B)\n    \\<in> {X. X \\<subseteq> E \\<and> card X = s}", "by auto"], ["proof (state)\nthis:\n  f B \\<in> {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f \\<in> F \\<rightarrow> {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from pigeonhole_card[OF this finF finiteE EnE]"], ["proof (chain)\npicking this:\n  \\<exists>y\\<in>{X. X \\<subseteq> E \\<and> card X = s}.\n     card F\n     \\<le> card (f -` {y} \\<inter> F) *\n           card {X. X \\<subseteq> E \\<and> card X = s}", "obtain a where a: \"a \\<in> ?E\" \n    and le: \"card F \\<le> card (f -` {a} \\<inter> F) * card ?E\""], ["proof (prove)\nusing this:\n  \\<exists>y\\<in>{X. X \\<subseteq> E \\<and> card X = s}.\n     card F\n     \\<le> card (f -` {y} \\<inter> F) *\n           card {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. (\\<And>a.\n        \\<lbrakk>a \\<in> {X. X \\<subseteq> E \\<and> card X = s};\n         card F\n         \\<le> card (f -` {a} \\<inter> F) *\n               card {X. X \\<subseteq> E \\<and> card X = s}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  a \\<in> {X. X \\<subseteq> E \\<and> card X = s}\n  card F\n  \\<le> card (f -` {a} \\<inter> F) *\n        card {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have precond: \"\\<forall>A\\<in>f -` {a} \\<inter> F. finite A \\<and> card A \\<le> k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>f -` {a} \\<inter> F. finite A \\<and> card A \\<le> k", "using F finite_subset[OF _ finE]"], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n  ?A \\<subseteq> E \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>f -` {a} \\<inter> F. finite A \\<and> card A \\<le> k", "by auto"], ["proof (state)\nthis:\n  \\<forall>A\\<in>f -` {a} \\<inter> F. finite A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have \"c * (card E choose s) = (card E choose s) * c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * (card E choose s) = (card E choose s) * c", "by simp"], ["proof (state)\nthis:\n  c * (card E choose s) = (card E choose s) * c\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "also"], ["proof (state)\nthis:\n  c * (card E choose s) = (card E choose s) * c\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have \"\\<dots> < card F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (card E choose s) * c < card F", "by fact"], ["proof (state)\nthis:\n  (card E choose s) * c < card F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "also"], ["proof (state)\nthis:\n  (card E choose s) * c < card F\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have \"\\<dots> \\<le> (card (f -` {a} \\<inter> F)) * card ?E\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card F\n    \\<le> card (f -` {a} \\<inter> F) *\n          card {X. X \\<subseteq> E \\<and> card X = s}", "by fact"], ["proof (state)\nthis:\n  card F\n  \\<le> card (f -` {a} \\<inter> F) *\n        card {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "also"], ["proof (state)\nthis:\n  card F\n  \\<le> card (f -` {a} \\<inter> F) *\n        card {X. X \\<subseteq> E \\<and> card X = s}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have \"card ?E = card E choose s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {X. X \\<subseteq> E \\<and> card X = s} = card E choose s", "by (rule n_subsets[OF finE])"], ["proof (state)\nthis:\n  card {X. X \\<subseteq> E \\<and> card X = s} = card E choose s\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "finally"], ["proof (chain)\npicking this:\n  c * (card E choose s) < card (f -` {a} \\<inter> F) * (card E choose s)", "have \"c < card (f -` {a} \\<inter> F)\""], ["proof (prove)\nusing this:\n  c * (card E choose s) < card (f -` {a} \\<inter> F) * (card E choose s)\n\ngoal (1 subgoal):\n 1. c < card (f -` {a} \\<inter> F)", "by auto"], ["proof (state)\nthis:\n  c < card (f -` {a} \\<inter> F)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from sunflower[OF precond this]"], ["proof (chain)\npicking this:\n  \\<exists>S\\<subseteq>f -` {a} \\<inter> F. sunflower S \\<and> card S = r", "obtain S where *: \"S \\<subseteq> f -` {a} \\<inter> F\" \"sunflower S\" \"card S = r\""], ["proof (prove)\nusing this:\n  \\<exists>S\\<subseteq>f -` {a} \\<inter> F. sunflower S \\<and> card S = r\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S \\<subseteq> f -` {a} \\<inter> F; sunflower S;\n         card S = r\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from finite_subset[OF _ finF, of S]"], ["proof (chain)\npicking this:\n  S \\<subseteq> F \\<Longrightarrow> finite S", "have finS: \"finite S\""], ["proof (prove)\nusing this:\n  S \\<subseteq> F \\<Longrightarrow> finite S\n\ngoal (1 subgoal):\n 1. finite S", "using *"], ["proof (prove)\nusing this:\n  S \\<subseteq> F \\<Longrightarrow> finite S\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n\ngoal (1 subgoal):\n 1. finite S", "by auto"], ["proof (state)\nthis:\n  finite S\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "from * r"], ["proof (chain)\npicking this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n  r \\<noteq> 0", "have SnE: \"S \\<noteq> {}\""], ["proof (prove)\nusing this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n  r \\<noteq> 0\n\ngoal (1 subgoal):\n 1. S \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  S \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "have finIS: \"finite (\\<Inter> S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (\\<Inter> S)", "proof (rule finite_Inter)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>S. finite A", "from SnE"], ["proof (chain)\npicking this:\n  S \\<noteq> {}", "obtain A where A: \"A \\<in> S\""], ["proof (prove)\nusing this:\n  S \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>A. A \\<in> S \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  A \\<in> S\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>S. finite A", "with F s"], ["proof (chain)\npicking this:\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n  s \\<noteq> 0\n  A \\<in> S", "have \"finite A\""], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n  s \\<noteq> 0\n  A \\<in> S\n\ngoal (1 subgoal):\n 1. finite A", "using * precond"], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n  s \\<noteq> 0\n  A \\<in> S\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n  \\<forall>A\\<in>f -` {a} \\<inter> F. finite A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. finite A", "by blast"], ["proof (state)\nthis:\n  finite A\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>S. finite A", "thus \"\\<exists>A\\<in>S. finite A\""], ["proof (prove)\nusing this:\n  finite A\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>S. finite A", "using A"], ["proof (prove)\nusing this:\n  finite A\n  A \\<in> S\n\ngoal (1 subgoal):\n 1. \\<exists>A\\<in>S. finite A", "by auto"], ["proof (state)\nthis:\n  \\<exists>A\\<in>S. finite A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  finite (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)", "proof (intro exI[of _ S] conjI *)"], ["proof (state)\ngoal (2 subgoals):\n 1. S \\<subseteq> F\n 2. s \\<le> card (\\<Inter> S)", "show \"S \\<subseteq> F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<subseteq> F", "using *"], ["proof (prove)\nusing this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n\ngoal (1 subgoal):\n 1. S \\<subseteq> F", "by auto"], ["proof (state)\nthis:\n  S \\<subseteq> F\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "{"], ["proof (state)\nthis:\n  S \\<subseteq> F\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "fix A"], ["proof (state)\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "assume \"A \\<in> S\""], ["proof (state)\nthis:\n  A \\<in> S\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "with *(1)"], ["proof (chain)\npicking this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  A \\<in> S", "have \"A \\<in> f -` {a}\" and A: \"A \\<in> F\""], ["proof (prove)\nusing this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  A \\<in> S\n\ngoal (1 subgoal):\n 1. A \\<in> f -` {a} &&& A \\<in> F", "using *"], ["proof (prove)\nusing this:\n  S \\<subseteq> f -` {a} \\<inter> F\n  A \\<in> S\n  S \\<subseteq> f -` {a} \\<inter> F\n  sunflower S\n  card S = r\n\ngoal (1 subgoal):\n 1. A \\<in> f -` {a} &&& A \\<in> F", "by auto"], ["proof (state)\nthis:\n  A \\<in> f -` {a}\n  A \\<in> F\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "from this"], ["proof (chain)\npicking this:\n  A \\<in> f -` {a}\n  A \\<in> F", "have **: \"f A = a\" \"A \\<in> F\""], ["proof (prove)\nusing this:\n  A \\<in> f -` {a}\n  A \\<in> F\n\ngoal (1 subgoal):\n 1. f A = a &&& A \\<in> F", "by auto"], ["proof (state)\nthis:\n  f A = a\n  A \\<in> F\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "from F[rule_format, OF A]"], ["proof (chain)\npicking this:\n  A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k", "have \"\\<exists>x. card x = s \\<and> x \\<subseteq> A\""], ["proof (prove)\nusing this:\n  A \\<subseteq> E \\<and> s \\<le> card A \\<and> card A \\<le> k\n\ngoal (1 subgoal):\n 1. \\<exists>x. card x = s \\<and> x \\<subseteq> A", "by (meson obtain_subset_with_card_n order_trans)"], ["proof (state)\nthis:\n  \\<exists>x. card x = s \\<and> x \\<subseteq> A\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "from someI_ex[of \"?g A\", OF this] **"], ["proof (chain)\npicking this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> A) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> A) \\<subseteq> A\n  f A = a\n  A \\<in> F", "have \"a \\<subseteq> A\""], ["proof (prove)\nusing this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> A) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> A) \\<subseteq> A\n  f A = a\n  A \\<in> F\n\ngoal (1 subgoal):\n 1. a \\<subseteq> A", "unfolding f_def"], ["proof (prove)\nusing this:\n  card (SOME x. card x = s \\<and> x \\<subseteq> A) = s \\<and>\n  (SOME x. card x = s \\<and> x \\<subseteq> A) \\<subseteq> A\n  (SOME x. card x = s \\<and> x \\<subseteq> A) = a\n  A \\<in> F\n\ngoal (1 subgoal):\n 1. a \\<subseteq> A", "by auto"], ["proof (state)\nthis:\n  a \\<subseteq> A\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "}"], ["proof (state)\nthis:\n  ?A2 \\<in> S \\<Longrightarrow> a \\<subseteq> ?A2\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "hence \"a \\<subseteq> \\<Inter> S\""], ["proof (prove)\nusing this:\n  ?A2 \\<in> S \\<Longrightarrow> a \\<subseteq> ?A2\n\ngoal (1 subgoal):\n 1. a \\<subseteq> \\<Inter> S", "by auto"], ["proof (state)\nthis:\n  a \\<subseteq> \\<Inter> S\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "from card_mono[OF finIS this]"], ["proof (chain)\npicking this:\n  card a \\<le> card (\\<Inter> S)", "have \"card a \\<le> card (\\<Inter> S)\""], ["proof (prove)\nusing this:\n  card a \\<le> card (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. card a \\<le> card (\\<Inter> S)", "."], ["proof (state)\nthis:\n  card a \\<le> card (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "with a"], ["proof (chain)\npicking this:\n  a \\<in> {X. X \\<subseteq> E \\<and> card X = s}\n  card a \\<le> card (\\<Inter> S)", "show \"s \\<le> card (\\<Inter> S)\""], ["proof (prove)\nusing this:\n  a \\<in> {X. X \\<subseteq> E \\<and> card X = s}\n  card a \\<le> card (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. s \\<le> card (\\<Inter> S)", "by auto"], ["proof (state)\nthis:\n  s \\<le> card (\\<Inter> S)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>S\\<subseteq>F.\n     sunflower S \\<and> card S = r \\<and> s \\<le> card (\\<Inter> S)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sunflower_nonempty_core_lift: \n  assumes finE: \"finite (E :: 'a set)\" \n    and sunflower: \"\\<And> G :: 'a set set. \n     (\\<forall> A \\<in> G. finite A \\<and> card A \\<le> k) \\<Longrightarrow> card G > c \n        \\<Longrightarrow> \\<exists> S. S \\<subseteq> G \\<and> sunflower S \\<and> card S = r\" \n    and F: \"\\<forall> A \\<in> F. A \\<subseteq> E \\<and> card A \\<le> k\" \n    and empty: \"{} \\<notin> F\" \n    and cardF: \"card F > card E * c\"\n  shows \"\\<exists> S. S \\<subseteq> F \\<and> sunflower S \\<and> card S = r \\<and> (\\<Inter> S) \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "proof (cases \"r = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "case False"], ["proof (state)\nthis:\n  r \\<noteq> 0\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "from F empty"], ["proof (chain)\npicking this:\n  \\<forall>A\\<in>F. A \\<subseteq> E \\<and> card A \\<le> k\n  {} \\<notin> F", "have F': \"\\<forall>A\\<in>F. A \\<subseteq> E \\<and> 1 \\<le> card A \\<and> card A \\<le> k \""], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>F. A \\<subseteq> E \\<and> card A \\<le> k\n  {} \\<notin> F\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>F.\n       A \\<subseteq> E \\<and> 1 \\<le> card A \\<and> card A \\<le> k", "using finE"], ["proof (prove)\nusing this:\n  \\<forall>A\\<in>F. A \\<subseteq> E \\<and> card A \\<le> k\n  {} \\<notin> F\n  finite E\n\ngoal (1 subgoal):\n 1. \\<forall>A\\<in>F.\n       A \\<subseteq> E \\<and> 1 \\<le> card A \\<and> card A \\<le> k", "by (metis One_nat_def Suc_leI card_gt_0_iff finite_subset)"], ["proof (state)\nthis:\n  \\<forall>A\\<in>F.\n     A \\<subseteq> E \\<and> 1 \\<le> card A \\<and> card A \\<le> k\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "from cardF"], ["proof (chain)\npicking this:\n  card E * c < card F", "have cardF': \"(card E choose 1) * c < card F\""], ["proof (prove)\nusing this:\n  card E * c < card F\n\ngoal (1 subgoal):\n 1. (card E choose 1) * c < card F", "by auto"], ["proof (state)\nthis:\n  (card E choose 1) * c < card F\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "from sunflower_card_core_lift[OF finE sunflower, of k c F 1, OF _ _ F' cardF' _ False]"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>G.\n              \\<lbrakk>\\<forall>A\\<in>G. finite A \\<and> card A \\<le> k;\n               c < card G\\<rbrakk>\n              \\<Longrightarrow> \\<forall>A\\<in>G.\n                                   finite A \\<and> card A \\<le> k;\n   \\<And>G.\n      \\<lbrakk>\\<forall>A\\<in>G. finite A \\<and> card A \\<le> k;\n       c < card G\\<rbrakk>\n      \\<Longrightarrow> c < card G;\n   1 \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>S\\<subseteq>F.\n                       sunflower S \\<and>\n                       card S = r \\<and> 1 \\<le> card (\\<Inter> S)", "obtain S where \"S \\<subseteq> F\" and main: \"sunflower S\" \"card S = r\" \"1 \\<le> card (\\<Inter> S)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>G.\n              \\<lbrakk>\\<forall>A\\<in>G. finite A \\<and> card A \\<le> k;\n               c < card G\\<rbrakk>\n              \\<Longrightarrow> \\<forall>A\\<in>G.\n                                   finite A \\<and> card A \\<le> k;\n   \\<And>G.\n      \\<lbrakk>\\<forall>A\\<in>G. finite A \\<and> card A \\<le> k;\n       c < card G\\<rbrakk>\n      \\<Longrightarrow> c < card G;\n   1 \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> \\<exists>S\\<subseteq>F.\n                       sunflower S \\<and>\n                       card S = r \\<and> 1 \\<le> card (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        \\<lbrakk>S \\<subseteq> F; sunflower S; card S = r;\n         1 \\<le> card (\\<Inter> S)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  S \\<subseteq> F\n  sunflower S\n  card S = r\n  1 \\<le> card (\\<Inter> S)\n\ngoal (2 subgoals):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n 2. r \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  S \\<subseteq> F\n  sunflower S\n  card S = r\n  1 \\<le> card (\\<Inter> S)\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "by (intro exI[of _ S], auto)"], ["proof (state)\nthis:\n  \\<exists>S\\<subseteq>F.\n     sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n\ngoal (1 subgoal):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "case True"], ["proof (state)\nthis:\n  r = 0\n\ngoal (1 subgoal):\n 1. r = 0 \\<Longrightarrow>\n    \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "thus ?thesis"], ["proof (prove)\nusing this:\n  r = 0\n\ngoal (1 subgoal):\n 1. \\<exists>S\\<subseteq>F.\n       sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}", "by (intro exI[of _ \"{}\"], auto simp: empty_sunflower)"], ["proof (state)\nthis:\n  \\<exists>S\\<subseteq>F.\n     sunflower S \\<and> card S = r \\<and> \\<Inter> S \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}