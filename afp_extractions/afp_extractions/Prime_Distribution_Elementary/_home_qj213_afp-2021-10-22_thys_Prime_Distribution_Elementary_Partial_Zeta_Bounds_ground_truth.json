{"file_name": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary/Partial_Zeta_Bounds.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary", "problem_names": ["lemma harm_asymp_equiv: \"sum_upto (\\<lambda>n. 1 / n) \\<sim>[at_top] ln\"", "lemma\n  fixes s :: real\n  assumes s: \"s > 0\" \"s \\<noteq> 1\"\n  shows   zeta_partial_sum_bigo_pos:\n            \"(\\<lambda>n. (\\<Sum>k=1..n. real k powr -s) - real n powr (1 - s) / (1 - s) - Re (zeta s))\n                \\<in> O(\\<lambda>x. real x powr -s)\"\n    and   zeta_partial_sum_bigo_pos':\n            \"(\\<lambda>n. \\<Sum>k=1..n. real k powr -s) =o\n               (\\<lambda>n. real n powr (1 - s) / (1 - s) + Re (zeta s)) +o O(\\<lambda>x. real x powr -s)\"", "lemma zeta_tail_bigo:\n  fixes s :: real\n  assumes s: \"s > 1\"\n  shows   \"(\\<lambda>n. Re (hurwitz_zeta (real n + 1) s)) \\<in> O(\\<lambda>x. real x powr (1 - s))\"", "lemma zeta_tail_bigo':\n  fixes s :: real\n  assumes s: \"s > 1\"\n  shows   \"(\\<lambda>n. Re (hurwitz_zeta (real n) s)) \\<in> O(\\<lambda>x. real x powr (1 - s))\"", "lemma\n  fixes s :: real\n  assumes s: \"s > 0\"\n  shows   zeta_partial_sum_bigo_neg:\n            \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s) - n powr (1 + s) / (1 + s)) \\<in> O(\\<lambda>n. n powr s)\"\n    and   zeta_partial_sum_bigo_neg':\n            \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s)) =o (\\<lambda>n. n powr (1 + s) / (1 + s)) +o O(\\<lambda>n. n powr s)\"", "lemma zeta_partial_sum_le_pos:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  defines \"z \\<equiv> Re (zeta (complex_of_real s))\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x - (x powr (1-s) / (1-s) + z)\\<bar> \\<le> c * x powr -s\"", "lemma zeta_partial_sum_le_pos':\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  defines \"z \\<equiv> Re (zeta (complex_of_real s))\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x - x powr (1-s) / (1-s)\\<bar> \\<le> c\"", "lemma zeta_partial_sum_le_pos'':\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x\\<bar> \\<le> c * x powr max 0 (1 - s)\"", "lemma zeta_partial_sum_le_pos_bigo:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"(\\<lambda>x. sum_upto (\\<lambda>n. n powr -s) x) \\<in> O(\\<lambda>x. x powr max 0 (1 - s))\"", "lemma zeta_partial_sum_01_asymp_equiv:\n  assumes \"s \\<in> {0<..<1}\"\n  shows \"sum_upto (\\<lambda>n. n powr -s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))\"", "lemma zeta_partial_sum_gt_1_asymp_equiv:\n  assumes \"s > 1\"\n  defines \"\\<zeta> \\<equiv> Re (zeta s)\"\n  shows \"sum_upto (\\<lambda>n. n powr -s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)\"", "lemma zeta_partial_sum_pos_bigtheta:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"sum_upto (\\<lambda>n. n powr -s) \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\"", "lemma zeta_partial_sum_le_neg:\n  assumes \"s > 0\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr s) x - x powr (1 + s) / (1 + s)\\<bar> \\<le> c * x powr s\"", "lemma zeta_partial_sum_neg_asymp_equiv:\n  assumes \"s > 0\"\n  shows \"sum_upto (\\<lambda>n. n powr s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))\""], "translations": [["", "lemma harm_asymp_equiv: \"sum_upto (\\<lambda>n. 1 / n) \\<sim>[at_top] ln\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "have \"sum_upto (\\<lambda>n. n powr -1) \\<sim>[at_top] (\\<lambda>x. ln (\\<lfloor>x\\<rfloor> + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - 1) \\<sim>[at_top] (\\<lambda>x.\n                                 ln (real_of_int (\\<lfloor>x\\<rfloor> + 1)))", "proof (rule asymp_equiv_sandwich)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top.\n       0 \\<le> ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n 2. \\<forall>\\<^sub>F x in at_top.\n       ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n       \\<le> sum_upto (\\<lambda>n. real n powr - 1) x\n 3. \\<forall>\\<^sub>F x in at_top.\n       sum_upto (\\<lambda>n. real n powr - 1) x \\<le> ?h x\n 4. (\\<lambda>x.\n        ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))) \\<sim>[at_top] ?h", "have \"eventually (\\<lambda>x. sum_upto (\\<lambda>n. n powr -1) x \\<in> {ln (\\<lfloor>x\\<rfloor> + 1)..ln \\<lfloor>x\\<rfloor> + 1}) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "using eventually_ge_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "case (elim x)"], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "have \"sum_upto (\\<lambda>n. real n powr -1) x = harm (nat \\<lfloor>x\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - 1) x =\n    harm (nat \\<lfloor>x\\<rfloor>)", "unfolding sum_upto_altdef harm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{0<..nat \\<lfloor>x\\<rfloor>}. real n powr - 1) =\n    (\\<Sum>k = 1..nat \\<lfloor>x\\<rfloor>. inverse (real k))", "by (intro sum.cong) (auto simp: field_simps powr_minus)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - 1) x = harm (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - 1) x = harm (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "have \"\\<dots> \\<in> {ln (\\<lfloor>x\\<rfloor> + 1)..ln \\<lfloor>x\\<rfloor> + 1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. harm (nat \\<lfloor>x\\<rfloor>)\n    \\<in> {ln (real_of_int\n                (\\<lfloor>x\\<rfloor> +\n                 1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "using elim harm_le[of \"nat \\<lfloor>x\\<rfloor>\"] ln_le_harm[of \"nat \\<lfloor>x\\<rfloor>\"]"], ["proof (prove)\nusing this:\n  1 \\<le> x\n  1 \\<le> nat \\<lfloor>x\\<rfloor> \\<Longrightarrow>\n  harm (nat \\<lfloor>x\\<rfloor>)\n  \\<le> ln (real (nat \\<lfloor>x\\<rfloor>)) + 1\n  ln (real (nat \\<lfloor>x\\<rfloor>) + 1)\n  \\<le> harm (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. harm (nat \\<lfloor>x\\<rfloor>)\n    \\<in> {ln (real_of_int\n                (\\<lfloor>x\\<rfloor> +\n                 1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "by (auto simp: le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  harm (nat \\<lfloor>x\\<rfloor>)\n  \\<in> {ln (real_of_int\n              (\\<lfloor>x\\<rfloor> +\n               1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<in> {ln (real_of_int\n                   (\\<lfloor>x\\<rfloor> +\n                    1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "finally"], ["proof (chain)\npicking this:\n  sum_upto (\\<lambda>n. real n powr - 1) x\n  \\<in> {ln (real_of_int\n              (\\<lfloor>x\\<rfloor> +\n               1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "show ?case"], ["proof (prove)\nusing this:\n  sum_upto (\\<lambda>n. real n powr - 1) x\n  \\<in> {ln (real_of_int\n              (\\<lfloor>x\\<rfloor> +\n               1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - 1) x\n    \\<in> {ln (real_of_int\n                (\\<lfloor>x\\<rfloor> +\n                 1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}", "by simp"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - 1) x\n  \\<in> {ln (real_of_int\n              (\\<lfloor>x\\<rfloor> +\n               1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     sum_upto (\\<lambda>n. real n powr - 1) x\n     \\<in> {ln (real_of_int\n                 (\\<lfloor>x\\<rfloor> +\n                  1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}\n\ngoal (4 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top.\n       0 \\<le> ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n 2. \\<forall>\\<^sub>F x in at_top.\n       ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n       \\<le> sum_upto (\\<lambda>n. real n powr - 1) x\n 3. \\<forall>\\<^sub>F x in at_top.\n       sum_upto (\\<lambda>n. real n powr - 1) x \\<le> ?h x\n 4. (\\<lambda>x.\n        ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))) \\<sim>[at_top] ?h", "thus \"eventually (\\<lambda>x. sum_upto (\\<lambda>n. n powr -1) x \\<ge> ln (\\<lfloor>x\\<rfloor> + 1)) at_top\"\n         \"eventually (\\<lambda>x. sum_upto (\\<lambda>n. n powr -1) x \\<le> ln \\<lfloor>x\\<rfloor> + 1) at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     sum_upto (\\<lambda>n. real n powr - 1) x\n     \\<in> {ln (real_of_int\n                 (\\<lfloor>x\\<rfloor> +\n                  1))..ln (real_of_int \\<lfloor>x\\<rfloor>) + 1}\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n       \\<le> sum_upto (\\<lambda>n. real n powr - 1) x &&&\n    \\<forall>\\<^sub>F x in at_top.\n       sum_upto (\\<lambda>n. real n powr - 1) x\n       \\<le> ln (real_of_int \\<lfloor>x\\<rfloor>) + 1", "by (eventually_elim; simp)+"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n     \\<le> sum_upto (\\<lambda>n. real n powr - 1) x\n  \\<forall>\\<^sub>F x in at_top.\n     sum_upto (\\<lambda>n. real n powr - 1) x\n     \\<le> ln (real_of_int \\<lfloor>x\\<rfloor>) + 1\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top.\n       0 \\<le> ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))\n 2. (\\<lambda>x.\n        ln (real_of_int\n             (\\<lfloor>x\\<rfloor> +\n              1))) \\<sim>[at_top] (\\<lambda>x.\nln (real_of_int \\<lfloor>x\\<rfloor>) + 1)", "qed real_asymp+"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       real n powr\n       - 1) \\<sim>[at_top] (\\<lambda>x.\n                               ln (real_of_int (\\<lfloor>x\\<rfloor> + 1)))\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       real n powr\n       - 1) \\<sim>[at_top] (\\<lambda>x.\n                               ln (real_of_int (\\<lfloor>x\\<rfloor> + 1)))\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "have \"\\<dots> \\<sim>[at_top] ln\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))) \\<sim>[at_top] ln", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. ln (real_of_int (\\<lfloor>x\\<rfloor> + 1))) \\<sim>[at_top] ln\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "finally"], ["proof (chain)\npicking this:\n  (\\<And>c d.\n      c \\<sim>[at_top] d \\<Longrightarrow>\n      c \\<sim>[at_top] d) \\<Longrightarrow>\n  sum_upto (\\<lambda>n. real n powr - 1) \\<sim>[at_top] ln", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<And>c d.\n      c \\<sim>[at_top] d \\<Longrightarrow>\n      c \\<sim>[at_top] d) \\<Longrightarrow>\n  sum_upto (\\<lambda>n. real n powr - 1) \\<sim>[at_top] ln\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln", "by (simp add: powr_minus field_simps)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 / real n) \\<sim>[at_top] ln\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma\n  fixes s :: real\n  assumes s: \"s > 0\" \"s \\<noteq> 1\"\n  shows   zeta_partial_sum_bigo_pos:\n            \"(\\<lambda>n. (\\<Sum>k=1..n. real k powr -s) - real n powr (1 - s) / (1 - s) - Re (zeta s))\n                \\<in> O(\\<lambda>x. real x powr -s)\"\n    and   zeta_partial_sum_bigo_pos':\n            \"(\\<lambda>n. \\<Sum>k=1..n. real k powr -s) =o\n               (\\<lambda>n. real n powr (1 - s) / (1 - s) + Re (zeta s)) +o O(\\<lambda>x. real x powr -s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s) &&&\n    (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "define F where \"F = (\\<lambda>x. x powr (1 - s) / (1 - s))\""], ["proof (state)\nthis:\n  F = (\\<lambda>x. x powr (1 - s) / (1 - s))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "define f where \"f = (\\<lambda>x. x powr -s)\""], ["proof (state)\nthis:\n  f = (\\<lambda>x. x powr - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "define f' where \"f' = (\\<lambda>x. -s * x powr (-s-1))\""], ["proof (state)\nthis:\n  f' = (\\<lambda>x. - s * x powr (- s - 1))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "define z where \"z = Re (zeta s)\""], ["proof (state)\nthis:\n  z = Re (zeta (complex_of_real s))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "interpret euler_maclaurin_nat' F f \"(!) [f, f']\" 1 0 z \"{}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. euler_maclaurin_nat' F f ((!) [f, f']) 1 0 z {}", "proof"], ["proof (state)\ngoal (7 subgoals):\n 1. finite {}\n 2. [f, f'] ! 0 = f\n 3. \\<And>k.\n       k \\<le> 2 * 0 + 1 \\<Longrightarrow>\n       continuous_on {real 1..} ([f, f'] ! k)\n 4. \\<And>k x.\n       \\<lbrakk>k \\<le> 2 * 0; x \\<in> {real 1..} - {}\\<rbrakk>\n       \\<Longrightarrow> ([f, f'] ! k has_vector_derivative\n                          ([f, f'] ! Suc k) x)\n                          (at x)\n 5. continuous_on {real 1..} F\n 6. \\<And>x.\n       x \\<in> {real 1..} - {} \\<Longrightarrow>\n       (F has_vector_derivative f x) (at x)\n 7. (\\<lambda>b.\n        (\\<Sum>k = 1..b. f (real k)) - F (real b) -\n        (\\<Sum>i<2 * 0 + 1.\n            (bernoulli' (Suc i) / fact (Suc i)) *\\<^sub>R\n            ([f, f'] ! i) (real b)))\n    \\<longlonglongrightarrow> z", "have \"(\\<lambda>b. (\\<Sum>k=1..b. real k powr -s) - real b powr (1 - s) / (1 - s) - real b powr -s / 2)\n             \\<longlonglongrightarrow> Re (zeta s) - 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s) -\n        real b powr - s / 2)\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s)) - 0", "proof (intro tendsto_diff)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        (\\<Sum>k = 1..x. real k powr - s) - real x powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n 2. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "let ?g = \"\\<lambda>b. (\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n                             of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)\""], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        (\\<Sum>k = 1..x. real k powr - s) - real x powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n 2. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "have \"\\<forall>\\<^sub>F b in at_top. Re (?g b) = (\\<Sum>k=1..b. real k powr -s) - real b powr (1 - s) / (1 - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F b in sequentially.\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "using eventually_ge_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F b in sequentially.\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "case (elim b)"], ["proof (state)\nthis:\n  1 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "have \"(\\<Sum>k=1..b. real k powr -s) = (\\<Sum>k<b. real (Suc k) powr -s) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..b. real k powr - s) = (\\<Sum>k<b. real (Suc k) powr - s)", "by (intro sum.reindex_bij_witness[of _ Suc \"\\<lambda>n. n - 1\"]) auto"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..b. real k powr - s) = (\\<Sum>k<b. real (Suc k) powr - s)\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..b. real k powr - s) = (\\<Sum>k<b. real (Suc k) powr - s)\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "have \"\\<dots> - real b powr (1 - s) / (1 - s) = Re (?g b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<b. real (Suc k) powr - s) - real b powr (1 - s) / (1 - s) =\n    Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n        of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s))", "by (auto simp: powr_Reals_eq add_ac)"], ["proof (state)\nthis:\n  (\\<Sum>k<b. real (Suc k) powr - s) - real b powr (1 - s) / (1 - s) =\n  Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n      of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s))\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       Re ((\\<Sum>i<b.\n               complex_of_real (real i + 1) powr - complex_of_real s) -\n           of_nat b powr (1 - complex_of_real s) /\n           (1 - complex_of_real s)) =\n       (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s) =\n  Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n      of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s))", "show ?case"], ["proof (prove)\nusing this:\n  (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s) =\n  Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n      of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s))\n\ngoal (1 subgoal):\n 1. Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n        of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n    (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)", ".."], ["proof (state)\nthis:\n  Re ((\\<Sum>i<b. complex_of_real (real i + 1) powr - complex_of_real s) -\n      of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n  (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F b in sequentially.\n     Re ((\\<Sum>i<b.\n             complex_of_real (real i + 1) powr - complex_of_real s) -\n         of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n     (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        (\\<Sum>k = 1..x. real k powr - s) - real x powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n 2. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F b in sequentially.\n     Re ((\\<Sum>i<b.\n             complex_of_real (real i + 1) powr - complex_of_real s) -\n         of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n     (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        (\\<Sum>k = 1..x. real k powr - s) - real x powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n 2. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "have \"(\\<lambda>b. Re (?g b)) \\<longlonglongrightarrow> Re (zeta s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        Re ((\\<Sum>i<b.\n                complex_of_real (real i + 1) powr - complex_of_real s) -\n            of_nat b powr (1 - complex_of_real s) /\n            (1 - complex_of_real s)))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))", "using hurwitz_zeta_critical_strip[of \"of_real s\" 1] s"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < Re (complex_of_real s); complex_of_real s \\<noteq> 1;\n   0 < 1\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n.\n                        (\\<Sum>i<n.\n                            complex_of_real (real i + 1) powr\n                            - complex_of_real s) -\n                        of_nat n powr (1 - complex_of_real s) /\n                        (1 - complex_of_real s))\n                    \\<longlonglongrightarrow> hurwitz_zeta 1\n         (complex_of_real s)\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        Re ((\\<Sum>i<b.\n                complex_of_real (real i + 1) powr - complex_of_real s) -\n            of_nat b powr (1 - complex_of_real s) /\n            (1 - complex_of_real s)))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))", "by (intro tendsto_intros) (simp add: zeta_def)"], ["proof (state)\nthis:\n  (\\<lambda>b.\n      Re ((\\<Sum>i<b.\n              complex_of_real (real i + 1) powr - complex_of_real s) -\n          of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)))\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        (\\<Sum>k = 1..x. real k powr - s) - real x powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n 2. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F b in sequentially.\n     Re ((\\<Sum>i<b.\n             complex_of_real (real i + 1) powr - complex_of_real s) -\n         of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n     (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)\n  (\\<lambda>b.\n      Re ((\\<Sum>i<b.\n              complex_of_real (real i + 1) powr - complex_of_real s) -\n          of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)))\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s))", "show \"(\\<lambda>b. (\\<Sum>k=1..b. real k powr -s) - real b powr (1 - s) / (1 - s)) \\<longlonglongrightarrow> Re (zeta s)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F b in sequentially.\n     Re ((\\<Sum>i<b.\n             complex_of_real (real i + 1) powr - complex_of_real s) -\n         of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)) =\n     (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s)\n  (\\<lambda>b.\n      Re ((\\<Sum>i<b.\n              complex_of_real (real i + 1) powr - complex_of_real s) -\n          of_nat b powr (1 - complex_of_real s) / (1 - complex_of_real s)))\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s))\n    \\<longlonglongrightarrow> Re (zeta (complex_of_real s))", "by (blast intro: Lim_transform_eventually)"], ["proof (state)\nthis:\n  (\\<lambda>b.\n      (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s))\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. real x powr - s / 2) \\<longlonglongrightarrow> 0", "qed (use s in real_asymp)"], ["proof (state)\nthis:\n  (\\<lambda>b.\n      (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s) -\n      real b powr - s / 2)\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s)) - 0\n\ngoal (7 subgoals):\n 1. finite {}\n 2. [f, f'] ! 0 = f\n 3. \\<And>k.\n       k \\<le> 2 * 0 + 1 \\<Longrightarrow>\n       continuous_on {real 1..} ([f, f'] ! k)\n 4. \\<And>k x.\n       \\<lbrakk>k \\<le> 2 * 0; x \\<in> {real 1..} - {}\\<rbrakk>\n       \\<Longrightarrow> ([f, f'] ! k has_vector_derivative\n                          ([f, f'] ! Suc k) x)\n                          (at x)\n 5. continuous_on {real 1..} F\n 6. \\<And>x.\n       x \\<in> {real 1..} - {} \\<Longrightarrow>\n       (F has_vector_derivative f x) (at x)\n 7. (\\<lambda>b.\n        (\\<Sum>k = 1..b. f (real k)) - F (real b) -\n        (\\<Sum>i<2 * 0 + 1.\n            (bernoulli' (Suc i) / fact (Suc i)) *\\<^sub>R\n            ([f, f'] ! i) (real b)))\n    \\<longlonglongrightarrow> z", "thus \"(\\<lambda>b. (\\<Sum>k = 1..b. f (real k)) - F (real b) -\n              (\\<Sum>i<2 * 0 + 1. (bernoulli' (Suc i) / fact (Suc i)) *\\<^sub>R ([f, f'] ! i) (real b)))\n            \\<longlonglongrightarrow> z\""], ["proof (prove)\nusing this:\n  (\\<lambda>b.\n      (\\<Sum>k = 1..b. real k powr - s) - real b powr (1 - s) / (1 - s) -\n      real b powr - s / 2)\n  \\<longlonglongrightarrow> Re (zeta (complex_of_real s)) - 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>b.\n        (\\<Sum>k = 1..b. f (real k)) - F (real b) -\n        (\\<Sum>i<2 * 0 + 1.\n            (bernoulli' (Suc i) / fact (Suc i)) *\\<^sub>R\n            ([f, f'] ! i) (real b)))\n    \\<longlonglongrightarrow> z", "by (simp add: f_def F_def z_def)"], ["proof (state)\nthis:\n  (\\<lambda>b.\n      (\\<Sum>k = 1..b. f (real k)) - F (real b) -\n      (\\<Sum>i<2 * 0 + 1.\n          (bernoulli' (Suc i) / fact (Suc i)) *\\<^sub>R\n          ([f, f'] ! i) (real b)))\n  \\<longlonglongrightarrow> z\n\ngoal (6 subgoals):\n 1. finite {}\n 2. [f, f'] ! 0 = f\n 3. \\<And>k.\n       k \\<le> 2 * 0 + 1 \\<Longrightarrow>\n       continuous_on {real 1..} ([f, f'] ! k)\n 4. \\<And>k x.\n       \\<lbrakk>k \\<le> 2 * 0; x \\<in> {real 1..} - {}\\<rbrakk>\n       \\<Longrightarrow> ([f, f'] ! k has_vector_derivative\n                          ([f, f'] ! Suc k) x)\n                          (at x)\n 5. continuous_on {real 1..} F\n 6. \\<And>x.\n       x \\<in> {real 1..} - {} \\<Longrightarrow>\n       (F has_vector_derivative f x) (at x)", "qed (use \\<open>s \\<noteq> 1\\<close> in\n         \\<open>auto intro!: derivative_eq_intros continuous_intros \n               simp flip: has_field_derivative_iff_has_vector_derivative\n               simp: F_def f_def f'_def nth_Cons split: nat.splits\\<close>)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "fix n :: nat"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "assume n: \"n \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "have \"(\\<Sum>k=1..n. real k powr -s) =\n            n powr (1 - s) / (1 - s) + z + 1/2 * n powr -s -\n            EM_remainder 1 f' (int n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..n. real k powr - s) =\n    real n powr (1 - s) / (1 - s) + z + 1 / 2 * real n powr - s -\n    EM_remainder 1 f' (int n)", "using euler_maclaurin_strong_nat'[of n] n"], ["proof (prove)\nusing this:\n  1 \\<le> n \\<Longrightarrow>\n  (\\<Sum>k = 1..n. f (real k)) =\n  F (real n) + z + (1 / 2) *\\<^sub>R f (real n) +\n  (\\<Sum>i = 1..0.\n      (bernoulli (2 * i) / fact (2 * i)) *\\<^sub>R\n      ([f, f'] ! (2 * i - 1)) (real n)) -\n  EM_remainder (2 * 0 + 1) ([f, f'] ! (2 * 0 + 1)) (int n)\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = 1..n. real k powr - s) =\n    real n powr (1 - s) / (1 - s) + z + 1 / 2 * real n powr - s -\n    EM_remainder 1 f' (int n)", "by (simp add: F_def f_def)"], ["proof (state)\nthis:\n  (\\<Sum>k = 1..n. real k powr - s) =\n  real n powr (1 - s) / (1 - s) + z + 1 / 2 * real n powr - s -\n  EM_remainder 1 f' (int n)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "}"], ["proof (state)\nthis:\n  1 \\<le> ?n2 \\<Longrightarrow>\n  (\\<Sum>k = 1..?n2. real k powr - s) =\n  real ?n2 powr (1 - s) / (1 - s) + z + 1 / 2 * real ?n2 powr - s -\n  EM_remainder 1 f' (int ?n2)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "note * = this"], ["proof (state)\nthis:\n  1 \\<le> ?n2 \\<Longrightarrow>\n  (\\<Sum>k = 1..?n2. real k powr - s) =\n  real ?n2 powr (1 - s) / (1 - s) + z + 1 / 2 * real ?n2 powr - s -\n  EM_remainder 1 f' (int ?n2)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "have \"(\\<lambda>n. (\\<Sum>k=1..n. real k powr -s) - n powr (1 - s) / (1 - s) - z) \\<in>\n          \\<Theta>(\\<lambda>n. 1/2 * n powr -s - EM_remainder 1 f' (int n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        z)\n    \\<in> \\<Theta>(\\<lambda>n.\n                      1 / 2 * real n powr - s - EM_remainder 1 f' (int n))", "using *"], ["proof (prove)\nusing this:\n  1 \\<le> ?n2 \\<Longrightarrow>\n  (\\<Sum>k = 1..?n2. real k powr - s) =\n  real ?n2 powr (1 - s) / (1 - s) + z + 1 / 2 * real ?n2 powr - s -\n  EM_remainder 1 f' (int ?n2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        z)\n    \\<in> \\<Theta>(\\<lambda>n.\n                      1 / 2 * real n powr - s - EM_remainder 1 f' (int n))", "by (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> \\<Theta>(\\<lambda>n.\n                    1 / 2 * real n powr - s - EM_remainder 1 f' (int n))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> \\<Theta>(\\<lambda>n.\n                    1 / 2 * real n powr - s - EM_remainder 1 f' (int n))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "have \"(\\<lambda>n. 1/2 * n powr -s - EM_remainder 1 f' (int n)) \\<in> O(\\<lambda>n. n powr -s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. 1 / 2 * real n powr - s - EM_remainder 1 f' (int n))\n    \\<in> O(\\<lambda>x. real x powr - s)", "proof (intro sum_in_bigo)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. 1 / 2 * real x powr - s)\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>x. EM_remainder 1 f' (int x))\n    \\<in> O(\\<lambda>x. real x powr - s)", "have \"(\\<lambda>x. norm (EM_remainder 1 f' (int x))) \\<in> O(\\<lambda>x. real x powr - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. norm (EM_remainder 1 f' (int x)))\n    \\<in> O(\\<lambda>x. real x powr - s)", "proof (rule EM_remainder_strong_bigo_nat[where a = 1 and Y = \"{}\"])"], ["proof (state)\ngoal (7 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} ?g'\n 5. ((\\<lambda>a. a powr - s) \\<longlongrightarrow> 0) at_top\n 6. \\<And>x. 1 \\<le> x \\<Longrightarrow> norm (f' x) \\<le> ?g' x\n 7. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative - ?g' x) (at x)", "fix x :: real"], ["proof (state)\ngoal (7 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} ?g'\n 5. ((\\<lambda>a. a powr - s) \\<longlongrightarrow> 0) at_top\n 6. \\<And>x. 1 \\<le> x \\<Longrightarrow> norm (f' x) \\<le> ?g' x\n 7. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative - ?g' x) (at x)", "assume \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (7 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} ?g'\n 5. ((\\<lambda>a. a powr - s) \\<longlongrightarrow> 0) at_top\n 6. \\<And>x. 1 \\<le> x \\<Longrightarrow> norm (f' x) \\<le> ?g' x\n 7. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative - ?g' x) (at x)", "show \"norm (f' x) \\<le> s * x powr (-s-1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (f' x) \\<le> s * x powr (- s - 1)", "using s"], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. norm (f' x) \\<le> s * x powr (- s - 1)", "by (simp add: f'_def)"], ["proof (state)\nthis:\n  norm (f' x) \\<le> s * x powr (- s - 1)\n\ngoal (6 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} (\\<lambda>x. s * x powr (- s - 1))\n 5. ((\\<lambda>a. a powr - s) \\<longlongrightarrow> 0) at_top\n 6. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative\n        - (s * x powr (- s - 1)))\n        (at x)", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} (\\<lambda>x. s * x powr (- s - 1))\n 5. ((\\<lambda>a. a powr - s) \\<longlongrightarrow> 0) at_top\n 6. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative\n        - (s * x powr (- s - 1)))\n        (at x)", "from s"], ["proof (chain)\npicking this:\n  0 < s\n  s \\<noteq> 1", "show \"((\\<lambda>x. x powr -s) \\<longlongrightarrow> 0) at_top\""], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. x powr - s) \\<longlongrightarrow> 0) at_top", "by real_asymp"], ["proof (state)\nthis:\n  ((\\<lambda>x. x powr - s) \\<longlongrightarrow> 0) at_top\n\ngoal (5 subgoals):\n 1. finite {}\n 2. continuous_on {1..} f'\n 3. continuous_on {1..} (\\<lambda>a. a powr - s)\n 4. continuous_on {1..} (\\<lambda>x. s * x powr (- s - 1))\n 5. \\<And>x.\n       x \\<in> {1..} - {} \\<Longrightarrow>\n       ((\\<lambda>a. a powr - s) has_real_derivative\n        - (s * x powr (- s - 1)))\n        (at x)", "qed (auto simp: f'_def intro!: continuous_intros derivative_eq_intros)"], ["proof (state)\nthis:\n  (\\<lambda>x. norm (EM_remainder 1 f' (int x)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. 1 / 2 * real x powr - s)\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>x. EM_remainder 1 f' (int x))\n    \\<in> O(\\<lambda>x. real x powr - s)", "thus \"(\\<lambda>x. EM_remainder 1 f' (int x)) \\<in> O(\\<lambda>x. real x powr -s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. norm (EM_remainder 1 f' (int x)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. EM_remainder 1 f' (int x))\n    \\<in> O(\\<lambda>x. real x powr - s)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. EM_remainder 1 f' (int x))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / 2 * real x powr - s)\n    \\<in> O(\\<lambda>x. real x powr - s)", "qed real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>n. 1 / 2 * real n powr - s - EM_remainder 1 f' (int n))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)\n 2. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>x. real x powr - s)", "show \"(\\<lambda>n. (\\<Sum>k=1..n. real k powr -s) - real n powr (1 - s) / (1 - s) - z)\n                  \\<in> O(\\<lambda>x. real x powr -s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        z)\n    \\<in> O(\\<lambda>x. real x powr - s)", "."], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n.\n              real n powr (1 - s) / (1 - s) +\n              Re (zeta (complex_of_real s))) +o\n          O(\\<lambda>x. real x powr - s)", "thus\"(\\<lambda>n. \\<Sum>k=1..n. real k powr -s) =o\n           (\\<lambda>n. real n powr (1 - s) / (1 - s) + z) +o O(\\<lambda>x. real x powr -s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n    \\<in> (\\<lambda>n. real n powr (1 - s) / (1 - s) + z) +o\n          O(\\<lambda>x. real x powr - s)", "by (subst set_minus_plus [symmetric]) (simp_all add: fun_diff_def algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>k = 1..n. real k powr - s)\n  \\<in> (\\<lambda>n. real n powr (1 - s) / (1 - s) + z) +o\n        O(\\<lambda>x. real x powr - s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_tail_bigo:\n  fixes s :: real\n  assumes s: \"s > 1\"\n  shows   \"(\\<lambda>n. Re (hurwitz_zeta (real n + 1) s)) \\<in> O(\\<lambda>x. real x powr (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have [simp]: \"complex_of_real (Re (zeta s)) = zeta s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complex_of_real (Re (zeta (complex_of_real s))) =\n    zeta (complex_of_real s)", "using zeta_real[of s]"], ["proof (prove)\nusing this:\n  zeta (complex_of_real s) \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. complex_of_real (Re (zeta (complex_of_real s))) =\n    zeta (complex_of_real s)", "by (auto elim!: Reals_cases)"], ["proof (state)\nthis:\n  complex_of_real (Re (zeta (complex_of_real s))) = zeta (complex_of_real s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "from s"], ["proof (chain)\npicking this:\n  1 < s", "have s': \"s > 0\" \"s \\<noteq> 1\""], ["proof (prove)\nusing this:\n  1 < s\n\ngoal (1 subgoal):\n 1. 0 < s &&& s \\<noteq> 1", "by auto"], ["proof (state)\nthis:\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>n. -Re (hurwitz_zeta (real n + 1) s) - real n powr (1 - s) / (1 - s)\n              + real n powr (1 - s) / (1 - s))\n          \\<in> O(\\<lambda>x. real x powr (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n        real n powr (1 - s) / (1 - s) +\n        real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "proof (rule sum_in_bigo)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>n. -Re (hurwitz_zeta (real n + 1) s) - real n powr (1 - s) / (1 - s)) =\n            (\\<lambda>n. (\\<Sum>k=1..n. real k powr -s) - real n powr (1 - s) / (1 - s) - Re (zeta s))\"\n      (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n        real n powr (1 - s) / (1 - s)) =\n    (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n       real n powr (1 - s) / (1 - s) =\n       (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n       Re (zeta (complex_of_real s))", "fix n :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n       real n powr (1 - s) / (1 - s) =\n       (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n       Re (zeta (complex_of_real s))", "have \"hurwitz_zeta (1 + real n) s = zeta s - (\\<Sum>k<n. real (Suc k) powr -s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hurwitz_zeta (1 + real n) (complex_of_real s) =\n    zeta (complex_of_real s) -\n    complex_of_real (\\<Sum>k<n. real (Suc k) powr - s)", "by (subst hurwitz_zeta_shift) (use assms in \\<open>auto simp: zeta_def powr_Reals_eq\\<close>)"], ["proof (state)\nthis:\n  hurwitz_zeta (1 + real n) (complex_of_real s) =\n  zeta (complex_of_real s) -\n  complex_of_real (\\<Sum>k<n. real (Suc k) powr - s)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n       real n powr (1 - s) / (1 - s) =\n       (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n       Re (zeta (complex_of_real s))", "also"], ["proof (state)\nthis:\n  hurwitz_zeta (1 + real n) (complex_of_real s) =\n  zeta (complex_of_real s) -\n  complex_of_real (\\<Sum>k<n. real (Suc k) powr - s)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n       real n powr (1 - s) / (1 - s) =\n       (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n       Re (zeta (complex_of_real s))", "have \"(\\<Sum>k<n. real (Suc k) powr -s) = (\\<Sum>k=1..n. real k powr -s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k<n. real (Suc k) powr - s) = (\\<Sum>k = 1..n. real k powr - s)", "by (rule sum.reindex_bij_witness[of _ \"\\<lambda>k. k - 1\" Suc]) auto"], ["proof (state)\nthis:\n  (\\<Sum>k<n. real (Suc k) powr - s) = (\\<Sum>k = 1..n. real k powr - s)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n       real n powr (1 - s) / (1 - s) =\n       (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n       Re (zeta (complex_of_real s))", "finally"], ["proof (chain)\npicking this:\n  hurwitz_zeta (1 + real n) (complex_of_real s) =\n  zeta (complex_of_real s) -\n  complex_of_real (\\<Sum>k = 1..n. real k powr - s)", "show \"?lhs n = ?rhs n\""], ["proof (prove)\nusing this:\n  hurwitz_zeta (1 + real n) (complex_of_real s) =\n  zeta (complex_of_real s) -\n  complex_of_real (\\<Sum>k = 1..n. real k powr - s)\n\ngoal (1 subgoal):\n 1. - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n    real n powr (1 - s) / (1 - s) =\n    (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n    Re (zeta (complex_of_real s))", "by (simp add: add_ac)"], ["proof (state)\nthis:\n  - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n  real n powr (1 - s) / (1 - s) =\n  (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n  Re (zeta (complex_of_real s))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s)) =\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s)) =\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"\\<dots> \\<in> O(\\<lambda>x. real x powr (-s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        Re (zeta (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr - s)", "by (rule zeta_partial_sum_bigo_pos) (use s in auto)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>x. real x powr (-s)) \\<in> O(\\<lambda>x. real x powr (1-s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. real x powr - s) \\<in> O(\\<lambda>x. real x powr (1 - s))", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. real x powr - s) \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        - Re (hurwitz_zeta (real x + 1) (complex_of_real s)) -\n        real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))\n 2. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))", "show \"(\\<lambda>n. -Re (hurwitz_zeta (real n + 1) s) - real n powr (1 - s) / (1 - s)) \\<in> \\<dots>\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n        real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "."], ["proof (state)\nthis:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. real x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "qed (use s in real_asymp)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s) +\n      real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      - Re (hurwitz_zeta (real n + 1) (complex_of_real s)) -\n      real n powr (1 - s) / (1 - s) +\n      real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real n + 1) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_tail_bigo':\n  fixes s :: real\n  assumes s: \"s > 1\"\n  shows   \"(\\<lambda>n. Re (hurwitz_zeta (real n) s)) \\<in> O(\\<lambda>x. real x powr (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>n. Re (hurwitz_zeta (real n) s)) \\<in> \\<Theta>(\\<lambda>n. Re (hurwitz_zeta (real (n - 1) + 1) s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> \\<Theta>(\\<lambda>n.\n                      Re (hurwitz_zeta (real (n - 1) + 1)\n                           (complex_of_real s)))", "by (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]])\n       (auto simp: of_nat_diff)"], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n  \\<in> \\<Theta>(\\<lambda>n.\n                    Re (hurwitz_zeta (real (n - 1) + 1)\n                         (complex_of_real s)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n  \\<in> \\<Theta>(\\<lambda>n.\n                    Re (hurwitz_zeta (real (n - 1) + 1)\n                         (complex_of_real s)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>n. Re (hurwitz_zeta (real (n - 1) + 1) s)) \\<in> O(\\<lambda>x. real (x - 1) powr (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real (n - 1) + 1) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real (x - 1) powr (1 - s))", "by (rule landau_o.big.compose[OF zeta_tail_bigo[OF assms]]) real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real (n - 1) + 1) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real (x - 1) powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real (n - 1) + 1) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real (x - 1) powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "have \"(\\<lambda>x. real (x - 1) powr (1 - s)) \\<in> O(\\<lambda>x. real x powr (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. real (x - 1) powr (1 - s))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. real (x - 1) powr (1 - s))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n    \\<in> O(\\<lambda>x. real x powr (1 - s))", "."], ["proof (state)\nthis:\n  (\\<lambda>n. Re (hurwitz_zeta (real n) (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr (1 - s))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma\n  fixes s :: real\n  assumes s: \"s > 0\"\n  shows   zeta_partial_sum_bigo_neg:\n            \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s) - n powr (1 + s) / (1 + s)) \\<in> O(\\<lambda>n. n powr s)\"\n    and   zeta_partial_sum_bigo_neg':\n            \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s)) =o (\\<lambda>n. n powr (1 + s) / (1 + s)) +o O(\\<lambda>n. n powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s) &&&\n    (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "define F where \"F = (\\<lambda>x. x powr (1 + s) / (1 + s))\""], ["proof (state)\nthis:\n  F = (\\<lambda>x. x powr (1 + s) / (1 + s))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "define f where \"f = (\\<lambda>x. x powr s)\""], ["proof (state)\nthis:\n  f = (\\<lambda>x. x powr s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "define f' where \"f' = (\\<lambda>x. s * x powr (s - 1))\""], ["proof (state)\nthis:\n  f' = (\\<lambda>x. s * x powr (s - 1))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "have \"(\\<Sum>i=1..n. f (real i)) - F n =\n          1 / 2 - F 1 + f n / 2 + EM_remainder' 1 f' 1 (real n)\" if n: \"n \\<ge> 1\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "have \"(\\<Sum>i\\<in>{1<..n}. f (real i)) - integral {real 1..real n} f =\n            (\\<Sum>k<1. (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R (([f, f'] ! k) (real n) -\n                ([f, f'] ! k) (real 1))) + EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{1<..n}. f (real i)) - integral {real 1..real n} f =\n    (\\<Sum>k<1.\n        (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R\n        (([f, f'] ! k) (real n) - ([f, f'] ! k) (real 1))) +\n    EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)", "by (rule euler_maclaurin_strong_raw_nat[where Y = \"{}\"])\n         (use \\<open>s > 0\\<close> \\<open>n \\<ge> 1\\<close> in\n           \\<open>auto intro!: derivative_eq_intros continuous_intros \n                 simp flip: has_field_derivative_iff_has_vector_derivative\n                 simp: F_def f_def f'_def nth_Cons split: nat.splits\\<close>)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{1<..n}. f (real i)) - integral {real 1..real n} f =\n  (\\<Sum>k<1.\n      (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R\n      (([f, f'] ! k) (real n) - ([f, f'] ! k) (real 1))) +\n  EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{1<..n}. f (real i)) - integral {real 1..real n} f =\n  (\\<Sum>k<1.\n      (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R\n      (([f, f'] ! k) (real n) - ([f, f'] ! k) (real 1))) +\n  EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "have \"(\\<Sum>i\\<in>{1<..n}. f (real i)) = (\\<Sum>i\\<in>insert 1 {1<..n}. f (real i)) - f 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{1<..n}. f (real i)) =\n    (\\<Sum>i\\<in>insert 1 {1<..n}. f (real i)) - f 1", "using n"], ["proof (prove)\nusing this:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{1<..n}. f (real i)) =\n    (\\<Sum>i\\<in>insert 1 {1<..n}. f (real i)) - f 1", "by (subst sum.insert) auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{1<..n}. f (real i)) =\n  (\\<Sum>i\\<in>insert 1 {1<..n}. f (real i)) - f 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{1<..n}. f (real i)) =\n  (\\<Sum>i\\<in>insert 1 {1<..n}. f (real i)) - f 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "from n"], ["proof (chain)\npicking this:\n  1 \\<le> n", "have \"insert 1 {1<..n} = {1..n}\""], ["proof (prove)\nusing this:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. insert 1 {1<..n} = {1..n}", "by auto"], ["proof (state)\nthis:\n  insert 1 {1<..n} = {1..n}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i = 1..n. f (real i)) - f 1 - integral {real 1..real n} f =\n  (\\<Sum>k<1.\n      (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R\n      (([f, f'] ! k) (real n) - ([f, f'] ! k) (real 1))) +\n  EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)", "have \"(\\<Sum>i=1..n. f (real i)) - F n = f 1 + (integral {1..real n} f - F n) +\n                    (f (real n) - f 1) / 2 + EM_remainder' 1 f' 1 (real n)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..n. f (real i)) - f 1 - integral {real 1..real n} f =\n  (\\<Sum>k<1.\n      (bernoulli' (Suc k) / fact (Suc k)) *\\<^sub>R\n      (([f, f'] ! k) (real n) - ([f, f'] ! k) (real 1))) +\n  EM_remainder' 1 ([f, f'] ! 1) (real 1) (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    f 1 + (integral {1..real n} f - F (real n)) + (f (real n) - f 1) / 2 +\n    EM_remainder' 1 f' 1 (real n)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  f 1 + (integral {1..real n} f - F (real n)) + (f (real n) - f 1) / 2 +\n  EM_remainder' 1 f' 1 (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "hence \"(\\<Sum>i=1..n. f (real i)) - F n = 1 / 2 + (integral {1..real n} f - F n) +\n              f (real n) / 2 + EM_remainder' 1 f' 1 (real n)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  f 1 + (integral {1..real n} f - F (real n)) + (f (real n) - f 1) / 2 +\n  EM_remainder' 1 f' 1 (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 + (integral {1..real n} f - F (real n)) + f (real n) / 2 +\n    EM_remainder' 1 f' 1 (real n)", "using s"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  f 1 + (integral {1..real n} f - F (real n)) + (f (real n) - f 1) / 2 +\n  EM_remainder' 1 f' 1 (real n)\n  0 < s\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 + (integral {1..real n} f - F (real n)) + f (real n) / 2 +\n    EM_remainder' 1 f' 1 (real n)", "by (simp add: f_def diff_divide_distrib)"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  1 / 2 + (integral {1..real n} f - F (real n)) + f (real n) / 2 +\n  EM_remainder' 1 f' 1 (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  1 / 2 + (integral {1..real n} f - F (real n)) + f (real n) / 2 +\n  EM_remainder' 1 f' 1 (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "have \"(f has_integral (F (real n) - F 1)) {1..real n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f has_integral F (real n) - F 1) {1..real n}", "using assms n"], ["proof (prove)\nusing this:\n  0 < s\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (f has_integral F (real n) - F 1) {1..real n}", "by (intro fundamental_theorem_of_calculus)\n         (auto simp flip: has_field_derivative_iff_has_vector_derivative simp: F_def f_def\n               intro!: derivative_eq_intros continuous_intros)"], ["proof (state)\nthis:\n  (f has_integral F (real n) - F 1) {1..real n}\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "hence \"integral {1..real n} f - F n = - F 1\""], ["proof (prove)\nusing this:\n  (f has_integral F (real n) - F 1) {1..real n}\n\ngoal (1 subgoal):\n 1. integral {1..real n} f - F (real n) = - F 1", "by (simp add: has_integral_iff)"], ["proof (state)\nthis:\n  integral {1..real n} f - F (real n) = - F 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "also"], ["proof (state)\nthis:\n  integral {1..real n} f - F (real n) = - F 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "have \"1 / 2 + (-F 1) + f (real n) / 2 = 1 / 2 - F 1 + f n / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / 2 + - F 1 + f (real n) / 2 = 1 / 2 - F 1 + f (real n) / 2", "by simp"], ["proof (state)\nthis:\n  1 / 2 + - F 1 + f (real n) / 2 = 1 / 2 - F 1 + f (real n) / 2\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n    1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)", "."], ["proof (state)\nthis:\n  (\\<Sum>i = 1..n. f (real i)) - F (real n) =\n  1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> ?n \\<Longrightarrow>\n  (\\<Sum>i = 1..?n. f (real i)) - F (real ?n) =\n  1 / 2 - F 1 + f (real ?n) / 2 + EM_remainder' 1 f' 1 (real ?n)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "hence \"(\\<lambda>n. (\\<Sum>i=1..n. f (real i)) - F n) \\<in>\n           \\<Theta>(\\<lambda>n. 1 / 2 - F 1 + f n / 2 + EM_remainder' 1 f' 1 (real n))\""], ["proof (prove)\nusing this:\n  1 \\<le> ?n \\<Longrightarrow>\n  (\\<Sum>i = 1..?n. f (real i)) - F (real ?n) =\n  1 / 2 - F 1 + f (real ?n) / 2 + EM_remainder' 1 f' 1 (real ?n)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. (\\<Sum>i = 1..n. f (real i)) - F (real n))\n    \\<in> \\<Theta>(\\<lambda>n.\n                      1 / 2 - F 1 + f (real n) / 2 +\n                      EM_remainder' 1 f' 1 (real n))", "by (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]])"], ["proof (state)\nthis:\n  (\\<lambda>n. (\\<Sum>i = 1..n. f (real i)) - F (real n))\n  \\<in> \\<Theta>(\\<lambda>n.\n                    1 / 2 - F 1 + f (real n) / 2 +\n                    EM_remainder' 1 f' 1 (real n))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "also"], ["proof (state)\nthis:\n  (\\<lambda>n. (\\<Sum>i = 1..n. f (real i)) - F (real n))\n  \\<in> \\<Theta>(\\<lambda>n.\n                    1 / 2 - F 1 + f (real n) / 2 +\n                    EM_remainder' 1 f' 1 (real n))\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "have \"(\\<lambda>n. 1 / 2 - F 1 + f n / 2 + EM_remainder' 1 f' 1 (real n))\n               \\<in> O(\\<lambda>n. real n powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n))\n    \\<in> O(\\<lambda>n. real n powr s)", "unfolding F_def f_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        1 / 2 - 1 powr (1 + s) / (1 + s) + real n powr s / 2 +\n        EM_remainder' 1 f' 1 (real n))\n    \\<in> O(\\<lambda>n. real n powr s)", "proof (intro sum_in_bigo)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. 1 / 2) \\<in> O(\\<lambda>n. real n powr s)\n 2. (\\<lambda>x. 1 powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 3. (\\<lambda>x. real x powr s / 2) \\<in> O(\\<lambda>n. real n powr s)\n 4. (\\<lambda>x. EM_remainder' 1 f' 1 (real x))\n    \\<in> O(\\<lambda>n. real n powr s)", "have \"(\\<lambda>x. integral {1..real x} (\\<lambda>t. pbernpoly 1 t *\\<^sub>R f' t)) \\<in> O(\\<lambda>n. 1 / s * real n powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        integral {1..real x} (\\<lambda>t. pbernpoly 1 t *\\<^sub>R f' t))\n    \\<in> O(\\<lambda>n. 1 / s * real n powr s)", "proof (intro landau_o.big.compose[OF integral_bigo])"], ["proof (state)\ngoal (7 subgoals):\n 1. (\\<lambda>a. pbernpoly 1 a *\\<^sub>R f' a) \\<in> O(?g'1)\n 2. LIM a at_top. 1 / s * a powr s :> at_top\n 3. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 4. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative ?g'1 x)\n        (at x within {1..})\n 5. continuous_on {1..} ?g'1\n 6. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> ?g'1 x\n 7. filterlim real at_top sequentially", "have \"(\\<lambda>x. pbernpoly 1 x * f' x) \\<in> O(\\<lambda>x. 1 * x powr (s - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. pbernpoly 1 x * f' x)\n    \\<in> O(\\<lambda>x. 1 * x powr (s - 1))", "by (intro landau_o.big.mult pbernpoly_bigo) (auto simp: f'_def)"], ["proof (state)\nthis:\n  (\\<lambda>x. pbernpoly 1 x * f' x) \\<in> O(\\<lambda>x. 1 * x powr (s - 1))\n\ngoal (7 subgoals):\n 1. (\\<lambda>a. pbernpoly 1 a *\\<^sub>R f' a) \\<in> O(?g'1)\n 2. LIM a at_top. 1 / s * a powr s :> at_top\n 3. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 4. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative ?g'1 x)\n        (at x within {1..})\n 5. continuous_on {1..} ?g'1\n 6. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> ?g'1 x\n 7. filterlim real at_top sequentially", "thus \"(\\<lambda>x. pbernpoly 1 x *\\<^sub>R f' x) \\<in> O(\\<lambda>x. x powr (s - 1))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. pbernpoly 1 x * f' x) \\<in> O(\\<lambda>x. 1 * x powr (s - 1))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. pbernpoly 1 x *\\<^sub>R f' x)\n    \\<in> O(\\<lambda>x. x powr (s - 1))", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. pbernpoly 1 x *\\<^sub>R f' x)\n  \\<in> O(\\<lambda>x. x powr (s - 1))\n\ngoal (6 subgoals):\n 1. LIM a at_top. 1 / s * a powr s :> at_top\n 2. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 3. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 4. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 5. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 6. filterlim real at_top sequentially", "from s"], ["proof (chain)\npicking this:\n  0 < s", "show \"filterlim (\\<lambda>a. 1 / s * a powr s) at_top at_top\""], ["proof (prove)\nusing this:\n  0 < s\n\ngoal (1 subgoal):\n 1. LIM a at_top. 1 / s * a powr s :> at_top", "by real_asymp"], ["proof (state)\nthis:\n  LIM a at_top. 1 / s * a powr s :> at_top\n\ngoal (5 subgoals):\n 1. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 2. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 3. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 5. filterlim real at_top sequentially", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 2. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 3. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 5. filterlim real at_top sequentially", "fix a' x :: real"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 2. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 3. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 5. filterlim real at_top sequentially", "assume \"a' \\<ge> 1\" \"a' \\<le> x\""], ["proof (state)\nthis:\n  1 \\<le> a'\n  a' \\<le> x\n\ngoal (5 subgoals):\n 1. \\<And>a' x.\n       \\<lbrakk>1 \\<le> a'; a' \\<le> x\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>a.\n                             pbernpoly 1 a *\\<^sub>R f' a) integrable_on\n                         {a'..x}\n 2. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 3. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 5. filterlim real at_top sequentially", "thus \"(\\<lambda>a. pbernpoly 1 a *\\<^sub>R f' a) integrable_on {a'..x}\""], ["proof (prove)\nusing this:\n  1 \\<le> a'\n  a' \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<lambda>a. pbernpoly 1 a *\\<^sub>R f' a) integrable_on {a'..x}", "by (intro integrable_EM_remainder') (auto intro!: continuous_intros simp: f'_def)"], ["proof (state)\nthis:\n  (\\<lambda>a. pbernpoly 1 a *\\<^sub>R f' a) integrable_on {a'..x}\n\ngoal (4 subgoals):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       ((\\<lambda>a. 1 / s * a powr s) has_real_derivative x powr (s - 1))\n        (at x within {1..})\n 2. continuous_on {1..} (\\<lambda>x. x powr (s - 1))\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 \\<le> x powr (s - 1)\n 4. filterlim real at_top sequentially", "qed (use s in \\<open>auto intro!: filterlim_real_sequentially continuous_intros derivative_eq_intros\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      integral {1..real x} (\\<lambda>t. pbernpoly 1 t *\\<^sub>R f' t))\n  \\<in> O(\\<lambda>n. 1 / s * real n powr s)\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. 1 / 2) \\<in> O(\\<lambda>n. real n powr s)\n 2. (\\<lambda>x. 1 powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 3. (\\<lambda>x. real x powr s / 2) \\<in> O(\\<lambda>n. real n powr s)\n 4. (\\<lambda>x. EM_remainder' 1 f' 1 (real x))\n    \\<in> O(\\<lambda>n. real n powr s)", "thus \"(\\<lambda>x. EM_remainder' 1 f' 1 (real x)) \\<in> O(\\<lambda>n. real n powr s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      integral {1..real x} (\\<lambda>t. pbernpoly 1 t *\\<^sub>R f' t))\n  \\<in> O(\\<lambda>n. 1 / s * real n powr s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. EM_remainder' 1 f' 1 (real x))\n    \\<in> O(\\<lambda>n. real n powr s)", "using \\<open>s > 0\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      integral {1..real x} (\\<lambda>t. pbernpoly 1 t *\\<^sub>R f' t))\n  \\<in> O(\\<lambda>n. 1 / s * real n powr s)\n  0 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. EM_remainder' 1 f' 1 (real x))\n    \\<in> O(\\<lambda>n. real n powr s)", "by (simp add: EM_remainder'_def)"], ["proof (state)\nthis:\n  (\\<lambda>x. EM_remainder' 1 f' 1 (real x))\n  \\<in> O(\\<lambda>n. real n powr s)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. 1 / 2) \\<in> O(\\<lambda>n. real n powr s)\n 2. (\\<lambda>x. 1 powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 3. (\\<lambda>x. real x powr s / 2) \\<in> O(\\<lambda>n. real n powr s)", "qed (use \\<open>s > 0\\<close> in real_asymp)+"], ["proof (state)\nthis:\n  (\\<lambda>n. 1 / 2 - F 1 + f (real n) / 2 + EM_remainder' 1 f' 1 (real n))\n  \\<in> O(\\<lambda>n. real n powr s)\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)\n 2. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n. (\\<Sum>i = 1..n. f (real i)) - F (real n))\n  \\<in> O(\\<lambda>n. real n powr s)", "show \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s) - n powr (1 + s) / (1 + s)) \\<in> O(\\<lambda>n. n powr s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. (\\<Sum>i = 1..n. f (real i)) - F (real n))\n  \\<in> O(\\<lambda>n. real n powr s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. real x powr s)", "by (simp add: f_def F_def)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>x. real x powr s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "thus \"(\\<lambda>n. (\\<Sum>i=1..n. real i powr s)) =o (\\<lambda>n. n powr (1 + s) / (1 + s)) +o O(\\<lambda>n. n powr s)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>x. real x powr s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n    \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n          O(\\<lambda>x. real x powr s)", "by (subst set_minus_plus [symmetric]) (simp_all add: fun_diff_def algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n. \\<Sum>i = 1..n. real i powr s)\n  \\<in> (\\<lambda>x. real x powr (1 + s) / (1 + s)) +o\n        O(\\<lambda>x. real x powr s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_le_pos:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  defines \"z \\<equiv> Re (zeta (complex_of_real s))\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x - (x powr (1-s) / (1-s) + z)\\<bar> \\<le> c * x powr -s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                (x powr (1 - s) / (1 - s) + z)\\<bar>\n          \\<le> c * x powr - s", "proof (rule sum_upto_asymptotics_lift_nat_real)"], ["proof (state)\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) + z -\n        (real (Suc n) powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)\n 3. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n 6. mono_on (\\<lambda>x. x powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "show \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr - s) - (real n powr (1 - s) / (1 - s) + z))\n          \\<in> O(\\<lambda>n. real n powr - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)", "using zeta_partial_sum_bigo_pos[OF assms(1,2)]"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)", "unfolding z_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + Re (zeta (complex_of_real s))))\n    \\<in> O(\\<lambda>n. real n powr - s)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) -\n      (real n powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. real n powr - s)\n\ngoal (5 subgoals):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) + z -\n        (real (Suc n) powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)\n 2. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 4. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n 5. mono_on (\\<lambda>x. x powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "from assms"], ["proof (chain)\npicking this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))", "have \"s < 1 \\<or> s > 1\""], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. s < 1 \\<or> 1 < s", "by linarith"], ["proof (state)\nthis:\n  s < 1 \\<or> 1 < s\n\ngoal (5 subgoals):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) + z -\n        (real (Suc n) powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)\n 2. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 4. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n 5. mono_on (\\<lambda>x. x powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "thus \"(\\<lambda>n. real n powr (1 - s) / (1 - s) + z - (real (Suc n) powr (1 - s) / (1 - s) + z))\n          \\<in> O(\\<lambda>n. real n powr - s)\""], ["proof (prove)\nusing this:\n  s < 1 \\<or> 1 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) + z -\n        (real (Suc n) powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)", "by standard (use \\<open>s > 0\\<close> in \\<open>real_asymp+\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real n powr (1 - s) / (1 - s) + z -\n      (real (Suc n) powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. real n powr - s)\n\ngoal (4 subgoals):\n 1. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 3. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n 4. mono_on (\\<lambda>x. x powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "show \"(\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. real (Suc n) powr - s)\n\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 2. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n 3. mono_on (\\<lambda>x. x powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "show \"mono_on (\\<lambda>a. a powr - s) {1..} \\<or> mono_on (\\<lambda>x. - (x powr - s)) {1..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr - s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr - s)) {1..}", "by (intro disjI2) (auto intro!: mono_onI powr_mono2')"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr - s) {1..} \\<or>\n  mono_on (\\<lambda>x. - (x powr - s)) {1..}\n\ngoal (2 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 2. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}", "from assms"], ["proof (chain)\npicking this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))", "have \"s < 1 \\<or> s > 1\""], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. s < 1 \\<or> 1 < s", "by linarith"], ["proof (state)\nthis:\n  s < 1 \\<or> 1 < s\n\ngoal (2 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 2. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}", "hence \"mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\""], ["proof (prove)\nusing this:\n  s < 1 \\<or> 1 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. s < 1 \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n 2. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "assume \"s < 1\""], ["proof (state)\nthis:\n  s < 1\n\ngoal (2 subgoals):\n 1. s < 1 \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n 2. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "thus ?thesis"], ["proof (prove)\nusing this:\n  s < 1\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "using \\<open>s > 0\\<close>"], ["proof (prove)\nusing this:\n  s < 1\n  0 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "by (intro mono_onI powr_mono2 divide_right_mono add_right_mono) auto"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "assume \"s > 1\""], ["proof (state)\nthis:\n  1 < s\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "thus ?thesis"], ["proof (prove)\nusing this:\n  1 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}", "by (intro mono_onI le_imp_neg_le add_right_mono divide_right_mono_neg powr_mono2') auto"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n\ngoal (2 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s\n 2. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}", "thus \"mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..} \\<or>\n        mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\""], ["proof (prove)\nusing this:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..}\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}", "by blast"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s) + z) {1..} \\<or>\n  mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s) + z)) {1..}\n\ngoal (1 subgoal):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr - s", "qed auto"], ["", "lemma zeta_partial_sum_le_pos':\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  defines \"z \\<equiv> Re (zeta (complex_of_real s))\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x - x powr (1-s) / (1-s)\\<bar> \\<le> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                x powr (1 - s) / (1 - s)\\<bar>\n          \\<le> c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                x powr (1 - s) / (1 - s)\\<bar>\n          \\<le> c", "have \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x - x powr (1-s) / (1-s)\\<bar> \\<le> c * 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                x powr (1 - s) / (1 - s)\\<bar>\n          \\<le> c * 1", "proof (rule sum_upto_asymptotics_lift_nat_real)"], ["proof (state)\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "have \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr - s) - (real n powr (1 - s) / (1 - s) + z))\n            \\<in> O(\\<lambda>n. real n powr - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)", "using zeta_partial_sum_bigo_pos[OF assms(1,2)]"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + z))\n    \\<in> O(\\<lambda>n. real n powr - s)", "unfolding z_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      Re (zeta (complex_of_real s)))\n  \\<in> O(\\<lambda>x. real x powr - s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) -\n        (real n powr (1 - s) / (1 - s) + Re (zeta (complex_of_real s))))\n    \\<in> O(\\<lambda>n. real n powr - s)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) -\n      (real n powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. real n powr - s)\n\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) -\n      (real n powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. real n powr - s)\n\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "have \"(\\<lambda>n. real n powr -s) \\<in> O(\\<lambda>n. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. 1)", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. real n powr - s) \\<in> O(\\<lambda>n. 1)\n\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) -\n      (real n powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. 1)", "have \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n                     \\<in> O(\\<lambda>n. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) -\n      (real n powr (1 - s) / (1 - s) + z))\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        z)\n    \\<in> O(\\<lambda>n. 1)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "hence \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z + z) \\<in> O(\\<lambda>n. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) - z)\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n        z +\n        z)\n    \\<in> O(\\<lambda>n. 1)", "by (rule sum_in_bigo) auto"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      z +\n      z)\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 3. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 5. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 6. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "thus \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr - s) - (real n powr (1 - s) / (1 - s))) \\<in> O(\\<lambda>n. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s) -\n      z +\n      z)\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr - s) - real n powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (5 subgoals):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 4. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 5. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "from assms"], ["proof (chain)\npicking this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))", "have \"s < 1 \\<or> s > 1\""], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. s < 1 \\<or> 1 < s", "by linarith"], ["proof (state)\nthis:\n  s < 1 \\<or> 1 < s\n\ngoal (5 subgoals):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)\n 2. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 4. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 5. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "thus \"(\\<lambda>n. real n powr (1 - s) / (1 - s) - (real (Suc n) powr (1 - s) / (1 - s))) \\<in> O(\\<lambda>n. 1)\""], ["proof (prove)\nusing this:\n  s < 1 \\<or> 1 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>n. 1)", "by standard (use \\<open>s > 0\\<close> in \\<open>real_asymp+\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real n powr (1 - s) / (1 - s) - real (Suc n) powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>n. 1)\n\ngoal (4 subgoals):\n 1. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 3. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n 4. mono_on (\\<lambda>x. 1) {1..} \\<or> mono_on (\\<lambda>x. - 1) {1..}", "show \"mono_on (\\<lambda>a. 1) {1..} \\<or> mono_on (\\<lambda>x::real. -1 :: real) {1..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. 1::'b) {1::'a..} \\<or>\n    mono_on (\\<lambda>x. - 1) {1..}", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. 1::'b) {1::'a..} \\<or>\n    mono_on (\\<lambda>x. - 1) {1..}", "by (intro disjI2) (auto intro!: mono_onI powr_mono2')"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. 1::?'b1) {1::?'a1..} \\<or>\n  mono_on (\\<lambda>x. - 1) {1..}\n\ngoal (3 subgoals):\n 1. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 3. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}", "from assms"], ["proof (chain)\npicking this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))", "have \"s < 1 \\<or> s > 1\""], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n  z \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. s < 1 \\<or> 1 < s", "by linarith"], ["proof (state)\nthis:\n  s < 1 \\<or> 1 < s\n\ngoal (3 subgoals):\n 1. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 3. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}", "hence \"mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\""], ["proof (prove)\nusing this:\n  s < 1 \\<or> 1 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. s < 1 \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n 2. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "assume \"s < 1\""], ["proof (state)\nthis:\n  s < 1\n\ngoal (2 subgoals):\n 1. s < 1 \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n 2. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "thus ?thesis"], ["proof (prove)\nusing this:\n  s < 1\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "using \\<open>s > 0\\<close>"], ["proof (prove)\nusing this:\n  s < 1\n  0 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "by (intro mono_onI powr_mono2 divide_right_mono add_right_mono) auto"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "assume \"s > 1\""], ["proof (state)\nthis:\n  1 < s\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "thus ?thesis"], ["proof (prove)\nusing this:\n  1 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}", "by (intro mono_onI le_imp_neg_le add_right_mono divide_right_mono_neg powr_mono2') auto"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n\ngoal (3 subgoals):\n 1. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1\n 3. mono_on (\\<lambda>x. x powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}", "thus \"mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..} \\<or>\n          mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\""], ["proof (prove)\nusing this:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..}\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}", "by blast"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 - s) / (1 - s)) {1..} \\<or>\n  mono_on (\\<lambda>x. - (x powr (1 - s) / (1 - s))) {1..}\n\ngoal (2 subgoals):\n 1. (\\<lambda>n. 1) \\<in> O(\\<lambda>n. 1)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < 1", "qed auto"], ["proof (state)\nthis:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n              x powr (1 - s) / (1 - s)\\<bar>\n        \\<le> c * 1\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                x powr (1 - s) / (1 - s)\\<bar>\n          \\<le> c", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n              x powr (1 - s) / (1 - s)\\<bar>\n        \\<le> c * 1\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                x powr (1 - s) / (1 - s)\\<bar>\n          \\<le> c", "by simp"], ["proof (state)\nthis:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n              x powr (1 - s) / (1 - s)\\<bar>\n        \\<le> c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_le_pos'':\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x\\<bar> \\<le> c * x powr max 0 (1 - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "from zeta_partial_sum_le_pos'[OF assms]"], ["proof (chain)\npicking this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n              x powr (1 - s) / (1 - s)\\<bar>\n        \\<le> c", "obtain c where\n    c: \"c > 0\" \"\\<And>x. x \\<ge> 1 \\<Longrightarrow> \\<bar>sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s)\\<bar> \\<le> c\""], ["proof (prove)\nusing this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n              x powr (1 - s) / (1 - s)\\<bar>\n        \\<le> c\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>0 < c;\n         \\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                  x powr (1 - s) / (1 - s)\\<bar>\n            \\<le> c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < c\n  1 \\<le> ?x \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x -\n        ?x powr (1 - s) / (1 - s)\\<bar>\n  \\<le> c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "{"], ["proof (state)\nthis:\n  0 < c\n  1 \\<le> ?x \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x -\n        ?x powr (1 - s) / (1 - s)\\<bar>\n  \\<le> c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "assume x: \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"\\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar> \\<le> \\<bar>x powr (1 - s) / (1 - s)\\<bar> + c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n    \\<le> \\<bar>x powr (1 - s) / (1 - s)\\<bar> + c", "using c(1) c(2)[OF x] x"], ["proof (prove)\nusing this:\n  0 < c\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n        x powr (1 - s) / (1 - s)\\<bar>\n  \\<le> c\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n    \\<le> \\<bar>x powr (1 - s) / (1 - s)\\<bar> + c", "by linarith"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n  \\<le> \\<bar>x powr (1 - s) / (1 - s)\\<bar> + c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n  \\<le> \\<bar>x powr (1 - s) / (1 - s)\\<bar> + c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"\\<bar>x powr (1 - s) / (1 - s)\\<bar> = x powr (1 - s) / \\<bar>1 - s\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x powr (1 - s) / (1 - s)\\<bar> =\n    x powr (1 - s) / \\<bar>1 - s\\<bar>", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<bar>x powr (1 - s) / (1 - s)\\<bar> =\n    x powr (1 - s) / \\<bar>1 - s\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>x powr (1 - s) / (1 - s)\\<bar> = x powr (1 - s) / \\<bar>1 - s\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "also"], ["proof (state)\nthis:\n  \\<bar>x powr (1 - s) / (1 - s)\\<bar> = x powr (1 - s) / \\<bar>1 - s\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"\\<dots> \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x powr (1 - s) / \\<bar>1 - s\\<bar>\n    \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar>", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. x powr (1 - s) / \\<bar>1 - s\\<bar>\n    \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar>", "by (intro divide_right_mono powr_mono) auto"], ["proof (state)\nthis:\n  x powr (1 - s) / \\<bar>1 - s\\<bar>\n  \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "also"], ["proof (state)\nthis:\n  x powr (1 - s) / \\<bar>1 - s\\<bar>\n  \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar>\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"c = c * x powr 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c = c * x powr 0", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. c = c * x powr 0", "by simp"], ["proof (state)\nthis:\n  c = c * x powr 0\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "also"], ["proof (state)\nthis:\n  c = c * x powr 0\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"c * x powr 0 \\<le> c * x powr max 0 (1 - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * x powr 0 \\<le> c * x powr max 0 (1 - s)", "using c(1) x"], ["proof (prove)\nusing this:\n  0 < c\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. c * x powr 0 \\<le> c * x powr max 0 (1 - s)", "by (intro mult_left_mono powr_mono) auto"], ["proof (state)\nthis:\n  c * x powr 0 \\<le> c * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "also"], ["proof (state)\nthis:\n  c * x powr 0 \\<le> c * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + c * x powr max 0 (1 - s) =\n                 (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + c * x powr max 0 (1 - s) =\n    (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + c * x powr max 0 (1 - s) =\n  (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y. x \\<le> y \\<Longrightarrow> x + c \\<le> y + c;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + xa\n      \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n                    \\<le> (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)", "have \"\\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar> \\<le> (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y. x \\<le> y \\<Longrightarrow> x + c \\<le> y + c;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + xa\n      \\<le> x powr max 0 (1 - s) / \\<bar>1 - s\\<bar> + y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n                    \\<le> (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n    \\<le> (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)", "by simp"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n  \\<le> (1 / \\<bar>1 - s\\<bar> + c) * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "}"], ["proof (state)\nthis:\n  1 \\<le> ?x2 \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x2\\<bar>\n  \\<le> (1 / \\<bar>1 - s\\<bar> + c) * ?x2 powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "moreover"], ["proof (state)\nthis:\n  1 \\<le> ?x2 \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x2\\<bar>\n  \\<le> (1 / \\<bar>1 - s\\<bar> + c) * ?x2 powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "have \"(1 / \\<bar>1 - s\\<bar> + c) > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1 / \\<bar>1 - s\\<bar> + c", "using c assms"], ["proof (prove)\nusing this:\n  0 < c\n  1 \\<le> ?x \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x -\n        ?x powr (1 - s) / (1 - s)\\<bar>\n  \\<le> c\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. 0 < 1 / \\<bar>1 - s\\<bar> + c", "by (intro add_pos_pos divide_pos_pos) auto"], ["proof (state)\nthis:\n  0 < 1 / \\<bar>1 - s\\<bar> + c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "ultimately"], ["proof (chain)\npicking this:\n  1 \\<le> ?x2 \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x2\\<bar>\n  \\<le> (1 / \\<bar>1 - s\\<bar> + c) * ?x2 powr max 0 (1 - s)\n  0 < 1 / \\<bar>1 - s\\<bar> + c", "show ?thesis"], ["proof (prove)\nusing this:\n  1 \\<le> ?x2 \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. real x powr - s) ?x2\\<bar>\n  \\<le> (1 / \\<bar>1 - s\\<bar> + c) * ?x2 powr max 0 (1 - s)\n  0 < 1 / \\<bar>1 - s\\<bar> + c\n\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n          \\<le> c * x powr max 0 (1 - s)", "by blast"], ["proof (state)\nthis:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n        \\<le> c * x powr max 0 (1 - s)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_le_pos_bigo:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"(\\<lambda>x. sum_upto (\\<lambda>n. n powr -s) x) \\<in> O(\\<lambda>x. x powr max 0 (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> O(\\<lambda>x. x powr max 0 (1 - s))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> O(\\<lambda>x. x powr max 0 (1 - s))", "from zeta_partial_sum_le_pos''[OF assms]"], ["proof (chain)\npicking this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n        \\<le> c * x powr max 0 (1 - s)", "obtain c\n    where \"\\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr -s) x\\<bar> \\<le> c * x powr max 0 (1 - s)\""], ["proof (prove)\nusing this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>n. real n powr - s) x\\<bar>\n        \\<le> c * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<forall>x\\<ge>1.\n           \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n           \\<le> c * x powr max 0 (1 - s) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n     \\<le> c * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> O(\\<lambda>x. x powr max 0 (1 - s))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x\\<bar>\n     \\<le> c * x powr max 0 (1 - s)\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> O(\\<lambda>x. x powr max 0 (1 - s))", "by (intro bigoI[of _ c] eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - s)\n  \\<in> O(\\<lambda>x. x powr max 0 (1 - s))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_01_asymp_equiv:\n  assumes \"s \\<in> {0<..<1}\"\n  shows \"sum_upto (\\<lambda>n. n powr -s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "from zeta_partial_sum_le_pos'[of s] assms"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < s; s \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                                x powr (1 - s) / (1 - s)\\<bar>\n                          \\<le> c\n  s \\<in> {0<..<1}", "obtain c where\n    c: \"c > 0\" \"\\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>x. real x powr -s) x - x powr (1 - s) / (1 - s)\\<bar> \\<le> c\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < s; s \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                                x powr (1 - s) / (1 - s)\\<bar>\n                          \\<le> c\n  s \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>0 < c;\n         \\<forall>x\\<ge>1.\n            \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                  x powr (1 - s) / (1 - s)\\<bar>\n            \\<le> c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n           x powr (1 - s) / (1 - s)\\<bar>\n     \\<le> c\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "hence \"(\\<lambda>x. sum_upto (\\<lambda>x. real x powr -s) x - x powr (1 - s) / (1 - s)) \\<in> O(\\<lambda>_. 1)\""], ["proof (prove)\nusing this:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n           x powr (1 - s) / (1 - s)\\<bar>\n     \\<le> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>_. 1)", "by (intro bigoI[of _ c] eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "have \"(\\<lambda>_. 1) \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>_. 1) \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))", "using assms"], ["proof (prove)\nusing this:\n  s \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. (\\<lambda>_. 1) \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>_. 1) \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>x. x powr (1 - s) / (1 - s))\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))", "by (rule smallo_imp_asymp_equiv)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       real n powr\n       - s) \\<sim>[at_top] (\\<lambda>x. x powr (1 - s) / (1 - s))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_gt_1_asymp_equiv:\n  assumes \"s > 1\"\n  defines \"\\<zeta> \\<equiv> Re (zeta s)\"\n  shows \"sum_upto (\\<lambda>n. n powr -s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "have [simp]: \"\\<zeta> \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<zeta> \\<noteq> 0", "using assms zeta_Re_gt_1_nonzero[of s] zeta_real[of s]"], ["proof (prove)\nusing this:\n  1 < s\n  \\<zeta> \\<equiv> Re (zeta (complex_of_real s))\n  1 < Re (complex_of_real s) \\<Longrightarrow>\n  zeta (complex_of_real s) \\<noteq> 0\n  zeta (complex_of_real s) \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. \\<zeta> \\<noteq> 0", "by (auto elim!: Reals_cases)"], ["proof (state)\nthis:\n  \\<zeta> \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "from zeta_partial_sum_le_pos[of s] assms"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < s; s \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                                (x powr (1 - s) / (1 - s) +\n                                 Re (zeta (complex_of_real s)))\\<bar>\n                          \\<le> c * x powr - s\n  1 < s\n  \\<zeta> \\<equiv> Re (zeta (complex_of_real s))", "obtain c where\n    c: \"c > 0\" \"\\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>x. real x powr -s) x - (x powr (1 - s) / (1 - s) + \\<zeta>)\\<bar> \\<le>\n                        c * x powr -s\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < s; s \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                                (x powr (1 - s) / (1 - s) +\n                                 Re (zeta (complex_of_real s)))\\<bar>\n                          \\<le> c * x powr - s\n  1 < s\n  \\<zeta> \\<equiv> Re (zeta (complex_of_real s))\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>0 < c;\n         \\<forall>x\\<ge>1.\n            \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n                  (x powr (1 - s) / (1 - s) + \\<zeta>)\\<bar>\n            \\<le> c * x powr - s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: \\<zeta>_def)"], ["proof (state)\nthis:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n           (x powr (1 - s) / (1 - s) + \\<zeta>)\\<bar>\n     \\<le> c * x powr - s\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "hence \"(\\<lambda>x. sum_upto (\\<lambda>x. real x powr -s) x - \\<zeta> - x powr (1 - s) / (1 - s)) \\<in> O(\\<lambda>x. x powr -s)\""], ["proof (prove)\nusing this:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr - s) x -\n           (x powr (1 - s) / (1 - s) + \\<zeta>)\\<bar>\n     \\<le> c * x powr - s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n        x powr (1 - s) / (1 - s))\n    \\<in> O(\\<lambda>x. x powr - s)", "by (intro bigoI[of _ c] eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. x powr - s)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s))\n  \\<in> O(\\<lambda>x. x powr - s)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "have \"(\\<lambda>x. x powr -s) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x powr - s) \\<in> o(\\<lambda>_. 1)", "using \\<open>s > 1\\<close>"], ["proof (prove)\nusing this:\n  1 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x powr - s) \\<in> o(\\<lambda>_. 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. x powr - s) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>_. 1)", "have \"(\\<lambda>x. sum_upto (\\<lambda>x. real x powr -s) x - \\<zeta> - x powr (1 - s) / (1 - s) +\n             x powr (1 - s) / (1 - s)) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n        x powr (1 - s) / (1 - s) +\n        x powr (1 - s) / (1 - s))\n    \\<in> o(\\<lambda>_. 1)", "by (rule sum_in_smallo) (use \\<open>s > 1\\<close> in real_asymp)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s) +\n      x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr - s) x - \\<zeta> -\n      x powr (1 - s) / (1 - s) +\n      x powr (1 - s) / (1 - s))\n  \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)", "by (simp add: smallo_imp_asymp_equiv)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n. real n powr - s) \\<sim>[at_top] (\\<lambda>x. \\<zeta>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_pos_bigtheta:\n  assumes \"s > 0\" \"s \\<noteq> 1\"\n  shows   \"sum_upto (\\<lambda>n. n powr -s) \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "proof (cases \"s > 1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\n 2. \\<not> 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "case False"], ["proof (state)\nthis:\n  \\<not> 1 < s\n\ngoal (2 subgoals):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\n 2. \\<not> 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> 1 < s\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "using asymp_equiv_imp_bigtheta[OF zeta_partial_sum_01_asymp_equiv[of s]] assms"], ["proof (prove)\nusing this:\n  \\<not> 1 < s\n  s \\<in> {0<..<1} \\<Longrightarrow>\n  sum_upto (\\<lambda>n. real n powr - s)\n  \\<in> \\<Theta>(\\<lambda>x. x powr (1 - s) / (1 - s))\n  0 < s\n  s \\<noteq> 1\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "by (simp add: max_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - s)\n  \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "case True"], ["proof (state)\nthis:\n  1 < s\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "have [simp]: \"Re (zeta s) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Re (zeta (complex_of_real s)) \\<noteq> 0", "using True zeta_Re_gt_1_nonzero[of s] zeta_real[of s]"], ["proof (prove)\nusing this:\n  1 < s\n  1 < Re (complex_of_real s) \\<Longrightarrow>\n  zeta (complex_of_real s) \\<noteq> 0\n  zeta (complex_of_real s) \\<in> \\<real>\n\ngoal (1 subgoal):\n 1. Re (zeta (complex_of_real s)) \\<noteq> 0", "by (auto elim!: Reals_cases)"], ["proof (state)\nthis:\n  Re (zeta (complex_of_real s)) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 < s \\<Longrightarrow>\n    sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "using True asymp_equiv_imp_bigtheta[OF zeta_partial_sum_gt_1_asymp_equiv[of s]]"], ["proof (prove)\nusing this:\n  1 < s\n  1 < s \\<Longrightarrow>\n  sum_upto (\\<lambda>n. real n powr - s)\n  \\<in> \\<Theta>(\\<lambda>x. Re (zeta (complex_of_real s)))\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. real n powr - s)\n    \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))", "by (simp add: max_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. real n powr - s)\n  \\<in> \\<Theta>(\\<lambda>x. x powr max 0 (1 - s))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zeta_partial_sum_le_neg:\n  assumes \"s > 0\"\n  shows   \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>n. n powr s) x - x powr (1 + s) / (1 + s)\\<bar> \\<le> c * x powr s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>sum_upto (\\<lambda>n. real n powr s) x -\n                x powr (1 + s) / (1 + s)\\<bar>\n          \\<le> c * x powr s", "proof (rule sum_upto_asymptotics_lift_nat_real)"], ["proof (state)\ngoal (6 subgoals):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 2. (\\<lambda>n.\n        real n powr (1 + s) / (1 + s) - real (Suc n) powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 3. (\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)\n 4. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s\n 5. mono_on (\\<lambda>x. x powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\n 6. mono_on (\\<lambda>x. x powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "show \"(\\<lambda>n. (\\<Sum>k = 1..n. real k powr s) - (real n powr (1 + s) / (1 + s)))\n          \\<in> O(\\<lambda>n. real n powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)", "using zeta_partial_sum_bigo_neg[OF assms(1)]"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>i = 1..n. real i powr s) - real n powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>x. real x powr s)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k = 1..n. real k powr s) - real n powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>k = 1..n. real k powr s) - real n powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>n. real n powr s)\n\ngoal (5 subgoals):\n 1. (\\<lambda>n.\n        real n powr (1 + s) / (1 + s) - real (Suc n) powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)\n 2. (\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)\n 3. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s\n 4. mono_on (\\<lambda>x. x powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\n 5. mono_on (\\<lambda>x. x powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "show \"(\\<lambda>n. real n powr (1 + s) / (1 + s) - (real (Suc n) powr (1 + s) / (1 + s)))\n          \\<in> O(\\<lambda>n. real n powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real n powr (1 + s) / (1 + s) - real (Suc n) powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        real n powr (1 + s) / (1 + s) - real (Suc n) powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>n. real n powr s)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      real n powr (1 + s) / (1 + s) - real (Suc n) powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>n. real n powr s)\n\ngoal (4 subgoals):\n 1. (\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s\n 3. mono_on (\\<lambda>x. x powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\n 4. mono_on (\\<lambda>x. x powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "show \"(\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. real n powr s) \\<in> O(\\<lambda>n. real (Suc n) powr s)\n\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s\n 2. mono_on (\\<lambda>x. x powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\n 3. mono_on (\\<lambda>x. x powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "show \"mono_on (\\<lambda>a. a powr s) {1..} \\<or> mono_on (\\<lambda>x. - (x powr s)) {1..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr s) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr s)) {1..}", "by (intro disjI1) (auto intro!: mono_onI powr_mono2)"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr s) {1..} \\<or>\n  mono_on (\\<lambda>x. - (x powr s)) {1..}\n\ngoal (2 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s\n 2. mono_on (\\<lambda>x. x powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}", "show \"mono_on (\\<lambda>a. a powr (1 + s) / (1 + s)) {1..} \\<or>\n        mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n\ngoal (1 subgoal):\n 1. mono_on (\\<lambda>a. a powr (1 + s) / (1 + s)) {1..} \\<or>\n    mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}", "by (intro disjI1 divide_right_mono powr_mono2 mono_onI) auto"], ["proof (state)\nthis:\n  mono_on (\\<lambda>a. a powr (1 + s) / (1 + s)) {1..} \\<or>\n  mono_on (\\<lambda>x. - (x powr (1 + s) / (1 + s))) {1..}\n\ngoal (1 subgoal):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> 0 < x powr s", "qed auto"], ["", "lemma zeta_partial_sum_neg_asymp_equiv:\n  assumes \"s > 0\"\n  shows \"sum_upto (\\<lambda>n. n powr s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "from zeta_partial_sum_le_neg[of s] assms"], ["proof (chain)\npicking this:\n  0 < s \\<Longrightarrow>\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>n. real n powr s) x -\n              x powr (1 + s) / (1 + s)\\<bar>\n        \\<le> c * x powr s\n  0 < s", "obtain c where\n    c: \"c > 0\" \"\\<forall>x\\<ge>1. \\<bar>sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s)\\<bar> \\<le> c * x powr s\""], ["proof (prove)\nusing this:\n  0 < s \\<Longrightarrow>\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1.\n        \\<bar>sum_upto (\\<lambda>n. real n powr s) x -\n              x powr (1 + s) / (1 + s)\\<bar>\n        \\<le> c * x powr s\n  0 < s\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>0 < c;\n         \\<forall>x\\<ge>1.\n            \\<bar>sum_upto (\\<lambda>x. real x powr s) x -\n                  x powr (1 + s) / (1 + s)\\<bar>\n            \\<le> c * x powr s\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr s) x -\n           x powr (1 + s) / (1 + s)\\<bar>\n     \\<le> c * x powr s\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "hence \"(\\<lambda>x. sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s)) \\<in> O(\\<lambda>x. x powr s)\""], ["proof (prove)\nusing this:\n  0 < c\n  \\<forall>x\\<ge>1.\n     \\<bar>sum_upto (\\<lambda>x. real x powr s) x -\n           x powr (1 + s) / (1 + s)\\<bar>\n     \\<le> c * x powr s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s))\n    \\<in> O(\\<lambda>x. x powr s)", "by (intro bigoI[of _ c] eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>x. x powr s)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s))\n  \\<in> O(\\<lambda>x. x powr s)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "have \"(\\<lambda>x. x powr s) \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x powr s) \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))", "using assms"], ["proof (prove)\nusing this:\n  0 < s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x powr s) \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. x powr s) \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s))\n  \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      sum_upto (\\<lambda>x. real x powr s) x - x powr (1 + s) / (1 + s))\n  \\<in> o(\\<lambda>x. x powr (1 + s) / (1 + s))\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         real n powr\n         s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))", "by (rule smallo_imp_asymp_equiv)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       real n powr s) \\<sim>[at_top] (\\<lambda>x. x powr (1 + s) / (1 + s))\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}