{"file_name": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary/Moebius_Mu_Sum.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary", "problem_names": ["lemma sum_upto_moebius_mu_integral: \"x > 1 \\<Longrightarrow> ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\"\n  and sum_upto_moebius_mu_integrable: \"a \\<ge> 1 \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}\"", "lemma sum_moebius_mu_bound:\n  assumes \"x \\<ge> 0\"\n  shows   \"\\<bar>M x\\<bar> \\<le> x\"", "lemma sum_moebius_mu_aux1: \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\"", "lemma sum_moebius_mu_aux2: \"((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\"", "lemma sum_moebius_mu_ln_eq: \"H = (\\<lambda>x. - dirichlet_prod' moebius_mu \\<psi> x)\"", "theorem PNT_implies_sum_moebius_mu_sublinear:\n  assumes \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\"\n  shows   \"M \\<in> o(\\<lambda>x. x)\"", "theorem sum_moebius_mu_sublinear_imp_PNT:\n  assumes \"M \\<in> o(\\<lambda>x. x)\"\n  shows   \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\"", "lemma sum_upto_moebius_mu_integral': \"x > 1 \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\"\n  and sum_upto_moebius_mu_integrable': \"a \\<ge> 1 \\<Longrightarrow> A integrable_on {a..b}\"", "theorem sum_moebius_mu_div_n_smallo_imp_PNT:\n  assumes smallo: \"A \\<in> o(\\<lambda>_. 1)\"\n  shows   \"M \\<in> o(\\<lambda>x. x)\" and \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\""], "translations": [["", "lemma sum_upto_moebius_mu_integral: \"x > 1 \\<Longrightarrow> ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\"\n  and sum_upto_moebius_mu_integrable: \"a \\<ge> 1 \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < x \\<Longrightarrow>\n     ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}) &&&\n    (1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b})", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "fix a b :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "assume ab: \"a \\<ge> 1\" \"a < b\""], ["proof (state)\nthis:\n  1 \\<le> a\n  a < b\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "have \"((\\<lambda>t. M t * (1 / t)) has_integral M b * ln b - M a * ln a -\n            (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n * ln (real n))) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. M t * (1 / t)) has_integral\n     M b * ln b - M a * ln a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n * ln (real n)))\n     {a..b}", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. sum_upto moebius_mu t * (1 / t)) has_integral\n     sum_upto moebius_mu b * ln b - sum_upto moebius_mu a * ln a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n * ln (real n)))\n     {a..b}", "using ab"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  a < b\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. sum_upto moebius_mu t * (1 / t)) has_integral\n     sum_upto moebius_mu b * ln b - sum_upto moebius_mu a * ln a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n * ln (real n)))\n     {a..b}", "by (intro partial_summation_strong [where X = \"{}\"])\n         (auto intro!: derivative_eq_intros continuous_intros\n               simp flip: has_field_derivative_iff_has_vector_derivative)"], ["proof (state)\nthis:\n  ((\\<lambda>t. M t * (1 / t)) has_integral\n   M b * ln b - M a * ln a -\n   (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n * ln (real n)))\n   {a..b}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. M t * (1 / t)) has_integral\n                     M ?ba2 * ln ?ba2 - M ?aa2 * ln ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n * ln (real n)))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "note * = this"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. M t * (1 / t)) has_integral\n                     M ?ba2 * ln ?ba2 - M ?aa2 * ln ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n * ln (real n)))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. M t * (1 / t)) has_integral\n                     M ?ba2 * ln ?ba2 - M ?aa2 * ln ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n * ln (real n)))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "fix x :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "assume x: \"x > 1\""], ["proof (state)\nthis:\n  1 < x\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "have \"(\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) = H x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) = H x", "unfolding H_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) =\n    (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       moebius_mu n * ln (real n))", "by (intro sum.mono_neutral_cong_left) (use x in auto)"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) = H x\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow>\n    ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "thus \"((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\""], ["proof (prove)\nusing this:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) = H x\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}", "using *[of 1 x] x"], ["proof (prove)\nusing this:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n * ln (real n)) = H x\n  \\<lbrakk>1 \\<le> 1; 1 < x\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. M t * (1 / t)) has_integral\n                     M x * ln x - M 1 * ln 1 -\n                     (\\<Sum>n\\<in>real -` {1<..x}.\n                        moebius_mu n * ln (real n)))\n                     {1..x}\n  1 < x\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "}"], ["proof (state)\nthis:\n  1 < ?xa2 \\<Longrightarrow>\n  ((\\<lambda>t. M t / t) has_integral M ?xa2 * ln ?xa2 - H ?xa2) {1..?xa2}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "{"], ["proof (state)\nthis:\n  1 < ?xa2 \\<Longrightarrow>\n  ((\\<lambda>t. M t / t) has_integral M ?xa2 * ln ?xa2 - H ?xa2) {1..?xa2}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "fix a b :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "assume ab: \"a \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> a\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> (\\<lambda>t. M t / t) integrable_on {a..b}", "show \"(\\<lambda>t. M t / t) integrable_on {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>t. M t / t) integrable_on {a..b}", "using *[of a b] ab"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 \\<le> a; a < b\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. M t * (1 / t)) has_integral\n                     M b * ln b - M a * ln a -\n                     (\\<Sum>n\\<in>real -` {a<..b}.\n                        moebius_mu n * ln (real n)))\n                     {a..b}\n  1 \\<le> a\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. M t / t) integrable_on {a..b}", "by (cases a b rule: linorder_cases) (auto intro: integrable_negligible)"], ["proof (state)\nthis:\n  (\\<lambda>t. M t / t) integrable_on {a..b}\n\ngoal:\nNo subgoals!", "}"], ["proof (state)\nthis:\n  1 \\<le> ?aa2 \\<Longrightarrow>\n  (\\<lambda>t. M t / t) integrable_on {?aa2..?ba2}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_moebius_mu_bound:\n  assumes \"x \\<ge> 0\"\n  shows   \"\\<bar>M x\\<bar> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "have \"\\<bar>M x\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x", "unfolding M_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum moebius_mu {i. 0 < i \\<and> real i \\<le> x}\\<bar>\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             \\<bar>moebius_mu n\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>M x\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "also"], ["proof (state)\nthis:\n  \\<bar>M x\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "have \"\\<dots> \\<le> sum_upto (\\<lambda>n. 1) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\n    \\<le> sum_upto (\\<lambda>n. 1) x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}. \\<bar>moebius_mu n\\<bar>)\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}. 1)", "by (intro sum_mono) (auto simp: moebius_mu_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\n  \\<le> sum_upto (\\<lambda>n. 1) x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>moebius_mu n\\<bar>) x\n  \\<le> sum_upto (\\<lambda>n. 1) x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "have \"\\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1) x \\<le> x", "using assms"], ["proof (prove)\nusing this:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1) x \\<le> x", "by (simp add: sum_upto_altdef)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1) x \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>M x\\<bar> \\<le> x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>M x\\<bar> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> \\<le> x", "."], ["proof (state)\nthis:\n  \\<bar>M x\\<bar> \\<le> x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_moebius_mu_aux1: \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "define R where \"R = (\\<lambda>x. integral {1..x} (\\<lambda>t. M t / t))\""], ["proof (state)\nthis:\n  R = (\\<lambda>x. integral {1..x} (\\<lambda>t. M t / t))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "have \"eventually (\\<lambda>x. M x / x - H x / (x * ln x) = R x / (x * ln x)) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       M x / x - H x / (x * ln x) = R x / (x * ln x)", "using eventually_gt_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((<) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       M x / x - H x / (x * ln x) = R x / (x * ln x)", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 < x \\<Longrightarrow> M x / x - H x / (x * ln x) = R x / (x * ln x)", "case (elim x)"], ["proof (state)\nthis:\n  1 < x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 < x \\<Longrightarrow> M x / x - H x / (x * ln x) = R x / (x * ln x)", "thus ?case"], ["proof (prove)\nusing this:\n  1 < x\n\ngoal (1 subgoal):\n 1. M x / x - H x / (x * ln x) = R x / (x * ln x)", "using sum_upto_moebius_mu_integral[of x]"], ["proof (prove)\nusing this:\n  1 < x\n  1 < x \\<Longrightarrow>\n  ((\\<lambda>t. M t / t) has_integral M x * ln x - H x) {1..x}\n\ngoal (1 subgoal):\n 1. M x / x - H x / (x * ln x) = R x / (x * ln x)", "by (simp add: R_def has_integral_iff field_simps)"], ["proof (state)\nthis:\n  M x / x - H x / (x * ln x) = R x / (x * ln x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     M x / x - H x / (x * ln x) = R x / (x * ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "hence \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> \\<Theta>(\\<lambda>x. R x / (x * ln x))\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     M x / x - H x / (x * ln x) = R x / (x * ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x))\n    \\<in> \\<Theta>(\\<lambda>x. R x / (x * ln x))", "by (intro bigthetaI_cong)"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x))\n  \\<in> \\<Theta>(\\<lambda>x. R x / (x * ln x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x))\n  \\<in> \\<Theta>(\\<lambda>x. R x / (x * ln x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "have \"(\\<lambda>x. R x / (x * ln x)) \\<in> O(\\<lambda>x. x / (x * ln x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. R x / (x * ln x)) \\<in> O(\\<lambda>x. x / (x * ln x))", "proof (intro landau_o.big.divide_right)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top. x * ln x \\<noteq> 0\n 2. R \\<in> O(\\<lambda>x. x)", "have \"M \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<in> O(\\<lambda>x. x)", "using sum_moebius_mu_bound"], ["proof (prove)\nusing this:\n  0 \\<le> ?x \\<Longrightarrow> \\<bar>M ?x\\<bar> \\<le> ?x\n\ngoal (1 subgoal):\n 1. M \\<in> O(\\<lambda>x. x)", "by (intro bigoI[where c = 1] eventually_mono[OF eventually_ge_at_top[of 0]]) auto"], ["proof (state)\nthis:\n  M \\<in> O(\\<lambda>x. x)\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top. x * ln x \\<noteq> 0\n 2. R \\<in> O(\\<lambda>x. x)", "hence \"(\\<lambda>t. M t / t) \\<in> O(\\<lambda>t. 1)\""], ["proof (prove)\nusing this:\n  M \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>t. M t / t) \\<in> O(\\<lambda>t. 1)", "by (simp add: landau_divide_simps)"], ["proof (state)\nthis:\n  (\\<lambda>t. M t / t) \\<in> O(\\<lambda>t. 1)\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in at_top. x * ln x \\<noteq> 0\n 2. R \\<in> O(\\<lambda>x. x)", "thus \"R \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>t. M t / t) \\<in> O(\\<lambda>t. 1)\n\ngoal (1 subgoal):\n 1. R \\<in> O(\\<lambda>x. x)", "unfolding R_def"], ["proof (prove)\nusing this:\n  (\\<lambda>t. M t / t) \\<in> O(\\<lambda>t. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral {1..x} (\\<lambda>t. M t / t))\n    \\<in> O(\\<lambda>x. x)", "by (intro integral_bigo[where g' = \"\\<lambda>_. 1\"])\n         (auto simp: filterlim_ident has_integral_iff intro!: sum_upto_moebius_mu_integrable)"], ["proof (state)\nthis:\n  R \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. x * ln x \\<noteq> 0", "qed (intro eventually_mono[OF eventually_gt_at_top[of 1]], auto)"], ["proof (state)\nthis:\n  (\\<lambda>x. R x / (x * ln x)) \\<in> O(\\<lambda>x. x / (x * ln x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. R x / (x * ln x)) \\<in> O(\\<lambda>x. x / (x * ln x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "have \"(\\<lambda>x::real. x / (x * ln x)) \\<in> \\<Theta>(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x / (x * ln x)) \\<in> \\<Theta>(\\<lambda>x. 1 / ln x)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. x / (x * ln x)) \\<in> \\<Theta>(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* 4.13 *)"], ["", "lemma sum_moebius_mu_aux2: \"((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "have \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "by (rule sum_moebius_mu_aux1)"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "have \"(\\<lambda>x. 1 / ln x) \\<in> o(\\<lambda>_. 1 :: real)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / ln x) \\<in> o(\\<lambda>_. 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. 1 / ln x) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0)\n     at_top", "by (auto dest!: smalloD_tendsto)"], ["proof (state)\nthis:\n  ((\\<lambda>x. M x / x - H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_moebius_mu_ln_eq: \"H = (\\<lambda>x. - dirichlet_prod' moebius_mu \\<psi> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H = (\\<lambda>x. - dirichlet_prod' moebius_mu \\<psi> x)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "have \"fds mangoldt = (fds_deriv (fds moebius_mu) * fds_zeta :: real fds)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fds mangoldt = fds_deriv (fds moebius_mu) * fds_zeta", "using fds_mangoldt'"], ["proof (prove)\nusing this:\n  fds mangoldt = fds_zeta * fds_deriv (fds moebius_mu)\n\ngoal (1 subgoal):\n 1. fds mangoldt = fds_deriv (fds moebius_mu) * fds_zeta", "by (simp add: mult_ac)"], ["proof (state)\nthis:\n  fds mangoldt = fds_deriv (fds moebius_mu) * fds_zeta\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "hence eq: \"fds_deriv (fds moebius_mu) = fds moebius_mu * (fds mangoldt :: real fds)\""], ["proof (prove)\nusing this:\n  fds mangoldt = fds_deriv (fds moebius_mu) * fds_zeta\n\ngoal (1 subgoal):\n 1. fds_deriv (fds moebius_mu) = fds moebius_mu * fds mangoldt", "by (subst (asm) fds_moebius_inversion [symmetric])"], ["proof (state)\nthis:\n  fds_deriv (fds moebius_mu) = fds moebius_mu * fds mangoldt\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "have \"-H x = sum_upto (\\<lambda>n. -ln n * moebius_mu n) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - H x = sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x", "by (simp add: H_def sum_upto_def sum_negf mult_ac)"], ["proof (state)\nthis:\n  - H x = sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "also"], ["proof (state)\nthis:\n  - H x = sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "have \"\\<dots> = sum_upto (\\<lambda>n. dirichlet_prod moebius_mu mangoldt n) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x =\n    sum_upto (dirichlet_prod moebius_mu mangoldt) x", "using eq"], ["proof (prove)\nusing this:\n  fds_deriv (fds moebius_mu) = fds moebius_mu * fds mangoldt\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x =\n    sum_upto (dirichlet_prod moebius_mu mangoldt) x", "by (intro sum_upto_cong) (auto simp: fds_eq_iff fds_nth_deriv fds_nth_mult)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x =\n  sum_upto (dirichlet_prod moebius_mu mangoldt) x\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. - ln (real n) * moebius_mu n) x =\n  sum_upto (dirichlet_prod moebius_mu mangoldt) x\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "have \"\\<dots> = dirichlet_prod' moebius_mu \\<psi> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (dirichlet_prod moebius_mu mangoldt) x =\n    dirichlet_prod' moebius_mu \\<psi> x", "by (subst sum_upto_dirichlet_prod) (simp add: primes_psi_def dirichlet_prod'_def)"], ["proof (state)\nthis:\n  sum_upto (dirichlet_prod moebius_mu mangoldt) x =\n  dirichlet_prod' moebius_mu \\<psi> x\n\ngoal (1 subgoal):\n 1. \\<And>x. H x = - dirichlet_prod' moebius_mu \\<psi> x", "finally"], ["proof (chain)\npicking this:\n  - H x = dirichlet_prod' moebius_mu \\<psi> x", "show \"H x = -dirichlet_prod' moebius_mu \\<psi> x\""], ["proof (prove)\nusing this:\n  - H x = dirichlet_prod' moebius_mu \\<psi> x\n\ngoal (1 subgoal):\n 1. H x = - dirichlet_prod' moebius_mu \\<psi> x", "by simp"], ["proof (state)\nthis:\n  H x = - dirichlet_prod' moebius_mu \\<psi> x\n\ngoal:\nNo subgoals!", "qed"], ["", "(* 4.14 *)"], ["", "theorem PNT_implies_sum_moebius_mu_sublinear:\n  assumes \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\"\n  shows   \"M \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "have \"((\\<lambda>x. H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. H x / (x * ln x)) \\<longlongrightarrow> 0) at_top", "proof (rule tendstoI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "fix \\<epsilon>' :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "assume \\<epsilon>': \"\\<epsilon>' > 0\""], ["proof (state)\nthis:\n  0 < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "define \\<epsilon> where \"\\<epsilon> = \\<epsilon>' / 2\""], ["proof (state)\nthis:\n  \\<epsilon> = \\<epsilon>' / 2\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "from \\<epsilon>'"], ["proof (chain)\npicking this:\n  0 < \\<epsilon>'", "have \\<epsilon>: \"\\<epsilon> > 0\""], ["proof (prove)\nusing this:\n  0 < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. 0 < \\<epsilon>", "by (simp add: \\<epsilon>_def)"], ["proof (state)\nthis:\n  0 < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "from assms"], ["proof (chain)\npicking this:\n  \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"((\\<lambda>x. \\<psi> x / x) \\<longlongrightarrow> 1) at_top\""], ["proof (prove)\nusing this:\n  \\<psi> \\<sim>[at_top] (\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. \\<psi> x / x) \\<longlongrightarrow> 1) at_top", "by (elim asymp_equivD_strong) (auto intro!: eventually_mono[OF eventually_gt_at_top[of 0]])"], ["proof (state)\nthis:\n  ((\\<lambda>x. \\<psi> x / x) \\<longlongrightarrow> 1) at_top\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "from tendstoD[OF this \\<epsilon>]"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F x in at_top. dist (\\<psi> x / x) 1 < \\<epsilon>", "have \"eventually (\\<lambda>x. \\<bar>\\<psi> x / x - 1\\<bar> < \\<epsilon>) at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. dist (\\<psi> x / x) 1 < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x / x - 1\\<bar> < \\<epsilon>", "by (simp add: dist_norm)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x / x - 1\\<bar> < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "hence \"eventually (\\<lambda>x. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x) at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x / x - 1\\<bar> < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x", "using eventually_gt_at_top[of 0]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x / x - 1\\<bar> < \\<epsilon>\n  eventually ((<) (0::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x", "by eventually_elim (auto simp: abs_if field_simps)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x", "obtain A' where A': \"\\<And>x. x \\<ge> A' \\<Longrightarrow> \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. (\\<And>A'.\n        (\\<And>x.\n            A' \\<le> x \\<Longrightarrow>\n            \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: eventually_at_top_linorder)"], ["proof (state)\nthis:\n  A' \\<le> ?x \\<Longrightarrow> \\<bar>\\<psi> ?x - ?x\\<bar> < \\<epsilon> * ?x\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "define A where \"A = max 2 A'\""], ["proof (state)\nthis:\n  A = max 2 A'\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "from A'"], ["proof (chain)\npicking this:\n  A' \\<le> ?x \\<Longrightarrow> \\<bar>\\<psi> ?x - ?x\\<bar> < \\<epsilon> * ?x", "have A: \"A \\<ge> 2\" \"\\<And>x. x \\<ge> A \\<Longrightarrow> \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x\""], ["proof (prove)\nusing this:\n  A' \\<le> ?x \\<Longrightarrow> \\<bar>\\<psi> ?x - ?x\\<bar> < \\<epsilon> * ?x\n\ngoal (1 subgoal):\n 1. 2 \\<le> A &&&\n    (\\<And>x.\n        A \\<le> x \\<Longrightarrow>\n        \\<bar>\\<psi> x - x\\<bar> < \\<epsilon> * x)", "by (auto simp: A_def)"], ["proof (state)\nthis:\n  2 \\<le> A\n  A \\<le> ?x \\<Longrightarrow> \\<bar>\\<psi> ?x - ?x\\<bar> < \\<epsilon> * ?x\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "have H_bound: \"\\<bar>H x\\<bar> / (x * ln x) \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\" if \"x \\<ge> A\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "from \\<open>x \\<ge> A\\<close>"], ["proof (chain)\npicking this:\n  A \\<le> x", "have \"x \\<ge> 2\""], ["proof (prove)\nusing this:\n  A \\<le> x\n\ngoal (1 subgoal):\n 1. 2 \\<le> x", "using A(1)"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. 2 \\<le> x", "by linarith"], ["proof (state)\nthis:\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "note x = \\<open>x \\<ge> A\\<close> \\<open>x \\<ge> 2\\<close>"], ["proof (state)\nthis:\n  A \\<le> x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "define y where \"y = nat \\<lfloor>floor (x / A)\\<rfloor>\""], ["proof (state)\nthis:\n  y = nat \\<lfloor>real_of_int \\<lfloor>x / A\\<rfloor>\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"real y = real_of_int \\<lfloor>x / A\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real y = real_of_int \\<lfloor>x / A\\<rfloor>", "using A x"], ["proof (prove)\nusing this:\n  2 \\<le> A\n  A \\<le> ?x \\<Longrightarrow> \\<bar>\\<psi> ?x - ?x\\<bar> < \\<epsilon> * ?x\n  A \\<le> x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. real y = real_of_int \\<lfloor>x / A\\<rfloor>", "by (simp add: y_def)"], ["proof (state)\nthis:\n  real y = real_of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  real y = real_of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A", "by linarith"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x / A \\<le> x", "using x A(1)"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. x / A \\<le> x", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  x / A \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "finally"], ["proof (chain)\npicking this:\n  real y \\<le> x", "have \"y \\<le> x\""], ["proof (prove)\nusing this:\n  real y \\<le> x\n\ngoal (1 subgoal):\n 1. real y \\<le> x", "."], ["proof (state)\nthis:\n  real y \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"y \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> y", "using x A(1)"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. 1 \\<le> y", "by (auto simp: y_def le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  1 \\<le> y\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "note y = \\<open>y \\<ge> 1\\<close> \\<open>y \\<le> x\\<close>"], ["proof (state)\nthis:\n  1 \\<le> y\n  real y \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "define S1 where [simp]: \"S1 = sum_upto (\\<lambda>m. moebius_mu m * \\<psi> (x / m)) y\""], ["proof (state)\nthis:\n  S1 = sum_upto (\\<lambda>m. moebius_mu m * \\<psi> (x / real m)) (real y)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "define S2 where [simp]: \"S2 = (\\<Sum>m | m > y \\<and> real m \\<le> x. moebius_mu m * \\<psi> (x / m))\""], ["proof (state)\nthis:\n  S2 =\n  (\\<Sum>m | y < m \\<and> real m \\<le> x.\n     moebius_mu m * \\<psi> (x / real m))\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have fin: \"finite {m. y < m \\<and> real m \\<le> x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {m. y < m \\<and> real m \\<le> x}", "by (rule finite_subset[of _ \"{..nat \\<lfloor>x\\<rfloor>}\"]) (auto simp: le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  finite {m. y < m \\<and> real m \\<le> x}\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"H x = -dirichlet_prod' moebius_mu \\<psi> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. H x = - dirichlet_prod' moebius_mu \\<psi> x", "by (simp add: sum_moebius_mu_ln_eq)"], ["proof (state)\nthis:\n  H x = - dirichlet_prod' moebius_mu \\<psi> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  H x = - dirichlet_prod' moebius_mu \\<psi> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"dirichlet_prod' moebius_mu \\<psi> x =\n                   (\\<Sum>m | m > 0 \\<and> real m \\<le> x. moebius_mu m * \\<psi> (x / m))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' moebius_mu \\<psi> x =\n    (\\<Sum>m | 0 < m \\<and> real m \\<le> x.\n       moebius_mu m * \\<psi> (x / real m))", "unfolding dirichlet_prod'_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       moebius_mu m * \\<psi> (x / real m)) =\n    (\\<Sum>m | 0 < m \\<and> real m \\<le> x.\n       moebius_mu m * \\<psi> (x / real m))", ".."], ["proof (state)\nthis:\n  dirichlet_prod' moebius_mu \\<psi> x =\n  (\\<Sum>m | 0 < m \\<and> real m \\<le> x.\n     moebius_mu m * \\<psi> (x / real m))\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  dirichlet_prod' moebius_mu \\<psi> x =\n  (\\<Sum>m | 0 < m \\<and> real m \\<le> x.\n     moebius_mu m * \\<psi> (x / real m))\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"{m. m > 0 \\<and> real m \\<le> x} = {0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {m. 0 < m \\<and> real m \\<le> x} =\n    {0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}", "using x y A(1)"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n  1 \\<le> y\n  real y \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. {m. 0 < m \\<and> real m \\<le> x} =\n    {0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}", "by auto"], ["proof (state)\nthis:\n  {m. 0 < m \\<and> real m \\<le> x} =\n  {0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  {m. 0 < m \\<and> real m \\<le> x} =\n  {0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"(\\<Sum>m\\<in>\\<dots>. moebius_mu m * \\<psi> (x / m)) = S1 + S2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}.\n       moebius_mu m * \\<psi> (x / real m)) =\n    S1 + S2", "unfolding dirichlet_prod'_def sum_upto_def S1_def S2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}.\n       moebius_mu m * \\<psi> (x / real m)) =\n    (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n       moebius_mu m * \\<psi> (x / real m)) +\n    (\\<Sum>m | y < m \\<and> real m \\<le> x.\n       moebius_mu m * \\<psi> (x / real m))", "using fin"], ["proof (prove)\nusing this:\n  finite {m. y < m \\<and> real m \\<le> x}\n\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}.\n       moebius_mu m * \\<psi> (x / real m)) =\n    (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n       moebius_mu m * \\<psi> (x / real m)) +\n    (\\<Sum>m | y < m \\<and> real m \\<le> x.\n       moebius_mu m * \\<psi> (x / real m))", "by (subst sum.union_disjoint) (auto intro: sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>m\\<in>{0<..y} \\<union> {m. y < m \\<and> real m \\<le> x}.\n     moebius_mu m * \\<psi> (x / real m)) =\n  S1 + S2\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "finally"], ["proof (chain)\npicking this:\n  H x = - (S1 + S2)", "have abs_H_eq: \"\\<bar>H x\\<bar> = \\<bar>S1 + S2\\<bar>\""], ["proof (prove)\nusing this:\n  H x = - (S1 + S2)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> = \\<bar>S1 + S2\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>H x\\<bar> = \\<bar>S1 + S2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "define S1_1 where [simp]: \"S1_1 = sum_upto (\\<lambda>m. moebius_mu m / m) y\""], ["proof (state)\nthis:\n  S1_1 = sum_upto (\\<lambda>m. moebius_mu m / real m) (real y)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "define S1_2 where [simp]: \"S1_2 = sum_upto (\\<lambda>m. moebius_mu m * (\\<psi> (x / m) - x / m)) y\""], ["proof (state)\nthis:\n  S1_2 =\n  sum_upto (\\<lambda>m. moebius_mu m * (\\<psi> (x / real m) - x / real m))\n   (real y)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<bar>S1\\<bar> = \\<bar>x * S1_1 + S1_2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>S1\\<bar> = \\<bar>x * S1_1 + S1_2\\<bar>", "by (simp add: sum_upto_def sum_distrib_left sum_distrib_right\n                      mult_ac sum_subtractf ring_distribs)"], ["proof (state)\nthis:\n  \\<bar>S1\\<bar> = \\<bar>x * S1_1 + S1_2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  \\<bar>S1\\<bar> = \\<bar>x * S1_1 + S1_2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x * S1_1 + S1_2\\<bar>\n    \\<le> x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>", "by (rule order.trans[OF abs_triangle_ineq]) (use x in \\<open>simp add: abs_mult\\<close>)"], ["proof (state)\nthis:\n  \\<bar>x * S1_1 + S1_2\\<bar> \\<le> x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  \\<bar>x * S1_1 + S1_2\\<bar> \\<le> x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> x * 1 + \\<epsilon> * x * (ln x + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>\n    \\<le> x * 1 + \\<epsilon> * x * (ln x + 1)", "proof (intro add_mono mult_left_mono)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<bar>S1_1\\<bar> \\<le> 1\n 2. 0 \\<le> x\n 3. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "show \"\\<bar>S1_1\\<bar> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>S1_1\\<bar> \\<le> 1", "using abs_sum_upto_moebius_mu_over_n_le[of y]"], ["proof (prove)\nusing this:\n  \\<bar>sum_upto (\\<lambda>n. moebius_mu n / real n) (real y)\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<bar>S1_1\\<bar> \\<le> 1", "by simp"], ["proof (state)\nthis:\n  \\<bar>S1_1\\<bar> \\<le> 1\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"\\<bar>S1_2\\<bar> \\<le> sum_upto (\\<lambda>m. \\<bar>moebius_mu m * (\\<psi> (x / m) - x / m)\\<bar>) y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>S1_2\\<bar>\n    \\<le> sum_upto\n           (\\<lambda>m.\n               \\<bar>moebius_mu m *\n                     (\\<psi> (x / real m) - x / real m)\\<bar>)\n           (real y)", "unfolding S1_2_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n            moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>\n    \\<le> (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n             \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>S1_2\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>m.\n             \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)\n         (real y)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "also"], ["proof (state)\nthis:\n  \\<bar>S1_2\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>m.\n             \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)\n         (real y)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"\\<dots> \\<le> sum_upto (\\<lambda>m. 1 * (\\<epsilon> * (x / m))) y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>m.\n         \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)\n     (real y)\n    \\<le> sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y)", "unfolding abs_mult sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n       \\<bar>moebius_mu m\\<bar> *\n       \\<bar>\\<psi> (x / real m) - x / real m\\<bar>)\n    \\<le> (\\<Sum>xa\\<in>{i. 0 < i \\<and> real i \\<le> real y}.\n             1 * (\\<epsilon> * (x / real xa)))", "proof (intro sum_mono mult_mono less_imp_le[OF A(2)])"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "fix m"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "assume m: \"m \\<in> {i. 0 < i \\<and> real i \\<le> real y}\""], ["proof (state)\nthis:\n  m \\<in> {i. 0 < i \\<and> real i \\<le> real y}\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "hence \"real m \\<le> real y\""], ["proof (prove)\nusing this:\n  m \\<in> {i. 0 < i \\<and> real i \\<le> real y}\n\ngoal (1 subgoal):\n 1. real m \\<le> real y", "by simp"], ["proof (state)\nthis:\n  real m \\<le> real y\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "also"], ["proof (state)\nthis:\n  real m \\<le> real y\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "from x A(1)"], ["proof (chain)\npicking this:\n  A \\<le> x\n  2 \\<le> x\n  2 \\<le> A", "have \"\\<dots> = of_int \\<lfloor>x / A\\<rfloor>\""], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. real y = real_of_int \\<lfloor>x / A\\<rfloor>", "by (simp add: y_def)"], ["proof (state)\nthis:\n  real y = real_of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "also"], ["proof (state)\nthis:\n  real y = real_of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "have \"\\<dots> \\<le> x / A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A", "by linarith"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x / A\\<rfloor> \\<le> x / A\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       A \\<le> x / real m\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 4. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "finally"], ["proof (chain)\npicking this:\n  real m \\<le> x / A", "show \"A \\<le> x / real m\""], ["proof (prove)\nusing this:\n  real m \\<le> x / A\n\ngoal (1 subgoal):\n 1. A \\<le> x / real m", "using A(1) m"], ["proof (prove)\nusing this:\n  real m \\<le> x / A\n  2 \\<le> A\n  m \\<in> {i. 0 < i \\<and> real i \\<le> real y}\n\ngoal (1 subgoal):\n 1. A \\<le> x / real m", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  A \\<le> x / real m\n\ngoal (3 subgoals):\n 1. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> 1\n 3. \\<And>m.\n       m \\<in> {i. 0 < i \\<and> real i \\<le> real y} \\<Longrightarrow>\n       0 \\<le> \\<bar>\\<psi> (x / real m) - x / real m\\<bar>", "qed (auto simp: moebius_mu_def field_simps)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>m.\n       \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)\n   (real y)\n  \\<le> sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>m.\n       \\<bar>moebius_mu m * (\\<psi> (x / real m) - x / real m)\\<bar>)\n   (real y)\n  \\<le> sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"\\<dots> = \\<epsilon> * x * (\\<Sum>i\\<in>{0<..y}. inverse (real i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y) =\n    \\<epsilon> * x * (\\<Sum>i\\<in>{0<..y}. inverse (real i))", "by (simp add: sum_upto_altdef sum_distrib_left divide_simps)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y) =\n  \\<epsilon> * x * (\\<Sum>i\\<in>{0<..y}. inverse (real i))\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>xa. 1 * (\\<epsilon> * (x / real xa))) (real y) =\n  \\<epsilon> * x * (\\<Sum>i\\<in>{0<..y}. inverse (real i))\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"(\\<Sum>i\\<in>{0<..y}. inverse (real i)) = harm (nat \\<lfloor>y\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{0<..y}. inverse (real i)) =\n    harm (nat \\<lfloor>real y\\<rfloor>)", "unfolding harm_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>{0<..y}. inverse (real i)) =\n    (\\<Sum>k = 1..nat \\<lfloor>real y\\<rfloor>. inverse (real k))", "by (intro sum.cong) auto"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{0<..y}. inverse (real i)) =\n  harm (nat \\<lfloor>real y\\<rfloor>)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>{0<..y}. inverse (real i)) =\n  harm (nat \\<lfloor>real y\\<rfloor>)\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"\\<dots> \\<le> ln (nat \\<lfloor>y\\<rfloor>) + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. harm (nat \\<lfloor>real y\\<rfloor>)\n    \\<le> ln (real (nat \\<lfloor>real y\\<rfloor>)) + 1", "by (rule harm_le) (use y in auto)"], ["proof (state)\nthis:\n  harm (nat \\<lfloor>real y\\<rfloor>)\n  \\<le> ln (real (nat \\<lfloor>real y\\<rfloor>)) + 1\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "also"], ["proof (state)\nthis:\n  harm (nat \\<lfloor>real y\\<rfloor>)\n  \\<le> ln (real (nat \\<lfloor>real y\\<rfloor>)) + 1\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "have \"ln (nat \\<lfloor>y\\<rfloor>) \\<le> ln x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln (real (nat \\<lfloor>real y\\<rfloor>)) \\<le> ln x", "using y"], ["proof (prove)\nusing this:\n  1 \\<le> y\n  real y \\<le> x\n\ngoal (1 subgoal):\n 1. ln (real (nat \\<lfloor>real y\\<rfloor>)) \\<le> ln x", "by simp"], ["proof (state)\nthis:\n  ln (real (nat \\<lfloor>real y\\<rfloor>)) \\<le> ln x\n\ngoal (2 subgoals):\n 1. 0 \\<le> x\n 2. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              \\<epsilon> * x * xa \\<le> \\<epsilon> * x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      \\<epsilon> * x * (xa + 1) \\<le> \\<epsilon> * x * (y + 1)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "show \"\\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              \\<epsilon> * x * xa \\<le> \\<epsilon> * x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      \\<epsilon> * x * (xa + 1) \\<le> \\<epsilon> * x * (y + 1)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)\n\ngoal (1 subgoal):\n 1. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "using \\<epsilon> x"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow>\n              \\<epsilon> * x * xa \\<le> \\<epsilon> * x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      \\<epsilon> * x * (xa + 1) \\<le> \\<epsilon> * x * (y + 1)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)\n  0 < \\<epsilon>\n  A \\<le> x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)", "by simp"], ["proof (state)\nthis:\n  \\<bar>S1_2\\<bar> \\<le> \\<epsilon> * x * (ln x + 1)\n\ngoal (1 subgoal):\n 1. 0 \\<le> x", "qed (use x in auto)"], ["proof (state)\nthis:\n  x * \\<bar>S1_1\\<bar> + \\<bar>S1_2\\<bar>\n  \\<le> x * 1 + \\<epsilon> * x * (ln x + 1)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>S1\\<bar> \\<le> x * 1 + \\<epsilon> * x * (ln x + 1)", "have S1_bound: \"\\<bar>S1\\<bar> \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x\""], ["proof (prove)\nusing this:\n  \\<bar>S1\\<bar> \\<le> x * 1 + \\<epsilon> * x * (ln x + 1)\n\ngoal (1 subgoal):\n 1. \\<bar>S1\\<bar> \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<bar>S1\\<bar> \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<bar>S2\\<bar> \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. \\<bar>moebius_mu m * \\<psi> (x / m)\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>S2\\<bar>\n    \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x.\n             \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)", "unfolding S2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>m | y < m \\<and> real m \\<le> x.\n            moebius_mu m * \\<psi> (x / real m)\\<bar>\n    \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x.\n             \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>S2\\<bar>\n  \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x.\n           \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  \\<bar>S2\\<bar>\n  \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x.\n           \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m | y < m \\<and> real m \\<le> x.\n       \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)\n    \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)", "unfolding abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m | y < m \\<and> real m \\<le> x.\n       \\<bar>moebius_mu m\\<bar> * \\<bar>\\<psi> (x / real m)\\<bar>)\n    \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)", "using y"], ["proof (prove)\nusing this:\n  1 \\<le> y\n  real y \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<Sum>m | y < m \\<and> real m \\<le> x.\n       \\<bar>moebius_mu m\\<bar> * \\<bar>\\<psi> (x / real m)\\<bar>)\n    \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)", "proof (intro sum_mono mult_mono)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "fix m"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "assume m: \"m \\<in> {m. y < m \\<and> real m \\<le> x}\""], ["proof (state)\nthis:\n  m \\<in> {m. y < m \\<and> real m \\<le> x}\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "hence \"y < m\""], ["proof (prove)\nusing this:\n  m \\<in> {m. y < m \\<and> real m \\<le> x}\n\ngoal (1 subgoal):\n 1. y < m", "by simp"], ["proof (state)\nthis:\n  y < m\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "moreover"], ["proof (state)\nthis:\n  y < m\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "have \"y = of_int \\<lfloor>x / A\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. int y = of_int \\<lfloor>x / A\\<rfloor>", "using x A(1)"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. int y = of_int \\<lfloor>x / A\\<rfloor>", "by (simp add: y_def)"], ["proof (state)\nthis:\n  int y = of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "ultimately"], ["proof (chain)\npicking this:\n  y < m\n  int y = of_int \\<lfloor>x / A\\<rfloor>", "have \"\\<lfloor>x / A\\<rfloor> < m\""], ["proof (prove)\nusing this:\n  y < m\n  int y = of_int \\<lfloor>x / A\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<lfloor>x / A\\<rfloor> < int m", "by simp"], ["proof (state)\nthis:\n  \\<lfloor>x / A\\<rfloor> < int m\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "hence \"x / A \\<le> real m\""], ["proof (prove)\nusing this:\n  \\<lfloor>x / A\\<rfloor> < int m\n\ngoal (1 subgoal):\n 1. x / A \\<le> real m", "by linarith"], ["proof (state)\nthis:\n  x / A \\<le> real m\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "hence \"\\<psi> (x / real m) \\<le> \\<psi> A\""], ["proof (prove)\nusing this:\n  x / A \\<le> real m\n\ngoal (1 subgoal):\n 1. \\<psi> (x / real m) \\<le> \\<psi> A", "using m A(1)"], ["proof (prove)\nusing this:\n  x / A \\<le> real m\n  m \\<in> {m. y < m \\<and> real m \\<le> x}\n  2 \\<le> A\n\ngoal (1 subgoal):\n 1. \\<psi> (x / real m) \\<le> \\<psi> A", "by (intro \\<psi>_mono) (auto simp: field_simps)"], ["proof (state)\nthis:\n  \\<psi> (x / real m) \\<le> \\<psi> A\n\ngoal (4 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 4. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "thus \"\\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\""], ["proof (prove)\nusing this:\n  \\<psi> (x / real m) \\<le> \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A", "by (simp add: \\<psi>_nonneg)"], ["proof (state)\nthis:\n  \\<bar>\\<psi> (x / real m)\\<bar> \\<le> \\<psi> A\n\ngoal (3 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> \\<bar>moebius_mu m\\<bar> \\<le> 1\n 2. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> 1\n 3. \\<And>m.\n       \\<lbrakk>1 \\<le> y; real y \\<le> x;\n        m \\<in> {m. y < m \\<and> real m \\<le> x}\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> \\<bar>\\<psi> (x / real m)\\<bar>", "qed (auto simp: moebius_mu_def \\<psi>_nonneg field_simps intro!: \\<psi>_mono)"], ["proof (state)\nthis:\n  (\\<Sum>m | y < m \\<and> real m \\<le> x.\n     \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)\n  \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  (\\<Sum>m | y < m \\<and> real m \\<le> x.\n     \\<bar>moebius_mu m * \\<psi> (x / real m)\\<bar>)\n  \\<le> (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> sum_upto (\\<lambda>_. 1 * \\<psi> A) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n    \\<le> sum_upto (\\<lambda>_. 1 * \\<psi> A) x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n    \\<le> (\\<Sum>_\\<in>{i. 0 < i \\<and> real i \\<le> x}. 1 * \\<psi> A)", "by (intro sum_mono2) auto"], ["proof (state)\nthis:\n  (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n  \\<le> sum_upto (\\<lambda>_. 1 * \\<psi> A) x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  (\\<Sum>m | y < m \\<and> real m \\<le> x. 1 * \\<psi> A)\n  \\<le> sum_upto (\\<lambda>_. 1 * \\<psi> A) x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> = real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>_. 1 * \\<psi> A) x =\n    real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A", "by (simp add: sum_upto_altdef)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>_. 1 * \\<psi> A) x =\n  real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>_. 1 * \\<psi> A) x =\n  real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> x * \\<psi> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A \\<le> x * \\<psi> A", "using x"], ["proof (prove)\nusing this:\n  A \\<le> x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A \\<le> x * \\<psi> A", "by (intro mult_right_mono) auto"], ["proof (state)\nthis:\n  real (nat \\<lfloor>x\\<rfloor>) * \\<psi> A \\<le> x * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>S2\\<bar> \\<le> x * \\<psi> A", "have S2_bound: \"\\<bar>S2\\<bar> \\<le> x * \\<psi> A\""], ["proof (prove)\nusing this:\n  \\<bar>S2\\<bar> \\<le> x * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>S2\\<bar> \\<le> x * \\<psi> A", "."], ["proof (state)\nthis:\n  \\<bar>S2\\<bar> \\<le> x * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<bar>H x\\<bar> \\<le> \\<bar>S1\\<bar> + \\<bar>S2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> \\<le> \\<bar>S1\\<bar> + \\<bar>S2\\<bar>", "using abs_H_eq"], ["proof (prove)\nusing this:\n  \\<bar>H x\\<bar> = \\<bar>S1 + S2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> \\<le> \\<bar>S1\\<bar> + \\<bar>S2\\<bar>", "by linarith"], ["proof (state)\nthis:\n  \\<bar>H x\\<bar> \\<le> \\<bar>S1\\<bar> + \\<bar>S2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "also"], ["proof (state)\nthis:\n  \\<bar>H x\\<bar> \\<le> \\<bar>S1\\<bar> + \\<bar>S2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "have \"\\<dots> \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x + x * \\<psi> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>S1\\<bar> + \\<bar>S2\\<bar>\n    \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x + x * \\<psi> A", "by (intro add_mono S1_bound S2_bound)"], ["proof (state)\nthis:\n  \\<bar>S1\\<bar> + \\<bar>S2\\<bar>\n  \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x + x * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>H x\\<bar>\n  \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x + x * \\<psi> A", "have \"\\<bar>H x\\<bar> \\<le> (1 + \\<epsilon> + \\<psi> A) * x + \\<epsilon> * x * ln x\""], ["proof (prove)\nusing this:\n  \\<bar>H x\\<bar>\n  \\<le> x + \\<epsilon> * x * ln x + \\<epsilon> * x + x * \\<psi> A\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar>\n    \\<le> (1 + \\<epsilon> + \\<psi> A) * x + \\<epsilon> * x * ln x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<bar>H x\\<bar>\n  \\<le> (1 + \\<epsilon> + \\<psi> A) * x + \\<epsilon> * x * ln x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "thus \"\\<bar>H x\\<bar> / (x * ln x) \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\""], ["proof (prove)\nusing this:\n  \\<bar>H x\\<bar>\n  \\<le> (1 + \\<epsilon> + \\<psi> A) * x + \\<epsilon> * x * ln x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "using x"], ["proof (prove)\nusing this:\n  \\<bar>H x\\<bar>\n  \\<le> (1 + \\<epsilon> + \\<psi> A) * x + \\<epsilon> * x * ln x\n  A \\<le> x\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>H x\\<bar> / (x * ln x)\n    \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<bar>H x\\<bar> / (x * ln x)\n  \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  A \\<le> ?x \\<Longrightarrow>\n  \\<bar>H ?x\\<bar> / (?x * ln ?x)\n  \\<le> (1 + \\<epsilon> + \\<psi> A) / ln ?x + \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "have \"eventually (\\<lambda>x. \\<bar>H x\\<bar> / (x * ln x) \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>H x\\<bar> / (x * ln x)\n       \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "using eventually_ge_at_top[of A]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) A) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>H x\\<bar> / (x * ln x)\n       \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>", "by eventually_elim (use H_bound in auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x)\n     \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x)\n     \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "have \"eventually (\\<lambda>x. (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>') at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>'", "unfolding \\<epsilon>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       (1 + \\<epsilon>' / 2 + \\<psi> A) / ln x + \\<epsilon>' / 2\n       < \\<epsilon>'", "using \\<epsilon>'"], ["proof (prove)\nusing this:\n  0 < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       (1 + \\<epsilon>' / 2 + \\<psi> A) / ln x + \\<epsilon>' / 2\n       < \\<epsilon>'", "by real_asymp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "moreover"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "have \"eventually (\\<lambda>x. \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>", "using eventually_gt_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((<) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>", "by eventually_elim (simp add: abs_mult)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x)\n     \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\n  \\<forall>\\<^sub>F x in at_top.\n     (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>'\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>", "have \"eventually (\\<lambda>x. \\<bar>H x / (x * ln x)\\<bar> < \\<epsilon>') at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x)\n     \\<le> (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon>\n  \\<forall>\\<^sub>F x in at_top.\n     (1 + \\<epsilon> + \\<psi> A) / ln x + \\<epsilon> < \\<epsilon>'\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>H x\\<bar> / (x * ln x) = \\<bar>H x / (x * ln x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>H x / (x * ln x)\\<bar> < \\<epsilon>'", "by eventually_elim simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>H x / (x * ln x)\\<bar> < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<And>e.\n       0 < e \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < e", "thus \"eventually (\\<lambda>x. dist (H x / (x * ln x)) 0 < \\<epsilon>') at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>H x / (x * ln x)\\<bar> < \\<epsilon>'\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < \\<epsilon>'", "by (simp add: dist_norm)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. dist (H x / (x * ln x)) 0 < \\<epsilon>'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((\\<lambda>x. H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\n\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "hence \"(\\<lambda>x. H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. H x / (x * ln x)) \\<longlongrightarrow> 0) at_top\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "by (intro smalloI_tendsto) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "hence \"(\\<lambda>x. H x / (x * ln x) + (M x / x - H x / (x * ln x))) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. H x / (x * ln x) + (M x / x - H x / (x * ln x)))\n    \\<in> o(\\<lambda>_. 1)", "proof (rule sum_in_smallo)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "have \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)", "by (rule sum_moebius_mu_aux1)"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> O(\\<lambda>x. 1 / ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "have \"(\\<lambda>x::real. 1 / ln x) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / ln x) \\<in> o(\\<lambda>_. 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. 1 / ln x) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "show \"(\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. M x / x - H x / (x * ln x)) \\<in> o(\\<lambda>_. 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. H x / (x * ln x) + (M x / x - H x / (x * ln x)))\n  \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. H x / (x * ln x) + (M x / x - H x / (x * ln x)))\n  \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "by (simp add: landau_divide_simps)"], ["proof (state)\nthis:\n  M \\<in> o(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* 4.15 *)"], ["", "theorem sum_moebius_mu_sublinear_imp_PNT:\n  assumes \"M \\<in> o(\\<lambda>x. x)\"\n  shows   \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "define \\<sigma> :: \"nat \\<Rightarrow> real\" where [simp]: \"\\<sigma> = (\\<lambda>n. real (divisor_count n))\""], ["proof (state)\nthis:\n  \\<sigma> = (\\<lambda>n. real (divisor_count n))\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "define C where [simp]: \"C = (euler_mascheroni :: real)\""], ["proof (state)\nthis:\n  C = euler_mascheroni\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "define f :: \"nat \\<Rightarrow> real\" where \"f = (\\<lambda>n. \\<sigma> n - ln n - 2 * C)\""], ["proof (state)\nthis:\n  f = (\\<lambda>n. \\<sigma> n - ln (real n) - 2 * C)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "define F where [simp]: \"F = sum_upto f\""], ["proof (state)\nthis:\n  F = sum_upto f\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "write moebius_mu (\"\\<mu>\")\n\n  \\<comment> \\<open>The proof is based on the fact that $\\psi(x)-x$ can be approximated fairly well by\n      the Dirichlet product $\\sum_{n\\leq x} \\sum_{d\\mid n} \\mu(d) f(n/d)$:\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have eq: \"\\<psi> x - x = -sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C\" if x: \"x \\<ge> 1\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "have \"\\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n            sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x - sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n    sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n    sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n    sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n    sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x", "by (simp add: sum_upto_altdef \\<psi>_def le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n  sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n  sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "also"], ["proof (state)\nthis:\n  real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n  sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n  sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "have \"\\<dots> = sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n    sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x =\n    sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x", "by (simp add: sum_upto_def sum_subtractf)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n  sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x =\n  sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>_. 1) x - sum_upto mangoldt x -\n  sum_upto (\\<lambda>n. if n = 1 then 2 * C else 0) x =\n  sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "have \"\\<dots> = sum_upto (dirichlet_prod \\<mu> f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x =\n    sum_upto (dirichlet_prod \\<mu> f) x", "by (intro sum_upto_cong refl moebius_inversion)\n         (auto simp: divisor_count_def sum_subtractf mangoldt_sum f_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 - mangoldt n - (if n = 1 then 2 * C else 0)) x =\n  sum_upto (dirichlet_prod \\<mu> f) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "finally"], ["proof (chain)\npicking this:\n  real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n  sum_upto (dirichlet_prod \\<mu> f) x", "show \"\\<psi> x - x = -sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C\""], ["proof (prove)\nusing this:\n  real_of_int \\<lfloor>x\\<rfloor> - \\<psi> x - 2 * C =\n  sum_upto (dirichlet_prod \\<mu> f) x\n\ngoal (1 subgoal):\n 1. \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C", "by (simp add: algebra_simps frac_def)"], ["proof (state)\nthis:\n  \\<psi> x - x = - sum_upto (dirichlet_prod \\<mu> f) x - frac x - 2 * C\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>We now obtain a bound of the form \\<open>\\<bar>F x\\<bar> \\<le> B * sqrt x\\<close>.\\<close>"], ["proof (state)\nthis:\n  1 \\<le> ?x \\<Longrightarrow>\n  \\<psi> ?x - ?x = - sum_upto (dirichlet_prod \\<mu> f) ?x - frac ?x - 2 * C\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"F \\<in> O(sqrt)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "have \"F \\<in> \\<Theta>(\\<lambda>x. (sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x)) -\n                      (sum_upto ln x - x * ln x + x) + 2 * C * frac x)\" (is \"_ \\<in> \\<Theta>(?rhs)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. F \\<in> \\<Theta>(\\<lambda>x.\n                        sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x) -\n                        (sum_upto (\\<lambda>x. ln (real x)) x - x * ln x +\n                         x) +\n                        2 * C * frac x)", "by (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]])\n         (auto simp: sum_upto_altdef sum_subtractf f_def frac_def algebra_simps sum.distrib)"], ["proof (state)\nthis:\n  F \\<in> \\<Theta>(\\<lambda>x.\n                      sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x) -\n                      (sum_upto (\\<lambda>x. ln (real x)) x - x * ln x +\n                       x) +\n                      2 * C * frac x)\n\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "also"], ["proof (state)\nthis:\n  F \\<in> \\<Theta>(\\<lambda>x.\n                      sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x) -\n                      (sum_upto (\\<lambda>x. ln (real x)) x - x * ln x +\n                       x) +\n                      2 * C * frac x)\n\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "have \"?rhs \\<in> O(sqrt)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x) -\n        (sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x) +\n        2 * C * frac x)\n    \\<in> O(sqrt)", "proof (rule sum_in_bigo, rule sum_in_bigo)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x))\n    \\<in> O(sqrt)\n 2. (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n    \\<in> O(sqrt)\n 3. (\\<lambda>x. 2 * C * frac x) \\<in> O(sqrt)", "show \"(\\<lambda>x. sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x)) \\<in> O(sqrt)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x))\n    \\<in> O(sqrt)", "unfolding C_def \\<sigma>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>n. real (divisor_count n)) x -\n        (x * ln x + (2 * euler_mascheroni - 1) * x))\n    \\<in> O(sqrt)", "by (rule summatory_divisor_count_asymptotics)"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x))\n  \\<in> O(sqrt)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n    \\<in> O(sqrt)\n 2. (\\<lambda>x. 2 * C * frac x) \\<in> O(sqrt)", "show \"(\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x) \\<in> O(sqrt)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n    \\<in> O(sqrt)", "by (rule landau_o.big.trans[OF sum_upto_ln_stirling_weak_bigo]) real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n  \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. 2 * C * frac x) \\<in> O(sqrt)", "qed (use euler_mascheroni_pos in real_asymp)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto \\<sigma> x - (x * ln x + (2 * C - 1) * x) -\n      (sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x) +\n      2 * C * frac x)\n  \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "finally"], ["proof (chain)\npicking this:\n  F \\<in> O(sqrt)", "show ?thesis"], ["proof (prove)\nusing this:\n  F \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. F \\<in> O(sqrt)", "."], ["proof (state)\nthis:\n  F \\<in> O(sqrt)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  F \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "hence \"(\\<lambda>n. F (real n)) \\<in> O(sqrt)\""], ["proof (prove)\nusing this:\n  F \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. F (real n)) \\<in> O(\\<lambda>x. sqrt (real x))", "by (rule landau_o.big.compose) real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. F (real n)) \\<in> O(\\<lambda>x. sqrt (real x))\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "from natfun_bigoE[OF this, of 1]"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>n. 1 \\<le> n \\<Longrightarrow> sqrt (real n) \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          1 \\<le> n \\<Longrightarrow>\n          norm (F (real n)) \\<le> c * norm (sqrt (real n))\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "obtain B :: real\n    where B: \"B > 0\" \"\\<And>n. n \\<ge> 1 \\<Longrightarrow> \\<bar>F (real n)\\<bar> \\<le> B * sqrt (real n)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>n. 1 \\<le> n \\<Longrightarrow> sqrt (real n) \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          1 \\<le> n \\<Longrightarrow>\n          norm (F (real n)) \\<le> c * norm (sqrt (real n))\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>n.\n            1 \\<le> n \\<Longrightarrow>\n            \\<bar>F (real n)\\<bar> \\<le> B * sqrt (real n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < B\n  1 \\<le> ?n \\<Longrightarrow>\n  \\<bar>F (real ?n)\\<bar> \\<le> B * sqrt (real ?n)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have B': \"\\<bar>F x\\<bar> \\<le> B * sqrt x\" if \"x \\<ge> 1\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "have \"\\<bar>F x\\<bar> \\<le> B * sqrt (nat \\<lfloor>x\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt (real (nat \\<lfloor>x\\<rfloor>))", "using B(2)[of \"nat \\<lfloor>x\\<rfloor>\"] that"], ["proof (prove)\nusing this:\n  1 \\<le> nat \\<lfloor>x\\<rfloor> \\<Longrightarrow>\n  \\<bar>F (real (nat \\<lfloor>x\\<rfloor>))\\<bar>\n  \\<le> B * sqrt (real (nat \\<lfloor>x\\<rfloor>))\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt (real (nat \\<lfloor>x\\<rfloor>))", "by (simp add: sum_upto_altdef le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  \\<bar>F x\\<bar> \\<le> B * sqrt (real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "also"], ["proof (state)\nthis:\n  \\<bar>F x\\<bar> \\<le> B * sqrt (real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "have \"\\<dots> \\<le> B * sqrt x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * sqrt (real (nat \\<lfloor>x\\<rfloor>)) \\<le> B * sqrt x", "using B(1) that"], ["proof (prove)\nusing this:\n  0 < B\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. B * sqrt (real (nat \\<lfloor>x\\<rfloor>)) \\<le> B * sqrt x", "by (intro mult_left_mono) auto"], ["proof (state)\nthis:\n  B * sqrt (real (nat \\<lfloor>x\\<rfloor>)) \\<le> B * sqrt x\n\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>F x\\<bar> \\<le> B * sqrt x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>F x\\<bar> \\<le> B * sqrt x\n\ngoal (1 subgoal):\n 1. \\<bar>F x\\<bar> \\<le> B * sqrt x", "."], ["proof (state)\nthis:\n  \\<bar>F x\\<bar> \\<le> B * sqrt x\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>Next, we obtain a good bound for $\\sum_{n\\leq x} \\frac{1}{\\sqrt{n}}$.\\<close>"], ["proof (state)\nthis:\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>F ?x\\<bar> \\<le> B * sqrt ?x\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "from zeta_partial_sum_le_pos''[of \"1 / 2\"]"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < 1 / 2; 1 / 2 \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>n. real n powr - (1 / 2))\n                                 x\\<bar>\n                          \\<le> c * x powr max 0 (1 - 1 / 2)", "obtain A \n    where A: \"A > 0\" \"\\<And>x. x \\<ge> 1 \\<Longrightarrow> \\<bar>sum_upto (\\<lambda>n. 1 / sqrt n) x\\<bar> \\<le> A * sqrt x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1 / 2; 1 / 2 \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> \\<exists>c>0.\n                       \\<forall>x\\<ge>1.\n                          \\<bar>sum_upto (\\<lambda>n. real n powr - (1 / 2))\n                                 x\\<bar>\n                          \\<le> c * x powr max 0 (1 - 1 / 2)\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>0 < A;\n         \\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) x\\<bar>\n            \\<le> A * sqrt x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: max_def powr_half_sqrt powr_minus field_simps)\n\n  \\<comment> \\<open>Finally, we show that $\\sum_{n\\leq x} \\sum_{d\\mid n} \\mu(d) f(n/d) \\in o(x)$.\\<close>"], ["proof (state)\nthis:\n  0 < A\n  1 \\<le> ?x \\<Longrightarrow>\n  \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) ?x\\<bar> \\<le> A * sqrt ?x\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"sum_upto (dirichlet_prod \\<mu> f) \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (dirichlet_prod \\<mu> f) \\<in> o(\\<lambda>x. x)", "proof (rule landau_o.smallI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "fix \\<epsilon> :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "assume \\<epsilon>: \"\\<epsilon> > 0\""], ["proof (state)\nthis:\n  0 < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "have *: \"eventually (\\<lambda>x. \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x) at_top\"\n      if b: \"b \\<ge> 1\" \"A * B / sqrt b \\<le> \\<epsilon> / 3\" \"B / sqrt b \\<le> \\<epsilon> / 3\" for b"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "define K :: real where \"K = sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / n) b\""], ["proof (state)\nthis:\n  K = sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "have \"C \\<noteq> (1 / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C \\<noteq> 1 / 2", "using euler_mascheroni_gt_19_over_33"], ["proof (prove)\nusing this:\n  19 / 33 < euler_mascheroni\n\ngoal (1 subgoal):\n 1. C \\<noteq> 1 / 2", "by auto"], ["proof (state)\nthis:\n  C \\<noteq> 1 / 2\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "hence K: \"K > 0\""], ["proof (prove)\nusing this:\n  C \\<noteq> 1 / 2\n\ngoal (1 subgoal):\n 1. 0 < K", "unfolding K_def f_def sum_upto_def"], ["proof (prove)\nusing this:\n  C \\<noteq> 1 / 2\n\ngoal (1 subgoal):\n 1. 0 < (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> b}.\n           \\<bar>\\<sigma> n - ln (real n) - 2 * C\\<bar> / real n)", "by (intro sum_pos2[where i = 1]) (use \\<open>b \\<ge> 1\\<close> in auto)"], ["proof (state)\nthis:\n  0 < K\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "have \"eventually (\\<lambda>x. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K", "using smalloD_tendsto[OF assms] \\<epsilon> K"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. M x / x) \\<longlongrightarrow> 0) at_top\n  0 < \\<epsilon>\n  0 < K\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K", "by (auto simp: tendsto_iff dist_norm)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K", "obtain c' where c': \"\\<And>x. x \\<ge> c' \\<Longrightarrow> \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K\n\ngoal (1 subgoal):\n 1. (\\<And>c'.\n        (\\<And>x.\n            c' \\<le> x \\<Longrightarrow>\n            \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: eventually_at_top_linorder)"], ["proof (state)\nthis:\n  c' \\<le> ?x \\<Longrightarrow> \\<bar>M ?x / ?x\\<bar> < \\<epsilon> / 3 / K\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "define c where \"c = max 1 c'\""], ["proof (state)\nthis:\n  c = max 1 c'\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "have c: \"\\<bar>M x\\<bar> < \\<epsilon> / 3 / K * x\" if \"x \\<ge> c\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> < \\<epsilon> / 3 / K * x", "using c'[of x] that"], ["proof (prove)\nusing this:\n  c' \\<le> x \\<Longrightarrow> \\<bar>M x / x\\<bar> < \\<epsilon> / 3 / K\n  c \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>M x\\<bar> < \\<epsilon> / 3 / K * x", "by (simp add: c_def field_simps)"], ["proof (state)\nthis:\n  c \\<le> ?x \\<Longrightarrow> \\<bar>M ?x\\<bar> < \\<epsilon> / 3 / K * ?x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "show \"eventually (\\<lambda>x. \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "using eventually_ge_at_top[of \"b * c\"] eventually_ge_at_top[of 1] eventually_ge_at_top[of b]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (b * c)) at_top\n  eventually ((\\<le>) (1::?'a1)) at_top\n  eventually ((\\<le>) b) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "case (elim x)"], ["proof (state)\nthis:\n  b * c \\<le> x\n  1 \\<le> x\n  b \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "define a where \"a = x / b\""], ["proof (state)\nthis:\n  a = x / b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "from elim \\<open>b \\<ge> 1\\<close>"], ["proof (chain)\npicking this:\n  b * c \\<le> x\n  1 \\<le> x\n  b \\<le> x\n  1 \\<le> b", "have ab: \"a \\<ge> 1\" \"b \\<ge> 1\" \"a * b = x\""], ["proof (prove)\nusing this:\n  b * c \\<le> x\n  1 \\<le> x\n  b \\<le> x\n  1 \\<le> b\n\ngoal (1 subgoal):\n 1. 1 \\<le> a &&& 1 \\<le> b &&& a * b = x", "by (simp_all add: a_def field_simps)"], ["proof (state)\nthis:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "from ab"], ["proof (chain)\npicking this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x", "have \"a * 1 \\<le> a * b\""], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n\ngoal (1 subgoal):\n 1. a * 1 \\<le> a * b", "by (intro mult_mono) auto"], ["proof (state)\nthis:\n  a * 1 \\<le> a * b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "hence \"a \\<le> x\""], ["proof (prove)\nusing this:\n  a * 1 \\<le> a * b\n\ngoal (1 subgoal):\n 1. a \\<le> x", "by (simp add: ab(3))"], ["proof (state)\nthis:\n  a \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "from ab"], ["proof (chain)\npicking this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x", "have \"a * 1 \\<le> a * b\" and \"1 * b \\<le> a * b\""], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n\ngoal (1 subgoal):\n 1. a * 1 \\<le> a * b &&& 1 * b \\<le> a * b", "by (intro mult_mono; simp)+"], ["proof (state)\nthis:\n  a * 1 \\<le> a * b\n  1 * b \\<le> a * b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "hence \"a \\<le> x\" \"b \\<le> x\""], ["proof (prove)\nusing this:\n  a * 1 \\<le> a * b\n  1 * b \\<le> a * b\n\ngoal (1 subgoal):\n 1. a \\<le> x &&& b \\<le> x", "by (simp_all add: ab(3))"], ["proof (state)\nthis:\n  a \\<le> x\n  b \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "have \"a = x / b\" \"b = x / a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a = x / b &&& b = x / a", "using ab"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n\ngoal (1 subgoal):\n 1. a = x / b &&& b = x / a", "by (simp_all add: field_simps)"], ["proof (state)\nthis:\n  a = x / b\n  b = x / a\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "have \"sum_upto (dirichlet_prod \\<mu> f) x =\n                sum_upto (\\<lambda>n. \\<mu> n * F (x / n)) a + sum_upto (\\<lambda>n. M (x / n) * f n) b - M a * F b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (dirichlet_prod \\<mu> f) x =\n    sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n    sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n    M a * F b", "unfolding M_def F_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (dirichlet_prod \\<mu> f) x =\n    sum_upto (\\<lambda>n. \\<mu> n * sum_upto f (x / real n)) a +\n    sum_upto (\\<lambda>n. sum_upto \\<mu> (x / real n) * f n) b -\n    sum_upto \\<mu> a * sum_upto f b", "by (rule hyperbola_method) (use ab in auto)"], ["proof (state)\nthis:\n  sum_upto (dirichlet_prod \\<mu> f) x =\n  sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n  sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n  M a * F b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "also"], ["proof (state)\nthis:\n  sum_upto (dirichlet_prod \\<mu> f) x =\n  sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n  sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n  M a * F b\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "have \"\\<bar>\\<dots>\\<bar> \\<le> \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n          sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n          M a * F b\\<bar>\n    \\<le> \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x", "proof (rule order.trans[OF abs_triangle_ineq4] order.trans[OF abs_triangle_ineq] add_mono)+"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n            \\<mu> n * F (x / real n)\\<bar>\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n             \\<bar>\\<mu> n * F (x / real n)\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n  \\<le> sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n  \\<le> sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\n    \\<le> sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a", "unfolding sum_upto_def abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n       \\<bar>\\<mu> n\\<bar> * \\<bar>F (x / real n)\\<bar>)\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n             1 * (B * sqrt (x / real n)))", "using \\<open>a \\<le> x\\<close>"], ["proof (prove)\nusing this:\n  a \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n       \\<bar>\\<mu> n\\<bar> * \\<bar>F (x / real n)\\<bar>)\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> a}.\n             1 * (B * sqrt (x / real n)))", "by (intro sum_mono mult_mono B') (auto simp: moebius_mu_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\n  \\<le> sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>\\<mu> n * F (x / real n)\\<bar>) a\n  \\<le> sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> = B * sqrt x * sum_upto (\\<lambda>n. 1 / sqrt n) a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a =\n    B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a", "by (simp add: sum_upto_def sum_distrib_left real_sqrt_divide)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a =\n  B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 * (B * sqrt (x / real n))) a =\n  B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> B * sqrt x * \\<bar>sum_upto (\\<lambda>n. 1 / sqrt n) a\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n    \\<le> B * sqrt x *\n          \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>", "using B(1) \\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  0 < B\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n    \\<le> B * sqrt x *\n          \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>", "by (intro mult_left_mono) auto"], ["proof (state)\nthis:\n  B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n  \\<le> B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  B * sqrt x * sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\n  \\<le> B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> B * sqrt x * (A * sqrt a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n    \\<le> B * sqrt x * (A * sqrt a)", "using \\<open>a \\<ge> 1\\<close> B(1) \\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  0 < B\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n    \\<le> B * sqrt x * (A * sqrt a)", "by (intro mult_left_mono A) auto"], ["proof (state)\nthis:\n  B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n  \\<le> B * sqrt x * (A * sqrt a)\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  B * sqrt x * \\<bar>sum_upto (\\<lambda>x. 1 / sqrt (real x)) a\\<bar>\n  \\<le> B * sqrt x * (A * sqrt a)\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> = A * B / sqrt b * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B * sqrt x * (A * sqrt a) = A * B / sqrt b * x", "using ab \\<open>x \\<ge> 1\\<close>\\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n  1 \\<le> x\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. B * sqrt x * (A * sqrt a) = A * B / sqrt b * x", "by (subst \\<open>a = x / b\\<close>) (simp_all add: field_simps real_sqrt_divide)"], ["proof (state)\nthis:\n  B * sqrt x * (A * sqrt a) = A * B / sqrt b * x\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  B * sqrt x * (A * sqrt a) = A * B / sqrt b * x\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> \\<epsilon> / 3 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * B / sqrt b * x \\<le> \\<epsilon> / 3 * x", "using \\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. A * B / sqrt b * x \\<le> \\<epsilon> / 3 * x", "by (intro mult_right_mono b) auto"], ["proof (state)\nthis:\n  A * B / sqrt b * x \\<le> \\<epsilon> / 3 * x\n\ngoal (3 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 3. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n  \\<le> \\<epsilon> / 3 * x", "show \"\\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / n)) a\\<bar> \\<le> \\<epsilon> / 3 * x\""], ["proof (prove)\nusing this:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n  \\<le> \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n    \\<le> \\<epsilon> / 3 * x", "."], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a\\<bar>\n  \\<le> \\<epsilon> / 3 * x\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<bar>sum_upto (\\<lambda>n. M (x / n) * f n) b\\<bar> \\<le> sum_upto (\\<lambda>n. \\<bar>M (x / n) * f n\\<bar>) b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> b}.\n            M (x / real n) * f n\\<bar>\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> b}.\n             \\<bar>M (x / real n) * f n\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n  \\<le> sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n  \\<le> sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> sum_upto (\\<lambda>n. \\<epsilon> / 3 / K * (x / n) * \\<bar>f n\\<bar>) b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b\n    \\<le> sum_upto\n           (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>)\n           b", "unfolding sum_upto_def abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> b}.\n       \\<bar>M (x / real n)\\<bar> * \\<bar>f n\\<bar>)\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> b}.\n             \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>)", "proof (intro sum_mono mult_right_mono)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "assume n: \"n \\<in> {n. n > 0 \\<and> real n \\<le> b}\""], ["proof (state)\nthis:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> b}\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "have \"c \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> c", "by (simp add: c_def)"], ["proof (state)\nthis:\n  0 \\<le> c\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "with n"], ["proof (chain)\npicking this:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> b}\n  0 \\<le> c", "have \"c * n \\<le> c * b\""], ["proof (prove)\nusing this:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> b}\n  0 \\<le> c\n\ngoal (1 subgoal):\n 1. c * real n \\<le> c * b", "by (intro mult_left_mono) auto"], ["proof (state)\nthis:\n  c * real n \\<le> c * b\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "also"], ["proof (state)\nthis:\n  c * real n \\<le> c * b\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "have \"\\<dots> \\<le> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * b \\<le> x", "using \\<open>b * c \\<le> x\\<close>"], ["proof (prove)\nusing this:\n  b * c \\<le> x\n\ngoal (1 subgoal):\n 1. c * b \\<le> x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  c * b \\<le> x\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n 2. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "finally"], ["proof (chain)\npicking this:\n  c * real n \\<le> x", "show \"\\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\""], ["proof (prove)\nusing this:\n  c * real n \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)", "by (intro less_imp_le[OF c]) (use n in \\<open>auto simp: field_simps\\<close>)"], ["proof (state)\nthis:\n  \\<bar>M (x / real n)\\<bar> \\<le> \\<epsilon> / 3 / K * (x / real n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       n \\<in> {i. 0 < i \\<and> real i \\<le> b} \\<Longrightarrow>\n       0 \\<le> \\<bar>f n\\<bar>", "qed auto"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b\n  \\<le> sum_upto\n         (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<bar>M (x / real n) * f n\\<bar>) b\n  \\<le> sum_upto\n         (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> = \\<epsilon> / 3 * x / K * sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / n) b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>) b =\n    \\<epsilon> / 3 * x / K *\n    sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b", "by (simp add: sum_upto_def sum_distrib_left)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>)\n   b =\n  \\<epsilon> / 3 * x / K * sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<epsilon> / 3 / K * (x / real n) * \\<bar>f n\\<bar>)\n   b =\n  \\<epsilon> / 3 * x / K * sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> = \\<epsilon> / 3 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<epsilon> / 3 * x / K *\n    sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b =\n    \\<epsilon> / 3 * x", "unfolding K_def [symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<epsilon> / 3 * x / K * K = \\<epsilon> / 3 * x", "using K"], ["proof (prove)\nusing this:\n  0 < K\n\ngoal (1 subgoal):\n 1. \\<epsilon> / 3 * x / K * K = \\<epsilon> / 3 * x", "by simp"], ["proof (state)\nthis:\n  \\<epsilon> / 3 * x / K *\n  sum_upto (\\<lambda>n. \\<bar>f n\\<bar> / real n) b =\n  \\<epsilon> / 3 * x\n\ngoal (2 subgoals):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x\n 2. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n  \\<le> \\<epsilon> / 3 * x", "show \"\\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar> \\<le> \\<epsilon> / 3 * x\""], ["proof (prove)\nusing this:\n  \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n  \\<le> \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n    \\<le> \\<epsilon> / 3 * x", "."], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. M (x / real n) * f n) b\\<bar>\n  \\<le> \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<bar>M a * F b\\<bar> \\<le> a * (B * sqrt b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> a * (B * sqrt b)", "unfolding abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>M a\\<bar> * \\<bar>F b\\<bar> \\<le> a * (B * sqrt b)", "using ab"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n  a * b = x\n\ngoal (1 subgoal):\n 1. \\<bar>M a\\<bar> * \\<bar>F b\\<bar> \\<le> a * (B * sqrt b)", "by (intro mult_mono sum_moebius_mu_bound B') auto"], ["proof (state)\nthis:\n  \\<bar>M a * F b\\<bar> \\<le> a * (B * sqrt b)\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  \\<bar>M a * F b\\<bar> \\<le> a * (B * sqrt b)\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> = B / sqrt b * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * (B * sqrt b) = B / sqrt b * x", "using ab(1,2)"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  1 \\<le> b\n\ngoal (1 subgoal):\n 1. a * (B * sqrt b) = B / sqrt b * x", "by (simp add: real_sqrt_mult \\<open>b = x / a\\<close> real_sqrt_divide field_simps)"], ["proof (state)\nthis:\n  a * (B * sqrt b) = B / sqrt b * x\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "also"], ["proof (state)\nthis:\n  a * (B * sqrt b) = B / sqrt b * x\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "have \"\\<dots> \\<le> \\<epsilon> / 3 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B / sqrt b * x \\<le> \\<epsilon> / 3 * x", "using \\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. B / sqrt b * x \\<le> \\<epsilon> / 3 * x", "by (intro mult_right_mono b) auto"], ["proof (state)\nthis:\n  B / sqrt b * x \\<le> \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "show \"\\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x\""], ["proof (prove)\nusing this:\n  \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x", "."], ["proof (state)\nthis:\n  \\<bar>M a * F b\\<bar> \\<le> \\<epsilon> / 3 * x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n        sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n        M a * F b\\<bar>\n  \\<le> \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>n. \\<mu> n * F (x / real n)) a +\n        sum_upto (\\<lambda>n. M (x / real n) * f n) b -\n        M a * F b\\<bar>\n  \\<le> \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "have \"\\<dots> = \\<epsilon> * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x =\n    \\<epsilon> * x", "by simp"], ["proof (state)\nthis:\n  \\<epsilon> / 3 * x + \\<epsilon> / 3 * x + \\<epsilon> / 3 * x =\n  \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>b * c \\<le> x; 1 \\<le> x; b \\<le> x\\<rbrakk>\n       \\<Longrightarrow> \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                         \\<le> \\<epsilon> * x", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "show ?case"], ["proof (prove)\nusing this:\n  \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "."], ["proof (state)\nthis:\n  \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?b; A * B / sqrt ?b \\<le> \\<epsilon> / 3;\n   B / sqrt ?b \\<le> \\<epsilon> / 3\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in at_top.\n                       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar>\n                       \\<le> \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "have \"eventually (\\<lambda>b::real. b \\<ge> 1 \\<and> A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and> B / sqrt b \\<le> \\<epsilon> / 3) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F b in at_top.\n       1 \\<le> b \\<and>\n       A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and>\n       B / sqrt b \\<le> \\<epsilon> / 3", "using \\<epsilon>"], ["proof (prove)\nusing this:\n  0 < \\<epsilon>\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F b in at_top.\n       1 \\<le> b \\<and>\n       A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and>\n       B / sqrt b \\<le> \\<epsilon> / 3", "by (intro eventually_conj; real_asymp)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F b in at_top.\n     1 \\<le> b \\<and>\n     A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and>\n     B / sqrt b \\<le> \\<epsilon> / 3\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F b in at_top.\n     1 \\<le> b \\<and>\n     A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and>\n     B / sqrt b \\<le> \\<epsilon> / 3", "obtain b where \"b \\<ge> 1\" \"A * B / sqrt b \\<le> \\<epsilon> / 3\" \"B / sqrt b \\<le> \\<epsilon> / 3\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F b in at_top.\n     1 \\<le> b \\<and>\n     A * B / sqrt b \\<le> \\<epsilon> / 3 \\<and>\n     B / sqrt b \\<le> \\<epsilon> / 3\n\ngoal (1 subgoal):\n 1. (\\<And>b.\n        \\<lbrakk>1 \\<le> b; A * B / sqrt b \\<le> \\<epsilon> / 3;\n         B / sqrt b \\<le> \\<epsilon> / 3\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: eventually_at_top_linorder)"], ["proof (state)\nthis:\n  1 \\<le> b\n  A * B / sqrt b \\<le> \\<epsilon> / 3\n  B / sqrt b \\<le> \\<epsilon> / 3\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "from *[OF this]"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "have \"eventually (\\<lambda>x. \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x) at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x", "."], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<And>c.\n       0 < c \\<Longrightarrow>\n       \\<forall>\\<^sub>F x in at_top.\n          norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> c * norm x", "thus \"eventually (\\<lambda>x. norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> \\<epsilon> * norm x) at_top\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> \\<epsilon> * norm x", "using eventually_ge_at_top[of 0]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<bar>sum_upto (dirichlet_prod \\<mu> f) x\\<bar> \\<le> \\<epsilon> * x\n  eventually ((\\<le>) (0::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> \\<epsilon> * norm x", "by eventually_elim simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     norm (sum_upto (dirichlet_prod \\<mu> f) x) \\<le> \\<epsilon> * norm x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum_upto (dirichlet_prod \\<mu> f) \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"(\\<lambda>x. \\<psi> x - x) \\<in> \\<Theta>(\\<lambda>x. -(sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x - x)\n    \\<in> \\<Theta>(\\<lambda>x.\n                      - (sum_upto (dirichlet_prod \\<mu> f) x +\n                         (frac x + 2 * C)))", "by (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]], subst eq) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<psi> x - x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    - (sum_upto (dirichlet_prod \\<mu> f) x +\n                       (frac x + 2 * C)))\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "hence \"(\\<lambda>x. \\<psi> x - x) \\<in> \\<Theta>(\\<lambda>x. sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<psi> x - x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    - (sum_upto (dirichlet_prod \\<mu> f) x +\n                       (frac x + 2 * C)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x - x)\n    \\<in> \\<Theta>(\\<lambda>x.\n                      sum_upto (dirichlet_prod \\<mu> f) x +\n                      (frac x + 2 * C))", "by (simp only: landau_theta.uminus)"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<psi> x - x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<psi> x - x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"(\\<lambda>x. sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C)) \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\n    \\<in> o(\\<lambda>x. x)", "using \\<open>sum_upto (dirichlet_prod \\<mu> f) \\<in> o(\\<lambda>x. x)\\<close>"], ["proof (prove)\nusing this:\n  sum_upto (dirichlet_prod \\<mu> f) \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\n    \\<in> o(\\<lambda>x. x)", "by (rule sum_in_smallo) real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto (dirichlet_prod \\<mu> f) x + (frac x + 2 * C))\n  \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. \\<psi> x - x) \\<in> o(\\<lambda>x. x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<psi> x - x) \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "by (rule smallo_imp_asymp_equiv)"], ["proof (state)\nthis:\n  \\<psi> \\<sim>[at_top] (\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  We now turn to a related fact: For the weighted sum $A(x) := \\sum_{n\\leq x} \\mu(n)/n$, the\n  asymptotic relation $A(x)\\in o(1)$ is also equivalent to the Prime Number Theorem.\n  Like Apostol, we only show one direction, namely that $A(x)\\in o(1)$ implies the PNT.\n\\<close>"], ["", "context\n  fixes A defines \"A \\<equiv> sum_upto (\\<lambda>n. moebius_mu n / n)\"\nbegin"], ["", "lemma sum_upto_moebius_mu_integral': \"x > 1 \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\"\n  and sum_upto_moebius_mu_integrable': \"a \\<ge> 1 \\<Longrightarrow> A integrable_on {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}) &&&\n    (1 \\<le> a \\<Longrightarrow> A integrable_on {a..b})", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "fix a b :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "assume ab: \"a \\<ge> 1\" \"a < b\""], ["proof (state)\nthis:\n  1 \\<le> a\n  a < b\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "have \"((\\<lambda>t. A t * 1) has_integral A b * b - A a * a -\n            (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n / n * n)) {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t. A t * 1) has_integral\n     A b * b - A a * a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n / real n * real n))\n     {a..b}", "unfolding M_def A_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         sum_upto (\\<lambda>n. moebius_mu n / real n) t * 1) has_integral\n     sum_upto (\\<lambda>n. moebius_mu n / real n) b * b -\n     sum_upto (\\<lambda>n. moebius_mu n / real n) a * a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n / real n * real n))\n     {a..b}", "using ab"], ["proof (prove)\nusing this:\n  1 \\<le> a\n  a < b\n\ngoal (1 subgoal):\n 1. ((\\<lambda>t.\n         sum_upto (\\<lambda>n. moebius_mu n / real n) t * 1) has_integral\n     sum_upto (\\<lambda>n. moebius_mu n / real n) b * b -\n     sum_upto (\\<lambda>n. moebius_mu n / real n) a * a -\n     (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n / real n * real n))\n     {a..b}", "by (intro partial_summation_strong [where X = \"{}\"])\n         (auto intro!: derivative_eq_intros continuous_intros\n               simp flip: has_field_derivative_iff_has_vector_derivative)"], ["proof (state)\nthis:\n  ((\\<lambda>t. A t * 1) has_integral\n   A b * b - A a * a -\n   (\\<Sum>n\\<in>real -` {a<..b}. moebius_mu n / real n * real n))\n   {a..b}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. A t * 1) has_integral\n                     A ?ba2 * ?ba2 - A ?aa2 * ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n / real n * real n))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "note * = this"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. A t * 1) has_integral\n                     A ?ba2 * ?ba2 - A ?aa2 * ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n / real n * real n))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "{"], ["proof (state)\nthis:\n  \\<lbrakk>1 \\<le> ?aa2; ?aa2 < ?ba2\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. A t * 1) has_integral\n                     A ?ba2 * ?ba2 - A ?aa2 * ?aa2 -\n                     (\\<Sum>n\\<in>real -` {?aa2<..?ba2}.\n                        moebius_mu n / real n * real n))\n                     {?aa2..?ba2}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "fix x :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "assume x: \"x > 1\""], ["proof (state)\nthis:\n  1 < x\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "have [simp]: \"A 1 = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A 1 = 1", "by (simp add: A_def)"], ["proof (state)\nthis:\n  A 1 = 1\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "have \"(\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / n * n) =\n            (\\<Sum>n\\<in>insert 1 (real -` {1<..x}). moebius_mu n / n * n) - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) =\n    (\\<Sum>n\\<in>insert 1 (real -` {1<..x}).\n       moebius_mu n / real n * real n) -\n    1", "using finite_vimage_real_of_nat_greaterThanAtMost[of 1 x]"], ["proof (prove)\nusing this:\n  finite (real -` {1<..x})\n\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) =\n    (\\<Sum>n\\<in>insert 1 (real -` {1<..x}).\n       moebius_mu n / real n * real n) -\n    1", "by (subst sum.insert) auto"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) =\n  (\\<Sum>n\\<in>insert 1 (real -` {1<..x}). moebius_mu n / real n * real n) -\n  1\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "also"], ["proof (state)\nthis:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) =\n  (\\<Sum>n\\<in>insert 1 (real -` {1<..x}). moebius_mu n / real n * real n) -\n  1\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "have \"insert 1 (real -` {1<..x}) = {n. n > 0 \\<and> real n \\<le> x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. insert 1 (real -` {1<..x}) = {n. 0 < n \\<and> real n \\<le> x}", "using x"], ["proof (prove)\nusing this:\n  1 < x\n\ngoal (1 subgoal):\n 1. insert 1 (real -` {1<..x}) = {n. 0 < n \\<and> real n \\<le> x}", "by auto"], ["proof (state)\nthis:\n  insert 1 (real -` {1<..x}) = {n. 0 < n \\<and> real n \\<le> x}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "also"], ["proof (state)\nthis:\n  insert 1 (real -` {1<..x}) = {n. 0 < n \\<and> real n \\<le> x}\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "have \"(\\<Sum>n | 0 < n \\<and> real n \\<le> x. moebius_mu n / real n * real n) = M x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<le> x.\n       moebius_mu n / real n * real n) =\n    M x", "unfolding M_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<le> x.\n       moebius_mu n / real n * real n) =\n    sum moebius_mu {i. 0 < i \\<and> real i \\<le> x}", "by (intro sum.cong) auto"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<le> x. moebius_mu n / real n * real n) =\n  M x\n\ngoal (2 subgoals):\n 1. 1 < x \\<Longrightarrow> (A has_integral x * A x - M x) {1..x}\n 2. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) = M x - 1", "show \"(A has_integral x * A x - M x) {1..x}\""], ["proof (prove)\nusing this:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) = M x - 1\n\ngoal (1 subgoal):\n 1. (A has_integral x * A x - M x) {1..x}", "using *[of 1 x] x"], ["proof (prove)\nusing this:\n  (\\<Sum>n\\<in>real -` {1<..x}. moebius_mu n / real n * real n) = M x - 1\n  \\<lbrakk>1 \\<le> 1; 1 < x\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. A t * 1) has_integral\n                     A x * x - A 1 * 1 -\n                     (\\<Sum>n\\<in>real -` {1<..x}.\n                        moebius_mu n / real n * real n))\n                     {1..x}\n  1 < x\n\ngoal (1 subgoal):\n 1. (A has_integral x * A x - M x) {1..x}", "by (simp add: mult_ac)"], ["proof (state)\nthis:\n  (A has_integral x * A x - M x) {1..x}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "}"], ["proof (state)\nthis:\n  1 < ?xa2 \\<Longrightarrow>\n  (A has_integral ?xa2 * A ?xa2 - M ?xa2) {1..?xa2}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "{"], ["proof (state)\nthis:\n  1 < ?xa2 \\<Longrightarrow>\n  (A has_integral ?xa2 * A ?xa2 - M ?xa2) {1..?xa2}\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "fix a b :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "assume ab: \"a \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> a\n\ngoal (1 subgoal):\n 1. 1 \\<le> a \\<Longrightarrow> A integrable_on {a..b}", "show \"A integrable_on {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A integrable_on {a..b}", "using *[of a b] ab"], ["proof (prove)\nusing this:\n  \\<lbrakk>1 \\<le> a; a < b\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>t. A t * 1) has_integral\n                     A b * b - A a * a -\n                     (\\<Sum>n\\<in>real -` {a<..b}.\n                        moebius_mu n / real n * real n))\n                     {a..b}\n  1 \\<le> a\n\ngoal (1 subgoal):\n 1. A integrable_on {a..b}", "by (cases a b rule: linorder_cases) (auto intro: integrable_negligible)"], ["proof (state)\nthis:\n  A integrable_on {a..b}\n\ngoal:\nNo subgoals!", "}"], ["proof (state)\nthis:\n  1 \\<le> ?aa2 \\<Longrightarrow> A integrable_on {?aa2..?ba2}\n\ngoal:\nNo subgoals!", "qed"], ["", "(* 4.16 *)"], ["", "theorem sum_moebius_mu_div_n_smallo_imp_PNT:\n  assumes smallo: \"A \\<in> o(\\<lambda>_. 1)\"\n  shows   \"M \\<in> o(\\<lambda>x. x)\" and \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x) &&& \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. M \\<in> o(\\<lambda>x. x)\n 2. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"eventually (\\<lambda>x. M x = x * A x - integral {1..x} A) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. M x = x * A x - integral {1..x} A", "using eventually_gt_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((<) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. M x = x * A x - integral {1..x} A", "by eventually_elim (use sum_upto_moebius_mu_integral' in \\<open>simp add: has_integral_iff\\<close>)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. M x = x * A x - integral {1..x} A\n\ngoal (2 subgoals):\n 1. M \\<in> o(\\<lambda>x. x)\n 2. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "hence \"M \\<in> \\<Theta>(\\<lambda>x. x * A x - integral {1..x} A)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. M x = x * A x - integral {1..x} A\n\ngoal (1 subgoal):\n 1. M \\<in> \\<Theta>(\\<lambda>x. x * A x - integral {1..x} A)", "by (rule bigthetaI_cong)"], ["proof (state)\nthis:\n  M \\<in> \\<Theta>(\\<lambda>x. x * A x - integral {1..x} A)\n\ngoal (2 subgoals):\n 1. M \\<in> o(\\<lambda>x. x)\n 2. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  M \\<in> \\<Theta>(\\<lambda>x. x * A x - integral {1..x} A)\n\ngoal (2 subgoals):\n 1. M \\<in> o(\\<lambda>x. x)\n 2. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "have \"(\\<lambda>x. x * A x - integral {1..x} A) \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * A x - integral {1..x} A) \\<in> o(\\<lambda>x. x)", "proof (intro sum_in_smallo)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. x * A x) \\<in> o(\\<lambda>x. x)\n 2. (\\<lambda>x. integral {1..x} A) \\<in> o(\\<lambda>x. x)", "from smallo"], ["proof (chain)\npicking this:\n  A \\<in> o(\\<lambda>_. 1)", "show \"(\\<lambda>x. x * A x) \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  A \\<in> o(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * A x) \\<in> o(\\<lambda>x. x)", "by (simp add: landau_divide_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. x * A x) \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral {1..x} A) \\<in> o(\\<lambda>x. x)", "show \"(\\<lambda>x. integral {1..x} A) \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral {1..x} A) \\<in> o(\\<lambda>x. x)", "by (intro integral_smallo[OF smallo] sum_upto_moebius_mu_integrable')\n         (auto intro!: derivative_eq_intros filterlim_ident)"], ["proof (state)\nthis:\n  (\\<lambda>x. integral {1..x} A) \\<in> o(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. x * A x - integral {1..x} A) \\<in> o(\\<lambda>x. x)\n\ngoal (2 subgoals):\n 1. M \\<in> o(\\<lambda>x. x)\n 2. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  M \\<in> o(\\<lambda>x. x)", "show \"M \\<in> o(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  M \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. M \\<in> o(\\<lambda>x. x)", "."], ["proof (state)\nthis:\n  M \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "thus \"\\<psi> \\<sim>[at_top] (\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  M \\<in> o(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<sim>[at_top] (\\<lambda>x. x)", "by (rule sum_moebius_mu_sublinear_imp_PNT)"], ["proof (state)\nthis:\n  \\<psi> \\<sim>[at_top] (\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"], ["", "end"]]}