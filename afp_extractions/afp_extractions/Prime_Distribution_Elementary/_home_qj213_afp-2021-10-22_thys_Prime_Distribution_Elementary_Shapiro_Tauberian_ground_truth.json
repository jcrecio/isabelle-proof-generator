{"file_name": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary/Shapiro_Tauberian.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary", "problem_names": ["lemma fin: \"finite X\" if \"X \\<subseteq> {n. real n \\<le> x}\" for X x", "lemma S_mono: \"S x \\<le> S y\" if \"x \\<le> y\" for x y", "lemma split:\n  fixes f :: \"nat \\<Rightarrow> real\"\n  assumes \"\\<alpha> \\<in> {0..1}\"\n  shows   \"sum_upto f x = sum_upto f (\\<alpha>*x) + (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. f n)\"", "lemma S_diff_T_diff: \"S x - S (x / 2) \\<le> T x - 2 * T (x / 2)\"", "lemma\n  shows diff_bound_strong: \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c*x}\"\n    and asymptotics:       \"(\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\"\n    and upper:             \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\"\n    and lower:             \"\\<exists>c>0. \\<forall>x\\<ge>1/c. S x \\<ge> c * x\"\n    and bigtheta:          \"S \\<in> \\<Theta>(\\<lambda>x. x)\"", "lemma dirichlet_prod_mangoldt1_floor_bigo:\n  includes prime_counting_notation\n  shows \"(\\<lambda>x. dirichlet_prod' (\\<lambda>n. ind prime n * ln n) floor x - x * ln x) \\<in> O(\\<lambda>x. x)\"", "lemma dirichlet_prod'_mangoldt_floor_asymptotics:\n  \"(\\<lambda>x. dirichlet_prod' mangoldt floor x - x * ln x + x) \\<in> O(ln)\"", "lemma sum_upto_\\<psi>_x_over_n_asymptotics:\n        \"(\\<lambda>x. sum_upto (\\<lambda>n. primes_psi (x / n)) x - x * ln x + x) \\<in> O(ln)\"\n  and sum_upto_\\<theta>_x_over_n_asymptotics:\n        \"(\\<lambda>x. sum_upto (\\<lambda>n. primes_theta (x / n)) x - x * ln x) \\<in> O(\\<lambda>x. x)\""], "translations": [["", "lemma fin: \"finite X\" if \"X \\<subseteq> {n. real n \\<le> x}\" for X x"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite X", "by (rule finite_subset[of _ \"{..nat \\<lfloor>x\\<rfloor>}\"]) (use that in \\<open>auto simp: le_nat_iff le_floor_iff\\<close>)"], ["", "lemma S_mono: \"S x \\<le> S y\" if \"x \\<le> y\" for x y"], ["proof (prove)\ngoal (1 subgoal):\n 1. S x \\<le> S y", "unfolding S_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum a {i. 0 < i \\<and> real i \\<le> x}\n    \\<le> sum a {i. 0 < i \\<and> real i \\<le> y}", "using that"], ["proof (prove)\nusing this:\n  x \\<le> y\n\ngoal (1 subgoal):\n 1. sum a {i. 0 < i \\<and> real i \\<le> x}\n    \\<le> sum a {i. 0 < i \\<and> real i \\<le> y}", "by (intro sum_mono2 fin[of _ y] a_nonneg) auto"], ["", "lemma split:\n  fixes f :: \"nat \\<Rightarrow> real\"\n  assumes \"\\<alpha> \\<in> {0..1}\"\n  shows   \"sum_upto f x = sum_upto f (\\<alpha>*x) + (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. f n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "proof (cases \"x > 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n 2. \\<not> 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "case False"], ["proof (state)\nthis:\n  \\<not> 0 < x\n\ngoal (2 subgoals):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n 2. \\<not> 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "hence *: \"{n. n > 0 \\<and> real n \\<le> x} = {}\" \"{n. n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}} = {}\""], ["proof (prove)\nusing this:\n  \\<not> 0 < x\n\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<le> x} = {} &&&\n    {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}} = {}", "using mult_right_mono[of \\<alpha> 1 x] assms"], ["proof (prove)\nusing this:\n  \\<not> 0 < x\n  \\<lbrakk>\\<alpha> \\<le> 1; 0 \\<le> x\\<rbrakk>\n  \\<Longrightarrow> \\<alpha> * x \\<le> 1 * x\n  \\<alpha> \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<le> x} = {} &&&\n    {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}} = {}", "by auto"], ["proof (state)\nthis:\n  {n. 0 < n \\<and> real n \\<le> x} = {}\n  {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}} = {}\n\ngoal (2 subgoals):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n 2. \\<not> 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "have \"\\<alpha> * x \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> 0", "using False assms"], ["proof (prove)\nusing this:\n  \\<not> 0 < x\n  \\<alpha> \\<in> {0..1}\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> 0", "by (intro mult_nonneg_nonpos) auto"], ["proof (state)\nthis:\n  \\<alpha> * x \\<le> 0\n\ngoal (2 subgoals):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n 2. \\<not> 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "hence **: \"{n. n > 0 \\<and> real n \\<le> \\<alpha> * x} = {}\""], ["proof (prove)\nusing this:\n  \\<alpha> * x \\<le> 0\n\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} = {}", "by auto"], ["proof (state)\nthis:\n  {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} = {}\n\ngoal (2 subgoals):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n 2. \\<not> 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "unfolding sum_upto_def * **"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {} = sum f {} + sum f {}", "by auto"], ["proof (state)\nthis:\n  sum_upto f x =\n  sum_upto f (\\<alpha> * x) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "case True"], ["proof (state)\nthis:\n  0 < x\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "have \"sum_upto f x = (\\<Sum>n | n > 0 \\<and> real n \\<le> x. f n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto f x = (\\<Sum>n | 0 < n \\<and> real n \\<le> x. f n)", "by (simp add: sum_upto_def)"], ["proof (state)\nthis:\n  sum_upto f x = (\\<Sum>n | 0 < n \\<and> real n \\<le> x. f n)\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "also"], ["proof (state)\nthis:\n  sum_upto f x = (\\<Sum>n | 0 < n \\<and> real n \\<le> x. f n)\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "have \"{n. n > 0 \\<and> real n \\<le> x} =\n                {n. n > 0 \\<and> real n \\<le> \\<alpha>*x} \\<union> {n. n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<le> x} =\n    {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n    {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}", "using assms True mult_right_mono[of \\<alpha> 1 x]"], ["proof (prove)\nusing this:\n  \\<alpha> \\<in> {0..1}\n  0 < x\n  \\<lbrakk>\\<alpha> \\<le> 1; 0 \\<le> x\\<rbrakk>\n  \\<Longrightarrow> \\<alpha> * x \\<le> 1 * x\n\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<le> x} =\n    {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n    {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}", "by (force intro: order_trans)"], ["proof (state)\nthis:\n  {n. 0 < n \\<and> real n \\<le> x} =\n  {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n  {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "also"], ["proof (state)\nthis:\n  {n. 0 < n \\<and> real n \\<le> x} =\n  {n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n  {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "have \"(\\<Sum>n\\<in>\\<dots>. f n) = sum_upto f (\\<alpha>*x) + (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. f n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f\n     ({n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n      {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}) =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "by (subst sum.union_disjoint) (auto intro: fin simp: sum_upto_def)"], ["proof (state)\nthis:\n  sum f\n   ({n. 0 < n \\<and> real n \\<le> \\<alpha> * x} \\<union>\n    {n. 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}}) =\n  sum_upto f (\\<alpha> * x) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n\ngoal (1 subgoal):\n 1. 0 < x \\<Longrightarrow>\n    sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "finally"], ["proof (chain)\npicking this:\n  sum_upto f x =\n  sum_upto f (\\<alpha> * x) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "show ?thesis"], ["proof (prove)\nusing this:\n  sum_upto f x =\n  sum_upto f (\\<alpha> * x) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n\ngoal (1 subgoal):\n 1. sum_upto f x =\n    sum_upto f (\\<alpha> * x) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)", "."], ["proof (state)\nthis:\n  sum_upto f x =\n  sum_upto f (\\<alpha> * x) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. f n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma S_diff_T_diff: \"S x - S (x / 2) \\<le> T x - 2 * T (x / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "note fin = fin[of _ x]"], ["proof (state)\nthis:\n  ?X \\<subseteq> {n. real n \\<le> x} \\<Longrightarrow> finite ?X\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have T_diff_eq:\n    \"T x - 2 * T (x / 2) = sum_upto (\\<lambda>n. a n * (\\<lfloor>x / n\\<rfloor> - 2 * \\<lfloor>x / (2 * n)\\<rfloor>)) (x / 2) +\n        (\\<Sum>n | n > 0 \\<and> real n \\<in> {x/2<..x}. a n * \\<lfloor>x / n\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. T x - 2 * T (x / 2) =\n    sum_upto\n     (\\<lambda>n.\n         a n *\n         real_of_int\n          (\\<lfloor>x / real n\\<rfloor> -\n           2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n     (x / 2) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>)", "unfolding T_def dirichlet_prod'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>m. a m * real_of_int \\<lfloor>x / real m\\<rfloor>)\n     x -\n    2 *\n    sum_upto\n     (\\<lambda>m. a m * real_of_int \\<lfloor>x / 2 / real m\\<rfloor>)\n     (x / 2) =\n    sum_upto\n     (\\<lambda>n.\n         a n *\n         real_of_int\n          (\\<lfloor>x / real n\\<rfloor> -\n           2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n     (x / 2) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>)", "by (subst split[where \\<alpha> = \"1/2\"])\n       (simp_all add: sum_upto_def sum_subtractf ring_distribs\n                      sum_distrib_left sum_distrib_right mult_ac)"], ["proof (state)\nthis:\n  T x - 2 * T (x / 2) =\n  sum_upto\n   (\\<lambda>n.\n       a n *\n       real_of_int\n        (\\<lfloor>x / real n\\<rfloor> -\n         2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n   (x / 2) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have \"S x - S (x / 2) = (\\<Sum>n | n > 0 \\<and> real n \\<in> {x/2<..x}. a n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S x - S (x / 2) = (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n)", "unfolding S_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto a x - sum_upto a (x / 2) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n)", "by (subst split[where \\<alpha> = \"1 / 2\"]) (auto simp: sum_upto_def)"], ["proof (state)\nthis:\n  S x - S (x / 2) = (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "also"], ["proof (state)\nthis:\n  S x - S (x / 2) = (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have \"\\<dots> = (\\<Sum>n | n > 0 \\<and> real n \\<in> {x/2<..x}. a n * \\<lfloor>x / n\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>)", "proof (intro sum.cong)"], ["proof (state)\ngoal (2 subgoals):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n 2. \\<And>xa.\n       xa \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} \\<Longrightarrow>\n       a xa = a xa * real_of_int \\<lfloor>x / real xa\\<rfloor>", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n 2. \\<And>xa.\n       xa \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} \\<Longrightarrow>\n       a xa = a xa * real_of_int \\<lfloor>x / real xa\\<rfloor>", "assume \"n \\<in> {n. n > 0 \\<and> real n \\<in> {x/2<..x}}\""], ["proof (state)\nthis:\n  n \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n\ngoal (2 subgoals):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n 2. \\<And>xa.\n       xa \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} \\<Longrightarrow>\n       a xa = a xa * real_of_int \\<lfloor>x / real xa\\<rfloor>", "hence \"x / n \\<ge> 1\" \"x / n < 2\""], ["proof (prove)\nusing this:\n  n \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n\ngoal (1 subgoal):\n 1. 1 \\<le> x / real n &&& x / real n < 2", "by (auto simp: field_simps)"], ["proof (state)\nthis:\n  1 \\<le> x / real n\n  x / real n < 2\n\ngoal (2 subgoals):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n 2. \\<And>xa.\n       xa \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} \\<Longrightarrow>\n       a xa = a xa * real_of_int \\<lfloor>x / real xa\\<rfloor>", "hence \"\\<lfloor>x / n\\<rfloor> = 1\""], ["proof (prove)\nusing this:\n  1 \\<le> x / real n\n  x / real n < 2\n\ngoal (1 subgoal):\n 1. \\<lfloor>x / real n\\<rfloor> = 1", "by linarith"], ["proof (state)\nthis:\n  \\<lfloor>x / real n\\<rfloor> = 1\n\ngoal (2 subgoals):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}\n 2. \\<And>xa.\n       xa \\<in> {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} \\<Longrightarrow>\n       a xa = a xa * real_of_int \\<lfloor>x / real xa\\<rfloor>", "thus \"a n = a n * \\<lfloor>x / n\\<rfloor>\""], ["proof (prove)\nusing this:\n  \\<lfloor>x / real n\\<rfloor> = 1\n\ngoal (1 subgoal):\n 1. a n = a n * real_of_int \\<lfloor>x / real n\\<rfloor>", "by simp"], ["proof (state)\nthis:\n  a n = a n * real_of_int \\<lfloor>x / real n\\<rfloor>\n\ngoal (1 subgoal):\n 1. {n. 0 < n \\<and> real n \\<in> {x / 2<..x}} =\n    {n. 0 < n \\<and> real n \\<in> {x / 2<..x}}", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "also"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}. a n) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have \"\\<dots> = 0 + \\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n    0 +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n  0 +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "also"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n  0 +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have \"0 \\<le> sum_upto (\\<lambda>n. a n * (\\<lfloor>x / n\\<rfloor> - 2 * \\<lfloor>x / (2 * n)\\<rfloor>)) (x / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> sum_upto\n             (\\<lambda>n.\n                 a n *\n                 real_of_int\n                  (\\<lfloor>x / real n\\<rfloor> -\n                   2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n             (x / 2)", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x / 2}.\n               a n *\n               real_of_int\n                (\\<lfloor>x / real n\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * n)\\<rfloor>))", "proof (intro sum_nonneg mult_nonneg_nonneg a_nonneg)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 < xa\n 2. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 \\<le> real_of_int\n                (\\<lfloor>x / real xa\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * xa)\\<rfloor>)", "fix n"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 < xa\n 2. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 \\<le> real_of_int\n                (\\<lfloor>x / real xa\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * xa)\\<rfloor>)", "assume \"n \\<in> {n. n > 0 \\<and> real n \\<le> x / 2}\""], ["proof (state)\nthis:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> x / 2}\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 < xa\n 2. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 \\<le> real_of_int\n                (\\<lfloor>x / real xa\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * xa)\\<rfloor>)", "hence \"x / real n \\<ge> 2\""], ["proof (prove)\nusing this:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> x / 2}\n\ngoal (1 subgoal):\n 1. 2 \\<le> x / real n", "by (auto simp: field_simps)"], ["proof (state)\nthis:\n  2 \\<le> x / real n\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 < xa\n 2. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 \\<le> real_of_int\n                (\\<lfloor>x / real xa\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * xa)\\<rfloor>)", "thus \"real_of_int (\\<lfloor>x / n\\<rfloor> - 2 * \\<lfloor>x / (2 * n)\\<rfloor>) \\<ge> 0\""], ["proof (prove)\nusing this:\n  2 \\<le> x / real n\n\ngoal (1 subgoal):\n 1. 0 \\<le> real_of_int\n             (\\<lfloor>x / real n\\<rfloor> -\n              2 * \\<lfloor>x / real (2 * n)\\<rfloor>)", "using le_mult_floor[of 2 \"x / (2 * n)\"]"], ["proof (prove)\nusing this:\n  2 \\<le> x / real n\n  \\<lbrakk>0 \\<le> 2; 0 \\<le> x / real (2 * n)\\<rbrakk>\n  \\<Longrightarrow> \\<lfloor>2\\<rfloor> * \\<lfloor>x / real (2 * n)\\<rfloor>\n                    \\<le> \\<lfloor>2 * (x / real (2 * n))\\<rfloor>\n\ngoal (1 subgoal):\n 1. 0 \\<le> real_of_int\n             (\\<lfloor>x / real n\\<rfloor> -\n              2 * \\<lfloor>x / real (2 * n)\\<rfloor>)", "by (simp add: mult_ac)"], ["proof (state)\nthis:\n  0 \\<le> real_of_int\n           (\\<lfloor>x / real n\\<rfloor> -\n            2 * \\<lfloor>x / real (2 * n)\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x / 2} \\<Longrightarrow>\n       0 < xa", "qed auto"], ["proof (state)\nthis:\n  0 \\<le> sum_upto\n           (\\<lambda>n.\n               a n *\n               real_of_int\n                (\\<lfloor>x / real n\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n           (x / 2)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "also"], ["proof (state)\nthis:\n  0 \\<le> sum_upto\n           (\\<lambda>n.\n               a n *\n               real_of_int\n                (\\<lfloor>x / real n\\<rfloor> -\n                 2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n           (x / 2)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "have \"\\<dots> + (\\<Sum>n | n > 0 \\<and> real n \\<in> {x/2<..x}. a n * \\<lfloor>x / n\\<rfloor>) = T x - 2 * T (x / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         a n *\n         real_of_int\n          (\\<lfloor>x / real n\\<rfloor> -\n           2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n     (x / 2) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n    T x - 2 * T (x / 2)", "using T_diff_eq"], ["proof (prove)\nusing this:\n  T x - 2 * T (x / 2) =\n  sum_upto\n   (\\<lambda>n.\n       a n *\n       real_of_int\n        (\\<lfloor>x / real n\\<rfloor> -\n         2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n   (x / 2) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         a n *\n         real_of_int\n          (\\<lfloor>x / real n\\<rfloor> -\n           2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n     (x / 2) +\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n       a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n    T x - 2 * T (x / 2)", ".."], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       a n *\n       real_of_int\n        (\\<lfloor>x / real n\\<rfloor> -\n         2 * \\<lfloor>x / real (2 * n)\\<rfloor>))\n   (x / 2) +\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n     a n * real_of_int \\<lfloor>x / real n\\<rfloor>) =\n  T x - 2 * T (x / 2)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "finally"], ["proof (chain)\npicking this:\n  (\\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      xa +\n      (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n         a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n      \\<le> y +\n            (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n               a n *\n               real_of_int \\<lfloor>x / real n\\<rfloor>)) \\<Longrightarrow>\n  S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "show \"S x - S (x / 2) \\<le> T x - 2 * T (x / 2)\""], ["proof (prove)\nusing this:\n  (\\<And>xa y.\n      xa \\<le> y \\<Longrightarrow>\n      xa +\n      (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n         a n * real_of_int \\<lfloor>x / real n\\<rfloor>)\n      \\<le> y +\n            (\\<Sum>n | 0 < n \\<and> real n \\<in> {x / 2<..x}.\n               a n *\n               real_of_int \\<lfloor>x / real n\\<rfloor>)) \\<Longrightarrow>\n  S x - S (x / 2) \\<le> T x - 2 * T (x / 2)\n\ngoal (1 subgoal):\n 1. S x - S (x / 2) \\<le> T x - 2 * T (x / 2)", "by simp"], ["proof (state)\nthis:\n  S x - S (x / 2) \\<le> T x - 2 * T (x / 2)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma\n  shows diff_bound_strong: \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c*x}\"\n    and asymptotics:       \"(\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\"\n    and upper:             \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\"\n    and lower:             \"\\<exists>c>0. \\<forall>x\\<ge>1/c. S x \\<ge> c * x\"\n    and bigtheta:          \"S \\<in> \\<Theta>(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x} &&&\n     (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)) &&&\n    \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x &&&\n    \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x &&&\n    S \\<in> \\<Theta>(\\<lambda>x. x)", "proof -\n  \\<comment> \\<open>We first prove the third case, i.\\,e.\\ the upper bound for \\<open>S\\<close>.\\<close>"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"(\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. T x - 2 * T (x / 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. T x - 2 * T (x / 2))", "proof (rule le_imp_bigo_real)"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 \\<le> ?c\n 2. \\<forall>\\<^sub>F x in at_top.\n       S x - S (x / 2) \\<le> ?c * (T x - 2 * T (x / 2))\n 3. \\<forall>\\<^sub>F x in at_top. 0 \\<le> S x - S (x / 2)", "show \"eventually (\\<lambda>x. S x - S (x / 2) \\<ge> 0) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. 0 \\<le> S x - S (x / 2)", "using eventually_ge_at_top[of 0]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (0::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top. 0 \\<le> S x - S (x / 2)", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> x \\<Longrightarrow> 0 \\<le> S x - S (x / 2)", "case (elim x)"], ["proof (state)\nthis:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> x \\<Longrightarrow> 0 \\<le> S x - S (x / 2)", "thus ?case"], ["proof (prove)\nusing this:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. 0 \\<le> S x - S (x / 2)", "using S_mono[of \"x / 2\" x]"], ["proof (prove)\nusing this:\n  0 \\<le> x\n  x / 2 \\<le> x \\<Longrightarrow> S (x / 2) \\<le> S x\n\ngoal (1 subgoal):\n 1. 0 \\<le> S x - S (x / 2)", "by simp"], ["proof (state)\nthis:\n  0 \\<le> S x - S (x / 2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. 0 \\<le> S x - S (x / 2)\n\ngoal (2 subgoals):\n 1. 0 \\<le> ?c\n 2. \\<forall>\\<^sub>F x in at_top.\n       S x - S (x / 2) \\<le> ?c * (T x - 2 * T (x / 2))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> ?c\n 2. \\<forall>\\<^sub>F x in at_top.\n       S x - S (x / 2) \\<le> ?c * (T x - 2 * T (x / 2))", "show \"eventually (\\<lambda>x. S x - S (x / 2) \\<le> 1 * (T x - 2 * T (x / 2))) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       S x - S (x / 2) \\<le> 1 * (T x - 2 * T (x / 2))", "using S_diff_T_diff"], ["proof (prove)\nusing this:\n  S ?x - S (?x / 2) \\<le> T ?x - 2 * T (?x / 2)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       S x - S (x / 2) \\<le> 1 * (T x - 2 * T (x / 2))", "by simp"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     S x - S (x / 2) \\<le> 1 * (T x - 2 * T (x / 2))\n\ngoal (1 subgoal):\n 1. 0 \\<le> 1", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. T x - 2 * T (x / 2))\n\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. T x - 2 * T (x / 2))\n\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"(\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. T x - 2 * T (x / 2)) = \n            (\\<lambda>x. (T x - x * ln x) - 2 * (T (x / 2) - (x / 2) * ln (x / 2)) \n              + x * (ln x - ln (x / 2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) =\n    (\\<lambda>x.\n        T x - x * ln x - 2 * (T (x / 2) - x / 2 * ln (x / 2)) +\n        x * (ln x - ln (x / 2)))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. T x - 2 * T (x / 2)) =\n  (\\<lambda>x.\n      T x - x * ln x - 2 * (T (x / 2) - x / 2 * ln (x / 2)) +\n      x * (ln x - ln (x / 2)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. T x - 2 * T (x / 2)) =\n  (\\<lambda>x.\n      T x - x * ln x - 2 * (T (x / 2) - x / 2 * ln (x / 2)) +\n      x * (ln x - ln (x / 2)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "have \"\\<dots> \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        T x - x * ln x - 2 * (T (x / 2) - x / 2 * ln (x / 2)) +\n        x * (ln x - ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)", "proof (rule sum_in_bigo, rule sum_in_bigo)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)\n 2. (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)\n 3. (\\<lambda>x. x * (ln x - ln (x / 2))) \\<in> O(\\<lambda>x. x)", "show \"(\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)", "by (rule a_asymptotics)"], ["proof (state)\nthis:\n  (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)\n 2. (\\<lambda>x. x * (ln x - ln (x / 2))) \\<in> O(\\<lambda>x. x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)\n 2. (\\<lambda>x. x * (ln x - ln (x / 2))) \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. T (x / 2) - (x / 2) * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)", "using a_asymptotics"], ["proof (prove)\nusing this:\n  (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)", "by (rule landau_o.big.compose) real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)\n 2. (\\<lambda>x. x * (ln x - ln (x / 2))) \\<in> O(\\<lambda>x. x)", "thus \"(\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2))) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2)))\n    \\<in> O(\\<lambda>x. x)", "unfolding cmult_in_bigo_iff"], ["proof (prove)\nusing this:\n  (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x / 2)\n\ngoal (1 subgoal):\n 1. 2 = 0 \\<or>\n    (\\<lambda>x. T (x / 2) - x / 2 * ln (x / 2)) \\<in> O(\\<lambda>x. x)", "by (subst (asm) landau_o.big.cdiv) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. 2 * (T (x / 2) - x / 2 * ln (x / 2))) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (ln x - ln (x / 2))) \\<in> O(\\<lambda>x. x)", "qed real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      T x - x * ln x - 2 * (T (x / 2) - x / 2 * ln (x / 2)) +\n      x * (ln x - ln (x / 2)))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. T x - 2 * T (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)", "have S_diff_bigo: \"(\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "obtain c1 where c1: \"c1 \\<ge> 0\" \"\\<And>x. x \\<ge> 0 \\<Longrightarrow> S x \\<le> c1 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from S_diff_bigo"], ["proof (chain)\npicking this:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>n. S (real n) - S (real n / 2)) \\<in> O(\\<lambda>n. real n)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. S x - S (x / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. S (real n) - S (real n / 2)) \\<in> O(real)", "by (rule landau_o.big.compose) real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. S (real n) - S (real n / 2)) \\<in> O(real)\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from natfun_bigoE[OF this, of 1]"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>n. 1 \\<le> n \\<Longrightarrow> real n \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          1 \\<le> n \\<Longrightarrow>\n          norm (S (real n) - S (real n / 2))\n          \\<le> c * norm (real n)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "obtain c\n      where \"c > 0\" \"\\<forall>n\\<ge>1. \\<bar>S (real n) - S (real n / 2)\\<bar> \\<le> c * real n\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>n. 1 \\<le> n \\<Longrightarrow> real n \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          1 \\<le> n \\<Longrightarrow>\n          norm (S (real n) - S (real n / 2))\n          \\<le> c * norm (real n)\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>0 < c;\n         \\<forall>n\\<ge>1.\n            \\<bar>S (real n) - S (real n / 2)\\<bar>\n            \\<le> c * real n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < c\n  \\<forall>n\\<ge>1. \\<bar>S (real n) - S (real n / 2)\\<bar> \\<le> c * real n\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence c: \"S (real n) - S (real n / 2) \\<le> c * real n\" if \"n \\<ge> 1\" for n"], ["proof (prove)\nusing this:\n  0 < c\n  \\<forall>n\\<ge>1. \\<bar>S (real n) - S (real n / 2)\\<bar> \\<le> c * real n\n\ngoal (1 subgoal):\n 1. S (real n) - S (real n / 2) \\<le> c * real n", "using S_mono[of \"real n\" \"2 * real n\"] that"], ["proof (prove)\nusing this:\n  0 < c\n  \\<forall>n\\<ge>1. \\<bar>S (real n) - S (real n / 2)\\<bar> \\<le> c * real n\n  real n \\<le> 2 * real n \\<Longrightarrow> S (real n) \\<le> S (2 * real n)\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. S (real n) - S (real n / 2) \\<le> c * real n", "by auto"], ["proof (state)\nthis:\n  1 \\<le> ?n \\<Longrightarrow>\n  S (real ?n) - S (real ?n / 2) \\<le> c * real ?n\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have c_twopow: \"S (2 ^ Suc n / 2) - S (2 ^ n / 2) \\<le> c * 2 ^ n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. S (2 ^ Suc n / 2) - S (2 ^ n / 2) \\<le> c * 2 ^ n", "using c[of \"2 ^ n\"]"], ["proof (prove)\nusing this:\n  1 \\<le> 2 ^ n \\<Longrightarrow>\n  S (real (2 ^ n)) - S (real (2 ^ n) / 2) \\<le> c * real (2 ^ n)\n\ngoal (1 subgoal):\n 1. S (2 ^ Suc n / 2) - S (2 ^ n / 2) \\<le> c * 2 ^ n", "by simp"], ["proof (state)\nthis:\n  S (2 ^ Suc ?n / 2) - S (2 ^ ?n / 2) \\<le> c * 2 ^ ?n\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have S_twopow_le: \"S (2 ^ k) \\<le> 2 * c * 2 ^ k\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have [simp]: \"{0<..Suc 0} = {1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {0<..Suc 0} = {1}", "by auto"], ["proof (state)\nthis:\n  {0<..Suc 0} = {1}\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have \"(\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2)) \\<le> (\\<Sum>r<Suc k. c * 2 ^ r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2))\n    \\<le> (\\<Sum>r<Suc k. c * 2 ^ r)", "by (intro sum_mono c_twopow)"], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2))\n  \\<le> (\\<Sum>r<Suc k. c * 2 ^ r)\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "also"], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2))\n  \\<le> (\\<Sum>r<Suc k. c * 2 ^ r)\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have \"(\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2)) = S (2 ^ k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2)) = S (2 ^ k)", "by (subst sum_lessThan_telescope) (auto simp: S_def sum_upto_altdef)"], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2)) = S (2 ^ k)\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "also"], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. S (2 ^ Suc r / 2) - S (2 ^ r / 2)) = S (2 ^ k)\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have \"(\\<Sum>r<Suc k. c * 2 ^ r) = c * (\\<Sum>r<Suc k. 2 ^ r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<Suc k. c * 2 ^ r) = c * sum ((^) 2) {..<Suc k}", "unfolding sum_distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<Suc k. c * 2 ^ r) = (\\<Sum>n<Suc k. c * 2 ^ n)", ".."], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. c * 2 ^ r) = c * sum ((^) 2) {..<Suc k}\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "also"], ["proof (state)\nthis:\n  (\\<Sum>r<Suc k. c * 2 ^ r) = c * sum ((^) 2) {..<Suc k}\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have \"(\\<Sum>r<Suc k. 2 ^ r :: real) = 2^Suc k - 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum ((^) 2) {..<Suc k} = 2 ^ Suc k - 1", "by (subst geometric_sum) auto"], ["proof (state)\nthis:\n  sum ((^) 2) {..<Suc k} = 2 ^ Suc k - 1\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "also"], ["proof (state)\nthis:\n  sum ((^) 2) {..<Suc k} = 2 ^ Suc k - 1\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "have \"c * \\<dots> \\<le> c * 2 ^ Suc k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * (2 ^ Suc k - 1) \\<le> c * 2 ^ Suc k", "using \\<open>c > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < c\n\ngoal (1 subgoal):\n 1. c * (2 ^ Suc k - 1) \\<le> c * 2 ^ Suc k", "by (intro mult_left_mono) auto"], ["proof (state)\nthis:\n  c * (2 ^ Suc k - 1) \\<le> c * 2 ^ Suc k\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "finally"], ["proof (chain)\npicking this:\n  S (2 ^ k) \\<le> c * 2 ^ Suc k", "show \"S (2 ^ k) \\<le> 2 * c * 2 ^ k\""], ["proof (prove)\nusing this:\n  S (2 ^ k) \\<le> c * 2 ^ Suc k\n\ngoal (1 subgoal):\n 1. S (2 ^ k) \\<le> 2 * c * 2 ^ k", "by simp"], ["proof (state)\nthis:\n  S (2 ^ k) \\<le> 2 * c * 2 ^ k\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  S (2 ^ ?k) \\<le> 2 * c * 2 ^ ?k\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have S_le: \"S x \\<le> 4 * c * x\" if \"x \\<ge> 0\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. S x \\<le> 4 * c * x", "proof (cases \"x \\<ge> 1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x\n 2. \\<not> 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "case False"], ["proof (state)\nthis:\n  \\<not> 1 \\<le> x\n\ngoal (2 subgoals):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x\n 2. \\<not> 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "with that"], ["proof (chain)\npicking this:\n  0 \\<le> x\n  \\<not> 1 \\<le> x", "have \"x \\<in> {0..<1}\""], ["proof (prove)\nusing this:\n  0 \\<le> x\n  \\<not> 1 \\<le> x\n\ngoal (1 subgoal):\n 1. x \\<in> {0..<1}", "by auto"], ["proof (state)\nthis:\n  x \\<in> {0..<1}\n\ngoal (2 subgoals):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x\n 2. \\<not> 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> {0..<1}\n\ngoal (1 subgoal):\n 1. S x \\<le> 4 * c * x", "using \\<open>c > 0\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> {0..<1}\n  0 < c\n\ngoal (1 subgoal):\n 1. S x \\<le> 4 * c * x", "by (auto simp: S_def sum_upto_altdef)"], ["proof (state)\nthis:\n  S x \\<le> 4 * c * x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "case True"], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "hence x: \"x \\<ge> 1\""], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x", "by simp"], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "define n where \"n = nat \\<lfloor>log 2 x\\<rfloor>\""], ["proof (state)\nthis:\n  n = nat \\<lfloor>log 2 x\\<rfloor>\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"2 powr real n \\<le> 2 powr (log 2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr real n \\<le> 2 powr log 2 x", "unfolding n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr real (nat \\<lfloor>log 2 x\\<rfloor>) \\<le> 2 powr log 2 x", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 2 powr real (nat \\<lfloor>log 2 x\\<rfloor>) \\<le> 2 powr log 2 x", "by (intro powr_mono) auto"], ["proof (state)\nthis:\n  2 powr real n \\<le> 2 powr log 2 x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "hence ge: \"2 ^ n \\<le> x\""], ["proof (prove)\nusing this:\n  2 powr real n \\<le> 2 powr log 2 x\n\ngoal (1 subgoal):\n 1. 2 ^ n \\<le> x", "using x"], ["proof (prove)\nusing this:\n  2 powr real n \\<le> 2 powr log 2 x\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 2 ^ n \\<le> x", "by (subst (asm) powr_realpow) auto"], ["proof (state)\nthis:\n  2 ^ n \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"2 powr real (Suc n) > 2 powr (log 2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr log 2 x < 2 powr real (Suc n)", "unfolding n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr log 2 x < 2 powr real (Suc (nat \\<lfloor>log 2 x\\<rfloor>))", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 2 powr log 2 x < 2 powr real (Suc (nat \\<lfloor>log 2 x\\<rfloor>))", "by (intro powr_less_mono) linarith+"], ["proof (state)\nthis:\n  2 powr log 2 x < 2 powr real (Suc n)\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "hence less: \"2 ^ (Suc n) > x\""], ["proof (prove)\nusing this:\n  2 powr log 2 x < 2 powr real (Suc n)\n\ngoal (1 subgoal):\n 1. x < 2 ^ Suc n", "using x"], ["proof (prove)\nusing this:\n  2 powr log 2 x < 2 powr real (Suc n)\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. x < 2 ^ Suc n", "by (subst (asm) powr_realpow) auto"], ["proof (state)\nthis:\n  x < 2 ^ Suc n\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"S x \\<le> S (2 ^ Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S x \\<le> S (2 ^ Suc n)", "using less"], ["proof (prove)\nusing this:\n  x < 2 ^ Suc n\n\ngoal (1 subgoal):\n 1. S x \\<le> S (2 ^ Suc n)", "by (intro S_mono) auto"], ["proof (state)\nthis:\n  S x \\<le> S (2 ^ Suc n)\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "also"], ["proof (state)\nthis:\n  S x \\<le> S (2 ^ Suc n)\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"\\<dots> \\<le> 2 * c * 2 ^ Suc n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S (2 ^ Suc n) \\<le> 2 * c * 2 ^ Suc n", "by (intro S_twopow_le)"], ["proof (state)\nthis:\n  S (2 ^ Suc n) \\<le> 2 * c * 2 ^ Suc n\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "also"], ["proof (state)\nthis:\n  S (2 ^ Suc n) \\<le> 2 * c * 2 ^ Suc n\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"\\<dots> = 4 * c * 2 ^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * c * 2 ^ Suc n = 4 * c * 2 ^ n", "by simp"], ["proof (state)\nthis:\n  2 * c * 2 ^ Suc n = 4 * c * 2 ^ n\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "also"], ["proof (state)\nthis:\n  2 * c * 2 ^ Suc n = 4 * c * 2 ^ n\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "have \"\\<dots> \\<le> 4 * c * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 4 * c * 2 ^ n \\<le> 4 * c * x", "by (intro mult_left_mono ge) (use x \\<open>c > 0\\<close> in auto)"], ["proof (state)\nthis:\n  4 * c * 2 ^ n \\<le> 4 * c * x\n\ngoal (1 subgoal):\n 1. 1 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x", "finally"], ["proof (chain)\npicking this:\n  S x \\<le> 4 * c * x", "show \"S x \\<le> 4 * c * x\""], ["proof (prove)\nusing this:\n  S x \\<le> 4 * c * x\n\ngoal (1 subgoal):\n 1. S x \\<le> 4 * c * x", "."], ["proof (state)\nthis:\n  S x \\<le> 4 * c * x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> ?x \\<Longrightarrow> S ?x \\<le> 4 * c * ?x\n\ngoal (1 subgoal):\n 1. (\\<And>c1.\n        \\<lbrakk>0 \\<le> c1;\n         \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with that[of \"4 * c\"] and \\<open>c > 0\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 \\<le> 4 * c;\n   \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x\\<rbrakk>\n  \\<Longrightarrow> thesis\n  0 < c\n  0 \\<le> ?x \\<Longrightarrow> S ?x \\<le> 4 * c * ?x", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> 4 * c;\n   \\<And>x. 0 \\<le> x \\<Longrightarrow> S x \\<le> 4 * c * x\\<rbrakk>\n  \\<Longrightarrow> thesis\n  0 < c\n  0 \\<le> ?x \\<Longrightarrow> S ?x \\<le> 4 * c * ?x\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> c1\n  0 \\<le> ?x \\<Longrightarrow> S ?x \\<le> c1 * ?x\n\ngoal (5 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n 4. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 5. S \\<in> \\<Theta>(\\<lambda>x. x)", "thus \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\""], ["proof (prove)\nusing this:\n  0 \\<le> c1\n  0 \\<le> ?x \\<Longrightarrow> S ?x \\<le> c1 * ?x\n\ngoal (1 subgoal):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x", "by auto\n\n  \\<comment> \\<open>The asymptotics of \\<open>A\\<close> follows from this immediately:\\<close>"], ["proof (state)\nthis:\n  \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. S x \\<le> c * x\n\ngoal (4 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 4. S \\<in> \\<Theta>(\\<lambda>x. x)", "have a_strong: \"x * A x - T x \\<in> {0..c1 * x}\" if x: \"x \\<ge> 0\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "have \"sum_upto (\\<lambda>n. a n * frac (x / n)) x \\<le> sum_upto (\\<lambda>n. a n * 1) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * frac (x / real n)) x\n    \\<le> sum_upto (\\<lambda>n. a n * 1) x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}. a n * frac (x / real n))\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}. a n * 1)", "by (intro sum_mono mult_left_mono a_nonneg) (auto intro: less_imp_le frac_lt_1)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x\n  \\<le> sum_upto (\\<lambda>n. a n * 1) x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x\n  \\<le> sum_upto (\\<lambda>n. a n * 1) x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "have \"\\<dots> = S x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * 1) x = S x", "unfolding S_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * 1) x = sum_upto a x", "by simp"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * 1) x = S x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * 1) x = S x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "from x"], ["proof (chain)\npicking this:\n  0 \\<le> x", "have \"\\<dots> \\<le> c1 * x\""], ["proof (prove)\nusing this:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. S x \\<le> c1 * x", "by (rule c1)"], ["proof (state)\nthis:\n  S x \\<le> c1 * x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "finally"], ["proof (chain)\npicking this:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x", "have \"sum_upto (\\<lambda>n. a n * frac (x / n)) x \\<le> c1 * x\""], ["proof (prove)\nusing this:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x", "."], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "moreover"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "have \"sum_upto (\\<lambda>n. a n * frac (x / n)) x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> sum_upto (\\<lambda>n. a n * frac (x / real n)) x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n               a n * frac (x / real n))", "by (intro sum_nonneg mult_nonneg_nonneg a_nonneg) auto"], ["proof (state)\nthis:\n  0 \\<le> sum_upto (\\<lambda>n. a n * frac (x / real n)) x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "ultimately"], ["proof (chain)\npicking this:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x\n  0 \\<le> sum_upto (\\<lambda>n. a n * frac (x / real n)) x", "have \"sum_upto (\\<lambda>n. a n * frac (x / n)) x \\<in> {0..c1*x}\""], ["proof (prove)\nusing this:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<le> c1 * x\n  0 \\<le> sum_upto (\\<lambda>n. a n * frac (x / real n)) x\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<in> {0..c1 * x}", "by auto"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<in> {0..c1 * x}\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x \\<in> {0..c1 * x}\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "have \"sum_upto (\\<lambda>n. a n * frac (x / n)) x = x * A x - T x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n * frac (x / real n)) x = x * A x - T x", "by (simp add: T_def A_def sum_upto_def sum_subtractf frac_def algebra_simps\n                    sum_distrib_left sum_distrib_right dirichlet_prod'_def)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. a n * frac (x / real n)) x = x * A x - T x\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "finally"], ["proof (chain)\npicking this:\n  x * A x - T x \\<in> {0..c1 * x}", "show ?thesis"], ["proof (prove)\nusing this:\n  x * A x - T x \\<in> {0..c1 * x}\n\ngoal (1 subgoal):\n 1. x * A x - T x \\<in> {0..c1 * x}", "."], ["proof (state)\nthis:\n  x * A x - T x \\<in> {0..c1 * x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 \\<le> ?x \\<Longrightarrow> ?x * A ?x - T ?x \\<in> {0..c1 * ?x}\n\ngoal (4 subgoals):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n 2. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 3. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 4. S \\<in> \\<Theta>(\\<lambda>x. x)", "thus \"\\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c*x}\""], ["proof (prove)\nusing this:\n  0 \\<le> ?x \\<Longrightarrow> ?x * A ?x - T ?x \\<in> {0..c1 * ?x}\n\ngoal (1 subgoal):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}", "using \\<open>c1 \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> ?x \\<Longrightarrow> ?x * A ?x - T ?x \\<in> {0..c1 * ?x}\n  0 \\<le> c1\n\ngoal (1 subgoal):\n 1. \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}", "by (intro exI[of _ c1]) auto"], ["proof (state)\nthis:\n  \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 2. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 3. S \\<in> \\<Theta>(\\<lambda>x. x)", "hence \"(\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)", "using a_strong \\<open>c1 \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>c\\<ge>0. \\<forall>x\\<ge>0. x * A x - T x \\<in> {0..c * x}\n  0 \\<le> ?x \\<Longrightarrow> ?x * A ?x - T ?x \\<in> {0..c1 * ?x}\n  0 \\<le> c1\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)", "by (intro le_imp_bigo_real[of c1] eventually_mono[OF eventually_ge_at_top[of 1]]) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 2. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 3. S \\<in> \\<Theta>(\\<lambda>x. x)", "from this and a_asymptotics"], ["proof (chain)\npicking this:\n  (\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)\n  (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. (x * A x - T x) + (T x - x * ln x)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * A x - T x) \\<in> O(\\<lambda>x. x)\n  (\\<lambda>x. T x - x * ln x) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * A x - T x + (T x - x * ln x)) \\<in> O(\\<lambda>x. x)", "by (rule sum_in_bigo)"], ["proof (state)\nthis:\n  (\\<lambda>x. x * A x - T x + (T x - x * ln x)) \\<in> O(\\<lambda>x. x)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 2. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 3. S \\<in> \\<Theta>(\\<lambda>x. x)", "hence \"(\\<lambda>x. x * (A x - ln x)) \\<in> O(\\<lambda>x. x * 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * A x - T x + (T x - x * ln x)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (A x - ln x)) \\<in> O(\\<lambda>x. x * 1)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (A x - ln x)) \\<in> O(\\<lambda>x. x * 1)\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>_. 1)\n 2. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 3. S \\<in> \\<Theta>(\\<lambda>x. x)", "thus bigo: \"(\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>x. 1)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * (A x - ln x)) \\<in> O(\\<lambda>x. x * 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>x. 1)", "by (subst (asm) landau_o.big.mult_cancel_left) auto\n\n  \\<comment> \\<open>It remains to show the lower bound for \\<open>S\\<close>.\\<close>"], ["proof (state)\nthis:\n  (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>x. 1)\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "define R where \"R = (\\<lambda>x. A x - ln x)\""], ["proof (state)\nthis:\n  R = (\\<lambda>x. A x - ln x)\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "obtain M where M: \"\\<And>x. x \\<ge> 1 \\<Longrightarrow> \\<bar>R x\\<bar> \\<le> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>R x\\<bar> \\<le> M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>R x\\<bar> \\<le> M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"(\\<lambda>n. R (real n)) \\<in> O(\\<lambda>_. 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. R (real n)) \\<in> O(\\<lambda>_. 1)", "using bigo"], ["proof (prove)\nusing this:\n  (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>x. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. R (real n)) \\<in> O(\\<lambda>_. 1)", "unfolding R_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. A x - ln x) \\<in> O(\\<lambda>x. 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. A (real n) - ln (real n)) \\<in> O(\\<lambda>_. 1)", "by (rule landau_o.big.compose) real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>n. R (real n)) \\<in> O(\\<lambda>_. 1)\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>R x\\<bar> \\<le> M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "from natfun_bigoE[OF this, of 0]"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>n. 0 \\<le> n \\<Longrightarrow> 1 \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          0 \\<le> n \\<Longrightarrow>\n          norm (R (real n)) \\<le> c * norm 1\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "obtain M where M: \"M > 0\" \"\\<And>n. \\<bar>R (real n)\\<bar> \\<le> M\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>n. 0 \\<le> n \\<Longrightarrow> 1 \\<noteq> 0;\n   \\<And>c.\n      \\<lbrakk>0 < c;\n       \\<And>n.\n          0 \\<le> n \\<Longrightarrow>\n          norm (R (real n)) \\<le> c * norm 1\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        \\<lbrakk>0 < M; \\<And>n. \\<bar>R (real n)\\<bar> \\<le> M\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < M\n  \\<bar>R (real ?n)\\<bar> \\<le> M\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>R x\\<bar> \\<le> M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"\\<bar>R x\\<bar> \\<le> M + ln 2\" if x: \"x \\<ge> 1\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "define n where \"n = nat \\<lfloor>x\\<rfloor>\""], ["proof (state)\nthis:\n  n = nat \\<lfloor>x\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "have \"\\<bar>R x - R (real n)\\<bar> = ln (x / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R x - R (real n)\\<bar> = ln (x / real n)", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<bar>R x - R (real n)\\<bar> = ln (x / real n)", "by (simp add: R_def A_def sum_upto_altdef n_def ln_div)"], ["proof (state)\nthis:\n  \\<bar>R x - R (real n)\\<bar> = ln (x / real n)\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "also"], ["proof (state)\nthis:\n  \\<bar>R x - R (real n)\\<bar> = ln (x / real n)\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "{"], ["proof (state)\nthis:\n  \\<bar>R x - R (real n)\\<bar> = ln (x / real n)\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "have \"x \\<le> real n + 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<le> real n + 1", "unfolding n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<le> real (nat \\<lfloor>x\\<rfloor>) + 1", "by linarith"], ["proof (state)\nthis:\n  x \\<le> real n + 1\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "also"], ["proof (state)\nthis:\n  x \\<le> real n + 1\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "have \"1 \\<le> real n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> real n", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> real n", "unfolding n_def"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> real (nat \\<lfloor>x\\<rfloor>)", "by simp"], ["proof (state)\nthis:\n  1 \\<le> real n\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      real n + x \\<le> real n + y) \\<Longrightarrow>\n  x \\<le> real n + real n", "have \"ln (x / n) \\<le> ln 2\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      real n + x \\<le> real n + y) \\<Longrightarrow>\n  x \\<le> real n + real n\n\ngoal (1 subgoal):\n 1. ln (x / real n) \\<le> ln 2", "using x"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      real n + x \\<le> real n + y) \\<Longrightarrow>\n  x \\<le> real n + real n\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. ln (x / real n) \\<le> ln 2", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  ln (x / real n) \\<le> ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "}"], ["proof (state)\nthis:\n  ln (x / real n) \\<le> ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "finally"], ["proof (chain)\npicking this:\n  \\<bar>R x - R (real n)\\<bar> \\<le> ln 2", "have \"\\<bar>R x\\<bar> \\<le> \\<bar>R (real n)\\<bar> + ln 2\""], ["proof (prove)\nusing this:\n  \\<bar>R x - R (real n)\\<bar> \\<le> ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> \\<bar>R (real n)\\<bar> + ln 2", "by linarith"], ["proof (state)\nthis:\n  \\<bar>R x\\<bar> \\<le> \\<bar>R (real n)\\<bar> + ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "also"], ["proof (state)\nthis:\n  \\<bar>R x\\<bar> \\<le> \\<bar>R (real n)\\<bar> + ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "have \"\\<bar>R (real n)\\<bar> \\<le> M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>R (real n)\\<bar> \\<le> M", "by (rule M)"], ["proof (state)\nthis:\n  \\<bar>R (real n)\\<bar> \\<le> M\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> x + ln 2 \\<le> y + ln 2) \\<Longrightarrow>\n  \\<bar>R x\\<bar> \\<le> M + ln 2", "show \"\\<bar>R x\\<bar> \\<le> M + ln 2\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> x + ln 2 \\<le> y + ln 2) \\<Longrightarrow>\n  \\<bar>R x\\<bar> \\<le> M + ln 2\n\ngoal (1 subgoal):\n 1. \\<bar>R x\\<bar> \\<le> M + ln 2", "by simp"], ["proof (state)\nthis:\n  \\<bar>R x\\<bar> \\<le> M + ln 2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>R ?x\\<bar> \\<le> M + ln 2\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>R x\\<bar> \\<le> M) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "with that[of \"M + ln 2\"]"], ["proof (chain)\npicking this:\n  (\\<And>x.\n      1 \\<le> x \\<Longrightarrow>\n      \\<bar>R x\\<bar> \\<le> M + ln 2) \\<Longrightarrow>\n  thesis\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>R ?x\\<bar> \\<le> M + ln 2", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      1 \\<le> x \\<Longrightarrow>\n      \\<bar>R x\\<bar> \\<le> M + ln 2) \\<Longrightarrow>\n  thesis\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>R ?x\\<bar> \\<le> M + ln 2\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>R ?x\\<bar> \\<le> M\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"M \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> M", "using M[of 1]"], ["proof (prove)\nusing this:\n  1 \\<le> 1 \\<Longrightarrow> \\<bar>R 1\\<bar> \\<le> M\n\ngoal (1 subgoal):\n 1. 0 \\<le> M", "by simp"], ["proof (state)\nthis:\n  0 \\<le> M\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "have A_diff_ge: \"A x - A (\\<alpha>*x) \\<ge> -ln \\<alpha> - 2 * M\"\n    if \\<alpha>: \"\\<alpha> \\<in> {0<..<1}\" and \"x \\<ge> 1 / \\<alpha>\" for x \\<alpha> :: real"], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "from that"], ["proof (chain)\npicking this:\n  \\<alpha> \\<in> {0<..<1}\n  1 / \\<alpha> \\<le> x", "have \"1 < inverse \\<alpha> * 1\""], ["proof (prove)\nusing this:\n  \\<alpha> \\<in> {0<..<1}\n  1 / \\<alpha> \\<le> x\n\ngoal (1 subgoal):\n 1. 1 < inverse \\<alpha> * 1", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  1 < inverse \\<alpha> * 1\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "also"], ["proof (state)\nthis:\n  1 < inverse \\<alpha> * 1\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "have \"\\<dots> \\<le> inverse \\<alpha> * (\\<alpha> * x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inverse \\<alpha> * 1 \\<le> inverse \\<alpha> * (\\<alpha> * x)", "using \\<open>x \\<ge> 1 / \\<alpha>\\<close> and \\<alpha>"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. inverse \\<alpha> * 1 \\<le> inverse \\<alpha> * (\\<alpha> * x)", "by (intro mult_left_mono) (auto simp: field_simps)"], ["proof (state)\nthis:\n  inverse \\<alpha> * 1 \\<le> inverse \\<alpha> * (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "also"], ["proof (state)\nthis:\n  inverse \\<alpha> * 1 \\<le> inverse \\<alpha> * (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "from \\<alpha>"], ["proof (chain)\npicking this:\n  \\<alpha> \\<in> {0<..<1}", "have \"\\<dots> = x\""], ["proof (prove)\nusing this:\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. inverse \\<alpha> * (\\<alpha> * x) = x", "by simp"], ["proof (state)\nthis:\n  inverse \\<alpha> * (\\<alpha> * x) = x\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "finally"], ["proof (chain)\npicking this:\n  1 < x", "have \"x > 1\""], ["proof (prove)\nusing this:\n  1 < x\n\ngoal (1 subgoal):\n 1. 1 < x", "."], ["proof (state)\nthis:\n  1 < x\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "note x = this \\<open>x >= 1 / \\<alpha>\\<close>"], ["proof (state)\nthis:\n  1 < x\n  1 / \\<alpha> \\<le> x\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "have \"-ln \\<alpha> - M - M \\<le> -ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha>*x)\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln \\<alpha> - M - M\n    \\<le> - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>", "using x \\<alpha>"], ["proof (prove)\nusing this:\n  1 < x\n  1 / \\<alpha> \\<le> x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - M - M\n    \\<le> - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>", "by (intro diff_mono M) (auto simp: field_simps)"], ["proof (state)\nthis:\n  - ln \\<alpha> - M - M\n  \\<le> - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "also"], ["proof (state)\nthis:\n  - ln \\<alpha> - M - M\n  \\<le> - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "have \"\\<dots> \\<le> -ln \\<alpha> + R x - R (\\<alpha>*x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>\n    \\<le> - ln \\<alpha> + R x - R (\\<alpha> * x)", "by linarith"], ["proof (state)\nthis:\n  - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>\n  \\<le> - ln \\<alpha> + R x - R (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "also"], ["proof (state)\nthis:\n  - ln \\<alpha> - \\<bar>R x\\<bar> - \\<bar>R (\\<alpha> * x)\\<bar>\n  \\<le> - ln \\<alpha> + R x - R (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "have \"\\<dots> = A x - A (\\<alpha>*x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln \\<alpha> + R x - R (\\<alpha> * x) = A x - A (\\<alpha> * x)", "using \\<alpha> x"], ["proof (prove)\nusing this:\n  \\<alpha> \\<in> {0<..<1}\n  1 < x\n  1 / \\<alpha> \\<le> x\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> + R x - R (\\<alpha> * x) = A x - A (\\<alpha> * x)", "by (simp add: R_def ln_mult)"], ["proof (state)\nthis:\n  - ln \\<alpha> + R x - R (\\<alpha> * x) = A x - A (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "finally"], ["proof (chain)\npicking this:\n  - ln \\<alpha> - M - M \\<le> A x - A (\\<alpha> * x)", "show \"A x - A (\\<alpha>*x) \\<ge> -ln \\<alpha> - 2 * M\""], ["proof (prove)\nusing this:\n  - ln \\<alpha> - M - M \\<le> A x - A (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "by simp"], ["proof (state)\nthis:\n  - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?\\<alpha> \\<in> {0<..<1}; 1 / ?\\<alpha> \\<le> ?x\\<rbrakk>\n  \\<Longrightarrow> - ln ?\\<alpha> - 2 * M \\<le> A ?x - A (?\\<alpha> * ?x)\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "define \\<alpha> where \"\\<alpha> = exp (-2*M-1)\""], ["proof (state)\nthis:\n  \\<alpha> = exp (- 2 * M - 1)\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"\\<alpha> \\<in> {0<..<1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<alpha> \\<in> {0<..<1}", "using \\<open>M \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  0 \\<le> M\n\ngoal (1 subgoal):\n 1. \\<alpha> \\<in> {0<..<1}", "by (auto simp: \\<alpha>_def)"], ["proof (state)\nthis:\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "have S_ge: \"S x \\<ge> \\<alpha> * x\" if x: \"x \\<ge> 1 / \\<alpha>\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"1 = -ln \\<alpha> - 2 * M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 = - ln \\<alpha> - 2 * M", "by (simp add: \\<alpha>_def)"], ["proof (state)\nthis:\n  1 = - ln \\<alpha> - 2 * M\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "also"], ["proof (state)\nthis:\n  1 = - ln \\<alpha> - 2 * M\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"\\<dots> \\<le> A x - A (\\<alpha>*x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)", "by (intro A_diff_ge) fact+"], ["proof (state)\nthis:\n  - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "also"], ["proof (state)\nthis:\n  - ln \\<alpha> - 2 * M \\<le> A x - A (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"\\<dots> = (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. a n / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A x - A (\\<alpha> * x) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)", "unfolding A_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n / real n) x -\n    sum_upto (\\<lambda>n. a n / real n) (\\<alpha> * x) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)", "using \\<open>\\<alpha> \\<in> {0<..<1}\\<close>"], ["proof (prove)\nusing this:\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. a n / real n) x -\n    sum_upto (\\<lambda>n. a n / real n) (\\<alpha> * x) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)", "by (subst split[where \\<alpha> = \\<alpha>]) auto"], ["proof (state)\nthis:\n  A x - A (\\<alpha> * x) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "also"], ["proof (state)\nthis:\n  A x - A (\\<alpha> * x) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"\\<dots> \\<le> (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. a n / (\\<alpha>*x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n    \\<le> (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n             a n / (\\<alpha> * x))", "using x \\<open>\\<alpha> \\<in> {0<..<1}\\<close>"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n    \\<le> (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n             a n / (\\<alpha> * x))", "by (intro sum_mono divide_left_mono a_nonneg) auto"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n  \\<le> (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n           a n / (\\<alpha> * x))\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "also"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n / real n)\n  \\<le> (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n           a n / (\\<alpha> * x))\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"\\<dots> = (\\<Sum>n | n > 0 \\<and> real n \\<in> {\\<alpha>*x<..x}. a n) / (\\<alpha>*x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n       a n / (\\<alpha> * x)) =\n    (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n    (\\<alpha> * x)", "by (simp add: sum_divide_distrib)"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n     a n / (\\<alpha> * x)) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n  (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "also"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}.\n     a n / (\\<alpha> * x)) =\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n  (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "have \"\\<dots> \\<le> S x / (\\<alpha>*x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n    (\\<alpha> * x)\n    \\<le> S x / (\\<alpha> * x)", "using x \\<open>\\<alpha> \\<in> {0<..<1}\\<close>"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n    (\\<alpha> * x)\n    \\<le> S x / (\\<alpha> * x)", "unfolding S_def sum_upto_def"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n    (\\<alpha> * x)\n    \\<le> sum a {i. 0 < i \\<and> real i \\<le> x} / (\\<alpha> * x)", "by (intro divide_right_mono sum_mono2 a_nonneg) (auto simp: field_simps)"], ["proof (state)\nthis:\n  (\\<Sum>n | 0 < n \\<and> real n \\<in> {\\<alpha> * x<..x}. a n) /\n  (\\<alpha> * x)\n  \\<le> S x / (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "finally"], ["proof (chain)\npicking this:\n  1 \\<le> S x / (\\<alpha> * x)", "show \"S x \\<ge> \\<alpha> * x\""], ["proof (prove)\nusing this:\n  1 \\<le> S x / (\\<alpha> * x)\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "using \\<open>\\<alpha> \\<in> {0<..<1}\\<close> x"], ["proof (prove)\nusing this:\n  1 \\<le> S x / (\\<alpha> * x)\n  \\<alpha> \\<in> {0<..<1}\n  1 / \\<alpha> \\<le> x\n\ngoal (1 subgoal):\n 1. \\<alpha> * x \\<le> S x", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<alpha> * x \\<le> S x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 / \\<alpha> \\<le> ?x \\<Longrightarrow> \\<alpha> * ?x \\<le> S ?x\n\ngoal (2 subgoals):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n 2. S \\<in> \\<Theta>(\\<lambda>x. x)", "thus \"\\<exists>c>0. \\<forall>x\\<ge>1/c. S x \\<ge> c * x\""], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> ?x \\<Longrightarrow> \\<alpha> * ?x \\<le> S ?x\n\ngoal (1 subgoal):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x", "using \\<open>\\<alpha> \\<in> {0<..<1}\\<close>"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> ?x \\<Longrightarrow> \\<alpha> * ?x \\<le> S ?x\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x", "by (intro exI[of _ \\<alpha>]) auto"], ["proof (state)\nthis:\n  \\<exists>c>0. \\<forall>x\\<ge>1 / c. c * x \\<le> S x\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "have S_nonneg: \"S x \\<ge> 0\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> S x", "unfolding S_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> sum a {i. 0 < i \\<and> real i \\<le> x}", "by (intro sum_nonneg a_nonneg) auto"], ["proof (state)\nthis:\n  0 \\<le> S ?x\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"eventually (\\<lambda>x. \\<bar>S x\\<bar> \\<ge> \\<alpha> * \\<bar>x\\<bar>) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>", "using eventually_ge_at_top[of \"max 0 (1 / \\<alpha>)\"]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (max 0 (1 / \\<alpha>))) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>", "proof eventually_elim"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       max 0 (1 / \\<alpha>) \\<le> x \\<Longrightarrow>\n       \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>", "case (elim x)"], ["proof (state)\nthis:\n  max 0 (1 / \\<alpha>) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       max 0 (1 / \\<alpha>) \\<le> x \\<Longrightarrow>\n       \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>", "with S_ge[of x] elim"], ["proof (chain)\npicking this:\n  1 / \\<alpha> \\<le> x \\<Longrightarrow> \\<alpha> * x \\<le> S x\n  max 0 (1 / \\<alpha>) \\<le> x\n  max 0 (1 / \\<alpha>) \\<le> x", "show ?case"], ["proof (prove)\nusing this:\n  1 / \\<alpha> \\<le> x \\<Longrightarrow> \\<alpha> * x \\<le> S x\n  max 0 (1 / \\<alpha>) \\<le> x\n  max 0 (1 / \\<alpha>) \\<le> x\n\ngoal (1 subgoal):\n 1. \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "hence \"S \\<in> \\<Omega>(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Omega>(\\<lambda>x. x)", "using \\<open>\\<alpha> \\<in> {0<..<1}\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top.\n     \\<alpha> * \\<bar>x\\<bar> \\<le> \\<bar>S x\\<bar>\n  \\<alpha> \\<in> {0<..<1}\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Omega>(\\<lambda>x. x)", "by (intro landau_omega.bigI[of \\<alpha>]) auto"], ["proof (state)\nthis:\n  S \\<in> \\<Omega>(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "moreover"], ["proof (state)\nthis:\n  S \\<in> \\<Omega>(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "have \"S \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<in> O(\\<lambda>x. x)", "proof (intro bigoI eventually_mono[OF eventually_ge_at_top[of 0]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> x \\<Longrightarrow> norm (S x) \\<le> ?c * norm x", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> x \\<Longrightarrow> norm (S x) \\<le> ?c * norm x", "assume \"x \\<ge> 0\""], ["proof (state)\nthis:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x. 0 \\<le> x \\<Longrightarrow> norm (S x) \\<le> ?c * norm x", "thus \"norm (S x) \\<le> c1 * norm x\""], ["proof (prove)\nusing this:\n  0 \\<le> x\n\ngoal (1 subgoal):\n 1. norm (S x) \\<le> c1 * norm x", "using c1(2)[of x]"], ["proof (prove)\nusing this:\n  0 \\<le> x\n  0 \\<le> x \\<Longrightarrow> S x \\<le> c1 * x\n\ngoal (1 subgoal):\n 1. norm (S x) \\<le> c1 * norm x", "by (auto simp: S_nonneg)"], ["proof (state)\nthis:\n  norm (S x) \\<le> c1 * norm x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  S \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "ultimately"], ["proof (chain)\npicking this:\n  S \\<in> \\<Omega>(\\<lambda>x. x)\n  S \\<in> O(\\<lambda>x. x)", "show \"S \\<in> \\<Theta>(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  S \\<in> \\<Omega>(\\<lambda>x. x)\n  S \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. S \\<in> \\<Theta>(\\<lambda>x. x)", "by (intro bigthetaI)"], ["proof (state)\nthis:\n  S \\<in> \\<Theta>(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "subsection \\<open>Applications to the Chebyshev functions\\<close>"], ["", "(* 3.16 *)"], ["", "text \\<open>\n  We can now apply Shapiro's Tauberian theorem to \\<^term>\\<open>\\<psi>\\<close> and \\<^term>\\<open>\\<theta>\\<close>.\n\\<close>"], ["", "lemma dirichlet_prod_mangoldt1_floor_bigo:\n  includes prime_counting_notation\n  shows \"(\\<lambda>x. dirichlet_prod' (\\<lambda>n. ind prime n * ln n) floor x - x * ln x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "proof -\n  \\<comment> \\<open>This is a perhaps somewhat roundabout way of proving this statement. We show this using\n      the asymptotics of \\<open>\\<MM>\\<close>: $\\mathfrak{M}(x) = \\ln x + O(1)$\n     \n      We proved this before (which was a bit of work, but not that much).\n      Apostol, on the other hand, shows the following statement first and then deduces the\n      asymptotics of \\<open>\\<MM>\\<close> with Shapiro's Tauberian theorem instead. This might save a bit of\n      work, but it is probably negligible.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "define R where \"R = (\\<lambda>x. sum_upto (\\<lambda>i. ind prime i * ln i * frac (x / i)) x)\""], ["proof (state)\nthis:\n  R =\n  (\\<lambda>x.\n      sum_upto (\\<lambda>i. ind prime i * ln (real i) * frac (x / real i))\n       x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "have *: \"R x \\<in> {0..ln 4 * x}\" if \"x \\<ge> 1\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "have \"R x \\<le> \\<theta> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R x \\<le> \\<theta> x", "unfolding R_def prime_sum_upto_altdef1 sum_upto_def \\<theta>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i | 0 < i \\<and> real i \\<le> x.\n       ind prime i * ln (real i) * frac (x / real i))\n    \\<le> (\\<Sum>p\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             ind prime p * ln (real p))", "by (intro sum_mono) (auto simp: ind_def less_imp_le[OF frac_lt_1] dest!: prime_gt_1_nat)"], ["proof (state)\nthis:\n  R x \\<le> \\<theta> x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "also"], ["proof (state)\nthis:\n  R x \\<le> \\<theta> x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "have \"\\<dots> < ln 4 * x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<theta> x < ln 4 * x", "by (rule \\<theta>_upper_bound) fact+"], ["proof (state)\nthis:\n  \\<theta> x < ln 4 * x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "finally"], ["proof (chain)\npicking this:\n  R x < ln 4 * x", "have \"R x \\<le> ln 4 * x\""], ["proof (prove)\nusing this:\n  R x < ln 4 * x\n\ngoal (1 subgoal):\n 1. R x \\<le> ln 4 * x", "by auto"], ["proof (state)\nthis:\n  R x \\<le> ln 4 * x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "moreover"], ["proof (state)\nthis:\n  R x \\<le> ln 4 * x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "have \"R x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> R x", "unfolding R_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i | 0 < i \\<and> real i \\<le> x.\n               ind prime i * ln (real i) * frac (x / real i))", "by (intro sum_nonneg mult_nonneg_nonneg) (auto simp: ind_def)"], ["proof (state)\nthis:\n  0 \\<le> R x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "ultimately"], ["proof (chain)\npicking this:\n  R x \\<le> ln 4 * x\n  0 \\<le> R x", "show ?thesis"], ["proof (prove)\nusing this:\n  R x \\<le> ln 4 * x\n  0 \\<le> R x\n\ngoal (1 subgoal):\n 1. R x \\<in> {0..ln 4 * x}", "by auto"], ["proof (state)\nthis:\n  R x \\<in> {0..ln 4 * x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  1 \\<le> ?x \\<Longrightarrow> R ?x \\<in> {0..ln 4 * ?x}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "have \"eventually (\\<lambda>x. \\<bar>R x\\<bar> \\<le> ln 4 * \\<bar>x\\<bar>) at_top\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>R x\\<bar> \\<le> ln 4 * \\<bar>x\\<bar>", "using eventually_ge_at_top[of 1]"], ["proof (prove)\nusing this:\n  eventually ((\\<le>) (1::?'a1)) at_top\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in at_top.\n       \\<bar>R x\\<bar> \\<le> ln 4 * \\<bar>x\\<bar>", "by eventually_elim (use * in auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>R x\\<bar> \\<le> ln 4 * \\<bar>x\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "hence \"R \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F x in at_top. \\<bar>R x\\<bar> \\<le> ln 4 * \\<bar>x\\<bar>\n\ngoal (1 subgoal):\n 1. R \\<in> O(\\<lambda>x. x)", "by (intro landau_o.bigI[of \"ln 4\"]) auto"], ["proof (state)\nthis:\n  R \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. dirichlet_prod' (\\<lambda>n. ind prime n * ln n) floor x - x * ln x) =\n          (\\<lambda>x. x * (\\<MM> x - ln x) - R x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x) =\n    (\\<lambda>x. x * (\\<MM> x - ln x) - R x)", "by (auto simp: primes_M_def dirichlet_prod'_def prime_sum_upto_altdef1 sum_upto_def\n                   frac_def sum_subtractf sum_distrib_left sum_distrib_right algebra_simps R_def)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x) =\n  (\\<lambda>x. x * (\\<MM> x - ln x) - R x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x) =\n  (\\<lambda>x. x * (\\<MM> x - ln x) - R x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "have \"\\<dots> \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (\\<MM> x - ln x) - R x) \\<in> O(\\<lambda>x. x)", "proof (rule sum_in_bigo)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x)\n 2. R \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x * 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x * 1)", "by (intro landau_o.big.mult mertens_bounded) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x * 1)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x)\n 2. R \\<in> O(\\<lambda>x. x)", "thus \"(\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x * 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (\\<MM> x - ln x)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. R \\<in> O(\\<lambda>x. x)", "qed fact+"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (\\<MM> x - ln x) - R x) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "."], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma dirichlet_prod'_mangoldt_floor_asymptotics:\n  \"(\\<lambda>x. dirichlet_prod' mangoldt floor x - x * ln x + x) \\<in> O(ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "have \"dirichlet_prod' mangoldt floor = (\\<lambda>x. sum_upto ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n    sum_upto (\\<lambda>x. ln (real x))", "unfolding sum_upto_ln_conv_sum_upto_mangoldt dirichlet_prod'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto\n         (\\<lambda>m. mangoldt m * real_of_int \\<lfloor>x / real m\\<rfloor>)\n         x) =\n    (\\<lambda>x.\n        sum_upto\n         (\\<lambda>xa.\n             mangoldt xa * real (nat \\<lfloor>x / real xa\\<rfloor>))\n         x)", "by (intro sum_upto_cong' ext) auto"], ["proof (state)\nthis:\n  dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n  sum_upto (\\<lambda>x. ln (real x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "hence \"(\\<lambda>x. dirichlet_prod' mangoldt floor x - x * ln x + x) = (\\<lambda>x. sum_upto ln x - x * ln x + x)\""], ["proof (prove)\nusing this:\n  dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n  sum_upto (\\<lambda>x. ln (real x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x) =\n    (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x) =\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x) =\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "have \"\\<dots> \\<in> O(ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n    \\<in> O(ln)", "by (rule sum_upto_ln_stirling_weak_bigo)"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n  \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(ln)", "show \"(\\<lambda>x. dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x - x * ln x + x) \\<in> O(ln)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x)\n    \\<in> O(ln)", "."], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(ln)\n\ngoal:\nNo subgoals!", "qed"], ["", "(* 4.9 *)"], ["", "interpretation \\<psi>: shapiro_tauberian mangoldt \"sum_upto (\\<lambda>n. mangoldt n / n)\" primes_psi\n  \"dirichlet_prod' mangoldt floor\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (shapiro_tauberian mangoldt &&&\n     sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n     sum_upto (\\<lambda>n. mangoldt n / real n)) &&&\n    (primes_psi \\<equiv> sum_upto mangoldt) &&&\n    dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "proof unfold_locales"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "have \"dirichlet_prod' mangoldt floor = (\\<lambda>x. sum_upto ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n    sum_upto (\\<lambda>x. ln (real x))", "unfolding sum_upto_ln_conv_sum_upto_mangoldt dirichlet_prod'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto\n         (\\<lambda>m. mangoldt m * real_of_int \\<lfloor>x / real m\\<rfloor>)\n         x) =\n    (\\<lambda>x.\n        sum_upto\n         (\\<lambda>xa.\n             mangoldt xa * real (nat \\<lfloor>x / real xa\\<rfloor>))\n         x)", "by (intro sum_upto_cong' ext) auto"], ["proof (state)\nthis:\n  dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n  sum_upto (\\<lambda>x. ln (real x))\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "hence \"(\\<lambda>x. dirichlet_prod' mangoldt floor x - x * ln x + x) = (\\<lambda>x. sum_upto ln x - x * ln x + x)\""], ["proof (prove)\nusing this:\n  dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) =\n  sum_upto (\\<lambda>x. ln (real x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x) =\n    (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x) =\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x) =\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "have \"\\<dots> \\<in> O(ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n    \\<in> O(ln)", "by (rule sum_upto_ln_stirling_weak_bigo)"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n  \\<in> O(ln)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. sum_upto (\\<lambda>x. ln (real x)) x - x * ln x + x)\n  \\<in> O(ln)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "have \"ln \\<in> O(\\<lambda>x::real. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln \\<in> O(\\<lambda>x. x)", "by real_asymp"], ["proof (state)\nthis:\n  ln \\<in> O(\\<lambda>x. x)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x - x * ln x + x - x)\n                   \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x +\n        x -\n        x)\n    \\<in> O(\\<lambda>x. x)", "by (rule sum_in_bigo) auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x -\n      x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 4. primes_psi \\<equiv> sum_upto mangoldt\n 5. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "thus \"(\\<lambda>x. dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x - x * ln x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x -\n      x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' mangoldt\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (4 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> mangoldt n\n 2. sum_upto (\\<lambda>n. mangoldt n / real n) \\<equiv>\n    sum_upto (\\<lambda>n. mangoldt n / real n)\n 3. primes_psi \\<equiv> sum_upto mangoldt\n 4. dirichlet_prod' mangoldt\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "qed (simp_all add: primes_psi_def mangoldt_nonneg)"], ["", "thm \\<psi>.asymptotics \\<psi>.upper \\<psi>.lower"], ["", "(* 4.10 *)"], ["", "interpretation \\<theta>: shapiro_tauberian \"\\<lambda>n. ind prime n * ln n\" \n  \"sum_upto (\\<lambda>n. ind prime n * ln n / n)\" primes_theta \"dirichlet_prod' (\\<lambda>n. ind prime n * ln n) floor\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (shapiro_tauberian (\\<lambda>n. ind prime n * ln (real n)) &&&\n     sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n     sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)) &&&\n    (primes_theta \\<equiv>\n     sum_upto (\\<lambda>n. ind prime n * ln (real n))) &&&\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "proof unfold_locales"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> ind prime n * ln (real n)\n 2. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n    sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)\n 4. primes_theta \\<equiv> sum_upto (\\<lambda>n. ind prime n * ln (real n))\n 5. dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "fix n :: nat"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>n. 0 < n \\<Longrightarrow> 0 \\<le> ind prime n * ln (real n)\n 2. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 3. sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n    sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)\n 4. primes_theta \\<equiv> sum_upto (\\<lambda>n. ind prime n * ln (real n))\n 5. dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "show \"ind prime n * ln n \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> ind prime n * ln (real n)", "by (auto simp: ind_def dest: prime_gt_1_nat)"], ["proof (state)\nthis:\n  0 \\<le> ind prime n * ln (real n)\n\ngoal (4 subgoals):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 2. sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n    sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)\n 3. primes_theta \\<equiv> sum_upto (\\<lambda>n. ind prime n * ln (real n))\n 4. dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)\n 2. sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n    sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)\n 3. primes_theta \\<equiv> sum_upto (\\<lambda>n. ind prime n * ln (real n))\n 4. dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "show \"(\\<lambda>x. dirichlet_prod' (\\<lambda>n. ind prime n * ln n) floor x - x * ln x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n         (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n        x * ln x)\n    \\<in> O(\\<lambda>x. x)", "by (rule dirichlet_prod_mangoldt1_floor_bigo)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (3 subgoals):\n 1. sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n) \\<equiv>\n    sum_upto (\\<lambda>n. ind prime n * ln (real n) / real n)\n 2. primes_theta \\<equiv> sum_upto (\\<lambda>n. ind prime n * ln (real n))\n 3. dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) \\<equiv>\n    dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n     (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)", "qed (simp_all add: primes_theta_def mangoldt_nonneg prime_sum_upto_altdef1[abs_def])"], ["", "thm \\<theta>.asymptotics \\<theta>.upper \\<theta>.lower"], ["", "(* 4.11 *)"], ["", "lemma sum_upto_\\<psi>_x_over_n_asymptotics:\n        \"(\\<lambda>x. sum_upto (\\<lambda>n. primes_psi (x / n)) x - x * ln x + x) \\<in> O(ln)\"\n  and sum_upto_\\<theta>_x_over_n_asymptotics:\n        \"(\\<lambda>x. sum_upto (\\<lambda>n. primes_theta (x / n)) x - x * ln x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>xa. primes_psi (x / real xa)) x - x * ln x + x)\n    \\<in> O(ln) &&&\n    (\\<lambda>x.\n        sum_upto (\\<lambda>xa. primes_theta (x / real xa)) x - x * ln x)\n    \\<in> O(\\<lambda>x. x)", "using dirichlet_prod_mangoldt1_floor_bigo dirichlet_prod'_mangoldt_floor_asymptotics"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      dirichlet_prod' (\\<lambda>n. ind prime n * ln (real n))\n       (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>) x -\n      x * ln x)\n  \\<in> O(\\<lambda>x. x)\n  (\\<lambda>x.\n      dirichlet_prod' mangoldt (\\<lambda>x. real_of_int \\<lfloor>x\\<rfloor>)\n       x -\n      x * ln x +\n      x)\n  \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto (\\<lambda>xa. primes_psi (x / real xa)) x - x * ln x + x)\n    \\<in> O(ln) &&&\n    (\\<lambda>x.\n        sum_upto (\\<lambda>xa. primes_theta (x / real xa)) x - x * ln x)\n    \\<in> O(\\<lambda>x. x)", "by (simp_all add: dirichlet_prod'_floor_conv_sum_upto primes_theta_def\n                    primes_psi_def prime_sum_upto_altdef1)"], ["", "end"]]}