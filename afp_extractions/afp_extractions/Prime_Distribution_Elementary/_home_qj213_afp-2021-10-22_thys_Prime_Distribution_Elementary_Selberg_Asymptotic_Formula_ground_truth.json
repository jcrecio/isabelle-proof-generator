{"file_name": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary/Selberg_Asymptotic_Formula.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Prime_Distribution_Elementary", "problem_names": ["lemma eq:\n  assumes \"x \\<ge> 1\"\n  shows \"F x * of_real (ln x) + dirichlet_prod' mangoldt F x = dirichlet_prod' moebius_mu G x\"", "theorem selberg_asymptotic_formula:\n  includes prime_counting_notation\n  shows    \"(\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x) =o\n               (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)\""], "translations": [["", "lemma eq:\n  assumes \"x \\<ge> 1\"\n  shows \"F x * of_real (ln x) + dirichlet_prod' mangoldt F x = dirichlet_prod' moebius_mu G x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"F x * of_real (ln x) =\n          dirichlet_prod' (\\<lambda>n. if n = 1 then 1 else 0) (\\<lambda>x. F x * of_real (ln x)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F x * of_real (ln x) =\n    dirichlet_prod' (\\<lambda>n. if n = 1 then 1::'a else (0::'a))\n     (\\<lambda>x. F x * of_real (ln x)) x", "by (subst dirichlet_prod'_one_left) (use \\<open>x \\<ge> 1\\<close> in auto)"], ["proof (state)\nthis:\n  F x * of_real (ln x) =\n  dirichlet_prod' (\\<lambda>n. if n = 1 then 1::'a else (0::'a))\n   (\\<lambda>x. F x * of_real (ln x)) x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  F x * of_real (ln x) =\n  dirichlet_prod' (\\<lambda>n. if n = 1 then 1::'a else (0::'a))\n   (\\<lambda>x. F x * of_real (ln x)) x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d) (\\<lambda>x. F x * of_real (ln x)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' (\\<lambda>n. if n = 1 then 1::'a else (0::'a))\n     (\\<lambda>x. F x * of_real (ln x)) x =\n    dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n     (\\<lambda>x. F x * of_real (ln x)) x", "by (intro dirichlet_prod'_cong refl, subst sum_moebius_mu_divisors') auto"], ["proof (state)\nthis:\n  dirichlet_prod' (\\<lambda>n. if n = 1 then 1::'a else (0::'a))\n   (\\<lambda>x. F x * of_real (ln x)) x =\n  dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n   (\\<lambda>x. F x * of_real (ln x)) x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "finally"], ["proof (chain)\npicking this:\n  F x * of_real (ln x) =\n  dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n   (\\<lambda>x. F x * of_real (ln x)) x", "have eq1: \"F x * of_real (ln x) = \\<dots>\""], ["proof (prove)\nusing this:\n  F x * of_real (ln x) =\n  dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n   (\\<lambda>x. F x * of_real (ln x)) x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) =\n    dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n     (\\<lambda>x. F x * of_real (ln x)) x", "."], ["proof (state)\nthis:\n  F x * of_real (ln x) =\n  dirichlet_prod' (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d)\n   (\\<lambda>x. F x * of_real (ln x)) x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have eq2: \"dirichlet_prod' mangoldt F x =\n               dirichlet_prod' (dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n)))) F x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' mangoldt F x =\n    dirichlet_prod'\n     (dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n)))) F x", "proof (intro dirichlet_prod'_cong refl)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>0 < n; real n \\<le> x\\<rbrakk>\n       \\<Longrightarrow> mangoldt n =\n                         dirichlet_prod moebius_mu\n                          (\\<lambda>n. of_real (ln (real n))) n", "fix n :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>0 < n; real n \\<le> x\\<rbrakk>\n       \\<Longrightarrow> mangoldt n =\n                         dirichlet_prod moebius_mu\n                          (\\<lambda>n. of_real (ln (real n))) n", "assume n: \"n > 0\""], ["proof (state)\nthis:\n  0 < n\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>0 < n; real n \\<le> x\\<rbrakk>\n       \\<Longrightarrow> mangoldt n =\n                         dirichlet_prod moebius_mu\n                          (\\<lambda>n. of_real (ln (real n))) n", "thus \"mangoldt n = dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n)) :: 'a) n\""], ["proof (prove)\nusing this:\n  0 < n\n\ngoal (1 subgoal):\n 1. mangoldt n =\n    dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n))) n", "by (intro moebius_inversion mangoldt_sum [symmetric]) auto"], ["proof (state)\nthis:\n  mangoldt n =\n  dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n))) n\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  dirichlet_prod' mangoldt F x =\n  dirichlet_prod'\n   (dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n)))) F x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n          sum_upto (\\<lambda>n. F (x / n) * (\\<Sum>d | d dvd n.\n            moebius_mu d * of_real (ln (x / n) + ln (n div d)))) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n.\n            moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n     x", "unfolding eq1 eq2"], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' (\\<lambda>n. sum moebius_mu {d. d dvd n})\n     (\\<lambda>x. F x * of_real (ln x)) x +\n    dirichlet_prod'\n     (dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n)))) F x =\n    sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n.\n            moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n     x", "unfolding dirichlet_prod'_def sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       sum moebius_mu {d. d dvd m} *\n       (F (x / real m) * of_real (ln (x / real m)))) +\n    (\\<Sum>m\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       dirichlet_prod moebius_mu (\\<lambda>n. of_real (ln (real n))) m *\n       F (x / real m)) =\n    (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n.\n          moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))", "by (simp add: algebra_simps sum.distrib dirichlet_prod_def sum_distrib_left sum_distrib_right)"], ["proof (state)\nthis:\n  F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n.\n          moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n.\n          moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = sum_upto (\\<lambda>n. F (x / n) * (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / d)))) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n.\n            moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n     x =\n    sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n     x", "using \\<open>x \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n.\n            moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n     x =\n    sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n     x", "by (intro sum_upto_cong refl arg_cong2[where f = \"\\<lambda>x y. x * y\"] sum.cong)\n                     (auto elim!: dvdE simp: ln_div ln_mult)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n.\n          moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n   x =\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n.\n          moebius_mu d * of_real (ln (x / real n) + ln (real (n div d)))))\n   x =\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = sum_upto (\\<lambda>n. \\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / d)) * F (x / n)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         F (x / real n) *\n         (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n     x =\n    sum_upto\n     (\\<lambda>n.\n         \\<Sum>d | d dvd n.\n           moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n     x", "by (simp add: sum_distrib_left sum_distrib_right mult_ac)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n   x =\n  sum_upto\n   (\\<lambda>n.\n       \\<Sum>d | d dvd n.\n         moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       F (x / real n) *\n       (\\<Sum>d | d dvd n. moebius_mu d * of_real (ln (x / real d))))\n   x =\n  sum_upto\n   (\\<lambda>n.\n       \\<Sum>d | d dvd n.\n         moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = (\\<Sum>(n,d)\\<in>(SIGMA n:{n. n > 0 \\<and> real n \\<le> x}. {d. d dvd n}).\n                    moebius_mu d * of_real (ln (x / d)) * F (x / n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         \\<Sum>d | d dvd n.\n           moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n     x =\n    (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n       case case xa of (x, y) \\<Rightarrow> (real x, y) of\n       (n, d) \\<Rightarrow>\n         moebius_mu d * of_real (ln (x / real d)) * F (x / n))", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       \\<Sum>d | d dvd n.\n         moebius_mu d * of_real (ln (x / real d)) * F (x / real n)) =\n    (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n       case case xa of (x, y) \\<Rightarrow> (real x, y) of\n       (n, d) \\<Rightarrow>\n         moebius_mu d * of_real (ln (x / real d)) * F (x / n))", "by (subst sum.Sigma) (auto simp: case_prod_unfold)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       \\<Sum>d | d dvd n.\n         moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n   x =\n  (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n     case case xa of (x, y) \\<Rightarrow> (real x, y) of\n     (n, d) \\<Rightarrow>\n       moebius_mu d * of_real (ln (x / real d)) * F (x / n))\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       \\<Sum>d | d dvd n.\n         moebius_mu d * of_real (ln (x / real d)) * F (x / real n))\n   x =\n  (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n     case case xa of (x, y) \\<Rightarrow> (real x, y) of\n     (n, d) \\<Rightarrow>\n       moebius_mu d * of_real (ln (x / real d)) * F (x / n))\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = (\\<Sum>(d,q)\\<in>(SIGMA d:{d. d > 0 \\<and> real d \\<le> x}. {q. q > 0 \\<and> real q \\<le> x / d}).\n                    moebius_mu d * of_real (ln (x / d)) * F (x / (q * d)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n       case case xa of (x, y) \\<Rightarrow> (real x, y) of\n       (n, d) \\<Rightarrow>\n         moebius_mu d * of_real (ln (x / real d)) * F (x / n)) =\n    (\\<Sum>(d, q)\n           \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                    {q. 0 < q \\<and> real q \\<le> x / real xa}).\n       moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d)))", "by (rule sum.reindex_bij_witness[of _ \"\\<lambda>(d,q). (d * q, d)\" \"\\<lambda>(n,d). (d, n div d)\"])\n       (auto simp: Real.real_of_nat_div field_simps dest: dvd_imp_le)"], ["proof (state)\nthis:\n  (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n     case case xa of (x, y) \\<Rightarrow> (real x, y) of\n     (n, d) \\<Rightarrow>\n       moebius_mu d * of_real (ln (x / real d)) * F (x / n)) =\n  (\\<Sum>(d, q)\n         \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                  {q. 0 < q \\<and> real q \\<le> x / real xa}).\n     moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d)))\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  (\\<Sum>xa\\<in>(SIGMA n:{n. 0 < n \\<and> real n \\<le> x}. {d. d dvd n}).\n     case case xa of (x, y) \\<Rightarrow> (real x, y) of\n     (n, d) \\<Rightarrow>\n       moebius_mu d * of_real (ln (x / real d)) * F (x / n)) =\n  (\\<Sum>(d, q)\n         \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                  {q. 0 < q \\<and> real q \\<le> x / real xa}).\n     moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d)))\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = sum_upto (\\<lambda>d. moebius_mu d * of_real (ln (x / d)) *\n                                  sum_upto (\\<lambda>q. F (x / (q * d))) (x / d)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>(d, q)\n           \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                    {q. 0 < q \\<and> real q \\<le> x / real xa}).\n       moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d))) =\n    sum_upto\n     (\\<lambda>d.\n         moebius_mu d * of_real (ln (x / real d)) *\n         sum_upto (\\<lambda>q. F (x / real (q * d))) (x / real d))\n     x", "by (subst sum.Sigma [symmetric]) (auto simp: sum_upto_def sum_distrib_left)"], ["proof (state)\nthis:\n  (\\<Sum>(d, q)\n         \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                  {q. 0 < q \\<and> real q \\<le> x / real xa}).\n     moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d))) =\n  sum_upto\n   (\\<lambda>d.\n       moebius_mu d * of_real (ln (x / real d)) *\n       sum_upto (\\<lambda>q. F (x / real (q * d))) (x / real d))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "also"], ["proof (state)\nthis:\n  (\\<Sum>(d, q)\n         \\<in>(SIGMA xa:{d. 0 < d \\<and> real d \\<le> x}.\n                  {q. 0 < q \\<and> real q \\<le> x / real xa}).\n     moebius_mu d * of_real (ln (x / real d)) * F (x / real (q * d))) =\n  sum_upto\n   (\\<lambda>d.\n       moebius_mu d * of_real (ln (x / real d)) *\n       sum_upto (\\<lambda>q. F (x / real (q * d))) (x / real d))\n   x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "have \"\\<dots> = dirichlet_prod' moebius_mu G x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>d.\n         moebius_mu d * of_real (ln (x / real d)) *\n         sum_upto (\\<lambda>q. F (x / real (q * d))) (x / real d))\n     x =\n    dirichlet_prod' moebius_mu G x", "by (simp add: dirichlet_prod'_def G_def mult_ac)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>d.\n       moebius_mu d * of_real (ln (x / real d)) *\n       sum_upto (\\<lambda>q. F (x / real (q * d))) (x / real d))\n   x =\n  dirichlet_prod' moebius_mu G x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "finally"], ["proof (chain)\npicking this:\n  F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n  dirichlet_prod' moebius_mu G x", "show ?thesis"], ["proof (prove)\nusing this:\n  F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n  dirichlet_prod' moebius_mu G x\n\ngoal (1 subgoal):\n 1. F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n    dirichlet_prod' moebius_mu G x", "."], ["proof (state)\nthis:\n  F x * of_real (ln x) + dirichlet_prod' mangoldt F x =\n  dirichlet_prod' moebius_mu G x\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "text \\<open>\n  We can now show Selberg's formula\n  \\[\\psi(x)\\ln x + \\sum_{n\\leq x} \\Lambda(n)\\psi(x/n) = 2x\\ln x + O(x)\\ .\\]\n\\<close>"], ["", "(* 4.18 *)"], ["", "theorem selberg_asymptotic_formula:\n  includes prime_counting_notation\n  shows    \"(\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x) =o\n               (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "define C :: real where [simp]: \"C = euler_mascheroni\""], ["proof (state)\nthis:\n  C = euler_mascheroni\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "define F2 :: \"real \\<Rightarrow> real\" where [simp]: \"F2 = (\\<lambda>x. x - C - 1)\""], ["proof (state)\nthis:\n  F2 = (\\<lambda>x. x - C - 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "define G1 where \"G1 = (\\<lambda>x. ln x * sum_upto (\\<lambda>n. \\<psi> (x / n)) x)\""], ["proof (state)\nthis:\n  G1 = (\\<lambda>x. ln x * sum_upto (\\<lambda>xa. \\<psi> (x / real xa)) x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "define G2 where \"G2 = (\\<lambda>x. ln x * sum_upto (\\<lambda>n. F2 (x / n)) x)\""], ["proof (state)\nthis:\n  G2 = (\\<lambda>x. ln x * sum_upto (\\<lambda>xa. F2 (x / real xa)) x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "interpret F1: selberg_inversion \\<psi> G1"], ["proof (prove)\ngoal (1 subgoal):\n 1. G1 \\<equiv>\n    \\<lambda>x.\n       of_real (ln x) * sum_upto (\\<lambda>xa. \\<psi> (x / real xa)) x", "by unfold_locales (simp_all add: G1_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "interpret F2: selberg_inversion F2 G2"], ["proof (prove)\ngoal (1 subgoal):\n 1. G2 \\<equiv>\n    \\<lambda>x. of_real (ln x) * sum_upto (\\<lambda>xa. F2 (x / real xa)) x", "by unfold_locales (simp_all add: G2_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have G1_bigo: \"(\\<lambda>x. G1 x - (x * ln x ^ 2 - x * ln x)) \\<in> O(\\<lambda>x. ln x ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "have \"(\\<lambda>x. ln x * (sum_upto (\\<lambda>n. \\<psi> (x / n)) x - x * ln x + x)) \\<in> O(\\<lambda>x. ln x * ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        ln x *\n        (sum_upto (\\<lambda>xa. \\<psi> (x / real xa)) x - x * ln x + x))\n    \\<in> O(\\<lambda>x. ln x * ln x)", "by (intro landau_o.big.mult_left sum_upto_\\<psi>_x_over_n_asymptotics)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      ln x *\n      (sum_upto (\\<lambda>xa. \\<psi> (x / real xa)) x - x * ln x + x))\n  \\<in> O(\\<lambda>x. ln x * ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      ln x *\n      (sum_upto (\\<lambda>xa. \\<psi> (x / real xa)) x - x * ln x + x))\n  \\<in> O(\\<lambda>x. ln x * ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "by (simp add: power2_eq_square G1_def algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n  \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. G1 x - (x * (ln x)\\<^sup>2 - x * ln x))\n  \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have G2_bigo: \"(\\<lambda>x. G2 x - (x * ln x ^ 2 - x * ln x)) \\<in> O(ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "define R1 :: \"real \\<Rightarrow> real\" where \"R1 = (\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)))\""], ["proof (state)\nthis:\n  R1 =\n  (\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "define R2 :: \"real \\<Rightarrow> real\" where \"R2 = (\\<lambda>x. (C + 1) * ln x * frac x)\""], ["proof (state)\nthis:\n  R2 = (\\<lambda>x. (C + 1) * ln x * frac x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "have \"(\\<lambda>x. G2 x - (x * ln x ^ 2 - x * ln x)) \\<in> \\<Theta>(\\<lambda>x. R1 x + R2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> \\<Theta>(\\<lambda>x. R1 x + R2 x)", "proof (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "assume x: \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "have \"G2 x = x * ln x * sum_upto (\\<lambda>n. 1 / n) x - (C + 1) * \\<lfloor>x\\<rfloor> * ln x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. G2 x =\n    x * ln x * sum_upto (\\<lambda>n. 1 / real n) x -\n    (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. G2 x =\n    x * ln x * sum_upto (\\<lambda>n. 1 / real n) x -\n    (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x", "by (simp add: G2_def sum_upto_altdef sum_subtractf\n                              sum_distrib_left sum_distrib_right algebra_simps)"], ["proof (state)\nthis:\n  G2 x =\n  x * ln x * sum_upto (\\<lambda>n. 1 / real n) x -\n  (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "also"], ["proof (state)\nthis:\n  G2 x =\n  x * ln x * sum_upto (\\<lambda>n. 1 / real n) x -\n  (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "have \"sum_upto (\\<lambda>n. 1 / n) x = harm (nat \\<lfloor>x\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) x = harm (nat \\<lfloor>x\\<rfloor>)", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. 1 / real n) x = harm (nat \\<lfloor>x\\<rfloor>)", "unfolding sum_upto_def harm_def"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}. 1 / real n) =\n    (\\<Sum>k = 1..nat \\<lfloor>x\\<rfloor>. inverse (real k))", "by (intro sum.cong) (auto simp: field_simps le_nat_iff le_floor_iff)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 / real n) x = harm (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. 1 / real n) x = harm (nat \\<lfloor>x\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "have \"x * ln x * harm (nat \\<lfloor>x\\<rfloor>) - (C + 1) * \\<lfloor>x\\<rfloor> * ln x =\n                   x * ln x ^ 2 - x * ln x + R1 x + R2 x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x * ln x * harm (nat \\<lfloor>x\\<rfloor>) -\n    (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x =\n    x * (ln x)\\<^sup>2 - x * ln x + R1 x + R2 x", "by (simp add: R1_def R2_def algebra_simps frac_def power2_eq_square)"], ["proof (state)\nthis:\n  x * ln x * harm (nat \\<lfloor>x\\<rfloor>) -\n  (C + 1) * real_of_int \\<lfloor>x\\<rfloor> * ln x =\n  x * (ln x)\\<^sup>2 - x * ln x + R1 x + R2 x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "finally"], ["proof (chain)\npicking this:\n  G2 x = x * (ln x)\\<^sup>2 - x * ln x + R1 x + R2 x", "show \"G2 x - (x * ln x ^ 2 - x * ln x) = R1 x + R2 x\""], ["proof (prove)\nusing this:\n  G2 x = x * (ln x)\\<^sup>2 - x * ln x + R1 x + R2 x\n\ngoal (1 subgoal):\n 1. G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x", "by simp"], ["proof (state)\nthis:\n  G2 x - (x * (ln x)\\<^sup>2 - x * ln x) = R1 x + R2 x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x))\n  \\<in> \\<Theta>(\\<lambda>x. R1 x + R2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x))\n  \\<in> \\<Theta>(\\<lambda>x. R1 x + R2 x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "have \"(\\<lambda>x. R1 x + R2 x) \\<in> O(ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. R1 x + R2 x) \\<in> O(ln)", "proof (intro sum_in_bigo)"], ["proof (state)\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "have \"(\\<lambda>x::real. ln x - ln (nat \\<lfloor>x\\<rfloor>)) \\<in> O(\\<lambda>x. ln x - ln (x - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n    \\<in> O(\\<lambda>x. ln x - ln (x - 1))", "proof (intro bigoI[of _ 1] eventually_mono[OF eventually_ge_at_top[of 2]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n       \\<le> 1 * norm (ln x - ln (x - 1))", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n       \\<le> 1 * norm (ln x - ln (x - 1))", "assume x: \"x \\<ge> 2\""], ["proof (state)\nthis:\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       2 \\<le> x \\<Longrightarrow>\n       norm (ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n       \\<le> 1 * norm (ln x - ln (x - 1))", "thus \"norm (ln x - ln (nat \\<lfloor>x\\<rfloor>)) \\<le> 1 * norm (ln x - ln (x - 1))\""], ["proof (prove)\nusing this:\n  2 \\<le> x\n\ngoal (1 subgoal):\n 1. norm (ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n    \\<le> 1 * norm (ln x - ln (x - 1))", "by auto"], ["proof (state)\nthis:\n  norm (ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n  \\<le> 1 * norm (ln x - ln (x - 1))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n  \\<in> O(\\<lambda>x. ln x - ln (x - 1))\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>)))\n  \\<in> O(\\<lambda>x. ln x - ln (x - 1))\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "have \"(\\<lambda>x::real. ln x - ln (x - 1)) \\<in> O(\\<lambda>x. 1 / x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ln x - ln (x - 1)) \\<in> O((/) 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. ln x - ln (x - 1)) \\<in> O((/) 1)\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>))) \\<in> O((/) 1)", "have bigo_ln_floor: \"(\\<lambda>x::real. ln x - ln (nat \\<lfloor>x\\<rfloor>)) \\<in> O(\\<lambda>x. 1 / x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>))) \\<in> O((/) 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>))) \\<in> O((/) 1)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. ln x - ln (real (nat \\<lfloor>x\\<rfloor>))) \\<in> O((/) 1)\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "have \"(\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln (nat \\<lfloor>x\\<rfloor>) + C)) \\<in> O(\\<lambda>x. 1 / nat \\<lfloor>x\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        harm (nat \\<lfloor>x\\<rfloor>) -\n        (ln (real (nat \\<lfloor>x\\<rfloor>)) + C))\n    \\<in> O(\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>))", "unfolding C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        harm (nat \\<lfloor>x\\<rfloor>) -\n        (ln (real (nat \\<lfloor>x\\<rfloor>)) + euler_mascheroni))\n    \\<in> O(\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>))", "using harm_expansion_bigo_simple2"], ["proof (prove)\nusing this:\n  (\\<lambda>n. harm n - (ln (real n) + euler_mascheroni))\n  \\<in> O(\\<lambda>n. 1 / real n)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        harm (nat \\<lfloor>x\\<rfloor>) -\n        (ln (real (nat \\<lfloor>x\\<rfloor>)) + euler_mascheroni))\n    \\<in> O(\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>))", "by (rule landau_o.big.compose) (* TODO: real_asymp should be able to do this *)\n           (auto intro!: filterlim_compose[OF filterlim_nat_sequentially filterlim_floor_sequentially])"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C))\n  \\<in> O(\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C))\n  \\<in> O(\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>))\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "have \"(\\<lambda>x. 1 / nat \\<lfloor>x\\<rfloor>) \\<in> O(\\<lambda>x. 1 / x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>)) \\<in> O((/) 1)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. 1 / real (nat \\<lfloor>x\\<rfloor>)) \\<in> O((/) 1)\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C))\n  \\<in> O((/) 1)", "have \"(\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln (nat \\<lfloor>x\\<rfloor>) + C) - (ln x - ln (nat \\<lfloor>x\\<rfloor>)))\n                       \\<in> O(\\<lambda>x. 1 / x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C))\n  \\<in> O((/) 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        harm (nat \\<lfloor>x\\<rfloor>) -\n        (ln (real (nat \\<lfloor>x\\<rfloor>)) + C) -\n        (ln x - ln (real (nat \\<lfloor>x\\<rfloor>))))\n    \\<in> O((/) 1)", "by (rule sum_in_bigo[OF _bigo_ln_floor])"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C) -\n      (ln x - ln (real (nat \\<lfloor>x\\<rfloor>))))\n  \\<in> O((/) 1)\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "hence \"(\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)) \\<in> O(\\<lambda>x. 1 / x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      harm (nat \\<lfloor>x\\<rfloor>) -\n      (ln (real (nat \\<lfloor>x\\<rfloor>)) + C) -\n      (ln x - ln (real (nat \\<lfloor>x\\<rfloor>))))\n  \\<in> O((/) 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)) \\<in> O((/) 1)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)) \\<in> O((/) 1)\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "hence \"(\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C))) \\<in> O(\\<lambda>x. x * ln x * (1 / x))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)) \\<in> O((/) 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)))\n    \\<in> O(\\<lambda>x. x * ln x * (1 / x))", "by (intro landau_o.big.mult_left)"], ["proof (state)\nthis:\n  (\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)))\n  \\<in> O(\\<lambda>x. x * ln x * (1 / x))\n\ngoal (2 subgoals):\n 1. R1 \\<in> O(ln)\n 2. R2 \\<in> O(ln)", "thus \"R1 \\<in> O(ln)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * ln x * (harm (nat \\<lfloor>x\\<rfloor>) - (ln x + C)))\n  \\<in> O(\\<lambda>x. x * ln x * (1 / x))\n\ngoal (1 subgoal):\n 1. R1 \\<in> O(ln)", "by (simp add: landau_divide_simps R1_def)"], ["proof (state)\nthis:\n  R1 \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. R2 \\<in> O(ln)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. R2 \\<in> O(ln)", "have \"R2 \\<in> O(\\<lambda>x. 1 * ln x * 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R2 \\<in> O(\\<lambda>x. 1 * ln x * 1)", "(* TODO: real_asymp? *)"], ["proof (prove)\ngoal (1 subgoal):\n 1. R2 \\<in> O(\\<lambda>x. 1 * ln x * 1)", "unfolding R2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (C + 1) * ln x * frac x) \\<in> O(\\<lambda>x. 1 * ln x * 1)", "by (intro landau_o.big.mult landau_o.big_refl) real_asymp+"], ["proof (state)\nthis:\n  R2 \\<in> O(\\<lambda>x. 1 * ln x * 1)\n\ngoal (1 subgoal):\n 1. R2 \\<in> O(ln)", "thus \"R2 \\<in> O(ln)\""], ["proof (prove)\nusing this:\n  R2 \\<in> O(\\<lambda>x. 1 * ln x * 1)\n\ngoal (1 subgoal):\n 1. R2 \\<in> O(ln)", "by (simp add: R2_def)"], ["proof (state)\nthis:\n  R2 \\<in> O(ln)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. R1 x + R2 x) \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "show \"(\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "hence G2_bigo': \"(\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(\\<lambda>x. ln x ^ 2)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x)) \\<in> O(ln)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x))\n    \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "by (rule landau_o.big.trans) real_asymp+\n\n  \\<comment> \\<open>Now things become a bit hairy. In order to show that the `Big-O' bound is actually\n      valid for all \\<open>x \\<ge> 1\\<close>, we need to show that \\<open>G1 x - G2 x\\<close> is bounded on any compact\n      interval starting at 1.\\<close>"], ["proof (state)\nthis:\n  (\\<lambda>x. G2 x - (x * (ln x)\\<^sup>2 - x * ln x))\n  \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"\\<exists>c>0. \\<forall>x\\<ge>1. \\<bar>G1 x - G2 x\\<bar> \\<le> c * \\<bar>sqrt x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c>0.\n       \\<forall>x\\<ge>1.\n          \\<bar>G1 x - G2 x\\<bar> \\<le> c * \\<bar>sqrt x\\<bar>", "proof (rule bigoE_bounded_real_fun)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 3. 0 < ?cg\n 4. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "have \"(\\<lambda>x. G1 x - G2 x) \\<in> O(\\<lambda>x. ln x ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "using sum_in_bigo(2)[OF G1_bigo G2_bigo']"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      G1 x - (x * (ln x)\\<^sup>2 - x * ln x) -\n      (G2 x - (x * (ln x)\\<^sup>2 - x * ln x)))\n  \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. G1 x - G2 x) \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 3. 0 < ?cg\n 4. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. G1 x - G2 x) \\<in> O(\\<lambda>x. (ln x)\\<^sup>2)\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 3. 0 < ?cg\n 4. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "have \"(\\<lambda>x::real. ln x ^ 2) \\<in> O(sqrt)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (ln x)\\<^sup>2) \\<in> O(sqrt)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. (ln x)\\<^sup>2) \\<in> O(sqrt)\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n 2. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 3. 0 < ?cg\n 4. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)", "show \"(\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)", "."], ["proof (state)\nthis:\n  (\\<lambda>x. G1 x - G2 x) \\<in> O(sqrt)\n\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 2. 0 < ?cg\n 3. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 2. 0 < ?cg\n 3. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "fix x :: real"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 2. 0 < ?cg\n 3. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "assume \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (3 subgoals):\n 1. \\<And>x. 1 \\<le> x \\<Longrightarrow> ?cg \\<le> \\<bar>sqrt x\\<bar>\n 2. 0 < ?cg\n 3. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "thus \"\\<bar>sqrt x\\<bar> \\<ge> 1\""], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. 1 \\<le> \\<bar>sqrt x\\<bar>", "by simp"], ["proof (state)\nthis:\n  1 \\<le> \\<bar>sqrt x\\<bar>\n\ngoal (2 subgoals):\n 1. 0 < 1\n 2. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < 1\n 2. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "fix b :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 < 1\n 2. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "assume b: \"b \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> b\n\ngoal (2 subgoals):\n 1. 0 < 1\n 2. \\<And>b.\n       1 \\<le> b \\<Longrightarrow>\n       bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "show \"bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})", "proof (rule boundedI, safe)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "assume x: \"x \\<in> {1..b}\""], ["proof (state)\nthis:\n  x \\<in> {1..b}\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"\\<bar>G1 x - G2 x\\<bar> = \\<bar>ln x * sum_upto (\\<lambda>n. \\<psi> (x / n) - F2 (x / n)) x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>G1 x - G2 x\\<bar> =\n    \\<bar>ln x *\n          sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar>", "by (simp add: G1_def G2_def sum_upto_def sum_distrib_left ring_distribs sum_subtractf)"], ["proof (state)\nthis:\n  \\<bar>G1 x - G2 x\\<bar> =\n  \\<bar>ln x *\n        sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "also"], ["proof (state)\nthis:\n  \\<bar>G1 x - G2 x\\<bar> =\n  \\<bar>ln x *\n        sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"\\<dots> = ln x * \\<bar>sum_upto (\\<lambda>n. \\<psi> (x / n) - F2 (x / n)) x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>ln x *\n          sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar> =\n    ln x *\n    \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar>", "using x b"], ["proof (prove)\nusing this:\n  x \\<in> {1..b}\n  1 \\<le> b\n\ngoal (1 subgoal):\n 1. \\<bar>ln x *\n          sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar> =\n    ln x *\n    \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar>", "by (simp add: abs_mult)"], ["proof (state)\nthis:\n  \\<bar>ln x *\n        sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar> =\n  ln x *\n  \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "also"], ["proof (state)\nthis:\n  \\<bar>ln x *\n        sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar> =\n  ln x *\n  \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"\\<bar>sum_upto (\\<lambda>n. \\<psi> (x / n) - F2 (x / n)) x\\<bar> \\<le>\n                   sum_upto (\\<lambda>n. \\<bar>\\<psi> (x / n) - F2 (x / n)\\<bar>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n           x\\<bar>\n    \\<le> sum_upto\n           (\\<lambda>xa.\n               \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>)\n           x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>xa\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n            \\<psi> (x / real xa) - F2 (x / real xa)\\<bar>\n    \\<le> (\\<Sum>xa\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>xa. \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>)\n         x\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto (\\<lambda>xa. \\<psi> (x / real xa) - F2 (x / real xa))\n         x\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>xa. \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>)\n         x\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"\\<dots> \\<le> sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>xa. \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>) x\n    \\<le> sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>xa\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>)\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             \\<psi> x + (x + C + 1))", "proof (intro sum_mono)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x} \\<Longrightarrow>\n       \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>\n       \\<le> \\<psi> x + (x + C + 1)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x} \\<Longrightarrow>\n       \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>\n       \\<le> \\<psi> x + (x + C + 1)", "assume n: \"n \\<in> {n. n > 0 \\<and> real n \\<le> x}\""], ["proof (state)\nthis:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> x}\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x} \\<Longrightarrow>\n       \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>\n       \\<le> \\<psi> x + (x + C + 1)", "hence le: \"x / n \\<le> x / 1\""], ["proof (prove)\nusing this:\n  n \\<in> {n. 0 < n \\<and> real n \\<le> x}\n\ngoal (1 subgoal):\n 1. x / real n \\<le> x / 1", "by (intro divide_left_mono) auto"], ["proof (state)\nthis:\n  x / real n \\<le> x / 1\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {i. 0 < i \\<and> real i \\<le> x} \\<Longrightarrow>\n       \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>\n       \\<le> \\<psi> x + (x + C + 1)", "thus \"\\<bar>\\<psi> (x / n) - F2 (x / n)\\<bar> \\<le> \\<psi> x + (x + C + 1)\""], ["proof (prove)\nusing this:\n  x / real n \\<le> x / 1\n\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> (x / real n) - F2 (x / real n)\\<bar>\n    \\<le> \\<psi> x + (x + C + 1)", "unfolding F2_def"], ["proof (prove)\nusing this:\n  x / real n \\<le> x / 1\n\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> (x / real n) - (x / real n - C - 1)\\<bar>\n    \\<le> \\<psi> x + (x + C + 1)", "using euler_mascheroni_pos x le \\<psi>_nonneg \\<psi>_mono[of \"x / n\" x]"], ["proof (prove)\nusing this:\n  x / real n \\<le> x / 1\n  0 < euler_mascheroni\n  x \\<in> {1..b}\n  x / real n \\<le> x / 1\n  0 \\<le> \\<psi> ?x\n  x / real n \\<le> x \\<Longrightarrow> \\<psi> (x / real n) \\<le> \\<psi> x\n\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> (x / real n) - (x / real n - C - 1)\\<bar>\n    \\<le> \\<psi> x + (x + C + 1)", "by (intro order.trans[OF abs_triangle_ineq]\n                    order.trans[OF abs_triangle_ineq4] add_mono) auto"], ["proof (state)\nthis:\n  \\<bar>\\<psi> (x / real n) - F2 (x / real n)\\<bar>\n  \\<le> \\<psi> x + (x + C + 1)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>xa. \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>) x\n  \\<le> sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>xa. \\<bar>\\<psi> (x / real xa) - F2 (x / real xa)\\<bar>) x\n  \\<le> sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"\\<dots> = (\\<psi> x + (x + C + 1)) * \\<lfloor>x\\<rfloor>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x =\n    (\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>", "using x"], ["proof (prove)\nusing this:\n  x \\<in> {1..b}\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x =\n    (\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>", "by (simp add: sum_upto_altdef)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x =\n  (\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>n. \\<psi> x + (x + C + 1)) x =\n  (\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "have \"ln x * ((\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>) \\<le>\n                   ln b * ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ln x * ((\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>)\n    \\<le> ln b *\n          ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)", "using euler_mascheroni_pos x"], ["proof (prove)\nusing this:\n  0 < euler_mascheroni\n  x \\<in> {1..b}\n\ngoal (1 subgoal):\n 1. ln x * ((\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>)\n    \\<le> ln b *\n          ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)", "by (intro mult_mono add_mono order.refl \\<psi>_mono add_nonneg_nonneg mult_nonneg_nonneg\n                     \\<psi>_nonneg) (auto intro: floor_mono)"], ["proof (state)\nthis:\n  ln x * ((\\<psi> x + (x + C + 1)) * real_of_int \\<lfloor>x\\<rfloor>)\n  \\<le> ln b * ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       xa \\<in> {1..b} \\<Longrightarrow> norm (G1 xa - G2 xa) \\<le> ?B", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>G1 x - G2 x\\<bar>\n                    \\<le> ln b *\n                          ((\\<psi> b + (b + C + 1)) *\n                           real_of_int \\<lfloor>b\\<rfloor>)", "show \"norm (G1 x - G2 x) \\<le> ln b * ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>G1 x - G2 x\\<bar>\n                    \\<le> ln b *\n                          ((\\<psi> b + (b + C + 1)) *\n                           real_of_int \\<lfloor>b\\<rfloor>)\n\ngoal (1 subgoal):\n 1. norm (G1 x - G2 x)\n    \\<le> ln b *\n          ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)", "using x"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>xa y.\n              xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y;\n   \\<And>xa y.\n      xa \\<le> y \\<Longrightarrow> ln x * xa \\<le> ln x * y\\<rbrakk>\n  \\<Longrightarrow> \\<bar>G1 x - G2 x\\<bar>\n                    \\<le> ln b *\n                          ((\\<psi> b + (b + C + 1)) *\n                           real_of_int \\<lfloor>b\\<rfloor>)\n  x \\<in> {1..b}\n\ngoal (1 subgoal):\n 1. norm (G1 x - G2 x)\n    \\<le> ln b *\n          ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)", "by (simp add: mult_left_mono)"], ["proof (state)\nthis:\n  norm (G1 x - G2 x)\n  \\<le> ln b * ((\\<psi> b + (b + C + 1)) * real_of_int \\<lfloor>b\\<rfloor>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. G1 x - G2 x) ` {1..b})\n\ngoal (1 subgoal):\n 1. 0 < 1", "qed auto"], ["proof (state)\nthis:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1. \\<bar>G1 x - G2 x\\<bar> \\<le> c * \\<bar>sqrt x\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "then"], ["proof (chain)\npicking this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1. \\<bar>G1 x - G2 x\\<bar> \\<le> c * \\<bar>sqrt x\\<bar>", "obtain A where A: \"A > 0\" \"\\<And>x. x \\<ge> 1 \\<Longrightarrow> \\<bar>G1 x - G2 x\\<bar> \\<le> A * sqrt x\""], ["proof (prove)\nusing this:\n  \\<exists>c>0.\n     \\<forall>x\\<ge>1. \\<bar>G1 x - G2 x\\<bar> \\<le> c * \\<bar>sqrt x\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>A.\n        \\<lbrakk>0 < A;\n         \\<And>x.\n            1 \\<le> x \\<Longrightarrow>\n            \\<bar>G1 x - G2 x\\<bar> \\<le> A * sqrt x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto\n\n  \\<comment> \\<open>The rest of the proof now consists merely of combining some asymptotic estimates.\\<close>"], ["proof (state)\nthis:\n  0 < A\n  1 \\<le> ?x \\<Longrightarrow> \\<bar>G1 ?x - G2 ?x\\<bar> \\<le> A * sqrt ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"(\\<lambda>x. (\\<psi> x - F2 x) * ln x + sum_upto (\\<lambda>n. mangoldt n * (\\<psi> (x / n) - F2 (x / n))) x)\n          \\<in> \\<Theta>(\\<lambda>x. sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / n) - G2 (x / n))) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (\\<psi> x - F2 x) * ln x +\n        sum_upto\n         (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n         x)\n    \\<in> \\<Theta>(\\<lambda>x.\n                      sum_upto\n                       (\\<lambda>n.\n                           moebius_mu n *\n                           (G1 (x / real n) - G2 (x / real n)))\n                       x)", "proof (intro bigthetaI_cong eventually_mono[OF eventually_ge_at_top[of 1]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "assume x: \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "have \"(\\<psi> x - F2 x) * ln x + sum_upto (\\<lambda>n. mangoldt n * (\\<psi> (x / n) - F2 (x / n))) x =\n            (\\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x) -\n            (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<psi> x - F2 x) * ln x +\n    sum_upto\n     (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n    \\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x -\n    (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x)", "by (simp add: algebra_simps dirichlet_prod'_def sum_upto_def sum_subtractf sum.distrib)"], ["proof (state)\nthis:\n  (\\<psi> x - F2 x) * ln x +\n  sum_upto\n   (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n  \\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x -\n  (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "also"], ["proof (state)\nthis:\n  (\\<psi> x - F2 x) * ln x +\n  sum_upto\n   (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n  \\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x -\n  (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "have \"\\<dots> = sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / n) - G2 (x / n))) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x -\n    (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x) =\n    sum_upto\n     (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "unfolding F1.eq[OF x] F2.eq[OF x]"], ["proof (prove)\ngoal (1 subgoal):\n 1. dirichlet_prod' moebius_mu G1 x - dirichlet_prod' moebius_mu G2 x =\n    sum_upto\n     (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "by (simp add: dirichlet_prod'_def sum_upto_def sum_subtractf sum.distrib algebra_simps)"], ["proof (state)\nthis:\n  \\<psi> x * of_real (ln x) + dirichlet_prod' mangoldt \\<psi> x -\n  (F2 x * of_real (ln x) + dirichlet_prod' mangoldt F2 x) =\n  sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n   x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       (\\<psi> x - F2 x) * ln x +\n       sum_upto\n        (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n        x =\n       sum_upto\n        (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "finally"], ["proof (chain)\npicking this:\n  (\\<psi> x - F2 x) * ln x +\n  sum_upto\n   (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n  sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n   x", "show \"(\\<psi> x - F2 x) * ln x + sum_upto (\\<lambda>n. mangoldt n * (\\<psi> (x/n) - F2 (x/n))) x = \\<dots>\""], ["proof (prove)\nusing this:\n  (\\<psi> x - F2 x) * ln x +\n  sum_upto\n   (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n  sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n   x\n\ngoal (1 subgoal):\n 1. (\\<psi> x - F2 x) * ln x +\n    sum_upto\n     (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n    sum_upto\n     (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x", "."], ["proof (state)\nthis:\n  (\\<psi> x - F2 x) * ln x +\n  sum_upto\n   (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x =\n  sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n   x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    sum_upto\n                     (\\<lambda>n.\n                         moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n                     x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> \\<Theta>(\\<lambda>x.\n                    sum_upto\n                     (\\<lambda>n.\n                         moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n                     x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"(\\<lambda>x. sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / n) - G2 (x / n))) x) \\<in>\n               O(\\<lambda>x. A * sqrt x * sum_upto (\\<lambda>x. x powr (-1/2)) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sum_upto\n         (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x)\n    \\<in> O(\\<lambda>x.\n               A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "proof (intro bigoI eventually_mono[OF eventually_ge_at_top[of 1]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "fix x :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "assume x: \"x \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "have \"\\<bar>sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / n) - G2 (x / n))) x\\<bar> \\<le>\n            sum_upto (\\<lambda>n. \\<bar>moebius_mu n * (G1 (x / n) - G2 (x / n))\\<bar>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sum_upto\n           (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n           x\\<bar>\n    \\<le> sum_upto\n           (\\<lambda>n.\n               \\<bar>moebius_mu n *\n                     (G1 (x / real n) - G2 (x / real n))\\<bar>)\n           x", "unfolding sum_upto_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n            moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>\n    \\<le> (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)", "by (rule sum_abs)"], ["proof (state)\nthis:\n  \\<bar>sum_upto\n         (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n         x\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>n.\n             \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)\n         x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "also"], ["proof (state)\nthis:\n  \\<bar>sum_upto\n         (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n         x\\<bar>\n  \\<le> sum_upto\n         (\\<lambda>n.\n             \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)\n         x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "have \"\\<dots> \\<le> sum_upto (\\<lambda>n. 1 * (A * sqrt (x / n))) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto\n     (\\<lambda>n.\n         \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)\n     x\n    \\<le> sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x", "unfolding sum_upto_def abs_mult"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n       \\<bar>moebius_mu n\\<bar> *\n       \\<bar>G1 (x / real n) - G2 (x / real n)\\<bar>)\n    \\<le> (\\<Sum>xa\\<in>{i. 0 < i \\<and> real i \\<le> x}.\n             1 * (A * sqrt (x / real xa)))", "by (intro A sum_mono mult_mono) (auto simp: moebius_mu_def)"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)\n   x\n  \\<le> sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "also"], ["proof (state)\nthis:\n  sum_upto\n   (\\<lambda>n.\n       \\<bar>moebius_mu n * (G1 (x / real n) - G2 (x / real n))\\<bar>)\n   x\n  \\<le> sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "have \"\\<dots> = A * sqrt x * sum_upto (\\<lambda>x. x powr (-1/2)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x =\n    A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x", "using x"], ["proof (prove)\nusing this:\n  1 \\<le> x\n\ngoal (1 subgoal):\n 1. sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x =\n    A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x", "by (simp add: sum_upto_def powr_minus powr_half_sqrt sum_distrib_left\n                            sum_distrib_right real_sqrt_divide field_simps)"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x =\n  A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "also"], ["proof (state)\nthis:\n  sum_upto (\\<lambda>xa. 1 * (A * sqrt (x / real xa))) x =\n  A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "have \"\\<dots> \\<le> \\<bar>A * sqrt x * sum_upto (\\<lambda>x. x powr (-1/2)) x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\n    \\<le> \\<bar>A * sqrt x *\n                sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\\<bar>", "by simp"], ["proof (state)\nthis:\n  A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\n  \\<le> \\<bar>A * sqrt x *\n              sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       norm\n        (sum_upto\n          (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n          x)\n       \\<le> ?c *\n             norm\n              (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "finally"], ["proof (chain)\npicking this:\n  \\<bar>sum_upto\n         (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n         x\\<bar>\n  \\<le> \\<bar>A * sqrt x *\n              sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\\<bar>", "show \"norm (sum_upto (\\<lambda>n. moebius_mu n * (G1 (x / n) - G2 (x / n))) x) \\<le>\n                    1 * norm (A * sqrt x * sum_upto (\\<lambda>x. x powr (-1/2)) x)\""], ["proof (prove)\nusing this:\n  \\<bar>sum_upto\n         (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n)))\n         x\\<bar>\n  \\<le> \\<bar>A * sqrt x *\n              sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x\\<bar>\n\ngoal (1 subgoal):\n 1. norm\n     (sum_upto\n       (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x)\n    \\<le> 1 *\n          norm (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)", "by simp"], ["proof (state)\nthis:\n  norm\n   (sum_upto\n     (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x)\n  \\<le> 1 *\n        norm (A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto\n       (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x)\n  \\<in> O(\\<lambda>x.\n             A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sum_upto\n       (\\<lambda>n. moebius_mu n * (G1 (x / real n) - G2 (x / real n))) x)\n  \\<in> O(\\<lambda>x.\n             A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"(\\<lambda>x. A * sqrt x * sum_upto (\\<lambda>x. x powr (-1/2)) x) \\<in> O(\\<lambda>x. 1 * sqrt x * x powr (1/2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n    \\<in> O(\\<lambda>x. 1 * sqrt x * x powr (1 / 2))", "using zeta_partial_sum_le_pos_bigo[of \"1 / 2\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1 / 2; 1 / 2 \\<noteq> 1\\<rbrakk>\n  \\<Longrightarrow> sum_upto (\\<lambda>n. real n powr - (1 / 2))\n                    \\<in> O(\\<lambda>x. x powr max 0 (1 - 1 / 2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n    \\<in> O(\\<lambda>x. 1 * sqrt x * x powr (1 / 2))", "by (intro landau_o.big.mult ) (auto simp: max_def)"], ["proof (state)\nthis:\n  (\\<lambda>x. A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n  \\<in> O(\\<lambda>x. 1 * sqrt x * x powr (1 / 2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x. A * sqrt x * sum_upto (\\<lambda>x. real x powr (- 1 / 2)) x)\n  \\<in> O(\\<lambda>x. 1 * sqrt x * x powr (1 / 2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"(\\<lambda>x::real. 1 * sqrt x * x powr (1/2)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 * sqrt x * x powr (1 / 2)) \\<in> O(\\<lambda>x. x)", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. 1 * sqrt x * x powr (1 / 2)) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> O(\\<lambda>x. x)", "have bigo: \"(\\<lambda>x. (\\<psi> x - F2 x) * ln x + sum_upto (\\<lambda>n. mangoldt n * (\\<psi> (x/n) - F2 (x/n))) x)\n                        \\<in> O(\\<lambda>x. x)\" (is \"?h \\<in> _\")"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (\\<psi> x - F2 x) * ln x +\n        sum_upto\n         (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n         x)\n    \\<in> O(\\<lambda>x. x)", "."], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "let ?R = \"\\<lambda>x. sum_upto (\\<lambda>n. mangoldt n / n) x\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "let ?lhs = \"\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "note bigo"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n))) x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"?h = (\\<lambda>x. ?lhs x - (x * ln x - (C + 1) * (ln x + \\<psi> x)) - x * ?R x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (\\<psi> x - F2 x) * ln x +\n        sum_upto\n         (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n         x) =\n    (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n        x * sum_upto (\\<lambda>n. mangoldt n / real n) x)", "by (rule ext) (simp add: algebra_simps dirichlet_prod'_def  sum_distrib_right \\<psi>_def\n                             sum_upto_def sum_subtractf sum.distrib sum_distrib_left)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (\\<psi> x - F2 x) * ln x +\n      sum_upto\n       (\\<lambda>n. mangoldt n * (\\<psi> (x / real n) - F2 (x / real n)))\n       x) =\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x)\n  \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. ?lhs x - (x * ln x - (C + 1) * (ln x + \\<psi> x)) - x * ?R x + x * (?R x - ln x))\n                    \\<in> O(\\<lambda>x. x)\" (is \"?h' \\<in> _\")"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n        x * sum_upto (\\<lambda>n. mangoldt n / real n) x +\n        x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n    \\<in> O(\\<lambda>x. x)", "proof (rule sum_in_bigo)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n    \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x)) \\<in> O(\\<lambda>x. x * 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n    \\<in> O(\\<lambda>x. x * 1)", "by (intro landau_o.big.mult_left \\<psi>.asymptotics)"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n  \\<in> O(\\<lambda>x. x * 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n    \\<in> O(\\<lambda>x. x)", "thus \"(\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n  \\<in> O(\\<lambda>x. x * 1)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n    \\<in> O(\\<lambda>x. x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n  \\<in> O(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x +\n      x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x +\n      x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"?h' = (\\<lambda>x. ?lhs x - (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n        x * sum_upto (\\<lambda>n. mangoldt n / real n) x +\n        x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x)) =\n    (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)))", "by (simp add: fun_eq_iff algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      x * sum_upto (\\<lambda>n. mangoldt n / real n) x +\n      x * (sum_upto (\\<lambda>n. mangoldt n / real n) x - ln x)) =\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)))\n  \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. ?lhs x - (2*x*ln x - (C+1) * (ln x + \\<psi> x)) - (C+1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n        (C + 1) * (ln x + \\<psi> x))\n    \\<in> O(\\<lambda>x. x)", "proof (rule sum_in_bigo)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (C + 1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)", "have \"(\\<lambda>x. ln x + \\<psi> x) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. ln x + \\<psi> x) \\<in> O(\\<lambda>x. x)", "by (intro sum_in_bigo bigthetaD1[OF \\<psi>.bigtheta]) real_asymp+"], ["proof (state)\nthis:\n  (\\<lambda>x. ln x + \\<psi> x) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (C + 1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)", "thus \"(\\<lambda>x. (C + 1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. ln x + \\<psi> x) \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (C + 1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. (C + 1) * (ln x + \\<psi> x)) \\<in> O(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      (C + 1) * (ln x + \\<psi> x))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "also"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      (C + 1) * (ln x + \\<psi> x))\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "have \"(\\<lambda>x. ?lhs x - (2*x*ln x - (C+1) * (ln x + \\<psi> x)) - (C+1) * (ln x + \\<psi> x)) =\n               (\\<lambda>x. ?lhs x - 2 * x * ln x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n        (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n        (C + 1) * (ln x + \\<psi> x)) =\n    (\\<lambda>x.\n        \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x - 2 * x * ln x)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x -\n      (2 * x * ln x - (C + 1) * (ln x + \\<psi> x)) -\n      (C + 1) * (ln x + \\<psi> x)) =\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x - 2 * x * ln x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x - 2 * x * ln x)\n  \\<in> O(\\<lambda>x. x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x - 2 * x * ln x)\n  \\<in> O(\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n    \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)", "by (subst set_minus_plus [symmetric]) (simp_all add: fun_diff_def algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<psi> x * ln x + dirichlet_prod' mangoldt \\<psi> x)\n  \\<in> (\\<lambda>x. 2 * x * ln x) +o O(\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}