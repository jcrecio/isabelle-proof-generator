{"file_name": "/home/qj213/afp-2021-10-22/thys/Lower_Semicontinuous/Lower_Semicontinuous.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Lower_Semicontinuous", "problem_names": ["lemma rel_interior_ereal_semiline:\n  fixes a :: ereal\n  shows \"rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\"", "lemma closed_ereal_semiline:\n  fixes a :: ereal\n  shows \"closed {y. a \\<le> ereal y}\"", "lemma ereal_semiline_unique:\n  fixes a b :: ereal\n  shows \"{y. a \\<le> ereal y} = {y. b \\<le> ereal y} \\<longleftrightarrow> a = b\"", "lemma lsc_at_mem:\n  assumes \"lsc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  assumes \"(f \\<circ> x) \\<longlonglongrightarrow> A\"\n  shows \"f x0 \\<le> A\"", "lemma usc_at_mem:\n  assumes \"usc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  assumes \"(f \\<circ> x) \\<longlonglongrightarrow> A\"\n  shows \"f x0 \\<ge> A\"", "lemma lsc_at_open:\n  fixes f :: \"'a::first_countable_topology \\<Rightarrow> 'b::{complete_linorder, linorder_topology}\"\n  shows \"lsc_at x0 f \\<longleftrightarrow>\n    (\\<forall>S. open S \\<and> f x0 \\<in> S \\<longrightarrow> (\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_at_open_mem:\n  fixes f :: \"'a::first_countable_topology \\<Rightarrow> 'b::{complete_linorder, linorder_topology}\"\n  assumes \"lsc_at x0 f\"\n  assumes \"open S \\<and> f x0 : S\"\n  obtains T where \"open T \\<and> x0 \\<in> T \\<and> (\\<forall>x'\\<in>T. (f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\"", "lemma lsc_at_MInfty:\n  fixes f :: \"'a::topological_space \\<Rightarrow> ereal\"\n  assumes \"f x0 = -\\<infinity>\"\n  shows \"lsc_at x0 f\"", "lemma lsc_at_PInfty:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"f x0 = \\<infinity>\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> continuous (at x0) f\"", "lemma lsc_at_real:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"\\<bar>f x0\\<bar> \\<noteq> \\<infinity>\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>e. e>0 \\<longrightarrow> (\\<exists>T. open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. f y > f x0 - e)))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_at_ereal:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y \\<in> T. f y > C))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lst_at_ball:\nfixes f :: \"'a::metric_space => ereal\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>d>0. \\<forall>y \\<in> (ball x0 d). C<f(y))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lst_at_delta:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_liminf_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> f x0 \\<le> Liminf (at x0) f\"", "lemma lsc_liminf_at_eq:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (f x0 = min (f x0) (Liminf (at x0) f))\"", "lemma lsc_imp_liminf:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"lsc_at x0 f\"\nassumes \"x \\<longlonglongrightarrow> x0\"\nshows \"f x0 \\<le> liminf (f \\<circ> x)\"", "lemma lsc_liminf:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x. x \\<longlonglongrightarrow> x0 \\<longrightarrow> f x0 \\<le> liminf (f \\<circ> x))\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_sequentially:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x c. x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f(x n)\\<le>c) \\<longrightarrow> f(x0)\\<le>c)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_sequentially_gen:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x c c0. x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f(x n)\\<le>c n) \\<longrightarrow> f(x0)\\<le>c0)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_sequentially_mem:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"lsc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\" \"c \\<longlonglongrightarrow> c0\"\n  assumes \"\\<forall>n. f(x n)\\<le>c n\"\n  shows \"f(x0)\\<le>c0\"", "lemma lsc_uminus:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 (\\<lambda>x. -f x) \\<longleftrightarrow> usc_at x0 f\"", "lemma usc_limsup:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"usc_at x0 f \\<longleftrightarrow> (\\<forall>x. x \\<longlonglongrightarrow> x0 \\<longrightarrow> f x0 \\<ge> limsup (f \\<circ> x))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma usc_imp_limsup:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"usc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  shows \"f x0 \\<ge> limsup (f \\<circ> x)\"", "lemma usc_limsup_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"usc_at x0 f \\<longleftrightarrow> f x0 \\<ge> Limsup (at x0) f\"", "lemma continuous_iff_lsc_usc:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"continuous (at x0) f \\<longleftrightarrow> (lsc_at x0 f) \\<and> (usc_at x0 f)\"", "lemma continuous_lsc_compose:\n  assumes \"lsc_at (g x0) f\" \"continuous (at x0) g\"\n  shows \"lsc_at x0 (f \\<circ> g)\"", "lemma continuous_isCont:\n  \"continuous (at x0) f \\<longleftrightarrow> isCont f x0\"", "lemma isCont_iff_lsc_usc:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"isCont f x0 \\<longleftrightarrow> (lsc_at x0 f) \\<and> (usc_at x0 f)\"", "lemma continuous_UNIV_iff_lsc_usc:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(\\<forall>x. continuous (at x) f) \\<longleftrightarrow> (lsc f) \\<and> (usc f)\"", "lemma mem_Epigraph: \"(x, y) \\<in> Epigraph S f \\<longleftrightarrow> x \\<in> S \\<and> f x \\<le> ereal y\"", "lemma ereal_closed_levels:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(\\<forall>y. closed {x. f(x)\\<le>y}) \\<longleftrightarrow> (\\<forall>r. closed {x. f(x)\\<le>ereal r})\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_iff:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(lsc f \\<longleftrightarrow> (\\<forall>y. closed {x. f(x)\\<le>y})) \\<and> (lsc f \\<longleftrightarrow> closed (Epigraph UNIV f))\"", "lemma epigraph_mono:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(x,y):Epigraph UNIV f \\<and> y\\<le>z \\<longrightarrow> (x,z):Epigraph UNIV f\"", "lemma closed_epigraph_lines:\nfixes S :: \"('a::metric_space * 'b::metric_space) set\"\nassumes \"closed S\"\nshows \"closed {z. (x, z) : S}\"", "lemma mono_epigraph:\n  fixes S :: \"('a::metric_space * real) set\"\n  assumes mono: \"\\<forall>x y z. (x,y):S \\<and> y\\<le>z \\<longrightarrow> (x,z):S\"\n  assumes \"closed S\"\n  shows \"\\<exists>g. ((Epigraph UNIV g) = S)\"", "lemma lsc_hull_exists:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\"", "lemma epigraph_invertible:\n  assumes \"Epigraph UNIV f = Epigraph UNIV g\"\n  shows \"f=g\"", "lemma lsc_hull_ex_unique:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<exists>!g. Epigraph UNIV g = closure (Epigraph UNIV f)\"", "lemma epigraph_lsc_hull:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"Epigraph UNIV (lsc_hull f) = closure(Epigraph UNIV f)\"", "lemma lsc_hull_expl:\n  \"(g = lsc_hull f) \\<longleftrightarrow> (Epigraph UNIV g = closure(Epigraph UNIV f))\"", "lemma lsc_lsc_hull: \"lsc (lsc_hull f)\"", "lemma epigraph_subset_iff:\n  fixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"Epigraph UNIV f \\<le> Epigraph UNIV g \\<longleftrightarrow> (\\<forall>x. g x \\<le> f x)\"", "lemma lsc_hull_le: \"(lsc_hull f) x \\<le> f x\"", "lemma lsc_hull_greatest:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"lsc g\" \"\\<forall>x. g x \\<le> f x\"\nshows \"\\<forall>x. g x \\<le> (lsc_hull f) x\"", "lemma lsc_hull_iff_greatest:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(g = lsc_hull f) \\<longleftrightarrow>\n  lsc g \\<and> (\\<forall>x. g x \\<le> f x) \\<and> (\\<forall>h. lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow> (\\<forall>x. h x \\<le> g x))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")", "lemma lsc_hull_mono:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"\\<forall>x. g x \\<le> f x\"\nshows \"\\<forall>x. (lsc_hull g) x \\<le> (lsc_hull f) x\"", "lemma lsc_hull_lsc:\n  \"lsc f \\<longleftrightarrow> (f = lsc_hull f)\"", "lemma lsc_hull_liminf_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<forall>x. (lsc_hull f) x = min (f x) (Liminf (at x) f)\"", "lemma lsc_hull_same_inf:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(INF x. lsc_hull f x) = (INF x. f x)\"", "lemma convex_on_ereal_mem:\n  assumes \"convex_on s f\"\n  assumes \"x:s\" \"y:s\"\n  assumes \"u\\<ge>0\" \"v\\<ge>0\" \"u+v=1\"\n  shows \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\"", "lemma convex_on_ereal_subset: \"convex_on t f \\<Longrightarrow> s \\<le> t \\<Longrightarrow> convex_on s f\"", "lemma convex_on_ereal_univ: \"convex_on UNIV f \\<longleftrightarrow> (\\<forall>S. convex_on S f)\"", "lemma ereal_pos_sum_distrib_left:\n  fixes f :: \"'a \\<Rightarrow> ereal\"\n  assumes \"r\\<ge>0\" \"r \\<noteq> \\<infinity>\"\n  shows \"r * sum f A = sum (\\<lambda>n. r * f n) A\"", "lemma convex_ereal_add:\n  fixes f g :: \"'a::real_vector \\<Rightarrow> ereal\"\n  assumes \"convex_on s f\" \"convex_on s g\"\n  shows \"convex_on s (\\<lambda>x. f x + g x)\"", "lemma convex_ereal_cmul:\n  assumes \"0 \\<le> (c::ereal)\" \"convex_on s f\"\n  shows \"convex_on s (\\<lambda>x. c * f x)\"", "lemma convex_ereal_max:\n  fixes f g :: \"'a::real_vector \\<Rightarrow> ereal\"\n  assumes \"convex_on s f\" \"convex_on s g\"\n  shows \"convex_on s (\\<lambda>x. max (f x) (g x))\"", "lemma convex_on_ereal_alt:\n  fixes C :: \"'a::real_vector set\"\n  assumes \"convex C\"\n  shows \"convex_on C f =\n  (\\<forall>x \\<in> C. \\<forall>y \\<in> C. \\<forall>m :: real. m \\<ge> 0 \\<and> m \\<le> 1\n      \\<longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - (ereal m)) * f y)\"", "lemma convex_on_ereal_alt_mem:\n  fixes C :: \"'a::real_vector set\"\n  assumes \"convex C\"\n  assumes \"convex_on C f\"\n  assumes \"x : C\" \"y : C\"\n  assumes \"(m::real) \\<ge> 0\" \"m \\<le> 1\"\n  shows \"f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - (ereal m)) * f y\"", "lemma ereal_add_right_mono: \"(a::ereal) \\<le> b \\<Longrightarrow> a + c \\<le> b + c\"", "lemma convex_on_ereal_sum_aux:\n  assumes \"1-a>0\"\n  shows \"(1 - ereal a) * (ereal (c / (1 - a)) * b) = (ereal c) * b\"", "lemma convex_on_ereal_sum:\n  fixes a :: \"'a \\<Rightarrow> real\"\n  fixes y :: \"'a \\<Rightarrow> 'b::real_vector\"\n  fixes f :: \"'b \\<Rightarrow> ereal\"\n  assumes \"finite s\" \"s \\<noteq> {}\"\n  assumes \"convex_on C f\"\n  assumes \"convex C\"\n  assumes \"(SUM i : s. a i) = 1\"\n  assumes \"\\<forall>i. i \\<in> s \\<longrightarrow> a i \\<ge> 0\"\n  assumes \"\\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\"\n  shows \"f (SUM i : s. a i *\\<^sub>R y i) \\<le> (SUM i : s. ereal (a i) * f (y i))\"", "lemma sum_2: \"sum u {1::nat..2} = (u 1)+(u 2)\"", "lemma convex_on_ereal_iff:\n  assumes \"convex s\"\n  shows \"convex_on s f \\<longleftrightarrow> (\\<forall>k u x. (\\<forall>i\\<in>{1..k::nat}. 0 \\<le> u i \\<and> x i : s) \\<and> sum u {1..k} = 1 \\<longrightarrow>\n   f (sum (\\<lambda>i. u i *\\<^sub>R x i) {1..k} ) \\<le> sum (\\<lambda>i. (ereal (u i)) * f(x i)) {1..k} )\"\n  (is \"?rhs \\<longleftrightarrow> ?lhs\")", "lemma convex_Epigraph:\n  assumes \"convex S\"\n  shows \"convex(Epigraph S f) \\<longleftrightarrow> convex_on S f\"", "lemma convex_EpigraphI:\n  \"convex_on s f \\<Longrightarrow> convex s \\<Longrightarrow> convex(Epigraph s f)\"", "lemma domain_Epigraph_aux:\n  assumes \"x \\<noteq> \\<infinity>\"\n  shows \"\\<exists>r. x\\<le>ereal r\"", "lemma domain_Epigraph:\n  \"domain f = {x. \\<exists>y. (x,y) \\<in> Epigraph UNIV f}\"", "lemma domain_Epigraph_fst:\n  \"domain f = fst ` (Epigraph UNIV f)\"", "lemma convex_on_domain:\n  \"convex_on (domain f) f \\<longleftrightarrow> convex_on UNIV f\"", "lemma convex_on_domain2:\n  \"convex_on (domain f) f \\<longleftrightarrow> (\\<forall>S. convex_on S f)\"", "lemma convex_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"convex (domain f)\"", "lemma infinite_convex_domain_iff:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"\\<forall>x. (f x = \\<infinity> | f x = -\\<infinity>)\"\n  shows \"convex_on UNIV f \\<longleftrightarrow> convex (domain f)\"", "lemma convex_PInfty_outside:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"convex S\"\n  shows \"convex_on UNIV (\\<lambda>x. if x:S then (f x) else \\<infinity>)\"", "lemma proper_iff:\n  \"proper f \\<longleftrightarrow> ((\\<forall>x. f x \\<noteq> -\\<infinity>) \\<and> (\\<exists>x. f x \\<noteq> \\<infinity>))\"", "lemma improper_iff:\n  \"~(proper f) \\<longleftrightarrow> ((\\<exists>x. f x = -\\<infinity>) | (\\<forall>x. f x = \\<infinity>))\"", "lemma ereal_MInf_plus[simp]: \"-\\<infinity> + x = (if x = \\<infinity> then \\<infinity> else -\\<infinity>::ereal)\"", "lemma convex_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"\\<forall>x\\<in>rel_interior(domain f). f x = -\\<infinity>\"", "lemma convex_improper2:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"f x = \\<infinity> | f x = -\\<infinity> | x : rel_frontier (domain f)\"", "lemma convex_lsc_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  assumes \"lsc f\"\n  shows \"f x = \\<infinity> | f x = -\\<infinity>\"", "lemma convex_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"convex_on UNIV (lsc_hull f)\"", "lemma improper_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"~(proper f)\"\n  shows \"~(proper (lsc_hull f))\"", "lemma lsc_hull_convex_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"\\<forall>x\\<in>rel_interior(domain f). (lsc_hull f) x = f x\"", "lemma convex_with_rel_open_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"rel_open (domain f)\"\n  shows \"(\\<forall>x. f x > -\\<infinity>) | (\\<forall>x. (f x = \\<infinity> | f x = -\\<infinity>))\"", "lemma convex_with_UNIV_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"domain f = UNIV\"\n  shows \"(\\<forall>x. f x > -\\<infinity>) \\<or> (\\<forall>x. f x = -\\<infinity>)\"", "lemma rel_interior_Epigraph:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"(x,z) : rel_interior (Epigraph UNIV f) \\<longleftrightarrow>\n    (x : rel_interior (domain f) \\<and> f x < ereal z)\"", "lemma rel_interior_EpigraphI:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"rel_interior (Epigraph UNIV f) =\n    {(x,z) |x z. x : rel_interior (domain f) \\<and> f x < ereal z}\"", "lemma convex_less_ri_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"\\<exists>x. f x < a\"\n  shows \"\\<exists>x\\<in>rel_interior (domain f). f x < a\"", "lemma rel_interior_eq_between:\n  fixes S T :: \"('m::euclidean_space) set\"\n  assumes \"convex S\" \"convex T\"\n  shows \"(rel_interior S = rel_interior T) \\<longleftrightarrow> (rel_interior S \\<le> T \\<and> T \\<le> closure S)\"", "lemma convex_less_in_riS:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"rel_interior S \\<le> domain f\"\n  assumes \"\\<exists>x\\<in>closure S. f x < a\"\n  shows \"\\<exists>x\\<in>rel_interior S. f x < a\"", "lemma convex_less_inS:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"S \\<le> domain f\"\n  assumes \"\\<exists>x\\<in>closure S. f x < a\"\n  shows \"\\<exists>x\\<in>S. f x < a\"", "lemma convex_finite_geq_on_closure:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"finite_on S f\"\n  assumes \"\\<forall>x\\<in>S. f x \\<ge> a\"\n  shows \"\\<forall>x\\<in>closure S. f x \\<ge> a\"", "lemma lsc_hull_of_convex_determined:\n  fixes f g :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"convex_on UNIV g\"\n  assumes \"rel_interior (domain f) = rel_interior (domain g)\"\n  assumes \"\\<forall>x\\<in>rel_interior (domain f). f x = g x\"\n  shows \"lsc_hull f = lsc_hull g\"", "lemma domain_lsc_hull_between:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  shows \"domain f \\<le> domain (lsc_hull f)\n       \\<and> domain (lsc_hull f) \\<le> closure (domain f)\"", "lemma domain_vs_domain_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"rel_interior(domain (lsc_hull f)) = rel_interior(domain f)\n         \\<and> closure(domain (lsc_hull f)) = closure(domain f)\n         \\<and> aff_dim(domain (lsc_hull f)) = aff_dim(domain f)\"", "lemma vertical_line_affine:\n  fixes x :: \"'a::euclidean_space\"\n  shows \"affine {(x,m::real)|m. m:UNIV}\"", "lemma lsc_hull_of_convex_agrees_onRI:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x\\<in>rel_interior (domain f). (f x = (lsc_hull f) x)\"", "lemma lsc_hull_of_convex_agrees_outside:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x. x \\<notin> closure (domain f) \\<longrightarrow> (f x = (lsc_hull f) x)\"", "lemma lsc_hull_of_convex_agrees:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x. (f x = (lsc_hull f) x) | x : rel_frontier (domain f)\"", "lemma lsc_hull_of_proper_convex_proper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"proper f\"\n  shows \"proper (lsc_hull f)\"", "lemma lsc_hull_of_proper_convex:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"proper f\"\n  shows \"lsc (lsc_hull f) \\<and> proper (lsc_hull f) \\<and> convex_on UNIV (lsc_hull f) \\<and>\n     (\\<forall>x. (f x = (lsc_hull f) x) | x : rel_frontier (domain f))\"", "lemma affine_no_rel_frontier:\n  fixes S :: \"('n::euclidean_space) set\"\n  assumes \"affine S\"\n  shows \"rel_frontier S = {}\"", "lemma convex_with_affine_domain_is_lsc:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"affine (domain f)\"\n  shows \"lsc f\"", "lemma convex_finite_is_lsc:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"finite_on UNIV f\"\n  shows \"lsc f\"", "lemma always_eventually_within:\n  \"(\\<forall>x\\<in>S. P x) \\<Longrightarrow> eventually P (at x within S)\"", "lemma ereal_divide_pos:\n  assumes \"(a::ereal)>0\" \"b>0\"\n  shows \"a/(ereal b)>0\"", "lemma real_interval_limpt:\n  assumes \"a<b\"\n  shows \"(b::real) islimpt {a..<b}\"", "lemma lsc_hull_of_convex_aux:\n  \"Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1-m)*a+m*b)) \\<le> ereal b\"", "lemma lsc_hull_of_convex:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"x : rel_interior (domain f)\"\n  shows \"((\\<lambda>m. f((1-m)*\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow> (lsc_hull f) y) (at 1 within {0..<1})\"\n         (is \"(?g \\<longlongrightarrow> _ y) _\")"], "translations": [["", "lemma rel_interior_ereal_semiline:\n  fixes a :: ereal\n  shows \"rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "proof (cases a)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>r.\n       a = ereal r \\<Longrightarrow>\n       rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 2. a = \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 3. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "case (real r)"], ["proof (state)\nthis:\n  a = ereal r\n\ngoal (3 subgoals):\n 1. \\<And>r.\n       a = ereal r \\<Longrightarrow>\n       rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 2. a = \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 3. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "then"], ["proof (chain)\npicking this:\n  a = ereal r", "show ?thesis"], ["proof (prove)\nusing this:\n  a = ereal r\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "using rel_interior_real_semiline[of r]"], ["proof (prove)\nusing this:\n  a = ereal r\n  rel_interior {r..} = {r<..}\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "by (simp add: atLeast_def greaterThan_def)"], ["proof (state)\nthis:\n  rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 2. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 2. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "case PInf"], ["proof (state)\nthis:\n  a = \\<infinity>\n\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n 2. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = \\<infinity>\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "using rel_interior_empty"], ["proof (prove)\nusing this:\n  a = \\<infinity>\n  rel_interior {} = {}\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "by auto"], ["proof (state)\nthis:\n  rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "case MInf"], ["proof (state)\nthis:\n  a = - \\<infinity>\n\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow>\n    rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = - \\<infinity>\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "using rel_interior_UNIV"], ["proof (prove)\nusing this:\n  a = - \\<infinity>\n  rel_interior UNIV = UNIV\n\ngoal (1 subgoal):\n 1. rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}", "by auto"], ["proof (state)\nthis:\n  rel_interior {y. a \\<le> ereal y} = {y. a < ereal y}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma closed_ereal_semiline:\n  fixes a :: ereal\n  shows \"closed {y. a \\<le> ereal y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed {y. a \\<le> ereal y}", "proof (cases a)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>r. a = ereal r \\<Longrightarrow> closed {y. a \\<le> ereal y}\n 2. a = \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}\n 3. a = - \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}", "case (real r)"], ["proof (state)\nthis:\n  a = ereal r\n\ngoal (3 subgoals):\n 1. \\<And>r. a = ereal r \\<Longrightarrow> closed {y. a \\<le> ereal y}\n 2. a = \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}\n 3. a = - \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}", "then"], ["proof (chain)\npicking this:\n  a = ereal r", "show ?thesis"], ["proof (prove)\nusing this:\n  a = ereal r\n\ngoal (1 subgoal):\n 1. closed {y. a \\<le> ereal y}", "using closed_real_atLeast"], ["proof (prove)\nusing this:\n  a = ereal r\n  closed {?a..}\n\ngoal (1 subgoal):\n 1. closed {y. a \\<le> ereal y}", "unfolding atLeast_def"], ["proof (prove)\nusing this:\n  a = ereal r\n  closed {x. ?a \\<le> x}\n\ngoal (1 subgoal):\n 1. closed {y. a \\<le> ereal y}", "by simp"], ["proof (state)\nthis:\n  closed {y. a \\<le> ereal y}\n\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}\n 2. a = - \\<infinity> \\<Longrightarrow> closed {y. a \\<le> ereal y}", "qed auto"], ["", "lemma ereal_semiline_unique:\n  fixes a b :: ereal\n  shows \"{y. a \\<le> ereal y} = {y. b \\<le> ereal y} \\<longleftrightarrow> a = b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ({y. a \\<le> ereal y} = {y. b \\<le> ereal y}) = (a = b)", "by (metis mem_Collect_eq ereal_le_real order_antisym)"], ["", "subsection \\<open>Lower and upper semicontinuity\\<close>"], ["", "definition\n  lsc_at :: \"'a \\<Rightarrow> ('a::topological_space \\<Rightarrow> 'b::order_topology) \\<Rightarrow> bool\" where\n  \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>X l. X \\<longlonglongrightarrow> x0 \\<and> (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow> f x0 \\<le> l)\""], ["", "definition\n  usc_at :: \"'a \\<Rightarrow> ('a::topological_space \\<Rightarrow> 'b::order_topology) \\<Rightarrow> bool\" where\n  \"usc_at x0 f \\<longleftrightarrow> (\\<forall>X l. X \\<longlonglongrightarrow> x0 \\<and> (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow> l \\<le> f x0)\""], ["", "lemma lsc_at_mem:\n  assumes \"lsc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  assumes \"(f \\<circ> x) \\<longlonglongrightarrow> A\"\n  shows \"f x0 \\<le> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "using assms lsc_at_def[of x0 f]"], ["proof (prove)\nusing this:\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n  lsc_at x0 f =\n  (\\<forall>X l.\n      X \\<longlonglongrightarrow> x0 \\<and>\n      (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n      f x0 \\<le> l)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "by blast"], ["", "lemma usc_at_mem:\n  assumes \"usc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  assumes \"(f \\<circ> x) \\<longlonglongrightarrow> A\"\n  shows \"f x0 \\<ge> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<le> f x0", "using assms usc_at_def[of x0 f]"], ["proof (prove)\nusing this:\n  usc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n  usc_at x0 f =\n  (\\<forall>X l.\n      X \\<longlonglongrightarrow> x0 \\<and>\n      (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n      l \\<le> f x0)\n\ngoal (1 subgoal):\n 1. A \\<le> f x0", "by blast"], ["", "lemma lsc_at_open:\n  fixes f :: \"'a::first_countable_topology \\<Rightarrow> 'b::{complete_linorder, linorder_topology}\"\n  shows \"lsc_at x0 f \\<longleftrightarrow>\n    (\\<forall>S. open S \\<and> f x0 \\<in> S \\<longrightarrow> (\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\"\n  (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume \"~?rhs\""], ["proof (state)\nthis:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from this"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "obtain S where S_def:\n     \"open S \\<and> f x0 : S \\<and> (\\<forall>T. (open T \\<and> x0 \\<in> T) \\<longrightarrow> (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\n\ngoal (1 subgoal):\n 1. (\\<And>S.\n        open S \\<and>\n        f x0 \\<in> S \\<and>\n        (\\<forall>T.\n            open T \\<and> x0 \\<in> T \\<longrightarrow>\n            (\\<exists>x'\\<in>T.\n                f x' \\<le> f x0 \\<and> f x' \\<notin> S)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  open S \\<and>\n  f x0 \\<in> S \\<and>\n  (\\<forall>T.\n      open T \\<and> x0 \\<in> T \\<longrightarrow>\n      (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "define X where \"X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\""], ["proof (state)\nthis:\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"x0 islimpt X\""], ["proof (prove)\nusing this:\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n\ngoal (1 subgoal):\n 1. x0 islimpt X", "unfolding islimpt_def"], ["proof (prove)\nusing this:\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n\ngoal (1 subgoal):\n 1. \\<forall>T.\n       x0 \\<in> T \\<longrightarrow>\n       open T \\<longrightarrow>\n       (\\<exists>y\\<in>X. y \\<in> T \\<and> y \\<noteq> x0)", "using S_def"], ["proof (prove)\nusing this:\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n  open S \\<and>\n  f x0 \\<in> S \\<and>\n  (\\<forall>T.\n      open T \\<and> x0 \\<in> T \\<longrightarrow>\n      (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\n\ngoal (1 subgoal):\n 1. \\<forall>T.\n       x0 \\<in> T \\<longrightarrow>\n       open T \\<longrightarrow>\n       (\\<exists>y\\<in>X. y \\<in> T \\<and> y \\<noteq> x0)", "by auto"], ["proof (state)\nthis:\n  x0 islimpt X\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from this"], ["proof (chain)\npicking this:\n  x0 islimpt X", "obtain x where x_def: \"(\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\""], ["proof (prove)\nusing this:\n  x0 islimpt X\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        (\\<forall>n. x n \\<in> X) \\<and>\n        x \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using islimpt_sequential[of x0 X]"], ["proof (prove)\nusing this:\n  x0 islimpt X\n  x0 islimpt X =\n  (\\<exists>f.\n      (\\<forall>n. f n \\<in> X - {x0}) \\<and>\n      f \\<longlonglongrightarrow> x0)\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        (\\<forall>n. x n \\<in> X) \\<and>\n        x \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence not: \"~(f \\<circ> x) \\<longlonglongrightarrow> (f x0)\""], ["proof (prove)\nusing this:\n  (\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. \\<not> (f \\<circ> x) \\<longlonglongrightarrow> f x0", "unfolding lim_explicit"], ["proof (prove)\nusing this:\n  (\\<forall>n. x n \\<in> X) \\<and>\n  (\\<forall>S.\n      open S \\<longrightarrow>\n      x0 \\<in> S \\<longrightarrow>\n      (\\<exists>N. \\<forall>n\\<ge>N. x n \\<in> S))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>S.\n               open S \\<longrightarrow>\n               f x0 \\<in> S \\<longrightarrow>\n               (\\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> S))", "using X_def S_def"], ["proof (prove)\nusing this:\n  (\\<forall>n. x n \\<in> X) \\<and>\n  (\\<forall>S.\n      open S \\<longrightarrow>\n      x0 \\<in> S \\<longrightarrow>\n      (\\<exists>N. \\<forall>n\\<ge>N. x n \\<in> S))\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n  open S \\<and>\n  f x0 \\<in> S \\<and>\n  (\\<forall>T.\n      open T \\<and> x0 \\<in> T \\<longrightarrow>\n      (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>S.\n               open S \\<longrightarrow>\n               f x0 \\<in> S \\<longrightarrow>\n               (\\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> S))", "by auto"], ["proof (state)\nthis:\n  \\<not> (f \\<circ> x) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from compact_complete_linorder[of \"f \\<circ> x\"]"], ["proof (chain)\npicking this:\n  \\<exists>l r.\n     strict_mono r \\<and>\n     (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l", "obtain l r where r_def: \"strict_mono r \\<and> ((f \\<circ> x) \\<circ> r) \\<longlonglongrightarrow> l\""], ["proof (prove)\nusing this:\n  \\<exists>l r.\n     strict_mono r \\<and>\n     (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<And>r l.\n        strict_mono r \\<and>\n        (f \\<circ> x \\<circ> r)\n        \\<longlonglongrightarrow> l \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  strict_mono r \\<and> (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\nthis:\n  strict_mono r \\<and> (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume \"l : S\""], ["proof (state)\nthis:\n  l \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"\\<exists>N. \\<forall>n\\<ge>N. f(x(r n)) \\<in> S\""], ["proof (prove)\nusing this:\n  l \\<in> S\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f (x (r n)) \\<in> S", "using r_def lim_explicit[of \"f \\<circ> x \\<circ> r\" l] S_def"], ["proof (prove)\nusing this:\n  l \\<in> S\n  strict_mono r \\<and> (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n  (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l =\n  (\\<forall>S.\n      open S \\<longrightarrow>\n      l \\<in> S \\<longrightarrow>\n      (\\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x \\<circ> r) n \\<in> S))\n  open S \\<and>\n  f x0 \\<in> S \\<and>\n  (\\<forall>T.\n      open T \\<and> x0 \\<in> T \\<longrightarrow>\n      (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\n\ngoal (1 subgoal):\n 1. \\<exists>N. \\<forall>n\\<ge>N. f (x (r n)) \\<in> S", "by auto"], ["proof (state)\nthis:\n  \\<exists>N. \\<forall>n\\<ge>N. f (x (r n)) \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence False"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. f (x (r n)) \\<in> S\n\ngoal (1 subgoal):\n 1. False", "using x_def X_def"], ["proof (prove)\nusing this:\n  \\<exists>N. \\<forall>n\\<ge>N. f (x (r n)) \\<in> S\n  (\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  l \\<in> S \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence l_prop: \"l \\<notin> S \\<and> l\\<le>f x0\""], ["proof (prove)\nusing this:\n  l \\<in> S \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. l \\<notin> S \\<and> l \\<le> f x0", "using r_def x_def X_def Lim_bounded[of \"f \\<circ> x \\<circ> r\"]"], ["proof (prove)\nusing this:\n  l \\<in> S \\<Longrightarrow> False\n  strict_mono r \\<and> (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n  (\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\n  X = {x'. f x' \\<le> f x0 \\<and> f x' \\<notin> S}\n  \\<lbrakk>(f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> ?l;\n   \\<forall>n\\<ge>?M. (f \\<circ> x \\<circ> r) n \\<le> ?C\\<rbrakk>\n  \\<Longrightarrow> ?l \\<le> ?C\n\ngoal (1 subgoal):\n 1. l \\<notin> S \\<and> l \\<le> f x0", "by auto"], ["proof (state)\nthis:\n  l \\<notin> S \\<and> l \\<le> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\nthis:\n  l \\<notin> S \\<and> l \\<le> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume \"f x0 \\<le> l\""], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"f x0 = l\""], ["proof (prove)\nusing this:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. f x0 = l", "using l_prop"], ["proof (prove)\nusing this:\n  f x0 \\<le> l\n  l \\<notin> S \\<and> l \\<le> f x0\n\ngoal (1 subgoal):\n 1. f x0 = l", "by auto"], ["proof (state)\nthis:\n  f x0 = l\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence False"], ["proof (prove)\nusing this:\n  f x0 = l\n\ngoal (1 subgoal):\n 1. False", "using l_prop S_def"], ["proof (prove)\nusing this:\n  f x0 = l\n  l \\<notin> S \\<and> l \\<le> f x0\n  open S \\<and>\n  f x0 \\<in> S \\<and>\n  (\\<forall>T.\n      open T \\<and> x0 \\<in> T \\<longrightarrow>\n      (\\<exists>x'\\<in>T. f x' \\<le> f x0 \\<and> f x' \\<notin> S))\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  f x0 \\<le> l \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"\\<exists>x l. x \\<longlonglongrightarrow> x0 \\<and> (f \\<circ> x) \\<longlonglongrightarrow> l \\<and> ~(f x0 \\<le> l)\""], ["proof (prove)\nusing this:\n  f x0 \\<le> l \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<exists>x l.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> x) \\<longlonglongrightarrow> l \\<and> \\<not> f x0 \\<le> l", "apply(rule_tac x=\"x \\<circ> r\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f x0 \\<le> l \\<Longrightarrow> False) \\<Longrightarrow>\n    \\<exists>l.\n       (x \\<circ> r) \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> (x \\<circ> r)) \\<longlonglongrightarrow> l \\<and>\n       \\<not> f x0 \\<le> l", "apply(rule_tac x=l in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f x0 \\<le> l \\<Longrightarrow> False) \\<Longrightarrow>\n    (x \\<circ> r) \\<longlonglongrightarrow> x0 \\<and>\n    (f \\<circ> (x \\<circ> r)) \\<longlonglongrightarrow> l \\<and>\n    \\<not> f x0 \\<le> l", "using r_def x_def"], ["proof (prove)\nusing this:\n  strict_mono r \\<and> (f \\<circ> x \\<circ> r) \\<longlonglongrightarrow> l\n  (\\<forall>n. x n \\<in> X) \\<and> x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. (f x0 \\<le> l \\<Longrightarrow> False) \\<Longrightarrow>\n    (x \\<circ> r) \\<longlonglongrightarrow> x0 \\<and>\n    (f \\<circ> (x \\<circ> r)) \\<longlonglongrightarrow> l \\<and>\n    \\<not> f x0 \\<le> l", "by (auto simp add: o_assoc LIMSEQ_subseq_LIMSEQ)"], ["proof (state)\nthis:\n  \\<exists>x l.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (f \\<circ> x) \\<longlonglongrightarrow> l \\<and> \\<not> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"~?lhs\""], ["proof (prove)\nusing this:\n  \\<exists>x l.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (f \\<circ> x) \\<longlonglongrightarrow> l \\<and> \\<not> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. \\<not> lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<exists>x l.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (f \\<circ> x) \\<longlonglongrightarrow> l \\<and> \\<not> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. \\<not> (\\<forall>X l.\n               X \\<longlonglongrightarrow> x0 \\<and>\n               (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n               f x0 \\<le> l)", "by blast"], ["proof (state)\nthis:\n  \\<not> lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow>\n                     f x' \\<in> S))) \\<Longrightarrow>\n  \\<not> lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "moreover"], ["proof (state)\nthis:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow>\n                     f x' \\<in> S))) \\<Longrightarrow>\n  \\<not> lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\nthis:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow>\n                     f x' \\<in> S))) \\<Longrightarrow>\n  \\<not> lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\nthis:\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "fix x A"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume x_def: \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> x) \\<longlonglongrightarrow> A\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "{"], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "assume \"A \\<noteq> f x0\""], ["proof (state)\nthis:\n  A \\<noteq> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from this"], ["proof (chain)\npicking this:\n  A \\<noteq> f x0", "obtain S V where SV_def: \"open S \\<and> open V \\<and> f x0 : S \\<and> A : V \\<and> S Int V = {}\""], ["proof (prove)\nusing this:\n  A \\<noteq> f x0\n\ngoal (1 subgoal):\n 1. (\\<And>S V.\n        open S \\<and>\n        open V \\<and>\n        f x0 \\<in> S \\<and>\n        A \\<in> V \\<and> S \\<inter> V = {} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using hausdorff[of \"f x0\" A]"], ["proof (prove)\nusing this:\n  A \\<noteq> f x0\n  f x0 \\<noteq> A \\<Longrightarrow>\n  \\<exists>U V.\n     open U \\<and>\n     open V \\<and> f x0 \\<in> U \\<and> A \\<in> V \\<and> U \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. (\\<And>S V.\n        open S \\<and>\n        open V \\<and>\n        f x0 \\<in> S \\<and>\n        A \\<in> V \\<and> S \\<inter> V = {} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from this"], ["proof (chain)\npicking this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}", "obtain T where T_def: \"open T \\<and> x0 : T \\<and> (\\<forall>x'\\<in>T. (f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\""], ["proof (prove)\nusing this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from this"], ["proof (chain)\npicking this:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)", "obtain N1 where \"\\<forall>n\\<ge>N1. x n \\<in> T\""], ["proof (prove)\nusing this:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. x n \\<in> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using x_def lim_explicit[of x x0]"], ["proof (prove)\nusing this:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n  x \\<longlonglongrightarrow> x0 =\n  (\\<forall>S.\n      open S \\<longrightarrow>\n      x0 \\<in> S \\<longrightarrow>\n      (\\<exists>N. \\<forall>n\\<ge>N. x n \\<in> S))\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. x n \\<in> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N1. x n \\<in> T\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence *: \"\\<forall>n\\<ge>N1. (f (x n) \\<le> f x0 \\<longrightarrow> f(x n) \\<in> S)\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N1. x n \\<in> T\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. f (x n) \\<le> f x0 \\<longrightarrow> f (x n) \\<in> S", "using T_def"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N1. x n \\<in> T\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. f (x n) \\<le> f x0 \\<longrightarrow> f (x n) \\<in> S", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N1. f (x n) \\<le> f x0 \\<longrightarrow> f (x n) \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "from SV_def"], ["proof (chain)\npicking this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}", "obtain N2 where \"\\<forall>n\\<ge>N2. f(x n) \\<in> V\""], ["proof (prove)\nusing this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        \\<forall>n\\<ge>N2. f (x n) \\<in> V \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using lim_explicit[of \"f \\<circ> x\" A] x_def"], ["proof (prove)\nusing this:\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n  (f \\<circ> x) \\<longlonglongrightarrow> A =\n  (\\<forall>S.\n      open S \\<longrightarrow>\n      A \\<in> S \\<longrightarrow>\n      (\\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> S))\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        \\<forall>n\\<ge>N2. f (x n) \\<in> V \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N2. f (x n) \\<in> V\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"\\<forall>n\\<ge>(max N1 N2). \\<not>(f(x n) \\<le> f x0)\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N2. f (x n) \\<in> V\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>max N1 N2. \\<not> f (x n) \\<le> f x0", "using SV_def *"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N2. f (x n) \\<in> V\n  open S \\<and>\n  open V \\<and> f x0 \\<in> S \\<and> A \\<in> V \\<and> S \\<inter> V = {}\n  \\<forall>n\\<ge>N1. f (x n) \\<le> f x0 \\<longrightarrow> f (x n) \\<in> S\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>max N1 N2. \\<not> f (x n) \\<le> f x0", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>max N1 N2. \\<not> f (x n) \\<le> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"\\<forall>n\\<ge>(max N1 N2). f(x n) \\<ge> f x0\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>max N1 N2. \\<not> f (x n) \\<le> f x0\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>max N1 N2. f x0 \\<le> f (x n)", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>max N1 N2. f x0 \\<le> f (x n)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"f x0 \\<le> A\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>max N1 N2. f x0 \\<le> f (x n)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "using Lim_bounded2[of \"f \\<circ> x\" A \"max N1 N2\" \"f x0\"] x_def"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>max N1 N2. f x0 \\<le> f (x n)\n  \\<lbrakk>(f \\<circ> x) \\<longlonglongrightarrow> A;\n   \\<forall>n\\<ge>max N1 N2. f x0 \\<le> (f \\<circ> x) n\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> A\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> A\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  A \\<noteq> f x0 \\<Longrightarrow> f x0 \\<le> A\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"f x0 \\<le> A\""], ["proof (prove)\nusing this:\n  A \\<noteq> f x0 \\<Longrightarrow> f x0 \\<le> A\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> A\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "hence \"?lhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "}"], ["proof (state)\nthis:\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow>\n             f x' \\<in> S)) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow>\n                     f x' \\<in> S))) \\<Longrightarrow>\n  \\<not> lsc_at x0 f\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow>\n             f x' \\<in> S)) \\<Longrightarrow>\n  lsc_at x0 f", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>S.\n             open S \\<and> f x0 \\<in> S \\<longrightarrow>\n             (\\<exists>T.\n                 open T \\<and>\n                 x0 \\<in> T \\<and>\n                 (\\<forall>x'\\<in>T.\n                     f x' \\<le> f x0 \\<longrightarrow>\n                     f x' \\<in> S))) \\<Longrightarrow>\n  \\<not> lsc_at x0 f\n  \\<forall>S.\n     open S \\<and> f x0 \\<in> S \\<longrightarrow>\n     (\\<exists>T.\n         open T \\<and>\n         x0 \\<in> T \\<and>\n         (\\<forall>x'\\<in>T.\n             f x' \\<le> f x0 \\<longrightarrow>\n             f x' \\<in> S)) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>S.\n      open S \\<and> f x0 \\<in> S \\<longrightarrow>\n      (\\<exists>T.\n          open T \\<and>\n          x0 \\<in> T \\<and>\n          (\\<forall>x'\\<in>T.\n              f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_at_open_mem:\n  fixes f :: \"'a::first_countable_topology \\<Rightarrow> 'b::{complete_linorder, linorder_topology}\"\n  assumes \"lsc_at x0 f\"\n  assumes \"open S \\<and> f x0 : S\"\n  obtains T where \"open T \\<and> x0 \\<in> T \\<and> (\\<forall>x'\\<in>T. (f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms lsc_at_open[of x0 f]"], ["proof (prove)\nusing this:\n  lsc_at x0 f\n  open S \\<and> f x0 \\<in> S\n  lsc_at x0 f =\n  (\\<forall>S.\n      open S \\<and> f x0 \\<in> S \\<longrightarrow>\n      (\\<exists>T.\n          open T \\<and>\n          x0 \\<in> T \\<and>\n          (\\<forall>x'\\<in>T.\n              f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S)))\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "lemma lsc_at_MInfty:\n  fixes f :: \"'a::topological_space \\<Rightarrow> ereal\"\n  assumes \"f x0 = -\\<infinity>\"\n  shows \"lsc_at x0 f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "using assms"], ["proof (prove)\nusing this:\n  f x0 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "by auto"], ["", "lemma lsc_at_PInfty:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"f x0 = \\<infinity>\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> continuous (at x0) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f = isCont f x0", "unfolding lsc_at_open continuous_at_open"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))) =\n    (\\<forall>t.\n        open t \\<and> f x0 \\<in> t \\<longrightarrow>\n        (\\<exists>s.\n            open s \\<and>\n            x0 \\<in> s \\<and> (\\<forall>x'\\<in>s. f x' \\<in> t)))", "using assms"], ["proof (prove)\nusing this:\n  f x0 = \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>S.\n        open S \\<and> f x0 \\<in> S \\<longrightarrow>\n        (\\<exists>T.\n            open T \\<and>\n            x0 \\<in> T \\<and>\n            (\\<forall>x'\\<in>T.\n                f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> S))) =\n    (\\<forall>t.\n        open t \\<and> f x0 \\<in> t \\<longrightarrow>\n        (\\<exists>s.\n            open s \\<and>\n            x0 \\<in> s \\<and> (\\<forall>x'\\<in>s. f x' \\<in> t)))", "by auto"], ["", "lemma lsc_at_real:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"\\<bar>f x0\\<bar> \\<noteq> \\<infinity>\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>e. e>0 \\<longrightarrow> (\\<exists>T. open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. f y > f x0 - e)))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "obtain m where m_def: \"f x0 = ereal m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>m. f x0 = ereal m \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms"], ["proof (prove)\nusing this:\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>m. f x0 = ereal m \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (cases \"f x0\") auto"], ["proof (state)\nthis:\n  f x0 = ereal m\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  f x0 = ereal m\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume lsc: \"lsc_at x0 f\""], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "fix e"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume e_def: \"(e :: ereal)>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence *: \"f x0 : {f x0 - e <..< f x0 + e}\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. f x0 \\<in> {f x0 - e<..<f x0 + e}", "using assms ereal_between"], ["proof (prove)\nusing this:\n  0 < e\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x - ?e < ?x\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x < ?x + ?e\n\ngoal (1 subgoal):\n 1. f x0 \\<in> {f x0 - e<..<f x0 + e}", "by auto"], ["proof (state)\nthis:\n  f x0 \\<in> {f x0 - e<..<f x0 + e}\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "from this"], ["proof (chain)\npicking this:\n  f x0 \\<in> {f x0 - e<..<f x0 + e}", "obtain T where T_def: \"open T \\<and> x0 : T \\<and> (\\<forall>x'\\<in>T. f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> {f x0 - e <..< f x0 + e})\""], ["proof (prove)\nusing this:\n  f x0 \\<in> {f x0 - e<..<f x0 + e}\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (subst lsc_at_open_mem[of x0 f \"{f x0 - e <..< f x0 + e}\"])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> lsc_at x0 f\n 2. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> open {f x0 - e<..<f x0 + e} \\<and>\n                      f x0 \\<in> {f x0 - e<..<f x0 + e}\n 3. \\<And>T.\n       \\<lbrakk>\\<And>T.\n                   open T \\<and>\n                   x0 \\<in> T \\<and>\n                   (\\<forall>x'\\<in>T.\n                       f x' \\<le> f x0 \\<longrightarrow>\n                       f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                   thesis;\n        f x0 \\<in> {f x0 - e<..<f x0 + e};\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> {f x0 - e<..<f x0 + e})\\<rbrakk>\n       \\<Longrightarrow> thesis\n 4. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> True", "using lsc e_def"], ["proof (prove)\nusing this:\n  lsc_at x0 f\n  0 < e\n\ngoal (4 subgoals):\n 1. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> lsc_at x0 f\n 2. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> open {f x0 - e<..<f x0 + e} \\<and>\n                      f x0 \\<in> {f x0 - e<..<f x0 + e}\n 3. \\<And>T.\n       \\<lbrakk>\\<And>T.\n                   open T \\<and>\n                   x0 \\<in> T \\<and>\n                   (\\<forall>x'\\<in>T.\n                       f x' \\<le> f x0 \\<longrightarrow>\n                       f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                   thesis;\n        f x0 \\<in> {f x0 - e<..<f x0 + e};\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>x'\\<in>T.\n            f x' \\<le> f x0 \\<longrightarrow>\n            f x' \\<in> {f x0 - e<..<f x0 + e})\\<rbrakk>\n       \\<Longrightarrow> thesis\n 4. \\<lbrakk>\\<And>T.\n                open T \\<and>\n                x0 \\<in> T \\<and>\n                (\\<forall>x'\\<in>T.\n                    f x' \\<le> f x0 \\<longrightarrow>\n                    f x' \\<in> {f x0 - e<..<f x0 + e}) \\<Longrightarrow>\n                thesis;\n     f x0 \\<in> {f x0 - e<..<f x0 + e}\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T.\n      f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> {f x0 - e<..<f x0 + e})\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T.\n      f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> {f x0 - e<..<f x0 + e})\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume \"y:T\""], ["proof (state)\nthis:\n  y \\<in> T\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  y \\<in> T\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume \"f y \\<le> f x0\""], ["proof (state)\nthis:\n  f y \\<le> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"f y >  f x0 - e\""], ["proof (prove)\nusing this:\n  f y \\<le> f x0\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "using T_def \\<open>y:T\\<close>"], ["proof (prove)\nusing this:\n  f y \\<le> f x0\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T.\n      f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> {f x0 - e<..<f x0 + e})\n  y \\<in> T\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "by auto"], ["proof (state)\nthis:\n  f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "moreover"], ["proof (state)\nthis:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume \"f y > f x0\""], ["proof (state)\nthis:\n  f x0 < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"\\<dots>>f x0 - e\""], ["proof (prove)\nusing this:\n  f x0 < f y\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "using *"], ["proof (prove)\nusing this:\n  f x0 < f y\n  f x0 \\<in> {f x0 - e<..<f x0 + e}\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "by auto"], ["proof (state)\nthis:\n  f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  f x0 < f y \\<Longrightarrow> f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "ultimately"], ["proof (chain)\npicking this:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n  f x0 < f y \\<Longrightarrow> f x0 - e < f y", "have \"f y >  f x0 - e\""], ["proof (prove)\nusing this:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n  f x0 < f y \\<Longrightarrow> f x0 - e < f y\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "using not_le"], ["proof (prove)\nusing this:\n  f y \\<le> f x0 \\<Longrightarrow> f x0 - e < f y\n  f x0 < f y \\<Longrightarrow> f x0 - e < f y\n  (\\<not> ?x \\<le> ?y) = (?y < ?x)\n\ngoal (1 subgoal):\n 1. f x0 - e < f y", "by blast"], ["proof (state)\nthis:\n  f x0 - e < f y\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  ?y2 \\<in> T \\<Longrightarrow> f x0 - e < f ?y2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y \\<in> T. f y > f x0 - e)\""], ["proof (prove)\nusing this:\n  ?y2 \\<in> T \\<Longrightarrow> f x0 - e < f ?y2\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "using T_def"], ["proof (prove)\nusing this:\n  ?y2 \\<in> T \\<Longrightarrow> f x0 - e < f ?y2\n  open T \\<and>\n  x0 \\<in> T \\<and>\n  (\\<forall>x'\\<in>T.\n      f x' \\<le> f x0 \\<longrightarrow> f x' \\<in> {f x0 - e<..<f x0 + e})\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - ?e2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"?rhs\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - ?e2 < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>e>0.\n       \\<exists>T.\n          open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "by auto"], ["proof (state)\nthis:\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "moreover"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "fix S"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume S_def: \"open S \\<and> f x0 : S\""], ["proof (state)\nthis:\n  open S \\<and> f x0 \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "from this"], ["proof (chain)\npicking this:\n  open S \\<and> f x0 \\<in> S", "obtain e where e_def: \"e>0 \\<and> {f x0 - e<..<f x0 + e} \\<le> S\""], ["proof (prove)\nusing this:\n  open S \\<and> f x0 \\<in> S\n\ngoal (1 subgoal):\n 1. (\\<And>e.\n        0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (subst ereal_open_cont_interval[of S \"f x0\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> open S\n 2. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<in> S\n 3. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n 4. \\<And>e.\n       \\<lbrakk>\\<And>e.\n                   0 < e \\<and>\n                   {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                   thesis;\n        open S \\<and> f x0 \\<in> S; 0 < e;\n        {f x0 - e<..<f x0 + e} \\<subseteq> S\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> True", "using assms"], ["proof (prove)\nusing this:\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> open S\n 2. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<in> S\n 3. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n 4. \\<And>e.\n       \\<lbrakk>\\<And>e.\n                   0 < e \\<and>\n                   {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                   thesis;\n        open S \\<and> f x0 \\<in> S; 0 < e;\n        {f x0 - e<..<f x0 + e} \\<subseteq> S\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>e.\n                0 < e \\<and>\n                {f x0 - e<..<f x0 + e} \\<subseteq> S \\<Longrightarrow>\n                thesis;\n     open S \\<and> f x0 \\<in> S\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "from this"], ["proof (chain)\npicking this:\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S", "obtain T where T_def: \"open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. f y > f x0 - e)\""], ["proof (prove)\nusing this:\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?rhs\\<close>[rule_format, of e]"], ["proof (prove)\nusing this:\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S\n  0 < e \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "{"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "assume \"y:T\" \"f y \\<le> f x0\""], ["proof (state)\nthis:\n  y \\<in> T\n  f y \\<le> f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"f y < f x0 + e\""], ["proof (prove)\nusing this:\n  y \\<in> T\n  f y \\<le> f x0\n\ngoal (1 subgoal):\n 1. f y < f x0 + e", "using assms e_def ereal_between[of \"f x0\" e]"], ["proof (prove)\nusing this:\n  y \\<in> T\n  f y \\<le> f x0\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity>\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S\n  \\<lbrakk>\\<bar>f x0\\<bar> \\<noteq> \\<infinity>; 0 < e\\<rbrakk>\n  \\<Longrightarrow> f x0 - e < f x0\n  \\<lbrakk>\\<bar>f x0\\<bar> \\<noteq> \\<infinity>; 0 < e\\<rbrakk>\n  \\<Longrightarrow> f x0 < f x0 + e\n\ngoal (1 subgoal):\n 1. f y < f x0 + e", "by auto"], ["proof (state)\nthis:\n  f y < f x0 + e\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"f y \\<in> S\""], ["proof (prove)\nusing this:\n  f y < f x0 + e\n\ngoal (1 subgoal):\n 1. f y \\<in> S", "using e_def T_def \\<open>y\\<in>T\\<close>"], ["proof (prove)\nusing this:\n  f y < f x0 + e\n  0 < e \\<and> {f x0 - e<..<f x0 + e} \\<subseteq> S\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n  y \\<in> T\n\ngoal (1 subgoal):\n 1. f y \\<in> S", "by auto"], ["proof (state)\nthis:\n  f y \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y2 \\<in> T; f ?y2 \\<le> f x0\\<rbrakk>\n  \\<Longrightarrow> f ?y2 \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"\\<exists>T. open T \\<and> x0 : T \\<and> (\\<forall>y\\<in>T. (f y \\<le> f x0 \\<longrightarrow> f y \\<in> S))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> T; f ?y2 \\<le> f x0\\<rbrakk>\n  \\<Longrightarrow> f ?y2 \\<in> S\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and>\n       x0 \\<in> T \\<and>\n       (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)", "using T_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y2 \\<in> T; f ?y2 \\<le> f x0\\<rbrakk>\n  \\<Longrightarrow> f ?y2 \\<in> S\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and>\n       x0 \\<in> T \\<and>\n       (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "hence \"lsc_at x0 f\""], ["proof (prove)\nusing this:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "using lsc_at_open"], ["proof (prove)\nusing this:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n  lsc_at ?x0.0 ?f =\n  (\\<forall>S.\n      open S \\<and> ?f ?x0.0 \\<in> S \\<longrightarrow>\n      (\\<exists>T.\n          open T \\<and>\n          ?x0.0 \\<in> T \\<and>\n          (\\<forall>x'\\<in>T.\n              ?f x' \\<le> ?f ?x0.0 \\<longrightarrow> ?f x' \\<in> S)))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "}"], ["proof (state)\nthis:\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "ultimately"], ["proof (chain)\npicking this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n  lsc_at x0 f", "show ?thesis"], ["proof (prove)\nusing this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n  \\<forall>e>0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>e>0.\n        \\<exists>T.\n           open T \\<and>\n           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>e>0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_at_ereal:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y \\<in> T. f y > C))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"f x0 = -\\<infinity>\""], ["proof (state)\nthis:\n  f x0 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence ?thesis"], ["proof (prove)\nusing this:\n  f x0 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "using lsc_at_MInfty"], ["proof (prove)\nusing this:\n  f x0 = - \\<infinity>\n  ?f ?x0.0 = - \\<infinity> \\<Longrightarrow> lsc_at ?x0.0 ?f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  f x0 = - \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "moreover"], ["proof (state)\nthis:\n  f x0 = - \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  f x0 = - \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume pinf: \"f x0 = \\<infinity>\""], ["proof (state)\nthis:\n  f x0 = \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  f x0 = \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume lsc: \"lsc_at x0 f\""], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"C<f x0\""], ["proof (state)\nthis:\n  C < f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"open {C<..} \\<and> f x0 : {C<..}\""], ["proof (prove)\nusing this:\n  C < f x0\n\ngoal (1 subgoal):\n 1. open {C<..} \\<and> f x0 \\<in> {C<..}", "by auto"], ["proof (state)\nthis:\n  open {C<..} \\<and> f x0 \\<in> {C<..}\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "from this"], ["proof (chain)\npicking this:\n  open {C<..} \\<and> f x0 \\<in> {C<..}", "obtain T where T_def: \"open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> {C<..})\""], ["proof (prove)\nusing this:\n  open {C<..} \\<and> f x0 \\<in> {C<..}\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f y \\<in> {C<..}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pinf lsc lsc_at_PInfty[of f x0]"], ["proof (prove)\nusing this:\n  open {C<..} \\<and> f x0 \\<in> {C<..}\n  f x0 = \\<infinity>\n  lsc_at x0 f\n  f x0 = \\<infinity> \\<Longrightarrow> lsc_at x0 f = isCont f x0\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f y \\<in> {C<..}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding continuous_at_open"], ["proof (prove)\nusing this:\n  open {C<..} \\<and> f x0 \\<in> {C<..}\n  f x0 = \\<infinity>\n  lsc_at x0 f\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>t.\n      open t \\<and> f x0 \\<in> t \\<longrightarrow>\n      (\\<exists>s.\n          open s \\<and>\n          x0 \\<in> s \\<and> (\\<forall>x'\\<in>s. f x' \\<in> t)))\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f y \\<in> {C<..}) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> {C<..})\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\""], ["proof (prove)\nusing this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> {C<..})\n\ngoal (1 subgoal):\n 1. \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"?rhs\""], ["proof (prove)\nusing this:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>T.\n          open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "by auto"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "moreover"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "fix S"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume S_def: \"open S \\<and> f x0 : S\""], ["proof (state)\nthis:\n  open S \\<and> f x0 \\<in> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "then"], ["proof (chain)\npicking this:\n  open S \\<and> f x0 \\<in> S", "obtain C where C_def: \"ereal C < f x0 \\<and> {ereal C<..} \\<le> S\""], ["proof (prove)\nusing this:\n  open S \\<and> f x0 \\<in> S\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using pinf open_PInfty"], ["proof (prove)\nusing this:\n  open S \\<and> f x0 \\<in> S\n  f x0 = \\<infinity>\n  \\<lbrakk>open ?A; \\<infinity> \\<in> ?A\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x. {ereal x<..} \\<subseteq> ?A\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "then"], ["proof (chain)\npicking this:\n  ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S", "obtain T where T_def: \"open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. f y \\<in> S)\""], ["proof (prove)\nusing this:\n  ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?rhs\\<close>[rule_format, of \"ereal C\"]"], ["proof (prove)\nusing this:\n  ereal C < f x0 \\<and> {ereal C<..} \\<subseteq> S\n  ereal C < f x0 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ereal C < f y)\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. (f y \\<le> f x0 \\<longrightarrow> f y \\<in> S))\""], ["proof (prove)\nusing this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S)\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and>\n       x0 \\<in> T \\<and>\n       (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)", "using T_def"], ["proof (prove)\nusing this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S)\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f y \\<in> S)\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and>\n       x0 \\<in> T \\<and>\n       (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> S)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"lsc_at x0 f\""], ["proof (prove)\nusing this:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "using lsc_at_open"], ["proof (prove)\nusing this:\n  open ?S2 \\<and> f x0 \\<in> ?S2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and>\n     x0 \\<in> T \\<and>\n     (\\<forall>y\\<in>T. f y \\<le> f x0 \\<longrightarrow> f y \\<in> ?S2)\n  lsc_at ?x0.0 ?f =\n  (\\<forall>S.\n      open S \\<and> ?f ?x0.0 \\<in> S \\<longrightarrow>\n      (\\<exists>T.\n          open T \\<and>\n          ?x0.0 \\<in> T \\<and>\n          (\\<forall>x'\\<in>T.\n              ?f x' \\<le> ?f ?x0.0 \\<longrightarrow> ?f x' \\<in> S)))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "ultimately"], ["proof (chain)\npicking this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f", "have ?thesis"], ["proof (prove)\nusing this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "moreover"], ["proof (state)\nthis:\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume fin: \"f x0 \\<noteq> -\\<infinity>\" \"f x0 \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume lsc: \"lsc_at x0 f\""], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"C<f x0\""], ["proof (state)\nthis:\n  C < f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"f x0-C>0\""], ["proof (prove)\nusing this:\n  C < f x0\n\ngoal (1 subgoal):\n 1. 0 < f x0 - C", "using fin ereal_less_minus_iff"], ["proof (prove)\nusing this:\n  C < f x0\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n  (?x < ?z - ?y) =\n  ((?y = \\<infinity> \\<longrightarrow>\n    ?z = \\<infinity> \\<and> ?x \\<noteq> \\<infinity>) \\<and>\n   (?y = - \\<infinity> \\<longrightarrow> ?x \\<noteq> \\<infinity>) \\<and>\n   (\\<bar>?y\\<bar> \\<noteq> \\<infinity> \\<longrightarrow> ?x + ?y < ?z))\n\ngoal (1 subgoal):\n 1. 0 < f x0 - C", "by auto"], ["proof (state)\nthis:\n  0 < f x0 - C\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "from this"], ["proof (chain)\npicking this:\n  0 < f x0 - C", "obtain T where T_def: \"open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - (f x0-C) < f y)\""], ["proof (prove)\nusing this:\n  0 < f x0 - C\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using lsc_at_real[of f x0] lsc fin"], ["proof (prove)\nusing this:\n  0 < f x0 - C\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>e>0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))\n  lsc_at x0 f\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open T \\<and>\n  x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "moreover"], ["proof (state)\nthis:\n  open T \\<and>\n  x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "have \"f x0 - (f x0-C) = C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x0 - (f x0 - C) = C", "using fin"], ["proof (prove)\nusing this:\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 - (f x0 - C) = C", "apply (cases \"f x0\", cases C)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>r ra.\n       \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        f x0 = ereal r; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; C = ereal ra\\<rbrakk>\n       \\<Longrightarrow> f x0 - (f x0 - C) = C\n 2. \\<And>r.\n       \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        f x0 = ereal r; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; C = \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> f x0 - (f x0 - C) = C\n 3. \\<And>r.\n       \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        f x0 = ereal r; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; C = - \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> f x0 - (f x0 - C) = C\n 4. \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n     f x0 = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 - (f x0 - C) = C\n 5. \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n     f x0 = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 - (f x0 - C) = C", "by auto"], ["proof (state)\nthis:\n  f x0 - (f x0 - C) = C\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "ultimately"], ["proof (chain)\npicking this:\n  open T \\<and>\n  x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y)\n  f x0 - (f x0 - C) = C", "have \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\""], ["proof (prove)\nusing this:\n  open T \\<and>\n  x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - (f x0 - C) < f y)\n  f x0 - (f x0 - C) = C\n\ngoal (1 subgoal):\n 1. \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"?rhs\""], ["proof (prove)\nusing this:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>T.\n          open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "by auto"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "moreover"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "{"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "fix e :: ereal"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"f x0 - e < f x0\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. f x0 - e < f x0", "using fin"], ["proof (prove)\nusing this:\n  0 < e\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 - e < f x0", "apply (cases \"f x0\", cases e)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>r ra.\n       \\<lbrakk>0 < e; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; f x0 = ereal r; 0 < e;\n        f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        e = ereal ra\\<rbrakk>\n       \\<Longrightarrow> f x0 - e < f x0\n 2. \\<And>r.\n       \\<lbrakk>0 < e; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; f x0 = ereal r; 0 < e;\n        f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        e = \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> f x0 - e < f x0\n 3. \\<And>r.\n       \\<lbrakk>0 < e; f x0 \\<noteq> - \\<infinity>;\n        f x0 \\<noteq> \\<infinity>; f x0 = ereal r; 0 < e;\n        f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n        e = - \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> f x0 - e < f x0\n 4. \\<lbrakk>0 < e; f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n     f x0 = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 - e < f x0\n 5. \\<lbrakk>0 < e; f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>;\n     f x0 = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 - e < f x0", "by auto"], ["proof (state)\nthis:\n  f x0 - e < f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\""], ["proof (prove)\nusing this:\n  f x0 - e < f x0\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "using fin \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  f x0 - e < f x0\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. \\<exists>T.\n       open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "by auto"], ["proof (state)\nthis:\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - ?e2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "hence \"lsc_at x0 f\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - ?e2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "using lsc_at_real[of f x0] fin"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>T.\n     open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - ?e2 < f y)\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>e>0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))\n  f x0 \\<noteq> - \\<infinity>\n  f x0 \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "ultimately"], ["proof (chain)\npicking this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f", "have ?thesis"], ["proof (prove)\nusing this:\n  lsc_at x0 f \\<Longrightarrow>\n  \\<forall>C<f x0.\n     \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n  \\<forall>C<f x0.\n     \\<exists>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>\\<rbrakk>\n  \\<Longrightarrow> lsc_at x0 f =\n                    (\\<forall>C<f x0.\n                        \\<exists>T.\n                           open T \\<and>\n                           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "ultimately"], ["proof (chain)\npicking this:\n  f x0 = - \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n  \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>\\<rbrakk>\n  \\<Longrightarrow> lsc_at x0 f =\n                    (\\<forall>C<f x0.\n                        \\<exists>T.\n                           open T \\<and>\n                           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "show ?thesis"], ["proof (prove)\nusing this:\n  f x0 = - \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n  f x0 = \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n  \\<lbrakk>f x0 \\<noteq> - \\<infinity>; f x0 \\<noteq> \\<infinity>\\<rbrakk>\n  \\<Longrightarrow> lsc_at x0 f =\n                    (\\<forall>C<f x0.\n                        \\<exists>T.\n                           open T \\<and>\n                           x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>T.\n           open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lst_at_ball:\nfixes f :: \"'a::metric_space => ereal\"\nshows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>d>0. \\<forall>y \\<in> (ball x0 d). C<f(y))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n 2. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "assume lsc: \"lsc_at x0 f\""], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n 2. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "show ?rhs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "proof (intro strip)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       C < f x0 \\<Longrightarrow>\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "fix C :: ereal"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       C < f x0 \\<Longrightarrow>\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "assume \"C<f x0\""], ["proof (state)\nthis:\n  C < f x0\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       C < f x0 \\<Longrightarrow>\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "then"], ["proof (chain)\npicking this:\n  C < f x0", "obtain T where \"open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. C < f y)\""], ["proof (prove)\nusing this:\n  C < f x0\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using lsc lsc_at_ereal[of x0 f]"], ["proof (prove)\nusing this:\n  C < f x0\n  lsc_at x0 f\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       C < f x0 \\<Longrightarrow>\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "then"], ["proof (chain)\npicking this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "show \"\\<exists>d. d>0 \\<and> (\\<forall>y \\<in> (ball x0 d). C < f y)\""], ["proof (prove)\nusing this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y", "by (force simp add: open_contains_ball)"], ["proof (state)\nthis:\n  \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "fix C :: ereal"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "assume \"C<f x0\""], ["proof (state)\nthis:\n  C < f x0\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "then"], ["proof (chain)\npicking this:\n  C < f x0", "obtain d where \"d>0 \\<and> (\\<forall>y \\<in> (ball x0 d). C < f y)\""], ["proof (prove)\nusing this:\n  C < f x0\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<and> (\\<forall>y\\<in>ball x0 d. C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  C < f x0\n  \\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<and> (\\<forall>y\\<in>ball x0 d. C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < d \\<and> (\\<forall>y\\<in>ball x0 d. C < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "hence \"\\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y \\<in> T. C < f y)\""], ["proof (prove)\nusing this:\n  0 < d \\<and> (\\<forall>y\\<in>ball x0 d. C < f y)\n\ngoal (1 subgoal):\n 1. \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)", "by (meson Elementary_Metric_Spaces.open_ball centre_in_ball)"], ["proof (state)\nthis:\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>C<f x0.\n       \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y \\<Longrightarrow>\n    lsc_at x0 f", "then"], ["proof (chain)\npicking this:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)", "show ?lhs"], ["proof (prove)\nusing this:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "using lsc_at_ereal[of x0 f]"], ["proof (prove)\nusing this:\n  ?C2 < f x0 \\<Longrightarrow>\n  \\<exists>T. open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. ?C2 < f y)\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. C < f y))\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lst_at_delta:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)", "have \"?rhs \\<longleftrightarrow> (\\<forall>C<f(x0). \\<exists>d>0. \\<forall>y \\<in> (ball x0 d). C < f y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y) =\n    (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)", "unfolding ball_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y) =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y\\<in>{y. dist x0 y < d}. C < f y)", "by auto"], ["proof (state)\nthis:\n  (\\<forall>C<f x0.\n      \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y) =\n  (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)", "thus ?thesis"], ["proof (prove)\nusing this:\n  (\\<forall>C<f x0.\n      \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y) =\n  (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)", "using lst_at_ball[of x0 f]"], ["proof (prove)\nusing this:\n  (\\<forall>C<f x0.\n      \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y) =\n  (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)\n  lsc_at x0 f =\n  (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>C<f x0.\n        \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f =\n  (\\<forall>C<f x0.\n      \\<exists>d>0. \\<forall>y. dist x0 y < d \\<longrightarrow> C < f y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_liminf_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> f x0 \\<le> Liminf (at x0) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f = (f x0 \\<le> Liminf (at x0) f)", "unfolding lst_at_ball le_Liminf_iff eventually_at"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>C<f x0. \\<exists>d>0. \\<forall>y\\<in>ball x0 d. C < f y) =\n    (\\<forall>y<f x0.\n        \\<exists>d>0.\n           \\<forall>x\\<in>UNIV.\n              x \\<noteq> x0 \\<and> dist x x0 < d \\<longrightarrow> y < f x)", "by (intro arg_cong[where f=All] imp_cong refl ext ex_cong)\n     (auto simp: dist_commute zero_less_dist_iff)"], ["", "lemma lsc_liminf_at_eq:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (f x0 = min (f x0) (Liminf (at x0) f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f = (f x0 = min (f x0) (Liminf (at x0) f))", "by (metis inf_ereal_def le_iff_inf lsc_liminf_at)"], ["", "lemma lsc_imp_liminf:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"lsc_at x0 f\"\nassumes \"x \\<longlonglongrightarrow> x0\"\nshows \"f x0 \\<le> liminf (f \\<circ> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "proof (cases \"f x0\")"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 3. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "case PInf"], ["proof (state)\nthis:\n  f x0 = \\<infinity>\n\ngoal (3 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 3. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "then"], ["proof (chain)\npicking this:\n  f x0 = \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  f x0 = \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "using assms lsc_at_PInfty[of f x0] lim_imp_Liminf[of _ \"f \\<circ> x\"]\n    continuous_at_sequentially[of x0 f]"], ["proof (prove)\nusing this:\n  f x0 = \\<infinity>\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  f x0 = \\<infinity> \\<Longrightarrow> lsc_at x0 f = isCont f x0\n  \\<lbrakk>?F \\<noteq> bot;\n   ((f \\<circ> x) \\<longlongrightarrow> ?f0.0) ?F\\<rbrakk>\n  \\<Longrightarrow> Liminf ?F (f \\<circ> x) = ?f0.0\n  isCont f x0 =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      (f \\<circ> x) \\<longlonglongrightarrow> f x0)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "case (real r)"], ["proof (state)\nthis:\n  f x0 = ereal r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "{"], ["proof (state)\nthis:\n  f x0 = ereal r\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "fix e"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "assume e_def: \"(e :: ereal)>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "from this"], ["proof (chain)\npicking this:\n  0 < e", "obtain T where T_def: \"open T \\<and> x0 : T \\<and> (\\<forall>y \\<in> T. f y > f x0 - e)\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using lsc_at_real[of f x0] real assms"], ["proof (prove)\nusing this:\n  0 < e\n  \\<bar>f x0\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow>\n  lsc_at x0 f =\n  (\\<forall>e>0.\n      \\<exists>T.\n         open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y))\n  f x0 = ereal r\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. (\\<And>T.\n        open T \\<and>\n        x0 \\<in> T \\<and>\n        (\\<forall>y\\<in>T. f x0 - e < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "from this"], ["proof (chain)\npicking this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)", "obtain N where N_def: \"\\<forall>n\\<ge>N. x n \\<in> T\""], ["proof (prove)\nusing this:\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (subst tendsto_obtains_N[of x x0 T])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> x \\<longlonglongrightarrow> x0\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> open T\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> x0 \\<in> T\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y);\n        \\<forall>n\\<ge>N. x n \\<in> T\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> True", "using assms"], ["proof (prove)\nusing this:\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0\n\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> x \\<longlonglongrightarrow> x0\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> open T\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> x0 \\<in> T\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n        open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y);\n        \\<forall>n\\<ge>N. x n \\<in> T\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N. x n \\<in> T \\<Longrightarrow> thesis;\n     open T \\<and>\n     x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. x n \\<in> T\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "hence \"\\<forall>n\\<ge>N. f x0 - e < (f \\<circ> x) n\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. x n \\<in> T\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N. f x0 - e < (f \\<circ> x) n", "using T_def"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. x n \\<in> T\n  open T \\<and> x0 \\<in> T \\<and> (\\<forall>y\\<in>T. f x0 - e < f y)\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N. f x0 - e < (f \\<circ> x) n", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f x0 - e < (f \\<circ> x) n\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "hence \"liminf (f \\<circ> x) \\<ge> f x0 - e\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. f x0 - e < (f \\<circ> x) n\n\ngoal (1 subgoal):\n 1. f x0 - e \\<le> liminf (f \\<circ> x)", "by (intro Liminf_bounded) (auto simp: eventually_sequentially intro!: exI[of _ N])"], ["proof (state)\nthis:\n  f x0 - e \\<le> liminf (f \\<circ> x)\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "hence \"f x0 \\<le> liminf (f \\<circ> x) + e\""], ["proof (prove)\nusing this:\n  f x0 - e \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x) + e", "apply (cases e)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>f x0 - e \\<le> liminf (f \\<circ> x); e = ereal r\\<rbrakk>\n       \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e\n 2. \\<lbrakk>f x0 - e \\<le> liminf (f \\<circ> x); e = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e\n 3. \\<lbrakk>f x0 - e \\<le> liminf (f \\<circ> x); e = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e", "unfolding ereal_minus_le_iff"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>(e = - \\<infinity> \\<longrightarrow>\n                 liminf (f \\<circ> x) = \\<infinity>) \\<and>\n                (e = \\<infinity> \\<longrightarrow>\n                 f x0 = \\<infinity> \\<longrightarrow>\n                 liminf (f \\<circ> x) = \\<infinity>) \\<and>\n                (\\<bar>e\\<bar> \\<noteq> \\<infinity> \\<longrightarrow>\n                 f x0 \\<le> liminf (f \\<circ> x) + e);\n        e = ereal r\\<rbrakk>\n       \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e\n 2. \\<lbrakk>(e = - \\<infinity> \\<longrightarrow>\n              liminf (f \\<circ> x) = \\<infinity>) \\<and>\n             (e = \\<infinity> \\<longrightarrow>\n              f x0 = \\<infinity> \\<longrightarrow>\n              liminf (f \\<circ> x) = \\<infinity>) \\<and>\n             (\\<bar>e\\<bar> \\<noteq> \\<infinity> \\<longrightarrow>\n              f x0 \\<le> liminf (f \\<circ> x) + e);\n     e = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e\n 3. \\<lbrakk>(e = - \\<infinity> \\<longrightarrow>\n              liminf (f \\<circ> x) = \\<infinity>) \\<and>\n             (e = \\<infinity> \\<longrightarrow>\n              f x0 = \\<infinity> \\<longrightarrow>\n              liminf (f \\<circ> x) = \\<infinity>) \\<and>\n             (\\<bar>e\\<bar> \\<noteq> \\<infinity> \\<longrightarrow>\n              f x0 \\<le> liminf (f \\<circ> x) + e);\n     e = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + e", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> liminf (f \\<circ> x) + e\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + ?e2\n\ngoal (2 subgoals):\n 1. \\<And>r.\n       f x0 = ereal r \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n 2. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "then"], ["proof (chain)\npicking this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + ?e2", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + ?e2\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "using ereal_le_epsilon"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x) + ?e2\n  (\\<And>e. 0 < e \\<Longrightarrow> ?x \\<le> ?y + e) \\<Longrightarrow>\n  ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "by blast"], ["proof (state)\nthis:\n  f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. f x0 = - \\<infinity> \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)", "qed auto"], ["", "lemma lsc_liminf:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x. x \\<longlonglongrightarrow> x0 \\<longrightarrow> f x0 \\<le> liminf (f \\<circ> x))\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        f x0 \\<le> liminf (f \\<circ> x))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n     f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n     f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "fix x A"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "assume x_def: \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> x) \\<longlonglongrightarrow> A\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f x0 \\<le> A\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "using \\<open>?rhs\\<close> lim_imp_Liminf[of sequentially]"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n  \\<forall>x.\n     x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n     f x0 \\<le> liminf (f \\<circ> x)\n  \\<lbrakk>sequentially \\<noteq> bot;\n   ?f \\<longlonglongrightarrow> ?f0.0\\<rbrakk>\n  \\<Longrightarrow> liminf ?f = ?f0.0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> A", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> A\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)\n 2. \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x) \\<Longrightarrow>\n    lsc_at x0 f", "thus \"?lhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "by blast"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x.\n       x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n       f x0 \\<le> liminf (f \\<circ> x)", "qed (use lsc_imp_liminf in auto)"], ["", "lemma lsc_sequentially:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x c. x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f(x n)\\<le>c) \\<longrightarrow> f(x0)\\<le>c)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>x c.\n        x \\<longlonglongrightarrow> x0 \\<and>\n        (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n        f x0 \\<le> c)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>x c.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n     f x0 \\<le> c\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  \\<forall>x c.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n     f x0 \\<le> c\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "fix x l"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> x) \\<longlonglongrightarrow> l\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume \"l = \\<infinity>\""], ["proof (state)\nthis:\n  l = \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  l = \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "moreover"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume \"l = -\\<infinity>\""], ["proof (state)\nthis:\n  l = - \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  l = - \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "fix B :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "obtain N where N_def: \"\\<forall>n\\<ge>N. f(x n) \\<le> ereal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<le> ereal B \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Lim_MInfty[of \"f \\<circ> x\"] \\<open>(f \\<circ> x) \\<longlonglongrightarrow> l\\<close> \\<open>l = -\\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  (f \\<circ> x) \\<longlonglongrightarrow> - \\<infinity> =\n  (\\<forall>B. \\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x) n \\<le> ereal B)\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n  l = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<le> ereal B \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f (x n) \\<le> ereal B\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "define g where \"g n = (if n\\<ge>N then x n else x N)\" for n"], ["proof (state)\nthis:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"g \\<longlonglongrightarrow> x0\""], ["proof (prove)\nusing this:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n\ngoal (1 subgoal):\n 1. g \\<longlonglongrightarrow> x0", "by (intro filterlim_cong[THEN iffD1, OF refl refl _ \\<open>x \\<longlonglongrightarrow> x0\\<close>])\n            (auto simp: eventually_sequentially)"], ["proof (state)\nthis:\n  g \\<longlonglongrightarrow> x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "moreover"], ["proof (state)\nthis:\n  g \\<longlonglongrightarrow> x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "have \"\\<forall>n. f(g n) \\<le> ereal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. f (g n) \\<le> ereal B", "using g_def N_def"], ["proof (prove)\nusing this:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n  \\<forall>n\\<ge>N. f (x n) \\<le> ereal B\n\ngoal (1 subgoal):\n 1. \\<forall>n. f (g n) \\<le> ereal B", "by auto"], ["proof (state)\nthis:\n  \\<forall>n. f (g n) \\<le> ereal B\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "ultimately"], ["proof (chain)\npicking this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> ereal B", "have \"f x0 \\<le> ereal B\""], ["proof (prove)\nusing this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> ereal B\n\ngoal (1 subgoal):\n 1. f x0 \\<le> ereal B", "using \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> ereal B\n  \\<forall>x c.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n     f x0 \\<le> c\n\ngoal (1 subgoal):\n 1. f x0 \\<le> ereal B", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> ereal B\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  f x0 \\<le> ereal ?B2\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f x0 = -\\<infinity>\""], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal ?B2\n\ngoal (1 subgoal):\n 1. f x0 = - \\<infinity>", "using ereal_bot"], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal ?B2\n  (\\<And>B. ?x \\<le> ereal B) \\<Longrightarrow> ?x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f x0 = - \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  f x0 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "moreover"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume fin: \"\\<bar>l\\<bar> \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "fix e"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "assume e_def: \"(e :: ereal)>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "from this"], ["proof (chain)\npicking this:\n  0 < e", "obtain N where N_def: \"\\<forall>n\\<ge>N. f(x n) \\<in> {l - e <..< l + e}\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (subst tendsto_obtains_N[of \"f \\<circ> x\" l \"{l - e <..< l + e}\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> x) \\<longlonglongrightarrow> l\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> open {l - e<..<l + e}\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> l \\<in> {l - e<..<l + e}\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N.\n                      f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                   thesis;\n        0 < e;\n        \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> {l - e<..<l + e}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> True", "using fin e_def ereal_between \\<open>(f \\<circ> x) \\<longlonglongrightarrow> l\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n  0 < e\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x - ?e < ?x\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x < ?x + ?e\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> x) \\<longlonglongrightarrow> l\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> open {l - e<..<l + e}\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> l \\<in> {l - e<..<l + e}\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N.\n                      f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                   thesis;\n        0 < e;\n        \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> {l - e<..<l + e}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "define g where \"g n = (if n\\<ge>N then x n else x N)\" for n"], ["proof (state)\nthis:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"g \\<longlonglongrightarrow> x0\""], ["proof (prove)\nusing this:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n\ngoal (1 subgoal):\n 1. g \\<longlonglongrightarrow> x0", "by (intro filterlim_cong[THEN iffD1, OF refl refl _ \\<open>x \\<longlonglongrightarrow> x0\\<close>])\n            (auto simp: eventually_sequentially)"], ["proof (state)\nthis:\n  g \\<longlonglongrightarrow> x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "moreover"], ["proof (state)\nthis:\n  g \\<longlonglongrightarrow> x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "have \"\\<forall>n. f(g n) \\<le> l + e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. f (g n) \\<le> l + e", "using g_def N_def"], ["proof (prove)\nusing this:\n  g ?n = (if N \\<le> ?n then x ?n else x N)\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n\ngoal (1 subgoal):\n 1. \\<forall>n. f (g n) \\<le> l + e", "by auto"], ["proof (state)\nthis:\n  \\<forall>n. f (g n) \\<le> l + e\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "ultimately"], ["proof (chain)\npicking this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> l + e", "have \"f x0 \\<le> l + e\""], ["proof (prove)\nusing this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> l + e\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l + e", "using \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  g \\<longlonglongrightarrow> x0\n  \\<forall>n. f (g n) \\<le> l + e\n  \\<forall>x c.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n     f x0 \\<le> c\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l + e", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l + e\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "using ereal_le_epsilon"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n  (\\<And>e. 0 < e \\<Longrightarrow> ?x \\<le> ?y + e) \\<Longrightarrow>\n  ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "ultimately"], ["proof (chain)\npicking this:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l", "have \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by blast"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c\n 2. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c \\<Longrightarrow>\n    lsc_at x0 f", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2", "show ?lhs"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "assume lsc: ?lhs"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "{"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "fix x c"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "assume xc_def: \"x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f(x n)\\<le>c)\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "hence \"liminf (f \\<circ> x) \\<le> c\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c)\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) \\<le> c", "using Limsup_bounded[where F = sequentially and X = \"f \\<circ> x\" and C = c]\n        Liminf_le_Limsup[of sequentially \"f \\<circ> x\"]"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c)\n  \\<forall>\\<^sub>F n in sequentially.\n     (f \\<circ> x) n \\<le> c \\<Longrightarrow>\n  limsup (f \\<circ> x) \\<le> c\n  sequentially \\<noteq> bot \\<Longrightarrow>\n  liminf (f \\<circ> x) \\<le> limsup (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) \\<le> c", "by auto"], ["proof (state)\nthis:\n  liminf (f \\<circ> x) \\<le> c\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "hence \"f x0 \\<le> c\""], ["proof (prove)\nusing this:\n  liminf (f \\<circ> x) \\<le> c\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c", "using lsc xc_def lsc_imp_liminf[of x0 f x]"], ["proof (prove)\nusing this:\n  liminf (f \\<circ> x) \\<le> c\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c)\n  \\<lbrakk>lsc_at x0 f; x \\<longlonglongrightarrow> x0\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> c\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c2) \\<Longrightarrow>\n  f x0 \\<le> ?c2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "thus \"?rhs\""], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c2) \\<Longrightarrow>\n  f x0 \\<le> ?c2\n\ngoal (1 subgoal):\n 1. \\<forall>x c.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n       f x0 \\<le> c", "by auto"], ["proof (state)\nthis:\n  \\<forall>x c.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n     f x0 \\<le> c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_sequentially_gen:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 f \\<longleftrightarrow> (\\<forall>x c c0. x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f(x n)\\<le>c n) \\<longrightarrow> f(x0)\\<le>c0)\"\n    (is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 f =\n    (\\<forall>x c c0.\n        x \\<longlonglongrightarrow> x0 \\<and>\n        c \\<longlonglongrightarrow> c0 \\<and>\n        (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n        f x0 \\<le> c0)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>x c c0.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     c \\<longlonglongrightarrow> c0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n     f x0 \\<le> c0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "{"], ["proof (state)\nthis:\n  \\<forall>x c c0.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     c \\<longlonglongrightarrow> c0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n     f x0 \\<le> c0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "fix x c0"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "assume a: \"x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c0)\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c0)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "define c where \"c = (\\<lambda>n::nat. c0)\""], ["proof (state)\nthis:\n  c = (\\<lambda>n. c0)\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "hence \"c \\<longlonglongrightarrow> c0\""], ["proof (prove)\nusing this:\n  c = (\\<lambda>n. c0)\n\ngoal (1 subgoal):\n 1. c \\<longlonglongrightarrow> c0", "by auto"], ["proof (state)\nthis:\n  c \\<longlonglongrightarrow> c0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "hence \"f(x0)\\<le>c0\""], ["proof (prove)\nusing this:\n  c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "using \\<open>?rhs\\<close>[rule_format, of x c c0]"], ["proof (prove)\nusing this:\n  c \\<longlonglongrightarrow> c0\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and>\n  (\\<forall>n. f (x n) \\<le> c n) \\<Longrightarrow>\n  f x0 \\<le> c0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "using a c_def"], ["proof (prove)\nusing this:\n  c \\<longlonglongrightarrow> c0\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and>\n  (\\<forall>n. f (x n) \\<le> c n) \\<Longrightarrow>\n  f x0 \\<le> c0\n  x \\<longlonglongrightarrow> x0 \\<and> (\\<forall>n. f (x n) \\<le> c0)\n  c = (\\<lambda>n. c0)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> c0\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c0.2) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2\n\ngoal (2 subgoals):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0\n 2. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0 \\<Longrightarrow>\n    lsc_at x0 f", "then"], ["proof (chain)\npicking this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c0.2) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2", "show \"?lhs\""], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c0.2) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "using lsc_sequentially[of x0 f]"], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c0.2) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2\n  lsc_at x0 f =\n  (\\<forall>x c.\n      x \\<longlonglongrightarrow> x0 \\<and>\n      (\\<forall>n. f (x n) \\<le> c) \\<longrightarrow>\n      f x0 \\<le> c)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "assume lsc: \"lsc_at x0 f\""], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "{"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "fix x c c0"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "assume xc_def: \"x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f(x n)\\<le>c n)\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f (x n) \\<le> c n)\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "hence \"liminf (f \\<circ> x) \\<le> c0\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f (x n) \\<le> c n)\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) \\<le> c0", "using Liminf_mono[of \"f \\<circ> x\" c sequentially] lim_imp_Liminf[of sequentially]"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f (x n) \\<le> c n)\n  \\<forall>\\<^sub>F xa in sequentially.\n     (f \\<circ> x) xa \\<le> c xa \\<Longrightarrow>\n  liminf (f \\<circ> x) \\<le> liminf c\n  \\<lbrakk>sequentially \\<noteq> bot;\n   ?f \\<longlonglongrightarrow> ?f0.0\\<rbrakk>\n  \\<Longrightarrow> liminf ?f = ?f0.0\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) \\<le> c0", "by auto"], ["proof (state)\nthis:\n  liminf (f \\<circ> x) \\<le> c0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "hence \"f x0 \\<le> c0\""], ["proof (prove)\nusing this:\n  liminf (f \\<circ> x) \\<le> c0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "using lsc xc_def lsc_imp_liminf[of x0 f x]"], ["proof (prove)\nusing this:\n  liminf (f \\<circ> x) \\<le> c0\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0 \\<and>\n  c \\<longlonglongrightarrow> c0 \\<and> (\\<forall>n. f (x n) \\<le> c n)\n  \\<lbrakk>lsc_at x0 f; x \\<longlonglongrightarrow> x0\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> c0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  ?c2 \\<longlonglongrightarrow> ?c0.2 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c2 n) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<Longrightarrow>\n    \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "then"], ["proof (chain)\npicking this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  ?c2 \\<longlonglongrightarrow> ?c0.2 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c2 n) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2", "show \"?rhs\""], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<and>\n  ?c2 \\<longlonglongrightarrow> ?c0.2 \\<and>\n  (\\<forall>n. f (?x2 n) \\<le> ?c2 n) \\<Longrightarrow>\n  f x0 \\<le> ?c0.2\n\ngoal (1 subgoal):\n 1. \\<forall>x c c0.\n       x \\<longlonglongrightarrow> x0 \\<and>\n       c \\<longlonglongrightarrow> c0 \\<and>\n       (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n       f x0 \\<le> c0", "by auto"], ["proof (state)\nthis:\n  \\<forall>x c c0.\n     x \\<longlonglongrightarrow> x0 \\<and>\n     c \\<longlonglongrightarrow> c0 \\<and>\n     (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n     f x0 \\<le> c0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_sequentially_mem:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"lsc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\" \"c \\<longlonglongrightarrow> c0\"\n  assumes \"\\<forall>n. f(x n)\\<le>c n\"\n  shows \"f(x0)\\<le>c0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "using lsc_sequentially_gen[of x0 f] assms"], ["proof (prove)\nusing this:\n  lsc_at x0 f =\n  (\\<forall>x c c0.\n      x \\<longlonglongrightarrow> x0 \\<and>\n      c \\<longlonglongrightarrow> c0 \\<and>\n      (\\<forall>n. f (x n) \\<le> c n) \\<longrightarrow>\n      f x0 \\<le> c0)\n  lsc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  c \\<longlonglongrightarrow> c0\n  \\<forall>n. f (x n) \\<le> c n\n\ngoal (1 subgoal):\n 1. f x0 \\<le> c0", "by auto"], ["", "lemma lsc_uminus:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"lsc_at x0 (\\<lambda>x. -f x) \\<longleftrightarrow> usc_at x0 f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 (\\<lambda>x. - f x) = usc_at x0 f", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "assume lsc: \"lsc_at x0 (\\<lambda>x. -f x)\""], ["proof (state)\nthis:\n  lsc_at x0 (\\<lambda>x. - f x)\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "{"], ["proof (state)\nthis:\n  lsc_at x0 (\\<lambda>x. - f x)\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "fix x A"], ["proof (state)\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "assume x_def: \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> x) \\<longlonglongrightarrow> A\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"(\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> -A\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> - A", "using tendsto_uminus_ereal[of \"f \\<circ> x\" A]"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n  ((f \\<circ> x) \\<longlongrightarrow> A) ?F \\<Longrightarrow>\n  ((\\<lambda>xa. - (f \\<circ> x) xa) \\<longlongrightarrow> - A) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> - A", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> -A\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> - A", "unfolding o_def"], ["proof (prove)\nusing this:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. (\\<lambda>xa. - f (x xa)) \\<longlonglongrightarrow> - A", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> - A\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \" - f x0 \\<le> - A\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. - f x0 \\<le> - A", "apply (subst lsc_at_mem[of x0 \"(\\<lambda>x. -f x)\" x])"], ["proof (prove)\ngoal (4 subgoals):\n 1. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    lsc_at x0 (\\<lambda>x. - f x)\n 2. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> - A\n 4. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    True", "using lsc x_def"], ["proof (prove)\nusing this:\n  lsc_at x0 (\\<lambda>x. - f x)\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (4 subgoals):\n 1. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    lsc_at x0 (\\<lambda>x. - f x)\n 2. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> - A\n 4. ((\\<lambda>x. - f x) \\<circ> x)\n    \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  - f x0 \\<le> - A\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"f x0 \\<ge> A\""], ["proof (prove)\nusing this:\n  - f x0 \\<le> - A\n\ngoal (1 subgoal):\n 1. A \\<le> f x0", "by auto"], ["proof (state)\nthis:\n  A \\<le> f x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> ?A2 \\<le> f x0\n\ngoal (2 subgoals):\n 1. lsc_at x0 (\\<lambda>x. - f x) \\<Longrightarrow> usc_at x0 f\n 2. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> ?A2 \\<le> f x0", "show \"usc_at x0 f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> ?A2 \\<le> f x0\n\ngoal (1 subgoal):\n 1. usc_at x0 f", "unfolding usc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> ?A2 \\<le> f x0\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       l \\<le> f x0", "by auto"], ["proof (state)\nthis:\n  usc_at x0 f\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "assume usc: \"usc_at x0 f\""], ["proof (state)\nthis:\n  usc_at x0 f\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "{"], ["proof (state)\nthis:\n  usc_at x0 f\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "fix x A"], ["proof (state)\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "assume x_def: \"x \\<longlonglongrightarrow> x0\" \"((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> A\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"(\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A", "unfolding o_def"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (\\<lambda>xa. - f (x xa)) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"(\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A", "using tendsto_uminus_ereal[of \"(\\<lambda>i. - f (x i))\" A]"], ["proof (prove)\nusing this:\n  (\\<lambda>i. - f (x i)) \\<longlonglongrightarrow> A\n  ((\\<lambda>i. - f (x i)) \\<longlongrightarrow> A) ?F \\<Longrightarrow>\n  ((\\<lambda>xa. - (- f (x xa))) \\<longlongrightarrow> - A) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"(f \\<circ> x) \\<longlonglongrightarrow> -A\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> - A", "unfolding o_def"], ["proof (prove)\nusing this:\n  (\\<lambda>i. f (x i)) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. (\\<lambda>xa. f (x xa)) \\<longlonglongrightarrow> - A", "by auto"], ["proof (state)\nthis:\n  (f \\<circ> x) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"f x0 \\<ge> - A\""], ["proof (prove)\nusing this:\n  (f \\<circ> x) \\<longlonglongrightarrow> - A\n\ngoal (1 subgoal):\n 1. - A \\<le> f x0", "apply (subst usc_at_mem[of x0 \"f\" x])"], ["proof (prove)\ngoal (4 subgoals):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    usc_at x0 f\n 2. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    (f \\<circ> x) \\<longlonglongrightarrow> - A\n 4. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow> True", "using usc x_def"], ["proof (prove)\nusing this:\n  usc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  ((\\<lambda>x. - f x) \\<circ> x) \\<longlonglongrightarrow> A\n\ngoal (4 subgoals):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    usc_at x0 f\n 2. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow>\n    (f \\<circ> x) \\<longlonglongrightarrow> - A\n 4. (f \\<circ> x) \\<longlonglongrightarrow> - A \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  - A \\<le> f x0\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "hence \"-f x0 \\<le> A\""], ["proof (prove)\nusing this:\n  - A \\<le> f x0\n\ngoal (1 subgoal):\n 1. - f x0 \\<le> A", "by (auto simp: ereal_uminus_le_reorder)"], ["proof (state)\nthis:\n  - f x0 \\<le> A\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   ((\\<lambda>x. - f x) \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> - f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. usc_at x0 f \\<Longrightarrow> lsc_at x0 (\\<lambda>x. - f x)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   ((\\<lambda>x. - f x) \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> - f x0 \\<le> ?A2", "show \"lsc_at x0 (\\<lambda>x. -f x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   ((\\<lambda>x. - f x) \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> - f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. lsc_at x0 (\\<lambda>x. - f x)", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   ((\\<lambda>x. - f x) \\<circ> ?x2) \\<longlonglongrightarrow> ?A2\\<rbrakk>\n  \\<Longrightarrow> - f x0 \\<le> ?A2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       ((\\<lambda>x. - f x) \\<circ> X)\n       \\<longlonglongrightarrow> l \\<longrightarrow>\n       - f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 (\\<lambda>x. - f x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma usc_limsup:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"usc_at x0 f \\<longleftrightarrow> (\\<forall>x. x \\<longlonglongrightarrow> x0 \\<longrightarrow> f x0 \\<ge> limsup (f \\<circ> x))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "have \"usc_at x0 f \\<longleftrightarrow> (\\<forall>x. x \\<longlonglongrightarrow> x0 \\<longrightarrow> - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))", "using lsc_uminus[of x0 f] lsc_liminf[of x0 \"(\\<lambda>x. - f x)\"]"], ["proof (prove)\nusing this:\n  lsc_at x0 (\\<lambda>x. - f x) = usc_at x0 f\n  lsc_at x0 (\\<lambda>x. - f x) =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))", "by auto"], ["proof (state)\nthis:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "moreover"], ["proof (state)\nthis:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "{"], ["proof (state)\nthis:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "assume \"x \\<longlonglongrightarrow> x0\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "have \"(-f x0 \\<le> -limsup (f \\<circ> x)) \\<longleftrightarrow> (-f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (- f x0 \\<le> - limsup (f \\<circ> x)) =\n    (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))", "using ereal_Liminf_uminus[of _ \"f \\<circ> x\"]"], ["proof (prove)\nusing this:\n  Liminf ?net (\\<lambda>xa. - (f \\<circ> x) xa) =\n  - Limsup ?net (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. (- f x0 \\<le> - limsup (f \\<circ> x)) =\n    (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))", "unfolding o_def"], ["proof (prove)\nusing this:\n  Liminf ?net (\\<lambda>xa. - f (x xa)) =\n  - Limsup ?net (\\<lambda>xa. f (x xa))\n\ngoal (1 subgoal):\n 1. (- f x0 \\<le> - limsup (\\<lambda>xa. f (x xa))) =\n    (- f x0 \\<le> liminf (\\<lambda>xa. - f (x xa)))", "by auto"], ["proof (state)\nthis:\n  (- f x0 \\<le> - limsup (f \\<circ> x)) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "hence \"(f x0 \\<ge> limsup (f \\<circ> x)) \\<longleftrightarrow> (-f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\""], ["proof (prove)\nusing this:\n  (- f x0 \\<le> - limsup (f \\<circ> x)) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. (limsup (f \\<circ> x) \\<le> f x0) =\n    (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))", "by auto"], ["proof (state)\nthis:\n  (limsup (f \\<circ> x) \\<le> f x0) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (limsup (f \\<circ> ?x2) \\<le> f x0) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> ?x2))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "ultimately"], ["proof (chain)\npicking this:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (limsup (f \\<circ> ?x2) \\<le> f x0) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> ?x2))", "show ?thesis"], ["proof (prove)\nusing this:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      - f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> x))\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (limsup (f \\<circ> ?x2) \\<le> f x0) =\n  (- f x0 \\<le> liminf ((\\<lambda>x. - f x) \\<circ> ?x2))\n\ngoal (1 subgoal):\n 1. usc_at x0 f =\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "by auto"], ["proof (state)\nthis:\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      limsup (f \\<circ> x) \\<le> f x0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma usc_imp_limsup:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  assumes \"usc_at x0 f\"\n  assumes \"x \\<longlonglongrightarrow> x0\"\n  shows \"f x0 \\<ge> limsup (f \\<circ> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) \\<le> f x0", "using assms usc_limsup[of x0 f]"], ["proof (prove)\nusing this:\n  usc_at x0 f\n  x \\<longlonglongrightarrow> x0\n  usc_at x0 f =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      limsup (f \\<circ> x) \\<le> f x0)\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) \\<le> f x0", "by auto"], ["", "lemma usc_limsup_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"usc_at x0 f \\<longleftrightarrow> f x0 \\<ge> Limsup (at x0) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "have \"usc_at x0 f \\<longleftrightarrow> lsc_at x0 (\\<lambda>x. -(f x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. usc_at x0 f = lsc_at x0 (\\<lambda>x. - f x)", "by (metis lsc_uminus)"], ["proof (state)\nthis:\n  usc_at x0 f = lsc_at x0 (\\<lambda>x. - f x)\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "also"], ["proof (state)\nthis:\n  usc_at x0 f = lsc_at x0 (\\<lambda>x. - f x)\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "have \"\\<dots> \\<longleftrightarrow> -(f x0) \\<le> Liminf (at x0) (\\<lambda>x. -(f x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 (\\<lambda>x. - f x) =\n    (- f x0 \\<le> Liminf (at x0) (\\<lambda>x. - f x))", "by (metis lsc_liminf_at)"], ["proof (state)\nthis:\n  lsc_at x0 (\\<lambda>x. - f x) =\n  (- f x0 \\<le> Liminf (at x0) (\\<lambda>x. - f x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "also"], ["proof (state)\nthis:\n  lsc_at x0 (\\<lambda>x. - f x) =\n  (- f x0 \\<le> Liminf (at x0) (\\<lambda>x. - f x))\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "have \"\\<dots> \\<longleftrightarrow> -(f x0) \\<le> -(Limsup (at x0) f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (- f x0 \\<le> Liminf (at x0) (\\<lambda>x. - f x)) =\n    (- f x0 \\<le> - Limsup (at x0) f)", "by (metis ereal_Liminf_uminus)"], ["proof (state)\nthis:\n  (- f x0 \\<le> Liminf (at x0) (\\<lambda>x. - f x)) =\n  (- f x0 \\<le> - Limsup (at x0) f)\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "finally"], ["proof (chain)\npicking this:\n  usc_at x0 f = (- f x0 \\<le> - Limsup (at x0) f)", "show ?thesis"], ["proof (prove)\nusing this:\n  usc_at x0 f = (- f x0 \\<le> - Limsup (at x0) f)\n\ngoal (1 subgoal):\n 1. usc_at x0 f = (Limsup (at x0) f \\<le> f x0)", "by auto"], ["proof (state)\nthis:\n  usc_at x0 f = (Limsup (at x0) f \\<le> f x0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma continuous_iff_lsc_usc:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"continuous (at x0) f \\<longleftrightarrow> (lsc_at x0 f) \\<and> (usc_at x0 f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "assume a: \"continuous (at x0) f\""], ["proof (state)\nthis:\n  isCont f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "{"], ["proof (state)\nthis:\n  isCont f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "assume \"x \\<longlonglongrightarrow> x0\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"(f \\<circ> x) \\<longlonglongrightarrow> f x0\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> f x0", "using a continuous_imp_tendsto[of x0 f x]"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  isCont f x0\n  \\<lbrakk>isCont f x0; x \\<longlonglongrightarrow> x0\\<rbrakk>\n  \\<Longrightarrow> (f \\<circ> x) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> f x0", "by auto"], ["proof (state)\nthis:\n  (f \\<circ> x) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"liminf (f \\<circ> x) = f x0 \\<and> limsup (f \\<circ> x) = f x0\""], ["proof (prove)\nusing this:\n  (f \\<circ> x) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) = f x0 \\<and> limsup (f \\<circ> x) = f x0", "using lim_imp_Liminf[of sequentially] lim_imp_Limsup[of sequentially]"], ["proof (prove)\nusing this:\n  (f \\<circ> x) \\<longlonglongrightarrow> f x0\n  \\<lbrakk>sequentially \\<noteq> bot;\n   ?f \\<longlonglongrightarrow> ?f0.0\\<rbrakk>\n  \\<Longrightarrow> liminf ?f = ?f0.0\n  \\<lbrakk>sequentially \\<noteq> bot;\n   ?f \\<longlonglongrightarrow> ?f0.0\\<rbrakk>\n  \\<Longrightarrow> limsup ?f = ?f0.0\n\ngoal (1 subgoal):\n 1. liminf (f \\<circ> x) = f x0 \\<and> limsup (f \\<circ> x) = f x0", "by auto"], ["proof (state)\nthis:\n  liminf (f \\<circ> x) = f x0 \\<and> limsup (f \\<circ> x) = f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  liminf (f \\<circ> ?x2) = f x0 \\<and> limsup (f \\<circ> ?x2) = f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"lsc_at x0 f \\<and> usc_at x0 f\""], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  liminf (f \\<circ> ?x2) = f x0 \\<and> limsup (f \\<circ> ?x2) = f x0\n\ngoal (1 subgoal):\n 1. lsc_at x0 f \\<and> usc_at x0 f", "unfolding lsc_liminf usc_limsup"], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  liminf (f \\<circ> ?x2) = f x0 \\<and> limsup (f \\<circ> ?x2) = f x0\n\ngoal (1 subgoal):\n 1. (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        f x0 \\<le> liminf (f \\<circ> x)) \\<and>\n    (\\<forall>x.\n        x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n        limsup (f \\<circ> x) \\<le> f x0)", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "}"], ["proof (state)\nthis:\n  isCont f x0 \\<Longrightarrow> lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "moreover"], ["proof (state)\nthis:\n  isCont f x0 \\<Longrightarrow> lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "{"], ["proof (state)\nthis:\n  isCont f x0 \\<Longrightarrow> lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "assume a: \"(lsc_at x0 f) \\<and> (usc_at x0 f)\""], ["proof (state)\nthis:\n  lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "{"], ["proof (state)\nthis:\n  lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "assume \"x \\<longlonglongrightarrow> x0\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"limsup (f \\<circ> x) \\<le> f x0\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) \\<le> f x0", "using a"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  lsc_at x0 f \\<and> usc_at x0 f\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) \\<le> f x0", "unfolding usc_limsup"], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  lsc_at x0 f \\<and>\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      limsup (f \\<circ> x) \\<le> f x0)\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) \\<le> f x0", "by auto"], ["proof (state)\nthis:\n  limsup (f \\<circ> x) \\<le> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "moreover"], ["proof (state)\nthis:\n  limsup (f \\<circ> x) \\<le> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "have \"\\<dots> \\<le> liminf (f \\<circ> x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "using a \\<open>x \\<longlonglongrightarrow> x0\\<close>"], ["proof (prove)\nusing this:\n  lsc_at x0 f \\<and> usc_at x0 f\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "unfolding lsc_liminf"], ["proof (prove)\nusing this:\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      f x0 \\<le> liminf (f \\<circ> x)) \\<and>\n  usc_at x0 f\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> liminf (f \\<circ> x)", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "ultimately"], ["proof (chain)\npicking this:\n  limsup (f \\<circ> x) \\<le> f x0\n  f x0 \\<le> liminf (f \\<circ> x)", "have \"limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0\""], ["proof (prove)\nusing this:\n  limsup (f \\<circ> x) \\<le> f x0\n  f x0 \\<le> liminf (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0", "using Liminf_le_Limsup[of sequentially \"f \\<circ> x\"]"], ["proof (prove)\nusing this:\n  limsup (f \\<circ> x) \\<le> f x0\n  f x0 \\<le> liminf (f \\<circ> x)\n  sequentially \\<noteq> bot \\<Longrightarrow>\n  liminf (f \\<circ> x) \\<le> limsup (f \\<circ> x)\n\ngoal (1 subgoal):\n 1. limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0", "by auto"], ["proof (state)\nthis:\n  limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"(f \\<circ> x) \\<longlonglongrightarrow> f x0\""], ["proof (prove)\nusing this:\n  limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0\n\ngoal (1 subgoal):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> f x0", "using Liminf_eq_Limsup[of sequentially]"], ["proof (prove)\nusing this:\n  limsup (f \\<circ> x) = f x0 \\<and> liminf (f \\<circ> x) = f x0\n  \\<lbrakk>sequentially \\<noteq> bot; liminf ?f = ?f0.0;\n   limsup ?f = ?f0.0\\<rbrakk>\n  \\<Longrightarrow> ?f \\<longlonglongrightarrow> ?f0.0\n\ngoal (1 subgoal):\n 1. (f \\<circ> x) \\<longlonglongrightarrow> f x0", "by (simp add: tendsto_iff_Liminf_eq_Limsup)"], ["proof (state)\nthis:\n  (f \\<circ> x) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "}"], ["proof (state)\nthis:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (f \\<circ> ?x2) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "hence \"continuous (at x0) f\""], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (f \\<circ> ?x2) \\<longlonglongrightarrow> f x0\n\ngoal (1 subgoal):\n 1. isCont f x0", "using continuous_at_sequentially[of x0 f]"], ["proof (prove)\nusing this:\n  ?x2 \\<longlonglongrightarrow> x0 \\<Longrightarrow>\n  (f \\<circ> ?x2) \\<longlonglongrightarrow> f x0\n  isCont f x0 =\n  (\\<forall>x.\n      x \\<longlonglongrightarrow> x0 \\<longrightarrow>\n      (f \\<circ> x) \\<longlonglongrightarrow> f x0)\n\ngoal (1 subgoal):\n 1. isCont f x0", "by auto"], ["proof (state)\nthis:\n  isCont f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "}"], ["proof (state)\nthis:\n  lsc_at x0 f \\<and> usc_at x0 f \\<Longrightarrow> isCont f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "ultimately"], ["proof (chain)\npicking this:\n  isCont f x0 \\<Longrightarrow> lsc_at x0 f \\<and> usc_at x0 f\n  lsc_at x0 f \\<and> usc_at x0 f \\<Longrightarrow> isCont f x0", "show ?thesis"], ["proof (prove)\nusing this:\n  isCont f x0 \\<Longrightarrow> lsc_at x0 f \\<and> usc_at x0 f\n  lsc_at x0 f \\<and> usc_at x0 f \\<Longrightarrow> isCont f x0\n\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "by blast"], ["proof (state)\nthis:\n  isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma continuous_lsc_compose:\n  assumes \"lsc_at (g x0) f\" \"continuous (at x0) g\"\n  shows \"lsc_at x0 (f \\<circ> g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "fix x L"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "assume \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\n\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "hence \"f(g x0) \\<le> L\""], ["proof (prove)\nusing this:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\n\ngoal (1 subgoal):\n 1. f (g x0) \\<le> L", "apply (subst lsc_at_mem[of \"g x0\" f \"g \\<circ> x\" L])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> lsc_at (g x0) f\n 2. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (g \\<circ> x) \\<longlonglongrightarrow> g x0\n 3. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> (g \\<circ> x)) \\<longlonglongrightarrow> L\n 4. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> True", "using assms continuous_imp_tendsto[of x0 g x]"], ["proof (prove)\nusing this:\n  lsc_at (g x0) f\n  isCont g x0\n  \\<lbrakk>isCont g x0; x \\<longlonglongrightarrow> x0\\<rbrakk>\n  \\<Longrightarrow> (g \\<circ> x) \\<longlonglongrightarrow> g x0\n\ngoal (4 subgoals):\n 1. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> lsc_at (g x0) f\n 2. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (g \\<circ> x) \\<longlonglongrightarrow> g x0\n 3. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> (g \\<circ> x)) \\<longlonglongrightarrow> L\n 4. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (f \\<circ> g \\<circ> x) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> True", "unfolding o_def"], ["proof (prove)\nusing this:\n  lsc_at (g x0) f\n  isCont g x0\n  \\<lbrakk>isCont g x0; x \\<longlonglongrightarrow> x0\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>xa. g (x xa)) \\<longlonglongrightarrow> g x0\n\ngoal (4 subgoals):\n 1. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (\\<lambda>xa. f (g (x xa))) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> lsc_at (g x0) f\n 2. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (\\<lambda>xa. f (g (x xa))) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>xa. g (x xa)) \\<longlonglongrightarrow> g x0\n 3. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (\\<lambda>xa. f (g (x xa))) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>xa. f (g (x xa)))\n                      \\<longlonglongrightarrow> L\n 4. \\<lbrakk>x \\<longlonglongrightarrow> x0;\n     (\\<lambda>xa. f (g (x xa))) \\<longlonglongrightarrow> L\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  f (g x0) \\<le> L\n\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> g \\<circ> ?x2) \\<longlonglongrightarrow> ?L2\\<rbrakk>\n  \\<Longrightarrow> f (g x0) \\<le> ?L2\n\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "from this"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> g \\<circ> ?x2) \\<longlonglongrightarrow> ?L2\\<rbrakk>\n  \\<Longrightarrow> f (g x0) \\<le> ?L2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> g \\<circ> ?x2) \\<longlonglongrightarrow> ?L2\\<rbrakk>\n  \\<Longrightarrow> f (g x0) \\<le> ?L2\n\ngoal (1 subgoal):\n 1. lsc_at x0 (f \\<circ> g)", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> g \\<circ> ?x2) \\<longlonglongrightarrow> ?L2\\<rbrakk>\n  \\<Longrightarrow> f (g x0) \\<le> ?L2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> g \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       (f \\<circ> g) x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 (f \\<circ> g)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma continuous_isCont:\n  \"continuous (at x0) f \\<longleftrightarrow> isCont f x0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont f x0 = isCont f x0", "by (metis continuous_at isCont_def)"], ["", "lemma isCont_iff_lsc_usc:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"isCont f x0 \\<longleftrightarrow> (lsc_at x0 f) \\<and> (usc_at x0 f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont f x0 = (lsc_at x0 f \\<and> usc_at x0 f)", "by (metis continuous_iff_lsc_usc continuous_isCont)"], ["", "definition\n  lsc :: \"('a::topological_space \\<Rightarrow> 'b::order_topology) \\<Rightarrow> bool\" where\n  \"lsc f \\<longleftrightarrow> (\\<forall>x. lsc_at x f)\""], ["", "definition\n  usc :: \"('a::topological_space \\<Rightarrow> 'b::order_topology) \\<Rightarrow> bool\" where\n  \"usc f \\<longleftrightarrow> (\\<forall>x. usc_at x f)\""], ["", "lemma continuous_UNIV_iff_lsc_usc:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(\\<forall>x. continuous (at x) f) \\<longleftrightarrow> (lsc f) \\<and> (usc f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. isCont f x) = (lsc f \\<and> usc f)", "by (metis continuous_iff_lsc_usc lsc_def usc_def)"], ["", "subsection \\<open>Epigraphs\\<close>"], ["", "definition \"Epigraph S (f::_ \\<Rightarrow> ereal) = {xy. fst xy : S \\<and> f (fst xy) \\<le> ereal(snd xy)}\""], ["", "lemma mem_Epigraph: \"(x, y) \\<in> Epigraph S f \\<longleftrightarrow> x \\<in> S \\<and> f x \\<le> ereal y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y) \\<in> Epigraph S f) = (x \\<in> S \\<and> f x \\<le> ereal y)", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, y)\n     \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}) =\n    (x \\<in> S \\<and> f x \\<le> ereal y)", "by auto"], ["", "lemma ereal_closed_levels:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(\\<forall>y. closed {x. f(x)\\<le>y}) \\<longleftrightarrow> (\\<forall>r. closed {x. f(x)\\<le>ereal r})\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "assume \"?rhs\""], ["proof (state)\nthis:\n  \\<forall>r. closed {x. f x \\<le> ereal r}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "{"], ["proof (state)\nthis:\n  \\<forall>r. closed {x. f x \\<le> ereal r}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "fix y :: ereal"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "assume \"y \\<noteq> \\<infinity> \\<and> y \\<noteq> -\\<infinity>\""], ["proof (state)\nthis:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "hence \"closed {x. f(x)\\<le>y}\""], ["proof (prove)\nusing this:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity>\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "using \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity>\n  \\<forall>r. closed {x. f x \\<le> ereal r}\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "by (cases y) auto"], ["proof (state)\nthis:\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "}"], ["proof (state)\nthis:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "moreover"], ["proof (state)\nthis:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "{"], ["proof (state)\nthis:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "assume \"y=\\<infinity>\""], ["proof (state)\nthis:\n  y = \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "hence  \"closed {x. f(x)\\<le>y}\""], ["proof (prove)\nusing this:\n  y = \\<infinity>\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "by auto"], ["proof (state)\nthis:\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "}"], ["proof (state)\nthis:\n  y = \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "moreover"], ["proof (state)\nthis:\n  y = \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "{"], ["proof (state)\nthis:\n  y = \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "assume \"y=-\\<infinity>\""], ["proof (state)\nthis:\n  y = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "hence \"{x. f(x)\\<le>y} = Inter {{x. f(x)\\<le>ereal r} |r. r : UNIV}\""], ["proof (prove)\nusing this:\n  y = - \\<infinity>\n\ngoal (1 subgoal):\n 1. {x. f x \\<le> y} = \\<Inter> {{x. f x \\<le> ereal r} |r. r \\<in> UNIV}", "using ereal_bot"], ["proof (prove)\nusing this:\n  y = - \\<infinity>\n  (\\<And>B. ?x \\<le> ereal B) \\<Longrightarrow> ?x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. {x. f x \\<le> y} = \\<Inter> {{x. f x \\<le> ereal r} |r. r \\<in> UNIV}", "by auto"], ["proof (state)\nthis:\n  {x. f x \\<le> y} = \\<Inter> {{x. f x \\<le> ereal r} |r. r \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "hence \"closed {x. f(x)\\<le>y}\""], ["proof (prove)\nusing this:\n  {x. f x \\<le> y} = \\<Inter> {{x. f x \\<le> ereal r} |r. r \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "using closed_Inter \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  {x. f x \\<le> y} = \\<Inter> {{x. f x \\<le> ereal r} |r. r \\<in> UNIV}\n  \\<forall>S\\<in>?K. closed S \\<Longrightarrow> closed (\\<Inter> ?K)\n  \\<forall>r. closed {x. f x \\<le> ereal r}\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "by auto"], ["proof (state)\nthis:\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "}"], ["proof (state)\nthis:\n  y = - \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "ultimately"], ["proof (chain)\npicking this:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  closed {x. f x \\<le> y}\n  y = \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n  y = - \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}", "have \"closed {x. f(x)\\<le>y}\""], ["proof (prove)\nusing this:\n  y \\<noteq> \\<infinity> \\<and> y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  closed {x. f x \\<le> y}\n  y = \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n  y = - \\<infinity> \\<Longrightarrow> closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> y}", "by blast"], ["proof (state)\nthis:\n  closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "}"], ["proof (state)\nthis:\n  closed {x. f x \\<le> ?y2}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "hence \"?lhs\""], ["proof (prove)\nusing this:\n  closed {x. f x \\<le> ?y2}\n\ngoal (1 subgoal):\n 1. \\<forall>y. closed {x. f x \\<le> y}", "by auto"], ["proof (state)\nthis:\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "}"], ["proof (state)\nthis:\n  \\<forall>r. closed {x. f x \\<le> ereal r} \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "from this"], ["proof (chain)\npicking this:\n  \\<forall>r. closed {x. f x \\<le> ereal r} \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>r. closed {x. f x \\<le> ereal r} \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. (\\<forall>y. closed {x. f x \\<le> y}) =\n    (\\<forall>r. closed {x. f x \\<le> ereal r})", "by auto"], ["proof (state)\nthis:\n  (\\<forall>y. closed {x. f x \\<le> y}) =\n  (\\<forall>r. closed {x. f x \\<le> ereal r})\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_iff:\nfixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(lsc f \\<longleftrightarrow> (\\<forall>y. closed {x. f(x)\\<le>y})) \\<and> (lsc f \\<longleftrightarrow> closed (Epigraph UNIV f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"lsc f\""], ["proof (state)\nthis:\n  lsc f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  lsc f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix z z0"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume a: \"\\<forall>n. z n \\<in> (Epigraph UNIV f) \\<and> z \\<longlonglongrightarrow> z0\""], ["proof (state)\nthis:\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "have \"z n : (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z n \\<in> Epigraph UNIV f", "using a"], ["proof (prove)\nusing this:\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. z n \\<in> Epigraph UNIV f", "by auto"], ["proof (state)\nthis:\n  z n \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f (fst (z n)) \\<le> ereal(snd (z n))\""], ["proof (prove)\nusing this:\n  z n \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. f (fst (z n)) \\<le> ereal (snd (z n))", "using a"], ["proof (prove)\nusing this:\n  z n \\<in> Epigraph UNIV f\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. f (fst (z n)) \\<le> ereal (snd (z n))", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  z n \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}\n  \\<forall>n.\n     z n\n     \\<in> {xy.\n            fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<and>\n     z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. f (fst (z n)) \\<le> ereal (snd (z n))", "by auto"], ["proof (state)\nthis:\n  f (fst (z n)) \\<le> ereal (snd (z n))\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"\\<exists>xn cn. z n = (xn, cn) \\<and> f(xn)\\<le>ereal cn\""], ["proof (prove)\nusing this:\n  f (fst (z n)) \\<le> ereal (snd (z n))\n\ngoal (1 subgoal):\n 1. \\<exists>xn cn. z n = (xn, cn) \\<and> f xn \\<le> ereal cn", "apply (rule_tac x=\"fst (z n)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (fst (z n)) \\<le> ereal (snd (z n)) \\<Longrightarrow>\n    \\<exists>cn. z n = (fst (z n), cn) \\<and> f (fst (z n)) \\<le> ereal cn", "apply (rule_tac x=\"snd (z n)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (fst (z n)) \\<le> ereal (snd (z n)) \\<Longrightarrow>\n    z n = (fst (z n), snd (z n)) \\<and>\n    f (fst (z n)) \\<le> ereal (snd (z n))", "by auto"], ["proof (state)\nthis:\n  \\<exists>xn cn. z n = (xn, cn) \\<and> f xn \\<le> ereal cn\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<exists>xn cn. z ?n2 = (xn, cn) \\<and> f xn \\<le> ereal cn\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  \\<exists>xn cn. z ?n2 = (xn, cn) \\<and> f xn \\<le> ereal cn", "obtain x c where xc_def: \"\\<forall>n. z n = (x n, c n) \\<and> f(x n)\\<le>ereal (c n)\""], ["proof (prove)\nusing this:\n  \\<exists>xn cn. z ?n2 = (xn, cn) \\<and> f xn \\<le> ereal cn\n\ngoal (1 subgoal):\n 1. (\\<And>x c.\n        \\<forall>n.\n           z n = (x n, c n) \\<and>\n           f (x n) \\<le> ereal (c n) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this a"], ["proof (chain)\npicking this:\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0", "have \"\\<exists>x0 c0. z0 = (x0, c0) \\<and> x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\""], ["proof (prove)\nusing this:\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n  \\<forall>n.\n     z n \\<in> Epigraph UNIV f \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. \\<exists>x0 c0.\n       z0 = (x0, c0) \\<and>\n       x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0", "apply (rule_tac x=\"fst z0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n);\n     \\<forall>n.\n        z n \\<in> Epigraph UNIV f \\<and>\n        z \\<longlonglongrightarrow> z0\\<rbrakk>\n    \\<Longrightarrow> \\<exists>c0.\n                         z0 = (fst z0, c0) \\<and>\n                         x \\<longlonglongrightarrow> fst z0 \\<and>\n                         c \\<longlonglongrightarrow> c0", "apply (rule_tac x=\"snd z0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n);\n     \\<forall>n.\n        z n \\<in> Epigraph UNIV f \\<and>\n        z \\<longlonglongrightarrow> z0\\<rbrakk>\n    \\<Longrightarrow> z0 = (fst z0, snd z0) \\<and>\n                      x \\<longlonglongrightarrow> fst z0 \\<and>\n                      c \\<longlonglongrightarrow> snd z0", "using tendsto_fst[of z z0] tendsto_snd[of z z0]"], ["proof (prove)\nusing this:\n  (z \\<longlongrightarrow> z0) ?F \\<Longrightarrow>\n  ((\\<lambda>x. fst (z x)) \\<longlongrightarrow> fst z0) ?F\n  (z \\<longlongrightarrow> z0) ?F \\<Longrightarrow>\n  ((\\<lambda>x. snd (z x)) \\<longlongrightarrow> snd z0) ?F\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n);\n     \\<forall>n.\n        z n \\<in> Epigraph UNIV f \\<and>\n        z \\<longlonglongrightarrow> z0\\<rbrakk>\n    \\<Longrightarrow> z0 = (fst z0, snd z0) \\<and>\n                      x \\<longlonglongrightarrow> fst z0 \\<and>\n                      c \\<longlonglongrightarrow> snd z0", "by auto"], ["proof (state)\nthis:\n  \\<exists>x0 c0.\n     z0 = (x0, c0) \\<and>\n     x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  \\<exists>x0 c0.\n     z0 = (x0, c0) \\<and>\n     x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0", "obtain x0 c0 where xc0_def: \"z0 = (x0, c0) \\<and> x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\""], ["proof (prove)\nusing this:\n  \\<exists>x0 c0.\n     z0 = (x0, c0) \\<and>\n     x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. (\\<And>x0 c0.\n        z0 = (x0, c0) \\<and>\n        x \\<longlonglongrightarrow> x0 \\<and>\n        c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  z0 = (x0, c0) \\<and>\n  x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f(x0)\\<le>ereal c0\""], ["proof (prove)\nusing this:\n  z0 = (x0, c0) \\<and>\n  x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. f x0 \\<le> ereal c0", "apply (subst lsc_sequentially_mem[of x0 f x \"ereal \\<circ> c\" \"ereal c0\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    lsc_at x0 f\n 2. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    (ereal \\<circ> c) \\<longlonglongrightarrow> ereal c0\n 4. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    \\<forall>n. f (x n) \\<le> (ereal \\<circ> c) n\n 5. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    True", "using \\<open>lsc f\\<close> xc_def"], ["proof (prove)\nusing this:\n  lsc f\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n\ngoal (5 subgoals):\n 1. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    lsc_at x0 f\n 2. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    (ereal \\<circ> c) \\<longlonglongrightarrow> ereal c0\n 4. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    \\<forall>n. f (x n) \\<le> (ereal \\<circ> c) n\n 5. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    True", "unfolding lsc_def"], ["proof (prove)\nusing this:\n  \\<forall>x. lsc_at x f\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n\ngoal (5 subgoals):\n 1. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    lsc_at x0 f\n 2. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    (ereal \\<circ> c) \\<longlonglongrightarrow> ereal c0\n 4. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    \\<forall>n. f (x n) \\<le> (ereal \\<circ> c) n\n 5. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    True", "unfolding o_def"], ["proof (prove)\nusing this:\n  \\<forall>x. lsc_at x f\n  \\<forall>n. z n = (x n, c n) \\<and> f (x n) \\<le> ereal (c n)\n\ngoal (5 subgoals):\n 1. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    lsc_at x0 f\n 2. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    x \\<longlonglongrightarrow> x0\n 3. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    (\\<lambda>x. ereal (c x)) \\<longlonglongrightarrow> ereal c0\n 4. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    \\<forall>n. f (x n) \\<le> ereal (c n)\n 5. z0 = (x0, c0) \\<and>\n    x \\<longlonglongrightarrow> x0 \\<and>\n    c \\<longlonglongrightarrow> c0 \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> ereal c0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"z0 : (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal c0\n\ngoal (1 subgoal):\n 1. z0 \\<in> Epigraph UNIV f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal c0\n\ngoal (1 subgoal):\n 1. z0 \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using xc0_def"], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal c0\n  z0 = (x0, c0) \\<and>\n  x \\<longlonglongrightarrow> x0 \\<and> c \\<longlonglongrightarrow> c0\n\ngoal (1 subgoal):\n 1. z0 \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  z0 \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<forall>n.\n     ?z2 n \\<in> Epigraph UNIV f \\<and>\n     ?z2 \\<longlonglongrightarrow> ?z0.2 \\<Longrightarrow>\n  ?z0.2 \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"closed (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  \\<forall>n.\n     ?z2 n \\<in> Epigraph UNIV f \\<and>\n     ?z2 \\<longlonglongrightarrow> ?z0.2 \\<Longrightarrow>\n  ?z0.2 \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. closed (Epigraph UNIV f)", "by (simp add: closed_sequential_limits)"], ["proof (state)\nthis:\n  closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  lsc f \\<Longrightarrow> closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  lsc f \\<Longrightarrow> closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  lsc f \\<Longrightarrow> closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"closed (Epigraph UNIV f)\""], ["proof (state)\nthis:\n  closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence *: \"\\<forall>x l. (\\<forall>n. f (fst (x n)) \\<le> ereal(snd (x n))) \\<and> x \\<longlonglongrightarrow> l \\<longrightarrow>\n     f (fst l) \\<le> ereal(snd l)\""], ["proof (prove)\nusing this:\n  closed (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x l.\n       (\\<forall>n. f (fst (x n)) \\<le> ereal (snd (x n))) \\<and>\n       x \\<longlonglongrightarrow> l \\<longrightarrow>\n       f (fst l) \\<le> ereal (snd l)", "unfolding Epigraph_def closed_sequential_limits"], ["proof (prove)\nusing this:\n  \\<forall>x l.\n     (\\<forall>n.\n         x n\n         \\<in> {xy.\n                fst xy \\<in> UNIV \\<and>\n                f (fst xy) \\<le> ereal (snd xy)}) \\<and>\n     x \\<longlonglongrightarrow> l \\<longrightarrow>\n     l \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. \\<forall>x l.\n       (\\<forall>n. f (fst (x n)) \\<le> ereal (snd (x n))) \\<and>\n       x \\<longlonglongrightarrow> l \\<longrightarrow>\n       f (fst l) \\<le> ereal (snd l)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x l.\n     (\\<forall>n. f (fst (x n)) \\<le> ereal (snd (x n))) \\<and>\n     x \\<longlonglongrightarrow> l \\<longrightarrow>\n     f (fst l) \\<le> ereal (snd l)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<forall>x l.\n     (\\<forall>n. f (fst (x n)) \\<le> ereal (snd (x n))) \\<and>\n     x \\<longlonglongrightarrow> l \\<longrightarrow>\n     f (fst l) \\<le> ereal (snd l)\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix r :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix z z0"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume a: \"\\<forall>n. f(z n)\\<le>ereal r \\<and> z \\<longlonglongrightarrow> z0\""], ["proof (state)\nthis:\n  \\<forall>n. f (z n) \\<le> ereal r \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f(z0)\\<le>ereal r\""], ["proof (prove)\nusing this:\n  \\<forall>n. f (z n) \\<le> ereal r \\<and> z \\<longlonglongrightarrow> z0\n\ngoal (1 subgoal):\n 1. f z0 \\<le> ereal r", "using *[rule_format, of \"(\\<lambda>n. (z n,r))\" \"(z0,r)\"]\n         tendsto_Pair[of z z0]"], ["proof (prove)\nusing this:\n  \\<forall>n. f (z n) \\<le> ereal r \\<and> z \\<longlonglongrightarrow> z0\n  (\\<forall>n. f (fst (z n, r)) \\<le> ereal (snd (z n, r))) \\<and>\n  (\\<lambda>n. (z n, r)) \\<longlonglongrightarrow> (z0, r) \\<Longrightarrow>\n  f (fst (z0, r)) \\<le> ereal (snd (z0, r))\n  \\<lbrakk>(z \\<longlongrightarrow> z0) ?F;\n   (?g \\<longlongrightarrow> ?b) ?F\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x. (z x, ?g x)) \\<longlongrightarrow>\n                     (z0, ?b))\n                     ?F\n\ngoal (1 subgoal):\n 1. f z0 \\<le> ereal r", "by auto"], ["proof (state)\nthis:\n  f z0 \\<le> ereal r\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<forall>n.\n     f (?z2 n) \\<le> ereal r \\<and>\n     ?z2 \\<longlonglongrightarrow> ?z0.2 \\<Longrightarrow>\n  f ?z0.2 \\<le> ereal r\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"closed {x. f(x)\\<le>ereal r}\""], ["proof (prove)\nusing this:\n  \\<forall>n.\n     f (?z2 n) \\<le> ereal r \\<and>\n     ?z2 \\<longlonglongrightarrow> ?z0.2 \\<Longrightarrow>\n  f ?z0.2 \\<le> ereal r\n\ngoal (1 subgoal):\n 1. closed {x. f x \\<le> ereal r}", "by (simp add: closed_sequential_limits)"], ["proof (state)\nthis:\n  closed {x. f x \\<le> ereal r}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  closed {x. f x \\<le> ereal ?r2}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"\\<forall>y. closed {x. f(x)\\<le>y}\""], ["proof (prove)\nusing this:\n  closed {x. f x \\<le> ereal ?r2}\n\ngoal (1 subgoal):\n 1. \\<forall>y. closed {x. f x \\<le> y}", "using ereal_closed_levels"], ["proof (prove)\nusing this:\n  closed {x. f x \\<le> ereal ?r2}\n  (\\<forall>y. closed {x. ?f x \\<le> y}) =\n  (\\<forall>r. closed {x. ?f x \\<le> ereal r})\n\ngoal (1 subgoal):\n 1. \\<forall>y. closed {x. f x \\<le> y}", "by auto"], ["proof (state)\nthis:\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  closed (Epigraph UNIV f) \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  closed (Epigraph UNIV f) \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  closed (Epigraph UNIV f) \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume a: \"\\<forall>y. closed {x. f(x)\\<le> y}\""], ["proof (state)\nthis:\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix x0"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix x l"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"x \\<longlonglongrightarrow> x0\" \"(f \\<circ> x) \\<longlonglongrightarrow> l\""], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  x \\<longlonglongrightarrow> x0\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"l = \\<infinity>\""], ["proof (state)\nthis:\n  l = \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  l = \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume mi: \"l = -\\<infinity>\""], ["proof (state)\nthis:\n  l = - \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  l = - \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix B :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "obtain N where N_def: \"\\<forall>n\\<ge>N. f(x n)\\<le>ereal B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<le> ereal B \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using mi \\<open>(f \\<circ> x) \\<longlonglongrightarrow> l\\<close> Lim_MInfty[of \"f \\<circ> x\"]"], ["proof (prove)\nusing this:\n  l = - \\<infinity>\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n  (f \\<circ> x) \\<longlonglongrightarrow> - \\<infinity> =\n  (\\<forall>B. \\<exists>N. \\<forall>n\\<ge>N. (f \\<circ> x) n \\<le> ereal B)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<le> ereal B \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f (x n) \\<le> ereal B\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f (x n) \\<le> ereal B\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix d"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"(d::real)>0\""], ["proof (state)\nthis:\n  0 < d\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  0 < d", "obtain N1 where N1_def: \"\\<forall>n\\<ge>N1. dist (x n) x0 < d\""], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>x \\<longlonglongrightarrow> x0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>r>0. \\<exists>no. \\<forall>n\\<ge>no. dist (x n) x0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N1. dist (x n) x0 < d\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"\\<exists>y. dist y x0 < d \\<and> y : {x. f(x)\\<le>ereal B}\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N1. dist (x n) x0 < d\n\ngoal (1 subgoal):\n 1. \\<exists>y. dist y x0 < d \\<and> y \\<in> {x. f x \\<le> ereal B}", "apply (rule_tac x=\"x (max N N1)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n    dist (x (max N N1)) x0 < d \\<and>\n    x (max N N1) \\<in> {x. f x \\<le> ereal B}", "using N_def"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. f (x n) \\<le> ereal B\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n    dist (x (max N N1)) x0 < d \\<and>\n    x (max N N1) \\<in> {x. f x \\<le> ereal B}", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. dist y x0 < d \\<and> y \\<in> {x. f x \\<le> ereal B}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  0 < ?d2 \\<Longrightarrow>\n  \\<exists>y. dist y x0 < ?d2 \\<and> y \\<in> {x. f x \\<le> ereal B}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"x0 : closure {x. f(x)\\<le>ereal B}\""], ["proof (prove)\nusing this:\n  0 < ?d2 \\<Longrightarrow>\n  \\<exists>y. dist y x0 < ?d2 \\<and> y \\<in> {x. f x \\<le> ereal B}\n\ngoal (1 subgoal):\n 1. x0 \\<in> closure {x. f x \\<le> ereal B}", "apply (subst closure_approachable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<Longrightarrow>\n        \\<exists>y.\n           dist y x0 < d \\<and>\n           y \\<in> {x. f x \\<le> ereal B}) \\<Longrightarrow>\n    \\<forall>e>0. \\<exists>y\\<in>{x. f x \\<le> ereal B}. dist y x0 < e", "by auto"], ["proof (state)\nthis:\n  x0 \\<in> closure {x. f x \\<le> ereal B}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f x0 \\<le> ereal B\""], ["proof (prove)\nusing this:\n  x0 \\<in> closure {x. f x \\<le> ereal B}\n\ngoal (1 subgoal):\n 1. f x0 \\<le> ereal B", "using a"], ["proof (prove)\nusing this:\n  x0 \\<in> closure {x. f x \\<le> ereal B}\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. f x0 \\<le> ereal B", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> ereal B\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  f x0 \\<le> ereal ?B2\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal ?B2\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "using ereal_bot[of \"f x0\"]"], ["proof (prove)\nusing this:\n  f x0 \\<le> ereal ?B2\n  (\\<And>B. f x0 \\<le> ereal B) \\<Longrightarrow> f x0 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume fin: \"\\<bar>l\\<bar> \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix e"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume e_def: \"(e :: ereal)>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  0 < e", "obtain N where N_def: \"\\<forall>n\\<ge>N. f(x n) : {l - e <..< l + e}\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (subst tendsto_obtains_N[of \"f \\<circ> x\" l \"{l - e <..< l + e}\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> x) \\<longlonglongrightarrow> l\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> open {l - e<..<l + e}\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> l \\<in> {l - e<..<l + e}\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N.\n                      f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                   thesis;\n        0 < e;\n        \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> {l - e<..<l + e}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> True", "using fin e_def ereal_between \\<open>(f \\<circ> x) \\<longlonglongrightarrow> l\\<close>"], ["proof (prove)\nusing this:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity>\n  0 < e\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x - ?e < ?x\n  \\<lbrakk>\\<bar>?x\\<bar> \\<noteq> \\<infinity>; 0 < ?e\\<rbrakk>\n  \\<Longrightarrow> ?x < ?x + ?e\n  (f \\<circ> x) \\<longlonglongrightarrow> l\n\ngoal (5 subgoals):\n 1. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> (f \\<circ> x) \\<longlonglongrightarrow> l\n 2. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> open {l - e<..<l + e}\n 3. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> l \\<in> {l - e<..<l + e}\n 4. \\<And>N.\n       \\<lbrakk>\\<And>N.\n                   \\<forall>n\\<ge>N.\n                      f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                   thesis;\n        0 < e;\n        \\<forall>n\\<ge>N. (f \\<circ> x) n \\<in> {l - e<..<l + e}\\<rbrakk>\n       \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>N.\n                \\<forall>n\\<ge>N.\n                   f (x n) \\<in> {l - e<..<l + e} \\<Longrightarrow>\n                thesis;\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence *: \"\\<forall>n\\<ge>N. x n : {x. f(x)\\<le>l+e}\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N. x n \\<in> {x. f x \\<le> l + e}", "using N_def"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n  \\<forall>n\\<ge>N. f (x n) \\<in> {l - e<..<l + e}\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N. x n \\<in> {x. f x \\<le> l + e}", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. x n \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N. x n \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "fix d"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "assume \"(d::real)>0\""], ["proof (state)\nthis:\n  0 < d\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  0 < d", "obtain N1 where N1_def: \"\\<forall>n\\<ge>N1. dist (x n) x0 < d\""], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>x \\<longlonglongrightarrow> x0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n  x \\<longlonglongrightarrow> x0\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < d\n  \\<forall>r>0. \\<exists>no. \\<forall>n\\<ge>no. dist (x n) x0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<forall>n\\<ge>N1. dist (x n) x0 < d\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"\\<exists>y. dist y x0 < d \\<and> y : {x. f(x)\\<le>l+e}\""], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N1. dist (x n) x0 < d\n\ngoal (1 subgoal):\n 1. \\<exists>y. dist y x0 < d \\<and> y \\<in> {x. f x \\<le> l + e}", "apply (rule_tac x=\"x (max N N1)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n    dist (x (max N N1)) x0 < d \\<and>\n    x (max N N1) \\<in> {x. f x \\<le> l + e}", "using *"], ["proof (prove)\nusing this:\n  \\<forall>n\\<ge>N. x n \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N1. dist (x n) x0 < d \\<Longrightarrow>\n    dist (x (max N N1)) x0 < d \\<and>\n    x (max N N1) \\<in> {x. f x \\<le> l + e}", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. dist y x0 < d \\<and> y \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  0 < ?d2 \\<Longrightarrow>\n  \\<exists>y. dist y x0 < ?d2 \\<and> y \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"x0 : closure {x. f(x)\\<le>l+e}\""], ["proof (prove)\nusing this:\n  0 < ?d2 \\<Longrightarrow>\n  \\<exists>y. dist y x0 < ?d2 \\<and> y \\<in> {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. x0 \\<in> closure {x. f x \\<le> l + e}", "apply (subst closure_approachable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<Longrightarrow>\n        \\<exists>y.\n           dist y x0 < d \\<and>\n           y \\<in> {x. f x \\<le> l + e}) \\<Longrightarrow>\n    \\<forall>ea>0. \\<exists>y\\<in>{x. f x \\<le> l + e}. dist y x0 < ea", "by auto"], ["proof (state)\nthis:\n  x0 \\<in> closure {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f x0 \\<le> l+e\""], ["proof (prove)\nusing this:\n  x0 \\<in> closure {x. f x \\<le> l + e}\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l + e", "using a"], ["proof (prove)\nusing this:\n  x0 \\<in> closure {x. f x \\<le> l + e}\n  \\<forall>y. closed {x. f x \\<le> y}\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l + e", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l + e\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "using ereal_le_epsilon"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> f x0 \\<le> l + ?e2\n  (\\<And>e. 0 < e \\<Longrightarrow> ?x \\<le> ?y + e) \\<Longrightarrow>\n  ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "ultimately"], ["proof (chain)\npicking this:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l", "have \"f x0 \\<le> l\""], ["proof (prove)\nusing this:\n  l = \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  l = - \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n  \\<bar>l\\<bar> \\<noteq> \\<infinity> \\<Longrightarrow> f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. f x0 \\<le> l", "by blast"], ["proof (state)\nthis:\n  f x0 \\<le> l\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"lsc_at x0 f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (1 subgoal):\n 1. lsc_at x0 f", "unfolding lsc_at_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<longlonglongrightarrow> x0;\n   (f \\<circ> ?x2) \\<longlonglongrightarrow> ?l2\\<rbrakk>\n  \\<Longrightarrow> f x0 \\<le> ?l2\n\ngoal (1 subgoal):\n 1. \\<forall>X l.\n       X \\<longlonglongrightarrow> x0 \\<and>\n       (f \\<circ> X) \\<longlonglongrightarrow> l \\<longrightarrow>\n       f x0 \\<le> l", "by auto"], ["proof (state)\nthis:\n  lsc_at x0 f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  lsc_at ?x0.2 f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "hence \"lsc f\""], ["proof (prove)\nusing this:\n  lsc_at ?x0.2 f\n\ngoal (1 subgoal):\n 1. lsc f", "unfolding lsc_def"], ["proof (prove)\nusing this:\n  lsc_at ?x0.2 f\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_at x f", "by auto"], ["proof (state)\nthis:\n  lsc f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  \\<forall>y. closed {x. f x \\<le> y} \\<Longrightarrow> lsc f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "ultimately"], ["proof (chain)\npicking this:\n  lsc f \\<Longrightarrow> closed (Epigraph UNIV f)\n  closed (Epigraph UNIV f) \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n  \\<forall>y. closed {x. f x \\<le> y} \\<Longrightarrow> lsc f", "show ?thesis"], ["proof (prove)\nusing this:\n  lsc f \\<Longrightarrow> closed (Epigraph UNIV f)\n  closed (Epigraph UNIV f) \\<Longrightarrow>\n  \\<forall>y. closed {x. f x \\<le> y}\n  \\<forall>y. closed {x. f x \\<le> y} \\<Longrightarrow> lsc f\n\ngoal (1 subgoal):\n 1. lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n    lsc f = closed (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  lsc f = (\\<forall>y. closed {x. f x \\<le> y}) \\<and>\n  lsc f = closed (Epigraph UNIV f)\n\ngoal:\nNo subgoals!", "qed"], ["", "definition lsc_hull :: \"('a::metric_space \\<Rightarrow> ereal) \\<Rightarrow> ('a::metric_space \\<Rightarrow> ereal)\" where\n  \"lsc_hull f = (SOME g. Epigraph UNIV g = closure(Epigraph UNIV f))\""], ["", "lemma epigraph_mono:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(x,y):Epigraph UNIV f \\<and> y\\<le>z \\<longrightarrow> (x,z):Epigraph UNIV f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y) \\<in> Epigraph UNIV f \\<and> y \\<le> z \\<longrightarrow>\n    (x, z) \\<in> Epigraph UNIV f", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> {xy.\n           fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<and>\n    y \\<le> z \\<longrightarrow>\n    (x, z)\n    \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f x \\<le> ereal y; y \\<le> z\\<rbrakk>\n    \\<Longrightarrow> f x \\<le> ereal z", "using ereal_less_eq(3)[of y z] order_trans_rules(23)"], ["proof (prove)\nusing this:\n  (ereal y \\<le> ereal z) = (y \\<le> z)\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n\ngoal (1 subgoal):\n 1. \\<lbrakk>f x \\<le> ereal y; y \\<le> z\\<rbrakk>\n    \\<Longrightarrow> f x \\<le> ereal z", "by blast"], ["", "lemma closed_epigraph_lines:\nfixes S :: \"('a::metric_space * 'b::metric_space) set\"\nassumes \"closed S\"\nshows \"closed {z. (x, z) : S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "assume z_def: \"z : closure {z. (x, z) : S}\""], ["proof (state)\nthis:\n  z \\<in> closure {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "{"], ["proof (state)\nthis:\n  z \\<in> closure {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "fix e :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "from this"], ["proof (chain)\npicking this:\n  0 < e", "obtain y where y_def: \"(x,y) : S \\<and> dist y z < e\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        (x, y) \\<in> S \\<and> dist y z < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using closure_approachable[of z \"{z. (x, z) : S}\"] z_def"], ["proof (prove)\nusing this:\n  0 < e\n  (z \\<in> closure {z. (x, z) \\<in> S}) =\n  (\\<forall>e>0. \\<exists>y\\<in>{z. (x, z) \\<in> S}. dist y z < e)\n  z \\<in> closure {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        (x, y) \\<in> S \\<and> dist y z < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> S \\<and> dist y z < e\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "moreover"], ["proof (state)\nthis:\n  (x, y) \\<in> S \\<and> dist y z < e\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "have \"dist (x,y) (x,z) = dist y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (x, y) (x, z) = dist y z", "unfolding dist_prod_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt\n     ((dist (fst (x, y)) (fst (x, z)))\\<^sup>2 +\n      (dist (snd (x, y)) (snd (x, z)))\\<^sup>2) =\n    dist y z", "by auto"], ["proof (state)\nthis:\n  dist (x, y) (x, z) = dist y z\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "ultimately"], ["proof (chain)\npicking this:\n  (x, y) \\<in> S \\<and> dist y z < e\n  dist (x, y) (x, z) = dist y z", "have \"\\<exists>s. s \\<in> S \\<and> dist s (x,z) < e\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> S \\<and> dist y z < e\n  dist (x, y) (x, z) = dist y z\n\ngoal (1 subgoal):\n 1. \\<exists>s. s \\<in> S \\<and> dist s (x, z) < e", "apply(rule_tac x=\"(x,y)\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>(x, y) \\<in> S \\<and> dist y z < e;\n     dist (x, y) (x, z) = dist y z\\<rbrakk>\n    \\<Longrightarrow> (x, y) \\<in> S \\<and> dist (x, y) (x, z) < e", "by auto"], ["proof (state)\nthis:\n  \\<exists>s. s \\<in> S \\<and> dist s (x, z) < e\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow> \\<exists>s. s \\<in> S \\<and> dist s (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "hence \"(x,z):S\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> \\<exists>s. s \\<in> S \\<and> dist s (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> S", "using closed_approachable[of S \"(x,z)\"] assms"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> \\<exists>s. s \\<in> S \\<and> dist s (x, z) < ?e2\n  closed S \\<Longrightarrow>\n  (\\<forall>e>0. \\<exists>y\\<in>S. dist y (x, z) < e) = ((x, z) \\<in> S)\n  closed S\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> S", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> S\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "}"], ["proof (state)\nthis:\n  ?z2 \\<in> closure {z. (x, z) \\<in> S} \\<Longrightarrow> (x, ?z2) \\<in> S\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "hence \"closure {z. (x, z) : S} \\<le> {z. (x, z) : S}\""], ["proof (prove)\nusing this:\n  ?z2 \\<in> closure {z. (x, z) \\<in> S} \\<Longrightarrow> (x, ?z2) \\<in> S\n\ngoal (1 subgoal):\n 1. closure {z. (x, z) \\<in> S} \\<subseteq> {z. (x, z) \\<in> S}", "by blast"], ["proof (state)\nthis:\n  closure {z. (x, z) \\<in> S} \\<subseteq> {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "from this"], ["proof (chain)\npicking this:\n  closure {z. (x, z) \\<in> S} \\<subseteq> {z. (x, z) \\<in> S}", "show ?thesis"], ["proof (prove)\nusing this:\n  closure {z. (x, z) \\<in> S} \\<subseteq> {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "using closure_subset_eq"], ["proof (prove)\nusing this:\n  closure {z. (x, z) \\<in> S} \\<subseteq> {z. (x, z) \\<in> S}\n  (closure ?S \\<subseteq> ?S) = closed ?S\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "by auto"], ["proof (state)\nthis:\n  closed {z. (x, z) \\<in> S}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mono_epigraph:\n  fixes S :: \"('a::metric_space * real) set\"\n  assumes mono: \"\\<forall>x y z. (x,y):S \\<and> y\\<le>z \\<longrightarrow> (x,z):S\"\n  assumes \"closed S\"\n  shows \"\\<exists>g. ((Epigraph UNIV g) = S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "have \"closed {z. (x, z) : S}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "using \\<open>closed S\\<close> closed_epigraph_lines"], ["proof (prove)\nusing this:\n  closed S\n  closed ?S \\<Longrightarrow> closed {z. (?x, z) \\<in> ?S}\n\ngoal (1 subgoal):\n 1. closed {z. (x, z) \\<in> S}", "by auto"], ["proof (state)\nthis:\n  closed {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "hence \"\\<exists>a. {z. (x, z) : S} = {z. a \\<le> ereal z}\""], ["proof (prove)\nusing this:\n  closed {z. (x, z) \\<in> S}\n\ngoal (1 subgoal):\n 1. \\<exists>a. {z. (x, z) \\<in> S} = {z. a \\<le> ereal z}", "apply (subst mono_closed_ereal)"], ["proof (prove)\ngoal (3 subgoals):\n 1. closed {z. (x, z) \\<in> S} \\<Longrightarrow>\n    \\<forall>y z.\n       y \\<in> {z. (x, z) \\<in> S} \\<and> y \\<le> z \\<longrightarrow>\n       z \\<in> {z. (x, z) \\<in> S}\n 2. closed {z. (x, z) \\<in> S} \\<Longrightarrow> closed {z. (x, z) \\<in> S}\n 3. closed {z. (x, z) \\<in> S} \\<Longrightarrow> True", "using mono"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> S \\<and> y \\<le> z \\<longrightarrow> (x, z) \\<in> S\n\ngoal (3 subgoals):\n 1. closed {z. (x, z) \\<in> S} \\<Longrightarrow>\n    \\<forall>y z.\n       y \\<in> {z. (x, z) \\<in> S} \\<and> y \\<le> z \\<longrightarrow>\n       z \\<in> {z. (x, z) \\<in> S}\n 2. closed {z. (x, z) \\<in> S} \\<Longrightarrow> closed {z. (x, z) \\<in> S}\n 3. closed {z. (x, z) \\<in> S} \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  \\<exists>a. {z. (x, z) \\<in> S} = {z. a \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "}"], ["proof (state)\nthis:\n  \\<exists>a. {z. (?x2, z) \\<in> S} = {z. a \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "from this"], ["proof (chain)\npicking this:\n  \\<exists>a. {z. (?x2, z) \\<in> S} = {z. a \\<le> ereal z}", "obtain g where g_def: \"\\<forall>x. {z. (x, z) : S} = {z. g x \\<le> ereal z}\""], ["proof (prove)\nusing this:\n  \\<exists>a. {z. (?x2, z) \\<in> S} = {z. a \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<forall>x.\n           {z. (x, z) \\<in> S} = {z. g x \\<le> ereal z} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  \\<forall>x. {z. (x, z) \\<in> S} = {z. g x \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "{"], ["proof (state)\nthis:\n  \\<forall>x. {z. (x, z) \\<in> S} = {z. g x \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "fix s"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "have \"s:S \\<longleftrightarrow> (fst s, snd s) : S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (s \\<in> S) = ((fst s, snd s) \\<in> S)", "by auto"], ["proof (state)\nthis:\n  (s \\<in> S) = ((fst s, snd s) \\<in> S)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "also"], ["proof (state)\nthis:\n  (s \\<in> S) = ((fst s, snd s) \\<in> S)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "have \"\\<dots> \\<longleftrightarrow> g(fst s) \\<le> ereal (snd s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((fst s, snd s) \\<in> S) = (g (fst s) \\<le> ereal (snd s))", "using g_def[rule_format, of \"fst s\"]"], ["proof (prove)\nusing this:\n  {z. (fst s, z) \\<in> S} = {z. g (fst s) \\<le> ereal z}\n\ngoal (1 subgoal):\n 1. ((fst s, snd s) \\<in> S) = (g (fst s) \\<le> ereal (snd s))", "by blast"], ["proof (state)\nthis:\n  ((fst s, snd s) \\<in> S) = (g (fst s) \\<le> ereal (snd s))\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "finally"], ["proof (chain)\npicking this:\n  (s \\<in> S) = (g (fst s) \\<le> ereal (snd s))", "have \"s:S \\<longleftrightarrow> g(fst s) \\<le> ereal (snd s)\""], ["proof (prove)\nusing this:\n  (s \\<in> S) = (g (fst s) \\<le> ereal (snd s))\n\ngoal (1 subgoal):\n 1. (s \\<in> S) = (g (fst s) \\<le> ereal (snd s))", "by auto"], ["proof (state)\nthis:\n  (s \\<in> S) = (g (fst s) \\<le> ereal (snd s))\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "}"], ["proof (state)\nthis:\n  (?s2 \\<in> S) = (g (fst ?s2) \\<le> ereal (snd ?s2))\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "hence \"(Epigraph UNIV g) = S\""], ["proof (prove)\nusing this:\n  (?s2 \\<in> S) = (g (fst ?s2) \\<le> ereal (snd ?s2))\n\ngoal (1 subgoal):\n 1. Epigraph UNIV g = S", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (?s2 \\<in> S) = (g (fst ?s2) \\<le> ereal (snd ?s2))\n\ngoal (1 subgoal):\n 1. {xy. fst xy \\<in> UNIV \\<and> g (fst xy) \\<le> ereal (snd xy)} = S", "by auto"], ["proof (state)\nthis:\n  Epigraph UNIV g = S\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "from this"], ["proof (chain)\npicking this:\n  Epigraph UNIV g = S", "show ?thesis"], ["proof (prove)\nusing this:\n  Epigraph UNIV g = S\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = S", "by auto"], ["proof (state)\nthis:\n  \\<exists>g. Epigraph UNIV g = S\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_exists:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "fix x y z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "assume xy: \"(x,y):closure (Epigraph UNIV f) \\<and> y\\<le>z\""], ["proof (state)\nthis:\n  (x, y) \\<in> closure (Epigraph UNIV f) \\<and> y \\<le> z\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "{"], ["proof (state)\nthis:\n  (x, y) \\<in> closure (Epigraph UNIV f) \\<and> y \\<le> z\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "fix e :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "hence \"\\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e", "using xy closure_approachable[of \"(x,y)\" \"Epigraph UNIV f\"]"], ["proof (prove)\nusing this:\n  0 < e\n  (x, y) \\<in> closure (Epigraph UNIV f) \\<and> y \\<le> z\n  ((x, y) \\<in> closure (Epigraph UNIV f)) =\n  (\\<forall>e>0. \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e)\n\ngoal (1 subgoal):\n 1. \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e", "by auto"], ["proof (state)\nthis:\n  \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e", "obtain a b where ab: \"(a,b):Epigraph UNIV f \\<and> dist (a,b) (x,y) < e\""], ["proof (prove)\nusing this:\n  \\<exists>ya\\<in>Epigraph UNIV f. dist ya (x, y) < e\n\ngoal (1 subgoal):\n 1. (\\<And>a b.\n        (a, b) \\<in> Epigraph UNIV f \\<and>\n        dist (a, b) (x, y) < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (a, b) \\<in> Epigraph UNIV f \\<and> dist (a, b) (x, y) < e\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  (a, b) \\<in> Epigraph UNIV f \\<and> dist (a, b) (x, y) < e\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "have \"dist (a,b) (x,y) = dist (a,b+(z-y)) (x,z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (a, b) (x, y) = dist (a, b + (z - y)) (x, z)", "unfolding dist_prod_def dist_norm"], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt\n     ((dist (fst (a, b)) (fst (x, y)))\\<^sup>2 +\n      (norm (snd (a, b) - snd (x, y)))\\<^sup>2) =\n    sqrt\n     ((dist (fst (a, b + (z - y))) (fst (x, z)))\\<^sup>2 +\n      (norm (snd (a, b + (z - y)) - snd (x, z)))\\<^sup>2)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  dist (a, b) (x, y) = dist (a, b + (z - y)) (x, z)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "moreover"], ["proof (state)\nthis:\n  dist (a, b) (x, y) = dist (a, b + (z - y)) (x, z)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "have \"(a,b+(z-y)):Epigraph UNIV f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a, b + (z - y)) \\<in> Epigraph UNIV f", "apply (subst epigraph_mono[of _ b])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (a, b) \\<in> Epigraph UNIV f \\<and> b \\<le> b + (z - y)\n 2. True", "using ab xy"], ["proof (prove)\nusing this:\n  (a, b) \\<in> Epigraph UNIV f \\<and> dist (a, b) (x, y) < e\n  (x, y) \\<in> closure (Epigraph UNIV f) \\<and> y \\<le> z\n\ngoal (2 subgoals):\n 1. (a, b) \\<in> Epigraph UNIV f \\<and> b \\<le> b + (z - y)\n 2. True", "by auto"], ["proof (state)\nthis:\n  (a, b + (z - y)) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "ultimately"], ["proof (chain)\npicking this:\n  (a, b) \\<in> Epigraph UNIV f \\<and> dist (a, b) (x, y) < e\n  dist (a, b) (x, y) = dist (a, b + (z - y)) (x, z)\n  (a, b + (z - y)) \\<in> Epigraph UNIV f", "have \"\\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < e\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> Epigraph UNIV f \\<and> dist (a, b) (x, y) < e\n  dist (a, b) (x, y) = dist (a, b + (z - y)) (x, z)\n  (a, b + (z - y)) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. \\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < e", "by auto"], ["proof (state)\nthis:\n  \\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < e\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "hence \"(x,z):closure (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> closure (Epigraph UNIV f)", "using closure_approachable"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>w\\<in>Epigraph UNIV f. dist w (x, z) < ?e2\n  (?x \\<in> closure ?S) = (\\<forall>e>0. \\<exists>y\\<in>?S. dist y ?x < e)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "}"], ["proof (state)\nthis:\n  (?x2, ?y2) \\<in> closure (Epigraph UNIV f) \\<and>\n  ?y2 \\<le> ?z2 \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "hence \"\\<forall>x y z. (x,y) \\<in> closure (Epigraph UNIV f) \\<and> y\\<le>z \\<longrightarrow> (x,z) \\<in> closure (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  (?x2, ?y2) \\<in> closure (Epigraph UNIV f) \\<and>\n  ?y2 \\<le> ?z2 \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x y z.\n       (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n       y \\<le> z \\<longrightarrow>\n       (x, z) \\<in> closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x y z.\n     (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n     y \\<le> z \\<longrightarrow>\n     (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "from this"], ["proof (chain)\npicking this:\n  \\<forall>x y z.\n     (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n     y \\<le> z \\<longrightarrow>\n     (x, z) \\<in> closure (Epigraph UNIV f)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n     y \\<le> z \\<longrightarrow>\n     (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "using mono_epigraph[of \"closure (Epigraph UNIV f)\"]"], ["proof (prove)\nusing this:\n  \\<forall>x y z.\n     (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n     y \\<le> z \\<longrightarrow>\n     (x, z) \\<in> closure (Epigraph UNIV f)\n  \\<lbrakk>\\<forall>x y z.\n              (x, y) \\<in> closure (Epigraph UNIV f) \\<and>\n              y \\<le> z \\<longrightarrow>\n              (x, z) \\<in> closure (Epigraph UNIV f);\n   closed (closure (Epigraph UNIV f))\\<rbrakk>\n  \\<Longrightarrow> \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma epigraph_invertible:\n  assumes \"Epigraph UNIV f = Epigraph UNIV g\"\n  shows \"f=g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f = g", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. f = g", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f = g", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. f = g", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f = g", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. f = g", "have \"f x \\<le> ereal C \\<longleftrightarrow> (x,C) : Epigraph UNIV f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f x \\<le> ereal C) = ((x, C) \\<in> Epigraph UNIV f)", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (f x \\<le> ereal C) =\n    ((x, C)\n     \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)})", "by auto"], ["proof (state)\nthis:\n  (f x \\<le> ereal C) = ((x, C) \\<in> Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. f = g", "also"], ["proof (state)\nthis:\n  (f x \\<le> ereal C) = ((x, C) \\<in> Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. f = g", "have \"\\<dots> \\<longleftrightarrow> (x,C) : Epigraph UNIV g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, C) \\<in> Epigraph UNIV f) = ((x, C) \\<in> Epigraph UNIV g)", "using assms"], ["proof (prove)\nusing this:\n  Epigraph UNIV f = Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. ((x, C) \\<in> Epigraph UNIV f) = ((x, C) \\<in> Epigraph UNIV g)", "by auto"], ["proof (state)\nthis:\n  ((x, C) \\<in> Epigraph UNIV f) = ((x, C) \\<in> Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. f = g", "also"], ["proof (state)\nthis:\n  ((x, C) \\<in> Epigraph UNIV f) = ((x, C) \\<in> Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. f = g", "have \"\\<dots> \\<longleftrightarrow> g x \\<le> ereal C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, C) \\<in> Epigraph UNIV g) = (g x \\<le> ereal C)", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, C)\n     \\<in> {xy. fst xy \\<in> UNIV \\<and> g (fst xy) \\<le> ereal (snd xy)}) =\n    (g x \\<le> ereal C)", "by auto"], ["proof (state)\nthis:\n  ((x, C) \\<in> Epigraph UNIV g) = (g x \\<le> ereal C)\n\ngoal (1 subgoal):\n 1. f = g", "finally"], ["proof (chain)\npicking this:\n  (f x \\<le> ereal C) = (g x \\<le> ereal C)", "have \"f x \\<le> ereal C \\<longleftrightarrow> g x \\<le> ereal C\""], ["proof (prove)\nusing this:\n  (f x \\<le> ereal C) = (g x \\<le> ereal C)\n\ngoal (1 subgoal):\n 1. (f x \\<le> ereal C) = (g x \\<le> ereal C)", "by auto"], ["proof (state)\nthis:\n  (f x \\<le> ereal C) = (g x \\<le> ereal C)\n\ngoal (1 subgoal):\n 1. f = g", "}"], ["proof (state)\nthis:\n  (f x \\<le> ereal ?C2) = (g x \\<le> ereal ?C2)\n\ngoal (1 subgoal):\n 1. f = g", "hence \"g x = f x\""], ["proof (prove)\nusing this:\n  (f x \\<le> ereal ?C2) = (g x \\<le> ereal ?C2)\n\ngoal (1 subgoal):\n 1. g x = f x", "using ereal_le_real[of \"g x\" \"f x\"] ereal_le_real[of \"f x\" \"g x\"]"], ["proof (prove)\nusing this:\n  (f x \\<le> ereal ?C2) = (g x \\<le> ereal ?C2)\n  (\\<And>z.\n      g x \\<le> ereal z \\<Longrightarrow>\n      f x \\<le> ereal z) \\<Longrightarrow>\n  f x \\<le> g x\n  (\\<And>z.\n      f x \\<le> ereal z \\<Longrightarrow>\n      g x \\<le> ereal z) \\<Longrightarrow>\n  g x \\<le> f x\n\ngoal (1 subgoal):\n 1. g x = f x", "by auto"], ["proof (state)\nthis:\n  g x = f x\n\ngoal (1 subgoal):\n 1. f = g", "}"], ["proof (state)\nthis:\n  g ?x2 = f ?x2\n\ngoal (1 subgoal):\n 1. f = g", "from this"], ["proof (chain)\npicking this:\n  g ?x2 = f ?x2", "show ?thesis"], ["proof (prove)\nusing this:\n  g ?x2 = f ?x2\n\ngoal (1 subgoal):\n 1. f = g", "by (simp add: ext)"], ["proof (state)\nthis:\n  f = g\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_ex_unique:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<exists>!g. Epigraph UNIV g = closure (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>!g. Epigraph UNIV g = closure (Epigraph UNIV f)", "using lsc_hull_exists epigraph_invertible"], ["proof (prove)\nusing this:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV ?f)\n  Epigraph UNIV ?f = Epigraph UNIV ?g \\<Longrightarrow> ?f = ?g\n\ngoal (1 subgoal):\n 1. \\<exists>!g. Epigraph UNIV g = closure (Epigraph UNIV f)", "by metis"], ["", "lemma epigraph_lsc_hull:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"Epigraph UNIV (lsc_hull f) = closure(Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)", "have \"\\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "using lsc_hull_exists"], ["proof (prove)\nusing this:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV ?f)\n\ngoal (1 subgoal):\n 1. \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)", "unfolding lsc_hull_def"], ["proof (prove)\nusing this:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. Epigraph UNIV (SOME g. Epigraph UNIV g = closure (Epigraph UNIV f)) =\n    closure (Epigraph UNIV f)", "using some_eq_ex[of \"(\\<lambda>g. Epigraph UNIV g = closure(Epigraph UNIV f))\"]"], ["proof (prove)\nusing this:\n  \\<exists>g. Epigraph UNIV g = closure (Epigraph UNIV f)\n  (Epigraph UNIV (SOME x. Epigraph UNIV x = closure (Epigraph UNIV f)) =\n   closure (Epigraph UNIV f)) =\n  (\\<exists>x. Epigraph UNIV x = closure (Epigraph UNIV f))\n\ngoal (1 subgoal):\n 1. Epigraph UNIV (SOME g. Epigraph UNIV g = closure (Epigraph UNIV f)) =\n    closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_expl:\n  \"(g = lsc_hull f) \\<longleftrightarrow> (Epigraph UNIV g = closure(Epigraph UNIV f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "assume \"Epigraph UNIV g = closure(Epigraph UNIV f)\""], ["proof (state)\nthis:\n  Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "hence \"lsc_hull f = g\""], ["proof (prove)\nusing this:\n  Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. lsc_hull f = g", "unfolding lsc_hull_def"], ["proof (prove)\nusing this:\n  Epigraph UNIV g = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. (SOME g. Epigraph UNIV g = closure (Epigraph UNIV f)) = g", "apply (subst some1_equality[of _ g])"], ["proof (prove)\ngoal (3 subgoals):\n 1. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n    \\<exists>!x. Epigraph UNIV x = closure (Epigraph UNIV f)\n 2. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n    Epigraph UNIV g = closure (Epigraph UNIV f)\n 3. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow> g = g", "using lsc_hull_ex_unique"], ["proof (prove)\nusing this:\n  \\<exists>!g. Epigraph UNIV g = closure (Epigraph UNIV ?f)\n\ngoal (3 subgoals):\n 1. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n    \\<exists>!x. Epigraph UNIV x = closure (Epigraph UNIV f)\n 2. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n    Epigraph UNIV g = closure (Epigraph UNIV f)\n 3. Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow> g = g", "by metis+"], ["proof (state)\nthis:\n  lsc_hull f = g\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "}"], ["proof (state)\nthis:\n  Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n  lsc_hull f = g\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "from this"], ["proof (chain)\npicking this:\n  Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n  lsc_hull f = g", "show ?thesis"], ["proof (prove)\nusing this:\n  Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n  lsc_hull f = g\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "using epigraph_lsc_hull"], ["proof (prove)\nusing this:\n  Epigraph UNIV g = closure (Epigraph UNIV f) \\<Longrightarrow>\n  lsc_hull f = g\n  Epigraph UNIV (lsc_hull ?f) = closure (Epigraph UNIV ?f)\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))", "by auto"], ["proof (state)\nthis:\n  (g = lsc_hull f) = (Epigraph UNIV g = closure (Epigraph UNIV f))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_lsc_hull: \"lsc (lsc_hull f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc (lsc_hull f)", "using epigraph_lsc_hull[of f] lsc_iff[of \"lsc_hull f\"]"], ["proof (prove)\nusing this:\n  Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)\n  lsc (lsc_hull f) = (\\<forall>y. closed {x. lsc_hull f x \\<le> y}) \\<and>\n  lsc (lsc_hull f) = closed (Epigraph UNIV (lsc_hull f))\n\ngoal (1 subgoal):\n 1. lsc (lsc_hull f)", "by auto"], ["", "lemma epigraph_subset_iff:\n  fixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"Epigraph UNIV f \\<le> Epigraph UNIV g \\<longleftrightarrow> (\\<forall>x. g x \\<le> f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "assume epi: \"Epigraph UNIV f \\<le> Epigraph UNIV g\""], ["proof (state)\nthis:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "{"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "fix z"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "assume \"f x \\<le> ereal z\""], ["proof (state)\nthis:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"(x,z)\\<in>Epigraph UNIV f\""], ["proof (prove)\nusing this:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> Epigraph UNIV f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z)\n    \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"(x,z)\\<in>Epigraph UNIV g\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> Epigraph UNIV g", "using epi"], ["proof (prove)\nusing this:\n  (x, z) \\<in> Epigraph UNIV f\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> Epigraph UNIV g", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"g x \\<le> ereal z\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. g x \\<le> ereal z", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (x, z)\n  \\<in> {xy. fst xy \\<in> UNIV \\<and> g (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. g x \\<le> ereal z", "by auto"], ["proof (state)\nthis:\n  g x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "}"], ["proof (state)\nthis:\n  f x \\<le> ereal ?z2 \\<Longrightarrow> g x \\<le> ereal ?z2\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"g x \\<le> f x\""], ["proof (prove)\nusing this:\n  f x \\<le> ereal ?z2 \\<Longrightarrow> g x \\<le> ereal ?z2\n\ngoal (1 subgoal):\n 1. g x \\<le> f x", "apply (subst ereal_le_real)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>z.\n       \\<lbrakk>\\<And>z.\n                   f x \\<le> ereal z \\<Longrightarrow> g x \\<le> ereal z;\n        f x \\<le> ereal z\\<rbrakk>\n       \\<Longrightarrow> g x \\<le> ereal z\n 2. (\\<And>z.\n        f x \\<le> ereal z \\<Longrightarrow>\n        g x \\<le> ereal z) \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  g x \\<le> f x\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "}"], ["proof (state)\nthis:\n  g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "}"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g \\<Longrightarrow>\n  g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "moreover"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g \\<Longrightarrow>\n  g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "{"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g \\<Longrightarrow>\n  g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "assume le: \"\\<forall>x. g x \\<le> f x\""], ["proof (state)\nthis:\n  \\<forall>x. g x \\<le> f x\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "{"], ["proof (state)\nthis:\n  \\<forall>x. g x \\<le> f x\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "assume \"(x,y):Epigraph UNIV f\""], ["proof (state)\nthis:\n  (x, y) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"f x \\<le> ereal y\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. f x \\<le> ereal y", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (x, y)\n  \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. f x \\<le> ereal y", "by auto"], ["proof (state)\nthis:\n  f x \\<le> ereal y\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "moreover"], ["proof (state)\nthis:\n  f x \\<le> ereal y\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "have \"g x \\<le> f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g x \\<le> f x", "using le"], ["proof (prove)\nusing this:\n  \\<forall>x. g x \\<le> f x\n\ngoal (1 subgoal):\n 1. g x \\<le> f x", "by auto"], ["proof (state)\nthis:\n  g x \\<le> f x\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "ultimately"], ["proof (chain)\npicking this:\n  f x \\<le> ereal y\n  g x \\<le> f x", "have \"g x \\<le> ereal y\""], ["proof (prove)\nusing this:\n  f x \\<le> ereal y\n  g x \\<le> f x\n\ngoal (1 subgoal):\n 1. g x \\<le> ereal y", "by auto"], ["proof (state)\nthis:\n  g x \\<le> ereal y\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "hence \"(x,y):Epigraph UNIV g\""], ["proof (prove)\nusing this:\n  g x \\<le> ereal y\n\ngoal (1 subgoal):\n 1. (x, y) \\<in> Epigraph UNIV g", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  g x \\<le> ereal y\n\ngoal (1 subgoal):\n 1. (x, y)\n    \\<in> {xy. fst xy \\<in> UNIV \\<and> g (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "}"], ["proof (state)\nthis:\n  (?x2, ?y2) \\<in> Epigraph UNIV f \\<Longrightarrow>\n  (?x2, ?y2) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>x. g x \\<le> f x;\n   (?x2, ?y2) \\<in> Epigraph UNIV f\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "ultimately"], ["proof (chain)\npicking this:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g \\<Longrightarrow>\n  g ?x2 \\<le> f ?x2\n  \\<lbrakk>\\<forall>x. g x \\<le> f x;\n   (?x2, ?y2) \\<in> Epigraph UNIV f\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> Epigraph UNIV g", "show ?thesis"], ["proof (prove)\nusing this:\n  Epigraph UNIV f \\<subseteq> Epigraph UNIV g \\<Longrightarrow>\n  g ?x2 \\<le> f ?x2\n  \\<lbrakk>\\<forall>x. g x \\<le> f x;\n   (?x2, ?y2) \\<in> Epigraph UNIV f\\<rbrakk>\n  \\<Longrightarrow> (?x2, ?y2) \\<in> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n    (\\<forall>x. g x \\<le> f x)", "by auto"], ["proof (state)\nthis:\n  (Epigraph UNIV f \\<subseteq> Epigraph UNIV g) =\n  (\\<forall>x. g x \\<le> f x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_le: \"(lsc_hull f) x \\<le> f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull f x \\<le> f x", "using epigraph_lsc_hull[of f] closure_subset epigraph_subset_iff[of f \"lsc_hull f\"]"], ["proof (prove)\nusing this:\n  Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)\n  ?S \\<subseteq> closure ?S\n  (Epigraph UNIV f \\<subseteq> Epigraph UNIV (lsc_hull f)) =\n  (\\<forall>x. lsc_hull f x \\<le> f x)\n\ngoal (1 subgoal):\n 1. lsc_hull f x \\<le> f x", "by auto"], ["", "lemma lsc_hull_greatest:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"lsc g\" \"\\<forall>x. g x \\<le> f x\"\nshows \"\\<forall>x. g x \\<le> (lsc_hull f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. g x \\<le> lsc_hull f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. g x \\<le> lsc_hull f x", "have \"closure(Epigraph UNIV f) \\<le> Epigraph UNIV g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g", "using lsc_iff epigraph_subset_iff assms"], ["proof (prove)\nusing this:\n  lsc ?f = (\\<forall>y. closed {x. ?f x \\<le> y}) \\<and>\n  lsc ?f = closed (Epigraph UNIV ?f)\n  (Epigraph UNIV ?f \\<subseteq> Epigraph UNIV ?g) =\n  (\\<forall>x. ?g x \\<le> ?f x)\n  lsc g\n  \\<forall>x. g x \\<le> f x\n\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g", "by (metis closure_minimal)"], ["proof (state)\nthis:\n  closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. \\<forall>x. g x \\<le> lsc_hull f x", "from this"], ["proof (chain)\npicking this:\n  closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g", "show ?thesis"], ["proof (prove)\nusing this:\n  closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g\n\ngoal (1 subgoal):\n 1. \\<forall>x. g x \\<le> lsc_hull f x", "using epigraph_subset_iff lsc_hull_expl"], ["proof (prove)\nusing this:\n  closure (Epigraph UNIV f) \\<subseteq> Epigraph UNIV g\n  (Epigraph UNIV ?f \\<subseteq> Epigraph UNIV ?g) =\n  (\\<forall>x. ?g x \\<le> ?f x)\n  (?g = lsc_hull ?f) = (Epigraph UNIV ?g = closure (Epigraph UNIV ?f))\n\ngoal (1 subgoal):\n 1. \\<forall>x. g x \\<le> lsc_hull f x", "by metis"], ["proof (state)\nthis:\n  \\<forall>x. g x \\<le> lsc_hull f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_iff_greatest:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nshows \"(g = lsc_hull f) \\<longleftrightarrow>\n  lsc g \\<and> (\\<forall>x. g x \\<le> f x) \\<and> (\\<forall>h. lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow> (\\<forall>x. h x \\<le> g x))\"\n(is \"?lhs \\<longleftrightarrow> ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "assume \"?lhs\""], ["proof (state)\nthis:\n  g = lsc_hull f\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "hence \"?rhs\""], ["proof (prove)\nusing this:\n  g = lsc_hull f\n\ngoal (1 subgoal):\n 1. lsc g \\<and>\n    (\\<forall>x. g x \\<le> f x) \\<and>\n    (\\<forall>h.\n        lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n        (\\<forall>x. h x \\<le> g x))", "using lsc_lsc_hull lsc_hull_le lsc_hull_greatest"], ["proof (prove)\nusing this:\n  g = lsc_hull f\n  lsc (lsc_hull ?f)\n  lsc_hull ?f ?x \\<le> ?f ?x\n  \\<lbrakk>lsc ?g; \\<forall>x. ?g x \\<le> ?f x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x. ?g x \\<le> lsc_hull ?f x\n\ngoal (1 subgoal):\n 1. lsc g \\<and>\n    (\\<forall>x. g x \\<le> f x) \\<and>\n    (\\<forall>h.\n        lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n        (\\<forall>x. h x \\<le> g x))", "by metis"], ["proof (state)\nthis:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "}"], ["proof (state)\nthis:\n  g = lsc_hull f \\<Longrightarrow>\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "moreover"], ["proof (state)\nthis:\n  g = lsc_hull f \\<Longrightarrow>\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "{"], ["proof (state)\nthis:\n  g = lsc_hull f \\<Longrightarrow>\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "assume \"?rhs\""], ["proof (state)\nthis:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "{"], ["proof (state)\nthis:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "have \"(lsc_hull f) x \\<le> g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull f x \\<le> g x", "using \\<open>?rhs\\<close> lsc_lsc_hull lsc_hull_le"], ["proof (prove)\nusing this:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n  lsc (lsc_hull ?f)\n  lsc_hull ?f ?x \\<le> ?f ?x\n\ngoal (1 subgoal):\n 1. lsc_hull f x \\<le> g x", "by metis"], ["proof (state)\nthis:\n  lsc_hull f x \\<le> g x\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "moreover"], ["proof (state)\nthis:\n  lsc_hull f x \\<le> g x\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "have \"(lsc_hull f) x \\<ge> g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g x \\<le> lsc_hull f x", "using \\<open>?rhs\\<close> lsc_hull_greatest"], ["proof (prove)\nusing this:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n  \\<lbrakk>lsc ?g; \\<forall>x. ?g x \\<le> ?f x\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x. ?g x \\<le> lsc_hull ?f x\n\ngoal (1 subgoal):\n 1. g x \\<le> lsc_hull f x", "by metis"], ["proof (state)\nthis:\n  g x \\<le> lsc_hull f x\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "ultimately"], ["proof (chain)\npicking this:\n  lsc_hull f x \\<le> g x\n  g x \\<le> lsc_hull f x", "have \"(lsc_hull f) x = g x\""], ["proof (prove)\nusing this:\n  lsc_hull f x \\<le> g x\n  g x \\<le> lsc_hull f x\n\ngoal (1 subgoal):\n 1. lsc_hull f x = g x", "by auto"], ["proof (state)\nthis:\n  lsc_hull f x = g x\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "}"], ["proof (state)\nthis:\n  lsc_hull f ?x2 = g ?x2\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "hence \"?lhs\""], ["proof (prove)\nusing this:\n  lsc_hull f ?x2 = g ?x2\n\ngoal (1 subgoal):\n 1. g = lsc_hull f", "by (simp add: ext)"], ["proof (state)\nthis:\n  g = lsc_hull f\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "}"], ["proof (state)\nthis:\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x)) \\<Longrightarrow>\n  g = lsc_hull f\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "ultimately"], ["proof (chain)\npicking this:\n  g = lsc_hull f \\<Longrightarrow>\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x)) \\<Longrightarrow>\n  g = lsc_hull f", "show ?thesis"], ["proof (prove)\nusing this:\n  g = lsc_hull f \\<Longrightarrow>\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x))\n  lsc g \\<and>\n  (\\<forall>x. g x \\<le> f x) \\<and>\n  (\\<forall>h.\n      lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n      (\\<forall>x. h x \\<le> g x)) \\<Longrightarrow>\n  g = lsc_hull f\n\ngoal (1 subgoal):\n 1. (g = lsc_hull f) =\n    (lsc g \\<and>\n     (\\<forall>x. g x \\<le> f x) \\<and>\n     (\\<forall>h.\n         lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n         (\\<forall>x. h x \\<le> g x)))", "by blast"], ["proof (state)\nthis:\n  (g = lsc_hull f) =\n  (lsc g \\<and>\n   (\\<forall>x. g x \\<le> f x) \\<and>\n   (\\<forall>h.\n       lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n       (\\<forall>x. h x \\<le> g x)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_mono:\nfixes f g :: \"'a::metric_space \\<Rightarrow> ereal\"\nassumes \"\\<forall>x. g x \\<le> f x\"\nshows \"\\<forall>x. (lsc_hull g) x \\<le> (lsc_hull f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "have \"(lsc_hull g) x \\<le> g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull g x \\<le> g x", "using lsc_hull_le[of g x]"], ["proof (prove)\nusing this:\n  lsc_hull g x \\<le> g x\n\ngoal (1 subgoal):\n 1. lsc_hull g x \\<le> g x", "by auto"], ["proof (state)\nthis:\n  lsc_hull g x \\<le> g x\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "also"], ["proof (state)\nthis:\n  lsc_hull g x \\<le> g x\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "have \"\\<dots> \\<le> f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g x \\<le> f x", "using assms"], ["proof (prove)\nusing this:\n  \\<forall>x. g x \\<le> f x\n\ngoal (1 subgoal):\n 1. g x \\<le> f x", "by auto"], ["proof (state)\nthis:\n  g x \\<le> f x\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "finally"], ["proof (chain)\npicking this:\n  lsc_hull g x \\<le> f x", "have \"(lsc_hull g) x \\<le> f x\""], ["proof (prove)\nusing this:\n  lsc_hull g x \\<le> f x\n\ngoal (1 subgoal):\n 1. lsc_hull g x \\<le> f x", "by auto"], ["proof (state)\nthis:\n  lsc_hull g x \\<le> f x\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "}"], ["proof (state)\nthis:\n  lsc_hull g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "note * = this"], ["proof (state)\nthis:\n  lsc_hull g ?x2 \\<le> f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull g x \\<le> lsc_hull f x", "apply (subst lsc_hull_greatest)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x. lsc (lsc_hull g)\n 2. \\<And>x. \\<forall>x. lsc_hull g x \\<le> f x\n 3. \\<forall>x. True", "using lsc_lsc_hull[of g] *"], ["proof (prove)\nusing this:\n  lsc (lsc_hull g)\n  lsc_hull g ?x2 \\<le> f ?x2\n\ngoal (3 subgoals):\n 1. \\<And>x. lsc (lsc_hull g)\n 2. \\<And>x. \\<forall>x. lsc_hull g x \\<le> f x\n 3. \\<forall>x. True", "by auto"], ["proof (state)\nthis:\n  \\<forall>x. lsc_hull g x \\<le> lsc_hull f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_lsc:\n  \"lsc f \\<longleftrightarrow> (f = lsc_hull f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc f = (f = lsc_hull f)", "using lsc_hull_iff_greatest[of f f]"], ["proof (prove)\nusing this:\n  (f = lsc_hull f) =\n  (lsc f \\<and>\n   (\\<forall>x. f x \\<le> f x) \\<and>\n   (\\<forall>h.\n       lsc h \\<and> (\\<forall>x. h x \\<le> f x) \\<longrightarrow>\n       (\\<forall>x. h x \\<le> f x)))\n\ngoal (1 subgoal):\n 1. lsc f = (f = lsc_hull f)", "by auto"], ["", "lemma lsc_hull_liminf_at:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"\\<forall>x. (lsc_hull f) x = min (f x) (Liminf (at x) f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix x z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"(x,z):Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\""], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence xz_def: \"ereal z \\<ge> (SUP e\\<in>{0<..}. INF y\\<in>ball x e. f y)\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\n\ngoal (1 subgoal):\n 1. (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal z", "unfolding Epigraph_def min_Liminf_at"], ["proof (prove)\nusing this:\n  (x, z)\n  \\<in> {xy.\n         fst xy \\<in> UNIV \\<and>\n         (SUP e\\<in>{0<..}. Inf (f ` ball (fst xy) e)) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal z", "by auto"], ["proof (state)\nthis:\n  (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"e/sqrt 2>0\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. 0 < e / sqrt 2", "using \\<open>e>0\\<close>"], ["proof (prove)\nusing this:\n  0 < e\n  0 < e\n\ngoal (1 subgoal):\n 1. 0 < e / sqrt 2", "by simp"], ["proof (state)\nthis:\n  0 < e / sqrt 2\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "from this"], ["proof (chain)\npicking this:\n  0 < e / sqrt 2", "obtain e1 where e1_def: \"e1<e/sqrt 2 \\<and> e1>0\""], ["proof (prove)\nusing this:\n  0 < e / sqrt 2\n\ngoal (1 subgoal):\n 1. (\\<And>e1.\n        e1 < e / sqrt 2 \\<and> 0 < e1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using dense"], ["proof (prove)\nusing this:\n  0 < e / sqrt 2\n  ?x < ?y \\<Longrightarrow> \\<exists>z>?x. z < ?y\n\ngoal (1 subgoal):\n 1. (\\<And>e1.\n        e1 < e / sqrt 2 \\<and> 0 < e1 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  e1 < e / sqrt 2 \\<and> 0 < e1\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(SUP e\\<in>{0<..}. INF y\\<in>ball x e. f y) \\<ge> (INF y\\<in>ball x e1. f y)\""], ["proof (prove)\nusing this:\n  e1 < e / sqrt 2 \\<and> 0 < e1\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e1) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))", "by (auto intro: SUP_upper)"], ["proof (state)\nthis:\n  Inf (f ` ball x e1) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"ereal z \\<ge> (INF y\\<in>ball x e1. f y)\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x e1) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e1) \\<le> ereal z", "using xz_def"], ["proof (prove)\nusing this:\n  Inf (f ` ball x e1) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))\n  (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e1) \\<le> ereal z", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x e1) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence *: \"\\<forall>y>ereal z. \\<exists>t. t \\<in> ball x e1 \\<and> f t \\<le> y\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x e1) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. \\<forall>y>ereal z. \\<exists>t. t \\<in> ball x e1 \\<and> f t \\<le> y", "by (simp add: Bex_def Inf_le_iff_less)"], ["proof (state)\nthis:\n  \\<forall>y>ereal z. \\<exists>t. t \\<in> ball x e1 \\<and> f t \\<le> y\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "obtain t where t_def: \"t : ball x e1 \\<and> f t \\<le> ereal(z+e1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using e1_def *[rule_format, of \"ereal(z+e1)\"]"], ["proof (prove)\nusing this:\n  e1 < e / sqrt 2 \\<and> 0 < e1\n  ereal z < ereal (z + e1) \\<Longrightarrow>\n  \\<exists>t. t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence epi: \"(t,z+e1):Epigraph UNIV f\""], ["proof (prove)\nusing this:\n  t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. (t, z + e1) \\<in> Epigraph UNIV f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. (t, z + e1)\n    \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (t, z + e1) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"dist x t < e1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x t < e1", "using t_def"], ["proof (prove)\nusing this:\n  t \\<in> ball x e1 \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. dist x t < e1", "unfolding ball_def dist_norm"], ["proof (prove)\nusing this:\n  t \\<in> {y. dist x y < e1} \\<and> f t \\<le> ereal (z + e1)\n\ngoal (1 subgoal):\n 1. dist x t < e1", "by auto"], ["proof (state)\nthis:\n  dist x t < e1\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"sqrt (e1 ^ 2 + dist x t ^ 2) < e\""], ["proof (prove)\nusing this:\n  dist x t < e1\n\ngoal (1 subgoal):\n 1. sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e", "using e1_def"], ["proof (prove)\nusing this:\n  dist x t < e1\n  e1 < e / sqrt 2 \\<and> 0 < e1\n\ngoal (1 subgoal):\n 1. sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e", "apply (subst real_sqrt_sum_squares_less)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>dist x t < e1; e1 < e / sqrt 2 \\<and> 0 < e1\\<rbrakk>\n    \\<Longrightarrow> \\<bar>e1\\<bar> < e / sqrt 2\n 2. \\<lbrakk>dist x t < e1; e1 < e / sqrt 2 \\<and> 0 < e1\\<rbrakk>\n    \\<Longrightarrow> \\<bar>dist x t\\<bar> < e / sqrt 2\n 3. \\<lbrakk>dist x t < e1; e1 < e / sqrt 2 \\<and> 0 < e1\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "moreover"], ["proof (state)\nthis:\n  sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"dist (x,z) (t,z+e1) = sqrt (e1 ^ 2 + dist x t ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (x, z) (t, z + e1) = sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2)", "unfolding dist_prod_def dist_norm"], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt\n     ((dist (fst (x, z)) (fst (t, z + e1)))\\<^sup>2 +\n      (norm (snd (x, z) - snd (t, z + e1)))\\<^sup>2) =\n    sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  dist (x, z) (t, z + e1) = sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "ultimately"], ["proof (chain)\npicking this:\n  sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e\n  dist (x, z) (t, z + e1) = sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2)", "have \"dist (x,z) (t,z+e1) < e\""], ["proof (prove)\nusing this:\n  sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2) < e\n  dist (x, z) (t, z + e1) = sqrt (e1\\<^sup>2 + (dist x t)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. dist (x, z) (t, z + e1) < e", "by auto"], ["proof (state)\nthis:\n  dist (x, z) (t, z + e1) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"\\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < e\""], ["proof (prove)\nusing this:\n  dist (x, z) (t, z + e1) < e\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < e", "apply (rule_tac x=\"(t,z+e1)\" in bexI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. dist (x, z) (t, z + e1) < e \\<Longrightarrow>\n    dist (t, z + e1) (x, z) < e\n 2. dist (x, z) (t, z + e1) < e \\<Longrightarrow>\n    (t, z + e1) \\<in> Epigraph UNIV f", "apply (simp add: dist_commute)"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (x, z) (t, z + e1) < e \\<Longrightarrow>\n    (t, z + e1) \\<in> Epigraph UNIV f", "using epi"], ["proof (prove)\nusing this:\n  (t, z + e1) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. dist (x, z) (t, z + e1) < e \\<Longrightarrow>\n    (t, z + e1) \\<in> Epigraph UNIV f", "by auto"], ["proof (state)\nthis:\n  \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(x,z) : closure (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < ?e2\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> closure (Epigraph UNIV f)", "using closure_approachable[of \"(x,z)\" \"Epigraph UNIV f\"]"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < ?e2\n  ((x, z) \\<in> closure (Epigraph UNIV f)) =\n  (\\<forall>e>0. \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < e)\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  (?x2, ?z2)\n  \\<in> Epigraph UNIV\n         (\\<lambda>x. min (f x) (Liminf (at x) f)) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "moreover"], ["proof (state)\nthis:\n  (?x2, ?z2)\n  \\<in> Epigraph UNIV\n         (\\<lambda>x. min (f x) (Liminf (at x) f)) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  (?x2, ?z2)\n  \\<in> Epigraph UNIV\n         (\\<lambda>x. min (f x) (Liminf (at x) f)) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix x z"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume xz_def: \"(x,z):closure (Epigraph UNIV f)\""], ["proof (state)\nthis:\n  (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "from this"], ["proof (chain)\npicking this:\n  0 < e", "obtain y where y_def: \"y:(Epigraph UNIV f) \\<and> dist y (x,z) < e\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using closure_approachable[of \"(x,z)\" \"Epigraph UNIV f\"] xz_def"], ["proof (prove)\nusing this:\n  0 < e\n  ((x, z) \\<in> closure (Epigraph UNIV f)) =\n  (\\<forall>e>0. \\<exists>y\\<in>Epigraph UNIV f. dist y (x, z) < e)\n  (x, z) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"dist (fst y) x \\<le> sqrt ((dist (fst y) x) ^ 2 + (dist (snd y) z) ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (fst y) x\n    \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)", "by (auto intro: real_sqrt_sum_squares_ge1)"], ["proof (state)\nthis:\n  dist (fst y) x\n  \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  dist (fst y) x\n  \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots><e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "using y_def"], ["proof (prove)\nusing this:\n  y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "unfolding dist_prod_def"], ["proof (prove)\nusing this:\n  y \\<in> Epigraph UNIV f \\<and>\n  sqrt\n   ((dist (fst y) (fst (x, z)))\\<^sup>2 +\n    (dist (snd y) (snd (x, z)))\\<^sup>2)\n  < e\n\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "finally"], ["proof (chain)\npicking this:\n  dist (fst y) x < e", "have \"dist (fst y) x < e\""], ["proof (prove)\nusing this:\n  dist (fst y) x < e\n\ngoal (1 subgoal):\n 1. dist (fst y) x < e", "by auto"], ["proof (state)\nthis:\n  dist (fst y) x < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence h1: \"fst y:ball x e\""], ["proof (prove)\nusing this:\n  dist (fst y) x < e\n\ngoal (1 subgoal):\n 1. fst y \\<in> ball x e", "unfolding ball_def"], ["proof (prove)\nusing this:\n  dist (fst y) x < e\n\ngoal (1 subgoal):\n 1. fst y \\<in> {y. dist x y < e}", "by (simp add: dist_commute)"], ["proof (state)\nthis:\n  fst y \\<in> ball x e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"dist (snd y) z \\<le> sqrt ((dist (fst y) x) ^ 2 + (dist (snd y) z) ^ 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (snd y) z\n    \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)", "by (auto intro: real_sqrt_sum_squares_ge2)"], ["proof (state)\nthis:\n  dist (snd y) z\n  \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  dist (snd y) z\n  \\<le> sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots><e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "using y_def"], ["proof (prove)\nusing this:\n  y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "unfolding dist_prod_def"], ["proof (prove)\nusing this:\n  y \\<in> Epigraph UNIV f \\<and>\n  sqrt\n   ((dist (fst y) (fst (x, z)))\\<^sup>2 +\n    (dist (snd y) (snd (x, z)))\\<^sup>2)\n  < e\n\ngoal (1 subgoal):\n 1. sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  sqrt ((dist (fst y) x)\\<^sup>2 + (dist (snd y) z)\\<^sup>2) < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "finally"], ["proof (chain)\npicking this:\n  dist (snd y) z < e", "have h2: \"dist (snd y) z < e\""], ["proof (prove)\nusing this:\n  dist (snd y) z < e\n\ngoal (1 subgoal):\n 1. dist (snd y) z < e", "by auto"], ["proof (state)\nthis:\n  dist (snd y) z < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"(INF y\\<in>ball x e. f y) \\<le> f(fst y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) \\<le> f (fst y)", "using h1"], ["proof (prove)\nusing this:\n  fst y \\<in> ball x e\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) \\<le> f (fst y)", "by (simp add: INF_lower)"], ["proof (state)\nthis:\n  Inf (f ` ball x e) \\<le> f (fst y)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  Inf (f ` ball x e) \\<le> f (fst y)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots>\\<le>ereal(snd y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (fst y) \\<le> ereal (snd y)", "using y_def"], ["proof (prove)\nusing this:\n  y \\<in> Epigraph UNIV f \\<and> dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. f (fst y) \\<le> ereal (snd y)", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  y \\<in> {xy.\n           fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<and>\n  dist y (x, z) < e\n\ngoal (1 subgoal):\n 1. f (fst y) \\<le> ereal (snd y)", "by auto"], ["proof (state)\nthis:\n  f (fst y) \\<le> ereal (snd y)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  f (fst y) \\<le> ereal (snd y)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots> < ereal(z+e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (snd y) < ereal (z + e)", "using h2"], ["proof (prove)\nusing this:\n  dist (snd y) z < e\n\ngoal (1 subgoal):\n 1. ereal (snd y) < ereal (z + e)", "unfolding dist_norm"], ["proof (prove)\nusing this:\n  norm (snd y - z) < e\n\ngoal (1 subgoal):\n 1. ereal (snd y) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  ereal (snd y) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "finally"], ["proof (chain)\npicking this:\n  Inf (f ` ball x e) < ereal (z + e)", "have \"(INF y\\<in>ball x e. f y) < ereal(z+e)\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x e) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x e) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow> Inf (f ` ball x ?e2) < ereal (z + ?e2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence *: \"\\<forall>e>0. (INF y\\<in>ball x e. f y) < ereal(z+e)\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow> Inf (f ` ball x ?e2) < ereal (z + ?e2)\n\ngoal (1 subgoal):\n 1. \\<forall>e>0. Inf (f ` ball x e) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  \\<forall>e>0. Inf (f ` ball x e) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  \\<forall>e>0. Inf (f ` ball x e) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix e"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"(e::real)>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "fix d"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"(d::real)>0\""], ["proof (state)\nthis:\n  0 < d\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  0 < d\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"d<e\""], ["proof (state)\nthis:\n  d < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"(INF y\\<in>ball x d. f y) < ereal(z+d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) < ereal (z + d)", "using * \\<open>d>0\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>e>0. Inf (f ` ball x e) < ereal (z + e)\n  0 < d\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) < ereal (z + d)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x d) < ereal (z + d)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  Inf (f ` ball x d) < ereal (z + d)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots>< ereal(z+e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (z + d) < ereal (z + e)", "using \\<open>d<e\\<close>"], ["proof (prove)\nusing this:\n  d < e\n\ngoal (1 subgoal):\n 1. ereal (z + d) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  ereal (z + d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "finally"], ["proof (chain)\npicking this:\n  Inf (f ` ball x d) < ereal (z + e)", "have \"(INF y\\<in>ball x d. f y) < ereal(z+e)\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "moreover"], ["proof (state)\nthis:\n  d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "{"], ["proof (state)\nthis:\n  d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "assume \"~(d<e)\""], ["proof (state)\nthis:\n  \\<not> d < e\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"ball x e \\<le> ball x d\""], ["proof (prove)\nusing this:\n  \\<not> d < e\n\ngoal (1 subgoal):\n 1. ball x e \\<subseteq> ball x d", "by auto"], ["proof (state)\nthis:\n  ball x e \\<subseteq> ball x d\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(INF y\\<in>ball x d. f y) \\<le> (INF y\\<in>ball x e. f y)\""], ["proof (prove)\nusing this:\n  ball x e \\<subseteq> ball x d\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) \\<le> Inf (f ` ball x e)", "apply (subst INF_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>m.\n       \\<lbrakk>ball x e \\<subseteq> ball x d; m \\<in> ball x e\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n\\<in>ball x d. f n \\<le> f m\n 2. ball x e \\<subseteq> ball x d \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x d) \\<le> Inf (f ` ball x e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "also"], ["proof (state)\nthis:\n  Inf (f ` ball x d) \\<le> Inf (f ` ball x e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "have \"\\<dots>< ereal(z+e)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) < ereal (z + e)", "using * \\<open>e>0\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>e>0. Inf (f ` ball x e) < ereal (z + e)\n  0 < e\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x e) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "finally"], ["proof (chain)\npicking this:\n  Inf (f ` ball x d) < ereal (z + e)", "have \"(INF y\\<in>ball x d. f y) < ereal(z+e)\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) < ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  \\<not> d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "ultimately"], ["proof (chain)\npicking this:\n  d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n  \\<not> d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)", "have \"(INF y\\<in>ball x d. f y) < ereal(z+e)\""], ["proof (prove)\nusing this:\n  d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n  \\<not> d < e \\<Longrightarrow> Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) < ereal (z + e)", "by blast"], ["proof (state)\nthis:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(INF y\\<in>ball x d. f y) \\<le> ereal(z+e)\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x d) < ereal (z + e)\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x d) \\<le> ereal (z + e)", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x d) \\<le> ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  0 < ?d2 \\<Longrightarrow> Inf (f ` ball x ?d2) \\<le> ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"min (f x) (Liminf (at x) f) \\<le> ereal (z+e)\""], ["proof (prove)\nusing this:\n  0 < ?d2 \\<Longrightarrow> Inf (f ` ball x ?d2) \\<le> ereal (z + e)\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) \\<le> ereal (z + e)", "unfolding min_Liminf_at"], ["proof (prove)\nusing this:\n  0 < ?d2 \\<Longrightarrow> Inf (f ` ball x ?d2) \\<le> ereal (z + e)\n\ngoal (1 subgoal):\n 1. (SUP e\\<in>{0<..}. Inf (f ` ball x e)) \\<le> ereal (z + e)", "by (auto intro: SUP_least)"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) \\<le> ereal (z + e)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  min (f x) (Liminf (at x) f) \\<le> ereal (z + ?e2)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"min (f x) (Liminf (at x) f) \\<le> ereal z\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  min (f x) (Liminf (at x) f) \\<le> ereal (z + ?e2)\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) \\<le> ereal z", "using ereal_le_epsilon2"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  min (f x) (Liminf (at x) f) \\<le> ereal (z + ?e2)\n  (\\<And>e. 0 < e \\<Longrightarrow> ?x \\<le> ?y + ereal e) \\<Longrightarrow>\n  ?x \\<le> ?y\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) \\<le> ereal z", "by auto"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(x,z):Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\""], ["proof (prove)\nusing this:\n  min (f x) (Liminf (at x) f) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  min (f x) (Liminf (at x) f) \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z)\n    \\<in> {xy.\n           fst xy \\<in> UNIV \\<and>\n           min (f (fst xy)) (Liminf (at (fst xy)) f) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "}"], ["proof (state)\nthis:\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "ultimately"], ["proof (chain)\npicking this:\n  (?x2, ?z2)\n  \\<in> Epigraph UNIV\n         (\\<lambda>x. min (f x) (Liminf (at x) f)) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))", "have \"Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))= closure (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  (?x2, ?z2)\n  \\<in> Epigraph UNIV\n         (\\<lambda>x. min (f x) (Liminf (at x) f)) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f)\n  (?x2, ?z2) \\<in> closure (Epigraph UNIV f) \\<Longrightarrow>\n  (?x2, ?z2) \\<in> Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f))\n\ngoal (1 subgoal):\n 1. Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f)) =\n    closure (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f)) =\n  closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "hence \"(\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f\""], ["proof (prove)\nusing this:\n  Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f)) =\n  closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f", "using epigraph_invertible epigraph_lsc_hull[of f]"], ["proof (prove)\nusing this:\n  Epigraph UNIV (\\<lambda>x. min (f x) (Liminf (at x) f)) =\n  closure (Epigraph UNIV f)\n  Epigraph UNIV ?f = Epigraph UNIV ?g \\<Longrightarrow> ?f = ?g\n  Epigraph UNIV (lsc_hull f) = closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "from this"], ["proof (chain)\npicking this:\n  (\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. min (f x) (Liminf (at x) f)) = lsc_hull f\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)", "by metis"], ["proof (state)\nthis:\n  \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_same_inf:\n  fixes f :: \"'a::metric_space \\<Rightarrow> ereal\"\n  shows \"(INF x. lsc_hull f x) = (INF x. f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "have \"(INF x. f x) \\<le> (INF y\\<in>ball x 1. f y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (range f) \\<le> Inf (f ` ball x 1)", "apply (subst INF_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>m.\n       m \\<in> ball x 1 \\<Longrightarrow> \\<exists>n\\<in>UNIV. f n \\<le> f m\n 2. True", "by auto"], ["proof (state)\nthis:\n  Inf (range f) \\<le> Inf (f ` ball x 1)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "also"], ["proof (state)\nthis:\n  Inf (range f) \\<le> Inf (f ` ball x 1)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "have \"\\<dots> \\<le> min (f x) (Liminf (at x) f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (f ` ball x 1) \\<le> min (f x) (Liminf (at x) f)", "unfolding min_Liminf_at"], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (f ` ball x 1) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))", "by (auto intro: SUP_upper)"], ["proof (state)\nthis:\n  Inf (f ` ball x 1) \\<le> min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "also"], ["proof (state)\nthis:\n  Inf (f ` ball x 1) \\<le> min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "have \"\\<dots>=(lsc_hull f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) = lsc_hull f x", "using lsc_hull_liminf_at[of f]"], ["proof (prove)\nusing this:\n  \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) = lsc_hull f x\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "finally"], ["proof (chain)\npicking this:\n  Inf (range f) \\<le> lsc_hull f x", "have \"(INF x. f x) \\<le> (lsc_hull f) x\""], ["proof (prove)\nusing this:\n  Inf (range f) \\<le> lsc_hull f x\n\ngoal (1 subgoal):\n 1. Inf (range f) \\<le> lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  Inf (range f) \\<le> lsc_hull f x\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "}"], ["proof (state)\nthis:\n  Inf (range f) \\<le> lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "hence \"(INF x. f x) \\<le> (INF x. lsc_hull f x)\""], ["proof (prove)\nusing this:\n  Inf (range f) \\<le> lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. Inf (range f) \\<le> Inf (range (lsc_hull f))", "apply (subst INF_greatest)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>\\<And>x. Inf (range f) \\<le> lsc_hull f x;\n        i \\<in> UNIV\\<rbrakk>\n       \\<Longrightarrow> Inf (range f) \\<le> lsc_hull f i\n 2. (\\<And>x. Inf (range f) \\<le> lsc_hull f x) \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  Inf (range f) \\<le> Inf (range (lsc_hull f))\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "moreover"], ["proof (state)\nthis:\n  Inf (range f) \\<le> Inf (range (lsc_hull f))\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "have \"(INF x. lsc_hull f x) \\<le> (INF x. f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) \\<le> Inf (range f)", "apply (subst INF_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>m.\n       m \\<in> UNIV \\<Longrightarrow>\n       \\<exists>n\\<in>UNIV. lsc_hull f n \\<le> f m\n 2. True", "using lsc_hull_le"], ["proof (prove)\nusing this:\n  lsc_hull ?f ?x \\<le> ?f ?x\n\ngoal (2 subgoals):\n 1. \\<And>m.\n       m \\<in> UNIV \\<Longrightarrow>\n       \\<exists>n\\<in>UNIV. lsc_hull f n \\<le> f m\n 2. True", "by auto"], ["proof (state)\nthis:\n  Inf (range (lsc_hull f)) \\<le> Inf (range f)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "ultimately"], ["proof (chain)\npicking this:\n  Inf (range f) \\<le> Inf (range (lsc_hull f))\n  Inf (range (lsc_hull f)) \\<le> Inf (range f)", "show ?thesis"], ["proof (prove)\nusing this:\n  Inf (range f) \\<le> Inf (range (lsc_hull f))\n  Inf (range (lsc_hull f)) \\<le> Inf (range f)\n\ngoal (1 subgoal):\n 1. Inf (range (lsc_hull f)) = Inf (range f)", "by auto"], ["proof (state)\nthis:\n  Inf (range (lsc_hull f)) = Inf (range f)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Convex Functions\\<close>"], ["", "definition\n  convex_on :: \"'a::real_vector set \\<Rightarrow> ('a \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"convex_on s f \\<longleftrightarrow>\n  (\\<forall>x\\<in>s. \\<forall>y\\<in>s. \\<forall>u\\<ge>0. \\<forall>v\\<ge>0. u + v = 1\n  \\<longrightarrow> f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y)\""], ["", "lemma convex_on_ereal_mem:\n  assumes \"convex_on s f\"\n  assumes \"x:s\" \"y:s\"\n  assumes \"u\\<ge>0\" \"v\\<ge>0\" \"u+v=1\"\n  shows \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on s f\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["", "lemma convex_on_ereal_subset: \"convex_on t f \\<Longrightarrow> s \\<le> t \\<Longrightarrow> convex_on s f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Lower_Semicontinuous.convex_on t f; s \\<subseteq> t\\<rbrakk>\n    \\<Longrightarrow> Lower_Semicontinuous.convex_on s f", "unfolding convex_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>t.\n                \\<forall>y\\<in>t.\n                   \\<forall>u\\<ge>0.\n                      \\<forall>v\\<ge>0.\n                         u + v = 1 \\<longrightarrow>\n                         f (u *\\<^sub>R x + v *\\<^sub>R y)\n                         \\<le> ereal u * f x + ereal v * f y;\n     s \\<subseteq> t\\<rbrakk>\n    \\<Longrightarrow> \\<forall>x\\<in>s.\n                         \\<forall>y\\<in>s.\n                            \\<forall>u\\<ge>0.\n                               \\<forall>v\\<ge>0.\n                                  u + v = 1 \\<longrightarrow>\n                                  f (u *\\<^sub>R x + v *\\<^sub>R y)\n                                  \\<le> ereal u * f x + ereal v * f y", "by auto"], ["", "lemma convex_on_ereal_univ: \"convex_on UNIV f \\<longleftrightarrow> (\\<forall>S. convex_on S f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f =\n    (\\<forall>S. Lower_Semicontinuous.convex_on S f)", "using convex_on_ereal_subset"], ["proof (prove)\nusing this:\n  \\<lbrakk>Lower_Semicontinuous.convex_on ?t ?f; ?s \\<subseteq> ?t\\<rbrakk>\n  \\<Longrightarrow> Lower_Semicontinuous.convex_on ?s ?f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f =\n    (\\<forall>S. Lower_Semicontinuous.convex_on S f)", "by auto"], ["", "lemma ereal_pos_sum_distrib_left:\n  fixes f :: \"'a \\<Rightarrow> ereal\"\n  assumes \"r\\<ge>0\" \"r \\<noteq> \\<infinity>\"\n  shows \"r * sum f A = sum (\\<lambda>n. r * f n) A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "proof (cases \"finite A\")"], ["proof (state)\ngoal (2 subgoals):\n 1. finite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n 2. infinite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "case True"], ["proof (state)\nthis:\n  finite A\n\ngoal (2 subgoals):\n 1. finite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n 2. infinite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "thus ?thesis"], ["proof (prove)\nusing this:\n  finite A\n\ngoal (1 subgoal):\n 1. r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "proof induct"], ["proof (state)\ngoal (2 subgoals):\n 1. r * sum f {} = (\\<Sum>n\\<in>{}. r * f n)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        r * sum f F = (\\<Sum>n\\<in>F. r * f n)\\<rbrakk>\n       \\<Longrightarrow> r * sum f (insert x F) =\n                         (\\<Sum>n\\<in>insert x F. r * f n)", "case empty"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. r * sum f {} = (\\<Sum>n\\<in>{}. r * f n)\n 2. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        r * sum f F = (\\<Sum>n\\<in>F. r * f n)\\<rbrakk>\n       \\<Longrightarrow> r * sum f (insert x F) =\n                         (\\<Sum>n\\<in>insert x F. r * f n)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. r * sum f {} = (\\<Sum>n\\<in>{}. r * f n)", "by simp"], ["proof (state)\nthis:\n  r * sum f {} = (\\<Sum>n\\<in>{}. r * f n)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        r * sum f F = (\\<Sum>n\\<in>F. r * f n)\\<rbrakk>\n       \\<Longrightarrow> r * sum f (insert x F) =\n                         (\\<Sum>n\\<in>insert x F. r * f n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        r * sum f F = (\\<Sum>n\\<in>F. r * f n)\\<rbrakk>\n       \\<Longrightarrow> r * sum f (insert x F) =\n                         (\\<Sum>n\\<in>insert x F. r * f n)", "case (insert x A)"], ["proof (state)\nthis:\n  finite A\n  x \\<notin> A\n  r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n\ngoal (1 subgoal):\n 1. \\<And>x F.\n       \\<lbrakk>finite F; x \\<notin> F;\n        r * sum f F = (\\<Sum>n\\<in>F. r * f n)\\<rbrakk>\n       \\<Longrightarrow> r * sum f (insert x F) =\n                         (\\<Sum>n\\<in>insert x F. r * f n)", "thus ?case"], ["proof (prove)\nusing this:\n  finite A\n  x \\<notin> A\n  r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n\ngoal (1 subgoal):\n 1. r * sum f (insert x A) = (\\<Sum>n\\<in>insert x A. r * f n)", "using assms"], ["proof (prove)\nusing this:\n  finite A\n  x \\<notin> A\n  r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n  0 \\<le> r\n  r \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. r * sum f (insert x A) = (\\<Sum>n\\<in>insert x A. r * f n)", "by (simp add: ereal_pos_distrib)"], ["proof (state)\nthis:\n  r * sum f (insert x A) = (\\<Sum>n\\<in>insert x A. r * f n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n\ngoal (1 subgoal):\n 1. infinite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. infinite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "case False"], ["proof (state)\nthis:\n  infinite A\n\ngoal (1 subgoal):\n 1. infinite A \\<Longrightarrow> r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "thus ?thesis"], ["proof (prove)\nusing this:\n  infinite A\n\ngoal (1 subgoal):\n 1. r * sum f A = (\\<Sum>n\\<in>A. r * f n)", "by simp"], ["proof (state)\nthis:\n  r * sum f A = (\\<Sum>n\\<in>A. r * f n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_ereal_add:\n  fixes f g :: \"'a::real_vector \\<Rightarrow> ereal\"\n  assumes \"convex_on s f\" \"convex_on s g\"\n  shows \"convex_on s (\\<lambda>x. f x + g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "assume \"x:s\" \"y:s\""], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "moreover"], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n      \\<le> (ereal u * f x + ereal v * f y) + (ereal u * g x + ereal v * g y)\""], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y)", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  Lower_Semicontinuous.convex_on s f\n  Lower_Semicontinuous.convex_on s g\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y)", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              g (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * g x + ereal v * g y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y)", "by (auto simp add: add_mono)"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "have \"\\<dots>=(ereal u * f x + ereal u * g x) + (ereal v * f y + ereal v * g y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y) =\n    ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y) =\n  ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "also"], ["proof (state)\nthis:\n  ereal u * f x + ereal v * f y + (ereal u * g x + ereal v * g y) =\n  ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "have \"\\<dots>= ereal u * (f x + g x) + ereal v * (f y + g y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y) =\n    ereal u * (f x + g x) + ereal v * (f y + g y)", "using uv"], ["proof (prove)\nusing this:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y) =\n    ereal u * (f x + g x) + ereal v * (f y + g y)", "by (simp add: ereal_pos_distrib)"], ["proof (state)\nthis:\n  ereal u * f x + ereal u * g x + (ereal v * f y + ereal v * g y) =\n  ereal u * (f x + g x) + ereal v * (f y + g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "finally"], ["proof (chain)\npicking this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n      \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)\""], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) + g (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) +\n                    g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (f ?x2 + g ?x2) +\n                          ereal ?v2 * (f ?y2 + g ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) +\n                    g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (f ?x2 + g ?x2) +\n                          ereal ?v2 * (f ?y2 + g ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) +\n                    g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (f ?x2 + g ?x2) +\n                          ereal ?v2 * (f ?y2 + g ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       \\<forall>y\\<in>s.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y) +\n                g (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * (f x + g x) + ereal v * (f y + g y)", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s (\\<lambda>x. f x + g x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_ereal_cmul:\n  assumes \"0 \\<le> (c::ereal)\" \"convex_on s f\"\n  shows \"convex_on s (\\<lambda>x. c * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "assume \"x:s\" \"y:s\""], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "moreover"], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> (ereal u * f x + ereal v * f y)\""], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  0 \\<le> c\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  0 \\<le> c\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "hence \"c * f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> c * (ereal u * f x + ereal v * f y)\""], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> c * (ereal u * f x + ereal v * f y)", "using assms"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  0 \\<le> c\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> c * (ereal u * f x + ereal v * f y)", "by (intro ereal_mult_left_mono) auto"], ["proof (state)\nthis:\n  c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> c * (ereal u * f x + ereal v * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "also"], ["proof (state)\nthis:\n  c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> c * (ereal u * f x + ereal v * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "have \"\\<dots> \\<le>  c * (ereal u * f x) + c * (ereal v * f y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * (ereal u * f x + ereal v * f y)\n    \\<le> c * (ereal u * f x) + c * (ereal v * f y)", "using assms"], ["proof (prove)\nusing this:\n  0 \\<le> c\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. c * (ereal u * f x + ereal v * f y)\n    \\<le> c * (ereal u * f x) + c * (ereal v * f y)", "by (simp add: ereal_le_distrib)"], ["proof (state)\nthis:\n  c * (ereal u * f x + ereal v * f y)\n  \\<le> c * (ereal u * f x) + c * (ereal v * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "also"], ["proof (state)\nthis:\n  c * (ereal u * f x + ereal v * f y)\n  \\<le> c * (ereal u * f x) + c * (ereal v * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "have \"\\<dots> = ereal u *(c* f x) + ereal v *(c* f y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * (ereal u * f x) + c * (ereal v * f y) =\n    ereal u * (c * f x) + ereal v * (c * f y)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  c * (ereal u * f x) + c * (ereal v * f y) =\n  ereal u * (c * f x) + ereal v * (c * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "finally"], ["proof (chain)\npicking this:\n  c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (c * f x) + ereal v * (c * f y)", "have \"c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n      \\<le> ereal u * (c * f x) + ereal v * (c * f y)\""], ["proof (prove)\nusing this:\n  c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (c * f x) + ereal v * (c * f y)\n\ngoal (1 subgoal):\n 1. c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n    \\<le> ereal u * (c * f x) + ereal v * (c * f y)", "by auto"], ["proof (state)\nthis:\n  c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n  \\<le> ereal u * (c * f x) + ereal v * (c * f y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> c * f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (c * f ?x2) + ereal ?v2 * (c * f ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> c * f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (c * f ?x2) + ereal ?v2 * (c * f ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> c * f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * (c * f ?x2) + ereal ?v2 * (c * f ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       \\<forall>y\\<in>s.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                c * f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * (c * f x) + ereal v * (c * f y)", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s (\\<lambda>x. c * f x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_ereal_max:\n  fixes f g :: \"'a::real_vector \\<Rightarrow> ereal\"\n  assumes \"convex_on s f\" \"convex_on s g\"\n  shows \"convex_on s (\\<lambda>x. max (f x) (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "assume \"x:s\" \"y:s\""], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "moreover"], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1", "have \"max (f (u *\\<^sub>R x + v *\\<^sub>R y)) (g (u *\\<^sub>R x + v *\\<^sub>R y))\n      \\<le> max (ereal u * f x + ereal v * f y) (ereal u * g x + ereal v * g y)\""], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n     (g (u *\\<^sub>R x + v *\\<^sub>R y))\n    \\<le> max (ereal u * f x + ereal v * f y)\n           (ereal u * g x + ereal v * g y)", "apply (subst max.mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> f (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * f x + ereal v * f y\n 2. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> g (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * g x + ereal v * g y\n 3. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> True", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on s f\n  Lower_Semicontinuous.convex_on s g\n\ngoal (3 subgoals):\n 1. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> f (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * f x + ereal v * f y\n 2. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> g (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * g x + ereal v * g y\n 3. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> True", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n  \\<forall>x\\<in>s.\n     \\<forall>y\\<in>s.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              g (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * g x + ereal v * g y\n\ngoal (3 subgoals):\n 1. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> f (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * f x + ereal v * f y\n 2. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> g (u *\\<^sub>R x + v *\\<^sub>R y)\n                      \\<le> ereal u * g x + ereal v * g y\n 3. \\<lbrakk>x \\<in> s; y \\<in> s; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n    \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n   (g (u *\\<^sub>R x + v *\\<^sub>R y))\n  \\<le> max (ereal u * f x + ereal v * f y) (ereal u * g x + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "also"], ["proof (state)\nthis:\n  max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n   (g (u *\\<^sub>R x + v *\\<^sub>R y))\n  \\<le> max (ereal u * f x + ereal v * f y) (ereal u * g x + ereal v * g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "have \"\\<dots>\\<le>ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (ereal u * f x + ereal v * f y) (ereal u * g x + ereal v * g y)\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)", "apply (subst max.boundedI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. ereal u * f x + ereal v * f y\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n 2. ereal u * g x + ereal v * g y\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n 3. True", "apply (subst add_mono)"], ["proof (prove)\ngoal (5 subgoals):\n 1. ereal u * f x \\<le> ereal u * max (f x) (g x)\n 2. ereal v * f y \\<le> ereal v * max (f y) (g y)\n 3. True\n 4. ereal u * g x + ereal v * g y\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n 5. True", "prefer 4"], ["proof (prove)\ngoal (5 subgoals):\n 1. ereal u * g x + ereal v * g y\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n 2. ereal u * f x \\<le> ereal u * max (f x) (g x)\n 3. ereal v * f y \\<le> ereal v * max (f y) (g y)\n 4. True\n 5. True", "apply (subst add_mono)"], ["proof (prove)\ngoal (7 subgoals):\n 1. ereal u * g x \\<le> ereal u * max (f x) (g x)\n 2. ereal v * g y \\<le> ereal v * max (f y) (g y)\n 3. True\n 4. ereal u * f x \\<le> ereal u * max (f x) (g x)\n 5. ereal v * f y \\<le> ereal v * max (f y) (g y)\n 6. True\n 7. True", "by (subst ereal_mult_left_mono, auto simp add: uv)+"], ["proof (state)\nthis:\n  max (ereal u * f x + ereal v * f y) (ereal u * g x + ereal v * g y)\n  \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "finally"], ["proof (chain)\npicking this:\n  max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n   (g (u *\\<^sub>R x + v *\\<^sub>R y))\n  \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)", "have \"max (f (u *\\<^sub>R x + v *\\<^sub>R y)) (g (u *\\<^sub>R x + v *\\<^sub>R y))\n      \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\""], ["proof (prove)\nusing this:\n  max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n   (g (u *\\<^sub>R x + v *\\<^sub>R y))\n  \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n\ngoal (1 subgoal):\n 1. max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n     (g (u *\\<^sub>R x + v *\\<^sub>R y))\n    \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)", "by auto"], ["proof (state)\nthis:\n  max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n   (g (u *\\<^sub>R x + v *\\<^sub>R y))\n  \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> max (f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                     (g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                    \\<le> ereal ?u2 * max (f ?x2) (g ?x2) +\n                          ereal ?v2 * max (f ?y2) (g ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> max (f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                     (g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                    \\<le> ereal ?u2 * max (f ?x2) (g ?x2) +\n                          ereal ?v2 * max (f ?y2) (g ?y2)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> max (f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                     (g (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2))\n                    \\<le> ereal ?u2 * max (f ?x2) (g ?x2) +\n                          ereal ?v2 * max (f ?y2) (g ?y2)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       \\<forall>y\\<in>s.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                max (f (u *\\<^sub>R x + v *\\<^sub>R y))\n                 (g (u *\\<^sub>R x + v *\\<^sub>R y))\n                \\<le> ereal u * max (f x) (g x) + ereal v * max (f y) (g y)", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s (\\<lambda>x. max (f x) (g x))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_on_ereal_alt:\n  fixes C :: \"'a::real_vector set\"\n  assumes \"convex C\"\n  shows \"convex_on C f =\n  (\\<forall>x \\<in> C. \\<forall>y \\<in> C. \\<forall>m :: real. m \\<ge> 0 \\<and> m \\<le> 1\n      \\<longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - (ereal m)) * f y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on C f =\n    (\\<forall>x\\<in>C.\n        \\<forall>y\\<in>C.\n           \\<forall>m.\n              0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n              f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n              \\<le> ereal m * f x + (1 - ereal m) * f y)", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "fix m :: real"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "have[simp]: \"ereal (1 - m) = (1 - ereal m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (1 - m) = 1 - ereal m", "using ereal_minus(1)[of 1 m]"], ["proof (prove)\nusing this:\n  ereal 1 - ereal m = ereal (1 - m)\n\ngoal (1 subgoal):\n 1. ereal (1 - m) = 1 - ereal m", "by (auto simp: one_ereal_def)"], ["proof (state)\nthis:\n  ereal (1 - m) = 1 - ereal m\n\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "assume asms: \"convex_on C f\" \"x : C\" \"y : C\" \"0 \\<le> m\" \"m \\<le> 1\""], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on C f\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> m\n  m \\<le> 1\n\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "from this[unfolded convex_on_def, rule_format]"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x \\<in> C; ?y \\<in> C; 0 \\<le> ?u; 0 \\<le> ?v;\n   ?u + ?v = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u *\\<^sub>R ?x + ?v *\\<^sub>R ?y)\n                    \\<le> ereal ?u * f ?x + ereal ?v * f ?y\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> m\n  m \\<le> 1", "have \"\\<forall>u v. ((0 \\<le> u \\<and> 0 \\<le> v \\<and> u + v = 1) \\<longrightarrow>\n       f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> (ereal u) * f x + (ereal v) * f y)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> C; ?y \\<in> C; 0 \\<le> ?u; 0 \\<le> ?v;\n   ?u + ?v = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u *\\<^sub>R ?x + ?v *\\<^sub>R ?y)\n                    \\<le> ereal ?u * f ?x + ereal ?v * f ?y\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> m\n  m \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<forall>u v.\n       0 \\<le> u \\<and> 0 \\<le> v \\<and> u + v = 1 \\<longrightarrow>\n       f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  \\<forall>u v.\n     0 \\<le> u \\<and> 0 \\<le> v \\<and> u + v = 1 \\<longrightarrow>\n     f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (2 subgoals):\n 1. \\<And>x y m.\n       \\<lbrakk>Lower_Semicontinuous.convex_on C f; x \\<in> C; y \\<in> C;\n        0 \\<le> m; m \\<le> 1\\<rbrakk>\n       \\<Longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n                         \\<le> ereal m * f x + (1 - ereal m) * f y\n 2. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "from this[rule_format, of \"m\" \"1 - m\", simplified] asms"], ["proof (chain)\npicking this:\n  0 \\<le> m \\<and> m \\<le> 1 \\<Longrightarrow>\n  f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n  \\<le> ereal m * f x + (1 - ereal m) * f y\n  Lower_Semicontinuous.convex_on C f\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> m\n  m \\<le> 1", "show \"f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n          \\<le> (ereal m) * f x + (1 - ereal m) * f y\""], ["proof (prove)\nusing this:\n  0 \\<le> m \\<and> m \\<le> 1 \\<Longrightarrow>\n  f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n  \\<le> ereal m * f x + (1 - ereal m) * f y\n  Lower_Semicontinuous.convex_on C f\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> m\n  m \\<le> 1\n\ngoal (1 subgoal):\n 1. f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n    \\<le> ereal m * f x + (1 - ereal m) * f y", "by auto"], ["proof (state)\nthis:\n  f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n  \\<le> ereal m * f x + (1 - ereal m) * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "assume asm: \"\\<forall>x\\<in>C. \\<forall>y\\<in>C. \\<forall>m. 0 \\<le> m \\<and> m \\<le> 1\n      \\<longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - ereal m) * f y\""], ["proof (state)\nthis:\n  \\<forall>x\\<in>C.\n     \\<forall>y\\<in>C.\n        \\<forall>m.\n           0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n           f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n           \\<le> ereal m * f x + (1 - ereal m) * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "{"], ["proof (state)\nthis:\n  \\<forall>x\\<in>C.\n     \\<forall>y\\<in>C.\n        \\<forall>m.\n           0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n           f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n           \\<le> ereal m * f x + (1 - ereal m) * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "fix u v :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "assume lasm: \"x \\<in> C\" \"y \\<in> C\" \"u \\<ge> 0\" \"v \\<ge> 0\" \"u + v = 1\""], ["proof (state)\nthis:\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "hence[simp]: \"1-u=v\" \"1 - ereal u = ereal v\""], ["proof (prove)\nusing this:\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. 1 - u = v &&& 1 - ereal u = ereal v", "using ereal_minus(1)[of 1 m]"], ["proof (prove)\nusing this:\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  ereal 1 - ereal m = ereal (1 - m)\n\ngoal (1 subgoal):\n 1. 1 - u = v &&& 1 - ereal u = ereal v", "by (auto simp: one_ereal_def)"], ["proof (state)\nthis:\n  1 - u = v\n  1 - ereal u = ereal v\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "from asm[rule_format, of x y u]"], ["proof (chain)\npicking this:\n  \\<lbrakk>x \\<in> C; y \\<in> C; 0 \\<le> u \\<and> u \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> f (u *\\<^sub>R x + (1 - u) *\\<^sub>R y)\n                    \\<le> ereal u * f x + (1 - ereal u) * f y", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> (ereal u) * f x + (ereal v) * f y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<in> C; y \\<in> C; 0 \\<le> u \\<and> u \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> f (u *\\<^sub>R x + (1 - u) *\\<^sub>R y)\n                    \\<le> ereal u * f x + (1 - ereal u) * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using lasm"], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<in> C; y \\<in> C; 0 \\<le> u \\<and> u \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> f (u *\\<^sub>R x + (1 - u) *\\<^sub>R y)\n                    \\<le> ereal u * f x + (1 - ereal u) * f y\n  x \\<in> C\n  y \\<in> C\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> C; ?y2 \\<in> C; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>m.\n             0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n             f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n             \\<le> ereal m * f x + (1 - ereal m) * f y \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on C f", "thus \"convex_on C f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> C; ?y2 \\<in> C; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on C f", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> C; ?y2 \\<in> C; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>C.\n       \\<forall>y\\<in>C.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on C f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_on_ereal_alt_mem:\n  fixes C :: \"'a::real_vector set\"\n  assumes \"convex C\"\n  assumes \"convex_on C f\"\n  assumes \"x : C\" \"y : C\"\n  assumes \"(m::real) \\<ge> 0\" \"m \\<le> 1\"\n  shows \"f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - (ereal m)) * f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n    \\<le> ereal m * f x + (1 - ereal m) * f y", "by (metis assms convex_on_ereal_alt)"], ["", "lemma ereal_add_right_mono: \"(a::ereal) \\<le> b \\<Longrightarrow> a + c \\<le> b + c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<le> b \\<Longrightarrow> a + c \\<le> b + c", "by (metis add_mono order_refl)"], ["", "lemma convex_on_ereal_sum_aux:\n  assumes \"1-a>0\"\n  shows \"(1 - ereal a) * (ereal (c / (1 - a)) * b) = (ereal c) * b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 - ereal a) * (ereal (c / (1 - a)) * b) = ereal c * b", "by (metis mult.assoc mult.commute eq_divide_eq ereal_minus(1) assms\n            one_ereal_def less_le times_ereal.simps(1))"], ["", "lemma convex_on_ereal_sum:\n  fixes a :: \"'a \\<Rightarrow> real\"\n  fixes y :: \"'a \\<Rightarrow> 'b::real_vector\"\n  fixes f :: \"'b \\<Rightarrow> ereal\"\n  assumes \"finite s\" \"s \\<noteq> {}\"\n  assumes \"convex_on C f\"\n  assumes \"convex C\"\n  assumes \"(SUM i : s. a i) = 1\"\n  assumes \"\\<forall>i. i \\<in> s \\<longrightarrow> a i \\<ge> 0\"\n  assumes \"\\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\"\n  shows \"f (SUM i : s. a i *\\<^sub>R y i) \\<le> (SUM i : s. ereal (a i) * f (y i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>s. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>s. ereal (a i) * f (y i))", "using assms(1,2,5-)"], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  sum a s = 1\n  \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> a i\n  \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>s. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>s. ereal (a i) * f (y i))", "proof (induct s arbitrary:a rule:finite_ne_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x a.\n       \\<lbrakk>sum a {x} = 1;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>{x}. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>{x}. ereal (a i) * f (y i))\n 2. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "case (singleton i)"], ["proof (state)\nthis:\n  sum a {i} = 1\n  \\<forall>ia. ia \\<in> {i} \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> {i} \\<longrightarrow> y ia \\<in> C\n\ngoal (2 subgoals):\n 1. \\<And>x a.\n       \\<lbrakk>sum a {x} = 1;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>{x}. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>{x}. ereal (a i) * f (y i))\n 2. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence ai: \"a i = 1\""], ["proof (prove)\nusing this:\n  sum a {i} = 1\n  \\<forall>ia. ia \\<in> {i} \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> {i} \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. a i = 1", "by auto"], ["proof (state)\nthis:\n  a i = 1\n\ngoal (2 subgoals):\n 1. \\<And>x a.\n       \\<lbrakk>sum a {x} = 1;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i. i \\<in> {x} \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>{x}. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>{x}. ereal (a i) * f (y i))\n 2. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "thus ?case"], ["proof (prove)\nusing this:\n  a i = 1\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>{i}. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>{i}. ereal (a i) * f (y i))", "by (auto simp: one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  f (\\<Sum>i\\<in>{i}. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>{i}. ereal (a i) * f (y i))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "case (insert i s)"], ["proof (state)\nthis:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "from \\<open>convex_on C f\\<close>"], ["proof (chain)\npicking this:\n  Lower_Semicontinuous.convex_on C f", "have conv: \"\\<forall>x y m. ((x \\<in> C \\<and> y \\<in> C \\<and> 0 \\<le> m \\<and> m \\<le> 1)\n      \\<longrightarrow> f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y) \\<le> (ereal m) * f x + (1 - ereal m) * f y)\""], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on C f\n\ngoal (1 subgoal):\n 1. \\<forall>x y m.\n       x \\<in> C \\<and>\n       y \\<in> C \\<and> 0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n       f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n       \\<le> ereal m * f x + (1 - ereal m) * f y", "using convex_on_ereal_alt[of C f] \\<open>convex C\\<close>"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on C f\n  convex C \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on C f =\n  (\\<forall>x\\<in>C.\n      \\<forall>y\\<in>C.\n         \\<forall>m.\n            0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n            f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n            \\<le> ereal m * f x + (1 - ereal m) * f y)\n  convex C\n\ngoal (1 subgoal):\n 1. \\<forall>x y m.\n       x \\<in> C \\<and>\n       y \\<in> C \\<and> 0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n       f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n       \\<le> ereal m * f x + (1 - ereal m) * f y", "by auto"], ["proof (state)\nthis:\n  \\<forall>x y m.\n     x \\<in> C \\<and>\n     y \\<in> C \\<and> 0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n     f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n     \\<le> ereal m * f x + (1 - ereal m) * f y\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "{"], ["proof (state)\nthis:\n  \\<forall>x y m.\n     x \\<in> C \\<and>\n     y \\<in> C \\<and> 0 \\<le> m \\<and> m \\<le> 1 \\<longrightarrow>\n     f (m *\\<^sub>R x + (1 - m) *\\<^sub>R y)\n     \\<le> ereal m * f x + (1 - ereal m) * f y\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "assume \"a i = 1\""], ["proof (state)\nthis:\n  a i = 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence \"(SUM j : s. a j) = 0\""], ["proof (prove)\nusing this:\n  a i = 1\n\ngoal (1 subgoal):\n 1. sum a s = 0", "using insert"], ["proof (prove)\nusing this:\n  a i = 1\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. sum a s = 0", "by auto"], ["proof (state)\nthis:\n  sum a s = 0\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence \"\\<forall>j. (j \\<in> s \\<longrightarrow> a j = 0)\""], ["proof (prove)\nusing this:\n  sum a s = 0\n\ngoal (1 subgoal):\n 1. \\<forall>j. j \\<in> s \\<longrightarrow> a j = 0", "using insert"], ["proof (prove)\nusing this:\n  sum a s = 0\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. \\<forall>j. j \\<in> s \\<longrightarrow> a j = 0", "by (simp add: sum_nonneg_eq_0_iff)"], ["proof (state)\nthis:\n  \\<forall>j. j \\<in> s \\<longrightarrow> a j = 0\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence ?case"], ["proof (prove)\nusing this:\n  \\<forall>j. j \\<in> s \\<longrightarrow> a j = 0\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))", "using insert.hyps(1-3) \\<open>a i = 1\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>j. j \\<in> s \\<longrightarrow> a j = 0\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  a i = 1\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))", "by (simp add: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "}"], ["proof (state)\nthis:\n  a i = 1 \\<Longrightarrow>\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "moreover"], ["proof (state)\nthis:\n  a i = 1 \\<Longrightarrow>\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "{"], ["proof (state)\nthis:\n  a i = 1 \\<Longrightarrow>\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "assume asm: \"a i \\<noteq> 1\""], ["proof (state)\nthis:\n  a i \\<noteq> 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "from insert"], ["proof (chain)\npicking this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C", "have yai: \"y i : C\" \"a i \\<ge> 0\""], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. y i \\<in> C &&& 0 \\<le> a i", "by auto"], ["proof (state)\nthis:\n  y i \\<in> C\n  0 \\<le> a i\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have fis: \"finite (insert i s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (insert i s)", "using insert"], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. finite (insert i s)", "by auto"], ["proof (state)\nthis:\n  finite (insert i s)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence ai1: \"a i \\<le> 1\""], ["proof (prove)\nusing this:\n  finite (insert i s)\n\ngoal (1 subgoal):\n 1. a i \\<le> 1", "using sum_nonneg_leq_bound[of \"insert i s\" a] insert"], ["proof (prove)\nusing this:\n  finite (insert i s)\n  \\<lbrakk>finite (insert i s);\n   \\<And>ia. ia \\<in> insert i s \\<Longrightarrow> 0 \\<le> a ia;\n   sum a (insert i s) = ?B; ?i \\<in> insert i s\\<rbrakk>\n  \\<Longrightarrow> a ?i \\<le> ?B\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. a i \\<le> 1", "by simp"], ["proof (state)\nthis:\n  a i \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence \"a i < 1\""], ["proof (prove)\nusing this:\n  a i \\<le> 1\n\ngoal (1 subgoal):\n 1. a i < 1", "using asm"], ["proof (prove)\nusing this:\n  a i \\<le> 1\n  a i \\<noteq> 1\n\ngoal (1 subgoal):\n 1. a i < 1", "by auto"], ["proof (state)\nthis:\n  a i < 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence i0: \"1 - a i > 0\""], ["proof (prove)\nusing this:\n  a i < 1\n\ngoal (1 subgoal):\n 1. 0 < 1 - a i", "by auto"], ["proof (state)\nthis:\n  0 < 1 - a i\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence i1: \"1 - ereal (a i) > 0\""], ["proof (prove)\nusing this:\n  0 < 1 - a i\n\ngoal (1 subgoal):\n 1. 0 < 1 - ereal (a i)", "using ereal_minus(1)[of 1 \"a i\"]"], ["proof (prove)\nusing this:\n  0 < 1 - a i\n  ereal 1 - ereal (a i) = ereal (1 - a i)\n\ngoal (1 subgoal):\n 1. 0 < 1 - ereal (a i)", "by (simp add: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  0 < 1 - ereal (a i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have i2: \"1 - ereal (a i) \\<noteq> \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 - ereal (a i) \\<noteq> \\<infinity>", "using ereal_minus(1)[of 1]"], ["proof (prove)\nusing this:\n  ereal 1 - ereal ?p = ereal (1 - ?p)\n\ngoal (1 subgoal):\n 1. 1 - ereal (a i) \\<noteq> \\<infinity>", "by (simp add: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  1 - ereal (a i) \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "let \"?a j\" = \"a j / (1 - a i)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have a_nonneg: \"\\<And>j. j \\<in> s \\<Longrightarrow> 0 \\<le> a j / (1 - a i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j. j \\<in> s \\<Longrightarrow> 0 \\<le> a j / (1 - a i)", "using i0 insert"], ["proof (prove)\nusing this:\n  0 < 1 - a i\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. \\<And>j. j \\<in> s \\<Longrightarrow> 0 \\<le> a j / (1 - a i)", "by (metis insert_iff divide_nonneg_pos)"], ["proof (state)\nthis:\n  ?j \\<in> s \\<Longrightarrow> 0 \\<le> a ?j / (1 - a i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"(SUM j : insert i s. a j) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum a (insert i s) = 1", "using insert"], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. sum a (insert i s) = 1", "by auto"], ["proof (state)\nthis:\n  sum a (insert i s) = 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence \"(SUM j : s. a j) = 1 - a i\""], ["proof (prove)\nusing this:\n  sum a (insert i s) = 1\n\ngoal (1 subgoal):\n 1. sum a s = 1 - a i", "using sum.insert insert"], ["proof (prove)\nusing this:\n  sum a (insert i s) = 1\n  \\<lbrakk>finite ?A; ?x \\<notin> ?A\\<rbrakk>\n  \\<Longrightarrow> sum ?g (insert ?x ?A) = ?g ?x + sum ?g ?A\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. sum a s = 1 - a i", "by fastforce"], ["proof (state)\nthis:\n  sum a s = 1 - a i\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence \"(SUM j : s. a j) / (1 - a i) = 1\""], ["proof (prove)\nusing this:\n  sum a s = 1 - a i\n\ngoal (1 subgoal):\n 1. sum a s / (1 - a i) = 1", "using i0"], ["proof (prove)\nusing this:\n  sum a s = 1 - a i\n  0 < 1 - a i\n\ngoal (1 subgoal):\n 1. sum a s / (1 - a i) = 1", "by auto"], ["proof (state)\nthis:\n  sum a s / (1 - a i) = 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "hence a1: \"(SUM j : s. ?a j) = 1\""], ["proof (prove)\nusing this:\n  sum a s / (1 - a i) = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s. a j / (1 - a i)) = 1", "unfolding sum_divide_distrib"], ["proof (prove)\nusing this:\n  (\\<Sum>n\\<in>s. a n / (1 - a i)) = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s. a j / (1 - a i)) = 1", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. a j / (1 - a i)) = 1\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have asum: \"(SUM j : s. ?a j *\\<^sub>R y j) : C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C", "using insert convex_sum[OF \\<open>finite s\\<close>\n        \\<open>convex C\\<close> a1 a_nonneg]"], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n  \\<lbrakk>\\<And>i. i \\<in> s \\<Longrightarrow> i \\<in> s;\n   \\<And>i. i \\<in> s \\<Longrightarrow> ?y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R ?y j)\n                    \\<in> C\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have asum_le: \"f (SUM j : s. ?a j *\\<^sub>R y j) \\<le> (SUM j : s. ereal (?a j) * f (y j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j)\n    \\<le> (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j))", "using a_nonneg a1 insert"], ["proof (prove)\nusing this:\n  ?j \\<in> s \\<Longrightarrow> 0 \\<le> a ?j / (1 - a i)\n  (\\<Sum>j\\<in>s. a j / (1 - a i)) = 1\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j)\n    \\<le> (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j))", "by blast"], ["proof (state)\nthis:\n  f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"f (SUM j : insert i s. a j *\\<^sub>R y j) = f ((SUM j : s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j) =\n    f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)", "using sum.insert[of s i \"\\<lambda>j. a j *\\<^sub>R y j\", OF \\<open>finite s\\<close> \\<open>i \\<notin> s\\<close>]"], ["proof (prove)\nusing this:\n  (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j) =\n  a i *\\<^sub>R y i + (\\<Sum>j\\<in>s. a j *\\<^sub>R y j)\n\ngoal (1 subgoal):\n 1. f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j) =\n    f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)", "by (auto simp only:add.commute)"], ["proof (state)\nthis:\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j) =\n  f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j) =\n  f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R (SUM j : s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i) =\n    f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n       (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)", "using i0"], ["proof (prove)\nusing this:\n  0 < 1 - a i\n\ngoal (1 subgoal):\n 1. f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i) =\n    f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n       (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)", "by auto"], ["proof (state)\nthis:\n  f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i) =\n  f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n     (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  f ((\\<Sum>j\\<in>s. a j *\\<^sub>R y j) + a i *\\<^sub>R y i) =\n  f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n     (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = f ((1 - a i) *\\<^sub>R (SUM j : s. (a j * inverse (1 - a i)) *\\<^sub>R y j) + a i *\\<^sub>R y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n       (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n       a i *\\<^sub>R y i) =\n    f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)", "using scaleR_right.sum[of \"inverse (1 - a i)\" \"\\<lambda>j. a j *\\<^sub>R y j\" s, symmetric]"], ["proof (prove)\nusing this:\n  (\\<Sum>x\\<in>s. a x *\\<^sub>R y x /\\<^sub>R (1 - a i)) =\n  (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) /\\<^sub>R (1 - a i)\n\ngoal (1 subgoal):\n 1. f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n       (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n       a i *\\<^sub>R y i) =\n    f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)", "by (auto simp:algebra_simps)"], ["proof (state)\nthis:\n  f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n     (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n     a i *\\<^sub>R y i) =\n  f ((1 - a i) *\\<^sub>R\n     (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  f (((1 - a i) * inverse (1 - a i)) *\\<^sub>R\n     (\\<Sum>j\\<in>s. a j *\\<^sub>R y j) +\n     a i *\\<^sub>R y i) =\n  f ((1 - a i) *\\<^sub>R\n     (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = f ((1 - a i) *\\<^sub>R (SUM j : s. ?a j *\\<^sub>R y j) + a i *\\<^sub>R y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i) =\n    f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)", "by (auto simp: divide_inverse)"], ["proof (state)\nthis:\n  f ((1 - a i) *\\<^sub>R\n     (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i) =\n  f ((1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  f ((1 - a i) *\\<^sub>R\n     (\\<Sum>j\\<in>s. (a j * inverse (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i) =\n  f ((1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> \\<le> (1 - ereal (a i)) * f ((SUM j : s. ?a j *\\<^sub>R y j)) + (ereal (a i)) * f (y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)\n    \\<le> (1 - ereal (a i)) *\n          f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n          ereal (a i) * f (y i)", "using conv[rule_format, of \"y i\" \"(SUM j : s. ?a j *\\<^sub>R y j)\" \"a i\"]"], ["proof (prove)\nusing this:\n  y i \\<in> C \\<and>\n  (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C \\<and>\n  0 \\<le> a i \\<and> a i \\<le> 1 \\<Longrightarrow>\n  f (a i *\\<^sub>R y i +\n     (1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j))\n  \\<le> ereal (a i) * f (y i) +\n        (1 - ereal (a i)) *\n        f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j)\n\ngoal (1 subgoal):\n 1. f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)\n    \\<le> (1 - ereal (a i)) *\n          f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n          ereal (a i) * f (y i)", "using yai(1) asum yai(2) ai1"], ["proof (prove)\nusing this:\n  y i \\<in> C \\<and>\n  (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C \\<and>\n  0 \\<le> a i \\<and> a i \\<le> 1 \\<Longrightarrow>\n  f (a i *\\<^sub>R y i +\n     (1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j))\n  \\<le> ereal (a i) * f (y i) +\n        (1 - ereal (a i)) *\n        f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j)\n  y i \\<in> C\n  (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) \\<in> C\n  0 \\<le> a i\n  a i \\<le> 1\n\ngoal (1 subgoal):\n 1. f ((1 - a i) *\\<^sub>R\n       (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n       a i *\\<^sub>R y i)\n    \\<le> (1 - ereal (a i)) *\n          f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n          ereal (a i) * f (y i)", "by (auto simp add:add.commute)"], ["proof (state)\nthis:\n  f ((1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n  \\<le> (1 - ereal (a i)) *\n        f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n        ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  f ((1 - a i) *\\<^sub>R (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n     a i *\\<^sub>R y i)\n  \\<le> (1 - ereal (a i)) *\n        f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n        ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> \\<le> (1 - ereal (a i)) * (SUM j : s. ereal (?a j) * f (y j)) + (ereal (a i)) * f (y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 - ereal (a i)) * f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n    ereal (a i) * f (y i)\n    \\<le> (1 - ereal (a i)) *\n          (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n          ereal (a i) * f (y i)", "using ereal_add_right_mono[OF ereal_mult_left_mono[of _ _ \"1 - ereal (a i)\",\n        OF asum_le less_imp_le[OF i1]], of \"(ereal (a i)) * f (y i)\"]"], ["proof (prove)\nusing this:\n  (1 - ereal (a i)) * f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n  ereal (a i) * f (y i)\n  \\<le> (1 - ereal (a i)) *\n        (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n        ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. (1 - ereal (a i)) * f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n    ereal (a i) * f (y i)\n    \\<le> (1 - ereal (a i)) *\n          (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n          ereal (a i) * f (y i)", "by simp"], ["proof (state)\nthis:\n  (1 - ereal (a i)) * f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n  ereal (a i) * f (y i)\n  \\<le> (1 - ereal (a i)) *\n        (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n        ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  (1 - ereal (a i)) * f (\\<Sum>j\\<in>s. (a j / (1 - a i)) *\\<^sub>R y j) +\n  ereal (a i) * f (y i)\n  \\<le> (1 - ereal (a i)) *\n        (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n        ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = (SUM j : s. (1 - ereal (a i)) * (ereal (?a j) * f (y j))) + (ereal (a i)) * f (y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 - ereal (a i)) * (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n    ereal (a i) * f (y i) =\n    (\\<Sum>j\\<in>s.\n       (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n    ereal (a i) * f (y i)", "unfolding ereal_pos_sum_distrib_left[of \"1 - ereal (a i)\" \"\\<lambda>j. (ereal (?a j)) * f (y j)\", OF less_imp_le[OF i1] i2]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>n\\<in>s.\n       (1 - ereal (a i)) * (ereal (a n / (1 - a i)) * f (y n))) +\n    ereal (a i) * f (y i) =\n    (\\<Sum>j\\<in>s.\n       (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n    ereal (a i) * f (y i)", "by auto"], ["proof (state)\nthis:\n  (1 - ereal (a i)) * (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n  ereal (a i) * f (y i) =\n  (\\<Sum>j\\<in>s. (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n  ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  (1 - ereal (a i)) * (\\<Sum>j\\<in>s. ereal (a j / (1 - a i)) * f (y j)) +\n  ereal (a i) * f (y i) =\n  (\\<Sum>j\\<in>s. (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n  ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = (SUM j : s. (ereal (a j)) * f (y j)) + (ereal (a i)) * f (y i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s.\n       (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n    ereal (a i) * f (y i) =\n    (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i)", "using i0 convex_on_ereal_sum_aux"], ["proof (prove)\nusing this:\n  0 < 1 - a i\n  0 < 1 - ?a \\<Longrightarrow>\n  (1 - ereal ?a) * (ereal (?c / (1 - ?a)) * ?b) = ereal ?c * ?b\n\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s.\n       (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n    ereal (a i) * f (y i) =\n    (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n  ereal (a i) * f (y i) =\n  (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. (1 - ereal (a i)) * (ereal (a j / (1 - a i)) * f (y j))) +\n  ereal (a i) * f (y i) =\n  (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i)\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = (ereal (a i)) * f (y i) + (SUM j : s. (ereal (a j)) * f (y j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i) =\n    ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j))", "by (simp add: add.commute)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i) =\n  ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "also"], ["proof (state)\nthis:\n  (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) + ereal (a i) * f (y i) =\n  ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "have \"\\<dots> = (SUM j : insert i s. (ereal (a j)) * f (y j))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) =\n    (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))", "using insert"], ["proof (prove)\nusing this:\n  finite s\n  s \\<noteq> {}\n  i \\<notin> s\n  \\<lbrakk>sum ?a s = 1;\n   \\<forall>i. i \\<in> s \\<longrightarrow> 0 \\<le> ?a i;\n   \\<forall>i. i \\<in> s \\<longrightarrow> y i \\<in> C\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i\\<in>s. ?a i *\\<^sub>R y i)\n                    \\<le> (\\<Sum>i\\<in>s. ereal (?a i) * f (y i))\n  sum a (insert i s) = 1\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> 0 \\<le> a ia\n  \\<forall>ia. ia \\<in> insert i s \\<longrightarrow> y ia \\<in> C\n\ngoal (1 subgoal):\n 1. ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) =\n    (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))", "by auto"], ["proof (state)\nthis:\n  ereal (a i) * f (y i) + (\\<Sum>j\\<in>s. ereal (a j) * f (y j)) =\n  (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "finally"], ["proof (chain)\npicking this:\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))", "have \"f (SUM j : insert i s. a j *\\<^sub>R y j) \\<le> (SUM j : insert i s. (ereal (a j)) * f (y j))\""], ["proof (prove)\nusing this:\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n    \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))", "by simp"], ["proof (state)\nthis:\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "}"], ["proof (state)\nthis:\n  a i \\<noteq> 1 \\<Longrightarrow>\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. \\<And>x F a.\n       \\<lbrakk>finite F; F \\<noteq> {}; x \\<notin> F;\n        \\<And>a.\n           \\<lbrakk>sum a F = 1;\n            \\<forall>i. i \\<in> F \\<longrightarrow> 0 \\<le> a i;\n            \\<forall>i. i \\<in> F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n           \\<Longrightarrow> f (\\<Sum>i\\<in>F. a i *\\<^sub>R y i)\n                             \\<le> (\\<Sum>i\\<in>F. ereal (a i) * f (y i));\n        sum a (insert x F) = 1;\n        \\<forall>i. i \\<in> insert x F \\<longrightarrow> 0 \\<le> a i;\n        \\<forall>i.\n           i \\<in> insert x F \\<longrightarrow> y i \\<in> C\\<rbrakk>\n       \\<Longrightarrow> f (\\<Sum>i\\<in>insert x F. a i *\\<^sub>R y i)\n                         \\<le> (\\<Sum>i\\<in>insert x F.\n                                  ereal (a i) * f (y i))", "ultimately"], ["proof (chain)\npicking this:\n  a i = 1 \\<Longrightarrow>\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n  a i \\<noteq> 1 \\<Longrightarrow>\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))", "show ?case"], ["proof (prove)\nusing this:\n  a i = 1 \\<Longrightarrow>\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n  a i \\<noteq> 1 \\<Longrightarrow>\n  f (\\<Sum>j\\<in>insert i s. a j *\\<^sub>R y j)\n  \\<le> (\\<Sum>j\\<in>insert i s. ereal (a j) * f (y j))\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n    \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))", "by auto"], ["proof (state)\nthis:\n  f (\\<Sum>i\\<in>insert i s. a i *\\<^sub>R y i)\n  \\<le> (\\<Sum>i\\<in>insert i s. ereal (a i) * f (y i))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sum_2: \"sum u {1::nat..2} = (u 1)+(u 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {1..2} = u 1 + u 2", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. sum u {1..2} = u 1 + u 2", "have \"{1::nat..2} = {1::nat,2}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {1..2} = {1, 2}", "by auto"], ["proof (state)\nthis:\n  {1..2} = {1, 2}\n\ngoal (1 subgoal):\n 1. sum u {1..2} = u 1 + u 2", "thus ?thesis"], ["proof (prove)\nusing this:\n  {1..2} = {1, 2}\n\ngoal (1 subgoal):\n 1. sum u {1..2} = u 1 + u 2", "by auto"], ["proof (state)\nthis:\n  sum u {1..2} = u 1 + u 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_on_ereal_iff:\n  assumes \"convex s\"\n  shows \"convex_on s f \\<longleftrightarrow> (\\<forall>k u x. (\\<forall>i\\<in>{1..k::nat}. 0 \\<le> u i \\<and> x i : s) \\<and> sum u {1..k} = 1 \\<longrightarrow>\n   f (sum (\\<lambda>i. u i *\\<^sub>R x i) {1..k} ) \\<le> sum (\\<lambda>i. (ereal (u i)) * f(x i)) {1..k} )\"\n  (is \"?rhs \\<longleftrightarrow> ?lhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume \"?rhs\""], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "{"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "fix k u x"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "have zero: \"~(sum u {1..0::nat} = (1::real))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum u {1..0} \\<noteq> 1", "by auto"], ["proof (state)\nthis:\n  sum u {1..0} \\<noteq> 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume \"(\\<forall>i\\<in>{1..k::nat}. (0::real) \\<le> u i \\<and> x i \\<in> s)\""], ["proof (state)\nthis:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume *: \"sum u {1..k} = 1\""], ["proof (state)\nthis:\n  sum u {1..k} = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  sum u {1..k} = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "from *"], ["proof (chain)\npicking this:\n  sum u {1..k} = 1", "have \"k \\<noteq> 0\""], ["proof (prove)\nusing this:\n  sum u {1..k} = 1\n\ngoal (1 subgoal):\n 1. k \\<noteq> 0", "using zero"], ["proof (prove)\nusing this:\n  sum u {1..k} = 1\n  sum u {1..0} \\<noteq> 1\n\ngoal (1 subgoal):\n 1. k \\<noteq> 0", "by metis"], ["proof (state)\nthis:\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n  sum u {1..k} = 1\n  k \\<noteq> 0", "have \"f (sum (\\<lambda>i. u i *\\<^sub>R x i) {1..k} )\n      \\<le> sum (\\<lambda>i. (ereal (u i)) * f(x i)) {1..k}\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n  sum u {1..k} = 1\n  k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n    \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))", "using convex_on_ereal_sum[of \"{1..k}\" s f u x]"], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n  sum u {1..k} = 1\n  k \\<noteq> 0\n  \\<lbrakk>finite {1..k}; {1..k} \\<noteq> {};\n   Lower_Semicontinuous.convex_on s f; convex s; sum u {1..k} = 1;\n   \\<forall>i. i \\<in> {1..k} \\<longrightarrow> 0 \\<le> u i;\n   \\<forall>i. i \\<in> {1..k} \\<longrightarrow> x i \\<in> s\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n                    \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n    \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))", "using assms \\<open>?rhs\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s\n  sum u {1..k} = 1\n  k \\<noteq> 0\n  \\<lbrakk>finite {1..k}; {1..k} \\<noteq> {};\n   Lower_Semicontinuous.convex_on s f; convex s; sum u {1..k} = 1;\n   \\<forall>i. i \\<in> {1..k} \\<longrightarrow> 0 \\<le> u i;\n   \\<forall>i. i \\<in> {1..k} \\<longrightarrow> x i \\<in> s\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n                    \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n  convex s\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n    \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))", "by auto"], ["proof (state)\nthis:\n  f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n  \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>\\<forall>i\\<in>{1..?k2}. 0 \\<le> ?u2 i \\<and> ?x2 i \\<in> s;\n   sum ?u2 {1..?k2} = 1\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i = 1..?k2. ?u2 i *\\<^sub>R ?x2 i)\n                    \\<le> (\\<Sum>i = 1..?k2. ereal (?u2 i) * f (?x2 i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "hence \"?lhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<forall>i\\<in>{1..?k2}. 0 \\<le> ?u2 i \\<and> ?x2 i \\<in> s;\n   sum ?u2 {1..?k2} = 1\\<rbrakk>\n  \\<Longrightarrow> f (\\<Sum>i = 1..?k2. ?u2 i *\\<^sub>R ?x2 i)\n                    \\<le> (\\<Sum>i = 1..?k2. ereal (?u2 i) * f (?x2 i))\n\ngoal (1 subgoal):\n 1. \\<forall>k u x.\n       (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n       sum u {1..k} = 1 \\<longrightarrow>\n       f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n       \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))", "by auto"], ["proof (state)\nthis:\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "}"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f \\<Longrightarrow>\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f \\<Longrightarrow>\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "{"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f \\<Longrightarrow>\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume \"?lhs\""], ["proof (state)\nthis:\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "{"], ["proof (state)\nthis:\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "fix x y u v"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume xys: \"x:s\" \"y:s\""], ["proof (state)\nthis:\n  x \\<in> s\n  y \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "assume uv1: \"u\\<ge>0\" \"v\\<ge>0\" \"u + v = (1::real)\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "define xy where \"xy = (\\<lambda>i::nat. if i=1 then x else y)\""], ["proof (state)\nthis:\n  xy = (\\<lambda>i. if i = 1 then x else y)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "define uv where \"uv = (\\<lambda>i::nat. if i=1 then u else v)\""], ["proof (state)\nthis:\n  uv = (\\<lambda>i. if i = 1 then u else v)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "have \"\\<forall>i\\<in>{1..2::nat}. (0 \\<le> uv i) \\<and> (xy i : s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s", "unfolding xy_def uv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{1..2}.\n       0 \\<le> (if i = 1 then u else v) \\<and>\n       (if i = 1 then x else y) \\<in> s", "using xys uv1"], ["proof (prove)\nusing this:\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{1..2}.\n       0 \\<le> (if i = 1 then u else v) \\<and>\n       (if i = 1 then x else y) \\<in> s", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "have \"sum uv {1..2} = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum uv {1..2} = 1", "using sum_2[of uv]"], ["proof (prove)\nusing this:\n  sum uv {1..2} = uv 1 + uv 2\n\ngoal (1 subgoal):\n 1. sum uv {1..2} = 1", "unfolding uv_def"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2. if i = 1 then u else v) =\n  (if 1 = 1 then u else v) + (if 2 = 1 then u else v)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. if i = 1 then u else v) = 1", "using uv1"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2. if i = 1 then u else v) =\n  (if 1 = 1 then u else v) + (if 2 = 1 then u else v)\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. if i = 1 then u else v) = 1", "by auto"], ["proof (state)\nthis:\n  sum uv {1..2} = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  sum uv {1..2} = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "have \"(SUM i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y", "using sum_2[of \"(\\<lambda>i. uv i *\\<^sub>R xy i)\"]"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) =\n  uv 1 *\\<^sub>R xy 1 + uv 2 *\\<^sub>R xy 2\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y", "unfolding xy_def uv_def"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2.\n      (if i = 1 then u else v) *\\<^sub>R (if i = 1 then x else y)) =\n  (if 1 = 1 then u else v) *\\<^sub>R (if 1 = 1 then x else y) +\n  (if 2 = 1 then u else v) *\\<^sub>R (if 2 = 1 then x else y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2.\n        (if i = 1 then u else v) *\\<^sub>R (if i = 1 then x else y)) =\n    u *\\<^sub>R x + v *\\<^sub>R y", "using xys uv1"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2.\n      (if i = 1 then u else v) *\\<^sub>R (if i = 1 then x else y)) =\n  (if 1 = 1 then u else v) *\\<^sub>R (if 1 = 1 then x else y) +\n  (if 2 = 1 then u else v) *\\<^sub>R (if 2 = 1 then x else y)\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2.\n        (if i = 1 then u else v) *\\<^sub>R (if i = 1 then x else y)) =\n    u *\\<^sub>R x + v *\\<^sub>R y", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "have \"(SUM i = 1..2. ereal (uv i) * f (xy i)) = ereal u * f x + ereal v * f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) =\n    ereal u * f x + ereal v * f y", "using sum_2[of \"(\\<lambda>i. ereal (uv i) * f (xy i))\"]"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) =\n  ereal (uv 1) * f (xy 1) + ereal (uv 2) * f (xy 2)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) =\n    ereal u * f x + ereal v * f y", "unfolding xy_def uv_def"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2.\n      ereal (if i = 1 then u else v) * f (if i = 1 then x else y)) =\n  ereal (if 1 = 1 then u else v) * f (if 1 = 1 then x else y) +\n  ereal (if 2 = 1 then u else v) * f (if 2 = 1 then x else y)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2.\n        ereal (if i = 1 then u else v) * f (if i = 1 then x else y)) =\n    ereal u * f x + ereal v * f y", "using xys uv1"], ["proof (prove)\nusing this:\n  (\\<Sum>i = 1..2.\n      ereal (if i = 1 then u else v) * f (if i = 1 then x else y)) =\n  ereal (if 1 = 1 then u else v) * f (if 1 = 1 then x else y) +\n  ereal (if 2 = 1 then u else v) * f (if 2 = 1 then x else y)\n  x \\<in> s\n  y \\<in> s\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 1..2.\n        ereal (if i = 1 then u else v) * f (if i = 1 then x else y)) =\n    ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) = ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s\n  sum uv {1..2} = 1\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\n  (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) = ereal u * f x + ereal v * f y", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s\n  sum uv {1..2} = 1\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\n  (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) = ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using \\<open>?lhs\\<close>[rule_format, of \"2\" uv xy]"], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s\n  sum uv {1..2} = 1\n  (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i) = u *\\<^sub>R x + v *\\<^sub>R y\n  (\\<Sum>i = 1..2. ereal (uv i) * f (xy i)) = ereal u * f x + ereal v * f y\n  (\\<forall>i\\<in>{1..2}. 0 \\<le> uv i \\<and> xy i \\<in> s) \\<and>\n  sum uv {1..2} = 1 \\<Longrightarrow>\n  f (\\<Sum>i = 1..2. uv i *\\<^sub>R xy i)\n  \\<le> (\\<Sum>i = 1..2. ereal (uv i) * f (xy i))\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "hence \"?rhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> s; ?y2 \\<in> s; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>s.\n       \\<forall>y\\<in>s.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "}"], ["proof (state)\nthis:\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)) \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "ultimately"], ["proof (chain)\npicking this:\n  Lower_Semicontinuous.convex_on s f \\<Longrightarrow>\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)) \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on s f", "show ?thesis"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on s f \\<Longrightarrow>\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i))\n  \\<forall>k u x.\n     (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n     sum u {1..k} = 1 \\<longrightarrow>\n     f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n     \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)) \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on s f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on s f =\n    (\\<forall>k u x.\n        (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n        sum u {1..k} = 1 \\<longrightarrow>\n        f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n        \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))", "by blast"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on s f =\n  (\\<forall>k u x.\n      (\\<forall>i\\<in>{1..k}. 0 \\<le> u i \\<and> x i \\<in> s) \\<and>\n      sum u {1..k} = 1 \\<longrightarrow>\n      f (\\<Sum>i = 1..k. u i *\\<^sub>R x i)\n      \\<le> (\\<Sum>i = 1..k. ereal (u i) * f (x i)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_Epigraph:\n  assumes \"convex S\"\n  shows \"convex(Epigraph S f) \\<longleftrightarrow> convex_on S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume rhs: \"convex(Epigraph S f)\""], ["proof (state)\nthis:\n  convex (Epigraph S f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "{"], ["proof (state)\nthis:\n  convex (Epigraph S f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume xy: \"x:S\" \"y:S\""], ["proof (state)\nthis:\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume \"u=0 | v=0\""], ["proof (state)\nthis:\n  u = 0 \\<or> v = 0\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  u = 0 \\<or> v = 0\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using uv"], ["proof (prove)\nusing this:\n  u = 0 \\<or> v = 0\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by (auto simp: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  u = 0 \\<or> v = 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "moreover"], ["proof (state)\nthis:\n  u = 0 \\<or> v = 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  u = 0 \\<or> v = 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume \"f x = \\<infinity> | f y = \\<infinity>\""], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using uv"], ["proof (prove)\nusing this:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by (auto simp: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "moreover"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume a: \"f x = -\\<infinity> \\<and> (f y \\<noteq> \\<infinity>) \\<and> ~(u=0)\""], ["proof (state)\nthis:\n  f x = - \\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "from this"], ["proof (chain)\npicking this:\n  f x = - \\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0", "obtain z where \"f y \\<le> ereal z\""], ["proof (prove)\nusing this:\n  f x = - \\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>z. f y \\<le> ereal z \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply (cases \"f y\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>\\<And>z. f y \\<le> ereal z \\<Longrightarrow> thesis;\n        f x = - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0;\n        f y = ereal r\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>z. f y \\<le> ereal z \\<Longrightarrow> thesis;\n     f x = - \\<infinity> \\<and>\n     f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0;\n     f y = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis\n 3. \\<lbrakk>\\<And>z. f y \\<le> ereal z \\<Longrightarrow> thesis;\n     f x = - \\<infinity> \\<and>\n     f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0;\n     f y = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f y \\<le> ereal z\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence yz: \"(y,z) : Epigraph S f\""], ["proof (prove)\nusing this:\n  f y \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f y \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using xy"], ["proof (prove)\nusing this:\n  f y \\<le> ereal z\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. (y, z) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (y, z) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  (y, z) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "fix C::real"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "have \"(x, (1/u)*(C - v * z)) : Epigraph S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, 1 / u * (C - v * z)) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x, 1 / u * (C - v * z))\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using a xy"], ["proof (prove)\nusing this:\n  f x = - \\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. (x, 1 / u * (C - v * z))\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, 1 / u * (C - v * z)) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(u *\\<^sub>R x + v *\\<^sub>R y, C) : Epigraph S f\""], ["proof (prove)\nusing this:\n  (x, 1 / u * (C - v * z)) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f", "using rhs convexD[of \"Epigraph S f\" \"(x, (1/u)*(C - v * z))\" \"(y,z)\" u v] uv yz a"], ["proof (prove)\nusing this:\n  (x, 1 / u * (C - v * z)) \\<in> Epigraph S f\n  convex (Epigraph S f)\n  \\<lbrakk>convex (Epigraph S f);\n   (x, 1 / u * (C - v * z)) \\<in> Epigraph S f; (y, z) \\<in> Epigraph S f;\n   0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n  \\<Longrightarrow> u *\\<^sub>R (x, 1 / u * (C - v * z)) +\n                    v *\\<^sub>R (y, z)\n                    \\<in> Epigraph S f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  (y, z) \\<in> Epigraph S f\n  f x = - \\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f", "by auto"], ["proof (state)\nthis:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C)\""], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C)\n  \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"f (u *\\<^sub>R x + v *\\<^sub>R y) = -\\<infinity>\""], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "using ereal_bot"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n  (\\<And>B. ?x \\<le> ereal B) \\<Longrightarrow> ?x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f x = - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "moreover"], ["proof (state)\nthis:\n  f x = - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  f x = - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume a: \"(f x \\<noteq> \\<infinity>) \\<and> f y = -\\<infinity> \\<and> ~(v=0)\""], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and> f y = - \\<infinity> \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "from this"], ["proof (chain)\npicking this:\n  f x \\<noteq> \\<infinity> \\<and> f y = - \\<infinity> \\<and> v \\<noteq> 0", "obtain z where \"f x \\<le> ereal z\""], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity> \\<and> f y = - \\<infinity> \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>z. f x \\<le> ereal z \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply (cases \"f x\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>r.\n       \\<lbrakk>\\<And>z. f x \\<le> ereal z \\<Longrightarrow> thesis;\n        f x \\<noteq> \\<infinity> \\<and>\n        f y = - \\<infinity> \\<and> v \\<noteq> 0;\n        f x = ereal r\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<lbrakk>\\<And>z. f x \\<le> ereal z \\<Longrightarrow> thesis;\n     f x \\<noteq> \\<infinity> \\<and>\n     f y = - \\<infinity> \\<and> v \\<noteq> 0;\n     f x = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis\n 3. \\<lbrakk>\\<And>z. f x \\<le> ereal z \\<Longrightarrow> thesis;\n     f x \\<noteq> \\<infinity> \\<and>\n     f y = - \\<infinity> \\<and> v \\<noteq> 0;\n     f x = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence xz: \"(x,z) : Epigraph S f\""], ["proof (prove)\nusing this:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f x \\<le> ereal z\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using xy"], ["proof (prove)\nusing this:\n  f x \\<le> ereal z\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  (x, z) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "fix C::real"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "have \"(y, (1/v)*(C - u * z)) : Epigraph S f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, 1 / v * (C - u * z)) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (y, 1 / v * (C - u * z))\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using a xy"], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity> \\<and> f y = - \\<infinity> \\<and> v \\<noteq> 0\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. (y, 1 / v * (C - u * z))\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (y, 1 / v * (C - u * z)) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(u *\\<^sub>R x + v *\\<^sub>R y, C) : Epigraph S f\""], ["proof (prove)\nusing this:\n  (y, 1 / v * (C - u * z)) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f", "using rhs convexD[of \"Epigraph S f\" \"(x,z)\" \"(y, (1/v)*(C - u * z))\" u v] uv xz a"], ["proof (prove)\nusing this:\n  (y, 1 / v * (C - u * z)) \\<in> Epigraph S f\n  convex (Epigraph S f)\n  \\<lbrakk>convex (Epigraph S f); (x, z) \\<in> Epigraph S f;\n   (y, 1 / v * (C - u * z)) \\<in> Epigraph S f; 0 \\<le> u; 0 \\<le> v;\n   u + v = 1\\<rbrakk>\n  \\<Longrightarrow> u *\\<^sub>R (x, z) +\n                    v *\\<^sub>R (y, 1 / v * (C - u * z))\n                    \\<in> Epigraph S f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  (x, z) \\<in> Epigraph S f\n  f x \\<noteq> \\<infinity> \\<and> f y = - \\<infinity> \\<and> v \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f", "by auto"], ["proof (state)\nthis:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C)\""], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, C)\n  \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal C\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"f (u *\\<^sub>R x + v *\\<^sub>R y) = -\\<infinity>\""], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "using ereal_bot"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal ?C2\n  (\\<And>B. ?x \\<le> ereal B) \\<Longrightarrow> ?x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and>\n  f y = - \\<infinity> \\<and> v \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "moreover"], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and>\n  f y = - \\<infinity> \\<and> v \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and>\n  f y = - \\<infinity> \\<and> v \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume a: \"f x \\<noteq> \\<infinity> \\<and> f x \\<noteq> -\\<infinity> \\<and> f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> -\\<infinity>\""], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "from this"], ["proof (chain)\npicking this:\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>", "obtain fx fy where fxy: \"f x = ereal fx \\<and> f y = ereal fy\""], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>fx fy.\n        f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (cases \"f x\", cases \"f y\")"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>r ra.\n       \\<lbrakk>\\<And>fx fy.\n                   f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n                   thesis;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f x = ereal r;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f y = ereal ra\\<rbrakk>\n       \\<Longrightarrow> thesis\n 2. \\<And>r.\n       \\<lbrakk>\\<And>fx fy.\n                   f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n                   thesis;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f x = ereal r;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f y = \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> thesis\n 3. \\<And>r.\n       \\<lbrakk>\\<And>fx fy.\n                   f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n                   thesis;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f x = ereal r;\n        f x \\<noteq> \\<infinity> \\<and>\n        f x \\<noteq> - \\<infinity> \\<and>\n        f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n        f y = - \\<infinity>\\<rbrakk>\n       \\<Longrightarrow> thesis\n 4. \\<lbrakk>\\<And>fx fy.\n                f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n                thesis;\n     f x \\<noteq> \\<infinity> \\<and>\n     f x \\<noteq> - \\<infinity> \\<and>\n     f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n     f x = \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis\n 5. \\<lbrakk>\\<And>fx fy.\n                f x = ereal fx \\<and> f y = ereal fy \\<Longrightarrow>\n                thesis;\n     f x \\<noteq> \\<infinity> \\<and>\n     f x \\<noteq> - \\<infinity> \\<and>\n     f y \\<noteq> \\<infinity> \\<and> f y \\<noteq> - \\<infinity>;\n     f x = - \\<infinity>\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f x = ereal fx \\<and> f y = ereal fy\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(x, fx) : Epigraph S f \\<and> (y, fy) : Epigraph S f\""], ["proof (prove)\nusing this:\n  f x = ereal fx \\<and> f y = ereal fy\n\ngoal (1 subgoal):\n 1. (x, fx) \\<in> Epigraph S f \\<and> (y, fy) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f x = ereal fx \\<and> f y = ereal fy\n\ngoal (1 subgoal):\n 1. (x, fx)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<and>\n    (y, fy)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using xy"], ["proof (prove)\nusing this:\n  f x = ereal fx \\<and> f y = ereal fy\n  x \\<in> S\n  y \\<in> S\n\ngoal (1 subgoal):\n 1. (x, fx)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<and>\n    (y, fy)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, fx) \\<in> Epigraph S f \\<and> (y, fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"(u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) : Epigraph S f\""], ["proof (prove)\nusing this:\n  (x, fx) \\<in> Epigraph S f \\<and> (y, fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f", "using rhs convexD[of \"Epigraph S f\" \"(x,fx)\" \"(y,fy)\" u v] uv"], ["proof (prove)\nusing this:\n  (x, fx) \\<in> Epigraph S f \\<and> (y, fy) \\<in> Epigraph S f\n  convex (Epigraph S f)\n  \\<lbrakk>convex (Epigraph S f); (x, fx) \\<in> Epigraph S f;\n   (y, fy) \\<in> Epigraph S f; 0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n  \\<Longrightarrow> u *\\<^sub>R (x, fx) + v *\\<^sub>R (y, fy)\n                    \\<in> Epigraph S f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f", "by auto"], ["proof (state)\nthis:\n  (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy)\n  \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using fxy"], ["proof (prove)\nusing this:\n  (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy)\n  \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n  f x = ereal fx \\<and> f y = ereal fy\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and>\n  f y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "ultimately"], ["proof (chain)\npicking this:\n  u = 0 \\<or> v = 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x = - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x \\<noteq> \\<infinity> \\<and>\n  f y = - \\<infinity> \\<and> v \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and>\n  f y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "show ?thesis"], ["proof (prove)\nusing this:\n  u = 0 \\<or> v = 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x = - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and> u \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x \\<noteq> \\<infinity> \\<and>\n  f y = - \\<infinity> \\<and> v \\<noteq> 0 \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  f x \\<noteq> \\<infinity> \\<and>\n  f x \\<noteq> - \\<infinity> \\<and>\n  f y \\<noteq> \\<infinity> \\<and>\n  f y \\<noteq> - \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by blast"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> S; ?y2 \\<in> S; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "hence \"convex_on S f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> S; ?y2 \\<in> S; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on S f", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> S; ?y2 \\<in> S; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>S.\n       \\<forall>y\\<in>S.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "}"], ["proof (state)\nthis:\n  convex (Epigraph S f) \\<Longrightarrow> Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "moreover"], ["proof (state)\nthis:\n  convex (Epigraph S f) \\<Longrightarrow> Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "{"], ["proof (state)\nthis:\n  convex (Epigraph S f) \\<Longrightarrow> Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume lhs: \"convex_on S f\""], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "{"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "fix x y fx fy"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume xy: \"(x,fx):Epigraph S f\" \"(y,fy):Epigraph S f\""], ["proof (state)\nthis:\n  (x, fx) \\<in> Epigraph S f\n  (y, fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "hence le: \"f x \\<le> ereal fx \\<and> f y \\<le> ereal fy\""], ["proof (prove)\nusing this:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f x \\<le> ereal fx \\<and> f y \\<le> ereal fy", "using xy"], ["proof (prove)\nusing this:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  (x, fx) \\<in> Epigraph S f\n  (y, fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. f x \\<le> ereal fx \\<and> f y \\<le> ereal fy", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  (x, fx) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n  (y, fy) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. f x \\<le> ereal fx \\<and> f y \\<le> ereal fy", "by auto"], ["proof (state)\nthis:\n  f x \\<le> ereal fx \\<and> f y \\<le> ereal fy\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "have \"x:S \\<and> y:S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> S \\<and> y \\<in> S", "using xy"], ["proof (prove)\nusing this:\n  (x, fx) \\<in> Epigraph S f\n  (y, fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. x \\<in> S \\<and> y \\<in> S", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  (x, fx) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n  (y, fy) \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. x \\<in> S \\<and> y \\<in> S", "by auto"], ["proof (state)\nthis:\n  x \\<in> S \\<and> y \\<in> S\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "moreover"], ["proof (state)\nthis:\n  x \\<in> S \\<and> y \\<in> S\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "hence inS: \"u *\\<^sub>R x + v *\\<^sub>R y : S\""], ["proof (prove)\nusing this:\n  x \\<in> S \\<and> y \\<in> S\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<in> S", "using assms uv convexD[of S]"], ["proof (prove)\nusing this:\n  x \\<in> S \\<and> y \\<in> S\n  convex S\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  \\<lbrakk>convex S; ?x \\<in> S; ?y \\<in> S; 0 \\<le> ?u; 0 \\<le> ?v;\n   ?u + ?v = 1\\<rbrakk>\n  \\<Longrightarrow> ?u *\\<^sub>R ?x + ?v *\\<^sub>R ?y \\<in> S\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<in> S", "by auto"], ["proof (state)\nthis:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> S\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> S \\<and> y \\<in> S\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> S", "have \"f(u *\\<^sub>R x + v *\\<^sub>R y) \\<le> (ereal u) * f x + (ereal v) * f y\""], ["proof (prove)\nusing this:\n  x \\<in> S \\<and> y \\<in> S\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> S\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using lhs convex_on_ereal_mem[of S f x y u v] uv"], ["proof (prove)\nusing this:\n  x \\<in> S \\<and> y \\<in> S\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> S\n  Lower_Semicontinuous.convex_on S f\n  \\<lbrakk>Lower_Semicontinuous.convex_on S f; x \\<in> S; y \\<in> S;\n   0 \\<le> u; 0 \\<le> v; u + v = 1\\<rbrakk>\n  \\<Longrightarrow> f (u *\\<^sub>R x + v *\\<^sub>R y)\n                    \\<le> ereal u * f x + ereal v * f y\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "also"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "have \"\\<dots> \\<le> (ereal u) * (ereal fx) + (ereal v) * (ereal fy)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal u * f x + ereal v * f y\n    \\<le> ereal u * ereal fx + ereal v * ereal fy", "apply (subst add_mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. ereal u * f x \\<le> ereal u * ereal fx\n 2. ereal v * f y \\<le> ereal v * ereal fy\n 3. True", "apply (subst ereal_mult_left_mono)"], ["proof (prove)\ngoal (5 subgoals):\n 1. f x \\<le> ereal fx\n 2. 0 \\<le> ereal u\n 3. True\n 4. ereal v * f y \\<le> ereal v * ereal fy\n 5. True", "prefer 4"], ["proof (prove)\ngoal (5 subgoals):\n 1. ereal v * f y \\<le> ereal v * ereal fy\n 2. f x \\<le> ereal fx\n 3. 0 \\<le> ereal u\n 4. True\n 5. True", "apply (subst ereal_mult_left_mono)"], ["proof (prove)\ngoal (7 subgoals):\n 1. f y \\<le> ereal fy\n 2. 0 \\<le> ereal v\n 3. True\n 4. f x \\<le> ereal fx\n 5. 0 \\<le> ereal u\n 6. True\n 7. True", "using le uv"], ["proof (prove)\nusing this:\n  f x \\<le> ereal fx \\<and> f y \\<le> ereal fy\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (7 subgoals):\n 1. f y \\<le> ereal fy\n 2. 0 \\<le> ereal v\n 3. True\n 4. f x \\<le> ereal fx\n 5. 0 \\<le> ereal u\n 6. True\n 7. True", "by auto"], ["proof (state)\nthis:\n  ereal u * f x + ereal v * f y\n  \\<le> ereal u * ereal fx + ereal v * ereal fy\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "also"], ["proof (state)\nthis:\n  ereal u * f x + ereal v * f y\n  \\<le> ereal u * ereal fx + ereal v * ereal fy\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "have \"\\<dots> = ereal (u * fx + v * fy)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal u * ereal fx + ereal v * ereal fy = ereal (u * fx + v * fy)", "by auto"], ["proof (state)\nthis:\n  ereal u * ereal fx + ereal v * ereal fy = ereal (u * fx + v * fy)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "finally"], ["proof (chain)\npicking this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal (u * fx + v * fy)", "have \"(u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) : Epigraph S f\""], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal (u * fx + v * fy)\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f", "unfolding Epigraph_def"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal (u * fx + v * fy)\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "using inS"], ["proof (prove)\nusing this:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal (u * fx + v * fy)\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> S\n\ngoal (1 subgoal):\n 1. (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy)\n    \\<in> {xy. fst xy \\<in> S \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (u *\\<^sub>R x + v *\\<^sub>R y, u * fx + v * fy) \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?x2, ?fx2) \\<in> Epigraph S f; (?y2, ?fy2) \\<in> Epigraph S f;\n   0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2,\n                     ?u2 * ?fx2 + ?v2 * ?fy2)\n                    \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "hence \"convex(Epigraph S f)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?fx2) \\<in> Epigraph S f; (?y2, ?fy2) \\<in> Epigraph S f;\n   0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2,\n                     ?u2 * ?fx2 + ?v2 * ?fy2)\n                    \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f)", "unfolding convex_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?x2, ?fx2) \\<in> Epigraph S f; (?y2, ?fy2) \\<in> Epigraph S f;\n   0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2,\n                     ?u2 * ?fx2 + ?v2 * ?fy2)\n                    \\<in> Epigraph S f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>Epigraph S f.\n       \\<forall>y\\<in>Epigraph S f.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                u *\\<^sub>R x + v *\\<^sub>R y \\<in> Epigraph S f", "by auto"], ["proof (state)\nthis:\n  convex (Epigraph S f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "}"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on S f \\<Longrightarrow> convex (Epigraph S f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "ultimately"], ["proof (chain)\npicking this:\n  convex (Epigraph S f) \\<Longrightarrow> Lower_Semicontinuous.convex_on S f\n  Lower_Semicontinuous.convex_on S f \\<Longrightarrow> convex (Epigraph S f)", "show ?thesis"], ["proof (prove)\nusing this:\n  convex (Epigraph S f) \\<Longrightarrow> Lower_Semicontinuous.convex_on S f\n  Lower_Semicontinuous.convex_on S f \\<Longrightarrow> convex (Epigraph S f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f", "by auto"], ["proof (state)\nthis:\n  convex (Epigraph S f) = Lower_Semicontinuous.convex_on S f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_EpigraphI:\n  \"convex_on s f \\<Longrightarrow> convex s \\<Longrightarrow> convex(Epigraph s f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Lower_Semicontinuous.convex_on s f; convex s\\<rbrakk>\n    \\<Longrightarrow> convex (Epigraph s f)", "unfolding convex_Epigraph"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Lower_Semicontinuous.convex_on s f; convex s\\<rbrakk>\n    \\<Longrightarrow> Lower_Semicontinuous.convex_on s f", "by auto"], ["", "definition\n  concave_on :: \"'a::real_vector set \\<Rightarrow> ('a \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"concave_on S f \\<longleftrightarrow> convex_on S (\\<lambda>x. - f x)\""], ["", "definition\n  finite_on :: \"'a::real_vector set \\<Rightarrow> ('a \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"finite_on S f \\<longleftrightarrow> (\\<forall>x\\<in>S. (f x \\<noteq> \\<infinity> \\<and> f x \\<noteq> -\\<infinity>))\""], ["", "definition\n  affine_on :: \"'a::real_vector set \\<Rightarrow> ('a \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"affine_on S f \\<longleftrightarrow> (convex_on S f \\<and> concave_on S f \\<and> finite_on S f)\""], ["", "definition\n  \"domain (f::_ \\<Rightarrow> ereal) = {x. f x < \\<infinity>}\""], ["", "lemma domain_Epigraph_aux:\n  assumes \"x \\<noteq> \\<infinity>\"\n  shows \"\\<exists>r. x\\<le>ereal r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>r. x \\<le> ereal r", "using assms"], ["proof (prove)\nusing this:\n  x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<exists>r. x \\<le> ereal r", "by (cases x) auto"], ["", "lemma domain_Epigraph:\n  \"domain f = {x. \\<exists>y. (x,y) \\<in> Epigraph UNIV f}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domain f = {x. \\<exists>y. (x, y) \\<in> Epigraph UNIV f}", "unfolding domain_def Epigraph_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x. f x < \\<infinity>} =\n    {x. \\<exists>y.\n           (x, y)\n           \\<in> {xy.\n                  fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}}", "using domain_Epigraph_aux"], ["proof (prove)\nusing this:\n  ?x \\<noteq> \\<infinity> \\<Longrightarrow> \\<exists>r. ?x \\<le> ereal r\n\ngoal (1 subgoal):\n 1. {x. f x < \\<infinity>} =\n    {x. \\<exists>y.\n           (x, y)\n           \\<in> {xy.\n                  fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}}", "by auto"], ["", "lemma domain_Epigraph_fst:\n  \"domain f = fst ` (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "assume \"x:domain f\""], ["proof (state)\nthis:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "from this"], ["proof (chain)\npicking this:\n  x \\<in> domain f", "obtain y where \"(x,y):Epigraph UNIV f\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        (x, y) \\<in> Epigraph UNIV f \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using domain_Epigraph[of f]"], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  domain f = {x. \\<exists>y. (x, y) \\<in> Epigraph UNIV f}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        (x, y) \\<in> Epigraph UNIV f \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x, y) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "moreover"], ["proof (state)\nthis:\n  (x, y) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "have \"x = fst (x,y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = fst (x, y)", "by auto"], ["proof (state)\nthis:\n  x = fst (x, y)\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "ultimately"], ["proof (chain)\npicking this:\n  (x, y) \\<in> Epigraph UNIV f\n  x = fst (x, y)", "have \"x:fst ` (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  (x, y) \\<in> Epigraph UNIV f\n  x = fst (x, y)\n\ngoal (1 subgoal):\n 1. x \\<in> fst ` Epigraph UNIV f", "unfolding image_def"], ["proof (prove)\nusing this:\n  (x, y) \\<in> Epigraph UNIV f\n  x = fst (x, y)\n\ngoal (1 subgoal):\n 1. x \\<in> {y. \\<exists>x\\<in>Epigraph UNIV f. y = fst x}", "by blast"], ["proof (state)\nthis:\n  x \\<in> fst ` Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> fst ` Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "from this"], ["proof (chain)\npicking this:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> fst ` Epigraph UNIV f", "show ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> fst ` Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "using domain_Epigraph[of f]"], ["proof (prove)\nusing this:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> fst ` Epigraph UNIV f\n  domain f = {x. \\<exists>y. (x, y) \\<in> Epigraph UNIV f}\n\ngoal (1 subgoal):\n 1. domain f = fst ` Epigraph UNIV f", "by auto"], ["proof (state)\nthis:\n  domain f = fst ` Epigraph UNIV f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_on_domain:\n  \"convex_on (domain f) f \\<longleftrightarrow> convex_on UNIV f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "assume lhs: \"convex_on (domain f) f\""], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on (domain f) f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "{"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on (domain f) f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "have \"f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume \"f x = \\<infinity> | f y = \\<infinity>\""], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using uv"], ["proof (prove)\nusing this:\n  f x = \\<infinity> \\<or> f y = \\<infinity>\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by (auto simp: zero_ereal_def[symmetric] one_ereal_def[symmetric])"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "moreover"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "{"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "assume \"~ (f x = \\<infinity> | f y = \\<infinity>)\""], ["proof (state)\nthis:\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>)\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence \"x : domain f \\<and> y : domain f\""], ["proof (prove)\nusing this:\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>)\n\ngoal (1 subgoal):\n 1. x \\<in> domain f \\<and> y \\<in> domain f", "unfolding domain_def"], ["proof (prove)\nusing this:\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>)\n\ngoal (1 subgoal):\n 1. x \\<in> {x. f x < \\<infinity>} \\<and> y \\<in> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  x \\<in> domain f \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "hence ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> domain f \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using lhs"], ["proof (prove)\nusing this:\n  x \\<in> domain f \\<and> y \\<in> domain f\n  Lower_Semicontinuous.convex_on (domain f) f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  x \\<in> domain f \\<and> y \\<in> domain f\n  \\<forall>x\\<in>domain f.\n     \\<forall>y\\<in>domain f.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "using uv"], ["proof (prove)\nusing this:\n  x \\<in> domain f \\<and> y \\<in> domain f\n  \\<forall>x\\<in>domain f.\n     \\<forall>y\\<in>domain f.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              f (u *\\<^sub>R x + v *\\<^sub>R y)\n              \\<le> ereal u * f x + ereal v * f y\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "}"], ["proof (state)\nthis:\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>) \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "ultimately"], ["proof (chain)\npicking this:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>) \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "show ?thesis"], ["proof (prove)\nusing this:\n  f x = \\<infinity> \\<or> f y = \\<infinity> \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n  \\<not> (f x = \\<infinity> \\<or> f y = \\<infinity>) \\<Longrightarrow>\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y", "by blast"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) \\<le> ereal u * f x + ereal v * f y\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "}"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "hence \"convex_on UNIV f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?u2; 0 \\<le> ?v2; ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2)\n                    \\<le> ereal ?u2 * f ?x2 + ereal ?v2 * f ?y2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>UNIV.\n       \\<forall>y\\<in>UNIV.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "}"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on (domain f) f \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "from this"], ["proof (chain)\npicking this:\n  Lower_Semicontinuous.convex_on (domain f) f \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on UNIV f", "show ?thesis"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on (domain f) f \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "using convex_on_ereal_subset"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on (domain f) f \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<lbrakk>Lower_Semicontinuous.convex_on ?t ?f; ?s \\<subseteq> ?t\\<rbrakk>\n  \\<Longrightarrow> Lower_Semicontinuous.convex_on ?s ?f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    Lower_Semicontinuous.convex_on UNIV f", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on (domain f) f =\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_on_domain2:\n  \"convex_on (domain f) f \\<longleftrightarrow> (\\<forall>S. convex_on S f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f =\n    (\\<forall>S. Lower_Semicontinuous.convex_on S f)", "by (metis convex_on_domain convex_on_ereal_univ)"], ["", "lemma convex_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"convex (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (domain f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. convex (domain f)", "have \"convex (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (Epigraph UNIV f)", "using assms convex_Epigraph"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex ?S \\<Longrightarrow>\n  convex (Epigraph ?S ?f) = Lower_Semicontinuous.convex_on ?S ?f\n\ngoal (1 subgoal):\n 1. convex (Epigraph UNIV f)", "by auto"], ["proof (state)\nthis:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. convex (domain f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. convex (domain f)", "unfolding domain_Epigraph_fst"], ["proof (prove)\nusing this:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. convex (fst ` Epigraph UNIV f)", "apply (subst convex_linear_image)"], ["proof (prove)\ngoal (3 subgoals):\n 1. convex (Epigraph UNIV f) \\<Longrightarrow> linear fst\n 2. convex (Epigraph UNIV f) \\<Longrightarrow> convex (Epigraph UNIV f)\n 3. convex (Epigraph UNIV f) \\<Longrightarrow> True", "using linear_fst linear_conv_bounded_linear"], ["proof (prove)\nusing this:\n  linear fst\n  linear ?f = bounded_linear ?f\n\ngoal (3 subgoals):\n 1. convex (Epigraph UNIV f) \\<Longrightarrow> linear fst\n 2. convex (Epigraph UNIV f) \\<Longrightarrow> convex (Epigraph UNIV f)\n 3. convex (Epigraph UNIV f) \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  convex (domain f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma infinite_convex_domain_iff:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"\\<forall>x. (f x = \\<infinity> | f x = -\\<infinity>)\"\n  shows \"convex_on UNIV f \\<longleftrightarrow> convex (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "assume dom: \"convex (domain f)\""], ["proof (state)\nthis:\n  convex (domain f)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "{"], ["proof (state)\nthis:\n  convex (domain f)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "assume \"x:domain f\" \"y:domain f\""], ["proof (state)\nthis:\n  x \\<in> domain f\n  y \\<in> domain f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "moreover"], ["proof (state)\nthis:\n  x \\<in> domain f\n  y \\<in> domain f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "fix u v ::real"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "assume uv: \"0 \\<le> u\" \"0 \\<le> v\" \"u + v = 1\""], ["proof (state)\nthis:\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> domain f\n  y \\<in> domain f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1", "have \"u *\\<^sub>R x + v *\\<^sub>R y : domain f\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  y \\<in> domain f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f", "using dom"], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  y \\<in> domain f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  convex (domain f)\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f", "unfolding convex_def"], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  y \\<in> domain f\n  0 \\<le> u\n  0 \\<le> v\n  u + v = 1\n  \\<forall>x\\<in>domain f.\n     \\<forall>y\\<in>domain f.\n        \\<forall>u\\<ge>0.\n           \\<forall>v\\<ge>0.\n              u + v = 1 \\<longrightarrow>\n              u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f\n\ngoal (1 subgoal):\n 1. u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f", "by auto"], ["proof (state)\nthis:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "hence \"f(u *\\<^sub>R x + v *\\<^sub>R y) = -\\<infinity>\""], ["proof (prove)\nusing this:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "using assms"], ["proof (prove)\nusing this:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> domain f\n  \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  u *\\<^sub>R x + v *\\<^sub>R y \\<in> {x. f x < \\<infinity>}\n  \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f (u *\\<^sub>R x + v *\\<^sub>R y) = - \\<infinity>\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> domain f; ?y2 \\<in> domain f; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) =\n                    - \\<infinity>\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "hence \"convex_on (domain f) f\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> domain f; ?y2 \\<in> domain f; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) =\n                    - \\<infinity>\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on (domain f) f", "unfolding convex_on_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> domain f; ?y2 \\<in> domain f; 0 \\<le> ?u2; 0 \\<le> ?v2;\n   ?u2 + ?v2 = 1\\<rbrakk>\n  \\<Longrightarrow> f (?u2 *\\<^sub>R ?x2 + ?v2 *\\<^sub>R ?y2) =\n                    - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>domain f.\n       \\<forall>y\\<in>domain f.\n          \\<forall>u\\<ge>0.\n             \\<forall>v\\<ge>0.\n                u + v = 1 \\<longrightarrow>\n                f (u *\\<^sub>R x + v *\\<^sub>R y)\n                \\<le> ereal u * f x + ereal v * f y", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on (domain f) f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "hence \"convex_on UNIV f\""], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on (domain f) f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f", "by (metis convex_on_domain2)"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "}"], ["proof (state)\nthis:\n  convex (domain f) \\<Longrightarrow> Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  convex (domain f) \\<Longrightarrow> Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV f = convex (domain f)", "by (metis convex_domain)"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV f = convex (domain f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_PInfty_outside:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"convex S\"\n  shows \"convex_on UNIV (\\<lambda>x. if x:S then (f x) else \\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "define g where \"g x = (if x:S then -\\<infinity> else \\<infinity>::ereal)\" for x"], ["proof (state)\nthis:\n  g ?x = (if ?x \\<in> S then - \\<infinity> else \\<infinity>)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "hence \"convex_on UNIV g\""], ["proof (prove)\nusing this:\n  g ?x = (if ?x \\<in> S then - \\<infinity> else \\<infinity>)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV g", "apply (subst infinite_convex_domain_iff)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    \\<forall>x. g x = \\<infinity> \\<or> g x = - \\<infinity>\n 2. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    convex (domain g)", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n\ngoal (2 subgoals):\n 1. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    \\<forall>x. g x = \\<infinity> \\<or> g x = - \\<infinity>\n 2. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    convex (domain g)", "unfolding domain_def"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n\ngoal (2 subgoals):\n 1. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    \\<forall>x. g x = \\<infinity> \\<or> g x = - \\<infinity>\n 2. (\\<And>x.\n        g x =\n        (if x \\<in> S then - \\<infinity>\n         else \\<infinity>)) \\<Longrightarrow>\n    convex {x. g x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV g\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "moreover"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV g\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "have \"(\\<lambda>x. if x:S then (f x) else \\<infinity>) = (\\<lambda>x. max (f x) (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x \\<in> S then f x else \\<infinity>) =\n    (\\<lambda>x. max (f x) (g x))", "apply (subst fun_eq_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. (if x \\<in> S then f x else \\<infinity>) = max (f x) (g x)", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       (if x \\<in> S then f x else \\<infinity>) =\n       max (f x) (if x \\<in> S then - \\<infinity> else \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. if x \\<in> S then f x else \\<infinity>) =\n  (\\<lambda>x. max (f x) (g x))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "ultimately"], ["proof (chain)\npicking this:\n  Lower_Semicontinuous.convex_on UNIV g\n  (\\<lambda>x. if x \\<in> S then f x else \\<infinity>) =\n  (\\<lambda>x. max (f x) (g x))", "show ?thesis"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV g\n  (\\<lambda>x. if x \\<in> S then f x else \\<infinity>) =\n  (\\<lambda>x. max (f x) (g x))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "using convex_ereal_max assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV g\n  (\\<lambda>x. if x \\<in> S then f x else \\<infinity>) =\n  (\\<lambda>x. max (f x) (g x))\n  \\<lbrakk>Lower_Semicontinuous.convex_on ?s ?f;\n   Lower_Semicontinuous.convex_on ?s ?g\\<rbrakk>\n  \\<Longrightarrow> Lower_Semicontinuous.convex_on ?s\n                     (\\<lambda>x. max (?f x) (?g x))\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV\n   (\\<lambda>x. if x \\<in> S then f x else \\<infinity>)\n\ngoal:\nNo subgoals!", "qed"], ["", "definition\n  proper_on :: \"'a::real_vector set \\<Rightarrow> ('a \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"proper_on S f \\<longleftrightarrow> ((\\<forall>x\\<in>S. f x \\<noteq> -\\<infinity>) \\<and> (\\<exists>x\\<in>S. f x \\<noteq> \\<infinity>))\""], ["", "definition\n  proper :: \"('a::real_vector \\<Rightarrow> ereal) \\<Rightarrow> bool\" where\n  \"proper f \\<longleftrightarrow> proper_on UNIV f\""], ["", "lemma proper_iff:\n  \"proper f \\<longleftrightarrow> ((\\<forall>x. f x \\<noteq> -\\<infinity>) \\<and> (\\<exists>x. f x \\<noteq> \\<infinity>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proper f =\n    ((\\<forall>x. f x \\<noteq> - \\<infinity>) \\<and>\n     (\\<exists>x. f x \\<noteq> \\<infinity>))", "unfolding proper_def proper_on_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<forall>x\\<in>UNIV. f x \\<noteq> - \\<infinity>) \\<and>\n     (\\<exists>x\\<in>UNIV. f x \\<noteq> \\<infinity>)) =\n    ((\\<forall>x. f x \\<noteq> - \\<infinity>) \\<and>\n     (\\<exists>x. f x \\<noteq> \\<infinity>))", "by auto"], ["", "lemma improper_iff:\n  \"~(proper f) \\<longleftrightarrow> ((\\<exists>x. f x = -\\<infinity>) | (\\<forall>x. f x = \\<infinity>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> proper f) =\n    ((\\<exists>x. f x = - \\<infinity>) \\<or>\n     (\\<forall>x. f x = \\<infinity>))", "by (simp add: proper_iff)"], ["", "lemma ereal_MInf_plus[simp]: \"-\\<infinity> + x = (if x = \\<infinity> then \\<infinity> else -\\<infinity>::ereal)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - \\<infinity> + x =\n    (if x = \\<infinity> then \\<infinity> else - \\<infinity>)", "by simp"], ["", "lemma convex_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"\\<forall>x\\<in>rel_interior(domain f). f x = -\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "assume \"domain f = {}\""], ["proof (state)\nthis:\n  domain f = {}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "hence ?thesis"], ["proof (prove)\nusing this:\n  domain f = {}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "using rel_interior_empty"], ["proof (prove)\nusing this:\n  domain f = {}\n  rel_interior {} = {}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "}"], ["proof (state)\nthis:\n  domain f = {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "moreover"], ["proof (state)\nthis:\n  domain f = {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "{"], ["proof (state)\nthis:\n  domain f = {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "assume nemp: \"domain f \\<noteq> {}\""], ["proof (state)\nthis:\n  domain f \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "then"], ["proof (chain)\npicking this:\n  domain f \\<noteq> {}", "obtain u where u_def: \"f u = -\\<infinity>\""], ["proof (prove)\nusing this:\n  domain f \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        f u = - \\<infinity> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using assms improper_iff[of f]"], ["proof (prove)\nusing this:\n  domain f \\<noteq> {}\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  (\\<not> proper f) =\n  ((\\<exists>x. f x = - \\<infinity>) \\<or> (\\<forall>x. f x = \\<infinity>))\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        f u = - \\<infinity> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding domain_def"], ["proof (prove)\nusing this:\n  {x. f x < \\<infinity>} \\<noteq> {}\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  (\\<not> proper f) =\n  ((\\<exists>x. f x = - \\<infinity>) \\<or> (\\<forall>x. f x = \\<infinity>))\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        f u = - \\<infinity> \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "hence udom: \"u:domain f\""], ["proof (prove)\nusing this:\n  f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. u \\<in> domain f", "unfolding domain_def"], ["proof (prove)\nusing this:\n  f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. u \\<in> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  u \\<in> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "{"], ["proof (state)\nthis:\n  u \\<in> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "assume \"x:rel_interior(domain f)\""], ["proof (state)\nthis:\n  x \\<in> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "then"], ["proof (chain)\npicking this:\n  x \\<in> rel_interior (domain f)", "obtain m where m_def: \"m>1 \\<and> (1 - m) *\\<^sub>R u + m *\\<^sub>R x : domain f\""], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. (\\<And>m.\n        1 < m \\<and>\n        (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using convex_rel_interior_iff[of \"domain f\" x] nemp convex_domain[of f] assms udom"], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f)\n  \\<lbrakk>convex (domain f); domain f \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> (x \\<in> rel_interior (domain f)) =\n                    (\\<forall>xa\\<in>domain f.\n                        \\<exists>e>1.\n                           (1 - e) *\\<^sub>R xa + e *\\<^sub>R x\n                           \\<in> domain f)\n  domain f \\<noteq> {}\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow> convex (domain f)\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  u \\<in> domain f\n\ngoal (1 subgoal):\n 1. (\\<And>m.\n        1 < m \\<and>\n        (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  1 < m \\<and> (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "define v where \"v = 1/m\""], ["proof (state)\nthis:\n  v = 1 / m\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "hence v01: \"0<v \\<and> v<1\""], ["proof (prove)\nusing this:\n  v = 1 / m\n\ngoal (1 subgoal):\n 1. 0 < v \\<and> v < 1", "using m_def"], ["proof (prove)\nusing this:\n  v = 1 / m\n  1 < m \\<and> (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f\n\ngoal (1 subgoal):\n 1. 0 < v \\<and> v < 1", "by auto"], ["proof (state)\nthis:\n  0 < v \\<and> v < 1\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "define y where \"y = (1 - m) *\\<^sub>R u + m *\\<^sub>R x\""], ["proof (state)\nthis:\n  y = (1 - m) *\\<^sub>R u + m *\\<^sub>R x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "have \"x = (1-v) *\\<^sub>R u+v *\\<^sub>R y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = (1 - v) *\\<^sub>R u + v *\\<^sub>R y", "unfolding v_def y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x =\n    (1 - 1 / m) *\\<^sub>R u +\n    (1 / m) *\\<^sub>R ((1 - m) *\\<^sub>R u + m *\\<^sub>R x)", "using m_def"], ["proof (prove)\nusing this:\n  1 < m \\<and> (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f\n\ngoal (1 subgoal):\n 1. x =\n    (1 - 1 / m) *\\<^sub>R u +\n    (1 / m) *\\<^sub>R ((1 - m) *\\<^sub>R u + m *\\<^sub>R x)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  x = (1 - v) *\\<^sub>R u + v *\\<^sub>R y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "hence \"f x \\<le> (1-ereal v) * f u+ereal v * f y\""], ["proof (prove)\nusing this:\n  x = (1 - v) *\\<^sub>R u + v *\\<^sub>R y\n\ngoal (1 subgoal):\n 1. f x \\<le> (1 - ereal v) * f u + ereal v * f y", "using convex_on_ereal_alt_mem[of \"UNIV\" f y u v] assms convex_UNIV v01"], ["proof (prove)\nusing this:\n  x = (1 - v) *\\<^sub>R u + v *\\<^sub>R y\n  \\<lbrakk>convex UNIV; Lower_Semicontinuous.convex_on UNIV f; y \\<in> UNIV;\n   u \\<in> UNIV; 0 \\<le> v; v \\<le> 1\\<rbrakk>\n  \\<Longrightarrow> f (v *\\<^sub>R y + (1 - v) *\\<^sub>R u)\n                    \\<le> ereal v * f y + (1 - ereal v) * f u\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  convex UNIV\n  0 < v \\<and> v < 1\n\ngoal (1 subgoal):\n 1. f x \\<le> (1 - ereal v) * f u + ereal v * f y", "by (simp add: add.commute)"], ["proof (state)\nthis:\n  f x \\<le> (1 - ereal v) * f u + ereal v * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "moreover"], ["proof (state)\nthis:\n  f x \\<le> (1 - ereal v) * f u + ereal v * f y\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "have \"f y < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f y < \\<infinity>", "using m_def y_def"], ["proof (prove)\nusing this:\n  1 < m \\<and> (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> domain f\n  y = (1 - m) *\\<^sub>R u + m *\\<^sub>R x\n\ngoal (1 subgoal):\n 1. f y < \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  1 < m \\<and>\n  (1 - m) *\\<^sub>R u + m *\\<^sub>R x \\<in> {x. f x < \\<infinity>}\n  y = (1 - m) *\\<^sub>R u + m *\\<^sub>R x\n\ngoal (1 subgoal):\n 1. f y < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f y < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "moreover"], ["proof (state)\nthis:\n  f y < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "have *: \"0 < 1 - ereal v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1 - ereal v", "using v01"], ["proof (prove)\nusing this:\n  0 < v \\<and> v < 1\n\ngoal (1 subgoal):\n 1. 0 < 1 - ereal v", "by (metis diff_gt_0_iff_gt ereal_less(2) ereal_minus(1) one_ereal_def)"], ["proof (state)\nthis:\n  0 < 1 - ereal v\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "moreover"], ["proof (state)\nthis:\n  0 < 1 - ereal v\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "from *"], ["proof (chain)\npicking this:\n  0 < 1 - ereal v", "have \"(1-ereal v) * f u = -\\<infinity>\""], ["proof (prove)\nusing this:\n  0 < 1 - ereal v\n\ngoal (1 subgoal):\n 1. (1 - ereal v) * f u = - \\<infinity>", "using u_def"], ["proof (prove)\nusing this:\n  0 < 1 - ereal v\n  f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (1 - ereal v) * f u = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  (1 - ereal v) * f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "ultimately"], ["proof (chain)\npicking this:\n  f x \\<le> (1 - ereal v) * f u + ereal v * f y\n  f y < \\<infinity>\n  0 < 1 - ereal v\n  (1 - ereal v) * f u = - \\<infinity>", "have \"f x = -\\<infinity>\""], ["proof (prove)\nusing this:\n  f x \\<le> (1 - ereal v) * f u + ereal v * f y\n  f y < \\<infinity>\n  0 < 1 - ereal v\n  (1 - ereal v) * f u = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = - \\<infinity>", "using v01"], ["proof (prove)\nusing this:\n  f x \\<le> (1 - ereal v) * f u + ereal v * f y\n  f y < \\<infinity>\n  0 < 1 - ereal v\n  (1 - ereal v) * f u = - \\<infinity>\n  0 < v \\<and> v < 1\n\ngoal (1 subgoal):\n 1. f x = - \\<infinity>", "by simp"], ["proof (state)\nthis:\n  f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> rel_interior (domain f) \\<Longrightarrow> f ?x2 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "hence ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> rel_interior (domain f) \\<Longrightarrow> f ?x2 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "}"], ["proof (state)\nthis:\n  domain f \\<noteq> {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "ultimately"], ["proof (chain)\npicking this:\n  domain f = {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n  domain f \\<noteq> {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  domain f = {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n  domain f \\<noteq> {} \\<Longrightarrow>\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "by blast"], ["proof (state)\nthis:\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_improper2:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"f x = \\<infinity> | f x = -\\<infinity> | x : rel_frontier (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "assume a: \"~(f x = \\<infinity> | f x = -\\<infinity>)\""], ["proof (state)\nthis:\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "hence \"x: domain f\""], ["proof (prove)\nusing this:\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. x \\<in> domain f", "unfolding domain_def"], ["proof (prove)\nusing this:\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. x \\<in> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "hence \"x : closure (domain f)\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f)", "using closure_subset"], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  ?S \\<subseteq> closure ?S\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f)", "by auto"], ["proof (state)\nthis:\n  x \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "moreover"], ["proof (state)\nthis:\n  x \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "have \"x \\<notin> rel_interior (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> rel_interior (domain f)", "using assms convex_improper a"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  \\<lbrakk>Lower_Semicontinuous.convex_on UNIV ?f; \\<not> proper ?f\\<rbrakk>\n  \\<Longrightarrow> \\<forall>x\\<in>rel_interior (domain ?f).\n                       ?f x = - \\<infinity>\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. x \\<notin> rel_interior (domain f)", "by auto"], ["proof (state)\nthis:\n  x \\<notin> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> closure (domain f)\n  x \\<notin> rel_interior (domain f)", "have \"x : rel_frontier (domain f)\""], ["proof (prove)\nusing this:\n  x \\<in> closure (domain f)\n  x \\<notin> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. x \\<in> rel_frontier (domain f)", "unfolding rel_frontier_def"], ["proof (prove)\nusing this:\n  x \\<in> closure (domain f)\n  x \\<notin> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f) - rel_interior (domain f)", "by auto"], ["proof (state)\nthis:\n  x \\<in> rel_frontier (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "}"], ["proof (state)\nthis:\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>) \\<Longrightarrow>\n  x \\<in> rel_frontier (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (f x = \\<infinity> \\<or> f x = - \\<infinity>) \\<Longrightarrow>\n  x \\<in> rel_frontier (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or>\n    f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)", "by auto"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or>\n  f x = - \\<infinity> \\<or> x \\<in> rel_frontier (domain f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_lsc_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  assumes \"lsc f\"\n  shows \"f x = \\<infinity> | f x = -\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "assume \"f x \\<noteq> \\<infinity>\""], ["proof (state)\nthis:\n  f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "hence \"lsc_at x f\""], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_at x f", "using assms"], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity>\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  lsc f\n\ngoal (1 subgoal):\n 1. lsc_at x f", "unfolding lsc_def"], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity>\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<not> proper f\n  \\<forall>x. lsc_at x f\n\ngoal (1 subgoal):\n 1. lsc_at x f", "by auto"], ["proof (state)\nthis:\n  lsc_at x f\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "have \"x: domain f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> domain f", "unfolding domain_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> {x. f x < \\<infinity>}", "using \\<open>f x \\<noteq> \\<infinity>\\<close>"], ["proof (prove)\nusing this:\n  f x \\<noteq> \\<infinity>\n\ngoal (1 subgoal):\n 1. x \\<in> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "hence \"x : closure (domain f)\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f)", "using closure_subset"], ["proof (prove)\nusing this:\n  x \\<in> domain f\n  ?S \\<subseteq> closure ?S\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f)", "by auto"], ["proof (state)\nthis:\n  x \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "hence x_def: \"x : closure (rel_interior (domain f))\""], ["proof (prove)\nusing this:\n  x \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. x \\<in> closure (rel_interior (domain f))", "by (metis assms(1) convex_closure_rel_interior convex_domain)"], ["proof (state)\nthis:\n  x \\<in> closure (rel_interior (domain f))\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "{"], ["proof (state)\nthis:\n  x \\<in> closure (rel_interior (domain f))\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "fix C"], ["proof (state)\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "assume \"C<f x\""], ["proof (state)\nthis:\n  C < f x\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "from this"], ["proof (chain)\npicking this:\n  C < f x", "obtain d where d_def: \"d>0 \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)\""], ["proof (prove)\nusing this:\n  C < f x\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<and>\n        (\\<forall>y.\n            dist x y < d \\<longrightarrow> C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using lst_at_delta[of x f] \\<open>lsc_at x f\\<close>"], ["proof (prove)\nusing this:\n  C < f x\n  lsc_at x f =\n  (\\<forall>C<f x.\n      \\<exists>d>0. \\<forall>y. dist x y < d \\<longrightarrow> C < f y)\n  lsc_at x f\n\ngoal (1 subgoal):\n 1. (\\<And>d.\n        0 < d \\<and>\n        (\\<forall>y.\n            dist x y < d \\<longrightarrow> C < f y) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < d \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "from this"], ["proof (chain)\npicking this:\n  0 < d \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)", "obtain y where y_def: \"y:rel_interior (domain f) \\<and> dist y x < d\""], ["proof (prove)\nusing this:\n  0 < d \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> rel_interior (domain f) \\<and>\n        dist y x < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using x_def closure_approachable[of x \"rel_interior (domain f)\"]"], ["proof (prove)\nusing this:\n  0 < d \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)\n  x \\<in> closure (rel_interior (domain f))\n  (x \\<in> closure (rel_interior (domain f))) =\n  (\\<forall>e>0. \\<exists>y\\<in>rel_interior (domain f). dist y x < e)\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        y \\<in> rel_interior (domain f) \\<and>\n        dist y x < d \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y \\<in> rel_interior (domain f) \\<and> dist y x < d\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "hence \"f y = -\\<infinity>\""], ["proof (prove)\nusing this:\n  y \\<in> rel_interior (domain f) \\<and> dist y x < d\n\ngoal (1 subgoal):\n 1. f y = - \\<infinity>", "by (metis assms(1) assms(2) convex_improper)"], ["proof (state)\nthis:\n  f y = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "moreover"], ["proof (state)\nthis:\n  f y = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "have \"C < f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C < f y", "using y_def d_def"], ["proof (prove)\nusing this:\n  y \\<in> rel_interior (domain f) \\<and> dist y x < d\n  0 < d \\<and> (\\<forall>y. dist x y < d \\<longrightarrow> C < f y)\n\ngoal (1 subgoal):\n 1. C < f y", "by (simp add: dist_commute)"], ["proof (state)\nthis:\n  C < f y\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "ultimately"], ["proof (chain)\npicking this:\n  f y = - \\<infinity>\n  C < f y", "have False"], ["proof (prove)\nusing this:\n  f y = - \\<infinity>\n  C < f y\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "}"], ["proof (state)\nthis:\n  ?C2 < f x \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "hence \"f x = -\\<infinity>\""], ["proof (prove)\nusing this:\n  ?C2 < f x \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. f x = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "}"], ["proof (state)\nthis:\n  f ?xa2 \\<noteq> \\<infinity> \\<Longrightarrow> f ?xa2 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "from this"], ["proof (chain)\npicking this:\n  f ?xa2 \\<noteq> \\<infinity> \\<Longrightarrow> f ?xa2 = - \\<infinity>", "show ?thesis"], ["proof (prove)\nusing this:\n  f ?xa2 \\<noteq> \\<infinity> \\<Longrightarrow> f ?xa2 = - \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = \\<infinity> \\<or> f x = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"convex_on UNIV (lsc_hull f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV (lsc_hull f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV (lsc_hull f)", "have \"convex(Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (Epigraph UNIV f)", "by (metis assms convex_EpigraphI convex_UNIV)"], ["proof (state)\nthis:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV (lsc_hull f)", "hence \"convex (Epigraph UNIV (lsc_hull f))\""], ["proof (prove)\nusing this:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. convex (Epigraph UNIV (lsc_hull f))", "by (metis convex_closure epigraph_lsc_hull)"], ["proof (state)\nthis:\n  convex (Epigraph UNIV (lsc_hull f))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV (lsc_hull f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  convex (Epigraph UNIV (lsc_hull f))\n\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV (lsc_hull f)", "by (metis convex_Epigraph convex_UNIV)"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV (lsc_hull f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma improper_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"~(proper f)\"\n  shows \"~(proper (lsc_hull f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "assume *: \"\\<forall>x. f x = \\<infinity>\""], ["proof (state)\nthis:\n  \\<forall>x. f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "then"], ["proof (chain)\npicking this:\n  \\<forall>x. f x = \\<infinity>", "have \"lsc f\""], ["proof (prove)\nusing this:\n  \\<forall>x. f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc f", "by (metis (full_types) UNIV_I lsc_at_open lsc_def open_UNIV)"], ["proof (state)\nthis:\n  lsc f\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "with *"], ["proof (chain)\npicking this:\n  \\<forall>x. f x = \\<infinity>\n  lsc f", "have \"\\<forall>x. (lsc_hull f) x = \\<infinity>\""], ["proof (prove)\nusing this:\n  \\<forall>x. f x = \\<infinity>\n  lsc f\n\ngoal (1 subgoal):\n 1. \\<forall>x. lsc_hull f x = \\<infinity>", "by (metis lsc_hull_lsc)"], ["proof (state)\nthis:\n  \\<forall>x. lsc_hull f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "}"], ["proof (state)\nthis:\n  \\<forall>x. f x = \\<infinity> \\<Longrightarrow>\n  \\<forall>x. lsc_hull f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "hence \"(\\<forall>x. f x = \\<infinity>) \\<longleftrightarrow> (\\<forall>x. (lsc_hull f) x = \\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<forall>x. f x = \\<infinity> \\<Longrightarrow>\n  \\<forall>x. lsc_hull f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. f x = \\<infinity>) =\n    (\\<forall>x. lsc_hull f x = \\<infinity>)", "by (metis ereal_infty_less_eq(1) lsc_hull_le)"], ["proof (state)\nthis:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "moreover"], ["proof (state)\nthis:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "have \"(\\<exists>x. f x = -\\<infinity>) \\<longrightarrow> (\\<exists>x. (lsc_hull f) x = -\\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n    (\\<exists>x. lsc_hull f x = - \\<infinity>)", "by (metis ereal_infty_less_eq2(2) lsc_hull_le)"], ["proof (state)\nthis:\n  (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n  (\\<exists>x. lsc_hull f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n  (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n  (\\<exists>x. lsc_hull f x = - \\<infinity>)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n  (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n  (\\<exists>x. lsc_hull f x = - \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "using assms"], ["proof (prove)\nusing this:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n  (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n  (\\<exists>x. lsc_hull f x = - \\<infinity>)\n  \\<not> proper f\n\ngoal (1 subgoal):\n 1. \\<not> proper (lsc_hull f)", "unfolding improper_iff"], ["proof (prove)\nusing this:\n  (\\<forall>x. f x = \\<infinity>) = (\\<forall>x. lsc_hull f x = \\<infinity>)\n  (\\<exists>x. f x = - \\<infinity>) \\<longrightarrow>\n  (\\<exists>x. lsc_hull f x = - \\<infinity>)\n  (\\<exists>x. f x = - \\<infinity>) \\<or> (\\<forall>x. f x = \\<infinity>)\n\ngoal (1 subgoal):\n 1. (\\<exists>x. lsc_hull f x = - \\<infinity>) \\<or>\n    (\\<forall>x. lsc_hull f x = \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  \\<not> proper (lsc_hull f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_convex_improper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"~(proper f)\"\n  shows \"\\<forall>x\\<in>rel_interior(domain f). (lsc_hull f) x = f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). lsc_hull f x = f x", "by (metis assms convex_improper ereal_infty_less_eq(2) lsc_hull_le)"], ["", "lemma convex_with_rel_open_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"rel_open (domain f)\"\n  shows \"(\\<forall>x. f x > -\\<infinity>) | (\\<forall>x. (f x = \\<infinity> | f x = -\\<infinity>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "assume \"\\<not>(\\<forall>x. f x > -\\<infinity>)\""], ["proof (state)\nthis:\n  \\<not> (\\<forall>x. - \\<infinity> < f x)\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "hence \"\\<not>(proper f)\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>x. - \\<infinity> < f x)\n\ngoal (1 subgoal):\n 1. \\<not> proper f", "using proper_iff"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>x. - \\<infinity> < f x)\n  proper ?f =\n  ((\\<forall>x. ?f x \\<noteq> - \\<infinity>) \\<and>\n   (\\<exists>x. ?f x \\<noteq> \\<infinity>))\n\ngoal (1 subgoal):\n 1. \\<not> proper f", "by (simp add: proper_iff)"], ["proof (state)\nthis:\n  \\<not> proper f\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "hence \"\\<forall>x\\<in>rel_interior(domain f). f x = -\\<infinity>\""], ["proof (prove)\nusing this:\n  \\<not> proper f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>", "by (metis assms(1) convex_improper)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "hence \"\\<forall>x\\<in>domain f. f x = -\\<infinity>\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>rel_interior (domain f). f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>domain f. f x = - \\<infinity>", "by (metis assms(2) rel_open_def)"], ["proof (state)\nthis:\n  \\<forall>x\\<in>domain f. f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "hence \"\\<forall>x. (f x = \\<infinity> | f x = -\\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>domain f. f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{x. f x < \\<infinity>}. f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>", "by auto"], ["proof (state)\nthis:\n  \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "}"], ["proof (state)\nthis:\n  \\<not> (\\<forall>x. - \\<infinity> < f x) \\<Longrightarrow>\n  \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>x. - \\<infinity> < f x) \\<Longrightarrow>\n  \\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  (\\<forall>x. - \\<infinity> < f x) \\<or>\n  (\\<forall>x. f x = \\<infinity> \\<or> f x = - \\<infinity>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_with_UNIV_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"domain f = UNIV\"\n  shows \"(\\<forall>x. f x > -\\<infinity>) \\<or> (\\<forall>x. f x = -\\<infinity>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x. - \\<infinity> < f x) \\<or>\n    (\\<forall>x. f x = - \\<infinity>)", "by (metis assms convex_improper ereal_MInfty_lessI proper_iff rel_interior_UNIV UNIV_I)"], ["", "lemma rel_interior_Epigraph:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"(x,z) : rel_interior (Epigraph UNIV f) \\<longleftrightarrow>\n    (x : rel_interior (domain f) \\<and> f x < ereal z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, z) \\<in> rel_interior (Epigraph UNIV f)) =\n    (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)", "apply (subst rel_interior_projection[of _ \"(\\<lambda>y. {z. (y, z) : Epigraph UNIV f})\"])"], ["proof (prove)\ngoal (3 subgoals):\n 1. convex (Epigraph UNIV f)\n 2. (\\<lambda>y. {z. (y, z) \\<in> Epigraph UNIV f}) =\n    (\\<lambda>y. {z. (y, z) \\<in> Epigraph UNIV f})\n 3. (x \\<in> rel_interior\n              {y. {z. (y, z) \\<in> Epigraph UNIV f} \\<noteq> {}} \\<and>\n     z \\<in> rel_interior {z. (x, z) \\<in> Epigraph UNIV f}) =\n    (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)", "apply (metis assms convex_EpigraphI convex_UNIV convex_on_ereal_univ)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>y. {z. (y, z) \\<in> Epigraph UNIV f}) =\n    (\\<lambda>y. {z. (y, z) \\<in> Epigraph UNIV f})\n 2. (x \\<in> rel_interior\n              {y. {z. (y, z) \\<in> Epigraph UNIV f} \\<noteq> {}} \\<and>\n     z \\<in> rel_interior {z. (x, z) \\<in> Epigraph UNIV f}) =\n    (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)", "unfolding domain_Epigraph Epigraph_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>y.\n        {z. (y, z)\n            \\<in> {xy.\n                   fst xy \\<in> UNIV \\<and>\n                   f (fst xy) \\<le> ereal (snd xy)}}) =\n    (\\<lambda>y.\n        {z. (y, z)\n            \\<in> {xy.\n                   fst xy \\<in> UNIV \\<and>\n                   f (fst xy) \\<le> ereal (snd xy)}})\n 2. (x \\<in> rel_interior\n              {y. {z. (y, z)\n                      \\<in> {xy.\n                             fst xy \\<in> UNIV \\<and>\n                             f (fst xy) \\<le> ereal (snd xy)}} \\<noteq>\n                  {}} \\<and>\n     z \\<in> rel_interior\n              {z. (x, z)\n                  \\<in> {xy.\n                         fst xy \\<in> UNIV \\<and>\n                         f (fst xy) \\<le> ereal (snd xy)}}) =\n    (x \\<in> rel_interior\n              {x. \\<exists>y.\n                     (x, y)\n                     \\<in> {xy.\n                            fst xy \\<in> UNIV \\<and>\n                            f (fst xy) \\<le> ereal (snd xy)}} \\<and>\n     f x < ereal z)", "using rel_interior_ereal_semiline"], ["proof (prove)\nusing this:\n  rel_interior {y. ?a \\<le> ereal y} = {y. ?a < ereal y}\n\ngoal (2 subgoals):\n 1. (\\<lambda>y.\n        {z. (y, z)\n            \\<in> {xy.\n                   fst xy \\<in> UNIV \\<and>\n                   f (fst xy) \\<le> ereal (snd xy)}}) =\n    (\\<lambda>y.\n        {z. (y, z)\n            \\<in> {xy.\n                   fst xy \\<in> UNIV \\<and>\n                   f (fst xy) \\<le> ereal (snd xy)}})\n 2. (x \\<in> rel_interior\n              {y. {z. (y, z)\n                      \\<in> {xy.\n                             fst xy \\<in> UNIV \\<and>\n                             f (fst xy) \\<le> ereal (snd xy)}} \\<noteq>\n                  {}} \\<and>\n     z \\<in> rel_interior\n              {z. (x, z)\n                  \\<in> {xy.\n                         fst xy \\<in> UNIV \\<and>\n                         f (fst xy) \\<le> ereal (snd xy)}}) =\n    (x \\<in> rel_interior\n              {x. \\<exists>y.\n                     (x, y)\n                     \\<in> {xy.\n                            fst xy \\<in> UNIV \\<and>\n                            f (fst xy) \\<le> ereal (snd xy)}} \\<and>\n     f x < ereal z)", "by auto"], ["", "lemma rel_interior_EpigraphI:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"rel_interior (Epigraph UNIV f) =\n    {(x,z) |x z. x : rel_interior (domain f) \\<and> f x < ereal z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "fix x z"], ["proof (state)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "have \"(x,z):rel_interior (Epigraph UNIV f) \\<longleftrightarrow> (x : rel_interior (domain f) \\<and> f x < ereal z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x, z) \\<in> rel_interior (Epigraph UNIV f)) =\n    (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)", "using rel_interior_Epigraph[of f x z] assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  ((x, z) \\<in> rel_interior (Epigraph UNIV f)) =\n  (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)\n  Lower_Semicontinuous.convex_on UNIV f\n\ngoal (1 subgoal):\n 1. ((x, z) \\<in> rel_interior (Epigraph UNIV f)) =\n    (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)", "by auto"], ["proof (state)\nthis:\n  ((x, z) \\<in> rel_interior (Epigraph UNIV f)) =\n  (x \\<in> rel_interior (domain f) \\<and> f x < ereal z)\n\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "}"], ["proof (state)\nthis:\n  ((?x2, ?z2) \\<in> rel_interior (Epigraph UNIV f)) =\n  (?x2 \\<in> rel_interior (domain f) \\<and> f ?x2 < ereal ?z2)\n\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "thus ?thesis"], ["proof (prove)\nusing this:\n  ((?x2, ?z2) \\<in> rel_interior (Epigraph UNIV f)) =\n  (?x2 \\<in> rel_interior (domain f) \\<and> f ?x2 < ereal ?z2)\n\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) =\n    {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}", "by auto"], ["proof (state)\nthis:\n  rel_interior (Epigraph UNIV f) =\n  {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_less_ri_domain:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"\\<exists>x. f x < a\"\n  shows \"\\<exists>x\\<in>rel_interior (domain f). f x < a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "define A where \"A = {(x::'a::euclidean_space,m)|x m. ereal m<a}\""], ["proof (state)\nthis:\n  A = {(x, m) |x m. ereal m < a}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "obtain x where \"f x < a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x. f x < a \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<exists>x. f x < a\n\ngoal (1 subgoal):\n 1. (\\<And>x. f x < a \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  f x < a\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "then"], ["proof (chain)\npicking this:\n  f x < a", "obtain z where z_def: \"f x < ereal z \\<and> ereal z < a\""], ["proof (prove)\nusing this:\n  f x < a\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        f x < ereal z \\<and> ereal z < a \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using ereal_dense2"], ["proof (prove)\nusing this:\n  f x < a\n  ?x < ?y \\<Longrightarrow> \\<exists>z. ?x < ereal z \\<and> ereal z < ?y\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        f x < ereal z \\<and> ereal z < a \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  f x < ereal z \\<and> ereal z < a\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "hence \"(x,z):A \\<and> (x,z):Epigraph UNIV f\""], ["proof (prove)\nusing this:\n  f x < ereal z \\<and> ereal z < a\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> A \\<and> (x, z) \\<in> Epigraph UNIV f", "unfolding A_def Epigraph_def"], ["proof (prove)\nusing this:\n  f x < ereal z \\<and> ereal z < a\n\ngoal (1 subgoal):\n 1. (x, z) \\<in> {(x, m) |x m. ereal m < a} \\<and>\n    (x, z)\n    \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}", "by auto"], ["proof (state)\nthis:\n  (x, z) \\<in> A \\<and> (x, z) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "hence \"A Int (Epigraph UNIV f) \\<noteq> {}\""], ["proof (prove)\nusing this:\n  (x, z) \\<in> A \\<and> (x, z) \\<in> Epigraph UNIV f\n\ngoal (1 subgoal):\n 1. A \\<inter> Epigraph UNIV f \\<noteq> {}", "unfolding A_def Epigraph_def"], ["proof (prove)\nusing this:\n  (x, z) \\<in> {(x, m) |x m. ereal m < a} \\<and>\n  (x, z)\n  \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}\n\ngoal (1 subgoal):\n 1. {(x, m) |x m. ereal m < a} \\<inter>\n    {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<noteq>\n    {}", "using assms"], ["proof (prove)\nusing this:\n  (x, z) \\<in> {(x, m) |x m. ereal m < a} \\<and>\n  (x, z)\n  \\<in> {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)}\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<exists>x. f x < a\n\ngoal (1 subgoal):\n 1. {(x, m) |x m. ereal m < a} \\<inter>\n    {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<noteq>\n    {}", "by auto"], ["proof (state)\nthis:\n  A \\<inter> Epigraph UNIV f \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "moreover"], ["proof (state)\nthis:\n  A \\<inter> Epigraph UNIV f \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "have \"open A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. open A", "proof(cases a)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>r. a = ereal r \\<Longrightarrow> open A\n 2. a = \\<infinity> \\<Longrightarrow> open A\n 3. a = - \\<infinity> \\<Longrightarrow> open A", "case real"], ["proof (state)\nthis:\n  a = ereal r_\n\ngoal (3 subgoals):\n 1. \\<And>r. a = ereal r \\<Longrightarrow> open A\n 2. a = \\<infinity> \\<Longrightarrow> open A\n 3. a = - \\<infinity> \\<Longrightarrow> open A", "hence \"A = {y. inner (0::'a, 1) y < real_of_ereal a}\""], ["proof (prove)\nusing this:\n  a = ereal r_\n\ngoal (1 subgoal):\n 1. A = {y. (0::'a, 1) \\<bullet> y < real_of_ereal a}", "using A_def"], ["proof (prove)\nusing this:\n  a = ereal r_\n  A = {(x, m) |x m. ereal m < a}\n\ngoal (1 subgoal):\n 1. A = {y. (0::'a, 1) \\<bullet> y < real_of_ereal a}", "by auto"], ["proof (state)\nthis:\n  A = {y. (0::'a, 1) \\<bullet> y < real_of_ereal a}\n\ngoal (3 subgoals):\n 1. \\<And>r. a = ereal r \\<Longrightarrow> open A\n 2. a = \\<infinity> \\<Longrightarrow> open A\n 3. a = - \\<infinity> \\<Longrightarrow> open A", "thus ?thesis"], ["proof (prove)\nusing this:\n  A = {y. (0::'a, 1) \\<bullet> y < real_of_ereal a}\n\ngoal (1 subgoal):\n 1. open A", "using open_halfspace_lt"], ["proof (prove)\nusing this:\n  A = {y. (0::'a, 1) \\<bullet> y < real_of_ereal a}\n  open {x. ?a \\<bullet> x < ?b}\n\ngoal (1 subgoal):\n 1. open A", "by auto"], ["proof (state)\nthis:\n  open A\n\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow> open A\n 2. a = - \\<infinity> \\<Longrightarrow> open A", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow> open A\n 2. a = - \\<infinity> \\<Longrightarrow> open A", "case PInf"], ["proof (state)\nthis:\n  a = \\<infinity>\n\ngoal (2 subgoals):\n 1. a = \\<infinity> \\<Longrightarrow> open A\n 2. a = - \\<infinity> \\<Longrightarrow> open A", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = \\<infinity>\n\ngoal (1 subgoal):\n 1. open A", "using A_def"], ["proof (prove)\nusing this:\n  a = \\<infinity>\n  A = {(x, m) |x m. ereal m < a}\n\ngoal (1 subgoal):\n 1. open A", "by auto"], ["proof (state)\nthis:\n  open A\n\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow> open A", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow> open A", "case MInf"], ["proof (state)\nthis:\n  a = - \\<infinity>\n\ngoal (1 subgoal):\n 1. a = - \\<infinity> \\<Longrightarrow> open A", "thus ?thesis"], ["proof (prove)\nusing this:\n  a = - \\<infinity>\n\ngoal (1 subgoal):\n 1. open A", "using A_def"], ["proof (prove)\nusing this:\n  a = - \\<infinity>\n  A = {(x, m) |x m. ereal m < a}\n\ngoal (1 subgoal):\n 1. open A", "by auto"], ["proof (state)\nthis:\n  open A\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  open A\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "ultimately"], ["proof (chain)\npicking this:\n  A \\<inter> Epigraph UNIV f \\<noteq> {}\n  open A", "have \"A Int rel_interior(Epigraph UNIV f) \\<noteq> {}\""], ["proof (prove)\nusing this:\n  A \\<inter> Epigraph UNIV f \\<noteq> {}\n  open A\n\ngoal (1 subgoal):\n 1. A \\<inter> rel_interior (Epigraph UNIV f) \\<noteq> {}", "by (metis assms(1) convex_Epigraph convex_UNIV\n       open_Int_closure_eq_empty open_inter_closure_rel_interior)"], ["proof (state)\nthis:\n  A \\<inter> rel_interior (Epigraph UNIV f) \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "then"], ["proof (chain)\npicking this:\n  A \\<inter> rel_interior (Epigraph UNIV f) \\<noteq> {}", "obtain x0 z0 where \"(x0,z0):A \\<and> x0 : rel_interior (domain f) \\<and> f x0 < ereal z0\""], ["proof (prove)\nusing this:\n  A \\<inter> rel_interior (Epigraph UNIV f) \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>x0 z0.\n        (x0, z0) \\<in> A \\<and>\n        x0 \\<in> rel_interior (domain f) \\<and>\n        f x0 < ereal z0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using rel_interior_Epigraph[of f] assms"], ["proof (prove)\nusing this:\n  A \\<inter> rel_interior (Epigraph UNIV f) \\<noteq> {}\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  ((?x, ?z) \\<in> rel_interior (Epigraph UNIV f)) =\n  (?x \\<in> rel_interior (domain f) \\<and> f ?x < ereal ?z)\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<exists>x. f x < a\n\ngoal (1 subgoal):\n 1. (\\<And>x0 z0.\n        (x0, z0) \\<in> A \\<and>\n        x0 \\<in> rel_interior (domain f) \\<and>\n        f x0 < ereal z0 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (x0, z0) \\<in> A \\<and>\n  x0 \\<in> rel_interior (domain f) \\<and> f x0 < ereal z0\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "thus ?thesis"], ["proof (prove)\nusing this:\n  (x0, z0) \\<in> A \\<and>\n  x0 \\<in> rel_interior (domain f) \\<and> f x0 < ereal z0\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain f). f x < a", "apply(rule_tac x=\"x0\" in bexI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (x0, z0) \\<in> A \\<and>\n    x0 \\<in> rel_interior (domain f) \\<and>\n    f x0 < ereal z0 \\<Longrightarrow>\n    f x0 < a\n 2. (x0, z0) \\<in> A \\<and>\n    x0 \\<in> rel_interior (domain f) \\<and>\n    f x0 < ereal z0 \\<Longrightarrow>\n    x0 \\<in> rel_interior (domain f)", "using A_def"], ["proof (prove)\nusing this:\n  A = {(x, m) |x m. ereal m < a}\n\ngoal (2 subgoals):\n 1. (x0, z0) \\<in> A \\<and>\n    x0 \\<in> rel_interior (domain f) \\<and>\n    f x0 < ereal z0 \\<Longrightarrow>\n    f x0 < a\n 2. (x0, z0) \\<in> A \\<and>\n    x0 \\<in> rel_interior (domain f) \\<and>\n    f x0 < ereal z0 \\<Longrightarrow>\n    x0 \\<in> rel_interior (domain f)", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>rel_interior (domain f). f x < a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma rel_interior_eq_between:\n  fixes S T :: \"('m::euclidean_space) set\"\n  assumes \"convex S\" \"convex T\"\n  shows \"(rel_interior S = rel_interior T) \\<longleftrightarrow> (rel_interior S \\<le> T \\<and> T \\<le> closure S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (rel_interior S = rel_interior T) =\n    (rel_interior S \\<subseteq> T \\<and> T \\<subseteq> closure S)", "by (metis assms closure_eq_between convex_closure_rel_interior convex_rel_interior_closure)"], ["", "lemma convex_less_in_riS:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"rel_interior S \\<le> domain f\"\n  assumes \"\\<exists>x\\<in>closure S. f x < a\"\n  shows \"\\<exists>x\\<in>rel_interior S. f x < a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "define g where \"g x = (if x:closure S then (f x) else \\<infinity>)\" for x"], ["proof (state)\nthis:\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "hence \"\\<exists>x. g x < a\""], ["proof (prove)\nusing this:\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<exists>x. g x < a", "using assms"], ["proof (prove)\nusing this:\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  rel_interior S \\<subseteq> domain f\n  \\<exists>x\\<in>closure S. f x < a\n\ngoal (1 subgoal):\n 1. \\<exists>x. g x < a", "by auto"], ["proof (state)\nthis:\n  \\<exists>x. g x < a\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "have convg: \"convex_on UNIV g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV g", "unfolding g_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Lower_Semicontinuous.convex_on UNIV\n     (\\<lambda>x. if x \\<in> closure S then f x else \\<infinity>)", "apply (subst convex_PInfty_outside)"], ["proof (prove)\ngoal (3 subgoals):\n 1. Lower_Semicontinuous.convex_on UNIV f\n 2. convex (closure S)\n 3. True", "using assms convex_closure"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  rel_interior S \\<subseteq> domain f\n  \\<exists>x\\<in>closure S. f x < a\n  convex ?S \\<Longrightarrow> convex (closure ?S)\n\ngoal (3 subgoals):\n 1. Lower_Semicontinuous.convex_on UNIV f\n 2. convex (closure S)\n 3. True", "by auto"], ["proof (state)\nthis:\n  Lower_Semicontinuous.convex_on UNIV g\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "hence *: \"\\<exists>x\\<in>rel_interior (domain g). g x < a\""], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV g\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior (domain g). g x < a", "apply (subst convex_less_ri_domain)"], ["proof (prove)\ngoal (3 subgoals):\n 1. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on UNIV g\n 2. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow>\n    \\<exists>x. g x < a\n 3. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow> True", "using assms g_def"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  rel_interior S \\<subseteq> domain f\n  \\<exists>x\\<in>closure S. f x < a\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n\ngoal (3 subgoals):\n 1. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow>\n    Lower_Semicontinuous.convex_on UNIV g\n 2. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow>\n    \\<exists>x. g x < a\n 3. Lower_Semicontinuous.convex_on UNIV g \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>rel_interior (domain g). g x < a\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "have \"convex (domain g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (domain g)", "by (metis convg convex_domain)"], ["proof (state)\nthis:\n  convex (domain g)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "moreover"], ["proof (state)\nthis:\n  convex (domain g)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "have \"rel_interior S \\<le> domain g \\<and> domain g \\<le> closure S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior S \\<subseteq> domain g \\<and>\n    domain g \\<subseteq> closure S", "using g_def assms rel_interior_subset_closure"], ["proof (prove)\nusing this:\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  rel_interior S \\<subseteq> domain f\n  \\<exists>x\\<in>closure S. f x < a\n  rel_interior ?S \\<subseteq> closure ?S\n\ngoal (1 subgoal):\n 1. rel_interior S \\<subseteq> domain g \\<and>\n    domain g \\<subseteq> closure S", "unfolding domain_def"], ["proof (prove)\nusing this:\n  g ?x = (if ?x \\<in> closure S then f ?x else \\<infinity>)\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  rel_interior S \\<subseteq> {x. f x < \\<infinity>}\n  \\<exists>x\\<in>closure S. f x < a\n  rel_interior ?S \\<subseteq> closure ?S\n\ngoal (1 subgoal):\n 1. rel_interior S \\<subseteq> {x. g x < \\<infinity>} \\<and>\n    {x. g x < \\<infinity>} \\<subseteq> closure S", "by auto"], ["proof (state)\nthis:\n  rel_interior S \\<subseteq> domain g \\<and> domain g \\<subseteq> closure S\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "ultimately"], ["proof (chain)\npicking this:\n  convex (domain g)\n  rel_interior S \\<subseteq> domain g \\<and> domain g \\<subseteq> closure S", "have \"rel_interior (domain g) = rel_interior S\""], ["proof (prove)\nusing this:\n  convex (domain g)\n  rel_interior S \\<subseteq> domain g \\<and> domain g \\<subseteq> closure S\n\ngoal (1 subgoal):\n 1. rel_interior (domain g) = rel_interior S", "by (metis assms(2) rel_interior_eq_between)"], ["proof (state)\nthis:\n  rel_interior (domain g) = rel_interior S\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "thus ?thesis"], ["proof (prove)\nusing this:\n  rel_interior (domain g) = rel_interior S\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>rel_interior S. f x < a", "by (metis \"*\" g_def less_ereal.simps(2))"], ["proof (state)\nthis:\n  \\<exists>x\\<in>rel_interior S. f x < a\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_less_inS:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"S \\<le> domain f\"\n  assumes \"\\<exists>x\\<in>closure S. f x < a\"\n  shows \"\\<exists>x\\<in>S. f x < a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>S. f x < a", "using convex_less_in_riS[of f S a] rel_interior_subset[of S] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>Lower_Semicontinuous.convex_on UNIV f; convex S;\n   rel_interior S \\<subseteq> domain f;\n   \\<exists>x\\<in>closure S. f x < a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>rel_interior S. f x < a\n  rel_interior S \\<subseteq> S\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  S \\<subseteq> domain f\n  \\<exists>x\\<in>closure S. f x < a\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>S. f x < a", "by auto"], ["", "lemma convex_finite_geq_on_closure:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"convex S\" \"finite_on S f\"\n  assumes \"\\<forall>x\\<in>S. f x \\<ge> a\"\n  shows \"\\<forall>x\\<in>closure S. f x \\<ge> a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "have \"S \\<le> domain f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<subseteq> domain f", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  finite_on S f\n  \\<forall>x\\<in>S. a \\<le> f x\n\ngoal (1 subgoal):\n 1. S \\<subseteq> domain f", "unfolding finite_on_def domain_def"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  \\<forall>x\\<in>S.\n     f x \\<noteq> \\<infinity> \\<and> f x \\<noteq> - \\<infinity>\n  \\<forall>x\\<in>S. a \\<le> f x\n\ngoal (1 subgoal):\n 1. S \\<subseteq> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  S \\<subseteq> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "{"], ["proof (state)\nthis:\n  S \\<subseteq> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "assume \"\\<not>(\\<forall>x\\<in>closure S. f x \\<ge> a)\""], ["proof (state)\nthis:\n  \\<not> (\\<forall>x\\<in>closure S. a \\<le> f x)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "hence \"\\<exists>x\\<in>closure S. f x < a\""], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>x\\<in>closure S. a \\<le> f x)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>closure S. f x < a", "by (simp add: not_le)"], ["proof (state)\nthis:\n  \\<exists>x\\<in>closure S. f x < a\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "hence False"], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>closure S. f x < a\n\ngoal (1 subgoal):\n 1. False", "using convex_less_inS[of f S a] assms \\<open>S \\<le> domain f\\<close>"], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>closure S. f x < a\n  \\<lbrakk>Lower_Semicontinuous.convex_on UNIV f; convex S;\n   S \\<subseteq> domain f; \\<exists>x\\<in>closure S. f x < a\\<rbrakk>\n  \\<Longrightarrow> \\<exists>x\\<in>S. f x < a\n  Lower_Semicontinuous.convex_on UNIV f\n  convex S\n  finite_on S f\n  \\<forall>x\\<in>S. a \\<le> f x\n  S \\<subseteq> domain f\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "}"], ["proof (state)\nthis:\n  \\<not> (\\<forall>x\\<in>closure S. a \\<le> f x) \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> (\\<forall>x\\<in>closure S. a \\<le> f x) \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>closure S. a \\<le> f x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>closure S. a \\<le> f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_convex_determined:\n  fixes f g :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"convex_on UNIV g\"\n  assumes \"rel_interior (domain f) = rel_interior (domain g)\"\n  assumes \"\\<forall>x\\<in>rel_interior (domain f). f x = g x\"\n  shows \"lsc_hull f = lsc_hull g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull f = lsc_hull g", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc_hull f = lsc_hull g", "have \"rel_interior (Epigraph UNIV f) = rel_interior (Epigraph UNIV g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) = rel_interior (Epigraph UNIV g)", "apply (subst rel_interior_EpigraphI, metis assms)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z} =\n    {(x, z) |x z. x \\<in> rel_interior (domain g) \\<and> g x < ereal z}", "using assms"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  Lower_Semicontinuous.convex_on UNIV g\n  rel_interior (domain f) = rel_interior (domain g)\n  \\<forall>x\\<in>rel_interior (domain f). f x = g x\n\ngoal (1 subgoal):\n 1. {(x, z) |x z. x \\<in> rel_interior (domain f) \\<and> f x < ereal z} =\n    {(x, z) |x z. x \\<in> rel_interior (domain g) \\<and> g x < ereal z}", "by auto"], ["proof (state)\nthis:\n  rel_interior (Epigraph UNIV f) = rel_interior (Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. lsc_hull f = lsc_hull g", "hence \"closure (Epigraph UNIV f) = closure (Epigraph UNIV g)\""], ["proof (prove)\nusing this:\n  rel_interior (Epigraph UNIV f) = rel_interior (Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) = closure (Epigraph UNIV g)", "by (metis assms convex_EpigraphI convex_UNIV convex_closure_rel_interior)"], ["proof (state)\nthis:\n  closure (Epigraph UNIV f) = closure (Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. lsc_hull f = lsc_hull g", "thus ?thesis"], ["proof (prove)\nusing this:\n  closure (Epigraph UNIV f) = closure (Epigraph UNIV g)\n\ngoal (1 subgoal):\n 1. lsc_hull f = lsc_hull g", "by (metis lsc_hull_expl)"], ["proof (state)\nthis:\n  lsc_hull f = lsc_hull g\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma domain_lsc_hull_between:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  shows \"domain f \\<le> domain (lsc_hull f)\n       \\<and> domain (lsc_hull f) \\<le> closure (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "assume \"x:domain f\""], ["proof (state)\nthis:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"x:domain (lsc_hull f)\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. x \\<in> domain (lsc_hull f)", "unfolding domain_def"], ["proof (prove)\nusing this:\n  x \\<in> {x. f x < \\<infinity>}\n\ngoal (1 subgoal):\n 1. x \\<in> {x. lsc_hull f x < \\<infinity>}", "using lsc_hull_le[of f x]"], ["proof (prove)\nusing this:\n  x \\<in> {x. f x < \\<infinity>}\n  lsc_hull f x \\<le> f x\n\ngoal (1 subgoal):\n 1. x \\<in> {x. lsc_hull f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  x \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "moreover"], ["proof (state)\nthis:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "{"], ["proof (state)\nthis:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "assume \"x:domain (lsc_hull f)\""], ["proof (state)\nthis:\n  x \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"min (f x) (Liminf (at x) f) < \\<infinity>\""], ["proof (prove)\nusing this:\n  x \\<in> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) < \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  x \\<in> {x. lsc_hull f x < \\<infinity>}\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) < \\<infinity>", "using lsc_hull_liminf_at[of f]"], ["proof (prove)\nusing this:\n  x \\<in> {x. lsc_hull f x < \\<infinity>}\n  \\<forall>x. lsc_hull f x = min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. min (f x) (Liminf (at x) f) < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) < \\<infinity>\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "then"], ["proof (chain)\npicking this:\n  min (f x) (Liminf (at x) f) < \\<infinity>", "obtain z where z_def: \"min (f x) (Liminf (at x) f) < z \\<and> z < \\<infinity>\""], ["proof (prove)\nusing this:\n  min (f x) (Liminf (at x) f) < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        min (f x) (Liminf (at x) f) < z \\<and>\n        z < \\<infinity> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis dense)"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) < z \\<and> z < \\<infinity>\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "{"], ["proof (state)\nthis:\n  min (f x) (Liminf (at x) f) < z \\<and> z < \\<infinity>\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "assume \"e>0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)", "unfolding min_Liminf_at"], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. Inf (f ` ball x e) \\<le> (SUP e\\<in>{0<..}. Inf (f ` ball x e))", "apply (subst SUP_upper)"], ["proof (prove)\ngoal (2 subgoals):\n 1. 0 < e \\<Longrightarrow> e \\<in> {0<..}\n 2. 0 < e \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"\\<exists>y. y \\<in> ball x e \\<and> f y \\<le> z\""], ["proof (prove)\nusing this:\n  Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)\n\ngoal (1 subgoal):\n 1. \\<exists>y. y \\<in> ball x e \\<and> f y \\<le> z", "using Inf_le_iff_less [of f \"ball x e\" \"min (f x) (Liminf (at x) f)\"] z_def"], ["proof (prove)\nusing this:\n  Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)\n  (Inf (f ` ball x e) \\<le> min (f x) (Liminf (at x) f)) =\n  (\\<forall>y>min (f x) (Liminf (at x) f).\n      \\<exists>i\\<in>ball x e. f i \\<le> y)\n  min (f x) (Liminf (at x) f) < z \\<and> z < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<exists>y. y \\<in> ball x e \\<and> f y \\<le> z", "by (auto simp add: Bex_def)"], ["proof (state)\nthis:\n  \\<exists>y. y \\<in> ball x e \\<and> f y \\<le> z\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"\\<exists>y. dist x y < e \\<and> y \\<in> domain f\""], ["proof (prove)\nusing this:\n  \\<exists>y. y \\<in> ball x e \\<and> f y \\<le> z\n\ngoal (1 subgoal):\n 1. \\<exists>y. dist x y < e \\<and> y \\<in> domain f", "unfolding domain_def ball_def"], ["proof (prove)\nusing this:\n  \\<exists>y. y \\<in> {y. dist x y < e} \\<and> f y \\<le> z\n\ngoal (1 subgoal):\n 1. \\<exists>y. dist x y < e \\<and> y \\<in> {x. f x < \\<infinity>}", "using z_def"], ["proof (prove)\nusing this:\n  \\<exists>y. y \\<in> {y. dist x y < e} \\<and> f y \\<le> z\n  min (f x) (Liminf (at x) f) < z \\<and> z < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<exists>y. dist x y < e \\<and> y \\<in> {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  \\<exists>y. dist x y < e \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "}"], ["proof (state)\nthis:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y. dist x y < ?e2 \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "hence \"x\\<in>closure(domain f)\""], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y. dist x y < ?e2 \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. x \\<in> closure (domain f)", "unfolding closure_approachable"], ["proof (prove)\nusing this:\n  0 < ?e2 \\<Longrightarrow>\n  \\<exists>y. dist x y < ?e2 \\<and> y \\<in> domain f\n\ngoal (1 subgoal):\n 1. \\<forall>e>0. \\<exists>y\\<in>domain f. dist y x < e", "by (auto simp add: dist_commute)"], ["proof (state)\nthis:\n  x \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> domain (lsc_hull f) \\<Longrightarrow>\n  ?x2 \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "ultimately"], ["proof (chain)\npicking this:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> domain (lsc_hull f)\n  ?x2 \\<in> domain (lsc_hull f) \\<Longrightarrow>\n  ?x2 \\<in> closure (domain f)", "show ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> domain f \\<Longrightarrow> ?x2 \\<in> domain (lsc_hull f)\n  ?x2 \\<in> domain (lsc_hull f) \\<Longrightarrow>\n  ?x2 \\<in> closure (domain f)\n\ngoal (1 subgoal):\n 1. domain f \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "by auto"], ["proof (state)\nthis:\n  domain f \\<subseteq> domain (lsc_hull f) \\<and>\n  domain (lsc_hull f) \\<subseteq> closure (domain f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma domain_vs_domain_lsc_hull:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"rel_interior(domain (lsc_hull f)) = rel_interior(domain f)\n         \\<and> closure(domain (lsc_hull f)) = closure(domain f)\n         \\<and> aff_dim(domain (lsc_hull f)) = aff_dim(domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "have \"convex (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (domain f)", "by (metis assms convex_domain)"], ["proof (state)\nthis:\n  convex (domain f)\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "moreover"], ["proof (state)\nthis:\n  convex (domain f)\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "have \"convex (domain (lsc_hull f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (domain (lsc_hull f))", "by (metis assms convex_domain convex_lsc_hull)"], ["proof (state)\nthis:\n  convex (domain (lsc_hull f))\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "moreover"], ["proof (state)\nthis:\n  convex (domain (lsc_hull f))\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "have \"rel_interior (domain f) \\<le> domain (lsc_hull f)\n                 \\<and> domain (lsc_hull f) \\<le> closure (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior (domain f) \\<subseteq> domain (lsc_hull f) \\<and>\n    domain (lsc_hull f) \\<subseteq> closure (domain f)", "by (metis domain_lsc_hull_between rel_interior_subset subset_trans)"], ["proof (state)\nthis:\n  rel_interior (domain f) \\<subseteq> domain (lsc_hull f) \\<and>\n  domain (lsc_hull f) \\<subseteq> closure (domain f)\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "ultimately"], ["proof (chain)\npicking this:\n  convex (domain f)\n  convex (domain (lsc_hull f))\n  rel_interior (domain f) \\<subseteq> domain (lsc_hull f) \\<and>\n  domain (lsc_hull f) \\<subseteq> closure (domain f)", "show ?thesis"], ["proof (prove)\nusing this:\n  convex (domain f)\n  convex (domain (lsc_hull f))\n  rel_interior (domain f) \\<subseteq> domain (lsc_hull f) \\<and>\n  domain (lsc_hull f) \\<subseteq> closure (domain f)\n\ngoal (1 subgoal):\n 1. rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n    closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n    aff_dim (domain (lsc_hull f)) = aff_dim (domain f)", "by (metis closure_eq_between rel_interior_aff_dim rel_interior_eq_between)"], ["proof (state)\nthis:\n  rel_interior (domain (lsc_hull f)) = rel_interior (domain f) \\<and>\n  closure (domain (lsc_hull f)) = closure (domain f) \\<and>\n  aff_dim (domain (lsc_hull f)) = aff_dim (domain f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vertical_line_affine:\n  fixes x :: \"'a::euclidean_space\"\n  shows \"affine {(x,m::real)|m. m:UNIV}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. affine {(x, m) |m. m \\<in> UNIV}", "unfolding affine_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>{(x, m) |m. m \\<in> UNIV}.\n       \\<forall>y\\<in>{(x, m) |m. m \\<in> UNIV}.\n          \\<forall>u v.\n             u + v = 1 \\<longrightarrow>\n             u *\\<^sub>R xa + v *\\<^sub>R y \\<in> {(x, m) |m. m \\<in> UNIV}", "by (auto simp add: pth_8)"], ["", "lemma lsc_hull_of_convex_agrees_onRI:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x\\<in>rel_interior (domain f). (f x = (lsc_hull f) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have cEpi: \"convex (Epigraph UNIV f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex (Epigraph UNIV f)", "by (metis assms convex_EpigraphI convex_UNIV)"], ["proof (state)\nthis:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "{"], ["proof (state)\nthis:\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "assume x_def: \"x : rel_interior (domain f)\""], ["proof (state)\nthis:\n  x \\<in> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "hence \"f x < \\<infinity>\""], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f)\n\ngoal (1 subgoal):\n 1. f x < \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  x \\<in> rel_interior {x. f x < \\<infinity>}\n\ngoal (1 subgoal):\n 1. f x < \\<infinity>", "using rel_interior_subset"], ["proof (prove)\nusing this:\n  x \\<in> rel_interior {x. f x < \\<infinity>}\n  rel_interior ?S \\<subseteq> ?S\n\ngoal (1 subgoal):\n 1. f x < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "then"], ["proof (chain)\npicking this:\n  f x < \\<infinity>", "obtain r where r_def: \"(x,r):rel_interior (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>r.\n        (x, r) \\<in> rel_interior (Epigraph UNIV f) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using assms x_def rel_interior_Epigraph[of f x]"], ["proof (prove)\nusing this:\n  f x < \\<infinity>\n  Lower_Semicontinuous.convex_on UNIV f\n  x \\<in> rel_interior (domain f)\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  ((x, ?z) \\<in> rel_interior (Epigraph UNIV f)) =\n  (x \\<in> rel_interior (domain f) \\<and> f x < ereal ?z)\n\ngoal (1 subgoal):\n 1. (\\<And>r.\n        (x, r) \\<in> rel_interior (Epigraph UNIV f) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis ereal_dense2)"], ["proof (state)\nthis:\n  (x, r) \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "define M where \"M = {(x,m::real)|m. m:UNIV}\""], ["proof (state)\nthis:\n  M = {(x, m) |m. m \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "hence \"affine M\""], ["proof (prove)\nusing this:\n  M = {(x, m) |m. m \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. affine M", "using vertical_line_affine"], ["proof (prove)\nusing this:\n  M = {(x, m) |m. m \\<in> UNIV}\n  affine {(?x, m) |m. m \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. affine M", "by auto"], ["proof (state)\nthis:\n  affine M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "moreover"], ["proof (state)\nthis:\n  affine M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have \"rel_interior (Epigraph UNIV f) Int M \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}", "using r_def M_def"], ["proof (prove)\nusing this:\n  (x, r) \\<in> rel_interior (Epigraph UNIV f)\n  M = {(x, m) |m. m \\<in> UNIV}\n\ngoal (1 subgoal):\n 1. rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}", "by auto"], ["proof (state)\nthis:\n  rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "ultimately"], ["proof (chain)\npicking this:\n  affine M\n  rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}", "have *: \"closure (Epigraph UNIV f) Int M = closure (Epigraph UNIV f Int M)\""], ["proof (prove)\nusing this:\n  affine M\n  rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}\n\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) \\<inter> M =\n    closure (Epigraph UNIV f \\<inter> M)", "using convex_affine_closure_Int[of \"Epigraph UNIV f\" M] cEpi"], ["proof (prove)\nusing this:\n  affine M\n  rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}\n  \\<lbrakk>convex (Epigraph UNIV f); affine M;\n   rel_interior (Epigraph UNIV f) \\<inter> M \\<noteq> {}\\<rbrakk>\n  \\<Longrightarrow> closure (Epigraph UNIV f \\<inter> M) =\n                    closure (Epigraph UNIV f) \\<inter> M\n  convex (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) \\<inter> M =\n    closure (Epigraph UNIV f \\<inter> M)", "by auto"], ["proof (state)\nthis:\n  closure (Epigraph UNIV f) \\<inter> M =\n  closure (Epigraph UNIV f \\<inter> M)\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have \"Epigraph UNIV f Int M = {x} \\<times> {m. f x \\<le> ereal m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Epigraph UNIV f \\<inter> M = {x} \\<times> {m. f x \\<le> ereal m}", "unfolding Epigraph_def M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {xy. fst xy \\<in> UNIV \\<and> f (fst xy) \\<le> ereal (snd xy)} \\<inter>\n    {(x, m) |m. m \\<in> UNIV} =\n    {x} \\<times> {m. f x \\<le> ereal m}", "by auto"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<inter> M = {x} \\<times> {m. f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "moreover"], ["proof (state)\nthis:\n  Epigraph UNIV f \\<inter> M = {x} \\<times> {m. f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have \"closed({x} \\<times> {m. f x\\<le> ereal m})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closed ({x} \\<times> {m. f x \\<le> ereal m})", "apply (subst closed_Times)"], ["proof (prove)\ngoal (3 subgoals):\n 1. closed {x}\n 2. closed {m. f x \\<le> ereal m}\n 3. True", "using closed_ereal_semiline"], ["proof (prove)\nusing this:\n  closed {y. ?a \\<le> ereal y}\n\ngoal (3 subgoals):\n 1. closed {x}\n 2. closed {m. f x \\<le> ereal m}\n 3. True", "by auto"], ["proof (state)\nthis:\n  closed ({x} \\<times> {m. f x \\<le> ereal m})\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "ultimately"], ["proof (chain)\npicking this:\n  Epigraph UNIV f \\<inter> M = {x} \\<times> {m. f x \\<le> ereal m}\n  closed ({x} \\<times> {m. f x \\<le> ereal m})", "have \"{x} \\<times> {m. f x \\<le> ereal m} = closure (Epigraph UNIV f) Int M\""], ["proof (prove)\nusing this:\n  Epigraph UNIV f \\<inter> M = {x} \\<times> {m. f x \\<le> ereal m}\n  closed ({x} \\<times> {m. f x \\<le> ereal m})\n\ngoal (1 subgoal):\n 1. {x} \\<times> {m. f x \\<le> ereal m} =\n    closure (Epigraph UNIV f) \\<inter> M", "by (metis \"*\" Int_commute closure_closed)"], ["proof (state)\nthis:\n  {x} \\<times> {m. f x \\<le> ereal m} = closure (Epigraph UNIV f) \\<inter> M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "also"], ["proof (state)\nthis:\n  {x} \\<times> {m. f x \\<le> ereal m} = closure (Epigraph UNIV f) \\<inter> M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have \"\\<dots>=Epigraph UNIV (lsc_hull f) Int M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. closure (Epigraph UNIV f) \\<inter> M =\n    Epigraph UNIV (lsc_hull f) \\<inter> M", "by (metis Int_commute epigraph_lsc_hull)"], ["proof (state)\nthis:\n  closure (Epigraph UNIV f) \\<inter> M =\n  Epigraph UNIV (lsc_hull f) \\<inter> M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "also"], ["proof (state)\nthis:\n  closure (Epigraph UNIV f) \\<inter> M =\n  Epigraph UNIV (lsc_hull f) \\<inter> M\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "have \"\\<dots>={x} \\<times> {m. ((lsc_hull f) x) \\<le> ereal m}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Epigraph UNIV (lsc_hull f) \\<inter> M =\n    {x} \\<times> {m. lsc_hull f x \\<le> ereal m}", "unfolding Epigraph_def M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {xy.\n     fst xy \\<in> UNIV \\<and>\n     lsc_hull f (fst xy) \\<le> ereal (snd xy)} \\<inter>\n    {(x, m) |m. m \\<in> UNIV} =\n    {x} \\<times> {m. lsc_hull f x \\<le> ereal m}", "by auto"], ["proof (state)\nthis:\n  Epigraph UNIV (lsc_hull f) \\<inter> M =\n  {x} \\<times> {m. lsc_hull f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "finally"], ["proof (chain)\npicking this:\n  {x} \\<times> {m. f x \\<le> ereal m} =\n  {x} \\<times> {m. lsc_hull f x \\<le> ereal m}", "have \"{m. f x \\<le> ereal m} = {m. lsc_hull f x \\<le> ereal m}\""], ["proof (prove)\nusing this:\n  {x} \\<times> {m. f x \\<le> ereal m} =\n  {x} \\<times> {m. lsc_hull f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. {m. f x \\<le> ereal m} = {m. lsc_hull f x \\<le> ereal m}", "by auto"], ["proof (state)\nthis:\n  {m. f x \\<le> ereal m} = {m. lsc_hull f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "hence \"f x = (lsc_hull f) x\""], ["proof (prove)\nusing this:\n  {m. f x \\<le> ereal m} = {m. lsc_hull f x \\<le> ereal m}\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "using ereal_semiline_unique"], ["proof (prove)\nusing this:\n  {m. f x \\<le> ereal m} = {m. lsc_hull f x \\<le> ereal m}\n  ({y. ?a \\<le> ereal y} = {y. ?b \\<le> ereal y}) = (?a = ?b)\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  f x = lsc_hull f x\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "}"], ["proof (state)\nthis:\n  ?x2 \\<in> rel_interior (domain f) \\<Longrightarrow> f ?x2 = lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<in> rel_interior (domain f) \\<Longrightarrow> f ?x2 = lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>rel_interior (domain f). f x = lsc_hull f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_convex_agrees_outside:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x. x \\<notin> closure (domain f) \\<longrightarrow> (f x = (lsc_hull f) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "assume \"x \\<notin> closure (domain f)\""], ["proof (state)\nthis:\n  x \\<notin> closure (domain f)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "hence \"x \\<notin> domain (lsc_hull f)\""], ["proof (prove)\nusing this:\n  x \\<notin> closure (domain f)\n\ngoal (1 subgoal):\n 1. x \\<notin> domain (lsc_hull f)", "using domain_lsc_hull_between"], ["proof (prove)\nusing this:\n  x \\<notin> closure (domain f)\n  domain ?f \\<subseteq> domain (lsc_hull ?f) \\<and>\n  domain (lsc_hull ?f) \\<subseteq> closure (domain ?f)\n\ngoal (1 subgoal):\n 1. x \\<notin> domain (lsc_hull f)", "by auto"], ["proof (state)\nthis:\n  x \\<notin> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "hence \"(lsc_hull f) x = \\<infinity>\""], ["proof (prove)\nusing this:\n  x \\<notin> domain (lsc_hull f)\n\ngoal (1 subgoal):\n 1. lsc_hull f x = \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  x \\<notin> {x. lsc_hull f x < \\<infinity>}\n\ngoal (1 subgoal):\n 1. lsc_hull f x = \\<infinity>", "by auto"], ["proof (state)\nthis:\n  lsc_hull f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "hence \"f x = (lsc_hull f) x\""], ["proof (prove)\nusing this:\n  lsc_hull f x = \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "using lsc_hull_le[of f x]"], ["proof (prove)\nusing this:\n  lsc_hull f x = \\<infinity>\n  lsc_hull f x \\<le> f x\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  f x = lsc_hull f x\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "}"], ["proof (state)\nthis:\n  ?x2 \\<notin> closure (domain f) \\<Longrightarrow> f ?x2 = lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?x2 \\<notin> closure (domain f) \\<Longrightarrow> f ?x2 = lsc_hull f ?x2\n\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  \\<forall>x.\n     x \\<notin> closure (domain f) \\<longrightarrow> f x = lsc_hull f x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_convex_agrees:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  shows \"\\<forall>x. (f x = (lsc_hull f) x) | x : rel_frontier (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x. f x = lsc_hull f x \\<or> x \\<in> rel_frontier (domain f)", "by (metis DiffI assms lsc_hull_of_convex_agrees_onRI lsc_hull_of_convex_agrees_outside rel_frontier_def)"], ["", "lemma lsc_hull_of_proper_convex_proper:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"proper f\"\n  shows \"proper (lsc_hull f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "obtain x where x_def: \"x:rel_interior (domain f) \\<and> f x < \\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x.\n        x \\<in> rel_interior (domain f) \\<and>\n        f x < \\<infinity> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis assms convex_less_ri_domain ereal_less_PInfty proper_iff)"], ["proof (state)\nthis:\n  x \\<in> rel_interior (domain f) \\<and> f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "hence \"f x = (lsc_hull f) x\""], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f) \\<and> f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "using lsc_hull_of_convex_agrees[of f] assms"], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f) \\<and> f x < \\<infinity>\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  \\<forall>x. f x = lsc_hull f x \\<or> x \\<in> rel_frontier (domain f)\n  Lower_Semicontinuous.convex_on UNIV f\n  proper f\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "unfolding rel_frontier_def"], ["proof (prove)\nusing this:\n  x \\<in> rel_interior (domain f) \\<and> f x < \\<infinity>\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  \\<forall>x.\n     f x = lsc_hull f x \\<or>\n     x \\<in> closure (domain f) - rel_interior (domain f)\n  Lower_Semicontinuous.convex_on UNIV f\n  proper f\n\ngoal (1 subgoal):\n 1. f x = lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  f x = lsc_hull f x\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "moreover"], ["proof (state)\nthis:\n  f x = lsc_hull f x\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "have \"f x > -\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - \\<infinity> < f x", "using assms proper_iff"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  proper f\n  proper ?f =\n  ((\\<forall>x. ?f x \\<noteq> - \\<infinity>) \\<and>\n   (\\<exists>x. ?f x \\<noteq> \\<infinity>))\n\ngoal (1 subgoal):\n 1. - \\<infinity> < f x", "by blast"], ["proof (state)\nthis:\n  - \\<infinity> < f x\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "ultimately"], ["proof (chain)\npicking this:\n  f x = lsc_hull f x\n  - \\<infinity> < f x", "have \"(lsc_hull f) x < \\<infinity> \\<and> (lsc_hull f) x > -\\<infinity>\""], ["proof (prove)\nusing this:\n  f x = lsc_hull f x\n  - \\<infinity> < f x\n\ngoal (1 subgoal):\n 1. lsc_hull f x < \\<infinity> \\<and> - \\<infinity> < lsc_hull f x", "using x_def"], ["proof (prove)\nusing this:\n  f x = lsc_hull f x\n  - \\<infinity> < f x\n  x \\<in> rel_interior (domain f) \\<and> f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. lsc_hull f x < \\<infinity> \\<and> - \\<infinity> < lsc_hull f x", "by auto"], ["proof (state)\nthis:\n  lsc_hull f x < \\<infinity> \\<and> - \\<infinity> < lsc_hull f x\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "thus ?thesis"], ["proof (prove)\nusing this:\n  lsc_hull f x < \\<infinity> \\<and> - \\<infinity> < lsc_hull f x\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "using convex_lsc_improper[of \"lsc_hull f\" x]\n    lsc_lsc_hull[of f] assms convex_lsc_hull[of f]"], ["proof (prove)\nusing this:\n  lsc_hull f x < \\<infinity> \\<and> - \\<infinity> < lsc_hull f x\n  \\<lbrakk>Lower_Semicontinuous.convex_on UNIV (lsc_hull f);\n   \\<not> proper (lsc_hull f); lsc (lsc_hull f)\\<rbrakk>\n  \\<Longrightarrow> lsc_hull f x = \\<infinity> \\<or>\n                    lsc_hull f x = - \\<infinity>\n  lsc (lsc_hull f)\n  Lower_Semicontinuous.convex_on UNIV f\n  proper f\n  Lower_Semicontinuous.convex_on UNIV f \\<Longrightarrow>\n  Lower_Semicontinuous.convex_on UNIV (lsc_hull f)\n\ngoal (1 subgoal):\n 1. proper (lsc_hull f)", "by auto"], ["proof (state)\nthis:\n  proper (lsc_hull f)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_proper_convex:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\" \"proper f\"\n  shows \"lsc (lsc_hull f) \\<and> proper (lsc_hull f) \\<and> convex_on UNIV (lsc_hull f) \\<and>\n     (\\<forall>x. (f x = (lsc_hull f) x) | x : rel_frontier (domain f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc (lsc_hull f) \\<and>\n    proper (lsc_hull f) \\<and>\n    Lower_Semicontinuous.convex_on UNIV (lsc_hull f) \\<and>\n    (\\<forall>x. f x = lsc_hull f x \\<or> x \\<in> rel_frontier (domain f))", "by (metis assms convex_lsc_hull lsc_hull_of_convex_agrees lsc_hull_of_proper_convex_proper lsc_lsc_hull)"], ["", "lemma affine_no_rel_frontier:\n  fixes S :: \"('n::euclidean_space) set\"\n  assumes \"affine S\"\n  shows \"rel_frontier S = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rel_frontier S = {}", "unfolding rel_frontier_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. closure S - rel_interior S = {}", "using assms affine_closed[of S]\n  closure_closed[of S] affine_rel_open[of S] rel_open_def[of S]"], ["proof (prove)\nusing this:\n  affine S\n  affine S \\<Longrightarrow> closed S\n  closed S \\<Longrightarrow> closure S = S\n  affine S \\<Longrightarrow> rel_open S\n  rel_open S = (rel_interior S = S)\n\ngoal (1 subgoal):\n 1. closure S - rel_interior S = {}", "by auto"], ["", "lemma convex_with_affine_domain_is_lsc:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"affine (domain f)\"\n  shows \"lsc f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc f", "by (metis assms affine_no_rel_frontier emptyE lsc_def lsc_hull_liminf_at\n          lsc_hull_of_convex_agrees lsc_liminf_at_eq)"], ["", "lemma convex_finite_is_lsc:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"finite_on UNIV f\"\n  shows \"lsc f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc f", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. lsc f", "have \"affine (domain f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. affine (domain f)", "using assms affine_UNIV"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  finite_on UNIV f\n  affine UNIV\n\ngoal (1 subgoal):\n 1. affine (domain f)", "unfolding finite_on_def domain_def"], ["proof (prove)\nusing this:\n  Lower_Semicontinuous.convex_on UNIV f\n  \\<forall>x\\<in>UNIV.\n     f x \\<noteq> \\<infinity> \\<and> f x \\<noteq> - \\<infinity>\n  affine UNIV\n\ngoal (1 subgoal):\n 1. affine {x. f x < \\<infinity>}", "by auto"], ["proof (state)\nthis:\n  affine (domain f)\n\ngoal (1 subgoal):\n 1. lsc f", "thus ?thesis"], ["proof (prove)\nusing this:\n  affine (domain f)\n\ngoal (1 subgoal):\n 1. lsc f", "by (metis assms(1) convex_with_affine_domain_is_lsc)"], ["proof (state)\nthis:\n  lsc f\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma always_eventually_within:\n  \"(\\<forall>x\\<in>S. P x) \\<Longrightarrow> eventually P (at x within S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>S. P x \\<Longrightarrow> eventually P (at x within S)", "unfolding eventually_at_filter"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>S. P x \\<Longrightarrow>\n    \\<forall>\\<^sub>F xa in nhds x.\n       xa \\<noteq> x \\<longrightarrow> xa \\<in> S \\<longrightarrow> P xa", "by auto"], ["", "lemma ereal_divide_pos:\n  assumes \"(a::ereal)>0\" \"b>0\"\n  shows \"a/(ereal b)>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < a / ereal b", "by (metis PInfty_eq_infinity assms ereal.simps(2) ereal_less(2) ereal_less_divide_pos ereal_mult_zero)"], ["", "lemma real_interval_limpt:\n  assumes \"a<b\"\n  shows \"(b::real) islimpt {a..<b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "fix T"], ["proof (state)\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "assume \"b:T\" \"open T\""], ["proof (state)\nthis:\n  b \\<in> T\n  open T\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "then"], ["proof (chain)\npicking this:\n  b \\<in> T\n  open T", "obtain e where e_def: \"e>0 \\<and> cball b e \\<le> T\""], ["proof (prove)\nusing this:\n  b \\<in> T\n  open T\n\ngoal (1 subgoal):\n 1. (\\<And>e.\n        0 < e \\<and> cball b e \\<subseteq> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using open_contains_cball[of T]"], ["proof (prove)\nusing this:\n  b \\<in> T\n  open T\n  open T = (\\<forall>x\\<in>T. \\<exists>e>0. cball x e \\<subseteq> T)\n\ngoal (1 subgoal):\n 1. (\\<And>e.\n        0 < e \\<and> cball b e \\<subseteq> T \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  0 < e \\<and> cball b e \\<subseteq> T\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "hence \"(b-e):cball b e\""], ["proof (prove)\nusing this:\n  0 < e \\<and> cball b e \\<subseteq> T\n\ngoal (1 subgoal):\n 1. b - e \\<in> cball b e", "unfolding cball_def dist_norm"], ["proof (prove)\nusing this:\n  0 < e \\<and> {y. norm (b - y) \\<le> e} \\<subseteq> T\n\ngoal (1 subgoal):\n 1. b - e \\<in> {y. norm (b - y) \\<le> e}", "by auto"], ["proof (state)\nthis:\n  b - e \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "moreover"], ["proof (state)\nthis:\n  b - e \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "{"], ["proof (state)\nthis:\n  b - e \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "assume \"a\\<ge>b-e\""], ["proof (state)\nthis:\n  b - e \\<le> a\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "hence \"a:cball b e\""], ["proof (prove)\nusing this:\n  b - e \\<le> a\n\ngoal (1 subgoal):\n 1. a \\<in> cball b e", "unfolding cball_def dist_norm"], ["proof (prove)\nusing this:\n  b - e \\<le> a\n\ngoal (1 subgoal):\n 1. a \\<in> {y. norm (b - y) \\<le> e}", "using \\<open>a<b\\<close>"], ["proof (prove)\nusing this:\n  b - e \\<le> a\n  a < b\n\ngoal (1 subgoal):\n 1. a \\<in> {y. norm (b - y) \\<le> e}", "by auto"], ["proof (state)\nthis:\n  a \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "}"], ["proof (state)\nthis:\n  b - e \\<le> a \\<Longrightarrow> a \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "ultimately"], ["proof (chain)\npicking this:\n  b - e \\<in> cball b e\n  b - e \\<le> a \\<Longrightarrow> a \\<in> cball b e", "have \"max a (b-e):cball b e\""], ["proof (prove)\nusing this:\n  b - e \\<in> cball b e\n  b - e \\<le> a \\<Longrightarrow> a \\<in> cball b e\n\ngoal (1 subgoal):\n 1. max a (b - e) \\<in> cball b e", "by (metis max.absorb1 max.absorb2 linear)"], ["proof (state)\nthis:\n  max a (b - e) \\<in> cball b e\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "hence \"max a (b-e):T\""], ["proof (prove)\nusing this:\n  max a (b - e) \\<in> cball b e\n\ngoal (1 subgoal):\n 1. max a (b - e) \\<in> T", "using e_def"], ["proof (prove)\nusing this:\n  max a (b - e) \\<in> cball b e\n  0 < e \\<and> cball b e \\<subseteq> T\n\ngoal (1 subgoal):\n 1. max a (b - e) \\<in> T", "by auto"], ["proof (state)\nthis:\n  max a (b - e) \\<in> T\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "moreover"], ["proof (state)\nthis:\n  max a (b - e) \\<in> T\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "have \"max a (b-e):{a..<b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max a (b - e) \\<in> {a..<b}", "using e_def \\<open>a<b\\<close>"], ["proof (prove)\nusing this:\n  0 < e \\<and> cball b e \\<subseteq> T\n  a < b\n\ngoal (1 subgoal):\n 1. max a (b - e) \\<in> {a..<b}", "by auto"], ["proof (state)\nthis:\n  max a (b - e) \\<in> {a..<b}\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "ultimately"], ["proof (chain)\npicking this:\n  max a (b - e) \\<in> T\n  max a (b - e) \\<in> {a..<b}", "have \"\\<exists>y\\<in>{a..<b}. y : T \\<and> y \\<noteq> b\""], ["proof (prove)\nusing this:\n  max a (b - e) \\<in> T\n  max a (b - e) \\<in> {a..<b}\n\ngoal (1 subgoal):\n 1. \\<exists>y\\<in>{a..<b}. y \\<in> T \\<and> y \\<noteq> b", "by auto"], ["proof (state)\nthis:\n  \\<exists>y\\<in>{a..<b}. y \\<in> T \\<and> y \\<noteq> b\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "}"], ["proof (state)\nthis:\n  \\<lbrakk>b \\<in> ?T2; open ?T2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>y\\<in>{a..<b}. y \\<in> ?T2 \\<and> y \\<noteq> b\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>b \\<in> ?T2; open ?T2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>y\\<in>{a..<b}. y \\<in> ?T2 \\<and> y \\<noteq> b\n\ngoal (1 subgoal):\n 1. b islimpt {a..<b}", "unfolding islimpt_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>b \\<in> ?T2; open ?T2\\<rbrakk>\n  \\<Longrightarrow> \\<exists>y\\<in>{a..<b}. y \\<in> ?T2 \\<and> y \\<noteq> b\n\ngoal (1 subgoal):\n 1. \\<forall>T.\n       b \\<in> T \\<longrightarrow>\n       open T \\<longrightarrow>\n       (\\<exists>y\\<in>{a..<b}. y \\<in> T \\<and> y \\<noteq> b)", "by auto"], ["proof (state)\nthis:\n  b islimpt {a..<b}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_convex_aux:\n  \"Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1-m)*a+m*b)) \\<le> ereal b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "have nontr: \"~trivial_limit (at 1 within {0..< 1::real})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at 1 within {0..<1} \\<noteq> bot", "apply (subst trivial_limit_within)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> \\<not> 1 islimpt {0..<1}", "using real_interval_limpt"], ["proof (prove)\nusing this:\n  ?a < ?b \\<Longrightarrow> ?b islimpt {?a..<?b}\n\ngoal (1 subgoal):\n 1. \\<not> \\<not> 1 islimpt {0..<1}", "by auto"], ["proof (state)\nthis:\n  at 1 within {0..<1} \\<noteq> bot\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "have \"((\\<lambda>m. ereal ((1-m)*a+m*b)) \\<longlongrightarrow> (1 - 1) * a + 1 * b) (at 1 within {0..<1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>m. ereal ((1 - m) * a + m * b)) \\<longlongrightarrow>\n     ereal ((1 - 1) * a + 1 * b))\n     (at 1 within {0..<1})", "unfolding lim_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>m. (1 - m) * a + m * b) \\<longlongrightarrow>\n     (1 - 1) * a + 1 * b)\n     (at 1 within {0..<1})", "by (intro tendsto_intros)"], ["proof (state)\nthis:\n  ((\\<lambda>m. ereal ((1 - m) * a + m * b)) \\<longlongrightarrow>\n   ereal ((1 - 1) * a + 1 * b))\n   (at 1 within {0..<1})\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "from lim_imp_Limsup[OF nontr this]"], ["proof (chain)\npicking this:\n  Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b)) =\n  ereal ((1 - 1) * a + 1 * b)", "show ?thesis"], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b)) =\n  ereal ((1 - 1) * a + 1 * b)\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "by simp"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n  \\<le> ereal b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma lsc_hull_of_convex:\n  fixes f :: \"'a::euclidean_space \\<Rightarrow> ereal\"\n  assumes \"convex_on UNIV f\"\n  assumes \"x : rel_interior (domain f)\"\n  shows \"((\\<lambda>m. f((1-m)*\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow> (lsc_hull f) y) (at 1 within {0..<1})\"\n         (is \"(?g \\<longlongrightarrow> _ y) _\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "proof (cases \"y=x\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "case True"], ["proof (state)\nthis:\n  y = x\n\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"?g = (\\<lambda>m. f y)\""], ["proof (prove)\nusing this:\n  y = x\n\ngoal (1 subgoal):\n 1. (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    (\\<lambda>m. f y)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) = (\\<lambda>m. f y)\n\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"(?g \\<longlongrightarrow> f y) (at 1 within {0..<1})\""], ["proof (prove)\nusing this:\n  (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) = (\\<lambda>m. f y)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     f y)\n     (at 1 within {0..<1})", "by simp"], ["proof (state)\nthis:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   f y)\n   (at 1 within {0..<1})\n\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "moreover"], ["proof (state)\nthis:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   f y)\n   (at 1 within {0..<1})\n\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have \"(lsc_hull f) y = f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull f y = f y", "by (metis \\<open>y=x\\<close> assms lsc_hull_of_convex_agrees_onRI)"], ["proof (state)\nthis:\n  lsc_hull f y = f y\n\ngoal (2 subgoals):\n 1. y = x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})\n 2. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "ultimately"], ["proof (chain)\npicking this:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   f y)\n   (at 1 within {0..<1})\n  lsc_hull f y = f y", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   f y)\n   (at 1 within {0..<1})\n  lsc_hull f y = f y\n\ngoal (1 subgoal):\n 1. ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   lsc_hull f y)\n   (at 1 within {0..<1})\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "case False"], ["proof (state)\nthis:\n  y \\<noteq> x\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have aux: \"\\<forall>m. y - ((1 - m) *\\<^sub>R x + m *\\<^sub>R y) = (1-m)*\\<^sub>R (y-x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>m.\n       y - ((1 - m) *\\<^sub>R x + m *\\<^sub>R y) = (1 - m) *\\<^sub>R (y - x)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<forall>m.\n     y - ((1 - m) *\\<^sub>R x + m *\\<^sub>R y) = (1 - m) *\\<^sub>R (y - x)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have \"(lsc_hull f) y = min (f y) (Liminf (at y) f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lsc_hull f y = min (f y) (Liminf (at y) f)", "by (metis lsc_hull_liminf_at)"], ["proof (state)\nthis:\n  lsc_hull f y = min (f y) (Liminf (at y) f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "also"], ["proof (state)\nthis:\n  lsc_hull f y = min (f y) (Liminf (at y) f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have \"\\<dots> \\<le> Liminf (at 1 within {0..<1}) ?g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (f y) (Liminf (at y) f)\n    \\<le> Liminf (at 1 within {0..<1})\n           (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "unfolding min_Liminf_at"], ["proof (prove)\ngoal (1 subgoal):\n 1. (SUP e\\<in>{0<..}. Inf (f ` ball y e))\n    \\<le> Liminf (at 1 within {0..<1})\n           (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "unfolding Liminf_within"], ["proof (prove)\ngoal (1 subgoal):\n 1. (SUP e\\<in>{0<..}. Inf (f ` ball y e))\n    \\<le> (SUP e\\<in>{0<..}.\n              INF m\\<in>{0..<1} \\<inter> ball 1 e - {1}.\n                 f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "apply (subst SUP_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>n.\n       n \\<in> {0<..} \\<Longrightarrow>\n       \\<exists>m\\<in>{0<..}.\n          Inf (f ` ball y n)\n          \\<le> (INF m\\<in>{0..<1} \\<inter> ball 1 m - {1}.\n                    f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n 2. True", "apply (rule_tac x=\"n/norm(y-x)\" in bexI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>n.\n       n \\<in> {0<..} \\<Longrightarrow>\n       Inf (f ` ball y n)\n       \\<le> (INF m\\<in>{0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}.\n                 f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n 2. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> n / norm (y - x) \\<in> {0<..}\n 3. True", "apply (subst INF_mono)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}\\<rbrakk>\n       \\<Longrightarrow> \\<exists>n\\<in>ball y n.\n                            f n\n                            \\<le> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n 2. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> True\n 3. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> n / norm (y - x) \\<in> {0<..}\n 4. True", "apply (rule_tac x=\"(1 - m) *\\<^sub>R x + m *\\<^sub>R y\" in bexI)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}\\<rbrakk>\n       \\<Longrightarrow> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n                         \\<le> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n 2. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}\\<rbrakk>\n       \\<Longrightarrow> (1 - m) *\\<^sub>R x + m *\\<^sub>R y \\<in> ball y n\n 3. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> True\n 4. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> n / norm (y - x) \\<in> {0<..}\n 5. True", "prefer 2"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}\\<rbrakk>\n       \\<Longrightarrow> (1 - m) *\\<^sub>R x + m *\\<^sub>R y \\<in> ball y n\n 2. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> ball 1 (n / norm (y - x)) - {1}\\<rbrakk>\n       \\<Longrightarrow> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n                         \\<le> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n 3. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> True\n 4. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> n / norm (y - x) \\<in> {0<..}\n 5. True", "unfolding ball_def dist_norm"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> {ya. norm (1 - ya) < n / norm (y - x)} -\n                {1}\\<rbrakk>\n       \\<Longrightarrow> (1 - m) *\\<^sub>R x + m *\\<^sub>R y\n                         \\<in> {ya. norm (y - ya) < n}\n 2. \\<And>n m.\n       \\<lbrakk>n \\<in> {0<..};\n        m \\<in> {0..<1} \\<inter> {ya. norm (1 - ya) < n / norm (y - x)} -\n                {1}\\<rbrakk>\n       \\<Longrightarrow> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n                         \\<le> f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n 3. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> True\n 4. \\<And>n. n \\<in> {0<..} \\<Longrightarrow> n / norm (y - x) \\<in> {0<..}\n 5. True", "by (auto simp add: aux \\<open>y\\<noteq>x\\<close> less_divide_eq)"], ["proof (state)\nthis:\n  min (f y) (Liminf (at y) f)\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "finally"], ["proof (chain)\npicking this:\n  lsc_hull f y\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "have *: \"(lsc_hull f) y \\<le> Liminf (at 1 within {0..<1}) ?g\""], ["proof (prove)\nusing this:\n  lsc_hull f y\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. lsc_hull f y\n    \\<le> Liminf (at 1 within {0..<1})\n           (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "by auto"], ["proof (state)\nthis:\n  lsc_hull f y\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "{"], ["proof (state)\nthis:\n  lsc_hull f y\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "fix b"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "assume \"ereal b\\<ge>(lsc_hull f) y\""], ["proof (state)\nthis:\n  lsc_hull f y \\<le> ereal b\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence yb: \"(y,b):closure(Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  lsc_hull f y \\<le> ereal b\n\ngoal (1 subgoal):\n 1. (y, b) \\<in> closure (Epigraph UNIV f)", "by (metis epigraph_lsc_hull mem_Epigraph UNIV_I)"], ["proof (state)\nthis:\n  (y, b) \\<in> closure (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have \"x : domain f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> domain f", "by (metis assms(2) rel_interior_subset rev_subsetD)"], ["proof (state)\nthis:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"f x<\\<infinity>\""], ["proof (prove)\nusing this:\n  x \\<in> domain f\n\ngoal (1 subgoal):\n 1. f x < \\<infinity>", "unfolding domain_def"], ["proof (prove)\nusing this:\n  x \\<in> {x. f x < \\<infinity>}\n\ngoal (1 subgoal):\n 1. f x < \\<infinity>", "by auto"], ["proof (state)\nthis:\n  f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "then"], ["proof (chain)\npicking this:\n  f x < \\<infinity>", "obtain a where\"ereal a>f x\""], ["proof (prove)\nusing this:\n  f x < \\<infinity>\n\ngoal (1 subgoal):\n 1. (\\<And>a. f x < ereal a \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis ereal_dense2)"], ["proof (state)\nthis:\n  f x < ereal a\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence xa: \"(x,a):rel_interior(Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  f x < ereal a\n\ngoal (1 subgoal):\n 1. (x, a) \\<in> rel_interior (Epigraph UNIV f)", "by (metis assms rel_interior_Epigraph)"], ["proof (state)\nthis:\n  (x, a) \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "{"], ["proof (state)\nthis:\n  (x, a) \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "fix m :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "assume \"0 \\<le> m \\<and> m < 1\""], ["proof (state)\nthis:\n  0 \\<le> m \\<and> m < 1\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"(y, b) - (1-m) *\\<^sub>R ((y, b) - (x, a)) : rel_interior (Epigraph UNIV f)\""], ["proof (prove)\nusing this:\n  0 \\<le> m \\<and> m < 1\n\ngoal (1 subgoal):\n 1. (y, b) - (1 - m) *\\<^sub>R ((y, b) - (x, a))\n    \\<in> rel_interior (Epigraph UNIV f)", "apply (subst rel_interior_closure_convex_shrink)"], ["proof (prove)\ngoal (6 subgoals):\n 1. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> convex (Epigraph UNIV f)\n 2. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (x, a) \\<in> rel_interior (Epigraph UNIV f)\n 3. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (y, b) \\<in> closure (Epigraph UNIV f)\n 4. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 0 < 1 - m\n 5. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 1 - m \\<le> 1\n 6. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> True", "apply (metis assms(1) convex_Epigraph convex_UNIV convex_on_ereal_univ)"], ["proof (prove)\ngoal (5 subgoals):\n 1. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (x, a) \\<in> rel_interior (Epigraph UNIV f)\n 2. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (y, b) \\<in> closure (Epigraph UNIV f)\n 3. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 0 < 1 - m\n 4. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 1 - m \\<le> 1\n 5. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> True", "using yb xa"], ["proof (prove)\nusing this:\n  (y, b) \\<in> closure (Epigraph UNIV f)\n  (x, a) \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (5 subgoals):\n 1. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (x, a) \\<in> rel_interior (Epigraph UNIV f)\n 2. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n    (y, b) \\<in> closure (Epigraph UNIV f)\n 3. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 0 < 1 - m\n 4. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> 1 - m \\<le> 1\n 5. 0 \\<le> m \\<and> m < 1 \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  (y, b) - (1 - m) *\\<^sub>R ((y, b) - (x, a))\n  \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"f (y - (1-m) *\\<^sub>R (y-x) ) < ereal (b-(1-m)*(b-a))\""], ["proof (prove)\nusing this:\n  (y, b) - (1 - m) *\\<^sub>R ((y, b) - (x, a))\n  \\<in> rel_interior (Epigraph UNIV f)\n\ngoal (1 subgoal):\n 1. f (y - (1 - m) *\\<^sub>R (y - x)) < ereal (b - (1 - m) * (b - a))", "using assms(1) rel_interior_Epigraph"], ["proof (prove)\nusing this:\n  (y, b) - (1 - m) *\\<^sub>R ((y, b) - (x, a))\n  \\<in> rel_interior (Epigraph UNIV f)\n  Lower_Semicontinuous.convex_on UNIV f\n  Lower_Semicontinuous.convex_on UNIV ?f \\<Longrightarrow>\n  ((?x, ?z) \\<in> rel_interior (Epigraph UNIV ?f)) =\n  (?x \\<in> rel_interior (domain ?f) \\<and> ?f ?x < ereal ?z)\n\ngoal (1 subgoal):\n 1. f (y - (1 - m) *\\<^sub>R (y - x)) < ereal (b - (1 - m) * (b - a))", "by auto"], ["proof (state)\nthis:\n  f (y - (1 - m) *\\<^sub>R (y - x)) < ereal (b - (1 - m) * (b - a))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"?g m \\<le> ereal ((1-m)*a+m*b)\""], ["proof (prove)\nusing this:\n  f (y - (1 - m) *\\<^sub>R (y - x)) < ereal (b - (1 - m) * (b - a))\n\ngoal (1 subgoal):\n 1. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n    \\<le> ereal ((1 - m) * a + m * b)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y) \\<le> ereal ((1 - m) * a + m * b)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "}"], ["proof (state)\nthis:\n  0 \\<le> ?m2 \\<and> ?m2 < 1 \\<Longrightarrow>\n  f ((1 - ?m2) *\\<^sub>R x + ?m2 *\\<^sub>R y)\n  \\<le> ereal ((1 - ?m2) * a + ?m2 * b)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"eventually (\\<lambda>m. ?g m \\<le> ereal ((1-m)*a+m*b))\n         (at 1 within {0..<1})\""], ["proof (prove)\nusing this:\n  0 \\<le> ?m2 \\<and> ?m2 < 1 \\<Longrightarrow>\n  f ((1 - ?m2) *\\<^sub>R x + ?m2 *\\<^sub>R y)\n  \\<le> ereal ((1 - ?m2) * a + ?m2 * b)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F m in at 1 within {0..<1}.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n       \\<le> ereal ((1 - m) * a + m * b)", "apply (subst always_eventually_within)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<And>m.\n        0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n        f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n        \\<le> ereal ((1 - m) * a + m * b)) \\<Longrightarrow>\n    \\<forall>xa\\<in>{0..<1}.\n       f ((1 - xa) *\\<^sub>R x + xa *\\<^sub>R y)\n       \\<le> ereal ((1 - xa) * a + xa * b)\n 2. (\\<And>m.\n        0 \\<le> m \\<and> m < 1 \\<Longrightarrow>\n        f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n        \\<le> ereal ((1 - m) * a + m * b)) \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F m in at 1 within {0..<1}.\n     f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n     \\<le> ereal ((1 - m) * a + m * b)\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"Limsup (at 1 within {0..<1}) ?g \\<le> Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1-m)*a+m*b))\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F m in at 1 within {0..<1}.\n     f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n     \\<le> ereal ((1 - m) * a + m * b)\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n    \\<le> Limsup (at 1 within {0..<1})\n           (\\<lambda>m. ereal ((1 - m) * a + m * b))", "apply (subst Limsup_mono)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F m in at 1 within {0..<1}.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n       \\<le> ereal ((1 - m) * a + m * b) \\<Longrightarrow>\n    \\<forall>\\<^sub>F xa in at 1 within {0..<1}.\n       f ((1 - xa) *\\<^sub>R x + xa *\\<^sub>R y)\n       \\<le> ereal ((1 - xa) * a + xa * b)\n 2. \\<forall>\\<^sub>F m in at 1 within {0..<1}.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)\n       \\<le> ereal ((1 - m) * a + m * b) \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. ereal ((1 - m) * a + m * b))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "also"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. ereal ((1 - m) * a + m * b))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have \"\\<dots> \\<le> ereal b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "using lsc_hull_of_convex_aux"], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * ?a + m * ?b))\n  \\<le> ereal ?b\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n    \\<le> ereal b", "by auto"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1}) (\\<lambda>m. ereal ((1 - m) * a + m * b))\n  \\<le> ereal b\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "finally"], ["proof (chain)\npicking this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal b", "have \"Limsup (at 1 within {0..<1}) ?g \\<le>ereal b\""], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal b\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n    \\<le> ereal b", "by auto"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal b\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "}"], ["proof (state)\nthis:\n  lsc_hull f y \\<le> ereal ?b2 \\<Longrightarrow>\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal ?b2\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"Limsup (at 1 within {0..<1}) ?g \\<le> (lsc_hull f) y\""], ["proof (prove)\nusing this:\n  lsc_hull f y \\<le> ereal ?b2 \\<Longrightarrow>\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal ?b2\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n    \\<le> lsc_hull f y", "using ereal_le_real[of \"(lsc_hull f) y\"]"], ["proof (prove)\nusing this:\n  lsc_hull f y \\<le> ereal ?b2 \\<Longrightarrow>\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> ereal ?b2\n  (\\<And>z.\n      lsc_hull f y \\<le> ereal z \\<Longrightarrow>\n      ?y \\<le> ereal z) \\<Longrightarrow>\n  ?y \\<le> lsc_hull f y\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n    \\<le> lsc_hull f y", "by auto"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> lsc_hull f y\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "moreover"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> lsc_hull f y\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "have nontr: \"~trivial_limit (at (1::real) within {0..<1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. at 1 within {0..<1} \\<noteq> bot", "apply (subst trivial_limit_within)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> \\<not> 1 islimpt {0..<1}", "using real_interval_limpt"], ["proof (prove)\nusing this:\n  ?a < ?b \\<Longrightarrow> ?b islimpt {?a..<?b}\n\ngoal (1 subgoal):\n 1. \\<not> \\<not> 1 islimpt {0..<1}", "by auto"], ["proof (state)\nthis:\n  at 1 within {0..<1} \\<noteq> bot\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "moreover"], ["proof (state)\nthis:\n  at 1 within {0..<1} \\<noteq> bot\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "hence \"Liminf (at 1 within {0..<1}) ?g \\<le> Limsup (at 1 within {0..<1}) ?g\""], ["proof (prove)\nusing this:\n  at 1 within {0..<1} \\<noteq> bot\n\ngoal (1 subgoal):\n 1. Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n    \\<le> Limsup (at 1 within {0..<1})\n           (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "apply (subst Liminf_le_Limsup)"], ["proof (prove)\ngoal (2 subgoals):\n 1. at 1 within {0..<1} \\<noteq> bot \\<Longrightarrow>\n    at 1 within {0..<1} \\<noteq> bot\n 2. at 1 within {0..<1} \\<noteq> bot \\<Longrightarrow> True", "by auto"], ["proof (state)\nthis:\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "ultimately"], ["proof (chain)\npicking this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> lsc_hull f y\n  at 1 within {0..<1} \\<noteq> bot\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))", "have \"Limsup (at 1 within {0..<1}) ?g = (lsc_hull f) y\n                   \\<and> Liminf (at 1 within {0..<1}) ?g = (lsc_hull f) y\""], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> lsc_hull f y\n  at 1 within {0..<1} \\<noteq> bot\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y", "using *"], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> lsc_hull f y\n  at 1 within {0..<1} \\<noteq> bot\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  \\<le> Limsup (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n  lsc_hull f y\n  \\<le> Liminf (at 1 within {0..<1})\n         (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y))\n\ngoal (1 subgoal):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y", "by auto"], ["proof (state)\nthis:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n  lsc_hull f y \\<and>\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n  lsc_hull f y\n\ngoal (1 subgoal):\n 1. y \\<noteq> x \\<Longrightarrow>\n    ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "thus ?thesis"], ["proof (prove)\nusing this:\n  Limsup (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n  lsc_hull f y \\<and>\n  Liminf (at 1 within {0..<1})\n   (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n  lsc_hull f y\n\ngoal (1 subgoal):\n 1. ((\\<lambda>m.\n         f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n     lsc_hull f y)\n     (at 1 within {0..<1})", "apply (subst Liminf_eq_Limsup)"], ["proof (prove)\ngoal (4 subgoals):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    at 1 within {0..<1} \\<noteq> bot\n 2. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y\n 3. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y\n 4. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    True", "using nontr"], ["proof (prove)\nusing this:\n  at 1 within {0..<1} \\<noteq> bot\n\ngoal (4 subgoals):\n 1. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    at 1 within {0..<1} \\<noteq> bot\n 2. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y\n 3. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y\n 4. Limsup (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<and>\n    Liminf (at 1 within {0..<1})\n     (\\<lambda>m. f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) =\n    lsc_hull f y \\<Longrightarrow>\n    True", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>m.\n       f ((1 - m) *\\<^sub>R x + m *\\<^sub>R y)) \\<longlongrightarrow>\n   lsc_hull f y)\n   (at 1 within {0..<1})\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}