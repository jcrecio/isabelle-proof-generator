{"file_name": "/home/qj213/afp-2021-10-22/thys/Metalogic_ProofChecker/EtaNorm.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Metalogic_ProofChecker", "problem_names": ["lemma subst_bv2_not_free [simp]: \"\\<not> loose_bvar1 s i \\<Longrightarrow> subst_bv2 s i t = subst_bv2 s i u\"", "lemma free_lift [simp]:\n    \"loose_bvar1 (lift t k) i = (i < k \\<and> loose_bvar1 t i \\<or> k < i \\<and> loose_bvar1 t (i - 1))\"", "lemma free_subst_bv2 [simp]:\n    \"loose_bvar1 (subst_bv2 s k t) i =\n      (loose_bvar1 s k \\<and> loose_bvar1 t i \\<or> loose_bvar1 s (if i < k then i else i + 1))\"", "lemma free_eta: \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> loose_bvar1 t i = loose_bvar1 s i\"", "lemma not_free_eta:\n    \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> \\<not> loose_bvar1 s i \\<Longrightarrow> \\<not> loose_bvar1 t i\"", "lemma no_loose_bvar1_subst_bv2_decr: \"\\<not> loose_bvar1 t i \\<Longrightarrow> subst_bv2 t i x = decr i t\"", "lemma eta_subst_bv2 [simp]:\n    \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta> subst_bv2 t i u\"", "theorem lift_subst_bv2_dummy: \"\\<not> loose_bvar s i \\<Longrightarrow> lift (decr i s) i = s\"", "lemma decr_is_closed[simp]: \"is_closed t \\<Longrightarrow> decr lev t = t\"", "lemma eta_reducible_imp_eta_step: \"eta_reducible t \\<Longrightarrow> \\<exists>t'. t \\<rightarrow>\\<^sub>\\<eta> t'\"", "lemma eta_step_imp_eta_reducible: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> eta_reducible t\"", "lemma eta_reds_appR: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> u $ s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* u $ t\"", "lemma eta_reds_appL: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> s $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t $ u\"", "lemma eta_reds_abs: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> Abs T s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* Abs T t\"", "lemma eta_norm_imp_eta_reds: assumes \"eta_norm t = t'\" shows \"t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\"", "lemma rtrancl_eta_App:\n    \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s' \\<Longrightarrow> t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t' \\<Longrightarrow> s $ t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s' $ t'\"", "lemma eta_preserves_typ_of1: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> typ_of1 Ts t = Some \\<tau> \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\"", "lemma eta_preserves_typ_of: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> typ_of t = Some \\<tau> \\<Longrightarrow> typ_of t' = Some \\<tau>\"", "lemma eta_star_preserves_typ_of1: \"r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s \\<Longrightarrow> typ_of1 Ts r = Some T  \\<Longrightarrow> typ_of1 Ts s = Some T\"", "lemma eta_star_preserves_typ_of: \"r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s \\<Longrightarrow> typ_of r = Some T  \\<Longrightarrow> typ_of s = Some T\"", "lemma subst_bvs1'_decr: \"\\<forall>x\\<in>set us. is_closed x  \\<Longrightarrow> \\<not> loose_bvar1 t k \n  \\<Longrightarrow> subst_bvs1' (decr k t) k us = decr k (subst_bvs1' t (Suc k) us)\"", "lemma subst_bvs_decr: \"\\<forall>x\\<in>set us. is_closed x  \\<Longrightarrow> \\<not> is_dependent t\n  \\<Longrightarrow> subst_bvs us (decr 0 t) = decr 0 (subst_bvs1' t 1 us)\""], "translations": [["", "lemma subst_bv2_not_free [simp]: \"\\<not> loose_bvar1 s i \\<Longrightarrow> subst_bv2 s i t = subst_bv2 s i u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 s i \\<Longrightarrow>\n    subst_bv2 s i t = subst_bv2 s i u", "by (induction s arbitrary: i t u) (simp_all add:)"], ["", "lemma free_lift [simp]:\n    \"loose_bvar1 (lift t k) i = (i < k \\<and> loose_bvar1 t i \\<or> k < i \\<and> loose_bvar1 t (i - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. loose_bvar1 (lift t k) i =\n    (i < k \\<and> loose_bvar1 t i \\<or> k < i \\<and> loose_bvar1 t (i - 1))", "by (induct t arbitrary: i k) (auto cong: conj_cong)"], ["", "lemma free_subst_bv2 [simp]:\n    \"loose_bvar1 (subst_bv2 s k t) i =\n      (loose_bvar1 s k \\<and> loose_bvar1 t i \\<or> loose_bvar1 s (if i < k then i else i + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. loose_bvar1 (subst_bv2 s k t) i =\n    (loose_bvar1 s k \\<and> loose_bvar1 t i \\<or>\n     loose_bvar1 s (if i < k then i else i + 1))", "apply (induct s arbitrary: i k t)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x1 x2 i k t.\n       loose_bvar1 (subst_bv2 (Ct x1 x2) k t) i =\n       (loose_bvar1 (Ct x1 x2) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Ct x1 x2) (if i < k then i else i + 1))\n 2. \\<And>x1 x2 i k t.\n       loose_bvar1 (subst_bv2 (Fv x1 x2) k t) i =\n       (loose_bvar1 (Fv x1 x2) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Fv x1 x2) (if i < k then i else i + 1))\n 3. \\<And>x i k t.\n       loose_bvar1 (subst_bv2 (Bv x) k t) i =\n       (loose_bvar1 (Bv x) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Bv x) (if i < k then i else i + 1))\n 4. \\<And>x1 s i k t.\n       (\\<And>i k t.\n           loose_bvar1 (subst_bv2 s k t) i =\n           (loose_bvar1 s k \\<and> loose_bvar1 t i \\<or>\n            loose_bvar1 s (if i < k then i else i + 1))) \\<Longrightarrow>\n       loose_bvar1 (subst_bv2 (Abs x1 s) k t) i =\n       (loose_bvar1 (Abs x1 s) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Abs x1 s) (if i < k then i else i + 1))\n 5. \\<And>s1 s2 i k t.\n       \\<lbrakk>\\<And>i k t.\n                   loose_bvar1 (subst_bv2 s1 k t) i =\n                   (loose_bvar1 s1 k \\<and> loose_bvar1 t i \\<or>\n                    loose_bvar1 s1 (if i < k then i else i + 1));\n        \\<And>i k t.\n           loose_bvar1 (subst_bv2 s2 k t) i =\n           (loose_bvar1 s2 k \\<and> loose_bvar1 t i \\<or>\n            loose_bvar1 s2 (if i < k then i else i + 1))\\<rbrakk>\n       \\<Longrightarrow> loose_bvar1 (subst_bv2 (s1 $ s2) k t) i =\n                         (loose_bvar1 (s1 $ s2) k \\<and>\n                          loose_bvar1 t i \\<or>\n                          loose_bvar1 (s1 $ s2)\n                           (if i < k then i else i + 1))", "using free_lift"], ["proof (prove)\nusing this:\n  loose_bvar1 (lift ?t ?k) ?i =\n  (?i < ?k \\<and> loose_bvar1 ?t ?i \\<or>\n   ?k < ?i \\<and> loose_bvar1 ?t (?i - 1))\n\ngoal (5 subgoals):\n 1. \\<And>x1 x2 i k t.\n       loose_bvar1 (subst_bv2 (Ct x1 x2) k t) i =\n       (loose_bvar1 (Ct x1 x2) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Ct x1 x2) (if i < k then i else i + 1))\n 2. \\<And>x1 x2 i k t.\n       loose_bvar1 (subst_bv2 (Fv x1 x2) k t) i =\n       (loose_bvar1 (Fv x1 x2) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Fv x1 x2) (if i < k then i else i + 1))\n 3. \\<And>x i k t.\n       loose_bvar1 (subst_bv2 (Bv x) k t) i =\n       (loose_bvar1 (Bv x) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Bv x) (if i < k then i else i + 1))\n 4. \\<And>x1 s i k t.\n       (\\<And>i k t.\n           loose_bvar1 (subst_bv2 s k t) i =\n           (loose_bvar1 s k \\<and> loose_bvar1 t i \\<or>\n            loose_bvar1 s (if i < k then i else i + 1))) \\<Longrightarrow>\n       loose_bvar1 (subst_bv2 (Abs x1 s) k t) i =\n       (loose_bvar1 (Abs x1 s) k \\<and> loose_bvar1 t i \\<or>\n        loose_bvar1 (Abs x1 s) (if i < k then i else i + 1))\n 5. \\<And>s1 s2 i k t.\n       \\<lbrakk>\\<And>i k t.\n                   loose_bvar1 (subst_bv2 s1 k t) i =\n                   (loose_bvar1 s1 k \\<and> loose_bvar1 t i \\<or>\n                    loose_bvar1 s1 (if i < k then i else i + 1));\n        \\<And>i k t.\n           loose_bvar1 (subst_bv2 s2 k t) i =\n           (loose_bvar1 s2 k \\<and> loose_bvar1 t i \\<or>\n            loose_bvar1 s2 (if i < k then i else i + 1))\\<rbrakk>\n       \\<Longrightarrow> loose_bvar1 (subst_bv2 (s1 $ s2) k t) i =\n                         (loose_bvar1 (s1 $ s2) k \\<and>\n                          loose_bvar1 t i \\<or>\n                          loose_bvar1 (s1 $ s2)\n                           (if i < k then i else i + 1))", "apply (simp_all add: diff_Suc split: nat.split)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s1 s2 i k t.\n       \\<lbrakk>\\<And>i k t.\n                   loose_bvar1 (subst_bv2 s1 k t) i =\n                   (loose_bvar1 s1 k \\<and> loose_bvar1 t i \\<or>\n                    loose_bvar1 s1 (if i < k then i else i + 1));\n        \\<And>i k t.\n           loose_bvar1 (subst_bv2 s2 k t) i =\n           (loose_bvar1 s2 k \\<and> loose_bvar1 t i \\<or>\n            loose_bvar1 s2 (if i < k then i else i + 1));\n        \\<And>t k i.\n           loose_bvar1 (incr_bv (Suc 0) k t) i =\n           (i < k \\<and> loose_bvar1 t i \\<or>\n            k < i \\<and>\n            loose_bvar1 t\n             (case i of 0 \\<Rightarrow> 0 | Suc k \\<Rightarrow> k))\\<rbrakk>\n       \\<Longrightarrow> (i < k \\<longrightarrow>\n                          (loose_bvar1 s1 k \\<and> loose_bvar1 t i \\<or>\n                           loose_bvar1 s1 i \\<or>\n                           loose_bvar1 s2 k \\<and> loose_bvar1 t i \\<or>\n                           loose_bvar1 s2 i) =\n                          ((loose_bvar1 s1 k \\<or> loose_bvar1 s2 k) \\<and>\n                           loose_bvar1 t i \\<or>\n                           loose_bvar1 s1 i \\<or> loose_bvar1 s2 i)) \\<and>\n                         (k < Suc i \\<longrightarrow>\n                          (loose_bvar1 s1 k \\<and> loose_bvar1 t i \\<or>\n                           loose_bvar1 s1 (Suc i) \\<or>\n                           loose_bvar1 s2 k \\<and> loose_bvar1 t i \\<or>\n                           loose_bvar1 s2 (Suc i)) =\n                          ((loose_bvar1 s1 k \\<or> loose_bvar1 s2 k) \\<and>\n                           loose_bvar1 t i \\<or>\n                           loose_bvar1 s1 (Suc i) \\<or>\n                           loose_bvar1 s2 (Suc i)))", "by blast"], ["", "lemma free_eta: \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> loose_bvar1 t i = loose_bvar1 s i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow>\n    loose_bvar1 t i = loose_bvar1 s i", "apply (induct arbitrary: i set: eta)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>s T i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       loose_bvar1 (decr 0 s) i = loose_bvar1 (Abs T (s $ Bv 0)) i\n 2. \\<And>s t u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>i. loose_bvar1 t i = loose_bvar1 s i\\<rbrakk>\n       \\<Longrightarrow> loose_bvar1 (t $ u) i = loose_bvar1 (s $ u) i\n 3. \\<And>s t u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>i. loose_bvar1 t i = loose_bvar1 s i\\<rbrakk>\n       \\<Longrightarrow> loose_bvar1 (u $ t) i = loose_bvar1 (u $ s) i\n 4. \\<And>s t T i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>i. loose_bvar1 t i = loose_bvar1 s i\\<rbrakk>\n       \\<Longrightarrow> loose_bvar1 (Abs T t) i = loose_bvar1 (Abs T s) i", "apply (simp_all cong: conj_cong)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       loose_bvar1 (decr 0 s) i = loose_bvar1 s (Suc i)", "using is_dependent_def loose_bvar1_decr''' loose_bvar1_decr''''"], ["proof (prove)\nusing this:\n  is_dependent ?t \\<equiv> loose_bvar1 ?t 0\n  \\<lbrakk>loose_bvar1 ?t (Suc ?lev); ?lev' \\<le> ?lev\\<rbrakk>\n  \\<Longrightarrow> loose_bvar1 (decr ?lev' ?t) ?lev\n  \\<lbrakk>\\<not> loose_bvar1 ?t ?lev'; ?lev' \\<le> ?lev;\n   \\<not> loose_bvar1 ?t (Suc ?lev)\\<rbrakk>\n  \\<Longrightarrow> \\<not> loose_bvar1 (decr ?lev' ?t) ?lev\n\ngoal (1 subgoal):\n 1. \\<And>s i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       loose_bvar1 (decr 0 s) i = loose_bvar1 s (Suc i)", "by blast"], ["", "lemma not_free_eta:\n    \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> \\<not> loose_bvar1 s i \\<Longrightarrow> \\<not> loose_bvar1 t i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; \\<not> loose_bvar1 s i\\<rbrakk>\n    \\<Longrightarrow> \\<not> loose_bvar1 t i", "by (simp add: free_eta)"], ["", "lemma no_loose_bvar1_subst_bv2_decr: \"\\<not> loose_bvar1 t i \\<Longrightarrow> subst_bv2 t i x = decr i t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 t i \\<Longrightarrow> subst_bv2 t i x = decr i t", "by (induction t i x rule: subst_bv2.induct) auto"], ["", "lemma eta_subst_bv2 [simp]:\n    \"s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow> subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta> subst_bv2 t i u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<rightarrow>\\<^sub>\\<eta> t \\<Longrightarrow>\n    subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta> subst_bv2 t i u", "proof (induction s t arbitrary: u i rule: eta.induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>s T u i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n       subst_bv2 (decr 0 s) i u\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 3. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 4. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "case (eta s T)"], ["proof (state)\nthis:\n  \\<not> is_dependent s\n\ngoal (4 subgoals):\n 1. \\<And>s T u i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n       subst_bv2 (decr 0 s) i u\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 3. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 4. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "hence 1: \"\\<not> loose_bvar1 s 0\""], ["proof (prove)\nusing this:\n  \\<not> is_dependent s\n\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 s 0", "using is_dependent_def"], ["proof (prove)\nusing this:\n  \\<not> is_dependent s\n  is_dependent ?t \\<equiv> loose_bvar1 ?t 0\n\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 s 0", "by simp"], ["proof (state)\nthis:\n  \\<not> loose_bvar1 s 0\n\ngoal (4 subgoals):\n 1. \\<And>s T u i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n       subst_bv2 (decr 0 s) i u\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 3. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 4. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "have \"decr 0 s = subst_bv2 s 0 dummy\" for dummy"], ["proof (prove)\ngoal (1 subgoal):\n 1. decr 0 s = subst_bv2 s 0 dummy", "using no_loose_bvar1_subst_bv2_decr[symmetric, OF 1, of dummy]"], ["proof (prove)\nusing this:\n  decr 0 s = subst_bv2 s 0 dummy\n\ngoal (1 subgoal):\n 1. decr 0 s = subst_bv2 s 0 dummy", "."], ["proof (state)\nthis:\n  decr 0 s = subst_bv2 s 0 ?dummy\n\ngoal (4 subgoals):\n 1. \\<And>s T u i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n       subst_bv2 (decr 0 s) i u\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 3. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 4. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "from this"], ["proof (chain)\npicking this:\n  decr 0 s = subst_bv2 s 0 ?dummy", "obtain dummy where dummy: \"decr 0 s = subst_bv2 s 0 dummy\""], ["proof (prove)\nusing this:\n  decr 0 s = subst_bv2 s 0 ?dummy\n\ngoal (1 subgoal):\n 1. (\\<And>dummy.\n        decr 0 s = subst_bv2 s 0 dummy \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by simp"], ["proof (state)\nthis:\n  decr 0 s = subst_bv2 s 0 dummy\n\ngoal (4 subgoals):\n 1. \\<And>s T u i.\n       \\<not> is_dependent s \\<Longrightarrow>\n       subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n       subst_bv2 (decr 0 s) i u\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 3. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 4. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n    subst_bv2 (decr 0 s) i u", "using 1"], ["proof (prove)\nusing this:\n  \\<not> loose_bvar1 s 0\n\ngoal (1 subgoal):\n 1. subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n    subst_bv2 (decr 0 s) i u", "apply (simp add: dummy subst_bv2_subst_bv2 [symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 s 0 \\<Longrightarrow>\n    Abs T\n     (subst_bv2 s (Suc i) (incr_bv (Suc 0) 0 u) $\n      Bv 0) \\<rightarrow>\\<^sub>\\<eta>\n    subst_bv2 (subst_bv2 s (Suc i) (incr_bv (Suc 0) 0 u)) 0\n     (subst_bv2 dummy i u)", "using free_lift is_dependent_def no_loose_bvar1_subst_bv2_decr"], ["proof (prove)\nusing this:\n  loose_bvar1 (lift ?t ?k) ?i =\n  (?i < ?k \\<and> loose_bvar1 ?t ?i \\<or>\n   ?k < ?i \\<and> loose_bvar1 ?t (?i - 1))\n  is_dependent ?t \\<equiv> loose_bvar1 ?t 0\n  \\<not> loose_bvar1 ?t ?i \\<Longrightarrow> subst_bv2 ?t ?i ?x = decr ?i ?t\n\ngoal (1 subgoal):\n 1. \\<not> loose_bvar1 s 0 \\<Longrightarrow>\n    Abs T\n     (subst_bv2 s (Suc i) (incr_bv (Suc 0) 0 u) $\n      Bv 0) \\<rightarrow>\\<^sub>\\<eta>\n    subst_bv2 (subst_bv2 s (Suc i) (incr_bv (Suc 0) 0 u)) 0\n     (subst_bv2 dummy i u)", "by auto"], ["proof (state)\nthis:\n  subst_bv2 (Abs T (s $ Bv 0)) i u \\<rightarrow>\\<^sub>\\<eta>\n  subst_bv2 (decr 0 s) i u\n\ngoal (3 subgoals):\n 1. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (s $ u) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (t $ u) i ua\n 2. \\<And>s t u ua i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (u $ s) i ua \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (u $ t) i ua\n 3. \\<And>s t T u i.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t;\n        \\<And>u i.\n           subst_bv2 s i u \\<rightarrow>\\<^sub>\\<eta>\n           subst_bv2 t i u\\<rbrakk>\n       \\<Longrightarrow> subst_bv2 (Abs T s) i u \\<rightarrow>\\<^sub>\\<eta>\n                         subst_bv2 (Abs T t) i u", "qed auto"], ["", "theorem lift_subst_bv2_dummy: \"\\<not> loose_bvar s i \\<Longrightarrow> lift (decr i s) i = s\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> loose_bvar s i \\<Longrightarrow> lift (decr i s) i = s", "by (induct s arbitrary: i) simp_all"], ["", "lemma decr_is_closed[simp]: \"is_closed t \\<Longrightarrow> decr lev t = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_closed t \\<Longrightarrow> decr lev t = t", "by (metis is_open_def lift_subst_bv2_dummy lift_def loose_bvar_Suc loose_bvar_incr_bvar no_loose_bvar_no_incr zero_induct)"], ["", "lemma eta_reducible_imp_eta_step: \"eta_reducible t \\<Longrightarrow> \\<exists>t'. t \\<rightarrow>\\<^sub>\\<eta> t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eta_reducible t \\<Longrightarrow>\n    \\<exists>t'. t \\<rightarrow>\\<^sub>\\<eta> t'", "by (induction t rule: eta_reducible.induct) auto"], ["", "lemma eta_step_imp_eta_reducible: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> eta_reducible t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> eta_reducible t", "proof (induction t t' rule: eta.induct)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>s T.\n       \\<not> is_dependent s \\<Longrightarrow>\n       eta_reducible (Abs T (s $ Bv 0))\n 2. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (s $ u)\n 3. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (u $ s)\n 4. \\<And>s t T.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (Abs T s)", "case (abs s t T)"], ["proof (state)\nthis:\n  s \\<rightarrow>\\<^sub>\\<eta> t\n  eta_reducible s\n\ngoal (4 subgoals):\n 1. \\<And>s T.\n       \\<not> is_dependent s \\<Longrightarrow>\n       eta_reducible (Abs T (s $ Bv 0))\n 2. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (s $ u)\n 3. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (u $ s)\n 4. \\<And>s t T.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (Abs T s)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eta_reducible (Abs T s)", "proof(cases s)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x11 x12. s = Ct x11 x12 \\<Longrightarrow> eta_reducible (Abs T s)\n 2. \\<And>x21 x22. s = Fv x21 x22 \\<Longrightarrow> eta_reducible (Abs T s)\n 3. \\<And>x3. s = Bv x3 \\<Longrightarrow> eta_reducible (Abs T s)\n 4. \\<And>x41 x42. s = Abs x41 x42 \\<Longrightarrow> eta_reducible (Abs T s)\n 5. \\<And>x51 x52. s = x51 $ x52 \\<Longrightarrow> eta_reducible (Abs T s)", "case (App u v)"], ["proof (state)\nthis:\n  s = u $ v\n\ngoal (5 subgoals):\n 1. \\<And>x11 x12. s = Ct x11 x12 \\<Longrightarrow> eta_reducible (Abs T s)\n 2. \\<And>x21 x22. s = Fv x21 x22 \\<Longrightarrow> eta_reducible (Abs T s)\n 3. \\<And>x3. s = Bv x3 \\<Longrightarrow> eta_reducible (Abs T s)\n 4. \\<And>x41 x42. s = Abs x41 x42 \\<Longrightarrow> eta_reducible (Abs T s)\n 5. \\<And>x51 x52. s = x51 $ x52 \\<Longrightarrow> eta_reducible (Abs T s)", "then"], ["proof (chain)\npicking this:\n  s = u $ v", "show ?thesis"], ["proof (prove)\nusing this:\n  s = u $ v\n\ngoal (1 subgoal):\n 1. eta_reducible (Abs T s)", "by (cases v; use abs eta_reducible_Abs in metis)"], ["proof (state)\nthis:\n  eta_reducible (Abs T s)\n\ngoal (4 subgoals):\n 1. \\<And>x11 x12. s = Ct x11 x12 \\<Longrightarrow> eta_reducible (Abs T s)\n 2. \\<And>x21 x22. s = Fv x21 x22 \\<Longrightarrow> eta_reducible (Abs T s)\n 3. \\<And>x3. s = Bv x3 \\<Longrightarrow> eta_reducible (Abs T s)\n 4. \\<And>x41 x42. s = Abs x41 x42 \\<Longrightarrow> eta_reducible (Abs T s)", "qed (use abs in auto)"], ["proof (state)\nthis:\n  eta_reducible (Abs T s)\n\ngoal (3 subgoals):\n 1. \\<And>s T.\n       \\<not> is_dependent s \\<Longrightarrow>\n       eta_reducible (Abs T (s $ Bv 0))\n 2. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (s $ u)\n 3. \\<And>s t u.\n       \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta> t; eta_reducible s\\<rbrakk>\n       \\<Longrightarrow> eta_reducible (u $ s)", "qed auto"], ["", "lemma eta_reds_appR: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> u $ s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* u $ t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow>\n    u $ s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* u $ t", "by (induction s t rule: rtranclp.induct) (auto simp add: rtranclp.rtrancl_into_rtrancl)"], ["", "lemma eta_reds_appL: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> s $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t $ u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow>\n    s $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t $ u", "by (induction s t rule: rtranclp.induct) (auto simp add: rtranclp.rtrancl_into_rtrancl)"], ["", "lemma eta_reds_abs: \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow> Abs T s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* Abs T t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t \\<Longrightarrow>\n    Abs T s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* Abs T t", "by (induction s t rule: rtranclp.induct) (auto simp add: rtranclp.rtrancl_into_rtrancl)"], ["", "lemma eta_norm_imp_eta_reds: assumes \"eta_norm t = t'\" shows \"t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "using assms"], ["proof (prove)\nusing this:\n  eta_norm t = t'\n\ngoal (1 subgoal):\n 1. t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "proof (induction t arbitrary: t' rule: eta_norm.induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>T t t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm t = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T t) = t'\\<rbrakk>\n       \\<Longrightarrow> Abs T t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 5. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "case (1 T body)"], ["proof (state)\nthis:\n  eta_norm body = ?t' \\<Longrightarrow>\n  body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  \\<lbrakk>eta_norm body = ?x51.0 $ ?x52.0; ?x52.0 = Bv ?x3.0; ?x3.0 = 0;\n   \\<not> is_dependent ?x51.0; eta_norm ?x51.0 = ?t'\\<rbrakk>\n  \\<Longrightarrow> ?x51.0 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (Abs T body) = t'\n\ngoal (5 subgoals):\n 1. \\<And>T t t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm t = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T t) = t'\\<rbrakk>\n       \\<Longrightarrow> Abs T t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 5. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "then"], ["proof (chain)\npicking this:\n  eta_norm body = ?t' \\<Longrightarrow>\n  body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  \\<lbrakk>eta_norm body = ?x51.0 $ ?x52.0; ?x52.0 = Bv ?x3.0; ?x3.0 = 0;\n   \\<not> is_dependent ?x51.0; eta_norm ?x51.0 = ?t'\\<rbrakk>\n  \\<Longrightarrow> ?x51.0 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (Abs T body) = t'", "show ?case"], ["proof (prove)\nusing this:\n  eta_norm body = ?t' \\<Longrightarrow>\n  body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  \\<lbrakk>eta_norm body = ?x51.0 $ ?x52.0; ?x52.0 = Bv ?x3.0; ?x3.0 = 0;\n   \\<not> is_dependent ?x51.0; eta_norm ?x51.0 = ?t'\\<rbrakk>\n  \\<Longrightarrow> ?x51.0 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (Abs T body) = t'\n\ngoal (1 subgoal):\n 1. Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "proof (cases \"eta_norm body\")"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "case (App f u)"], ["proof (state)\nthis:\n  eta_norm body = f $ u\n\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "then"], ["proof (chain)\npicking this:\n  eta_norm body = f $ u", "show ?thesis"], ["proof (prove)\nusing this:\n  eta_norm body = f $ u\n\ngoal (1 subgoal):\n 1. Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "using 1"], ["proof (prove)\nusing this:\n  eta_norm body = f $ u\n  eta_norm body = ?t' \\<Longrightarrow>\n  body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  \\<lbrakk>eta_norm body = ?x51.0 $ ?x52.0; ?x52.0 = Bv ?x3.0; ?x3.0 = 0;\n   \\<not> is_dependent ?x51.0; eta_norm ?x51.0 = ?t'\\<rbrakk>\n  \\<Longrightarrow> ?x51.0 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (Abs T body) = t'\n\ngoal (1 subgoal):\n 1. Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "apply (clarsimp simp add: is_dependent_def eta_reds_abs split: term.splits nat.splits if_splits)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>eta_norm body = f $ Bv 0;\n     body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* f $ Bv 0;\n     \\<And>x52 x3 t'.\n        \\<lbrakk>x52 = Bv 0; x3 = 0; eta_norm f = t'\\<rbrakk>\n        \\<Longrightarrow> f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n     u = Bv 0; \\<not> loose_bvar1 f 0; t' = decr 0 (eta_norm f)\\<rbrakk>\n    \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>*\n                      decr 0 (eta_norm f)", "by (metis eta.eta eta_reds_abs eta_reducible.simps(11) is_dependent_def \n          not_eta_reducible_eta_norm not_eta_reducible_imp_eta_norm_no_change rtranclp.simps)"], ["proof (state)\nthis:\n  Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n\ngoal (4 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm body = t' \\<Longrightarrow>\n                   body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>x51 x52 x3 t'.\n           \\<lbrakk>eta_norm body = x51 $ x52; x52 = Bv x3; x3 = 0;\n            \\<not> is_dependent x51; eta_norm x51 = t'\\<rbrakk>\n           \\<Longrightarrow> x51 \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (Abs T body) = t'; eta_norm body = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "qed (auto simp add: is_dependent_def eta_reds_abs split: term.splits nat.splits if_splits)"], ["proof (state)\nthis:\n  Abs T body \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n\ngoal (4 subgoals):\n 1. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "case (2 f u)"], ["proof (state)\nthis:\n  eta_norm f = ?t' \\<Longrightarrow>\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm u = ?t' \\<Longrightarrow>\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (f $ u) = t'\n\ngoal (4 subgoals):\n 1. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "hence \"f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f\" \"u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u\""], ["proof (prove)\nusing this:\n  eta_norm f = ?t' \\<Longrightarrow>\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm u = ?t' \\<Longrightarrow>\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (f $ u) = t'\n\ngoal (1 subgoal):\n 1. f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f &&&\n    u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u", "by simp_all"], ["proof (state)\nthis:\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u\n\ngoal (4 subgoals):\n 1. \\<And>t u t'.\n       \\<lbrakk>\\<And>t'.\n                   eta_norm t = t' \\<Longrightarrow>\n                   t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        \\<And>t'.\n           eta_norm u = t' \\<Longrightarrow>\n           u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t';\n        eta_norm (t $ u) = t'\\<rbrakk>\n       \\<Longrightarrow> t $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 4. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "then"], ["proof (chain)\npicking this:\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u", "show ?case"], ["proof (prove)\nusing this:\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u\n\ngoal (1 subgoal):\n 1. f $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "using 2"], ["proof (prove)\nusing this:\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm f\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* eta_norm u\n  eta_norm f = ?t' \\<Longrightarrow>\n  f \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm u = ?t' \\<Longrightarrow>\n  u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?t'\n  eta_norm (f $ u) = t'\n\ngoal (1 subgoal):\n 1. f $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "by (metis eta_norm.simps(2) eta_reds_appL eta_reds_appR rtranclp_trans)"], ["proof (state)\nthis:\n  f $ u \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n\ngoal (3 subgoals):\n 1. \\<And>v va t'.\n       eta_norm (Ct v va) = t' \\<Longrightarrow>\n       Ct v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 2. \\<And>v va t'.\n       eta_norm (Fv v va) = t' \\<Longrightarrow>\n       Fv v va \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\n 3. \\<And>v t'.\n       eta_norm (Bv v) = t' \\<Longrightarrow>\n       Bv v \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'", "qed auto"], ["", "lemma rtrancl_eta_App:\n    \"s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s' \\<Longrightarrow> t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t' \\<Longrightarrow> s $ t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s' $ t'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>s \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s';\n     t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* t'\\<rbrakk>\n    \\<Longrightarrow> s $ t \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s' $ t'", "by (blast intro!: eta_reds_appR eta_reds_appL intro: rtranclp_trans)"], ["", "lemma eta_preserves_typ_of1: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> typ_of1 Ts t = Some \\<tau> \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "proof (induction Ts t arbitrary: \\<tau> t' rule: typ_of1.induct)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>uu_ uv_ T \\<tau> t'.\n       \\<lbrakk>Ct uv_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uu_ (Ct uv_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uu_ t' = Some \\<tau>\n 2. \\<And>Ts i \\<tau> t'.\n       \\<lbrakk>Bv i \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Bv i) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 4. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (1 uu uv T)"], ["proof (state)\nthis:\n  Ct uv T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uu (Ct uv T) = Some \\<tau>\n\ngoal (5 subgoals):\n 1. \\<And>uu_ uv_ T \\<tau> t'.\n       \\<lbrakk>Ct uv_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uu_ (Ct uv_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uu_ t' = Some \\<tau>\n 2. \\<And>Ts i \\<tau> t'.\n       \\<lbrakk>Bv i \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Bv i) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 4. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  Ct uv T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uu (Ct uv T) = Some \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  Ct uv T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uu (Ct uv T) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 uu t' = Some \\<tau>", "using eta_step_imp_eta_reducible"], ["proof (prove)\nusing this:\n  Ct uv T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uu (Ct uv T) = Some \\<tau>\n  ?t \\<rightarrow>\\<^sub>\\<eta> ?t' \\<Longrightarrow> eta_reducible ?t\n\ngoal (1 subgoal):\n 1. typ_of1 uu t' = Some \\<tau>", "by fastforce"], ["proof (state)\nthis:\n  typ_of1 uu t' = Some \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>Ts i \\<tau> t'.\n       \\<lbrakk>Bv i \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Bv i) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 3. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>Ts i \\<tau> t'.\n       \\<lbrakk>Bv i \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Bv i) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 3. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (2 Ts i)"], ["proof (state)\nthis:\n  Bv i \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Bv i) = Some \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>Ts i \\<tau> t'.\n       \\<lbrakk>Bv i \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Bv i) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 3. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  Bv i \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Bv i) = Some \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  Bv i \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Bv i) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using eta_step_imp_eta_reducible"], ["proof (prove)\nusing this:\n  Bv i \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Bv i) = Some \\<tau>\n  ?t \\<rightarrow>\\<^sub>\\<eta> ?t' \\<Longrightarrow> eta_reducible ?t\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by fastforce"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 2. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 2. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (3 uw ux T)"], ["proof (state)\nthis:\n  Fv ux T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uw (Fv ux T) = Some \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>uw_ ux_ T \\<tau> t'.\n       \\<lbrakk>Fv ux_ T \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 uw_ (Fv ux_ T) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 uw_ t' = Some \\<tau>\n 2. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  Fv ux T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uw (Fv ux T) = Some \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  Fv ux T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uw (Fv ux T) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 uw t' = Some \\<tau>", "using eta_step_imp_eta_reducible"], ["proof (prove)\nusing this:\n  Fv ux T \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 uw (Fv ux T) = Some \\<tau>\n  ?t \\<rightarrow>\\<^sub>\\<eta> ?t' \\<Longrightarrow> eta_reducible ?t\n\ngoal (1 subgoal):\n 1. typ_of1 uw t' = Some \\<tau>", "by fastforce"], ["proof (state)\nthis:\n  typ_of1 uw t' = Some \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (4 Ts T body)"], ["proof (state)\nthis:\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>Ts T body \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "proof(cases body)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Abs B b)"], ["proof (state)\nthis:\n  body = Abs B b\n\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  body = Abs B b", "show ?thesis"], ["proof (prove)\nusing this:\n  body = Abs B b\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4"], ["proof (prove)\nusing this:\n  body = Abs B b\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis eta_cases(1) term.distinct(19) typ_of1.simps(4) typ_of_Abs_body_typ')"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (App u v)"], ["proof (state)\nthis:\n  body = u $ v\n\ngoal (4 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "note oApp = App"], ["proof (state)\nthis:\n  body = u $ v\n\ngoal (4 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  body = u $ v", "show ?thesis"], ["proof (prove)\nusing this:\n  body = u $ v\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "proof(cases \"is_dependent u\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>body = u $ v; is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<lbrakk>body = u $ v; \\<not> is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case True"], ["proof (state)\nthis:\n  is_dependent u\n\ngoal (2 subgoals):\n 1. \\<lbrakk>body = u $ v; is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<lbrakk>body = u $ v; \\<not> is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  is_dependent u", "show ?thesis"], ["proof (prove)\nusing this:\n  is_dependent u\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis \"4.IH\" \"4.prems\"(1) \"4.prems\"(2) App eta_cases(1) term.inject(5) \n            typ_of1.simps(4) typ_of_Abs_body_typ')"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>body = u $ v; \\<not> is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>body = u $ v; \\<not> is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case False"], ["proof (state)\nthis:\n  \\<not> is_dependent u\n\ngoal (1 subgoal):\n 1. \\<lbrakk>body = u $ v; \\<not> is_dependent u\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  \\<not> is_dependent u", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> is_dependent u\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "proof(cases v)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<not> is_dependent u; v = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<not> is_dependent u; v = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Ct n T)"], ["proof (state)\nthis:\n  v = Ct n T\n\ngoal (5 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<not> is_dependent u; v = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<not> is_dependent u; v = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 5. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  v = Ct n T", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Ct n T\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4 oApp False typ_of_Abs_body_typ'"], ["proof (prove)\nusing this:\n  v = Ct n T\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T__ # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T__ # Ts) ?t' = Some ?\\<tau>\n  Abs T__ body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T__ body) = Some \\<tau>\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis eta_cases(1) term.distinct(3) term.inject(5) typ_of1.simps(4))"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (4 subgoals):\n 1. \\<And>x21 x22.\n       \\<lbrakk>\\<not> is_dependent u; v = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>x21 x22.\n       \\<lbrakk>\\<not> is_dependent u; v = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Fv n T)"], ["proof (state)\nthis:\n  v = Fv n T\n\ngoal (4 subgoals):\n 1. \\<And>x21 x22.\n       \\<lbrakk>\\<not> is_dependent u; v = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  v = Fv n T", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Fv n T\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4 oApp False typ_of_Abs_body_typ'"], ["proof (prove)\nusing this:\n  v = Fv n T\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T__ # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T__ # Ts) ?t' = Some ?\\<tau>\n  Abs T__ body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T__ body) = Some \\<tau>\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis eta_cases(1) term.distinct(9) term.inject(5) typ_of1.simps(4))"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Bv n)"], ["proof (state)\nthis:\n  v = Bv n\n\ngoal (3 subgoals):\n 1. \\<And>x3.\n       \\<lbrakk>\\<not> is_dependent u; v = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  v = Bv n", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Bv n\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "proof(cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Bv n; n = 0\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Bv n; n = 0\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "thm 4"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>v = Bv n; n = 0\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "proof(cases rule: eta_cases(1)[OF \"4.prems\"(1)])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (1 s)"], ["proof (state)\nthis:\n  body = s $ Bv 0\n  t' = decr 0 s\n  \\<not> is_dependent s\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "thm \"4\"(3)"], ["proof (state)\nthis:\n  body = s $ Bv 0\n  t' = decr 0 s\n  \\<not> is_dependent s\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "obtain rty where \"typ_of1 (T#Ts) (s $ Bv 0) = Some (rty)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>rty.\n        typ_of1 (T # Ts) (s $ Bv 0) = Some rty \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using typ_of_Abs_body_typ'[OF \"4\"(3)] \"1\"(3) \"1\"(1)"], ["proof (prove)\nusing this:\n  \\<exists>rty.\n     \\<tau> = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) body = Some rty\n  \\<not> is_dependent s\n  body = s $ Bv 0\n\ngoal (1 subgoal):\n 1. (\\<And>rty.\n        typ_of1 (T # Ts) (s $ Bv 0) = Some rty \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  typ_of1 (T # Ts) (s $ Bv 0) = Some rty\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "moreover"], ["proof (state)\nthis:\n  typ_of1 (T # Ts) (s $ Bv 0) = Some rty\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "have \"\\<tau> = T \\<rightarrow> rty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau> = T \\<rightarrow> rty", "by (metis \"1\"(1) \"4.prems\"(2) calculation option.inject typ_of_Abs_body_typ')"], ["proof (state)\nthis:\n  \\<tau> = T \\<rightarrow> rty\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "ultimately"], ["proof (chain)\npicking this:\n  typ_of1 (T # Ts) (s $ Bv 0) = Some rty\n  \\<tau> = T \\<rightarrow> rty", "have \"typ_of1 (T#Ts) s = Some \\<tau>\""], ["proof (prove)\nusing this:\n  typ_of1 (T # Ts) (s $ Bv 0) = Some rty\n  \\<tau> = T \\<rightarrow> rty\n\ngoal (1 subgoal):\n 1. typ_of1 (T # Ts) s = Some \\<tau>", "using typ_of1_arg_typ"], ["proof (prove)\nusing this:\n  typ_of1 (T # Ts) (s $ Bv 0) = Some rty\n  \\<tau> = T \\<rightarrow> rty\n  \\<lbrakk>typ_of1 ?Ts (?t $ ?u) = Some ?R;\n   typ_of1 ?Ts ?u = Some ?U\\<rbrakk>\n  \\<Longrightarrow> typ_of1 ?Ts ?t = Some (?U \\<rightarrow> ?R)\n\ngoal (1 subgoal):\n 1. typ_of1 (T # Ts) s = Some \\<tau>", "by (metis length_Cons nth_Cons_0 typ_of1.simps(2) zero_less_Suc)"], ["proof (state)\nthis:\n  typ_of1 (T # Ts) s = Some \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "hence \"typ_of1 Ts (decr 0 s) = Some \\<tau>\""], ["proof (prove)\nusing this:\n  typ_of1 (T # Ts) s = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts (decr 0 s) = Some \\<tau>", "by (metis \"1\"(3) append_Cons append_Nil is_dependent_def list.size(3) typ_of1_decr)"], ["proof (state)\nthis:\n  typ_of1 Ts (decr 0 s) = Some \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  typ_of1 Ts (decr 0 s) = Some \\<tau>", "show ?thesis"], ["proof (prove)\nusing this:\n  typ_of1 Ts (decr 0 s) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 1 oApp False typ_of_Abs_body_typ' Bv 0"], ["proof (prove)\nusing this:\n  typ_of1 Ts (decr 0 s) = Some \\<tau>\n  body = s $ Bv 0\n  t' = decr 0 s\n  \\<not> is_dependent s\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n  v = Bv n\n  n = 0\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by auto"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (2 t)"], ["proof (state)\nthis:\n  t' = Abs T t\n  body \\<rightarrow>\\<^sub>\\<eta> t\n\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  t' = Abs T t\n  body \\<rightarrow>\\<^sub>\\<eta> t", "show ?thesis"], ["proof (prove)\nusing this:\n  t' = Abs T t\n  body \\<rightarrow>\\<^sub>\\<eta> t\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using oApp False typ_of_Abs_body_typ' Bv 0"], ["proof (prove)\nusing this:\n  t' = Abs T t\n  body \\<rightarrow>\\<^sub>\\<eta> t\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n  v = Bv n\n  n = 0\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis \"4.IH\" \"4.prems\"(2) typ_of1.simps(4))"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Suc nat)"], ["proof (state)\nthis:\n  n = Suc nat\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       \\<lbrakk>v = Bv n; n = Suc nat\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  n = Suc nat", "show ?thesis"], ["proof (prove)\nusing this:\n  n = Suc nat\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4 oApp False typ_of_Abs_body_typ' Bv"], ["proof (prove)\nusing this:\n  n = Suc nat\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n  v = Bv n\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n = Suc nat;\n     \\<And>t' \\<tau>.\n        \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n         typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n        \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n     Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n     \\<not> is_dependent u;\n     \\<And>Ts T t ty.\n        typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n        \\<exists>rty.\n           ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n     v = Bv n\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "apply (rule eta_cases(1)[of T body t'])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>n = Suc nat;\n     \\<And>t' \\<tau>.\n        \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n         typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n        \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n     Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n     \\<not> is_dependent u;\n     \\<And>Ts T t ty.\n        typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n        \\<exists>rty.\n           ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n     v = Bv n\\<rbrakk>\n    \\<Longrightarrow> Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n 2. \\<And>s.\n       \\<lbrakk>n = Suc nat;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        v = Bv n; body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>t.\n       \\<lbrakk>n = Suc nat;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        v = Bv n; t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s.\n       \\<lbrakk>n = Suc nat;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        v = Bv n; body = s $ Bv 0; t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>t.\n       \\<lbrakk>n = Suc nat;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        v = Bv n; t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>t.\n       \\<lbrakk>n = Suc nat;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        v = Bv n; t' = Abs T t; body \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "apply (metis \"4.IH\" \"4.prems\"(2) typ_of1.simps(4))"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (2 subgoals):\n 1. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (Abs T t)"], ["proof (state)\nthis:\n  v = Abs T t\n\ngoal (2 subgoals):\n 1. \\<And>x41 x42.\n       \\<lbrakk>\\<not> is_dependent u; v = Abs x41 x42\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  v = Abs T t", "show ?thesis"], ["proof (prove)\nusing this:\n  v = Abs T t\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4 oApp False typ_of_Abs_body_typ'"], ["proof (prove)\nusing this:\n  v = Abs T t\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T__ # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T__ # Ts) ?t' = Some ?\\<tau>\n  Abs T__ body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T__ body) = Some \\<tau>\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "(* Help metis a bit *)"], ["proof (prove)\nusing this:\n  v = Abs T t\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T__ # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T__ # Ts) ?t' = Some ?\\<tau>\n  Abs T__ body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T__ body) = Some \\<tau>\n  body = u $ v\n  \\<not> is_dependent u\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>v = Abs T t;\n     \\<And>t' \\<tau>.\n        \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n         typ_of1 (T__ # Ts) body = Some \\<tau>\\<rbrakk>\n        \\<Longrightarrow> typ_of1 (T__ # Ts) t' = Some \\<tau>;\n     Abs T__ body \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of1 Ts (Abs T__ body) = Some \\<tau>; body = u $ v;\n     \\<not> is_dependent u;\n     \\<And>Ts T t ty.\n        typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n        \\<exists>rty.\n           ty = T \\<rightarrow> rty \\<and>\n           typ_of1 (T # Ts) t = Some rty\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "apply (erule eta.cases(1))"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>s Tb.\n       \\<lbrakk>v = Abs T t;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T__ # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T__ # Ts) t' = Some \\<tau>;\n        typ_of1 Ts (Abs T__ body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        Abs T__ body = Abs Tb (s $ Bv 0); t' = decr 0 s;\n        \\<not> is_dependent s\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>s t ua.\n       \\<lbrakk>v = Abs T t;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T__ # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T__ # Ts) t' = Some \\<tau>;\n        typ_of1 Ts (Abs T__ body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        Abs T__ body = s $ ua; t' = t $ ua;\n        s \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>s t ua.\n       \\<lbrakk>v = Abs T t;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T__ # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T__ # Ts) t' = Some \\<tau>;\n        typ_of1 Ts (Abs T__ body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        Abs T__ body = ua $ s; t' = ua $ t;\n        s \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 4. \\<And>s t Tb.\n       \\<lbrakk>v = Abs T t;\n        \\<And>t' \\<tau>.\n           \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 (T__ # Ts) body = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 (T__ # Ts) t' = Some \\<tau>;\n        typ_of1 Ts (Abs T__ body) = Some \\<tau>; body = u $ v;\n        \\<not> is_dependent u;\n        \\<And>Ts T t ty.\n           typ_of1 Ts (Abs T t) = Some ty \\<Longrightarrow>\n           \\<exists>rty.\n              ty = T \\<rightarrow> rty \\<and> typ_of1 (T # Ts) t = Some rty;\n        Abs T__ body = Abs Tb s; t' = Abs Tb t;\n        s \\<rightarrow>\\<^sub>\\<eta> t\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "by (metis term.distinct(15) term.distinct(19) term.inject(4) term.inject(5)\n              typ_of1.simps(4))+"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (App f u)"], ["proof (state)\nthis:\n  v = f $ u\n\ngoal (1 subgoal):\n 1. \\<And>x51 x52.\n       \\<lbrakk>\\<not> is_dependent u__; v = x51 $ x52\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  v = f $ u", "show ?thesis"], ["proof (prove)\nusing this:\n  v = f $ u\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "using 4 oApp False typ_of_Abs_body_typ'"], ["proof (prove)\nusing this:\n  v = f $ u\n  \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 (T # Ts) body = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 (T # Ts) ?t' = Some ?\\<tau>\n  Abs T body \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (Abs T body) = Some \\<tau>\n  body = u__ $ v\n  \\<not> is_dependent u__\n  typ_of1 ?Ts (Abs ?T ?t) = Some ?ty \\<Longrightarrow>\n  \\<exists>rty.\n     ?ty = ?T \\<rightarrow> rty \\<and> typ_of1 (?T # ?Ts) ?t = Some rty\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (metis eta_cases(1) term.distinct(17) term.inject(5) typ_of1.simps(4))"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (3 subgoals):\n 1. \\<And>x11 x12.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Ct x11 x12\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 2. \\<And>x21 x22.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Fv x21 x22\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>\n 3. \\<And>x3.\n       \\<lbrakk>\\<And>t' \\<tau>.\n                   \\<lbrakk>body \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 (T # Ts) body = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 (T # Ts) t' = Some \\<tau>;\n        Abs T body \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (Abs T body) = Some \\<tau>; body = Bv x3\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "qed (use 4 in auto)"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "case (5 Ts f u)"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts u = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  \\<lbrakk>typ_of1 Ts u = Some ?a; f \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts f = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  f $ u \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (f $ u) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. \\<And>Ts t u \\<tau> t'.\n       \\<lbrakk>\\<And>\\<tau> t'.\n                   \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> t';\n                    typ_of1 Ts u = Some \\<tau>\\<rbrakk>\n                   \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        \\<And>a \\<tau> t'.\n           \\<lbrakk>typ_of1 Ts u = Some a; t \\<rightarrow>\\<^sub>\\<eta> t';\n            typ_of1 Ts t = Some \\<tau>\\<rbrakk>\n           \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>;\n        t $ u \\<rightarrow>\\<^sub>\\<eta> t';\n        typ_of1 Ts (t $ u) = Some \\<tau>\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts t' = Some \\<tau>", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts u = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  \\<lbrakk>typ_of1 Ts u = Some ?a; f \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts f = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  f $ u \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (f $ u) = Some \\<tau>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>u \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts u = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  \\<lbrakk>typ_of1 Ts u = Some ?a; f \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 Ts f = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 Ts ?t' = Some ?\\<tau>\n  f $ u \\<rightarrow>\\<^sub>\\<eta> t'\n  typ_of1 Ts (f $ u) = Some \\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts t' = Some \\<tau>", "by (smt bind.bind_lunit eta_cases(2) typ_of1.simps(5) typ_of1_split_App_obtains)"], ["proof (state)\nthis:\n  typ_of1 Ts t' = Some \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eta_preserves_typ_of: \"t \\<rightarrow>\\<^sub>\\<eta> t' \\<Longrightarrow> typ_of t = Some \\<tau> \\<Longrightarrow> typ_of t' = Some \\<tau>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of t = Some \\<tau>\\<rbrakk>\n    \\<Longrightarrow> typ_of t' = Some \\<tau>", "using eta_preserves_typ_of1 typ_of_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?t \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 ?Ts ?t = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 ?Ts ?t' = Some ?\\<tau>\n  typ_of ?t \\<equiv> typ_of1 [] ?t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>t \\<rightarrow>\\<^sub>\\<eta> t';\n     typ_of t = Some \\<tau>\\<rbrakk>\n    \\<Longrightarrow> typ_of t' = Some \\<tau>", "by simp"], ["", "lemma eta_star_preserves_typ_of1: \"r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s \\<Longrightarrow> typ_of1 Ts r = Some T  \\<Longrightarrow> typ_of1 Ts s = Some T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s;\n     typ_of1 Ts r = Some T\\<rbrakk>\n    \\<Longrightarrow> typ_of1 Ts s = Some T", "proof (induction rule: rtranclp.induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts a = Some T\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b;\n        typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T;\n        b \\<rightarrow>\\<^sub>\\<eta> c; typ_of1 Ts a = Some T\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts c = Some T", "case (rtrancl_refl a)"], ["proof (state)\nthis:\n  typ_of1 Ts a = Some T\n\ngoal (2 subgoals):\n 1. \\<And>a. typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts a = Some T\n 2. \\<And>a b c.\n       \\<lbrakk>a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b;\n        typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T;\n        b \\<rightarrow>\\<^sub>\\<eta> c; typ_of1 Ts a = Some T\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts c = Some T", "then"], ["proof (chain)\npicking this:\n  typ_of1 Ts a = Some T", "show ?case"], ["proof (prove)\nusing this:\n  typ_of1 Ts a = Some T\n\ngoal (1 subgoal):\n 1. typ_of1 Ts a = Some T", "by simp"], ["proof (state)\nthis:\n  typ_of1 Ts a = Some T\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b;\n        typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T;\n        b \\<rightarrow>\\<^sub>\\<eta> c; typ_of1 Ts a = Some T\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts c = Some T", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b;\n        typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T;\n        b \\<rightarrow>\\<^sub>\\<eta> c; typ_of1 Ts a = Some T\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts c = Some T", "case (rtrancl_into_rtrancl a b c)"], ["proof (state)\nthis:\n  a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b\n  b \\<rightarrow>\\<^sub>\\<eta> c\n  typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T\n  typ_of1 Ts a = Some T\n\ngoal (1 subgoal):\n 1. \\<And>a b c.\n       \\<lbrakk>a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b;\n        typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T;\n        b \\<rightarrow>\\<^sub>\\<eta> c; typ_of1 Ts a = Some T\\<rbrakk>\n       \\<Longrightarrow> typ_of1 Ts c = Some T", "then"], ["proof (chain)\npicking this:\n  a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b\n  b \\<rightarrow>\\<^sub>\\<eta> c\n  typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T\n  typ_of1 Ts a = Some T", "show ?case"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b\n  b \\<rightarrow>\\<^sub>\\<eta> c\n  typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T\n  typ_of1 Ts a = Some T\n\ngoal (1 subgoal):\n 1. typ_of1 Ts c = Some T", "using eta_preserves_typ_of1"], ["proof (prove)\nusing this:\n  a \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* b\n  b \\<rightarrow>\\<^sub>\\<eta> c\n  typ_of1 Ts a = Some T \\<Longrightarrow> typ_of1 Ts b = Some T\n  typ_of1 Ts a = Some T\n  \\<lbrakk>?t \\<rightarrow>\\<^sub>\\<eta> ?t';\n   typ_of1 ?Ts ?t = Some ?\\<tau>\\<rbrakk>\n  \\<Longrightarrow> typ_of1 ?Ts ?t' = Some ?\\<tau>\n\ngoal (1 subgoal):\n 1. typ_of1 Ts c = Some T", "by blast"], ["proof (state)\nthis:\n  typ_of1 Ts c = Some T\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eta_star_preserves_typ_of: \"r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s \\<Longrightarrow> typ_of r = Some T  \\<Longrightarrow> typ_of s = Some T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s;\n     typ_of r = Some T\\<rbrakk>\n    \\<Longrightarrow> typ_of s = Some T", "using eta_star_preserves_typ_of1 typ_of_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* ?s;\n   typ_of1 ?Ts ?r = Some ?T\\<rbrakk>\n  \\<Longrightarrow> typ_of1 ?Ts ?s = Some ?T\n  typ_of ?t \\<equiv> typ_of1 [] ?t\n\ngoal (1 subgoal):\n 1. \\<lbrakk>r \\<rightarrow>\\<^sub>\\<eta>\\<^sup>* s;\n     typ_of r = Some T\\<rbrakk>\n    \\<Longrightarrow> typ_of s = Some T", "by simp"], ["", "lemma subst_bvs1'_decr: \"\\<forall>x\\<in>set us. is_closed x  \\<Longrightarrow> \\<not> loose_bvar1 t k \n  \\<Longrightarrow> subst_bvs1' (decr k t) k us = decr k (subst_bvs1' t (Suc k) us)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>set us. is_closed x;\n     \\<not> loose_bvar1 t k\\<rbrakk>\n    \\<Longrightarrow> subst_bvs1' (decr k t) k us =\n                      decr k (subst_bvs1' t (Suc k) us)", "by (induction k t arbitrary: us rule: decr.induct) (auto simp add: is_open_def)"], ["", "lemma subst_bvs_decr: \"\\<forall>x\\<in>set us. is_closed x  \\<Longrightarrow> \\<not> is_dependent t\n  \\<Longrightarrow> subst_bvs us (decr 0 t) = decr 0 (subst_bvs1' t 1 us)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>x\\<in>set us. is_closed x;\n     \\<not> is_dependent t\\<rbrakk>\n    \\<Longrightarrow> subst_bvs us (decr 0 t) = decr 0 (subst_bvs1' t 1 us)", "by (simp add: is_dependent_def subst_bvs1'_decr subst_bvs_subst_bvs1')"], ["", "end"]]}