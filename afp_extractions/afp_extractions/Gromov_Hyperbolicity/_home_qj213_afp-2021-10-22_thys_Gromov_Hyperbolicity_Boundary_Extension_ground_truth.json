{"file_name": "/home/qj213/afp-2021-10-22/thys/Gromov_Hyperbolicity/Boundary_Extension.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Gromov_Hyperbolicity", "problem_names": ["lemma Gromov_product_at_quasi_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n  shows \"Gromov_product_at (f x) (f y) (f z) \\<ge> Gromov_product_at x y z / lambda - 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\"\n        \"Gromov_product_at (f x) (f y) (f z) \\<le> lambda * Gromov_product_at x y z + 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\"", "lemma Gromov_converging_at_infinity_quasi_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n  shows \"Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<longleftrightarrow> Gromov_converging_at_boundary u\"", "lemma Gromov_extension_inside_space [simp]:\n  \"Gromov_extension f (to_Gromov_completion x) = to_Gromov_completion (f x)\"", "lemma Gromov_extension_id [simp]:\n  \"Gromov_extension (id::'a::Gromov_hyperbolic_space \\<Rightarrow> 'a) = id\"\n  \"Gromov_extension (\\<lambda>x::'a. x) = (\\<lambda>x. x)\"", "lemma Gromov_extension_quasi_isometry_boundary_to_boundary:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"x \\<in> Gromov_boundary\"\n  shows \"(Gromov_extension f) x \\<in> Gromov_boundary\"", "lemma Gromov_extension_continuous_inside:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"continuous (at x within S) f\"\n  shows \"continuous (at (to_Gromov_completion x) within (to_Gromov_completion`S)) (Gromov_extension f)\"", "lemma Gromov_extension_composition:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n    and g::\"'b::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'c::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"mu D-quasi_isometry g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\"", "lemma Gromov_extension_homeomorphism:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"homeomorphism_on X f\"\n  shows \"homeomorphism_on (to_Gromov_completion`X \\<union> Gromov_boundary) (Gromov_extension f)\"", "lemma Gromov_extension_onto:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n          \"y \\<in> Gromov_boundary\"\n  shows \"\\<exists>x \\<in> Gromov_boundary. Gromov_extension f x = y\"", "lemma Gromov_extension_onto':\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n  shows \"(Gromov_extension f)`Gromov_boundary = Gromov_boundary\"", "theorem Gromov_boundaries_homeomorphic:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n  shows \"(Gromov_boundary::'a Gromov_completion set) homeomorphic (Gromov_boundary::'b Gromov_completion set)\"", "lemma Gromov_product_isometry:\n  assumes \"isometry_on UNIV f\"\n  shows \"Gromov_product_at (f x) (f y) (f z) = Gromov_product_at x y z\"", "lemma Gromov_converging_at_infinity_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n  shows \"Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<longleftrightarrow> Gromov_converging_at_boundary u\"", "lemma Gromov_extension_isometry_boundary_to_boundary:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n          \"x \\<in> Gromov_boundary\"\n  shows \"(Gromov_extension f) x \\<in> Gromov_boundary\"", "lemma Gromov_extension_isometry_homeomorphism:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n  shows \"homeomorphism_on UNIV (Gromov_extension f)\"", "lemma Gromov_extension_isometry_on_composition:\n  assumes \"isometry_on UNIV f\"\n          \"isometry_on UNIV g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\"", "lemma Gromov_extension_isometry:\n  assumes \"isometry f\"\n  shows \"homeomorphism_on UNIV (Gromov_extension f)\"\n        \"continuous_on UNIV (Gromov_extension f)\"\n        \"continuous (at x) (Gromov_extension f)\"", "lemma Gromov_extension_isometry_composition:\n  assumes \"isometry f\"\n          \"isometry g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\"", "lemma Gromov_extension_isometry_iterates:\n  fixes f::\"'a \\<Rightarrow> ('a::Gromov_hyperbolic_space)\"\n  assumes \"isometry f\"\n  shows \"Gromov_extension (f^^n) = (Gromov_extension f)^^n\"", "lemma Gromov_extension_isometry_inv:\n  assumes \"isometry f\"\n  shows \"inv (Gromov_extension f) = Gromov_extension (inv f)\"\n        \"bij (Gromov_extension f)\"", "lemma Gromov_extension_inv_fixed_point:\n  assumes \"isometry (f::'a::Gromov_hyperbolic_space \\<Rightarrow> 'a)\" \"Gromov_extension f xi = xi\"\n  shows \"Gromov_extension (inv f) xi = xi\"", "lemma Gromov_extension_preserves_extended_Gromov_product:\n  assumes \"isometry f\"\n  shows \"extended_Gromov_product_at (f x) (Gromov_extension f xi) (Gromov_extension f eta) = extended_Gromov_product_at x xi eta\""], "translations": [["", "lemma Gromov_product_at_quasi_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n  shows \"Gromov_product_at (f x) (f y) (f z) \\<ge> Gromov_product_at x y z / lambda - 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\"\n        \"Gromov_product_at (f x) (f y) (f z) \\<le> lambda * Gromov_product_at x y z + 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z) &&&\n    Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"lambda \\<ge> 1\" \"C \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "using quasi_isometry_onD[OF assms(1)]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> dist (f ?x) (f ?y) \\<le> lambda * dist ?x ?y + C\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * dist ?x ?y - C \\<le> dist (f ?x) (f ?y)\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "define D where \"D = 92 * lambda^2 * (C + deltaG(TYPE('b)))\""], ["proof (state)\nthis:\n  D = 92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have Dxy: \"hausdorff_distance (f`{x--y}) {f x--f y} \\<le> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {x--y}) {f x--f y} \\<le> D", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {x--y}) {f x--f y}\n    \\<le> 92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))", "apply (rule geodesic_quasi_isometric_image[OF assms(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. geodesic_segment_between {x--y} x y", "by auto"], ["proof (state)\nthis:\n  hausdorff_distance (f ` {x--y}) {f x--f y} \\<le> D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have Dyz: \"hausdorff_distance (f`{y--z}) {f y--f z} \\<le> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {y--z}) {f y--f z} \\<le> D", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {y--z}) {f y--f z}\n    \\<le> 92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))", "apply (rule geodesic_quasi_isometric_image[OF assms(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. geodesic_segment_between {y--z} y z", "by auto"], ["proof (state)\nthis:\n  hausdorff_distance (f ` {y--z}) {f y--f z} \\<le> D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have Dxz: \"hausdorff_distance (f`{x--z}) {f x--f z} \\<le> D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {x--z}) {f x--f z} \\<le> D", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. hausdorff_distance (f ` {x--z}) {f x--f z}\n    \\<le> 92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))", "apply (rule geodesic_quasi_isometric_image[OF assms(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. geodesic_segment_between {x--z} x z", "by auto"], ["proof (state)\nthis:\n  hausdorff_distance (f ` {x--z}) {f x--f z} \\<le> D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "define E where \"E = (lambda * (4 * deltaG(TYPE('a))) + C) + D\""], ["proof (state)\nthis:\n  E = lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"E \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> E", "unfolding E_def D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> lambda * (4 * deltaG TYPE('a)) + C +\n            92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))", "using \\<open>lambda \\<ge> 1\\<close> \\<open>C \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. 0 \\<le> lambda * (4 * deltaG TYPE('a)) + C +\n            92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))", "by auto"], ["proof (state)\nthis:\n  0 \\<le> E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "obtain w where w: \"infdist w {x--y} \\<le> 4 * deltaG(TYPE('a))\"\n                    \"infdist w {x--z} \\<le> 4 * deltaG(TYPE('a))\"\n                    \"infdist w {y--z} \\<le> 4 * deltaG(TYPE('a))\"\n                    \"dist w x = Gromov_product_at x y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>infdist w {x--y} \\<le> 4 * deltaG TYPE('a);\n         infdist w {x--z} \\<le> 4 * deltaG TYPE('a);\n         infdist w {y--z} \\<le> 4 * deltaG TYPE('a);\n         dist w x = Gromov_product_at x y z\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using slim_triangle[of \"{x--y}\" x y \"{x--z}\" z \"{y--z}\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>geodesic_segment_between {x--y} x y;\n   geodesic_segment_between {x--z} x z;\n   geodesic_segment_between {y--z} y z\\<rbrakk>\n  \\<Longrightarrow> \\<exists>w.\n                       infdist w {x--y} \\<le> 4 * deltaG TYPE('a) \\<and>\n                       infdist w {x--z} \\<le> 4 * deltaG TYPE('a) \\<and>\n                       infdist w {y--z} \\<le> 4 * deltaG TYPE('a) \\<and>\n                       dist w x = Gromov_product_at x y z \\<and>\n                       w \\<in> {x--y}\n\ngoal (1 subgoal):\n 1. (\\<And>w.\n        \\<lbrakk>infdist w {x--y} \\<le> 4 * deltaG TYPE('a);\n         infdist w {x--z} \\<le> 4 * deltaG TYPE('a);\n         infdist w {y--z} \\<le> 4 * deltaG TYPE('a);\n         dist w x = Gromov_product_at x y z\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n  infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n  infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n  dist w x = Gromov_product_at x y z\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"infdist (f w) {f x--f y} \\<le> infdist (f w) (f`{x--y}) + hausdorff_distance (f`{x--y}) {f x--f y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f y}\n    \\<le> infdist (f w) (f ` {x--y}) +\n          hausdorff_distance (f ` {x--y}) {f x--f y}", "by (intro mono_intros quasi_isometry_on_bounded[OF quasi_isometry_on_subset[OF assms(1)], of \"{x--y}\"], auto)"], ["proof (state)\nthis:\n  infdist (f w) {f x--f y}\n  \\<le> infdist (f w) (f ` {x--y}) +\n        hausdorff_distance (f ` {x--y}) {f x--f y}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) {f x--f y}\n  \\<le> infdist (f w) (f ` {x--y}) +\n        hausdorff_distance (f ` {x--y}) {f x--f y}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * infdist w {x--y} + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) (f ` {x--y}) + hausdorff_distance (f ` {x--y}) {f x--f y}\n    \\<le> lambda * infdist w {x--y} + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {x--y}) \\<le> lambda * infdist w {x--y} + C\n 2. hausdorff_distance (f ` {x--y}) {f x--f y} \\<le> D", "using quasi_isometry_on_infdist[OF assms(1)] Dxy"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> infdist (f ?w) (f ` ?S) \\<le> lambda * infdist ?w ?S + C\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * infdist ?w ?S - C\n                    \\<le> infdist (f ?w) (f ` ?S)\n  hausdorff_distance (f ` {x--y}) {f x--f y} \\<le> D\n\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {x--y}) \\<le> lambda * infdist w {x--y} + C\n 2. hausdorff_distance (f ` {x--y}) {f x--f y} \\<le> D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) (f ` {x--y}) + hausdorff_distance (f ` {x--y}) {f x--f y}\n  \\<le> lambda * infdist w {x--y} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) (f ` {x--y}) + hausdorff_distance (f ` {x--y}) {f x--f y}\n  \\<le> lambda * infdist w {x--y} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * (4 * deltaG(TYPE('a))) + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lambda * infdist w {x--y} + C + D\n    \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "using w \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n  infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n  infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n  dist w x = Gromov_product_at x y z\n  1 \\<le> lambda\n\ngoal (2 subgoals):\n 1. infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "by auto"], ["proof (state)\nthis:\n  lambda * infdist w {x--y} + C + D\n  \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  infdist (f w) {f x--f y} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "have Exy: \"infdist (f w) {f x--f y} \\<le> E\""], ["proof (prove)\nusing this:\n  infdist (f w) {f x--f y} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f y} \\<le> E", "unfolding E_def"], ["proof (prove)\nusing this:\n  infdist (f w) {f x--f y} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f y} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) {f x--f y} \\<le> E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"infdist (f w) {f y--f z} \\<le> infdist (f w) (f`{y--z}) + hausdorff_distance (f`{y--z}) {f y--f z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) {f y--f z}\n    \\<le> infdist (f w) (f ` {y--z}) +\n          hausdorff_distance (f ` {y--z}) {f y--f z}", "by (intro mono_intros quasi_isometry_on_bounded[OF quasi_isometry_on_subset[OF assms(1)], of \"{y--z}\"], auto)"], ["proof (state)\nthis:\n  infdist (f w) {f y--f z}\n  \\<le> infdist (f w) (f ` {y--z}) +\n        hausdorff_distance (f ` {y--z}) {f y--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) {f y--f z}\n  \\<le> infdist (f w) (f ` {y--z}) +\n        hausdorff_distance (f ` {y--z}) {f y--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * infdist w {y--z} + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) (f ` {y--z}) + hausdorff_distance (f ` {y--z}) {f y--f z}\n    \\<le> lambda * infdist w {y--z} + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {y--z}) \\<le> lambda * infdist w {y--z} + C\n 2. hausdorff_distance (f ` {y--z}) {f y--f z} \\<le> D", "using quasi_isometry_on_infdist[OF assms(1)] Dyz"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> infdist (f ?w) (f ` ?S) \\<le> lambda * infdist ?w ?S + C\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * infdist ?w ?S - C\n                    \\<le> infdist (f ?w) (f ` ?S)\n  hausdorff_distance (f ` {y--z}) {f y--f z} \\<le> D\n\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {y--z}) \\<le> lambda * infdist w {y--z} + C\n 2. hausdorff_distance (f ` {y--z}) {f y--f z} \\<le> D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) (f ` {y--z}) + hausdorff_distance (f ` {y--z}) {f y--f z}\n  \\<le> lambda * infdist w {y--z} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) (f ` {y--z}) + hausdorff_distance (f ` {y--z}) {f y--f z}\n  \\<le> lambda * infdist w {y--z} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * (4 * deltaG(TYPE('a))) + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lambda * infdist w {y--z} + C + D\n    \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "using w \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n  infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n  infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n  dist w x = Gromov_product_at x y z\n  1 \\<le> lambda\n\ngoal (2 subgoals):\n 1. infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "by auto"], ["proof (state)\nthis:\n  lambda * infdist w {y--z} + C + D\n  \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  infdist (f w) {f y--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "have Eyz: \"infdist (f w) {f y--f z} \\<le> E\""], ["proof (prove)\nusing this:\n  infdist (f w) {f y--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f y--f z} \\<le> E", "unfolding E_def"], ["proof (prove)\nusing this:\n  infdist (f w) {f y--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f y--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) {f y--f z} \\<le> E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"infdist (f w) {f x--f z} \\<le> infdist (f w) (f`{x--z}) + hausdorff_distance (f`{x--z}) {f x--f z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f z}\n    \\<le> infdist (f w) (f ` {x--z}) +\n          hausdorff_distance (f ` {x--z}) {f x--f z}", "by (intro mono_intros quasi_isometry_on_bounded[OF quasi_isometry_on_subset[OF assms(1)], of \"{x--z}\"], auto)"], ["proof (state)\nthis:\n  infdist (f w) {f x--f z}\n  \\<le> infdist (f w) (f ` {x--z}) +\n        hausdorff_distance (f ` {x--z}) {f x--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) {f x--f z}\n  \\<le> infdist (f w) (f ` {x--z}) +\n        hausdorff_distance (f ` {x--z}) {f x--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * infdist w {x--z} + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infdist (f w) (f ` {x--z}) + hausdorff_distance (f ` {x--z}) {f x--f z}\n    \\<le> lambda * infdist w {x--z} + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {x--z}) \\<le> lambda * infdist w {x--z} + C\n 2. hausdorff_distance (f ` {x--z}) {f x--f z} \\<le> D", "using quasi_isometry_on_infdist[OF assms(1)] Dxz"], ["proof (prove)\nusing this:\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> infdist (f ?w) (f ` ?S) \\<le> lambda * infdist ?w ?S + C\n  \\<lbrakk>?w \\<in> UNIV; ?S \\<subseteq> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * infdist ?w ?S - C\n                    \\<le> infdist (f ?w) (f ` ?S)\n  hausdorff_distance (f ` {x--z}) {f x--f z} \\<le> D\n\ngoal (2 subgoals):\n 1. infdist (f w) (f ` {x--z}) \\<le> lambda * infdist w {x--z} + C\n 2. hausdorff_distance (f ` {x--z}) {f x--f z} \\<le> D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) (f ` {x--z}) + hausdorff_distance (f ` {x--z}) {f x--f z}\n  \\<le> lambda * infdist w {x--z} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  infdist (f w) (f ` {x--z}) + hausdorff_distance (f ` {x--z}) {f x--f z}\n  \\<le> lambda * infdist w {x--z} + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (lambda * (4 * deltaG(TYPE('a))) + C) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lambda * infdist w {x--z} + C + D\n    \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "apply (intro mono_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "using w \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  infdist w {x--y} \\<le> 4 * deltaG TYPE('a)\n  infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n  infdist w {y--z} \\<le> 4 * deltaG TYPE('a)\n  dist w x = Gromov_product_at x y z\n  1 \\<le> lambda\n\ngoal (2 subgoals):\n 1. infdist w {x--z} \\<le> 4 * deltaG TYPE('a)\n 2. 0 \\<le> lambda", "by auto"], ["proof (state)\nthis:\n  lambda * infdist w {x--z} + C + D\n  \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  infdist (f w) {f x--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "have Exz: \"infdist (f w) {f x--f z} \\<le> E\""], ["proof (prove)\nusing this:\n  infdist (f w) {f x--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f z} \\<le> E", "unfolding E_def"], ["proof (prove)\nusing this:\n  infdist (f w) {f x--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D\n\ngoal (1 subgoal):\n 1. infdist (f w) {f x--f z} \\<le> lambda * (4 * deltaG TYPE('a)) + C + D", "by auto"], ["proof (state)\nthis:\n  infdist (f w) {f x--f z} \\<le> E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"2 * ((1/lambda * dist w x - C)) \\<le> 2 * dist (f w) (f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * (1 / lambda * dist w x - C) \\<le> 2 * dist (f w) (f x)", "using quasi_isometry_onD(2)[OF assms(1), of w x]"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> UNIV; x \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * dist w x - C \\<le> dist (f w) (f x)\n\ngoal (1 subgoal):\n 1. 2 * (1 / lambda * dist w x - C) \\<le> 2 * dist (f w) (f x)", "by auto"], ["proof (state)\nthis:\n  2 * (1 / lambda * dist w x - C) \\<le> 2 * dist (f w) (f x)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  2 * (1 / lambda * dist w x - C) \\<le> 2 * dist (f w) (f x)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... = (dist (f w) (f x) + dist (f w) (f y)) + (dist (f w) (f x) + dist (f w) (f z)) - (dist (f w) (f y) + dist (f w) (f z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * dist (f w) (f x) =\n    dist (f w) (f x) + dist (f w) (f y) +\n    (dist (f w) (f x) + dist (f w) (f z)) -\n    (dist (f w) (f y) + dist (f w) (f z))", "by auto"], ["proof (state)\nthis:\n  2 * dist (f w) (f x) =\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  2 * dist (f w) (f x) =\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (dist (f x) (f y) + 2 * infdist (f w) {f x--f y}) + (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) - dist (f y) (f z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (f w) (f x) + dist (f w) (f y) +\n    (dist (f w) (f x) + dist (f w) (f z)) -\n    (dist (f w) (f y) + dist (f w) (f z))\n    \\<le> dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n          (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n          dist (f y) (f z)", "by (intro geodesic_segment_distance mono_intros, auto)"], ["proof (state)\nthis:\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z))\n  \\<le> dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n        (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n        dist (f y) (f z)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z))\n  \\<le> dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n        (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n        dist (f y) (f z)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n    (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n    dist (f y) (f z)\n    \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E", "unfolding Gromov_product_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n    (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n    dist (f y) (f z)\n    \\<le> 2 *\n          ((dist (f x) (f y) + dist (f x) (f z) - dist (f y) (f z)) / 2) +\n          4 * E", "using Exy Exz"], ["proof (prove)\nusing this:\n  infdist (f w) {f x--f y} \\<le> E\n  infdist (f w) {f x--f z} \\<le> E\n\ngoal (1 subgoal):\n 1. dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n    (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n    dist (f y) (f z)\n    \\<le> 2 *\n          ((dist (f x) (f y) + dist (f x) (f z) - dist (f y) (f z)) / 2) +\n          4 * E", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  dist (f x) (f y) + 2 * infdist (f w) {f x--f y} +\n  (dist (f x) (f z) + 2 * infdist (f w) {f x--f z}) -\n  dist (f y) (f z)\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  2 * (1 / lambda * dist w x - C)\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E", "have *: \"Gromov_product_at x y z / lambda - C - 2 * E \\<le> Gromov_product_at (f x) (f y) (f z)\""], ["proof (prove)\nusing this:\n  2 * (1 / lambda * dist w x - C)\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E\n\ngoal (1 subgoal):\n 1. Gromov_product_at x y z / lambda - C - 2 * E\n    \\<le> Gromov_product_at (f x) (f y) (f z)", "unfolding w(4)"], ["proof (prove)\nusing this:\n  2 * (1 / lambda * Gromov_product_at x y z - C)\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) + 4 * E\n\ngoal (1 subgoal):\n 1. Gromov_product_at x y z / lambda - C - 2 * E\n    \\<le> Gromov_product_at (f x) (f y) (f z)", "by simp"], ["proof (state)\nthis:\n  Gromov_product_at x y z / lambda - C - 2 * E\n  \\<le> Gromov_product_at (f x) (f y) (f z)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"2 * Gromov_product_at (f x) (f y) (f z) - 2 * E \\<le> 2 * Gromov_product_at (f x) (f y) (f z) - 2 * infdist (f w) {f y--f z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n    \\<le> 2 * Gromov_product_at (f x) (f y) (f z) -\n          2 * infdist (f w) {f y--f z}", "using Eyz"], ["proof (prove)\nusing this:\n  infdist (f w) {f y--f z} \\<le> E\n\ngoal (1 subgoal):\n 1. 2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n    \\<le> 2 * Gromov_product_at (f x) (f y) (f z) -\n          2 * infdist (f w) {f y--f z}", "by auto"], ["proof (state)\nthis:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) -\n        2 * infdist (f w) {f y--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n  \\<le> 2 * Gromov_product_at (f x) (f y) (f z) -\n        2 * infdist (f w) {f y--f z}\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... = dist (f x) (f y) + dist (f x) (f z) - (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * Gromov_product_at (f x) (f y) (f z) - 2 * infdist (f w) {f y--f z} =\n    dist (f x) (f y) + dist (f x) (f z) -\n    (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})", "unfolding Gromov_product_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * ((dist (f x) (f y) + dist (f x) (f z) - dist (f y) (f z)) / 2) -\n    2 * infdist (f w) {f y--f z} =\n    dist (f x) (f y) + dist (f x) (f z) -\n    (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * infdist (f w) {f y--f z} =\n  dist (f x) (f y) + dist (f x) (f z) -\n  (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * infdist (f w) {f y--f z} =\n  dist (f x) (f y) + dist (f x) (f z) -\n  (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> (dist (f w) (f x) + dist (f w) (f y)) + (dist (f w) (f x) + dist (f w) (f z)) - (dist (f w) (f y) + dist (f w) (f z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (f x) (f y) + dist (f x) (f z) -\n    (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\n    \\<le> dist (f w) (f x) + dist (f w) (f y) +\n          (dist (f w) (f x) + dist (f w) (f z)) -\n          (dist (f w) (f y) + dist (f w) (f z))", "by (intro geodesic_segment_distance mono_intros, auto)"], ["proof (state)\nthis:\n  dist (f x) (f y) + dist (f x) (f z) -\n  (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\n  \\<le> dist (f w) (f x) + dist (f w) (f y) +\n        (dist (f w) (f x) + dist (f w) (f z)) -\n        (dist (f w) (f y) + dist (f w) (f z))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  dist (f x) (f y) + dist (f x) (f z) -\n  (dist (f y) (f z) + 2 * infdist (f w) {f y--f z})\n  \\<le> dist (f w) (f x) + dist (f w) (f y) +\n        (dist (f w) (f x) + dist (f w) (f z)) -\n        (dist (f w) (f y) + dist (f w) (f z))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... = 2 * dist (f w) (f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist (f w) (f x) + dist (f w) (f y) +\n    (dist (f w) (f x) + dist (f w) (f z)) -\n    (dist (f w) (f y) + dist (f w) (f z)) =\n    2 * dist (f w) (f x)", "by auto"], ["proof (state)\nthis:\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z)) =\n  2 * dist (f w) (f x)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  dist (f w) (f x) + dist (f w) (f y) +\n  (dist (f w) (f x) + dist (f w) (f z)) -\n  (dist (f w) (f y) + dist (f w) (f z)) =\n  2 * dist (f w) (f x)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> 2 * (lambda * dist w x + C)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * dist (f w) (f x) \\<le> 2 * (lambda * dist w x + C)", "using quasi_isometry_onD(1)[OF assms(1), of w x]"], ["proof (prove)\nusing this:\n  \\<lbrakk>w \\<in> UNIV; x \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> dist (f w) (f x) \\<le> lambda * dist w x + C\n\ngoal (1 subgoal):\n 1. 2 * dist (f w) (f x) \\<le> 2 * (lambda * dist w x + C)", "by auto"], ["proof (state)\nthis:\n  2 * dist (f w) (f x) \\<le> 2 * (lambda * dist w x + C)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n  \\<le> 2 * (lambda * dist w x + C)", "have \"Gromov_product_at (f x) (f y) (f z) \\<le> lambda * dist w x + C + E\""], ["proof (prove)\nusing this:\n  2 * Gromov_product_at (f x) (f y) (f z) - 2 * E\n  \\<le> 2 * (lambda * dist w x + C)\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z) \\<le> lambda * dist w x + C + E", "by auto"], ["proof (state)\nthis:\n  Gromov_product_at (f x) (f y) (f z) \\<le> lambda * dist w x + C + E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "then"], ["proof (chain)\npicking this:\n  Gromov_product_at (f x) (f y) (f z) \\<le> lambda * dist w x + C + E", "have **: \"Gromov_product_at (f x) (f y) (f z) \\<le> lambda * Gromov_product_at x y z + C + 2 * E\""], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (f y) (f z) \\<le> lambda * dist w x + C + E\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z + C + 2 * E", "unfolding w(4)"], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (f y) (f z)\n  \\<le> lambda * Gromov_product_at x y z + C + E\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z + C + 2 * E", "using \\<open>E \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (f y) (f z)\n  \\<le> lambda * Gromov_product_at x y z + C + E\n  0 \\<le> E\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z + C + 2 * E", "by auto"], ["proof (state)\nthis:\n  Gromov_product_at (f x) (f y) (f z)\n  \\<le> lambda * Gromov_product_at x y z + C + 2 * E\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"C + 2 * E = 3 * 1 * C + 8 * lambda * deltaG(TYPE('a)) + 184 * lambda^2 * C + 184 * lambda^2 * deltaG(TYPE('b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. C + 2 * E =\n    3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n    184 * lambda\\<^sup>2 * deltaG TYPE('b)", "unfolding E_def D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. C +\n    2 *\n    (lambda * (4 * deltaG TYPE('a)) + C +\n     92 * lambda\\<^sup>2 * (C + deltaG TYPE('b))) =\n    3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n    184 * lambda\\<^sup>2 * deltaG TYPE('b)", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  C + 2 * E =\n  3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n  184 * lambda\\<^sup>2 * deltaG TYPE('b)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "also"], ["proof (state)\nthis:\n  C + 2 * E =\n  3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n  184 * lambda\\<^sup>2 * deltaG TYPE('b)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "have \"... \\<le> 3 * lambda^2 * C + 187 * lambda^2 * deltaG(TYPE('a)) + 184 * lambda^2 * C + 187 * lambda^2 * deltaG(TYPE('b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n    184 * lambda\\<^sup>2 * deltaG TYPE('b)\n    \\<le> 3 * lambda\\<^sup>2 * C + 187 * lambda\\<^sup>2 * deltaG TYPE('a) +\n          184 * lambda\\<^sup>2 * C +\n          187 * lambda\\<^sup>2 * deltaG TYPE('b)", "apply (intro mono_intros)"], ["proof (prove)\ngoal (10 subgoals):\n 1. 1 \\<le> lambda\\<^sup>2\n 2. 0 \\<le> 3\n 3. 0 \\<le> C\n 4. 8 \\<le> 187\n 5. 1 \\<le> lambda\n 6. 0 < 2\n 7. 0 \\<le> 187\n 8. 0 \\<le> lambda\n 9. 184 \\<le> 187\n 10. 0 \\<le> lambda\\<^sup>2", "using \\<open>lambda \\<ge> 1\\<close> \\<open>C \\<ge> 0\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (10 subgoals):\n 1. 1 \\<le> lambda\\<^sup>2\n 2. 0 \\<le> 3\n 3. 0 \\<le> C\n 4. 8 \\<le> 187\n 5. 1 \\<le> lambda\n 6. 0 < 2\n 7. 0 \\<le> 187\n 8. 0 \\<le> lambda\n 9. 184 \\<le> 187\n 10. 0 \\<le> lambda\\<^sup>2", "by auto"], ["proof (state)\nthis:\n  3 * 1 * C + 8 * lambda * deltaG TYPE('a) + 184 * lambda\\<^sup>2 * C +\n  184 * lambda\\<^sup>2 * deltaG TYPE('b)\n  \\<le> 3 * lambda\\<^sup>2 * C + 187 * lambda\\<^sup>2 * deltaG TYPE('a) +\n        184 * lambda\\<^sup>2 * C +\n        187 * lambda\\<^sup>2 * deltaG TYPE('b)\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "finally"], ["proof (chain)\npicking this:\n  C + 2 * E\n  \\<le> 3 * lambda\\<^sup>2 * C + 187 * lambda\\<^sup>2 * deltaG TYPE('a) +\n        184 * lambda\\<^sup>2 * C +\n        187 * lambda\\<^sup>2 * deltaG TYPE('b)", "have I: \"C + 2 * E \\<le> 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (prove)\nusing this:\n  C + 2 * E\n  \\<le> 3 * lambda\\<^sup>2 * C + 187 * lambda\\<^sup>2 * deltaG TYPE('a) +\n        184 * lambda\\<^sup>2 * C +\n        187 * lambda\\<^sup>2 * deltaG TYPE('b)\n\ngoal (1 subgoal):\n 1. C + 2 * E\n    \\<le> 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  C + 2 * E\n  \\<le> 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal (2 subgoals):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)\n 2. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "show \"Gromov_product_at (f x) (f y) (f z) \\<ge> Gromov_product_at x y z / lambda - 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)", "using * I"], ["proof (prove)\nusing this:\n  Gromov_product_at x y z / lambda - C - 2 * E\n  \\<le> Gromov_product_at (f x) (f y) (f z)\n  C + 2 * E\n  \\<le> 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal (1 subgoal):\n 1. Gromov_product_at x y z / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f x) (f y) (f z)", "by auto"], ["proof (state)\nthis:\n  Gromov_product_at x y z / lambda -\n  187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n  \\<le> Gromov_product_at (f x) (f y) (f z)\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "show \"Gromov_product_at (f x) (f y) (f z) \\<le> lambda * Gromov_product_at x y z + 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "using ** I"], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (f y) (f z)\n  \\<le> lambda * Gromov_product_at x y z + C + 2 * E\n  C + 2 * E\n  \\<le> 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z)\n    \\<le> lambda * Gromov_product_at x y z +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "by auto"], ["proof (state)\nthis:\n  Gromov_product_at (f x) (f y) (f z)\n  \\<le> lambda * Gromov_product_at x y z +\n        187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Gromov_converging_at_infinity_quasi_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n  shows \"Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<longleftrightarrow> Gromov_converging_at_boundary u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) =\n    Gromov_converging_at_boundary u", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u\n 2. Gromov_converging_at_boundary u \\<Longrightarrow>\n    Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "assume \"Gromov_converging_at_boundary u\""], ["proof (state)\nthis:\n  Gromov_converging_at_boundary u\n\ngoal (2 subgoals):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u\n 2. Gromov_converging_at_boundary u \\<Longrightarrow>\n    Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "show \"Gromov_converging_at_boundary (\\<lambda>n. f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "proof (rule Gromov_converging_at_boundaryI[of \"f (basepoint)\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "have \"lambda \\<ge> 1\" \"C \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "using quasi_isometry_onD[OF assms(1)]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> dist (f ?x) (f ?y) \\<le> lambda * dist ?x ?y + C\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * dist ?x ?y - C \\<le> dist (f ?x) (f ?y)\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "define D where \"D = 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (state)\nthis:\n  D = 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "fix M::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "obtain M2::real where M2: \"M = M2/lambda - D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>M2.\n        M = M2 / lambda - D \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> lambda\n\ngoal (1 subgoal):\n 1. (\\<And>M2.\n        M = M2 / lambda - D \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  M = M2 / lambda - D\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "obtain N where N: \"\\<And>m n. m \\<ge> N \\<Longrightarrow> n \\<ge> N \\<Longrightarrow> Gromov_product_at basepoint (u m) (u n) \\<ge> M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at basepoint (u m)\n  (u n)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>Gromov_converging_at_boundary u\\<close>"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary u\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at basepoint (u m)\n  (u n)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding Gromov_converging_at_boundary_def"], ["proof (prove)\nusing this:\n  \\<forall>a M.\n     \\<exists>N.\n        \\<forall>n\\<ge>N.\n           \\<forall>m\\<ge>N. M \\<le> Gromov_product_at a (u m) (u n)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at basepoint (u m)\n  (u n)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M2 \\<le> Gromov_product_at basepoint (u ?m) (u ?n)\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "have \"Gromov_product_at (f basepoint) (f (u m)) (f (u n)) \\<ge> M\" if \"m \\<ge> N\" \"n \\<ge> N\" for m n"], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "have \"M \\<le> Gromov_product_at basepoint (u m) (u n)/lambda - D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n) / lambda - D", "unfolding M2"], ["proof (prove)\ngoal (1 subgoal):\n 1. M2 / lambda - D\n    \\<le> Gromov_product_at basepoint (u m) (u n) / lambda - D", "using N[OF that] \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  M2 \\<le> Gromov_product_at basepoint (u m) (u n)\n  1 \\<le> lambda\n\ngoal (1 subgoal):\n 1. M2 / lambda - D\n    \\<le> Gromov_product_at basepoint (u m) (u n) / lambda - D", "by (auto simp add: divide_simps)"], ["proof (state)\nthis:\n  M \\<le> Gromov_product_at basepoint (u m) (u n) / lambda - D\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "also"], ["proof (state)\nthis:\n  M \\<le> Gromov_product_at basepoint (u m) (u n) / lambda - D\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "have \"... \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at basepoint (u m) (u n) / lambda - D\n    \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at basepoint (u m) (u n) / lambda -\n    187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n    \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "by (rule Gromov_product_at_quasi_isometry[OF assms(1)])"], ["proof (state)\nthis:\n  Gromov_product_at basepoint (u m) (u n) / lambda - D\n  \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "finally"], ["proof (chain)\npicking this:\n  M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "show ?thesis"], ["proof (prove)\nusing this:\n  M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "by simp"], ["proof (state)\nthis:\n  M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at (f basepoint) (f (u ?m))\n                             (f (u ?n))\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at (f basepoint) (f (u ?m))\n                             (f (u ?n))", "show \"\\<exists>N. \\<forall>n \\<ge> N. \\<forall>m \\<ge> N. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at (f basepoint) (f (u ?m))\n                             (f (u ?n))\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N.\n             M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "unfolding comp_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at (f basepoint) (f (u ?m))\n                             (f (u ?n))\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N.\n             M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "by auto"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N.\n           M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "assume \"Gromov_converging_at_boundary (\\<lambda>n. f (u n))\""], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "show \"Gromov_converging_at_boundary u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary u", "proof (rule Gromov_converging_at_boundaryI[of \"basepoint\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "have \"lambda \\<ge> 1\" \"C \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "using quasi_isometry_onD[OF assms(1)]"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> dist (f ?x) (f ?y) \\<le> lambda * dist ?x ?y + C\n  \\<lbrakk>?x \\<in> UNIV; ?y \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> 1 / lambda * dist ?x ?y - C \\<le> dist (f ?x) (f ?y)\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. 1 \\<le> lambda &&& 0 \\<le> C", "by auto"], ["proof (state)\nthis:\n  1 \\<le> lambda\n  0 \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "define D where \"D = 187 * lambda^2 * (C + deltaG(TYPE('a)) + deltaG(TYPE('b)))\""], ["proof (state)\nthis:\n  D = 187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "fix M::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "define M2 where \"M2 = lambda * M + D\""], ["proof (state)\nthis:\n  M2 = lambda * M + D\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "have M2: \"M = (M2 - D)/lambda\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M = (M2 - D) / lambda", "unfolding M2_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. M = (lambda * M + D - D) / lambda", "using \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  1 \\<le> lambda\n\ngoal (1 subgoal):\n 1. M = (lambda * M + D - D) / lambda", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  M = (M2 - D) / lambda\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "obtain N where N: \"\\<And>m n. m \\<ge> N \\<Longrightarrow> n \\<ge> N \\<Longrightarrow> Gromov_product_at (f basepoint) (f (u m)) (f (u n)) \\<ge> M2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at (f basepoint)\n  (f (u m)) (f (u n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>Gromov_converging_at_boundary (\\<lambda>n. f (u n))\\<close>"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at (f basepoint)\n  (f (u m)) (f (u n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding Gromov_converging_at_boundary_def"], ["proof (prove)\nusing this:\n  \\<forall>a M.\n     \\<exists>N.\n        \\<forall>n\\<ge>N.\n           \\<forall>m\\<ge>N. M \\<le> Gromov_product_at a (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> M2 \\<le> Gromov_product_at (f basepoint)\n  (f (u m)) (f (u n))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M2 \\<le> Gromov_product_at (f basepoint) (f (u ?m))\n                              (f (u ?n))\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "have \"Gromov_product_at basepoint (u m) (u n) \\<ge> M\" if \"m \\<ge> N\" \"n \\<ge> N\" for m n"], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "have \"M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "using N[OF that]"], ["proof (prove)\nusing this:\n  M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "by auto"], ["proof (state)\nthis:\n  M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "also"], ["proof (state)\nthis:\n  M2 \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "have \"... \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n    \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D", "unfolding D_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n    \\<le> lambda * Gromov_product_at basepoint (u m) (u n) +\n          187 * lambda\\<^sup>2 * (C + deltaG TYPE('a) + deltaG TYPE('b))", "by (rule Gromov_product_at_quasi_isometry[OF assms(1)])"], ["proof (state)\nthis:\n  Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n  \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "finally"], ["proof (chain)\npicking this:\n  M2 \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D", "show \"M \\<le> Gromov_product_at basepoint (u m) (u n)\""], ["proof (prove)\nusing this:\n  M2 \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D\n\ngoal (1 subgoal):\n 1. M \\<le> Gromov_product_at basepoint (u m) (u n)", "unfolding M2"], ["proof (prove)\nusing this:\n  M2 \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D\n\ngoal (1 subgoal):\n 1. (M2 - D) / lambda \\<le> Gromov_product_at basepoint (u m) (u n)", "using \\<open>lambda \\<ge> 1\\<close>"], ["proof (prove)\nusing this:\n  M2 \\<le> lambda * Gromov_product_at basepoint (u m) (u n) + D\n  1 \\<le> lambda\n\ngoal (1 subgoal):\n 1. (M2 - D) / lambda \\<le> Gromov_product_at basepoint (u m) (u n)", "by (auto simp add: algebra_simps divide_simps)"], ["proof (state)\nthis:\n  M \\<le> Gromov_product_at basepoint (u m) (u n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at basepoint (u ?m) (u ?n)\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at basepoint (u ?m) (u ?n)", "show \"\\<exists>N. \\<forall>n \\<ge> N. \\<forall>m \\<ge> N. Gromov_product_at basepoint (u m) (u n) \\<ge> M\""], ["proof (prove)\nusing this:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> M \\<le> Gromov_product_at basepoint (u ?m) (u ?n)\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N. M \\<le> Gromov_product_at basepoint (u m) (u n)", "by auto"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N. M \\<le> Gromov_product_at basepoint (u m) (u n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary u\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We define the extension to the completion of a function $f: X \\to Y$ where $X$ and $Y$\nare geodesic Gromov-hyperbolic spaces, as a function from $X \\cup \\partial X$ to $Y\\cup \\partial Y$,\nas follows. If $x$ is in the space, we just use $f(x)$ (with the suitable coercions for the\ndefinition). Otherwise, we wish to define $f(x)$ as the limit of $f(u_n)$ for all sequences tending\nto $x$. For the definition, we use one such sequence chosen arbitrarily (this is the role of\n\\verb+rep_Gromov_completion x+ below, it is indeed a sequence in the space tending to $x$), and\nwe use the limit of $f(u_n)$ (if it exists, otherwise the framework will choose some point for us\nbut it will make no sense whatsoever).\n\nFor quasi-isometries, we have indeed that $f(u_n)$ converges if $u_n$ converges to a boundary point,\nby \\verb+Gromov_converging_at_infinity_quasi_isometry+, so this definition is meaningful. Moreover,\ncontinuity of the extension follows readily from this (modulo a suitable criterion for continuity\nbased on sequences convergence, established in \\verb+continuous_at_extension_sequentially'+).\\<close>"], ["", "definition Gromov_extension::\"('a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space) \\<Rightarrow> ('a Gromov_completion \\<Rightarrow> 'b Gromov_completion)\"\n  where \"Gromov_extension f x = (if x \\<in> Gromov_boundary then lim (to_Gromov_completion o f o (rep_Gromov_completion x))\n                                 else to_Gromov_completion (f (from_Gromov_completion x)))\""], ["", "lemma Gromov_extension_inside_space [simp]:\n  \"Gromov_extension f (to_Gromov_completion x) = to_Gromov_completion (f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f (to_Gromov_completion x) = to_Gromov_completion (f x)", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if to_Gromov_completion x \\<in> Gromov_boundary\n     then lim (to_Gromov_completion \\<circ> f \\<circ>\n               rep_Gromov_completion (to_Gromov_completion x))\n     else to_Gromov_completion\n           (f (from_Gromov_completion (to_Gromov_completion x)))) =\n    to_Gromov_completion (f x)", "by auto"], ["", "lemma Gromov_extension_id [simp]:\n  \"Gromov_extension (id::'a::Gromov_hyperbolic_space \\<Rightarrow> 'a) = id\"\n  \"Gromov_extension (\\<lambda>x::'a. x) = (\\<lambda>x. x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension id = id &&&\n    Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. Gromov_extension id = id\n 2. Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "have \"Gromov_extension id x = id x\" for x::\"'a Gromov_completion\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension id x = id x", "unfolding Gromov_extension_def comp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (\\<lambda>xa.\n                  to_Gromov_completion (id (rep_Gromov_completion x xa)))\n     else to_Gromov_completion (id (from_Gromov_completion x))) =\n    id x", "using limI rep_Gromov_completion_limit"], ["proof (prove)\nusing this:\n  ?X \\<longlonglongrightarrow> ?L \\<Longrightarrow> lim ?X = ?L\n  (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion ?x n))\n  \\<longlonglongrightarrow> ?x\n\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (\\<lambda>xa.\n                  to_Gromov_completion (id (rep_Gromov_completion x xa)))\n     else to_Gromov_completion (id (from_Gromov_completion x))) =\n    id x", "by (auto simp add: to_from_Gromov_completion)"], ["proof (state)\nthis:\n  Gromov_extension id ?x = id ?x\n\ngoal (2 subgoals):\n 1. Gromov_extension id = id\n 2. Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "then"], ["proof (chain)\npicking this:\n  Gromov_extension id ?x = id ?x", "show \"Gromov_extension (id::'a \\<Rightarrow> 'a) = id\""], ["proof (prove)\nusing this:\n  Gromov_extension id ?x = id ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension id = id", "by auto"], ["proof (state)\nthis:\n  Gromov_extension id = id\n\ngoal (1 subgoal):\n 1. Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "then"], ["proof (chain)\npicking this:\n  Gromov_extension id = id", "show \"Gromov_extension (\\<lambda>x::'a. x) = (\\<lambda>x. x)\""], ["proof (prove)\nusing this:\n  Gromov_extension id = id\n\ngoal (1 subgoal):\n 1. Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "unfolding id_def"], ["proof (prove)\nusing this:\n  Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)\n\ngoal (1 subgoal):\n 1. Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (\\<lambda>x. x) = (\\<lambda>x. x)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The Gromov extension of a quasi-isometric map sends the boundary to the boundary.\\<close>"], ["", "lemma Gromov_extension_quasi_isometry_boundary_to_boundary:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"x \\<in> Gromov_boundary\"\n  shows \"(Gromov_extension f) x \\<in> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "have *: \"Gromov_converging_at_boundary (\\<lambda>n. f (rep_Gromov_completion x n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary\n     (\\<lambda>n. f (rep_Gromov_completion x n))", "by (simp add: Gromov_converging_at_infinity_quasi_isometry[OF assms(1)] Gromov_boundary_rep_converging assms(2))"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (rep_Gromov_completion x n))\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (to_Gromov_completion \\<circ> f \\<circ>\n               rep_Gromov_completion x)\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "using assms(2)"], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (to_Gromov_completion \\<circ> f \\<circ>\n               rep_Gromov_completion x)\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "unfolding comp_def"], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (\\<lambda>xa.\n                  to_Gromov_completion (f (rep_Gromov_completion x xa)))\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Gromov_boundary \\<Longrightarrow>\n    lim (\\<lambda>xa. to_Gromov_completion (f (rep_Gromov_completion x xa)))\n    \\<in> Gromov_boundary", "by (metis Gromov_converging_at_boundary_converges * limI)"], ["proof (state)\nthis:\n  Gromov_extension f x \\<in> Gromov_boundary\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>If the original function is continuous somewhere inside the space, then its Gromov extension\nis continuous at the corresponding point inside the completion. This is clear as the original space\nis open in the Gromov completion, but the proof requires to go back and forth between one space\nand the other.\\<close>"], ["", "lemma Gromov_extension_continuous_inside:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"continuous (at x within S) f\"\n  shows \"continuous (at (to_Gromov_completion x) within (to_Gromov_completion`S)) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "have *: \"continuous (at (to_Gromov_completion x) within (to_Gromov_completion`S)) (to_Gromov_completion o f o from_Gromov_completion)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion)", "apply (intro continuous_within_compose, auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     from_Gromov_completion\n 2. continuous\n     (at x within from_Gromov_completion ` to_Gromov_completion ` S) f\n 3. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "using from_Gromov_completion_continuous(3) continuous_at_imp_continuous_within"], ["proof (prove)\nusing this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  isCont from_Gromov_completion ?x\n  isCont ?f ?x \\<Longrightarrow> continuous (at ?x within ?s) ?f\n\ngoal (3 subgoals):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     from_Gromov_completion\n 2. continuous\n     (at x within from_Gromov_completion ` to_Gromov_completion ` S) f\n 3. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. continuous\n     (at x within from_Gromov_completion ` to_Gromov_completion ` S) f\n 2. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "using assms"], ["proof (prove)\nusing this:\n  continuous (at x within S) f\n\ngoal (2 subgoals):\n 1. continuous\n     (at x within from_Gromov_completion ` to_Gromov_completion ` S) f\n 2. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "apply (simp add: continuous_within_topological)"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "using continuous_at_imp_continuous_within continuous_on_eq_continuous_within to_Gromov_completion_continuous"], ["proof (prove)\nusing this:\n  isCont ?f ?x \\<Longrightarrow> continuous (at ?x within ?s) ?f\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n  continuous_on UNIV to_Gromov_completion\n\ngoal (1 subgoal):\n 1. continuous\n     (at (f x) within f ` from_Gromov_completion ` to_Gromov_completion ` S)\n     to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n   (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion)\n\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "have \"(to_Gromov_completion o f o from_Gromov_completion) y = Gromov_extension f y\"\n    if \"y \\<in> range to_Gromov_completion\" for y"], ["proof (prove)\ngoal (1 subgoal):\n 1. (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) y =\n    Gromov_extension f y", "unfolding comp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. to_Gromov_completion (f (from_Gromov_completion y)) =\n    Gromov_extension f y", "using that"], ["proof (prove)\nusing this:\n  y \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. to_Gromov_completion (f (from_Gromov_completion y)) =\n    Gromov_extension f y", "by auto"], ["proof (state)\nthis:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) ?y =\n  Gromov_extension f ?y\n\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "moreover"], ["proof (state)\nthis:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) ?y =\n  Gromov_extension f ?y\n\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "have \"eventually (\\<lambda>y. y \\<in> range to_Gromov_completion) (at (to_Gromov_completion x) within (to_Gromov_completion`S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n       within to_Gromov_completion ` S. y \\<in> range to_Gromov_completion", "using to_Gromov_completion_range_open eventually_at_topological"], ["proof (prove)\nusing this:\n  open (range to_Gromov_completion)\n  eventually ?P (at ?a within ?s) =\n  (\\<exists>S.\n      open S \\<and>\n      ?a \\<in> S \\<and>\n      (\\<forall>x\\<in>S.\n          x \\<noteq> ?a \\<longrightarrow>\n          x \\<in> ?s \\<longrightarrow> ?P x))\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n       within to_Gromov_completion ` S. y \\<in> range to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n     within to_Gromov_completion ` S. y \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "ultimately"], ["proof (chain)\npicking this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) ?y =\n  Gromov_extension f ?y\n  \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n     within to_Gromov_completion ` S. y \\<in> range to_Gromov_completion", "have **: \"eventually (\\<lambda>y. (to_Gromov_completion o f o from_Gromov_completion) y = Gromov_extension f y)\n                        (at (to_Gromov_completion x) within (to_Gromov_completion`S))\""], ["proof (prove)\nusing this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) ?y =\n  Gromov_extension f ?y\n  \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n     within to_Gromov_completion ` S. y \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n       within to_Gromov_completion ` S.\n       (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) y =\n       Gromov_extension f y", "by (rule eventually_mono[rotated])"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F y in at (to_Gromov_completion x)\n     within to_Gromov_completion ` S.\n     (to_Gromov_completion \\<circ> f \\<circ> from_Gromov_completion) y =\n     Gromov_extension f y\n\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n     (Gromov_extension f)", "by (rule continuous_within_cong[OF * **], auto)"], ["proof (state)\nthis:\n  continuous (at (to_Gromov_completion x) within to_Gromov_completion ` S)\n   (Gromov_extension f)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The extension to the boundary of a quasi-isometry is continuous. This is a nontrivial\nstatement, but it follows readily from the fact we have already proved that sequences converging\nat the boundary are mapped to sequences converging to the boundary. The proof is expressed using\na convenient continuity criterion for which we only need to control what happens for sequences\ninside the space.\\<close>"], ["", "proposition Gromov_extension_continuous:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"x \\<in> Gromov_boundary\"\n  shows \"continuous (at x) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont (Gromov_extension f) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. isCont (Gromov_extension f) x", "have \"continuous (at x within (range to_Gromov_completion \\<union> Gromov_boundary)) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous\n     (at x within range to_Gromov_completion \\<union> Gromov_boundary)\n     (Gromov_extension f)", "proof (rule continuous_at_extension_sequentially'[OF \\<open>x \\<in> Gromov_boundary\\<close>])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix b::\"'a Gromov_completion\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume \"b \\<in> Gromov_boundary\""], ["proof (state)\nthis:\n  b \\<in> Gromov_boundary\n\ngoal (2 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "show \"\\<exists>u. (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and> u \\<longlonglongrightarrow> b \\<and> (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u.\n       (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n       u \\<longlonglongrightarrow> b \\<and>\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f b", "apply (rule exI[of _ \"to_Gromov_completion o (rep_Gromov_completion b)\"], auto simp add: comp_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. to_Gromov_completion (rep_Gromov_completion b x))\n    \\<longlonglongrightarrow> b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_completion_converge_to_boundary[OF \\<open>b \\<in> Gromov_boundary\\<close>]"], ["proof (prove)\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "using Quotient3_abs_rep[OF Quotient3_Gromov_completion] Quotient3_rep_reflp[OF Quotient3_Gromov_completion]"], ["proof (prove)\nusing this:\n  abs_Gromov_completion (rep_Gromov_completion ?a) = ?a\n  Gromov_completion_rel (rep_Gromov_completion ?a)\n   (rep_Gromov_completion ?a)\n\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "apply auto[1]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "using \\<open>b \\<in> Gromov_boundary\\<close>"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "unfolding comp_def"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (\\<lambda>x.\n      to_Gromov_completion (f (rep_Gromov_completion b x)))\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "by (auto simp add: convergent_LIMSEQ_iff[symmetric] Gromov_boundary_rep_converging Gromov_converging_at_infinity_quasi_isometry[OF assms(1)]\n               intro!: Gromov_converging_at_boundary_converges')"], ["proof (state)\nthis:\n  \\<exists>u.\n     (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n     u \\<longlonglongrightarrow> b \\<and>\n     (\\<lambda>n. Gromov_extension f (u n))\n     \\<longlonglongrightarrow> Gromov_extension f b\n\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "fix u and b::\"'a Gromov_completion\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "assume u: \"\\<forall>n. u n \\<in> range to_Gromov_completion\" \"b \\<in> Gromov_boundary\" \"u \\<longlonglongrightarrow> b\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "define v where \"v = (\\<lambda>n. from_Gromov_completion (u n))\""], ["proof (state)\nthis:\n  v = (\\<lambda>n. from_Gromov_completion (u n))\n\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "have v: \"u n = to_Gromov_completion (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "using u(1)"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "unfolding v_def"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (from_Gromov_completion (u n))", "by (simp add: f_inv_into_f from_Gromov_completion_def)"], ["proof (state)\nthis:\n  u ?n = to_Gromov_completion (v ?n)\n\ngoal (1 subgoal):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))", "show \"convergent (\\<lambda>n. Gromov_extension f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "using u"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "unfolding v"], ["proof (prove)\nusing this:\n  \\<forall>n. to_Gromov_completion (v n) \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))", "apply (auto intro!: Gromov_converging_at_boundary_converges' simp add: Gromov_converging_at_infinity_quasi_isometry[OF assms(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> Gromov_converging_at_boundary v", "using Gromov_boundary_abs_converging Gromov_completion_converge_to_boundary"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> Gromov_boundary; abs_Gromov_completion ?u = ?x;\n   Gromov_completion_rel ?u ?u\\<rbrakk>\n  \\<Longrightarrow> Gromov_converging_at_boundary ?u\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  (\\<lambda>n. to_Gromov_completion (?u n)) \\<longlonglongrightarrow> ?x =\n  (Gromov_completion_rel ?u ?u \\<and> abs_Gromov_completion ?u = ?x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> Gromov_converging_at_boundary v", "by blast"], ["proof (state)\nthis:\n  convergent (\\<lambda>n. Gromov_extension f (u n))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  continuous\n   (at x within range to_Gromov_completion \\<union> Gromov_boundary)\n   (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. isCont (Gromov_extension f) x", "then"], ["proof (chain)\npicking this:\n  continuous\n   (at x within range to_Gromov_completion \\<union> Gromov_boundary)\n   (Gromov_extension f)", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous\n   (at x within range to_Gromov_completion \\<union> Gromov_boundary)\n   (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. isCont (Gromov_extension f) x", "by (simp add: Gromov_boundary_def)"], ["proof (state)\nthis:\n  isCont (Gromov_extension f) x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Combining the two previous statements on continuity inside the space and continuity at the\nboundary, we deduce that a continuous quasi-isometry extends to a continuous map everywhere.\\<close>"], ["", "proposition Gromov_extension_continuous_everywhere:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"continuous_on UNIV f\"\n  shows \"continuous_on UNIV (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on UNIV (Gromov_extension f)", "using Gromov_extension_continuous_inside Gromov_extension_continuous[OF assms(1)]"], ["proof (prove)\nusing this:\n  continuous (at ?x within ?S) ?f \\<Longrightarrow>\n  continuous (at (to_Gromov_completion ?x) within to_Gromov_completion ` ?S)\n   (Gromov_extension ?f)\n  ?x \\<in> Gromov_boundary \\<Longrightarrow> isCont (Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. continuous_on UNIV (Gromov_extension f)", "by (metis UNIV_I assms(2) continuous_on_eq_continuous_within continuous_within_open not_in_Gromov_boundary rangeI to_Gromov_completion_range_open)"], ["", "text \\<open>The extension to the boundary is functorial on the category of quasi-isometries, i.e., the\ncomposition of extensions is the extension of the composition. This is clear inside the space, and\nit follows from the continuity at boundary points.\\<close>"], ["", "lemma Gromov_extension_composition:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n    and g::\"'b::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'c::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"mu D-quasi_isometry g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "have In: \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" if H: \"x \\<in> range to_Gromov_completion\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "obtain y where *: \"x = to_Gromov_completion y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x = to_Gromov_completion y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using H"], ["proof (prove)\nusing this:\n  x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x = to_Gromov_completion y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = to_Gromov_completion y\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "unfolding * comp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (\\<lambda>x. g (f x)) (to_Gromov_completion y) =\n    Gromov_extension g (Gromov_extension f (to_Gromov_completion y))", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) x =\n  (Gromov_extension g \\<circ> Gromov_extension f) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "moreover"], ["proof (state)\nthis:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "have \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" if H: \"x \\<in> Gromov_boundary\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "obtain u where u: \"\\<And>n. u n \\<in> range to_Gromov_completion\" \"u \\<longlonglongrightarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>\\<And>n. u n \\<in> range to_Gromov_completion;\n         u \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using closure_sequential to_Gromov_completion_range_dense"], ["proof (prove)\nusing this:\n  (?l \\<in> closure ?S) =\n  (\\<exists>x.\n      (\\<forall>n. x n \\<in> ?S) \\<and> x \\<longlonglongrightarrow> ?l)\n  closure (range to_Gromov_completion) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>\\<And>n. u n \\<in> range to_Gromov_completion;\n         u \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u ?n \\<in> range to_Gromov_completion\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have \"(\\<lambda>n. Gromov_extension (g o f) (u n)) \\<longlonglongrightarrow> Gromov_extension (g o f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "using continuous_within_tendsto_compose[OF Gromov_extension_continuous[OF quasi_isometry_on_compose[OF assms(1) assms(2), simplified] H] _ u(2)]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV \\<Longrightarrow>\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "have A: \"(\\<lambda>n. (Gromov_extension g) ((Gromov_extension f) (u n))) \\<longlonglongrightarrow> Gromov_extension (g o f) x\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "unfolding In[OF u(1)]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. (Gromov_extension g \\<circ> Gromov_extension f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (\\<lambda>x. g (f x)) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (\\<lambda>x. g (f x)) x", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have *: \"(\\<lambda>n. (Gromov_extension f) (u n)) \\<longlonglongrightarrow> (Gromov_extension f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "using continuous_within_tendsto_compose[OF Gromov_extension_continuous[OF assms(1) H] _ u(2)]"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV \\<Longrightarrow>\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have \"(\\<lambda>n. (Gromov_extension g) ((Gromov_extension f) (u n))) \\<longlonglongrightarrow> Gromov_extension g ((Gromov_extension f) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)", "using continuous_within_tendsto_compose[OF Gromov_extension_continuous[OF assms(2)] _ *]\n      H Gromov_extension_quasi_isometry_boundary_to_boundary assms(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>Gromov_extension f x \\<in> Gromov_boundary;\n   \\<forall>\\<^sub>F n in sequentially.\n      Gromov_extension f (u n) \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n.\n                        Gromov_extension g (Gromov_extension f (u n)))\n                    \\<longlonglongrightarrow> Gromov_extension g\n         (Gromov_extension f x)\n  x \\<in> Gromov_boundary\n  \\<lbrakk>?lambda ?C -quasi_isometry ?f; ?x \\<in> Gromov_boundary\\<rbrakk>\n  \\<Longrightarrow> Gromov_extension ?f ?x \\<in> Gromov_boundary\n  lambda C -quasi_isometry f\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "using LIMSEQ_unique A comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n  \\<lbrakk>?X \\<longlonglongrightarrow> ?a;\n   ?X \\<longlonglongrightarrow> ?b\\<rbrakk>\n  \\<Longrightarrow> ?a = ?b\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n  ?f \\<circ> ?g = (\\<lambda>x. ?f (?g x))\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) x =\n  (Gromov_extension g \\<circ> Gromov_extension f) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "ultimately"], ["proof (chain)\npicking this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x", "have \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" for x"], ["proof (prove)\nusing this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "using not_in_Gromov_boundary"], ["proof (prove)\nusing this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<notin> Gromov_boundary \\<Longrightarrow>\n  \\<exists>a. ?x = to_Gromov_completion a\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "by force"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "then"], ["proof (chain)\npicking this:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x", "show ?thesis"], ["proof (prove)\nusing this:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) =\n  Gromov_extension g \\<circ> Gromov_extension f\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Now, we turn to the same kind of statement, but for homeomorphisms. We claim that if a\nquasi-isometry $f$ is a homeomorphism on a subset $X$ of the space, then its extension is a\nhomeomorphism on $X$ union the boundary of the space.\nFor the proof, we have to show that a sequence $u_n$ tends to a point $x$\nif and only if $f(u_n)$ tends to $f(x)$. We separate the cases $x$ in the boundary, and $x$ inside\nthe space. For $x$ in the boundary, we use a homeomorphism criterion expressed solely in terms\nof sequences converging to the boundary, for which we already know everything.\nFor $x$ in the space, the proof is straightforward, but tedious.\nWe argue that eventually $u_n$ is in the space for the direct implication, or $f(u_n)$ is in the\nspace for the second implication, and then we use that $f$ is a homeomorphism inside the space to\nconclude.\\<close>"], ["", "lemma Gromov_extension_homeomorphism:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n          \"homeomorphism_on X f\"\n  shows \"homeomorphism_on (to_Gromov_completion`X \\<union> Gromov_boundary) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. homeomorphism_on (to_Gromov_completion ` X \\<union> Gromov_boundary)\n     (Gromov_extension f)", "proof (rule homeomorphism_on_sequentially)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary;\n        \\<forall>n.\n           u n\n           \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "fix x u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary;\n        \\<forall>n.\n           u n\n           \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "assume H0: \"x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\"\n                    \"\\<forall>n::nat. u n \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\""], ["proof (state)\nthis:\n  x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n  \\<forall>n. u n \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary;\n        \\<forall>n.\n           u n\n           \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n  \\<forall>n. u n \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary", "consider \"x \\<in> Gromov_boundary\" | \"x \\<in> to_Gromov_completion`X\""], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n  \\<forall>n. u n \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> Gromov_boundary \\<Longrightarrow> thesis;\n     x \\<in> to_Gromov_completion ` X \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<in> Gromov_boundary \\<Longrightarrow> ?thesis;\n   x \\<in> to_Gromov_completion ` X \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary;\n        \\<forall>n.\n           u n\n           \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>x \\<in> Gromov_boundary \\<Longrightarrow> ?thesis;\n   x \\<in> to_Gromov_completion ` X \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"u \\<longlonglongrightarrow> x = (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<in> Gromov_boundary \\<Longrightarrow> ?thesis;\n   x \\<in> to_Gromov_completion ` X \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof (cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "text \\<open>First, consider the case where the limit point $x$ is in the boundary. We use a good\n    criterion expressing everything in terms of sequences inside the space.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "case 1"], ["proof (state)\nthis:\n  x \\<in> Gromov_boundary\n\ngoal (2 subgoals):\n 1. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof (rule homeomorphism_on_extension_sequentially_precise[of \"range to_Gromov_completion\" Gromov_boundary])"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\n 5. x \\<in> Gromov_boundary", "show \"x \\<in> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Gromov_boundary", "by fact"], ["proof (state)\nthis:\n  x \\<in> Gromov_boundary\n\ngoal (4 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "fix n::nat"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "show \"u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "unfolding Gromov_boundary_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n\n    \\<in> range to_Gromov_completion \\<union>\n          (UNIV - range to_Gromov_completion)", "by auto"], ["proof (state)\nthis:\n  u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix u and b::\"'a Gromov_completion\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume u: \"\\<forall>n. u n \\<in> range to_Gromov_completion\" \"b \\<in> Gromov_boundary\" \"u \\<longlonglongrightarrow> b\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "define v where \"v = (\\<lambda>n. from_Gromov_completion (u n))\""], ["proof (state)\nthis:\n  v = (\\<lambda>n. from_Gromov_completion (u n))\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have v: \"u n = to_Gromov_completion (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "using u(1)"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "unfolding v_def"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (from_Gromov_completion (u n))", "by (simp add: f_inv_into_f from_Gromov_completion_def)"], ["proof (state)\nthis:\n  u ?n = to_Gromov_completion (v ?n)\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "show \"convergent (\\<lambda>n. Gromov_extension f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "using u"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "unfolding v"], ["proof (prove)\nusing this:\n  \\<forall>n. to_Gromov_completion (v n) \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> convergent\n                       (\\<lambda>n. to_Gromov_completion (f (v n)))", "apply (rule Gromov_converging_at_boundary_converges')"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "by (auto simp add: Gromov_converging_at_infinity_quasi_isometry[OF assms(1)] lim_imp_Gromov_converging_at_boundary)"], ["proof (state)\nthis:\n  convergent (\\<lambda>n. Gromov_extension f (u n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix u c"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume u: \"\\<forall>n. u n \\<in> range to_Gromov_completion\" \"c \\<in> Gromov_extension f ` Gromov_boundary\" \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "then"], ["proof (chain)\npicking this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c", "have \"c \\<in> Gromov_boundary\""], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. c \\<in> Gromov_boundary", "using Gromov_extension_quasi_isometry_boundary_to_boundary[OF assms(1)]"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension f ?x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. c \\<in> Gromov_boundary", "by auto"], ["proof (state)\nthis:\n  c \\<in> Gromov_boundary\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "define v where \"v = (\\<lambda>n. from_Gromov_completion (u n))\""], ["proof (state)\nthis:\n  v = (\\<lambda>n. from_Gromov_completion (u n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have v: \"u n = to_Gromov_completion (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "using u(1)"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "unfolding v_def"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (from_Gromov_completion (u n))", "by (simp add: f_inv_into_f from_Gromov_completion_def)"], ["proof (state)\nthis:\n  u ?n = to_Gromov_completion (v ?n)\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have \"Gromov_converging_at_boundary (\\<lambda>n. f (v n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "apply (rule lim_imp_Gromov_converging_at_boundary[OF _ \\<open>c \\<in> Gromov_boundary\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "using u(3)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "unfolding v"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "by auto"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "then"], ["proof (chain)\npicking this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "show \"convergent u\""], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (1 subgoal):\n 1. convergent u", "using u"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. convergent u", "unfolding v"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n  \\<forall>n. to_Gromov_completion (v n) \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. to_Gromov_completion (v n))", "by (auto intro!: Gromov_converging_at_boundary_converges' simp add: Gromov_converging_at_infinity_quasi_isometry[OF assms(1), symmetric])"], ["proof (state)\nthis:\n  convergent u\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix b::\"'a Gromov_completion\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume \"b \\<in> Gromov_boundary\""], ["proof (state)\nthis:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "show \"\\<exists>u. (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and> u \\<longlonglongrightarrow> b \\<and> (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u.\n       (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n       u \\<longlonglongrightarrow> b \\<and>\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f b", "apply (rule exI[of _ \"to_Gromov_completion o (rep_Gromov_completion b)\"], auto simp add: comp_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. to_Gromov_completion (rep_Gromov_completion b x))\n    \\<longlonglongrightarrow> b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_completion_converge_to_boundary[OF \\<open>b \\<in> Gromov_boundary\\<close>]"], ["proof (prove)\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "using Quotient3_abs_rep[OF Quotient3_Gromov_completion] Quotient3_rep_reflp[OF Quotient3_Gromov_completion]"], ["proof (prove)\nusing this:\n  abs_Gromov_completion (rep_Gromov_completion ?a) = ?a\n  Gromov_completion_rel (rep_Gromov_completion ?a)\n   (rep_Gromov_completion ?a)\n\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "apply auto[1]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "using \\<open>b \\<in> Gromov_boundary\\<close>"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "unfolding comp_def"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (\\<lambda>x.\n      to_Gromov_completion (f (rep_Gromov_completion b x)))\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "by (auto simp add: convergent_LIMSEQ_iff[symmetric] Gromov_boundary_rep_converging Gromov_converging_at_infinity_quasi_isometry[OF assms(1)]\n                 intro!: Gromov_converging_at_boundary_converges')"], ["proof (state)\nthis:\n  \\<exists>u.\n     (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n     u \\<longlonglongrightarrow> b \\<and>\n     (\\<lambda>n. Gromov_extension f (u n))\n     \\<longlonglongrightarrow> Gromov_extension f b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "text \\<open>Next, consider the case where $x$ is inside the space. Then we show everything by going\n    back and forth between the original space and its copy in the completion, and arguing that $f$\n    is a homeomorphism on the original space.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "case 2"], ["proof (state)\nthis:\n  x \\<in> to_Gromov_completion ` X\n\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  x \\<in> to_Gromov_completion ` X", "have fx: \"Gromov_extension f x \\<in> range to_Gromov_completion\""], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> range to_Gromov_completion", "using Gromov_extension_inside_space"], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X\n  Gromov_extension ?f (to_Gromov_completion ?x) =\n  to_Gromov_completion (?f ?x)\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> range to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  Gromov_extension f x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "have x: \"x \\<in> range to_Gromov_completion\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> range to_Gromov_completion", "using \"2\""], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X\n\ngoal (1 subgoal):\n 1. x \\<in> range to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. x \\<in> to_Gromov_completion ` X \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "assume H: \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x", "have fu_in: \"eventually (\\<lambda>n. Gromov_extension f (u n) \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Gromov_extension f (u n) \\<in> range to_Gromov_completion", "using fx to_Gromov_completion_range_open H topological_tendstoD"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n  Gromov_extension f x \\<in> range to_Gromov_completion\n  open (range to_Gromov_completion)\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n  \\<lbrakk>(?f \\<longlongrightarrow> ?l) ?F; open ?S; ?l \\<in> ?S\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?f x \\<in> ?S\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Gromov_extension f (u n) \\<in> range to_Gromov_completion", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Gromov_extension f (u n) \\<in> range to_Gromov_completion\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have u_in: \"eventually (\\<lambda>n. u n \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "using Gromov_extension_quasi_isometry_boundary_to_boundary[OF assms(1)] eventually_mono[OF fu_in]"], ["proof (prove)\nusing this:\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension f ?x \\<in> Gromov_boundary\n  (\\<And>x.\n      Gromov_extension f (u x)\n      \\<in> range to_Gromov_completion \\<Longrightarrow>\n      ?Q x) \\<Longrightarrow>\n  eventually ?Q sequentially\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "by (metis DiffE DiffI Gromov_boundary_def iso_tuple_UNIV_I)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have B: \"from_Gromov_completion (Gromov_extension f y) = f (from_Gromov_completion y)\" if \"Gromov_extension f y \\<in> range to_Gromov_completion\" for y"], ["proof (prove)\ngoal (1 subgoal):\n 1. from_Gromov_completion (Gromov_extension f y) =\n    f (from_Gromov_completion y)", "by (metis Gromov_extension_quasi_isometry_boundary_to_boundary Gromov_extension_def assms(1) from_to_Gromov_completion not_in_Gromov_boundary' rangeE that)"], ["proof (state)\nthis:\n  Gromov_extension f ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  from_Gromov_completion (Gromov_extension f ?y) =\n  f (from_Gromov_completion ?y)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have \"(\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n))) \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "by (rule continuous_on_tendsto_compose[OF from_Gromov_completion_continuous(2) H fx fu_in])"], ["proof (state)\nthis:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "have C: \"(\\<lambda>n. f (from_Gromov_completion (u n))) \\<longlonglongrightarrow> f (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> f (from_Gromov_completion x)", "unfolding B[OF fx, symmetric]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "by (force intro: Lim_transform_eventually eventually_mono[OF fu_in B])"], ["proof (state)\nthis:\n  (\\<lambda>n. f (from_Gromov_completion (u n)))\n  \\<longlonglongrightarrow> f (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have \"(\\<lambda>n. from_Gromov_completion (u n)) \\<longlonglongrightarrow> from_Gromov_completion x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. from_Gromov_completion (u n))\n    \\<longlonglongrightarrow> from_Gromov_completion x", "apply (rule iffD2[OF homeomorphism_on_compose[OF assms(2)] C])"], ["proof (prove)\ngoal (2 subgoals):\n 1. from_Gromov_completion x \\<in> X\n 2. \\<forall>\\<^sub>F n in sequentially.\n       from_Gromov_completion (u n) \\<in> X", "using 2"], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X\n\ngoal (2 subgoals):\n 1. from_Gromov_completion x \\<in> X\n 2. \\<forall>\\<^sub>F n in sequentially.\n       from_Gromov_completion (u n) \\<in> X", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x = to_Gromov_completion xa; xa \\<in> X\\<rbrakk>\n       \\<Longrightarrow> \\<forall>\\<^sub>F n in sequentially.\n                            from_Gromov_completion (u n) \\<in> X", "by (metis (no_types, lifting) eventually_mono[OF u_in] H0(2) Un_iff f_inv_into_f from_to_Gromov_completion inv_into_into not_in_Gromov_boundary')"], ["proof (state)\nthis:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x", "have L: \"(\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n))) \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "using continuous_on_tendsto_compose[OF to_Gromov_completion_continuous]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n  \\<lbrakk>(?g \\<longlongrightarrow> ?l) ?F; ?l \\<in> UNIV;\n   \\<forall>\\<^sub>F x in ?F. ?g x \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x.\n                         to_Gromov_completion (?g x)) \\<longlongrightarrow>\n                     to_Gromov_completion ?l)\n                     ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n  \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have **: \"to_Gromov_completion (from_Gromov_completion y) = y\" if \"y \\<in> range to_Gromov_completion\" for y::\"'a Gromov_completion\""], ["proof (prove)\ngoal (1 subgoal):\n 1. to_Gromov_completion (from_Gromov_completion y) = y", "using Gromov_extension_quasi_isometry_boundary_to_boundary assms(1) that to_from_Gromov_completion"], ["proof (prove)\nusing this:\n  \\<lbrakk>?lambda ?C -quasi_isometry ?f; ?x \\<in> Gromov_boundary\\<rbrakk>\n  \\<Longrightarrow> Gromov_extension ?f ?x \\<in> Gromov_boundary\n  lambda C -quasi_isometry f\n  y \\<in> range to_Gromov_completion\n  ?x \\<notin> Gromov_boundary \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?x) = ?x\n\ngoal (1 subgoal):\n 1. to_Gromov_completion (from_Gromov_completion y) = y", "by fastforce"], ["proof (state)\nthis:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y", "have \"eventually (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)) = u n) sequentially\""], ["proof (prove)\nusing this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (from_Gromov_completion (u n)) = u n", "using u_in eventually_mono"], ["proof (prove)\nusing this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n  \\<lbrakk>eventually ?P ?F; \\<And>x. ?P x \\<Longrightarrow> ?Q x\\<rbrakk>\n  \\<Longrightarrow> eventually ?Q ?F\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (from_Gromov_completion (u n)) = u n", "by force"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n", "have \"u \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> to_Gromov_completion\n                                 (from_Gromov_completion x)", "by (rule Lim_transform_eventually[OF L])"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "show \"u \\<longlonglongrightarrow> x\""], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x", "using **"], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x", "by (simp add: x)"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "assume \"u \\<longlonglongrightarrow> x\""], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  u \\<longlonglongrightarrow> x", "have u_in: \"eventually (\\<lambda>n. u n \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "using x to_Gromov_completion_range_open topological_tendstoD"], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> x\n  x \\<in> range to_Gromov_completion\n  open (range to_Gromov_completion)\n  \\<lbrakk>(?f \\<longlongrightarrow> ?l) ?F; open ?S; ?l \\<in> ?S\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?f x \\<in> ?S\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "define y where \"y = from_Gromov_completion x\""], ["proof (state)\nthis:\n  y = from_Gromov_completion x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "have \"y \\<in> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> X", "unfolding y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. from_Gromov_completion x \\<in> X", "using 2"], ["proof (prove)\nusing this:\n  x \\<in> to_Gromov_completion ` X\n\ngoal (1 subgoal):\n 1. from_Gromov_completion x \\<in> X", "by auto"], ["proof (state)\nthis:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  y \\<in> X", "have *: \"continuous (at y within X) f\""], ["proof (prove)\nusing this:\n  y \\<in> X\n\ngoal (1 subgoal):\n 1. continuous (at y within X) f", "using homeomorphism_on_continuous[OF assms(2)] continuous_on_eq_continuous_within"], ["proof (prove)\nusing this:\n  y \\<in> X\n  continuous_on X f\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n\ngoal (1 subgoal):\n 1. continuous (at y within X) f", "by blast"], ["proof (state)\nthis:\n  continuous (at y within X) f\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "have **: \"continuous (at x within to_Gromov_completion`X) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at x within to_Gromov_completion ` X) (Gromov_extension f)", "using Gromov_extension_continuous_inside[OF *] y_def 2"], ["proof (prove)\nusing this:\n  continuous (at (to_Gromov_completion y) within to_Gromov_completion ` X)\n   (Gromov_extension f)\n  y = from_Gromov_completion x\n  x \\<in> to_Gromov_completion ` X\n\ngoal (1 subgoal):\n 1. continuous (at x within to_Gromov_completion ` X) (Gromov_extension f)", "by auto"], ["proof (state)\nthis:\n  continuous (at x within to_Gromov_completion ` X) (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "show \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "apply (rule continuous_within_tendsto_compose[OF ** _ \\<open>u \\<longlonglongrightarrow> x\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n \\<in> to_Gromov_completion ` X", "using u_in H0(2)"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n  \\<forall>n. u n \\<in> to_Gromov_completion ` X \\<union> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially. u n \\<in> to_Gromov_completion ` X", "by (metis (mono_tags, lifting) UnE eventually_mono f_inv_into_f not_in_Gromov_boundary')"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In particular, it follows that the extension to the boundary of a quasi-isometry is always\na homeomorphism, regardless of the continuity properties of the original map.\\<close>"], ["", "proposition Gromov_extension_boundary_homeomorphism:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry f\"\n  shows \"homeomorphism_on Gromov_boundary (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. homeomorphism_on Gromov_boundary (Gromov_extension f)", "using Gromov_extension_homeomorphism[OF assms, of \"{}\"]"], ["proof (prove)\nusing this:\n  homeomorphism_on {} f \\<Longrightarrow>\n  homeomorphism_on (to_Gromov_completion ` {} \\<union> Gromov_boundary)\n   (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. homeomorphism_on Gromov_boundary (Gromov_extension f)", "by auto"], ["", "text \\<open>When the quasi-isometric embedding is a quasi-isometric isomorphism, i.e., it is onto up\nto a bounded distance $C$, then its Gromov extension is onto on the boundary. Indeed, a point\nin the image boundary is a limit of a sequence inside the space. Perturbing by a bounded distance\n(which does not change the asymptotic behavior), it is the limit of a sequence inside the image of\n$f$. Then the preimage under $f$ of this sequence does converge, and its limit is sent by the\nextension on the original point, proving the surjectivity.\\<close>"], ["", "lemma Gromov_extension_onto:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n          \"y \\<in> Gromov_boundary\"\n  shows \"\\<exists>x \\<in> Gromov_boundary. Gromov_extension f x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "define u where \"u = rep_Gromov_completion y\""], ["proof (state)\nthis:\n  u = rep_Gromov_completion y\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "have *: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> y", "unfolding u_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion y n))\n    \\<longlonglongrightarrow> y", "using rep_Gromov_completion_limit"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion ?x n))\n  \\<longlonglongrightarrow> ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion y n))\n    \\<longlonglongrightarrow> y", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> y\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "have \"\\<exists>v. \\<forall>n. dist (f (v n)) (u n) \\<le> C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>v. \\<forall>n. dist (f (v n)) (u n) \\<le> C", "apply (intro choice)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n. \\<exists>y. dist (f y) (u n) \\<le> C", "using quasi_isometry_betweenD(3)[OF assms(1)]"], ["proof (prove)\nusing this:\n  ?y \\<in> UNIV \\<Longrightarrow> \\<exists>x\\<in>UNIV. dist (f x) ?y \\<le> C\n\ngoal (1 subgoal):\n 1. \\<forall>n. \\<exists>y. dist (f y) (u n) \\<le> C", "by auto"], ["proof (state)\nthis:\n  \\<exists>v. \\<forall>n. dist (f (v n)) (u n) \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  \\<exists>v. \\<forall>n. dist (f (v n)) (u n) \\<le> C", "obtain v where v: \"\\<And>n. dist (f (v n)) (u n) \\<le> C\""], ["proof (prove)\nusing this:\n  \\<exists>v. \\<forall>n. dist (f (v n)) (u n) \\<le> C\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        (\\<And>n. dist (f (v n)) (u n) \\<le> C) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  dist (f (v ?n)) (u ?n) \\<le> C\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "have *: \"(\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y", "apply (rule Gromov_converging_at_boundary_bounded_perturbation[OF * \\<open>y \\<in> Gromov_boundary\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n. dist (u n) (f (v n)) \\<le> ?C", "using v"], ["proof (prove)\nusing this:\n  dist (f (v ?n)) (u ?n) \\<le> C\n\ngoal (1 subgoal):\n 1. \\<And>n. dist (u n) (f (v n)) \\<le> ?C", "by (simp add: dist_commute)"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y", "have \"Gromov_converging_at_boundary (\\<lambda>n. f (v n))\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "using assms(2) lim_imp_Gromov_converging_at_boundary"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y\n  y \\<in> Gromov_boundary\n  \\<lbrakk>(\\<lambda>n. to_Gromov_completion (?u n))\n           \\<longlonglongrightarrow> ?x;\n   ?x \\<in> Gromov_boundary\\<rbrakk>\n  \\<Longrightarrow> Gromov_converging_at_boundary ?u\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "by force"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "have \"Gromov_converging_at_boundary v\""], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary v", "using Gromov_converging_at_infinity_quasi_isometry[OF quasi_isometry_betweenD(1)[OF assms(1)]]"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n  Gromov_converging_at_boundary (\\<lambda>n. f (?u n)) =\n  Gromov_converging_at_boundary ?u\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary v", "by auto"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary v\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  Gromov_converging_at_boundary v", "obtain x where \"x \\<in> Gromov_boundary\" \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> x\""], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary v\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> Gromov_boundary;\n         (\\<lambda>n. to_Gromov_completion (v n))\n         \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Gromov_converging_at_boundary_converges"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary v\n  Gromov_converging_at_boundary ?u \\<Longrightarrow>\n  \\<exists>x\\<in>Gromov_boundary.\n     (\\<lambda>n. to_Gromov_completion (?u n)) \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> Gromov_boundary;\n         (\\<lambda>n. to_Gromov_completion (v n))\n         \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  x \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> x", "have \"(\\<lambda>n. (Gromov_extension f) (to_Gromov_completion (v n))) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension f x", "using isCont_tendsto_compose[OF Gromov_extension_continuous[OF quasi_isometry_betweenD(1)[OF assms(1)] \\<open>x \\<in> Gromov_boundary\\<close>]]"], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> x\n  (?f \\<longlongrightarrow> x) ?F \\<Longrightarrow>\n  ((\\<lambda>x. Gromov_extension f (?f x)) \\<longlongrightarrow>\n   Gromov_extension f x)\n   ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension f x", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> Gromov_extension f x", "have \"y = Gromov_extension f x\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. y = Gromov_extension f x", "using * LIMSEQ_unique"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> Gromov_extension f x\n  (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> y\n  \\<lbrakk>?X \\<longlonglongrightarrow> ?a;\n   ?X \\<longlonglongrightarrow> ?b\\<rbrakk>\n  \\<Longrightarrow> ?a = ?b\n\ngoal (1 subgoal):\n 1. y = Gromov_extension f x", "by auto"], ["proof (state)\nthis:\n  y = Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "then"], ["proof (chain)\npicking this:\n  y = Gromov_extension f x", "show ?thesis"], ["proof (prove)\nusing this:\n  y = Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "using \\<open>x \\<in> Gromov_boundary\\<close>"], ["proof (prove)\nusing this:\n  y = Gromov_extension f x\n  x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Gromov_extension_onto':\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n  shows \"(Gromov_extension f)`Gromov_boundary = Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f ` Gromov_boundary = Gromov_boundary", "using Gromov_extension_onto[OF assms] Gromov_extension_quasi_isometry_boundary_to_boundary[OF quasi_isometry_betweenD(1)[OF assms]]"], ["proof (prove)\nusing this:\n  ?y \\<in> Gromov_boundary \\<Longrightarrow>\n  \\<exists>x\\<in>Gromov_boundary. Gromov_extension f x = ?y\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension f ?x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. Gromov_extension f ` Gromov_boundary = Gromov_boundary", "by auto"], ["", "text \\<open>Finally, we obtain that a quasi-isometry between two Gromov hyperbolic spaces induces a\nhomeomorphism of their boundaries.\\<close>"], ["", "theorem Gromov_boundaries_homeomorphic:\n  fixes f::\"'a::Gromov_hyperbolic_space_geodesic \\<Rightarrow> 'b::Gromov_hyperbolic_space_geodesic\"\n  assumes \"lambda C-quasi_isometry_between UNIV UNIV f\"\n  shows \"(Gromov_boundary::'a Gromov_completion set) homeomorphic (Gromov_boundary::'b Gromov_completion set)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_boundary homeomorphic Gromov_boundary", "using Gromov_extension_boundary_homeomorphism[OF quasi_isometry_betweenD(1)[OF assms]] Gromov_extension_onto'[OF assms]"], ["proof (prove)\nusing this:\n  homeomorphism_on Gromov_boundary (Gromov_extension f)\n  Gromov_extension f ` Gromov_boundary = Gromov_boundary\n\ngoal (1 subgoal):\n 1. Gromov_boundary homeomorphic Gromov_boundary", "unfolding homeomorphic_def homeomorphism_on_def"], ["proof (prove)\nusing this:\n  Ex (homeomorphism Gromov_boundary (Gromov_extension f ` Gromov_boundary)\n       (Gromov_extension f))\n  Gromov_extension f ` Gromov_boundary = Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<exists>f g. homeomorphism Gromov_boundary Gromov_boundary f g", "by auto"], ["", "section \\<open>Extensions of isometries to the boundary\\<close>"], ["", "text \\<open>The results of the previous section can be improved for isometries, as there is no need for\ngeodesicity any more. We follow the same proofs as in the previous section\\<close>"], ["", "text \\<open>An isometry preserves the Gromov product.\\<close>"], ["", "lemma Gromov_product_isometry:\n  assumes \"isometry_on UNIV f\"\n  shows \"Gromov_product_at (f x) (f y) (f z) = Gromov_product_at x y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f y) (f z) = Gromov_product_at x y z", "unfolding Gromov_product_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (dist (f x) (f y) + dist (f x) (f z) - dist (f y) (f z)) / 2 =\n    (dist x y + dist x z - dist y z) / 2", "by (simp add: isometry_onD[OF assms])"], ["", "text \\<open>An isometry preserves convergence at infinity.\\<close>"], ["", "lemma Gromov_converging_at_infinity_isometry:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n  shows \"Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<longleftrightarrow> Gromov_converging_at_boundary u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) =\n    Gromov_converging_at_boundary u", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u\n 2. Gromov_converging_at_boundary u \\<Longrightarrow>\n    Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "assume *: \"Gromov_converging_at_boundary u\""], ["proof (state)\nthis:\n  Gromov_converging_at_boundary u\n\ngoal (2 subgoals):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u\n 2. Gromov_converging_at_boundary u \\<Longrightarrow>\n    Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "show \"Gromov_converging_at_boundary (\\<lambda>n. f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n))", "apply (rule Gromov_converging_at_boundaryI[of \"f (basepoint)\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "using *"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary u\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "unfolding Gromov_converging_at_boundary_def Gromov_product_isometry[OF assms]"], ["proof (prove)\nusing this:\n  \\<forall>a M.\n     \\<exists>N.\n        \\<forall>n\\<ge>N.\n           \\<forall>m\\<ge>N. M \\<le> Gromov_product_at a (u m) (u n)\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "by auto"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "assume *: \"Gromov_converging_at_boundary (\\<lambda>n. f (u n))\""], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "have **: \"\\<exists>N. \\<forall>n \\<ge> N. \\<forall>m \\<ge> N. M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\" for M"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N.\n             M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "using *"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N.\n             M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "unfolding Gromov_converging_at_boundary_def"], ["proof (prove)\nusing this:\n  \\<forall>a M.\n     \\<exists>N.\n        \\<forall>n\\<ge>N.\n           \\<forall>m\\<ge>N. M \\<le> Gromov_product_at a (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<forall>m\\<ge>N.\n             M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))", "by auto"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N.\n           ?M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (u n)) \\<Longrightarrow>\n    Gromov_converging_at_boundary u", "show \"Gromov_converging_at_boundary u\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary u", "apply (rule Gromov_converging_at_boundaryI[of \"basepoint\"])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "using **"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N.\n           ?M \\<le> Gromov_product_at (f basepoint) (f (u m)) (f (u n))\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "unfolding Gromov_converging_at_boundary_def Gromov_product_isometry[OF assms]"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N. ?M \\<le> Gromov_product_at basepoint (u m) (u n)\n\ngoal (1 subgoal):\n 1. \\<And>M.\n       \\<exists>N.\n          \\<forall>n\\<ge>N.\n             \\<forall>m\\<ge>N.\n                M \\<le> Gromov_product_at basepoint (u m) (u n)", "by auto"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary u\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The Gromov extension of an isometry sends the boundary to the boundary.\\<close>"], ["", "lemma Gromov_extension_isometry_boundary_to_boundary:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n          \"x \\<in> Gromov_boundary\"\n  shows \"(Gromov_extension f) x \\<in> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "have *: \"Gromov_converging_at_boundary (\\<lambda>n. f (rep_Gromov_completion x n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary\n     (\\<lambda>n. f (rep_Gromov_completion x n))", "by (simp add: Gromov_converging_at_infinity_isometry[OF assms(1)] Gromov_boundary_rep_converging assms(2))"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (rep_Gromov_completion x n))\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> Gromov_boundary", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (to_Gromov_completion \\<circ> f \\<circ>\n               rep_Gromov_completion x)\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "using assms(2)"], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (to_Gromov_completion \\<circ> f \\<circ>\n               rep_Gromov_completion x)\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "unfolding comp_def"], ["proof (prove)\nusing this:\n  x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (if x \\<in> Gromov_boundary\n     then lim (\\<lambda>xa.\n                  to_Gromov_completion (f (rep_Gromov_completion x xa)))\n     else to_Gromov_completion (f (from_Gromov_completion x)))\n    \\<in> Gromov_boundary", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Gromov_boundary \\<Longrightarrow>\n    lim (\\<lambda>xa. to_Gromov_completion (f (rep_Gromov_completion x xa)))\n    \\<in> Gromov_boundary", "by (metis Gromov_converging_at_boundary_converges * limI)"], ["proof (state)\nthis:\n  Gromov_extension f x \\<in> Gromov_boundary\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The Gromov extension of an isometry is a homeomorphism. (We copy the proof for\nquasi-isometries, with some simplifications.)\\<close>"], ["", "lemma Gromov_extension_isometry_homeomorphism:\n  fixes f::\"'a::Gromov_hyperbolic_space \\<Rightarrow> 'b::Gromov_hyperbolic_space\"\n  assumes \"isometry_on UNIV f\"\n  shows \"homeomorphism_on UNIV (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. homeomorphism_on UNIV (Gromov_extension f)", "proof (rule homeomorphism_on_sequentially)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> UNIV; \\<forall>n. u n \\<in> UNIV\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "fix x u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x u.\n       \\<lbrakk>x \\<in> UNIV; \\<forall>n. u n \\<in> UNIV\\<rbrakk>\n       \\<Longrightarrow> u \\<longlonglongrightarrow> x =\n                         (\\<lambda>n. Gromov_extension f (u n))\n                         \\<longlonglongrightarrow> Gromov_extension f x", "show \"u \\<longlonglongrightarrow> x = (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof (cases x)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "text \\<open>First, consider the case where the limit point $x$ is in the boundary. We use a good\n    criterion expressing everything in terms of sequences inside the space.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "case boundary"], ["proof (state)\nthis:\n  x \\<in> Gromov_boundary\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x\n 2. x \\<in> Gromov_boundary \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof (rule homeomorphism_on_extension_sequentially_precise[of \"range to_Gromov_completion\" Gromov_boundary])"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\n 5. x \\<in> Gromov_boundary", "show \"x \\<in> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> Gromov_boundary", "by fact"], ["proof (state)\nthis:\n  x \\<in> Gromov_boundary\n\ngoal (4 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "fix n::nat"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b\n 4. \\<And>n. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "show \"u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary", "unfolding Gromov_boundary_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n\n    \\<in> range to_Gromov_completion \\<union>\n          (UNIV - range to_Gromov_completion)", "by auto"], ["proof (state)\nthis:\n  u n \\<in> range to_Gromov_completion \\<union> Gromov_boundary\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix u and b::\"'a Gromov_completion\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume u: \"\\<forall>n. u n \\<in> range to_Gromov_completion\" \"b \\<in> Gromov_boundary\" \"u \\<longlonglongrightarrow> b\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "define v where \"v = (\\<lambda>n. from_Gromov_completion (u n))\""], ["proof (state)\nthis:\n  v = (\\<lambda>n. from_Gromov_completion (u n))\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have v: \"u n = to_Gromov_completion (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "using u(1)"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "unfolding v_def"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (from_Gromov_completion (u n))", "by (simp add: f_inv_into_f from_Gromov_completion_def)"], ["proof (state)\nthis:\n  u ?n = to_Gromov_completion (v ?n)\n\ngoal (3 subgoals):\n 1. \\<And>u b.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        b \\<in> Gromov_boundary; u \\<longlonglongrightarrow> b\\<rbrakk>\n       \\<Longrightarrow> convergent (\\<lambda>n. Gromov_extension f (u n))\n 2. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 3. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "show \"convergent (\\<lambda>n. Gromov_extension f (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "using u"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  u \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (u n))", "unfolding v"], ["proof (prove)\nusing this:\n  \\<forall>n. to_Gromov_completion (v n) \\<in> range to_Gromov_completion\n  b \\<in> Gromov_boundary\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> b\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> convergent\n                       (\\<lambda>n. to_Gromov_completion (f (v n)))", "apply (rule Gromov_converging_at_boundary_converges')"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>b \\<in> Gromov_boundary;\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> b\\<rbrakk>\n    \\<Longrightarrow> Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "by (auto simp add: Gromov_converging_at_infinity_isometry[OF assms(1)] lim_imp_Gromov_converging_at_boundary)"], ["proof (state)\nthis:\n  convergent (\\<lambda>n. Gromov_extension f (u n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix u c"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume u: \"\\<forall>n. u n \\<in> range to_Gromov_completion\" \"c \\<in> Gromov_extension f ` Gromov_boundary\" \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\""], ["proof (state)\nthis:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "then"], ["proof (chain)\npicking this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c", "have \"c \\<in> Gromov_boundary\""], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. c \\<in> Gromov_boundary", "using Gromov_extension_isometry_boundary_to_boundary[OF assms(1)]"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension f ?x \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. c \\<in> Gromov_boundary", "by auto"], ["proof (state)\nthis:\n  c \\<in> Gromov_boundary\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "define v where \"v = (\\<lambda>n. from_Gromov_completion (u n))\""], ["proof (state)\nthis:\n  v = (\\<lambda>n. from_Gromov_completion (u n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have v: \"u n = to_Gromov_completion (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "using u(1)"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (v n)", "unfolding v_def"], ["proof (prove)\nusing this:\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u n = to_Gromov_completion (from_Gromov_completion (u n))", "by (simp add: f_inv_into_f from_Gromov_completion_def)"], ["proof (state)\nthis:\n  u ?n = to_Gromov_completion (v ?n)\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "have \"Gromov_converging_at_boundary (\\<lambda>n. f (v n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "apply (rule lim_imp_Gromov_converging_at_boundary[OF _ \\<open>c \\<in> Gromov_boundary\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "using u(3)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "unfolding v"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (v n))) \\<longlonglongrightarrow> c", "by auto"], ["proof (state)\nthis:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (2 subgoals):\n 1. \\<And>u c.\n       \\<lbrakk>\\<forall>n. u n \\<in> range to_Gromov_completion;\n        c \\<in> Gromov_extension f ` Gromov_boundary;\n        (\\<lambda>n. Gromov_extension f (u n))\n        \\<longlonglongrightarrow> c\\<rbrakk>\n       \\<Longrightarrow> convergent u\n 2. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "then"], ["proof (chain)\npicking this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))", "show \"convergent u\""], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n\ngoal (1 subgoal):\n 1. convergent u", "using u"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n  \\<forall>n. u n \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. convergent u", "unfolding v"], ["proof (prove)\nusing this:\n  Gromov_converging_at_boundary (\\<lambda>n. f (v n))\n  \\<forall>n. to_Gromov_completion (v n) \\<in> range to_Gromov_completion\n  c \\<in> Gromov_extension f ` Gromov_boundary\n  (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n  \\<longlonglongrightarrow> c\n\ngoal (1 subgoal):\n 1. convergent (\\<lambda>n. to_Gromov_completion (v n))", "by (auto intro!: Gromov_converging_at_boundary_converges' simp add: Gromov_converging_at_infinity_isometry[OF assms(1), symmetric])"], ["proof (state)\nthis:\n  convergent u\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "fix b::\"'a Gromov_completion\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "assume \"b \\<in> Gromov_boundary\""], ["proof (state)\nthis:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       b \\<in> Gromov_boundary \\<Longrightarrow>\n       \\<exists>u.\n          (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n          u \\<longlonglongrightarrow> b \\<and>\n          (\\<lambda>n. Gromov_extension f (u n))\n          \\<longlonglongrightarrow> Gromov_extension f b", "show \"\\<exists>u. (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and> u \\<longlonglongrightarrow> b \\<and> (\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>u.\n       (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n       u \\<longlonglongrightarrow> b \\<and>\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f b", "apply (rule exI[of _ \"to_Gromov_completion o (rep_Gromov_completion b)\"], auto simp add: comp_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. to_Gromov_completion (rep_Gromov_completion b x))\n    \\<longlonglongrightarrow> b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_completion_converge_to_boundary[OF \\<open>b \\<in> Gromov_boundary\\<close>]"], ["proof (prove)\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "using Quotient3_abs_rep[OF Quotient3_Gromov_completion] Quotient3_rep_reflp[OF Quotient3_Gromov_completion]"], ["proof (prove)\nusing this:\n  abs_Gromov_completion (rep_Gromov_completion ?a) = ?a\n  Gromov_completion_rel (rep_Gromov_completion ?a)\n   (rep_Gromov_completion ?a)\n\ngoal (2 subgoals):\n 1. Gromov_completion_rel (rep_Gromov_completion b)\n     (rep_Gromov_completion b) \\<and>\n    abs_Gromov_completion (rep_Gromov_completion b) = b\n 2. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "apply auto[1]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> Gromov_extension f b", "unfolding Gromov_extension_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "using \\<open>b \\<in> Gromov_boundary\\<close>"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (to_Gromov_completion \\<circ>\n   f \\<circ>\n   rep_Gromov_completion b)\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "unfolding comp_def"], ["proof (prove)\nusing this:\n  b \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (f (rep_Gromov_completion b n)))\n    \\<longlonglongrightarrow> (if b \\<in> Gromov_boundary\n                               then lim (\\<lambda>x.\n      to_Gromov_completion (f (rep_Gromov_completion b x)))\n                               else to_Gromov_completion\n                                     (f (from_Gromov_completion b)))", "by (auto simp add: convergent_LIMSEQ_iff[symmetric] Gromov_boundary_rep_converging Gromov_converging_at_infinity_isometry[OF assms(1)]\n                 intro!: Gromov_converging_at_boundary_converges')"], ["proof (state)\nthis:\n  \\<exists>u.\n     (\\<forall>n. u n \\<in> range to_Gromov_completion) \\<and>\n     u \\<longlonglongrightarrow> b \\<and>\n     (\\<lambda>n. Gromov_extension f (u n))\n     \\<longlonglongrightarrow> Gromov_extension f b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "text \\<open>Next, consider the case where $x$ is inside the space. Then we show everything by going\n    back and forth between the original space and its copy in the completion, and arguing that $f$\n    is a homeomorphism on the original space.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "case (to_Gromov_completion xin)"], ["proof (state)\nthis:\n  x = to_Gromov_completion xin\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  x = to_Gromov_completion xin", "have fx: \"Gromov_extension f x \\<in> range to_Gromov_completion\""], ["proof (prove)\nusing this:\n  x = to_Gromov_completion xin\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> range to_Gromov_completion", "using Gromov_extension_inside_space"], ["proof (prove)\nusing this:\n  x = to_Gromov_completion xin\n  Gromov_extension ?f (to_Gromov_completion ?x) =\n  to_Gromov_completion (?f ?x)\n\ngoal (1 subgoal):\n 1. Gromov_extension f x \\<in> range to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  Gromov_extension f x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "have x: \"x \\<in> range to_Gromov_completion\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> range to_Gromov_completion", "using to_Gromov_completion"], ["proof (prove)\nusing this:\n  x = to_Gromov_completion xin\n\ngoal (1 subgoal):\n 1. x \\<in> range to_Gromov_completion", "by blast"], ["proof (state)\nthis:\n  x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       x = to_Gromov_completion xa \\<Longrightarrow>\n       u \\<longlonglongrightarrow> x =\n       (\\<lambda>n. Gromov_extension f (u n))\n       \\<longlonglongrightarrow> Gromov_extension f x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x =\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "assume H: \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x", "have fu_in: \"eventually (\\<lambda>n. Gromov_extension f (u n) \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Gromov_extension f (u n) \\<in> range to_Gromov_completion", "using fx to_Gromov_completion_range_open H topological_tendstoD"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n  Gromov_extension f x \\<in> range to_Gromov_completion\n  open (range to_Gromov_completion)\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n  \\<lbrakk>(?f \\<longlongrightarrow> ?l) ?F; open ?S; ?l \\<in> ?S\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?f x \\<in> ?S\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Gromov_extension f (u n) \\<in> range to_Gromov_completion", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Gromov_extension f (u n) \\<in> range to_Gromov_completion\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have u_in: \"eventually (\\<lambda>n. u n \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "using Gromov_extension_isometry_boundary_to_boundary[OF assms(1)] eventually_mono[OF fu_in]"], ["proof (prove)\nusing this:\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension f ?x \\<in> Gromov_boundary\n  (\\<And>x.\n      Gromov_extension f (u x)\n      \\<in> range to_Gromov_completion \\<Longrightarrow>\n      ?Q x) \\<Longrightarrow>\n  eventually ?Q sequentially\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "by (metis DiffE DiffI Gromov_boundary_def iso_tuple_UNIV_I)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have B: \"from_Gromov_completion (Gromov_extension f y) = f (from_Gromov_completion y)\" if \"Gromov_extension f y \\<in> range to_Gromov_completion\" for y"], ["proof (prove)\ngoal (1 subgoal):\n 1. from_Gromov_completion (Gromov_extension f y) =\n    f (from_Gromov_completion y)", "by (metis Gromov_extension_isometry_boundary_to_boundary Gromov_extension_def assms(1) from_to_Gromov_completion not_in_Gromov_boundary' rangeE that)"], ["proof (state)\nthis:\n  Gromov_extension f ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  from_Gromov_completion (Gromov_extension f ?y) =\n  f (from_Gromov_completion ?y)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have \"(\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n))) \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "by (rule continuous_on_tendsto_compose[OF from_Gromov_completion_continuous(2) H fx fu_in])"], ["proof (state)\nthis:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "have C: \"(\\<lambda>n. f (from_Gromov_completion (u n))) \\<longlonglongrightarrow> f (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> f (from_Gromov_completion x)", "unfolding B[OF fx, symmetric]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. f (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> from_Gromov_completion (Gromov_extension f x)", "by (force intro: Lim_transform_eventually eventually_mono[OF fu_in B])"], ["proof (state)\nthis:\n  (\\<lambda>n. f (from_Gromov_completion (u n)))\n  \\<longlonglongrightarrow> f (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have \"(\\<lambda>n. from_Gromov_completion (u n)) \\<longlonglongrightarrow> from_Gromov_completion x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. from_Gromov_completion (u n))\n    \\<longlonglongrightarrow> from_Gromov_completion x", "apply (rule iffD2[OF homeomorphism_on_compose[OF isometry_on_homeomorphism(2)[OF assms]] C])"], ["proof (prove)\ngoal (2 subgoals):\n 1. from_Gromov_completion x \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       from_Gromov_completion (u n) \\<in> UNIV", "using to_Gromov_completion"], ["proof (prove)\nusing this:\n  x = to_Gromov_completion xin\n\ngoal (2 subgoals):\n 1. from_Gromov_completion x \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       from_Gromov_completion (u n) \\<in> UNIV", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x", "have L: \"(\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n))) \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "using continuous_on_tendsto_compose[OF to_Gromov_completion_continuous]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. from_Gromov_completion (u n))\n  \\<longlonglongrightarrow> from_Gromov_completion x\n  \\<lbrakk>(?g \\<longlongrightarrow> ?l) ?F; ?l \\<in> UNIV;\n   \\<forall>\\<^sub>F x in ?F. ?g x \\<in> UNIV\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x.\n                         to_Gromov_completion (?g x)) \\<longlongrightarrow>\n                     to_Gromov_completion ?l)\n                     ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)))\n  \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "have **: \"to_Gromov_completion (from_Gromov_completion y) = y\" if \"y \\<in> range to_Gromov_completion\" for y::\"'a Gromov_completion\""], ["proof (prove)\ngoal (1 subgoal):\n 1. to_Gromov_completion (from_Gromov_completion y) = y", "using Gromov_extension_isometry_boundary_to_boundary assms(1) that to_from_Gromov_completion"], ["proof (prove)\nusing this:\n  \\<lbrakk>isometry_on UNIV ?f; ?x \\<in> Gromov_boundary\\<rbrakk>\n  \\<Longrightarrow> Gromov_extension ?f ?x \\<in> Gromov_boundary\n  isometry_on UNIV f\n  y \\<in> range to_Gromov_completion\n  ?x \\<notin> Gromov_boundary \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?x) = ?x\n\ngoal (1 subgoal):\n 1. to_Gromov_completion (from_Gromov_completion y) = y", "by fastforce"], ["proof (state)\nthis:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y", "have \"eventually (\\<lambda>n. to_Gromov_completion (from_Gromov_completion (u n)) = u n) sequentially\""], ["proof (prove)\nusing this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (from_Gromov_completion (u n)) = u n", "using u_in eventually_mono"], ["proof (prove)\nusing this:\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n  \\<lbrakk>eventually ?P ?F; \\<And>x. ?P x \\<Longrightarrow> ?Q x\\<rbrakk>\n  \\<Longrightarrow> eventually ?Q ?F\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (from_Gromov_completion (u n)) = u n", "by force"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n", "have \"u \\<longlonglongrightarrow> to_Gromov_completion (from_Gromov_completion x)\""], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially.\n     to_Gromov_completion (from_Gromov_completion (u n)) = u n\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> to_Gromov_completion\n                                 (from_Gromov_completion x)", "by (rule Lim_transform_eventually[OF L])"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x\n 2. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x \\<Longrightarrow>\n    u \\<longlonglongrightarrow> x", "then"], ["proof (chain)\npicking this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)", "show \"u \\<longlonglongrightarrow> x\""], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x", "using **"], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> to_Gromov_completion\n                               (from_Gromov_completion x)\n  ?y \\<in> range to_Gromov_completion \\<Longrightarrow>\n  to_Gromov_completion (from_Gromov_completion ?y) = ?y\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x", "by (simp add: x)"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "assume \"u \\<longlonglongrightarrow> x\""], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  u \\<longlonglongrightarrow> x", "have u_in: \"eventually (\\<lambda>n. u n \\<in> range to_Gromov_completion) sequentially\""], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "using x to_Gromov_completion_range_open topological_tendstoD"], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> x\n  x \\<in> range to_Gromov_completion\n  open (range to_Gromov_completion)\n  \\<lbrakk>(?f \\<longlongrightarrow> ?l) ?F; open ?S; ?l \\<in> ?S\\<rbrakk>\n  \\<Longrightarrow> \\<forall>\\<^sub>F x in ?F. ?f x \\<in> ?S\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "by fastforce"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "define y where \"y = from_Gromov_completion x\""], ["proof (state)\nthis:\n  y = from_Gromov_completion x\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "then"], ["proof (chain)\npicking this:\n  y = from_Gromov_completion x", "have *: \"continuous (at y) f\""], ["proof (prove)\nusing this:\n  y = from_Gromov_completion x\n\ngoal (1 subgoal):\n 1. isCont f y", "using homeomorphism_on_continuous[OF isometry_on_homeomorphism(2)[OF assms]] continuous_on_eq_continuous_within"], ["proof (prove)\nusing this:\n  y = from_Gromov_completion x\n  continuous_on UNIV f\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n\ngoal (1 subgoal):\n 1. isCont f y", "by blast"], ["proof (state)\nthis:\n  isCont f y\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "have **: \"continuous (at x within to_Gromov_completion`UNIV) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at x within range to_Gromov_completion) (Gromov_extension f)", "using Gromov_extension_continuous_inside[OF *] y_def to_Gromov_completion"], ["proof (prove)\nusing this:\n  continuous (at (to_Gromov_completion y) within range to_Gromov_completion)\n   (Gromov_extension f)\n  y = from_Gromov_completion x\n  x = to_Gromov_completion xin\n\ngoal (1 subgoal):\n 1. continuous (at x within range to_Gromov_completion) (Gromov_extension f)", "by auto"], ["proof (state)\nthis:\n  continuous (at x within range to_Gromov_completion) (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. u \\<longlonglongrightarrow> x \\<Longrightarrow>\n    (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "show \"(\\<lambda>n. Gromov_extension f (u n)) \\<longlonglongrightarrow> Gromov_extension f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "apply (rule continuous_within_tendsto_compose[OF ** _ \\<open>u \\<longlonglongrightarrow> x\\<close>])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "using u_in"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F n in sequentially. u n \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       u n \\<in> range to_Gromov_completion", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> x =\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The composition of the Gromov extension of two isometries is the Gromov extension of the\ncomposition.\\<close>"], ["", "lemma Gromov_extension_isometry_on_composition:\n  assumes \"isometry_on UNIV f\"\n          \"isometry_on UNIV g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "have In: \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" if H: \"x \\<in> range to_Gromov_completion\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "obtain y where *: \"x = to_Gromov_completion y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x = to_Gromov_completion y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using H"], ["proof (prove)\nusing this:\n  x \\<in> range to_Gromov_completion\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x = to_Gromov_completion y \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x = to_Gromov_completion y\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "unfolding * comp_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (\\<lambda>x. g (f x)) (to_Gromov_completion y) =\n    Gromov_extension g (Gromov_extension f (to_Gromov_completion y))", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) x =\n  (Gromov_extension g \\<circ> Gromov_extension f) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "moreover"], ["proof (state)\nthis:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "have \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" if H: \"x \\<in> Gromov_boundary\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "obtain u where u: \"\\<And>n. u n \\<in> range to_Gromov_completion\" \"u \\<longlonglongrightarrow> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>\\<And>n. u n \\<in> range to_Gromov_completion;\n         u \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using closure_sequential to_Gromov_completion_range_dense"], ["proof (prove)\nusing this:\n  (?l \\<in> closure ?S) =\n  (\\<exists>x.\n      (\\<forall>n. x n \\<in> ?S) \\<and> x \\<longlonglongrightarrow> ?l)\n  closure (range to_Gromov_completion) = UNIV\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        \\<lbrakk>\\<And>n. u n \\<in> range to_Gromov_completion;\n         u \\<longlonglongrightarrow> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  u ?n \\<in> range to_Gromov_completion\n  u \\<longlonglongrightarrow> x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have \"(\\<lambda>n. Gromov_extension (g o f) (u n)) \\<longlonglongrightarrow> Gromov_extension (g o f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "apply (rule continuous_within_tendsto_compose[OF _ _ u(2), of UNIV])"], ["proof (prove)\ngoal (2 subgoals):\n 1. isCont (Gromov_extension (g \\<circ> f)) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "using homeomorphism_on_continuous[OF Gromov_extension_isometry_homeomorphism[OF isometry_on_compose[OF assms(1) isometry_on_subset[OF assms(2)]]]]"], ["proof (prove)\nusing this:\n  range f \\<subseteq> UNIV \\<Longrightarrow>\n  continuous_on UNIV (Gromov_extension (\\<lambda>x. g (f x)))\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension (g \\<circ> f)) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "unfolding comp_def"], ["proof (prove)\nusing this:\n  range f \\<subseteq> UNIV \\<Longrightarrow>\n  continuous_on UNIV (Gromov_extension (\\<lambda>x. g (f x)))\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension (\\<lambda>a. g (f a))) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "by (auto simp add: continuous_on_eq_continuous_within)"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "have A: \"(\\<lambda>n. (Gromov_extension g) ((Gromov_extension f) (u n))) \\<longlonglongrightarrow> Gromov_extension (g o f) x\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension (g \\<circ> f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "unfolding In[OF u(1)]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. (Gromov_extension g \\<circ> Gromov_extension f) (u n))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x", "unfolding comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (\\<lambda>x. g (f x)) x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (\\<lambda>x. g (f x)) x", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have *: \"(\\<lambda>n. (Gromov_extension f) (u n)) \\<longlonglongrightarrow> (Gromov_extension f) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (u n))\n    \\<longlonglongrightarrow> Gromov_extension f x", "apply (rule continuous_within_tendsto_compose[OF _ _ u(2), of UNIV])"], ["proof (prove)\ngoal (2 subgoals):\n 1. isCont (Gromov_extension f) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "using homeomorphism_on_continuous[OF Gromov_extension_isometry_homeomorphism[OF assms(1)]]"], ["proof (prove)\nusing this:\n  continuous_on UNIV (Gromov_extension f)\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension f) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "unfolding comp_def"], ["proof (prove)\nusing this:\n  continuous_on UNIV (Gromov_extension f)\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension f) x\n 2. \\<forall>\\<^sub>F n in sequentially. u n \\<in> UNIV", "by (auto simp add: continuous_on_eq_continuous_within)"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension f (u n))\n  \\<longlonglongrightarrow> Gromov_extension f x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "have \"(\\<lambda>n. (Gromov_extension g) ((Gromov_extension f) (u n))) \\<longlonglongrightarrow> Gromov_extension g ((Gromov_extension f) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n    \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)", "apply (rule continuous_within_tendsto_compose[OF _ _ *, of UNIV])"], ["proof (prove)\ngoal (2 subgoals):\n 1. isCont (Gromov_extension g) (Gromov_extension f x)\n 2. \\<forall>\\<^sub>F n in sequentially. Gromov_extension f (u n) \\<in> UNIV", "using homeomorphism_on_continuous[OF Gromov_extension_isometry_homeomorphism[OF assms(2)]]"], ["proof (prove)\nusing this:\n  continuous_on UNIV (Gromov_extension g)\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension g) (Gromov_extension f x)\n 2. \\<forall>\\<^sub>F n in sequentially. Gromov_extension f (u n) \\<in> UNIV", "unfolding comp_def"], ["proof (prove)\nusing this:\n  continuous_on UNIV (Gromov_extension g)\n\ngoal (2 subgoals):\n 1. isCont (Gromov_extension g) (Gromov_extension f x)\n 2. \\<forall>\\<^sub>F n in sequentially. Gromov_extension f (u n) \\<in> UNIV", "by (auto simp add: continuous_on_eq_continuous_within)"], ["proof (state)\nthis:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "using LIMSEQ_unique A comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension g (Gromov_extension f x)\n  \\<lbrakk>?X \\<longlonglongrightarrow> ?a;\n   ?X \\<longlonglongrightarrow> ?b\\<rbrakk>\n  \\<Longrightarrow> ?a = ?b\n  (\\<lambda>n. Gromov_extension g (Gromov_extension f (u n)))\n  \\<longlonglongrightarrow> Gromov_extension (g \\<circ> f) x\n  ?f \\<circ> ?g = (\\<lambda>x. ?f (?g x))\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) x =\n  (Gromov_extension g \\<circ> Gromov_extension f) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "ultimately"], ["proof (chain)\npicking this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x", "have \"Gromov_extension (g o f) x = (Gromov_extension g o Gromov_extension f) x\" for x"], ["proof (prove)\nusing this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "using not_in_Gromov_boundary"], ["proof (prove)\nusing this:\n  ?x \\<in> range to_Gromov_completion \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<in> Gromov_boundary \\<Longrightarrow>\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n  ?x \\<notin> Gromov_boundary \\<Longrightarrow>\n  \\<exists>a. ?x = to_Gromov_completion a\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) x =\n    (Gromov_extension g \\<circ> Gromov_extension f) x", "by force"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "then"], ["proof (chain)\npicking this:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x", "show ?thesis"], ["proof (prove)\nusing this:\n  Gromov_extension (g \\<circ> f) ?x =\n  (Gromov_extension g \\<circ> Gromov_extension f) ?x\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (g \\<circ> f) =\n  Gromov_extension g \\<circ> Gromov_extension f\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We specialize the previous results to bijective isometries, as this is the setting where they\nwill be used most of the time.\\<close>"], ["", "lemma Gromov_extension_isometry:\n  assumes \"isometry f\"\n  shows \"homeomorphism_on UNIV (Gromov_extension f)\"\n        \"continuous_on UNIV (Gromov_extension f)\"\n        \"continuous (at x) (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. homeomorphism_on UNIV (Gromov_extension f) &&&\n    continuous_on UNIV (Gromov_extension f) &&&\n    isCont (Gromov_extension f) x", "using Gromov_extension_isometry_homeomorphism[OF isometryD(1)[OF assms]] homeomorphism_on_continuous"], ["proof (prove)\nusing this:\n  homeomorphism_on UNIV (Gromov_extension f)\n  homeomorphism_on ?S ?f \\<Longrightarrow> continuous_on ?S ?f\n\ngoal (1 subgoal):\n 1. homeomorphism_on UNIV (Gromov_extension f) &&&\n    continuous_on UNIV (Gromov_extension f) &&&\n    isCont (Gromov_extension f) x", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>homeomorphism_on UNIV (Gromov_extension f);\n     \\<And>S f.\n        homeomorphism_on S f \\<Longrightarrow> continuous_on S f\\<rbrakk>\n    \\<Longrightarrow> isCont (Gromov_extension f) x", "using \\<open>homeomorphism_on UNIV (Gromov_extension f)\\<close> continuous_on_eq_continuous_within homeomorphism_on_continuous"], ["proof (prove)\nusing this:\n  homeomorphism_on UNIV (Gromov_extension f)\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n  homeomorphism_on ?S ?f \\<Longrightarrow> continuous_on ?S ?f\n\ngoal (1 subgoal):\n 1. \\<lbrakk>homeomorphism_on UNIV (Gromov_extension f);\n     \\<And>S f.\n        homeomorphism_on S f \\<Longrightarrow> continuous_on S f\\<rbrakk>\n    \\<Longrightarrow> isCont (Gromov_extension f) x", "by blast"], ["", "lemma Gromov_extension_isometry_composition:\n  assumes \"isometry f\"\n          \"isometry g\"\n  shows \"Gromov_extension (g o f) = Gromov_extension g o Gromov_extension f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "using Gromov_extension_isometry_on_composition[OF isometryD(1)[OF assms(1)] isometryD(1)[OF assms(2)]]"], ["proof (prove)\nusing this:\n  Gromov_extension (g \\<circ> f) =\n  Gromov_extension g \\<circ> Gromov_extension f\n\ngoal (1 subgoal):\n 1. Gromov_extension (g \\<circ> f) =\n    Gromov_extension g \\<circ> Gromov_extension f", "by simp"], ["", "lemma Gromov_extension_isometry_iterates:\n  fixes f::\"'a \\<Rightarrow> ('a::Gromov_hyperbolic_space)\"\n  assumes \"isometry f\"\n  shows \"Gromov_extension (f^^n) = (Gromov_extension f)^^n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (f ^^ n) = Gromov_extension f ^^ n", "apply (induction n)"], ["proof (prove)\ngoal (2 subgoals):\n 1. Gromov_extension (f ^^ 0) = Gromov_extension f ^^ 0\n 2. \\<And>n.\n       Gromov_extension (f ^^ n) = Gromov_extension f ^^ n \\<Longrightarrow>\n       Gromov_extension (f ^^ Suc n) = Gromov_extension f ^^ Suc n", "using Gromov_extension_isometry_composition[OF isometry_iterates[OF assms] assms]"], ["proof (prove)\nusing this:\n  Gromov_extension (f \\<circ> f ^^ ?n1) =\n  Gromov_extension f \\<circ> Gromov_extension (f ^^ ?n1)\n\ngoal (2 subgoals):\n 1. Gromov_extension (f ^^ 0) = Gromov_extension f ^^ 0\n 2. \\<And>n.\n       Gromov_extension (f ^^ n) = Gromov_extension f ^^ n \\<Longrightarrow>\n       Gromov_extension (f ^^ Suc n) = Gromov_extension f ^^ Suc n", "unfolding comp_def"], ["proof (prove)\nusing this:\n  Gromov_extension (\\<lambda>x. f ((f ^^ ?n1) x)) =\n  (\\<lambda>x. Gromov_extension f (Gromov_extension (f ^^ ?n1) x))\n\ngoal (2 subgoals):\n 1. Gromov_extension (f ^^ 0) = Gromov_extension f ^^ 0\n 2. \\<And>n.\n       Gromov_extension (f ^^ n) = Gromov_extension f ^^ n \\<Longrightarrow>\n       Gromov_extension (f ^^ Suc n) = Gromov_extension f ^^ Suc n", "by auto"], ["", "lemma Gromov_extension_isometry_inv:\n  assumes \"isometry f\"\n  shows \"inv (Gromov_extension f) = Gromov_extension (inv f)\"\n        \"bij (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f) &&&\n    bij (Gromov_extension f)", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "have *: \"(inv f) o f = id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv f \\<circ> f = id", "using isometry_inverse(2)[OF assms]"], ["proof (prove)\nusing this:\n  bij f\n\ngoal (1 subgoal):\n 1. inv f \\<circ> f = id", "by (simp add: bij_is_inj)"], ["proof (state)\nthis:\n  inv f \\<circ> f = id\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "have \"Gromov_extension ((inv f) o f) = Gromov_extension (inv f) o Gromov_extension f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (inv f \\<circ> f) =\n    Gromov_extension (inv f) \\<circ> Gromov_extension f", "by (rule Gromov_extension_isometry_composition[OF assms isometry_inverse(1)[OF assms]])"], ["proof (state)\nthis:\n  Gromov_extension (inv f \\<circ> f) =\n  Gromov_extension (inv f) \\<circ> Gromov_extension f\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "then"], ["proof (chain)\npicking this:\n  Gromov_extension (inv f \\<circ> f) =\n  Gromov_extension (inv f) \\<circ> Gromov_extension f", "have A: \"Gromov_extension (inv f) o Gromov_extension f = id\""], ["proof (prove)\nusing this:\n  Gromov_extension (inv f \\<circ> f) =\n  Gromov_extension (inv f) \\<circ> Gromov_extension f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) \\<circ> Gromov_extension f = id", "unfolding *"], ["proof (prove)\nusing this:\n  Gromov_extension id = Gromov_extension (inv f) \\<circ> Gromov_extension f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) \\<circ> Gromov_extension f = id", "by auto"], ["proof (state)\nthis:\n  Gromov_extension (inv f) \\<circ> Gromov_extension f = id\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "have *: \"f o (inv f) = id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<circ> inv f = id", "using isometry_inverse(2)[OF assms]"], ["proof (prove)\nusing this:\n  bij f\n\ngoal (1 subgoal):\n 1. f \\<circ> inv f = id", "by (meson bij_is_surj surj_iff)"], ["proof (state)\nthis:\n  f \\<circ> inv f = id\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "have \"Gromov_extension (f o (inv f)) = Gromov_extension f o Gromov_extension (inv f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (f \\<circ> inv f) =\n    Gromov_extension f \\<circ> Gromov_extension (inv f)", "by (rule Gromov_extension_isometry_composition[OF isometry_inverse(1)[OF assms] assms])"], ["proof (state)\nthis:\n  Gromov_extension (f \\<circ> inv f) =\n  Gromov_extension f \\<circ> Gromov_extension (inv f)\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "then"], ["proof (chain)\npicking this:\n  Gromov_extension (f \\<circ> inv f) =\n  Gromov_extension f \\<circ> Gromov_extension (inv f)", "have B: \"Gromov_extension f o Gromov_extension (inv f) = id\""], ["proof (prove)\nusing this:\n  Gromov_extension (f \\<circ> inv f) =\n  Gromov_extension f \\<circ> Gromov_extension (inv f)\n\ngoal (1 subgoal):\n 1. Gromov_extension f \\<circ> Gromov_extension (inv f) = id", "unfolding *"], ["proof (prove)\nusing this:\n  Gromov_extension id = Gromov_extension f \\<circ> Gromov_extension (inv f)\n\ngoal (1 subgoal):\n 1. Gromov_extension f \\<circ> Gromov_extension (inv f) = id", "by auto"], ["proof (state)\nthis:\n  Gromov_extension f \\<circ> Gromov_extension (inv f) = id\n\ngoal (2 subgoals):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)\n 2. bij (Gromov_extension f)", "show \"bij (Gromov_extension f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij (Gromov_extension f)", "using A B"], ["proof (prove)\nusing this:\n  Gromov_extension (inv f) \\<circ> Gromov_extension f = id\n  Gromov_extension f \\<circ> Gromov_extension (inv f) = id\n\ngoal (1 subgoal):\n 1. bij (Gromov_extension f)", "unfolding bij_def"], ["proof (prove)\nusing this:\n  Gromov_extension (inv f) \\<circ> Gromov_extension f = id\n  Gromov_extension f \\<circ> Gromov_extension (inv f) = id\n\ngoal (1 subgoal):\n 1. inj (Gromov_extension f) \\<and> surj (Gromov_extension f)", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>Gromov_extension (inv f) \\<circ> Gromov_extension f = id;\n     Gromov_extension f \\<circ> Gromov_extension (inv f) = id\\<rbrakk>\n    \\<Longrightarrow> inj (Gromov_extension f)\n 2. \\<And>x.\n       \\<lbrakk>Gromov_extension (inv f) \\<circ> Gromov_extension f = id;\n        Gromov_extension f \\<circ> Gromov_extension (inv f) = id\\<rbrakk>\n       \\<Longrightarrow> x \\<in> range (Gromov_extension f)", "by (metis inj_on_id inj_on_imageI2, metis B comp_apply id_def rangeI)"], ["proof (state)\nthis:\n  bij (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)", "show \"inv (Gromov_extension f) = Gromov_extension (inv f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)", "using B \\<open>bij (Gromov_extension f)\\<close> bij_is_inj inv_o_cancel left_right_inverse_eq"], ["proof (prove)\nusing this:\n  Gromov_extension f \\<circ> Gromov_extension (inv f) = id\n  bij (Gromov_extension f)\n  bij ?f \\<Longrightarrow> inj ?f\n  inj ?f \\<Longrightarrow> inv ?f \\<circ> ?f = id\n  \\<lbrakk>?f \\<circ> ?g = id; ?g \\<circ> ?h = id\\<rbrakk>\n  \\<Longrightarrow> ?f = ?h\n\ngoal (1 subgoal):\n 1. inv (Gromov_extension f) = Gromov_extension (inv f)", "by blast"], ["proof (state)\nthis:\n  inv (Gromov_extension f) = Gromov_extension (inv f)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>We will especially use fixed points on the boundary. We note that if a point is fixed by\n(the Gromov extension of) a map, then it is fixed by (the Gromov extension of) its inverse.\\<close>"], ["", "lemma Gromov_extension_inv_fixed_point:\n  assumes \"isometry (f::'a::Gromov_hyperbolic_space \\<Rightarrow> 'a)\" \"Gromov_extension f xi = xi\"\n  shows \"Gromov_extension (inv f) xi = xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) xi = xi", "by (metis Gromov_extension_isometry_inv(1) Gromov_extension_isometry_inv(2) assms(1) assms(2) bij_betw_def inv_f_f)"], ["", "text \\<open>The extended Gromov product is invariant under isometries. This follows readily from the\ndefinition, but still the proof is not fully automatic, unfortunately.\\<close>"], ["", "lemma Gromov_extension_preserves_extended_Gromov_product:\n  assumes \"isometry f\"\n  shows \"extended_Gromov_product_at (f x) (Gromov_extension f xi) (Gromov_extension f eta) = extended_Gromov_product_at x xi eta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extended_Gromov_product_at (f x) (Gromov_extension f xi)\n     (Gromov_extension f eta) =\n    extended_Gromov_product_at x xi eta", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. extended_Gromov_product_at (f x) (Gromov_extension f xi)\n     (Gromov_extension f eta) =\n    extended_Gromov_product_at x xi eta", "have \"{liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n          (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> Gromov_extension f xi \\<and> (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f eta} =\n        {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n          (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi \\<and> (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n     (\\<lambda>n. to_Gromov_completion (u n))\n     \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> Gromov_extension f eta} =\n    {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n     (\\<lambda>n. to_Gromov_completion (u n))\n     \\<longlonglongrightarrow> xi \\<and>\n     (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}", "proof (auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "fix u v"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "assume H: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> Gromov_extension f xi\"\n                      \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f eta\""], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f eta\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "define u' where \"u' = (\\<lambda>n. (inv f) (u n))\""], ["proof (state)\nthis:\n  u' = (\\<lambda>n. inv f (u n))\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "define v' where \"v' = (\\<lambda>n. (inv f) (v n))\""], ["proof (state)\nthis:\n  v' = (\\<lambda>n. inv f (v n))\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"(\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u' n))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f xi)", "unfolding u'_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (inv f) (to_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f xi)", "apply (rule iffD1[OF homeomorphism_on_compose[OF Gromov_extension_isometry_homeomorphism[OF isometryD(1)[OF isometry_inverse(1)[OF assms]]]]])"], ["proof (prove)\ngoal (3 subgoals):\n 1. Gromov_extension f xi \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (u n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (u n))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "using H(1)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (3 subgoals):\n 1. Gromov_extension f xi \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (u n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (u n))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"Gromov_extension (inv f) (Gromov_extension f xi) = xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "using Gromov_extension_isometry_composition[OF assms isometry_inverse(1)[OF assms], symmetric]"], ["proof (prove)\nusing this:\n  Gromov_extension (inv f) \\<circ> Gromov_extension f =\n  Gromov_extension (inv f \\<circ> f)\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "unfolding comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x)) =\n  Gromov_extension (\\<lambda>x. inv f (f x))\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "using bij_is_inj[OF isometry_inverse(2)[OF assms]]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x)) =\n  Gromov_extension (\\<lambda>x. inv f (f x))\n  inj f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "by (simp add: \\<open>Gromov_extension (inv f) \\<circ> Gromov_extension f = Gromov_extension (inv f \\<circ> f)\\<close> pointfree_idE)"], ["proof (state)\nthis:\n  Gromov_extension (inv f) (Gromov_extension f xi) = xi\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n  Gromov_extension (inv f) (Gromov_extension f xi) = xi", "have U: \"(\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n  Gromov_extension (inv f) (Gromov_extension f xi) = xi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> xi", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> xi\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"(\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f eta)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (v' n))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f eta)", "unfolding v'_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (inv f) (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f eta)", "apply (rule iffD1[OF homeomorphism_on_compose[OF Gromov_extension_isometry_homeomorphism[OF isometryD(1)[OF isometry_inverse(1)[OF assms]]]]])"], ["proof (prove)\ngoal (3 subgoals):\n 1. Gromov_extension f eta \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (v n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (v n))\n    \\<longlonglongrightarrow> Gromov_extension f eta", "using H(2)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f eta\n\ngoal (3 subgoals):\n 1. Gromov_extension f eta \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (v n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (v n))\n    \\<longlonglongrightarrow> Gromov_extension f eta", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f)\n                             (Gromov_extension f eta)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f)\n                             (Gromov_extension f eta)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"Gromov_extension (inv f) (Gromov_extension f eta) = eta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f eta) = eta", "using Gromov_extension_isometry_composition[OF assms isometry_inverse(1)[OF assms], symmetric]"], ["proof (prove)\nusing this:\n  Gromov_extension (inv f) \\<circ> Gromov_extension f =\n  Gromov_extension (inv f \\<circ> f)\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f eta) = eta", "unfolding comp_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x)) =\n  Gromov_extension (\\<lambda>x. inv f (f x))\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f eta) = eta", "using bij_is_inj[OF isometry_inverse(2)[OF assms]]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x)) =\n  Gromov_extension (\\<lambda>x. inv f (f x))\n  inj f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f eta) = eta", "by (simp add: \\<open>Gromov_extension (inv f) \\<circ> Gromov_extension f = Gromov_extension (inv f \\<circ> f)\\<close> pointfree_idE)"], ["proof (state)\nthis:\n  Gromov_extension (inv f) (Gromov_extension f eta) = eta\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f)\n                             (Gromov_extension f eta)\n  Gromov_extension (inv f) (Gromov_extension f eta) = eta", "have V: \"(\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f)\n                             (Gromov_extension f eta)\n  Gromov_extension (inv f) (Gromov_extension f eta) = eta\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have uv: \"u n = f (u' n)\" \"v n = f (v' n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = f (u' n) &&& v n = f (v' n)", "unfolding u'_def v'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. u n = f (inv f (u n)) &&& v n = f (inv f (v n))", "by (auto simp add: assms isometryD(3) surj_f_inv_f)"], ["proof (state)\nthis:\n  u ?n = f (u' ?n)\n  v ?n = f (v' ?n)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"Gromov_product_at (f x) (u n) (v n) = Gromov_product_at x (u' n) (v' n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (u n) (v n) = Gromov_product_at x (u' n) (v' n)", "unfolding uv"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f (u' n)) (f (v' n)) =\n    Gromov_product_at x (u' n) (v' n)", "using assms"], ["proof (prove)\nusing this:\n  isometry f\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f (u' n)) (f (v' n)) =\n    Gromov_product_at x (u' n) (v' n)", "by (simp add: Gromov_product_isometry isometry_def)"], ["proof (state)\nthis:\n  Gromov_product_at (f x) (u ?n) (v ?n) =\n  Gromov_product_at x (u' ?n) (v' ?n)\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "then"], ["proof (chain)\npicking this:\n  Gromov_product_at (f x) (u ?n) (v ?n) =\n  Gromov_product_at x (u' ?n) (v' ?n)", "have \"liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) = liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))\""], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (u ?n) (v ?n) =\n  Gromov_product_at x (u' ?n) (v' ?n)\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n    liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))", "by auto"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))\n\ngoal (2 subgoals):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> Gromov_extension f xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> Gromov_extension f eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at x (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> eta\n 2. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "then"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))", "show \"\\<exists>u' v'.\n              liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) = liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n))) \\<and>\n              (\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> xi \\<and> (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta\""], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))\n\ngoal (1 subgoal):\n 1. \\<exists>u' v'.\n       liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n       liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (u' n))\n       \\<longlonglongrightarrow> xi \\<and>\n       (\\<lambda>n. to_Gromov_completion (v' n))\n       \\<longlonglongrightarrow> eta", "using U V"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n)))\n  (\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> xi\n  (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta\n\ngoal (1 subgoal):\n 1. \\<exists>u' v'.\n       liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n       liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (u' n))\n       \\<longlonglongrightarrow> xi \\<and>\n       (\\<lambda>n. to_Gromov_completion (v' n))\n       \\<longlonglongrightarrow> eta", "by blast"], ["proof (state)\nthis:\n  \\<exists>u' v'.\n     liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) =\n     liminf (\\<lambda>n. ereal (Gromov_product_at x (u' n) (v' n))) \\<and>\n     (\\<lambda>n. to_Gromov_completion (u' n))\n     \\<longlonglongrightarrow> xi \\<and>\n     (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> eta\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "fix u v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "assume H: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\"\n                      \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\""], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "define u' where \"u' = (\\<lambda>n. f (u n))\""], ["proof (state)\nthis:\n  u' = (\\<lambda>n. f (u n))\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "define v' where \"v' = (\\<lambda>n. f (v n))\""], ["proof (state)\nthis:\n  v' = (\\<lambda>n. f (v n))\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have U: \"(\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> Gromov_extension f xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u' n))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "unfolding u'_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "apply (rule iffD1[OF homeomorphism_on_compose[OF Gromov_extension_isometry_homeomorphism[OF isometryD(1)[OF assms]]]])"], ["proof (prove)\ngoal (3 subgoals):\n 1. xi \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (u n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "using H(1)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (3 subgoals):\n 1. xi \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (u n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have V: \"(\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> Gromov_extension f eta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (v' n))\n    \\<longlonglongrightarrow> Gromov_extension f eta", "unfolding v'_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension f eta", "apply (rule iffD1[OF homeomorphism_on_compose[OF Gromov_extension_isometry_homeomorphism[OF isometryD(1)[OF assms]]]])"], ["proof (prove)\ngoal (3 subgoals):\n 1. eta \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (v n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta", "using H(2)"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\n\ngoal (3 subgoals):\n 1. eta \\<in> UNIV\n 2. \\<forall>\\<^sub>F n in sequentially.\n       to_Gromov_completion (v n) \\<in> UNIV\n 3. (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension f eta\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "have \"Gromov_product_at (f x) (u' n) (v' n) = Gromov_product_at x (u n) (v n)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (u' n) (v' n) = Gromov_product_at x (u n) (v n)", "unfolding u'_def v'_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f (u n)) (f (v n)) =\n    Gromov_product_at x (u n) (v n)", "using assms"], ["proof (prove)\nusing this:\n  isometry f\n\ngoal (1 subgoal):\n 1. Gromov_product_at (f x) (f (u n)) (f (v n)) =\n    Gromov_product_at x (u n) (v n)", "by (simp add: Gromov_product_isometry isometry_def)"], ["proof (state)\nthis:\n  Gromov_product_at (f x) (u' ?n) (v' ?n) =\n  Gromov_product_at x (u ?n) (v ?n)\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "then"], ["proof (chain)\npicking this:\n  Gromov_product_at (f x) (u' ?n) (v' ?n) =\n  Gromov_product_at x (u ?n) (v ?n)", "have \"liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) = liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))\""], ["proof (prove)\nusing this:\n  Gromov_product_at (f x) (u' ?n) (v' ?n) =\n  Gromov_product_at x (u ?n) (v ?n)\n\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n    liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))", "by auto"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>(\\<lambda>n. to_Gromov_completion (u n))\n                \\<longlonglongrightarrow> xi;\n        (\\<lambda>n. to_Gromov_completion (v n))\n        \\<longlonglongrightarrow> eta\\<rbrakk>\n       \\<Longrightarrow> \\<exists>ua va.\n                            liminf\n                             (\\<lambda>n.\n                                 ereal (Gromov_product_at x (u n) (v n))) =\n                            liminf\n                             (\\<lambda>n.\n                                 ereal\n                                  (Gromov_product_at (f x) (ua n)\n                                    (va n))) \\<and>\n                            (\\<lambda>n. to_Gromov_completion (ua n))\n                            \\<longlonglongrightarrow> Gromov_extension f\n                 xi \\<and>\n                            (\\<lambda>n. to_Gromov_completion (va n))\n                            \\<longlonglongrightarrow> Gromov_extension f eta", "then"], ["proof (chain)\npicking this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))", "show \"\\<exists>u' v'.\n              liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) = liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n))) \\<and>\n              (\\<lambda>n. to_Gromov_completion (u' n)) \\<longlonglongrightarrow> Gromov_extension f xi \\<and> (\\<lambda>n. to_Gromov_completion (v' n)) \\<longlonglongrightarrow> Gromov_extension f eta\""], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))\n\ngoal (1 subgoal):\n 1. \\<exists>u' v'.\n       liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n       liminf\n        (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (u' n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n       (\\<lambda>n. to_Gromov_completion (v' n))\n       \\<longlonglongrightarrow> Gromov_extension f eta", "using U V"], ["proof (prove)\nusing this:\n  liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n  liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n)))\n  (\\<lambda>n. to_Gromov_completion (u' n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n  (\\<lambda>n. to_Gromov_completion (v' n))\n  \\<longlonglongrightarrow> Gromov_extension f eta\n\ngoal (1 subgoal):\n 1. \\<exists>u' v'.\n       liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n       liminf\n        (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (u' n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n       (\\<lambda>n. to_Gromov_completion (v' n))\n       \\<longlonglongrightarrow> Gromov_extension f eta", "by auto"], ["proof (state)\nthis:\n  \\<exists>u' v'.\n     liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) =\n     liminf\n      (\\<lambda>n. ereal (Gromov_product_at (f x) (u' n) (v' n))) \\<and>\n     (\\<lambda>n. to_Gromov_completion (u' n))\n     \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n     (\\<lambda>n. to_Gromov_completion (v' n))\n     \\<longlonglongrightarrow> Gromov_extension f eta\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f eta} =\n  {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}\n\ngoal (1 subgoal):\n 1. extended_Gromov_product_at (f x) (Gromov_extension f xi)\n     (Gromov_extension f eta) =\n    extended_Gromov_product_at x xi eta", "then"], ["proof (chain)\npicking this:\n  {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f eta} =\n  {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}", "show ?thesis"], ["proof (prove)\nusing this:\n  {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f eta} =\n  {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}\n\ngoal (1 subgoal):\n 1. extended_Gromov_product_at (f x) (Gromov_extension f xi)\n     (Gromov_extension f eta) =\n    extended_Gromov_product_at x xi eta", "unfolding extended_Gromov_product_at_topological"], ["proof (prove)\nusing this:\n  {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f eta} =\n  {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n   (\\<lambda>n. to_Gromov_completion (u n))\n   \\<longlonglongrightarrow> xi \\<and>\n   (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta}\n\ngoal (1 subgoal):\n 1. Inf {liminf (\\<lambda>n. ereal (Gromov_product_at (f x) (u n) (v n))) |u\n         v. (\\<lambda>n. to_Gromov_completion (u n))\n            \\<longlonglongrightarrow> Gromov_extension f xi \\<and>\n            (\\<lambda>n. to_Gromov_completion (v n))\n            \\<longlonglongrightarrow> Gromov_extension f eta} =\n    Inf {liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |u v.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi \\<and>\n         (\\<lambda>n. to_Gromov_completion (v n))\n         \\<longlonglongrightarrow> eta}", "by auto"], ["proof (state)\nthis:\n  extended_Gromov_product_at (f x) (Gromov_extension f xi)\n   (Gromov_extension f eta) =\n  extended_Gromov_product_at x xi eta\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of theory Boundary_Extension*)"]]}