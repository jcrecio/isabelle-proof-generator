{"file_name": "/home/qj213/afp-2021-10-22/thys/Gromov_Hyperbolicity/Busemann_Function.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Gromov_Hyperbolicity", "problem_names": ["lemma Busemann_function_ereal:\n  \"ereal(Busemann_function_at xi x y) = Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\"", "lemma Busemann_function_inner:\n  \"Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z\"", "lemma Busemann_function_xx [simp]:\n  \"Busemann_function_at xi x x = 0\"", "lemma Busemann_function_mono [mono_intros]:\n  \"Busemann_function_at xi x y \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'\"", "lemma Busemann_function_le_dist [mono_intros]:\n  \"abs(Busemann_function_at xi x y) \\<le> dist x y\"", "lemma Busemann_function_Lipschitz [mono_intros]:\n  \"abs(Busemann_function_at xi x y - Busemann_function_at xi x' y') \\<le> dist x x' + dist y y'\"", "lemma Busemann_function_limsup:\n  assumes \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\"\n  shows \"limsup (\\<lambda>n. dist x (u n) - dist y (u n)) \\<le> Busemann_function_at xi x y\"", "lemma Busemann_function_liminf:\n  assumes \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\"\n  shows \"Busemann_function_at xi x y \\<le> liminf (\\<lambda>n. dist (x::'a::Gromov_hyperbolic_space) (u n) - dist y (u n)) + 2 * deltaG(TYPE('a))\"", "lemma Busemann_function_inside_approx:\n  assumes \"e > (0::real)\" \"(\\<lambda>n. to_Gromov_completion (t n::'a::Gromov_hyperbolic_space)) \\<longlonglongrightarrow> xi\"\n  shows \"eventually (\\<lambda>n. Busemann_function_at (to_Gromov_completion (t n)) x y \\<le> Busemann_function_at xi x y + e\n              \\<and> Busemann_function_at (to_Gromov_completion (t n)) x y \\<ge> Busemann_function_at xi x y - 2 * deltaG(TYPE('a)) - e) sequentially\"", "lemma Busemann_function_triangle [mono_intros]:\n  \"Busemann_function_at xi x z \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\"", "lemma Busemann_function_xy_yx [mono_intros]:\n  \"Busemann_function_at xi x y + Busemann_function_at xi y (x::'a::Gromov_hyperbolic_space) \\<le> 2 * deltaG(TYPE('a))\"", "theorem Busemann_function_quasi_morphism [mono_intros]:\n  \"\\<bar>Busemann_function_at xi x y + Busemann_function_at xi y z - Busemann_function_at xi x (z::'a::Gromov_hyperbolic_space)\\<bar> \\<le> 2 * deltaG(TYPE('a))\"", "lemma Busemann_function_le_Gromov_product:\n  \"- Busemann_function_at xi y x/2 \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)\"", "lemma Busemann_function_isometry:\n  assumes \"isometry f\"\n  shows \"Busemann_function_at (Gromov_extension f xi) (f x) (f y) = Busemann_function_at xi x y\"", "lemma dist_le_max_Busemann_functions [mono_intros]:\n  assumes \"xi \\<noteq> eta\"\n  shows \"dist x (y::'a::Gromov_hyperbolic_space) \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta)\n            + max (Busemann_function_at xi x y) (Busemann_function_at eta x y) + 2 * deltaG(TYPE('a))\"", "lemma dist_minus_Busemann_max_ineq:\n  \"dist (x::'a::Gromov_hyperbolic_space) z - Busemann_function_at xi z x \\<le> max (dist x y - Busemann_function_at xi y x) (dist y z - Busemann_function_at xi z y - 2 * Busemann_function_at xi y x) + 8 * deltaG(TYPE('a))\""], "translations": [["", "lemma Busemann_function_ereal:\n  \"ereal(Busemann_function_at xi x y) = Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "have A: \"Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} \\<le> dist x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> ereal (dist x y)", "by (rule Sup_least, auto intro!: Limsup_bounded always_eventually mono_intros simp add: algebra_simps)"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n  \\<le> ereal (dist x y)\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "have B: \"Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} \\<ge> -dist x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "obtain u where *: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u.\n        (\\<lambda>n. to_Gromov_completion (u n))\n        \\<longlonglongrightarrow> xi \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using rep_Gromov_completion_limit[of xi]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion xi n))\n  \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. (\\<And>u.\n        (\\<lambda>n. to_Gromov_completion (u n))\n        \\<longlonglongrightarrow> xi \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "have \"ereal(-dist x y) \\<le> limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))", "by (rule le_Limsup, auto intro!: always_eventually mono_intros simp add: algebra_simps)"], ["proof (state)\nthis:\n  ereal (- dist x y)\n  \\<le> limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "also"], ["proof (state)\nthis:\n  ereal (- dist x y)\n  \\<le> limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "have \"... \\<le> Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "apply (rule Sup_upper)"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "using *"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "finally"], ["proof (chain)\npicking this:\n  ereal (- dist x y)\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (- dist x y)\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. ereal (- dist x y)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "by simp"], ["proof (state)\nthis:\n  ereal (- dist x y)\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ereal (- dist x y)\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "unfolding Busemann_function_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal\n     (real_of_ereal\n       (Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi})) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "apply (rule ereal_real')"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}\\<bar> \\<noteq>\n    \\<infinity>", "using A B"], ["proof (prove)\nusing this:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n  \\<le> ereal (dist x y)\n  ereal (- dist x y)\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. \\<bar>Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}\\<bar> \\<noteq>\n    \\<infinity>", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y) =\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>If $\\xi$ is not at infinity, then the Busemann function is simply the difference of the\ndistances.\\<close>"], ["", "lemma Busemann_function_inner:\n  \"Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "have L: \"limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) = dist x z - dist y z\" if \"u \\<longlonglongrightarrow> z\" for u"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n    ereal (dist x z - dist y z)", "by (rule lim_imp_Limsup, simp, intro tendsto_intros that)"], ["proof (state)\nthis:\n  ?u \\<longlonglongrightarrow> z \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?u n) - dist y (?u n))) =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "have \"Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. u \\<longlonglongrightarrow> z}\n      = dist x z - dist y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         u \\<longlonglongrightarrow> z} =\n    ereal (dist x z - dist y z)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         u \\<longlonglongrightarrow> z} =\n    ereal (dist x z - dist y z)", "obtain u where u: \"u \\<longlonglongrightarrow> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u.\n        u \\<longlonglongrightarrow> z \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  u \\<longlonglongrightarrow> z\n\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         u \\<longlonglongrightarrow> z} =\n    ereal (dist x z - dist y z)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         u \\<longlonglongrightarrow> z} =\n    ereal (dist x z - dist y z)", "apply (rule order.antisym)"], ["proof (prove)\ngoal (2 subgoals):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         u \\<longlonglongrightarrow> z}\n    \\<le> ereal (dist x z - dist y z)\n 2. ereal (dist x z - dist y z)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               u \\<longlonglongrightarrow> z}", "apply (subst Sup_le_iff)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<forall>a\\<in>{limsup\n                     (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                    u. u \\<longlonglongrightarrow> z}.\n       a \\<le> ereal (dist x z - dist y z)\n 2. ereal (dist x z - dist y z)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               u \\<longlonglongrightarrow> z}", "using L"], ["proof (prove)\nusing this:\n  ?u \\<longlonglongrightarrow> z \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?u n) - dist y (?u n))) =\n  ereal (dist x z - dist y z)\n\ngoal (2 subgoals):\n 1. \\<forall>a\\<in>{limsup\n                     (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                    u. u \\<longlonglongrightarrow> z}.\n       a \\<le> ereal (dist x z - dist y z)\n 2. ereal (dist x z - dist y z)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               u \\<longlonglongrightarrow> z}", "apply auto[1]"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (dist x z - dist y z)\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               u \\<longlonglongrightarrow> z}", "apply (subst L[OF u, symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               u \\<longlonglongrightarrow> z}", "apply (rule Sup_upper)"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           u \\<longlonglongrightarrow> z}", "using u"], ["proof (prove)\nusing this:\n  u \\<longlonglongrightarrow> z\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           u \\<longlonglongrightarrow> z}", "by auto"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       u \\<longlonglongrightarrow> z} =\n  ereal (dist x z - dist y z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       u \\<longlonglongrightarrow> z} =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "then"], ["proof (chain)\npicking this:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       u \\<longlonglongrightarrow> z} =\n  ereal (dist x z - dist y z)", "have \"ereal (Busemann_function_at (to_Gromov_completion z) x y) = dist x z - dist y z\""], ["proof (prove)\nusing this:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       u \\<longlonglongrightarrow> z} =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at (to_Gromov_completion z) x y) =\n    ereal (dist x z - dist y z)", "unfolding Busemann_function_ereal"], ["proof (prove)\nusing this:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       u \\<longlonglongrightarrow> z} =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> to_Gromov_completion z} =\n    ereal (dist x z - dist y z)", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at (to_Gromov_completion z) x y) =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "then"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at (to_Gromov_completion z) x y) =\n  ereal (dist x z - dist y z)", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at (to_Gromov_completion z) x y) =\n  ereal (dist x z - dist y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z", "by auto"], ["proof (state)\nthis:\n  Busemann_function_at (to_Gromov_completion z) x y = dist x z - dist y z\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The Busemann function measured at the same points vanishes.\\<close>"], ["", "lemma Busemann_function_xx [simp]:\n  \"Busemann_function_at xi x x = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x x = 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x x = 0", "have *: \"{limsup (\\<lambda>n. ereal(dist x (u n) - dist x (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} = {0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {limsup (\\<lambda>n. ereal (dist x (u n) - dist x (u n))) |u.\n     (\\<lambda>n. to_Gromov_completion (u n))\n     \\<longlonglongrightarrow> xi} =\n    {0}", "by (auto simp add: zero_ereal_def[symmetric] intro!: lim_imp_Limsup rep_Gromov_completion_limit[of xi])"], ["proof (state)\nthis:\n  {limsup (\\<lambda>n. ereal (dist x (u n) - dist x (u n))) |u.\n   (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} =\n  {0}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x x = 0", "have \"ereal (Busemann_function_at xi x x) = ereal 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x x) = ereal 0", "unfolding Busemann_function_ereal *"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {0} = ereal 0", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x x) = ereal 0\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x x = 0", "then"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at xi x x) = ereal 0", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x x) = ereal 0\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x x = 0", "by auto"], ["proof (state)\nthis:\n  Busemann_function_at xi x x = 0\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Perturbing the points gives rise to a variation of the Busemann function bounded by the\nsize of the variations. This is obvious for inner Busemann functions, and everything passes\nreadily to the limit.\\<close>"], ["", "lemma Busemann_function_mono [mono_intros]:\n  \"Busemann_function_at xi x y \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y\n    \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y\n    \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'", "have A: \"limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n          \\<le> ereal(Busemann_function_at xi x' y') + ereal (dist x x' + dist y y')\"\n    if \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\" for u"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "have *: \"dist x z + dist y' z \\<le> dist x x' + (dist y y' + (dist x' z + dist y z))\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z + dist y' z\n    \\<le> dist x x' + (dist y y' + (dist x' z + dist y z))", "using add_mono[OF dist_triangle[of x z x'] dist_triangle[of y' z y]] dist_commute[of y y']"], ["proof (prove)\nusing this:\n  dist x z + dist y' z \\<le> dist x x' + dist x' z + (dist y' y + dist y z)\n  dist y y' = dist y' y\n\ngoal (1 subgoal):\n 1. dist x z + dist y' z\n    \\<le> dist x x' + (dist y y' + (dist x' z + dist y z))", "by auto"], ["proof (state)\nthis:\n  dist x ?z + dist y' ?z\n  \\<le> dist x x' + (dist y y' + (dist x' ?z + dist y ?z))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "have \"limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) + (- ereal (dist x x' + dist y y'))\n      = limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)) + (- ereal (dist x x' + dist y y')))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n    - ereal (dist x x' + dist y y') =\n    limsup\n     (\\<lambda>n.\n         ereal (dist x (u n) - dist y (u n)) +\n         - ereal (dist x x' + dist y y'))", "by (rule Limsup_add_ereal_right[symmetric], auto)"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y') =\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       - ereal (dist x x' + dist y y'))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "also"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y') =\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       - ereal (dist x x' + dist y y'))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "have \"... \\<le> limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>n.\n         ereal (dist x (u n) - dist y (u n)) +\n         - ereal (dist x x' + dist y y'))\n    \\<le> limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))", "by (auto intro!: Limsup_mono always_eventually simp: algebra_simps *)"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       - ereal (dist x x' + dist y y'))\n  \\<le> limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "also"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       - ereal (dist x x' + dist y y'))\n  \\<le> limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "have \"... \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |\n               u. (\\<lambda>n. to_Gromov_completion (u n))\n                  \\<longlonglongrightarrow> xi}", "apply (rule Sup_upper)"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "using that"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n)))\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "finally"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}", "have \"limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) + (- ereal (dist x x' + dist y y'))\n          \\<le> ereal(Busemann_function_at xi x' y')\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n    - ereal (dist x x' + dist y y')\n    \\<le> ereal (Busemann_function_at xi x' y')", "unfolding Busemann_function_ereal"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |u.\n             (\\<lambda>n. to_Gromov_completion (u n))\n             \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n    - ereal (dist x x' + dist y y')\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x' (u n) - dist y' (u n))) |\n               u. (\\<lambda>n. to_Gromov_completion (u n))\n                  \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> ereal (Busemann_function_at xi x' y')\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "then"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> ereal (Busemann_function_at xi x' y')", "show ?thesis"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n  - ereal (dist x x' + dist y y')\n  \\<le> ereal (Busemann_function_at xi x' y')\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "unfolding minus_ereal_def[symmetric]"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) -\n  ereal (dist x x' + dist y y')\n  \\<le> ereal (Busemann_function_at xi x' y')\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<le> ereal (Busemann_function_at xi x' y') +\n          ereal (dist x x' + dist y y')", "by (subst ereal_minus_le[symmetric], auto)"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n  \\<le> ereal (Busemann_function_at xi x' y') +\n        ereal (dist x x' + dist y y')\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?u n) - dist y (?u n)))\n  \\<le> ereal (Busemann_function_at xi x' y') +\n        ereal (dist x x' + dist y y')\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y\n    \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'", "have \"ereal (Busemann_function_at xi x y) \\<le> ereal(Busemann_function_at xi x' y') + dist x x' + dist y y'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y)\n    \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n          ereal (dist y y')", "unfolding Busemann_function_ereal[of xi x y]"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n          ereal (dist y y')", "using A"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?u n) - dist y (?u n)))\n  \\<le> ereal (Busemann_function_at xi x' y') +\n        ereal (dist x x' + dist y y')\n\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n          ereal (dist y y')", "by (auto intro!: Sup_least simp: algebra_simps)"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y)\n  \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n        ereal (dist y y')\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y\n    \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'", "then"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at xi x y)\n  \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n        ereal (dist y y')", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x y)\n  \\<le> ereal (Busemann_function_at xi x' y') + ereal (dist x x') +\n        ereal (dist y y')\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y\n    \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'", "by simp"], ["proof (state)\nthis:\n  Busemann_function_at xi x y\n  \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>In particular, it follows that the Busemann function $B_\\xi(x,y)$ is bounded in absolute value\nby $d(x,y)$.\\<close>"], ["", "lemma Busemann_function_le_dist [mono_intros]:\n  \"abs(Busemann_function_at xi x y) \\<le> dist x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y\\<bar> \\<le> dist x y", "using Busemann_function_mono[of xi x y y y] Busemann_function_mono[of xi x x x y]"], ["proof (prove)\nusing this:\n  Busemann_function_at xi x y\n  \\<le> Busemann_function_at xi y y + dist x y + dist y y\n  Busemann_function_at xi x x\n  \\<le> Busemann_function_at xi x y + dist x x + dist x y\n\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y\\<bar> \\<le> dist x y", "by auto"], ["", "lemma Busemann_function_Lipschitz [mono_intros]:\n  \"abs(Busemann_function_at xi x y - Busemann_function_at xi x' y') \\<le> dist x x' + dist y y'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y - Busemann_function_at xi x' y'\\<bar>\n    \\<le> dist x x' + dist y y'", "using Busemann_function_mono[of xi x y x' y'] Busemann_function_mono[of xi x' y' x y]"], ["proof (prove)\nusing this:\n  Busemann_function_at xi x y\n  \\<le> Busemann_function_at xi x' y' + dist x x' + dist y y'\n  Busemann_function_at xi x' y'\n  \\<le> Busemann_function_at xi x y + dist x' x + dist y' y\n\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y - Busemann_function_at xi x' y'\\<bar>\n    \\<le> dist x x' + dist y y'", "by (simp add: dist_commute)"], ["", "text \\<open>By the very definition of the Busemann function, the difference of distance functions is\nbounded above by the Busemann function when one converges to $\\xi$.\\<close>"], ["", "lemma Busemann_function_limsup:\n  assumes \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\"\n  shows \"limsup (\\<lambda>n. dist x (u n) - dist y (u n)) \\<le> Busemann_function_at xi x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y)", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "apply (rule Sup_upper)"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "using assms"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}", "by auto"], ["", "text \\<open>There is also a corresponding bound below, but with the loss of a constant. This follows\nfrom the hyperbolicity of the space and a simple computation.\\<close>"], ["", "lemma Busemann_function_liminf:\n  assumes \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\"\n  shows \"Busemann_function_at xi x y \\<le> liminf (\\<lambda>n. dist (x::'a::Gromov_hyperbolic_space) (u n) - dist y (u n)) + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "proof (cases xi)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xi = to_Gromov_completion xa \\<Longrightarrow>\n       ereal (Busemann_function_at xi x y)\n       \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n             ereal (2 * deltaG TYPE('a))\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "case (to_Gromov_completion z)"], ["proof (state)\nthis:\n  xi = to_Gromov_completion z\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xi = to_Gromov_completion xa \\<Longrightarrow>\n       ereal (Busemann_function_at xi x y)\n       \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n             ereal (2 * deltaG TYPE('a))\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "have *: \"liminf (\\<lambda>n. dist x (u n) - dist y (u n)) = dist x z - dist y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) =\n    ereal (dist x z - dist y z)", "apply (rule lim_imp_Liminf, simp, intro tendsto_intros)"], ["proof (prove)\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> z\n 2. u \\<longlonglongrightarrow> z", "using assms"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> z\n 2. u \\<longlonglongrightarrow> z", "unfolding to_Gromov_completion"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> to_Gromov_completion z\n\ngoal (2 subgoals):\n 1. u \\<longlonglongrightarrow> z\n 2. u \\<longlonglongrightarrow> z", "by auto"], ["proof (state)\nthis:\n  liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) =\n  ereal (dist x z - dist y z)\n\ngoal (2 subgoals):\n 1. \\<And>xa.\n       xi = to_Gromov_completion xa \\<Longrightarrow>\n       ereal (Busemann_function_at xi x y)\n       \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n             ereal (2 * deltaG TYPE('a))\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "unfolding to_Gromov_completion plus_ereal.simps(1)[symmetric] Busemann_function_inner *"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (dist x z - dist y z)\n    \\<le> ereal (dist x z - dist y z) + ereal (2 * deltaG TYPE('a))", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y)\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "case boundary"], ["proof (state)\nthis:\n  xi \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "have I: \"limsup (\\<lambda>n. ereal(dist x (v n) - dist y (v n))) \\<le> liminf (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) + 2 * deltaG(TYPE('a))\"\n    if v: \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> xi\" for v"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "obtain N where N: \"\\<And>m n. m \\<ge> N \\<Longrightarrow> n \\<ge> N \\<Longrightarrow> Gromov_product_at x (u m) (v n) \\<ge> dist x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> dist x y\n                              \\<le> Gromov_product_at x (u m)\n                                     (v n)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using same_limit_imp_Gromov_product_tendsto_infinity[OF boundary assms v]"], ["proof (prove)\nusing this:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<forall>m\\<ge>N. ?C \\<le> Gromov_product_at ?a (u n) (v m)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>m n.\n            \\<lbrakk>N \\<le> m; N \\<le> n\\<rbrakk>\n            \\<Longrightarrow> dist x y\n                              \\<le> Gromov_product_at x (u m)\n                                     (v n)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> dist x y \\<le> Gromov_product_at x (u ?m) (v ?n)\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "have A: \"dist x (v n) - dist y (v n) - 2 * deltaG(TYPE('a)) \\<le> dist x (u m) - dist y (u m)\" if \"m \\<ge> N\" \"n \\<ge> N\" for m n"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "have \"Gromov_product_at x (v n) y \\<le> dist x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_product_at x (v n) y \\<le> dist x y", "by (intro mono_intros)"], ["proof (state)\nthis:\n  Gromov_product_at x (v n) y \\<le> dist x y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "then"], ["proof (chain)\npicking this:\n  Gromov_product_at x (v n) y \\<le> dist x y", "have \"min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) = Gromov_product_at x (v n) y\""], ["proof (prove)\nusing this:\n  Gromov_product_at x (v n) y \\<le> dist x y\n\ngoal (1 subgoal):\n 1. min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n    Gromov_product_at x (v n) y", "using N[OF \\<open>m \\<ge> N\\<close> \\<open>n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  Gromov_product_at x (v n) y \\<le> dist x y\n  dist x y \\<le> Gromov_product_at x (u m) (v n)\n\ngoal (1 subgoal):\n 1. min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n    Gromov_product_at x (v n) y", "by linarith"], ["proof (state)\nthis:\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n  Gromov_product_at x (v n) y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "moreover"], ["proof (state)\nthis:\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n  Gromov_product_at x (v n) y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "have \"Gromov_product_at x (u m) y \\<ge> min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) - deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) -\n    deltaG TYPE('a)\n    \\<le> Gromov_product_at x (u m) y", "by (intro mono_intros)"], ["proof (state)\nthis:\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) -\n  deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "ultimately"], ["proof (chain)\npicking this:\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n  Gromov_product_at x (v n) y\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) -\n  deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y", "have \"Gromov_product_at x (u m) y \\<ge> Gromov_product_at x (v n) y - deltaG(TYPE('a))\""], ["proof (prove)\nusing this:\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) =\n  Gromov_product_at x (v n) y\n  min (Gromov_product_at x (u m) (v n)) (Gromov_product_at x (v n) y) -\n  deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y\n\ngoal (1 subgoal):\n 1. Gromov_product_at x (v n) y - deltaG TYPE('a)\n    \\<le> Gromov_product_at x (u m) y", "by auto"], ["proof (state)\nthis:\n  Gromov_product_at x (v n) y - deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "then"], ["proof (chain)\npicking this:\n  Gromov_product_at x (v n) y - deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y", "show ?thesis"], ["proof (prove)\nusing this:\n  Gromov_product_at x (v n) y - deltaG TYPE('a)\n  \\<le> Gromov_product_at x (u m) y\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "unfolding Gromov_product_at_def"], ["proof (prove)\nusing this:\n  (dist x (v n) + dist x y - dist (v n) y) / 2 - deltaG TYPE('a)\n  \\<le> (dist x (u m) + dist x y - dist (u m) y) / 2\n\ngoal (1 subgoal):\n 1. dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n    \\<le> dist x (u m) - dist y (u m)", "by (auto simp add: algebra_simps divide_simps dist_commute)"], ["proof (state)\nthis:\n  dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n  \\<le> dist x (u m) - dist y (u m)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>N \\<le> ?m; N \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> dist x (v ?n) - dist y (v ?n) - 2 * deltaG TYPE('a)\n                    \\<le> dist x (u ?m) - dist y (u ?m)\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "have B: \"dist x (v n) - dist y (v n) - 2 * deltaG(TYPE('a)) \\<le> liminf (\\<lambda>m. dist x (u m) - dist y (u m))\" if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a))\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))", "apply (rule Liminf_bounded)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F na in sequentially.\n       ereal (dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a))\n       \\<le> ereal (dist x (u na) - dist y (u na))", "using A[OF _ that]"], ["proof (prove)\nusing this:\n  N \\<le> ?m \\<Longrightarrow>\n  dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n  \\<le> dist x (u ?m) - dist y (u ?m)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F na in sequentially.\n       ereal (dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a))\n       \\<le> ereal (dist x (u na) - dist y (u na))", "unfolding eventually_sequentially"], ["proof (prove)\nusing this:\n  N \\<le> ?m \\<Longrightarrow>\n  dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a)\n  \\<le> dist x (u ?m) - dist y (u ?m)\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>na\\<ge>N.\n          ereal (dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a))\n          \\<le> ereal (dist x (u na) - dist y (u na))", "by auto"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow>\n  ereal (dist x (v ?n) - dist y (v ?n) - 2 * deltaG TYPE('a))\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "have C: \"dist x (v n) - dist y (v n) \\<le> liminf (\\<lambda>m. dist x (u m) - dist y (u m)) + 2 * deltaG(TYPE('a))\" if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (dist x (v n) - dist y (v n))\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "using B[OF that]"], ["proof (prove)\nusing this:\n  ereal (dist x (v n) - dist y (v n) - 2 * deltaG TYPE('a))\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa)))\n\ngoal (1 subgoal):\n 1. ereal (dist x (v n) - dist y (v n))\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "by (subst ereal_minus_le[symmetric], auto)"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow>\n  ereal (dist x (v ?n) - dist y (v ?n))\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n          ereal (2 * deltaG TYPE('a))", "apply (rule Limsup_bounded)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (dist x (v n) - dist y (v n))\n       \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n             ereal (2 * deltaG TYPE('a))", "unfolding eventually_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          ereal (dist x (v n) - dist y (v n))\n          \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n                ereal (2 * deltaG TYPE('a))", "apply (rule exI[of _ N])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N.\n       ereal (dist x (v n) - dist y (v n))\n       \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n             ereal (2 * deltaG TYPE('a))", "using C"], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow>\n  ereal (dist x (v ?n) - dist y (v ?n))\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. \\<forall>n\\<ge>N.\n       ereal (dist x (v n) - dist y (v n))\n       \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n             ereal (2 * deltaG TYPE('a))", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n  \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (?v n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?v n) - dist y (?v n)))\n  \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary \\<Longrightarrow>\n    ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y)\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          ereal (2 * deltaG TYPE('a))", "apply (rule Sup_least)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                 u. (\\<lambda>n. to_Gromov_completion (u n))\n                    \\<longlonglongrightarrow> xi} \\<Longrightarrow>\n       xa \\<le> liminf\n                 (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n                ereal (2 * deltaG TYPE('a))", "using I"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (?v n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>n. ereal (dist x (?v n) - dist y (?v n)))\n  \\<le> liminf (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                 u. (\\<lambda>n. to_Gromov_completion (u n))\n                    \\<longlonglongrightarrow> xi} \\<Longrightarrow>\n       xa \\<le> liminf\n                 (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n                ereal (2 * deltaG TYPE('a))", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y)\n  \\<le> liminf (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>To avoid formulating things in terms of liminf and limsup on ereal, the following formulation\nof the two previous lemmas is useful.\\<close>"], ["", "lemma Busemann_function_inside_approx:\n  assumes \"e > (0::real)\" \"(\\<lambda>n. to_Gromov_completion (t n::'a::Gromov_hyperbolic_space)) \\<longlonglongrightarrow> xi\"\n  shows \"eventually (\\<lambda>n. Busemann_function_at (to_Gromov_completion (t n)) x y \\<le> Busemann_function_at xi x y + e\n              \\<and> Busemann_function_at (to_Gromov_completion (t n)) x y \\<ge> Busemann_function_at xi x y - 2 * deltaG(TYPE('a)) - e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) x y\n       \\<le> Busemann_function_at xi x y + e \\<and>\n       Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) x y\n       \\<le> Busemann_function_at xi x y + e \\<and>\n       Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y", "have A: \"eventually (\\<lambda>n. Busemann_function_at (to_Gromov_completion (t n)) x y < Busemann_function_at xi x y + ereal e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (Busemann_function_at (to_Gromov_completion (t n)) x y)\n       < ereal (Busemann_function_at xi x y) + ereal e", "apply (rule Limsup_lessD)"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>xa.\n         ereal (Busemann_function_at (to_Gromov_completion (t xa)) x y))\n    < ereal (Busemann_function_at xi x y) + ereal e", "unfolding Busemann_function_inner"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa)))\n    < ereal (Busemann_function_at xi x y) + ereal e", "using le_less_trans[OF Busemann_function_limsup[OF assms(2)]] \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi ?x1 ?y1) < ?z \\<Longrightarrow>\n  limsup (\\<lambda>x. ereal (dist ?x1 (t x) - dist ?y1 (t x))) < ?z\n  0 < e\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa)))\n    < ereal (Busemann_function_at xi x y) + ereal e", "by auto"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (Busemann_function_at (to_Gromov_completion (t n)) x y)\n     < ereal (Busemann_function_at xi x y) + ereal e\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) x y\n       \\<le> Busemann_function_at xi x y + e \\<and>\n       Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y", "have B: \"eventually (\\<lambda>n. Busemann_function_at (to_Gromov_completion (t n)) x y > Busemann_function_at xi x y -2 * deltaG(TYPE('a)) - ereal e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       ereal (Busemann_function_at xi x y - 2 * deltaG TYPE('a)) - ereal e\n       < ereal (Busemann_function_at (to_Gromov_completion (t n)) x y)", "apply (rule less_LiminfD)"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y - 2 * deltaG TYPE('a)) - ereal e\n    < liminf\n       (\\<lambda>xa.\n           ereal (Busemann_function_at (to_Gromov_completion (t xa)) x y))", "unfolding Busemann_function_inner"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y - 2 * deltaG TYPE('a)) - ereal e\n    < liminf (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa)))", "using less_le_trans[OF _ Busemann_function_liminf[OF assms(2)], of \"ereal(Busemann_function_at xi x y) - ereal e\" x y] \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x y) - ereal e\n  < ereal (Busemann_function_at xi x y) \\<Longrightarrow>\n  ereal (Busemann_function_at xi x y) - ereal e\n  < liminf (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa))) +\n    ereal (2 * deltaG TYPE('a))\n  0 < e\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y - 2 * deltaG TYPE('a)) - ereal e\n    < liminf (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa)))", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ereal (Busemann_function_at xi x y - e)\n             < liminf (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa))) +\n               ereal (2 * deltaG TYPE('a));\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> ereal\n                       (Busemann_function_at xi x y - 2 * deltaG TYPE('a) -\n                        e)\n                      < liminf\n                         (\\<lambda>xa.\n                             ereal (dist x (t xa) - dist y (t xa)))", "apply (unfold ereal_minus(1)[symmetric], subst ereal_minus_less_iff, simp)+"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ereal (Busemann_function_at xi x y - e)\n             < liminf (\\<lambda>xa. ereal (dist x (t xa) - dist y (t xa))) +\n               ereal (2 * deltaG TYPE('a));\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> ereal (Busemann_function_at xi x y)\n                      < liminf\n                         (\\<lambda>xa.\n                             ereal (dist x (t xa) - dist y (t xa))) +\n                        ereal e +\n                        ereal (2 * deltaG TYPE('a))", "unfolding ereal_minus(1)[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>ereal (Busemann_function_at xi x y) - ereal e\n             < liminf\n                (\\<lambda>xa.\n                    ereal (dist x (t xa)) - ereal (dist y (t xa))) +\n               ereal (2 * deltaG TYPE('a));\n     0 < e\\<rbrakk>\n    \\<Longrightarrow> ereal (Busemann_function_at xi x y)\n                      < liminf\n                         (\\<lambda>xa.\n                             ereal (dist x (t xa)) -\n                             ereal (dist y (t xa))) +\n                        ereal e +\n                        ereal (2 * deltaG TYPE('a))", "by (simp only: ereal_minus_less_iff, auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     ereal (Busemann_function_at xi x y - 2 * deltaG TYPE('a)) - ereal e\n     < ereal (Busemann_function_at (to_Gromov_completion (t n)) x y)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) x y\n       \\<le> Busemann_function_at xi x y + e \\<and>\n       Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) x y\n       \\<le> Busemann_function_at xi x y + e \\<and>\n       Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y", "by (rule eventually_mono[OF eventually_conj[OF A B]], auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Busemann_function_at (to_Gromov_completion (t n)) x y\n     \\<le> Busemann_function_at xi x y + e \\<and>\n     Busemann_function_at xi x y - 2 * deltaG TYPE('a) - e\n     \\<le> Busemann_function_at (to_Gromov_completion (t n)) x y\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The Busemann function is essentially a morphism, i.e., it should satisfy $B_\\xi(x,z) =\nB_\\xi(x,y) + B_\\xi(y,z)$, as it is defined as a difference of distances. This is not exactly\nthe case as there is a choice in the definition, but it is the case up to a uniform constant,\nas we show in the next few lemmas. One says that it is a~\\emph{quasi-morphism}.\\<close>"], ["", "lemma Busemann_function_triangle [mono_intros]:\n  \"Busemann_function_at xi x z \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x z\n    \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x z\n    \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z", "have \"limsup (\\<lambda>n. dist x (u n) - dist z (u n)) \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\"\n    if \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\" for u"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "have \"limsup (\\<lambda>n. dist x (u n) - dist z (u n)) = limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)) + (dist y (u n) - dist z (u n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa))) =\n    limsup\n     (\\<lambda>n.\n         ereal (dist x (u n) - dist y (u n)) +\n         ereal (dist y (u n) - dist z (u n)))", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa))) =\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       ereal (dist y (u n) - dist z (u n)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "also"], ["proof (state)\nthis:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa))) =\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       ereal (dist y (u n) - dist z (u n)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "have \"... \\<le> limsup (\\<lambda>n. dist x (u n) - dist y (u n)) + limsup (\\<lambda>n. dist y (u n) - dist z (u n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>n.\n         ereal (dist x (u n) - dist y (u n)) +\n         ereal (dist y (u n) - dist z (u n)))\n    \\<le> limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n          limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))", "by (rule ereal_limsup_add_mono)"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       ereal (dist y (u n) - dist z (u n)))\n  \\<le> limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "also"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (dist x (u n) - dist y (u n)) +\n       ereal (dist y (u n) - dist z (u n)))\n  \\<le> limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n        limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "have \"... \\<le> ereal(Busemann_function_at xi x y) + Busemann_function_at xi y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n    limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n    \\<le> ereal (Busemann_function_at xi x y) +\n          ereal (Busemann_function_at xi y z)", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n    limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi} +\n          Sup {limsup (\\<lambda>n. ereal (dist y (u n) - dist z (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "using that"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n    limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi} +\n          Sup {limsup (\\<lambda>n. ereal (dist y (u n) - dist z (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "by (auto intro!: add_mono Sup_upper)"], ["proof (state)\nthis:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist y (u xa))) +\n  limsup (\\<lambda>x. ereal (dist y (u x) - dist z (u x)))\n  \\<le> ereal (Busemann_function_at xi x y) +\n        ereal (Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "finally"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n  \\<le> ereal (Busemann_function_at xi x y) +\n        ereal (Busemann_function_at xi y z)", "show ?thesis"], ["proof (prove)\nusing this:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n  \\<le> ereal (Busemann_function_at xi x y) +\n        ereal (Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "by auto"], ["proof (state)\nthis:\n  limsup (\\<lambda>xa. ereal (dist x (u xa) - dist z (u xa)))\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>xa. ereal (dist x (?u xa) - dist z (?u xa)))\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x z\n    \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>xa. ereal (dist x (?u xa) - dist z (?u xa)))\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "have \"ereal (Busemann_function_at xi x z) \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>xa. ereal (dist x (?u xa) - dist z (?u xa)))\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x z)\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "unfolding Busemann_function_ereal[of xi x z]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  limsup (\\<lambda>xa. ereal (dist x (?u xa) - dist z (?u xa)))\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist z (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "by (auto intro!: Sup_least)"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x z)\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x z\n    \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z", "then"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at xi x z)\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x z)\n  \\<le> ereal (Busemann_function_at xi x y + Busemann_function_at xi y z)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x z\n    \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z", "by auto"], ["proof (state)\nthis:\n  Busemann_function_at xi x z\n  \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Busemann_function_xy_yx [mono_intros]:\n  \"Busemann_function_at xi x y + Busemann_function_at xi y (x::'a::Gromov_hyperbolic_space) \\<le> 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "have *: \"- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) \\<le> ereal (2 * deltaG TYPE('a) - Busemann_function_at xi y x)\"\n    if \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\" for u"], ["proof (prove)\ngoal (1 subgoal):\n 1. - liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n    \\<le> ereal (2 * deltaG TYPE('a) - Busemann_function_at xi y x)", "using Busemann_function_liminf[of _ xi y x, OF that] ereal_minus_le_minus_plus"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi y x)\n  \\<le> liminf (\\<lambda>xa. ereal (dist y (u xa) - dist x (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n  ?a \\<le> ?b + ?c \\<Longrightarrow> - ?b \\<le> - ?a + ?c\n\ngoal (1 subgoal):\n 1. - liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n    \\<le> ereal (2 * deltaG TYPE('a) - Busemann_function_at xi y x)", "unfolding ereal_minus(1)[symmetric]"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi y x)\n  \\<le> liminf\n         (\\<lambda>xa. ereal (dist y (u xa)) - ereal (dist x (u xa))) +\n        ereal (2 * deltaG TYPE('a))\n  ?a \\<le> ?b + ?c \\<Longrightarrow> - ?b \\<le> - ?a + ?c\n\ngoal (1 subgoal):\n 1. - liminf (\\<lambda>n. ereal (dist y (u n)) - ereal (dist x (u n)))\n    \\<le> ereal (2 * deltaG TYPE('a)) - ereal (Busemann_function_at xi y x)", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  - liminf (\\<lambda>n. ereal (dist y (?u n) - dist x (?u n)))\n  \\<le> ereal (2 * deltaG TYPE('a) - Busemann_function_at xi y x)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "have \"ereal (Busemann_function_at xi x y) = Sup {limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi} =\n    Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y) =\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y) =\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "have \"... = Sup {limsup (\\<lambda>n. - ereal(dist y (u n) - dist x (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi} =\n    Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi} =\n  Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi} =\n  Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "have \"... = Sup {- liminf (\\<lambda>n. ereal(dist y (u n) - dist x (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi} =\n    Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "unfolding ereal_Limsup_uminus"], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi} =\n    Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}", "by auto"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi} =\n  Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  Sup {limsup (\\<lambda>n. - ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi} =\n  Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "have \"... \\<le> 2 * deltaG(TYPE('a)) - ereal(Busemann_function_at xi y x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi}\n    \\<le> ereal (2 * deltaG TYPE('a)) - ereal (Busemann_function_at xi y x)", "by (auto intro!: Sup_least *)"], ["proof (state)\nthis:\n  Sup {- liminf (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi}\n  \\<le> ereal (2 * deltaG TYPE('a)) - ereal (Busemann_function_at xi y x)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "finally"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at xi x y)\n  \\<le> ereal (2 * deltaG TYPE('a)) - ereal (Busemann_function_at xi y x)", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x y)\n  \\<le> ereal (2 * deltaG TYPE('a)) - ereal (Busemann_function_at xi y x)\n\ngoal (1 subgoal):\n 1. Busemann_function_at xi x y + Busemann_function_at xi y x\n    \\<le> 2 * deltaG TYPE('a)", "by simp"], ["proof (state)\nthis:\n  Busemann_function_at xi x y + Busemann_function_at xi y x\n  \\<le> 2 * deltaG TYPE('a)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem Busemann_function_quasi_morphism [mono_intros]:\n  \"\\<bar>Busemann_function_at xi x y + Busemann_function_at xi y z - Busemann_function_at xi x (z::'a::Gromov_hyperbolic_space)\\<bar> \\<le> 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y + Busemann_function_at xi y z -\n          Busemann_function_at xi x z\\<bar>\n    \\<le> 2 * deltaG TYPE('a)", "using Busemann_function_triangle[of xi x z y] Busemann_function_triangle[of xi x y z] Busemann_function_xy_yx[of xi y z]"], ["proof (prove)\nusing this:\n  Busemann_function_at xi x z\n  \\<le> Busemann_function_at xi x y + Busemann_function_at xi y z\n  Busemann_function_at xi x y\n  \\<le> Busemann_function_at xi x z + Busemann_function_at xi z y\n  Busemann_function_at xi y z + Busemann_function_at xi z y\n  \\<le> 2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. \\<bar>Busemann_function_at xi x y + Busemann_function_at xi y z -\n          Busemann_function_at xi x z\\<bar>\n    \\<le> 2 * deltaG TYPE('a)", "by auto"], ["", "text \\<open>The extended Gromov product can be bounded from below by the Busemann function.\\<close>"], ["", "lemma Busemann_function_le_Gromov_product:\n  \"- Busemann_function_at xi y x/2 \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- Busemann_function_at xi y x / 2)\n    \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal (- Busemann_function_at xi y x / 2)\n    \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)", "have A: \"-ereal(Busemann_function_at xi y x/2) \\<le> liminf (\\<lambda>n. Gromov_product_at x (u n) y)\"\n    if \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\" for u"], ["proof (prove)\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "have *: \"limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2) \\<le> limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n    \\<le> limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))", "by (auto intro!: Limsup_mono always_eventually simp: algebra_simps Gromov_product_at_def divide_simps dist_commute)"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n  \\<le> limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "also"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n  \\<le> limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "have \"... \\<le> ereal(Busemann_function_at xi y x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n    \\<le> ereal (Busemann_function_at xi y x)", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "using that"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n    \\<le> Sup {limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n))) |u.\n               (\\<lambda>n. to_Gromov_completion (u n))\n               \\<longlonglongrightarrow> xi}", "by (auto intro!: Sup_upper)"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist y (u n) - dist x (u n)))\n  \\<le> ereal (Busemann_function_at xi y x)\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "finally"], ["proof (chain)\npicking this:\n  limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n  \\<le> ereal (Busemann_function_at xi y x)", "have \"-ereal(Busemann_function_at xi y x) \\<le> liminf (\\<lambda>n. Gromov_product_at x (u n) y) * ereal 2\""], ["proof (prove)\nusing this:\n  limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n  \\<le> ereal (Busemann_function_at xi y x)\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y)) *\n          ereal 2", "apply (subst ereal_uminus_le_reorder, subst ereal_mult_minus_left[symmetric], subst ereal_Limsup_uminus[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n             \\<le> ereal (Busemann_function_at xi y x);\n     limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n     \\<le> ereal (Busemann_function_at xi y x);\n     limsup (\\<lambda>n. - ereal (Gromov_product_at x (u n) y) * 2)\n     \\<le> ereal (Busemann_function_at xi y x)\\<rbrakk>\n    \\<Longrightarrow> limsup\n                       (\\<lambda>xa.\n                           - ereal (Gromov_product_at x (u xa) y)) *\n                      ereal 2\n                      \\<le> ereal (Busemann_function_at xi y x)", "by (subst limsup_ereal_mult_right[symmetric], auto)"], ["proof (state)\nthis:\n  - ereal (Busemann_function_at xi y x)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y)) * ereal 2\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "moreover"], ["proof (state)\nthis:\n  - ereal (Busemann_function_at xi y x)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y)) * ereal 2\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "have \"-ereal(z/2) \\<le> t\" if \"-ereal z \\<le> t * ereal 2\" for z t"], ["proof (prove)\ngoal (1 subgoal):\n 1. - ereal (z / 2) \\<le> t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. - ereal (z / 2) \\<le> t", "have *: \"-ereal(z/2) = -ereal z / ereal 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - ereal (z / 2) = - ereal z / ereal 2", "unfolding ereal_divide"], ["proof (prove)\ngoal (1 subgoal):\n 1. - ereal (z / 2) = - ereal z / ereal 2", "by auto"], ["proof (state)\nthis:\n  - ereal (z / 2) = - ereal z / ereal 2\n\ngoal (1 subgoal):\n 1. - ereal (z / 2) \\<le> t", "have \"0 < ereal 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < ereal 2", "by auto"], ["proof (state)\nthis:\n  0 < ereal 2\n\ngoal (1 subgoal):\n 1. - ereal (z / 2) \\<le> t", "then"], ["proof (chain)\npicking this:\n  0 < ereal 2", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < ereal 2\n\ngoal (1 subgoal):\n 1. - ereal (z / 2) \\<le> t", "unfolding *"], ["proof (prove)\nusing this:\n  0 < ereal 2\n\ngoal (1 subgoal):\n 1. - ereal z / ereal 2 \\<le> t", "using that"], ["proof (prove)\nusing this:\n  0 < ereal 2\n  - ereal z \\<le> t * ereal 2\n\ngoal (1 subgoal):\n 1. - ereal z / ereal 2 \\<le> t", "by (metis (no_types) PInfty_neq_ereal(2) ereal_divide_le_posI ereal_uminus_eq_iff mult.commute that)"], ["proof (state)\nthis:\n  - ereal (z / 2) \\<le> t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  - ereal ?z \\<le> ?t * ereal 2 \\<Longrightarrow> - ereal (?z / 2) \\<le> ?t\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "ultimately"], ["proof (chain)\npicking this:\n  - ereal (Busemann_function_at xi y x)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y)) * ereal 2\n  - ereal ?z \\<le> ?t * ereal 2 \\<Longrightarrow> - ereal (?z / 2) \\<le> ?t", "show ?thesis"], ["proof (prove)\nusing this:\n  - ereal (Busemann_function_at xi y x)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y)) * ereal 2\n  - ereal ?z \\<le> ?t * ereal 2 \\<Longrightarrow> - ereal (?z / 2) \\<le> ?t\n\ngoal (1 subgoal):\n 1. - ereal (Busemann_function_at xi y x / 2)\n    \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))", "by auto"], ["proof (state)\nthis:\n  - ereal (Busemann_function_at xi y x / 2)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> xi \\<Longrightarrow>\n  - ereal (Busemann_function_at xi y x / 2)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (?u xa) y))\n\ngoal (1 subgoal):\n 1. ereal (- Busemann_function_at xi y x / 2)\n    \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- Busemann_function_at xi y x / 2)\n    \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)", "unfolding extended_Gromov_product_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- Busemann_function_at xi y x / 2)\n    \\<le> Inf {liminf\n                (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n))) |\n               u v.\n               abs_Gromov_completion u = xi \\<and>\n               abs_Gromov_completion v = to_Gromov_completion y \\<and>\n               Gromov_completion_rel u u \\<and> Gromov_completion_rel v v}", "proof (rule Inf_greatest, auto)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>xi = abs_Gromov_completion u;\n        abs_Gromov_completion v = to_Gromov_completion y;\n        Gromov_completion_rel u u; Gromov_completion_rel v v\\<rbrakk>\n       \\<Longrightarrow> ereal\n                          (- (Busemann_function_at (abs_Gromov_completion u)\n                               y x /\n                              2))\n                         \\<le> liminf\n                                (\\<lambda>n.\n                                    ereal (Gromov_product_at x (u n) (v n)))", "fix u v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>xi = abs_Gromov_completion u;\n        abs_Gromov_completion v = to_Gromov_completion y;\n        Gromov_completion_rel u u; Gromov_completion_rel v v\\<rbrakk>\n       \\<Longrightarrow> ereal\n                          (- (Busemann_function_at (abs_Gromov_completion u)\n                               y x /\n                              2))\n                         \\<le> liminf\n                                (\\<lambda>n.\n                                    ereal (Gromov_product_at x (u n) (v n)))", "assume uv: \"xi = abs_Gromov_completion u\" \"abs_Gromov_completion v = to_Gromov_completion y\" \"Gromov_completion_rel u u\" \"Gromov_completion_rel v v\""], ["proof (state)\nthis:\n  xi = abs_Gromov_completion u\n  abs_Gromov_completion v = to_Gromov_completion y\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>xi = abs_Gromov_completion u;\n        abs_Gromov_completion v = to_Gromov_completion y;\n        Gromov_completion_rel u u; Gromov_completion_rel v v\\<rbrakk>\n       \\<Longrightarrow> ereal\n                          (- (Busemann_function_at (abs_Gromov_completion u)\n                               y x /\n                              2))\n                         \\<le> liminf\n                                (\\<lambda>n.\n                                    ereal (Gromov_product_at x (u n) (v n)))", "then"], ["proof (chain)\npicking this:\n  xi = abs_Gromov_completion u\n  abs_Gromov_completion v = to_Gromov_completion y\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v", "have L: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\nusing this:\n  xi = abs_Gromov_completion u\n  abs_Gromov_completion v = to_Gromov_completion y\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "using abs_Gromov_completion_limit"], ["proof (prove)\nusing this:\n  xi = abs_Gromov_completion u\n  abs_Gromov_completion v = to_Gromov_completion y\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v\n  Gromov_completion_rel ?u ?u \\<Longrightarrow>\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> abs_Gromov_completion ?u\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>xi = abs_Gromov_completion u;\n        abs_Gromov_completion v = to_Gromov_completion y;\n        Gromov_completion_rel u u; Gromov_completion_rel v v\\<rbrakk>\n       \\<Longrightarrow> ereal\n                          (- (Busemann_function_at (abs_Gromov_completion u)\n                               y x /\n                              2))\n                         \\<le> liminf\n                                (\\<lambda>n.\n                                    ereal (Gromov_product_at x (u n) (v n)))", "have *: \"v n = y\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. v n = y", "using uv"], ["proof (prove)\nusing this:\n  xi = abs_Gromov_completion u\n  abs_Gromov_completion v = to_Gromov_completion y\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v\n\ngoal (1 subgoal):\n 1. v n = y", "by (metis (mono_tags, hide_lams) Gromov_completion_rel_def Quotient3_Gromov_completion Quotient3_rep_abs abs_Gromov_completion_in_Gromov_boundary not_in_Gromov_boundary' rep_Gromov_completion_to_Gromov_completion)"], ["proof (state)\nthis:\n  v ?n = y\n\ngoal (1 subgoal):\n 1. \\<And>u v.\n       \\<lbrakk>xi = abs_Gromov_completion u;\n        abs_Gromov_completion v = to_Gromov_completion y;\n        Gromov_completion_rel u u; Gromov_completion_rel v v\\<rbrakk>\n       \\<Longrightarrow> ereal\n                          (- (Busemann_function_at (abs_Gromov_completion u)\n                               y x /\n                              2))\n                         \\<le> liminf\n                                (\\<lambda>n.\n                                    ereal (Gromov_product_at x (u n) (v n)))", "show \"ereal (- (Busemann_function_at (abs_Gromov_completion u) y x / 2)) \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- (Busemann_function_at (abs_Gromov_completion u) y x / 2))\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n)))", "unfolding uv(1)[symmetric] *"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (- (Busemann_function_at xi y x / 2))\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) y))", "using A[OF L]"], ["proof (prove)\nusing this:\n  - ereal (Busemann_function_at xi y x / 2)\n  \\<le> liminf (\\<lambda>xa. ereal (Gromov_product_at x (u xa) y))\n\ngoal (1 subgoal):\n 1. ereal (- (Busemann_function_at xi y x / 2))\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) y))", "by simp"], ["proof (state)\nthis:\n  ereal (- (Busemann_function_at (abs_Gromov_completion u) y x / 2))\n  \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at x (u n) (v n)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ereal (- Busemann_function_at xi y x / 2)\n  \\<le> extended_Gromov_product_at x xi (to_Gromov_completion y)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>It follows that, if the Busemann function tends to minus infinity, i.e., the distance to\n$\\xi$ becomes smaller and smaller in a suitable sense, then the sequence is converging to $\\xi$.\nThis is only an implication: one can have sequences tending to $\\xi$ for which the Busemann function\ndoes not tend to $-\\infty$. This is in fact a stronger notion of convergence, sometimes called\nradial convergence.\\<close>"], ["", "proposition Busemann_function_minus_infinity_imp_convergent:\n  assumes \"((\\<lambda>n. Busemann_function_at xi (u n) x) \\<longlongrightarrow> -\\<infinity>) F\"\n  shows \"((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "proof (cases \"trivial_limit F\")"], ["proof (state)\ngoal (2 subgoals):\n 1. F = bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F\n 2. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "case True"], ["proof (state)\nthis:\n  F = bot\n\ngoal (2 subgoals):\n 1. F = bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F\n 2. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "then"], ["proof (chain)\npicking this:\n  F = bot", "show ?thesis"], ["proof (prove)\nusing this:\n  F = bot\n\ngoal (1 subgoal):\n 1. ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "case False"], ["proof (state)\nthis:\n  F \\<noteq> bot\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "have \"xi \\<in> Gromov_boundary\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary", "proof (cases xi)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       xi = to_Gromov_completion x \\<Longrightarrow>\n       xi \\<in> Gromov_boundary\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "case (to_Gromov_completion z)"], ["proof (state)\nthis:\n  xi = to_Gromov_completion z\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       xi = to_Gromov_completion x \\<Longrightarrow>\n       xi \\<in> Gromov_boundary\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "then"], ["proof (chain)\npicking this:\n  xi = to_Gromov_completion z", "have \"ereal(Busemann_function_at xi (u n) x) \\<ge> - dist x z\" for n"], ["proof (prove)\nusing this:\n  xi = to_Gromov_completion z\n\ngoal (1 subgoal):\n 1. ereal (- dist x z) \\<le> ereal (Busemann_function_at xi (u n) x)", "unfolding to_Gromov_completion Busemann_function_inner"], ["proof (prove)\nusing this:\n  to_Gromov_completion z = to_Gromov_completion z\n\ngoal (1 subgoal):\n 1. ereal (- dist x z) \\<le> ereal (dist (u n) z - dist x z)", "by auto"], ["proof (state)\nthis:\n  ereal (- dist x z) \\<le> ereal (Busemann_function_at xi (u ?n) x)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       xi = to_Gromov_completion x \\<Longrightarrow>\n       xi \\<in> Gromov_boundary\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "then"], ["proof (chain)\npicking this:\n  ereal (- dist x z) \\<le> ereal (Busemann_function_at xi (u ?n) x)", "have \"-\\<infinity> \\<ge> -dist x z\""], ["proof (prove)\nusing this:\n  ereal (- dist x z) \\<le> ereal (Busemann_function_at xi (u ?n) x)\n\ngoal (1 subgoal):\n 1. ereal (- dist x z) \\<le> - \\<infinity>", "using tendsto_lowerbound[OF assms always_eventually False]"], ["proof (prove)\nusing this:\n  ereal (- dist x z) \\<le> ereal (Busemann_function_at xi (u ?n) x)\n  \\<forall>xa.\n     ?a \\<le> ereal (Busemann_function_at xi (u xa) x) \\<Longrightarrow>\n  ?a \\<le> - \\<infinity>\n\ngoal (1 subgoal):\n 1. ereal (- dist x z) \\<le> - \\<infinity>", "by metis"], ["proof (state)\nthis:\n  ereal (- dist x z) \\<le> - \\<infinity>\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       xi = to_Gromov_completion x \\<Longrightarrow>\n       xi \\<in> Gromov_boundary\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "then"], ["proof (chain)\npicking this:\n  ereal (- dist x z) \\<le> - \\<infinity>", "have False"], ["proof (prove)\nusing this:\n  ereal (- dist x z) \\<le> - \\<infinity>\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       xi = to_Gromov_completion x \\<Longrightarrow>\n       xi \\<in> Gromov_boundary\n 2. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "then"], ["proof (chain)\npicking this:\n  False", "show ?thesis"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary", "by auto"], ["proof (state)\nthis:\n  xi \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. xi \\<in> Gromov_boundary \\<Longrightarrow> xi \\<in> Gromov_boundary", "qed"], ["proof (state)\nthis:\n  xi \\<in> Gromov_boundary\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "have \"((\\<lambda>n. - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow> (- (-\\<infinity>)/2)) F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>n.\n         - ereal (Busemann_function_at xi (u n) x) /\n         2) \\<longlongrightarrow>\n     - (- \\<infinity>) / 2)\n     F", "apply (intro tendsto_intros)"], ["proof (prove)\ngoal (3 subgoals):\n 1. ((\\<lambda>xa.\n         ereal (Busemann_function_at xi (u xa) x)) \\<longlongrightarrow>\n     - \\<infinity>)\n     F\n 2. 2 \\<noteq> 0\n 3. \\<not> (\\<bar>- (- \\<infinity>)\\<bar> = \\<infinity> \\<and>\n            \\<bar>2\\<bar> = \\<infinity>)", "using assms"], ["proof (prove)\nusing this:\n  ((\\<lambda>xa.\n       ereal (Busemann_function_at xi (u xa) x)) \\<longlongrightarrow>\n   - \\<infinity>)\n   F\n\ngoal (3 subgoals):\n 1. ((\\<lambda>xa.\n         ereal (Busemann_function_at xi (u xa) x)) \\<longlongrightarrow>\n     - \\<infinity>)\n     F\n 2. 2 \\<noteq> 0\n 3. \\<not> (\\<bar>- (- \\<infinity>)\\<bar> = \\<infinity> \\<and>\n            \\<bar>2\\<bar> = \\<infinity>)", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>n.\n       - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow>\n   - (- \\<infinity>) / 2)\n   F\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>n.\n       - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow>\n   - (- \\<infinity>) / 2)\n   F", "have *: \"((\\<lambda>n. - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow> \\<infinity>) F\""], ["proof (prove)\nusing this:\n  ((\\<lambda>n.\n       - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow>\n   - (- \\<infinity>) / 2)\n   F\n\ngoal (1 subgoal):\n 1. ((\\<lambda>n.\n         - ereal (Busemann_function_at xi (u n) x) /\n         2) \\<longlongrightarrow>\n     \\<infinity>)\n     F", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>n.\n       - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow>\n   \\<infinity>)\n   F\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "have **: \"((\\<lambda>n. extended_Gromov_product_at x xi (to_Gromov_completion (u n))) \\<longlongrightarrow> \\<infinity>) F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>n.\n         extended_Gromov_product_at x xi\n          (to_Gromov_completion (u n))) \\<longlongrightarrow>\n     \\<infinity>)\n     F", "apply (rule tendsto_sandwich[of \"\\<lambda>n. - ereal (Busemann_function_at xi (u n) x) / 2\" _ _ \"\\<lambda>n. \\<infinity>\", OF always_eventually always_eventually])"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<forall>xa.\n       - ereal (Busemann_function_at xi (u xa) x) / 2\n       \\<le> extended_Gromov_product_at x xi (to_Gromov_completion (u xa))\n 2. \\<forall>xa.\n       extended_Gromov_product_at x xi (to_Gromov_completion (u xa))\n       \\<le> \\<infinity>\n 3. ((\\<lambda>n.\n         - ereal (Busemann_function_at xi (u n) x) /\n         2) \\<longlongrightarrow>\n     \\<infinity>)\n     F\n 4. ((\\<lambda>n. \\<infinity>) \\<longlongrightarrow> \\<infinity>) F", "using Busemann_function_le_Gromov_product[of xi _ x] *"], ["proof (prove)\nusing this:\n  ereal (- Busemann_function_at xi ?y x / 2)\n  \\<le> extended_Gromov_product_at x xi (to_Gromov_completion ?y)\n  ((\\<lambda>n.\n       - ereal (Busemann_function_at xi (u n) x) / 2) \\<longlongrightarrow>\n   \\<infinity>)\n   F\n\ngoal (4 subgoals):\n 1. \\<forall>xa.\n       - ereal (Busemann_function_at xi (u xa) x) / 2\n       \\<le> extended_Gromov_product_at x xi (to_Gromov_completion (u xa))\n 2. \\<forall>xa.\n       extended_Gromov_product_at x xi (to_Gromov_completion (u xa))\n       \\<le> \\<infinity>\n 3. ((\\<lambda>n.\n         - ereal (Busemann_function_at xi (u n) x) /\n         2) \\<longlongrightarrow>\n     \\<infinity>)\n     F\n 4. ((\\<lambda>n. \\<infinity>) \\<longlongrightarrow> \\<infinity>) F", "by auto"], ["proof (state)\nthis:\n  ((\\<lambda>n.\n       extended_Gromov_product_at x xi\n        (to_Gromov_completion (u n))) \\<longlongrightarrow>\n   \\<infinity>)\n   F\n\ngoal (1 subgoal):\n 1. F \\<noteq> bot \\<Longrightarrow>\n    ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "using extended_Gromov_product_tendsto_PInf_a_b[OF **, of basepoint]"], ["proof (prove)\nusing this:\n  ((\\<lambda>n.\n       extended_Gromov_product_at basepoint xi\n        (to_Gromov_completion (u n))) \\<longlongrightarrow>\n   \\<infinity>)\n   F\n\ngoal (1 subgoal):\n 1. ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F", "by (auto simp add: Gromov_completion_boundary_limit[OF \\<open>xi \\<in> Gromov_boundary\\<close>] extended_Gromov_product_at_commute)"], ["proof (state)\nthis:\n  ((\\<lambda>n. to_Gromov_completion (u n)) \\<longlongrightarrow> xi) F\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Busemann functions are invariant under isometries. This is trivial as everything is defined\nin terms of the distance, but the definition in terms of supremum and limsups makes the proof\ntedious.\\<close>"], ["", "lemma Busemann_function_isometry:\n  assumes \"isometry f\"\n  shows \"Busemann_function_at (Gromov_extension f xi) (f x) (f y) = Busemann_function_at xi x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n    Busemann_function_at xi x y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n    Busemann_function_at xi x y", "have \"{limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n))) |u. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi}\n        = {limsup (\\<lambda>n. ereal(dist (f x) (v n) - dist (f y) (v n))) |v. (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f xi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n     (\\<lambda>n. to_Gromov_completion (u n))\n     \\<longlonglongrightarrow> xi} =\n    {limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) |v.\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> Gromov_extension f xi}", "proof (auto)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "fix u"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "assume u: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\""], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "define v where \"v = f o u\""], ["proof (state)\nthis:\n  v = f \\<circ> u\n\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (v n))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "unfolding v_def comp_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "using u Gromov_extension_isometry(2)[OF \\<open>isometry f\\<close>]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  continuous_on UNIV (Gromov_extension f)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension f (to_Gromov_completion (u n)))\n    \\<longlonglongrightarrow> Gromov_extension f xi", "by (metis continuous_on filterlim_compose iso_tuple_UNIV_I tendsto_at_iff_tendsto_nhds)"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have \"limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) = limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n    limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))", "unfolding v_def comp_def isometryD(2)[OF \\<open>isometry f\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n    limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))", "by simp"], ["proof (state)\nthis:\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\n\ngoal (2 subgoals):\n 1. \\<And>u.\n       (\\<lambda>n. to_Gromov_completion (u n))\n       \\<longlonglongrightarrow> xi \\<Longrightarrow>\n       \\<exists>v.\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n          limsup\n           (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (v n))\n          \\<longlonglongrightarrow> Gromov_extension f xi\n 2. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))", "show \"\\<exists>v. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) = limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n              (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f xi\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n  limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n       limsup\n        (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi", "by blast"], ["proof (state)\nthis:\n  \\<exists>v.\n     limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) =\n     limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) \\<and>\n     (\\<lambda>n. to_Gromov_completion (v n))\n     \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "assume v: \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> Gromov_extension f xi\""], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "define u where \"u = (inv f) o v\""], ["proof (state)\nthis:\n  u = inv f \\<circ> v\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have \"isometry (inv f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isometry (inv f)", "using isometry_inverse(1)[OF \\<open>isometry f\\<close>]"], ["proof (prove)\nusing this:\n  isometry (inv f)\n\ngoal (1 subgoal):\n 1. isometry (inv f)", "by simp"], ["proof (state)\nthis:\n  isometry (inv f)\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have *: \"inv f (f z) = z\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. inv f (f z) = z", "using isometry_inverse(2)[OF \\<open>isometry f\\<close>]"], ["proof (prove)\nusing this:\n  bij f\n\ngoal (1 subgoal):\n 1. inv f (f z) = z", "by (simp add: bij_betw_def)"], ["proof (state)\nthis:\n  inv f (f ?z) = ?z\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have **: \"(Gromov_extension (inv f) (Gromov_extension f xi)) = xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "using Gromov_extension_isometry_composition[OF \\<open>isometry f\\<close> \\<open>isometry (inv f)\\<close>]"], ["proof (prove)\nusing this:\n  Gromov_extension (inv f \\<circ> f) =\n  Gromov_extension (inv f) \\<circ> Gromov_extension f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "unfolding comp_def"], ["proof (prove)\nusing this:\n  Gromov_extension (\\<lambda>x. inv f (f x)) =\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x))\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "using isometry_inverse(2)[OF \\<open>isometry f\\<close>]"], ["proof (prove)\nusing this:\n  Gromov_extension (\\<lambda>x. inv f (f x)) =\n  (\\<lambda>x. Gromov_extension (inv f) (Gromov_extension f x))\n  bij f\n\ngoal (1 subgoal):\n 1. Gromov_extension (inv f) (Gromov_extension f xi) = xi", "by (auto simp: *, metis)"], ["proof (state)\nthis:\n  Gromov_extension (inv f) (Gromov_extension f xi) = xi\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f xi)", "unfolding u_def comp_def Gromov_extension_inside_space[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (inv f) (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f xi)", "using v Gromov_extension_isometry(2)[OF \\<open>isometry (inv f)\\<close>]"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (v n))\n  \\<longlonglongrightarrow> Gromov_extension f xi\n  continuous_on UNIV (Gromov_extension (inv f))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. Gromov_extension (inv f) (to_Gromov_completion (v n)))\n    \\<longlonglongrightarrow> Gromov_extension (inv f)\n                               (Gromov_extension f xi)", "by (metis continuous_on filterlim_compose iso_tuple_UNIV_I tendsto_at_iff_tendsto_nhds)"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)", "have \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "using **"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n))\n  \\<longlonglongrightarrow> Gromov_extension (inv f) (Gromov_extension f xi)\n  Gromov_extension (inv f) (Gromov_extension f xi) = xi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "have \"limsup (\\<lambda>n. ereal (dist ((inv f) (f x)) (u n) - dist ((inv f) (f y)) (u n))) = limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup\n     (\\<lambda>n.\n         ereal (dist (inv f (f x)) (u n) - dist (inv f (f y)) (u n))) =\n    limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))", "unfolding u_def comp_def isometryD(2)[OF \\<open>isometry (inv f)\\<close>]"], ["proof (prove)\ngoal (1 subgoal):\n 1. limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n    limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))", "by simp"], ["proof (state)\nthis:\n  limsup\n   (\\<lambda>n.\n       ereal (dist (inv f (f x)) (u n) - dist (inv f (f y)) (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<lambda>n. to_Gromov_completion (v n))\n       \\<longlonglongrightarrow> Gromov_extension f xi \\<Longrightarrow>\n       \\<exists>u.\n          limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n          limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n          (\\<lambda>n. to_Gromov_completion (u n))\n          \\<longlonglongrightarrow> xi", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  limsup\n   (\\<lambda>n.\n       ereal (dist (inv f (f x)) (u n) - dist (inv f (f y)) (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))", "show \"\\<exists>u. limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) = limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and> (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  limsup\n   (\\<lambda>n.\n       ereal (dist (inv f (f x)) (u n) - dist (inv f (f y)) (u n))) =\n  limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n)))\n\ngoal (1 subgoal):\n 1. \\<exists>u.\n       limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n       limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n       (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi", "by (simp add: *, force)"], ["proof (state)\nthis:\n  \\<exists>u.\n     limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) =\n     limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) \\<and>\n     (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n   (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} =\n  {limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) |v.\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f xi}\n\ngoal (1 subgoal):\n 1. Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n    Busemann_function_at xi x y", "then"], ["proof (chain)\npicking this:\n  {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n   (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} =\n  {limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) |v.\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f xi}", "have \"ereal (Busemann_function_at xi x y) = ereal (Busemann_function_at (Gromov_extension f xi) (f x) (f y))\""], ["proof (prove)\nusing this:\n  {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n   (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} =\n  {limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) |v.\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f xi}\n\ngoal (1 subgoal):\n 1. ereal (Busemann_function_at xi x y) =\n    ereal (Busemann_function_at (Gromov_extension f xi) (f x) (f y))", "unfolding Busemann_function_ereal"], ["proof (prove)\nusing this:\n  {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n   (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi} =\n  {limsup (\\<lambda>n. ereal (dist (f x) (v n) - dist (f y) (v n))) |v.\n   (\\<lambda>n. to_Gromov_completion (v n))\n   \\<longlonglongrightarrow> Gromov_extension f xi}\n\ngoal (1 subgoal):\n 1. Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n         (\\<lambda>n. to_Gromov_completion (u n))\n         \\<longlonglongrightarrow> xi} =\n    Sup {limsup (\\<lambda>n. ereal (dist (f x) (u n) - dist (f y) (u n))) |\n         u. (\\<lambda>n. to_Gromov_completion (u n))\n            \\<longlonglongrightarrow> Gromov_extension f xi}", "by auto"], ["proof (state)\nthis:\n  ereal (Busemann_function_at xi x y) =\n  ereal (Busemann_function_at (Gromov_extension f xi) (f x) (f y))\n\ngoal (1 subgoal):\n 1. Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n    Busemann_function_at xi x y", "then"], ["proof (chain)\npicking this:\n  ereal (Busemann_function_at xi x y) =\n  ereal (Busemann_function_at (Gromov_extension f xi) (f x) (f y))", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal (Busemann_function_at xi x y) =\n  ereal (Busemann_function_at (Gromov_extension f xi) (f x) (f y))\n\ngoal (1 subgoal):\n 1. Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n    Busemann_function_at xi x y", "by auto"], ["proof (state)\nthis:\n  Busemann_function_at (Gromov_extension f xi) (f x) (f y) =\n  Busemann_function_at xi x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma dist_le_max_Busemann_functions [mono_intros]:\n  assumes \"xi \\<noteq> eta\"\n  shows \"dist x (y::'a::Gromov_hyperbolic_space) \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta)\n            + max (Busemann_function_at xi x y) (Busemann_function_at eta x y) + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "have A: \"ereal(dist x y - 2 * deltaG(TYPE('a)) - max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) / ereal 2 \\<le>\n                    liminf (\\<lambda>n. ereal(Gromov_product_at y (u n) (v n)))\"\n    if uv: \"abs_Gromov_completion u = xi\" \"abs_Gromov_completion v = eta\" \"Gromov_completion_rel u u\" \"Gromov_completion_rel v v\" for u v"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have C: \"(\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\" \"(\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n))\n    \\<longlonglongrightarrow> xi &&&\n    (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta", "using uv abs_Gromov_completion_limit"], ["proof (prove)\nusing this:\n  abs_Gromov_completion u = xi\n  abs_Gromov_completion v = eta\n  Gromov_completion_rel u u\n  Gromov_completion_rel v v\n  Gromov_completion_rel ?u ?u \\<Longrightarrow>\n  (\\<lambda>n. to_Gromov_completion (?u n))\n  \\<longlonglongrightarrow> abs_Gromov_completion ?u\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. to_Gromov_completion (u n))\n    \\<longlonglongrightarrow> xi &&&\n    (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have \"ereal(dist x y) \\<le> ereal(2 * Gromov_product_at y (u n) (v n)) + 2 * deltaG(TYPE('a)) + max (ereal(dist x (u n) - dist y (u n))) (ereal(dist x (v n) - dist y (v n)))\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "have \"min (Gromov_product_at y (u n) x) (Gromov_product_at y x (v n)) \\<le> Gromov_product_at y (u n) (v n) + deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (Gromov_product_at y (u n) x) (Gromov_product_at y x (v n))\n    \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a)", "by (intro mono_intros)"], ["proof (state)\nthis:\n  min (Gromov_product_at y (u n) x) (Gromov_product_at y x (v n))\n  \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "then"], ["proof (chain)\npicking this:\n  min (Gromov_product_at y (u n) x) (Gromov_product_at y x (v n))\n  \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a)", "consider \"Gromov_product_at y (u n) x \\<le> Gromov_product_at y (u n) (v n) + deltaG(TYPE('a))\"|\"Gromov_product_at y x (v n) \\<le> Gromov_product_at y (u n) (v n) + deltaG(TYPE('a))\""], ["proof (prove)\nusing this:\n  min (Gromov_product_at y (u n) x) (Gromov_product_at y x (v n))\n  \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Gromov_product_at y (u n) x\n             \\<le> Gromov_product_at y (u n) (v n) +\n                   deltaG TYPE('a) \\<Longrightarrow>\n             thesis;\n     Gromov_product_at y x (v n)\n     \\<le> Gromov_product_at y (u n) (v n) +\n           deltaG TYPE('a) \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by linarith"], ["proof (state)\nthis:\n  \\<lbrakk>Gromov_product_at y (u n) x\n           \\<le> Gromov_product_at y (u n) (v n) +\n                 deltaG TYPE('a) \\<Longrightarrow>\n           ?thesis;\n   Gromov_product_at y x (v n)\n   \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a) \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>Gromov_product_at y (u n) x\n           \\<le> Gromov_product_at y (u n) (v n) +\n                 deltaG TYPE('a) \\<Longrightarrow>\n           ?thesis;\n   Gromov_product_at y x (v n)\n   \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a) \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "have \"dist x y \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG(TYPE('a)) + max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Gromov_product_at y (u n) x\n           \\<le> Gromov_product_at y (u n) (v n) +\n                 deltaG TYPE('a) \\<Longrightarrow>\n           ?thesis;\n   Gromov_product_at y x (v n)\n   \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a) \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n          max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))", "unfolding Gromov_product_at_def[of _ x] Gromov_product_at_def[of _ _ x]"], ["proof (prove)\nusing this:\n  \\<lbrakk>(dist y (u n) + dist y x - dist (u n) x) / 2\n           \\<le> Gromov_product_at y (u n) (v n) +\n                 deltaG TYPE('a) \\<Longrightarrow>\n           ?thesis;\n   (dist y x + dist y (v n) - dist x (v n)) / 2\n   \\<le> Gromov_product_at y (u n) (v n) + deltaG TYPE('a) \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n          max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))", "apply (cases)"], ["proof (prove)\ngoal (2 subgoals):\n 1. (dist y (u n) + dist y x - dist (u n) x) / 2\n    \\<le> Gromov_product_at y (u n) (v n) +\n          deltaG TYPE('a) \\<Longrightarrow>\n    dist x y\n    \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n          max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))\n 2. (dist y x + dist y (v n) - dist x (v n)) / 2\n    \\<le> Gromov_product_at y (u n) (v n) +\n          deltaG TYPE('a) \\<Longrightarrow>\n    dist x y\n    \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n          max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))", "by (auto simp add: algebra_simps divide_simps dist_commute)"], ["proof (state)\nthis:\n  dist x y\n  \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n        max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "then"], ["proof (chain)\npicking this:\n  dist x y\n  \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n        max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))", "show ?thesis"], ["proof (prove)\nusing this:\n  dist x y\n  \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n        max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (dist x (u n) - dist y (u n)))\n           (ereal (dist x (v n) - dist y (v n)))", "unfolding ereal_max[symmetric] plus_ereal.simps(1)"], ["proof (prove)\nusing this:\n  dist x y\n  \\<le> 2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n        max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n))\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> ereal\n           (2 * Gromov_product_at y (u n) (v n) + 2 * deltaG TYPE('a) +\n            max (dist x (u n) - dist y (u n)) (dist x (v n) - dist y (v n)))", "by auto"], ["proof (state)\nthis:\n  ereal (dist x y)\n  \\<le> ereal (2 * Gromov_product_at y (u n) (v n)) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (dist x (u n) - dist y (u n)))\n         (ereal (dist x (v n) - dist y (v n)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ereal (dist x y)\n  \\<le> ereal (2 * Gromov_product_at y (u ?n) (v ?n)) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (dist x (u ?n) - dist y (u ?n)))\n         (ereal (dist x (v ?n) - dist y (v ?n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "then"], ["proof (chain)\npicking this:\n  ereal (dist x y)\n  \\<le> ereal (2 * Gromov_product_at y (u ?n) (v ?n)) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (dist x (u ?n) - dist y (u ?n)))\n         (ereal (dist x (v ?n) - dist y (v ?n)))", "have \"ereal (dist x y) \\<le> liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n)) + 2 * deltaG(TYPE('a)) + max (ereal(dist x (u n) - dist y (u n))) (ereal(dist x (v n) - dist y (v n))))\""], ["proof (prove)\nusing this:\n  ereal (dist x y)\n  \\<le> ereal (2 * Gromov_product_at y (u ?n) (v ?n)) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (dist x (u ?n) - dist y (u ?n)))\n         (ereal (dist x (v ?n) - dist y (v ?n)))\n\ngoal (1 subgoal):\n 1. ereal (dist x y)\n    \\<le> liminf\n           (\\<lambda>n.\n               ereal (2 * Gromov_product_at y (u n) (v n)) +\n               ereal (2 * deltaG TYPE('a)) +\n               max (ereal (dist x (u n) - dist y (u n)))\n                (ereal (dist x (v n) - dist y (v n))))", "by (intro Liminf_bounded always_eventually, auto)"], ["proof (state)\nthis:\n  ereal (dist x y)\n  \\<le> liminf\n         (\\<lambda>n.\n             ereal (2 * Gromov_product_at y (u n) (v n)) +\n             ereal (2 * deltaG TYPE('a)) +\n             max (ereal (dist x (u n) - dist y (u n)))\n              (ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "also"], ["proof (state)\nthis:\n  ereal (dist x y)\n  \\<le> liminf\n         (\\<lambda>n.\n             ereal (2 * Gromov_product_at y (u n) (v n)) +\n             ereal (2 * deltaG TYPE('a)) +\n             max (ereal (dist x (u n) - dist y (u n)))\n              (ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have \"... \\<le> liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n)) + 2 * deltaG(TYPE('a))) + limsup (\\<lambda>n. max (ereal(dist x (u n) - dist y (u n))) (ereal(dist x (v n) - dist y (v n))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf\n     (\\<lambda>n.\n         ereal (2 * Gromov_product_at y (u n) (v n)) +\n         ereal (2 * deltaG TYPE('a)) +\n         max (ereal (dist x (u n) - dist y (u n)))\n          (ereal (dist x (v n) - dist y (v n))))\n    \\<le> liminf\n           (\\<lambda>n.\n               ereal (2 * Gromov_product_at y (u n) (v n)) +\n               ereal (2 * deltaG TYPE('a))) +\n          limsup\n           (\\<lambda>n.\n               max (ereal (dist x (u n) - dist y (u n)))\n                (ereal (dist x (v n) - dist y (v n))))", "by (rule ereal_liminf_limsup_add)"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       ereal (2 * Gromov_product_at y (u n) (v n)) +\n       ereal (2 * deltaG TYPE('a)) +\n       max (ereal (dist x (u n) - dist y (u n)))\n        (ereal (dist x (v n) - dist y (v n))))\n  \\<le> liminf\n         (\\<lambda>n.\n             ereal (2 * Gromov_product_at y (u n) (v n)) +\n             ereal (2 * deltaG TYPE('a))) +\n        limsup\n         (\\<lambda>n.\n             max (ereal (dist x (u n) - dist y (u n)))\n              (ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "also"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       ereal (2 * Gromov_product_at y (u n) (v n)) +\n       ereal (2 * deltaG TYPE('a)) +\n       max (ereal (dist x (u n) - dist y (u n)))\n        (ereal (dist x (v n) - dist y (v n))))\n  \\<le> liminf\n         (\\<lambda>n.\n             ereal (2 * Gromov_product_at y (u n) (v n)) +\n             ereal (2 * deltaG TYPE('a))) +\n        limsup\n         (\\<lambda>n.\n             max (ereal (dist x (u n) - dist y (u n)))\n              (ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have \"... = liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n))) + 2 * deltaG(TYPE('a)) + max (limsup (\\<lambda>n. ereal(dist x (u n) - dist y (u n)))) (limsup (\\<lambda>n. ereal(dist x (v n) - dist y (v n))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf\n     (\\<lambda>n.\n         ereal (2 * Gromov_product_at y (u n) (v n)) +\n         ereal (2 * deltaG TYPE('a))) +\n    limsup\n     (\\<lambda>n.\n         max (ereal (dist x (u n) - dist y (u n)))\n          (ereal (dist x (v n) - dist y (v n)))) =\n    liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n    ereal (2 * deltaG TYPE('a)) +\n    max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n     (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))", "apply (subst Liminf_add_ereal_right)"], ["proof (prove)\ngoal (3 subgoals):\n 1. sequentially \\<noteq> bot\n 2. \\<bar>ereal (2 * deltaG TYPE('a))\\<bar> \\<noteq> \\<infinity>\n 3. liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n    ereal (2 * deltaG TYPE('a)) +\n    limsup\n     (\\<lambda>n.\n         max (ereal (dist x (u n) - dist y (u n)))\n          (ereal (dist x (v n) - dist y (v n)))) =\n    liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n    ereal (2 * deltaG TYPE('a)) +\n    max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n     (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))", "by (auto simp add: Limsup_max_eq_max_Limsup)"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       ereal (2 * Gromov_product_at y (u n) (v n)) +\n       ereal (2 * deltaG TYPE('a))) +\n  limsup\n   (\\<lambda>n.\n       max (ereal (dist x (u n) - dist y (u n)))\n        (ereal (dist x (v n) - dist y (v n)))) =\n  liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n  ereal (2 * deltaG TYPE('a)) +\n  max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n   (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "also"], ["proof (state)\nthis:\n  liminf\n   (\\<lambda>n.\n       ereal (2 * Gromov_product_at y (u n) (v n)) +\n       ereal (2 * deltaG TYPE('a))) +\n  limsup\n   (\\<lambda>n.\n       max (ereal (dist x (u n) - dist y (u n)))\n        (ereal (dist x (v n) - dist y (v n)))) =\n  liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n  ereal (2 * deltaG TYPE('a)) +\n  max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n   (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have \"... \\<le> liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n))) + 2 * deltaG(TYPE('a)) + max (ereal(Busemann_function_at xi x y)) (Busemann_function_at eta x y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n    ereal (2 * deltaG TYPE('a)) +\n    max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n     (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (ereal (Busemann_function_at xi x y))\n           (ereal (Busemann_function_at eta x y))", "unfolding Busemann_function_ereal"], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n    ereal (2 * deltaG TYPE('a)) +\n    max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n     (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n          ereal (2 * deltaG TYPE('a)) +\n          max (Sup {limsup\n                     (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                    u. (\\<lambda>n. to_Gromov_completion (u n))\n                       \\<longlonglongrightarrow> xi})\n           (Sup {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |\n                 u. (\\<lambda>n. to_Gromov_completion (u n))\n                    \\<longlonglongrightarrow> eta})", "apply (intro mono_intros Sup_upper)"], ["proof (prove)\ngoal (2 subgoals):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}\n 2. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> eta}", "using C"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (u n)) \\<longlonglongrightarrow> xi\n  (\\<lambda>n. to_Gromov_completion (v n)) \\<longlonglongrightarrow> eta\n\ngoal (2 subgoals):\n 1. limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> xi}\n 2. limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n)))\n    \\<in> {limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))) |u.\n           (\\<lambda>n. to_Gromov_completion (u n))\n           \\<longlonglongrightarrow> eta}", "by auto"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n  ereal (2 * deltaG TYPE('a)) +\n  max (limsup (\\<lambda>n. ereal (dist x (u n) - dist y (u n))))\n   (limsup (\\<lambda>n. ereal (dist x (v n) - dist y (v n))))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (Busemann_function_at xi x y))\n         (ereal (Busemann_function_at eta x y))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "finally"], ["proof (chain)\npicking this:\n  ereal (dist x y)\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (Busemann_function_at xi x y))\n         (ereal (Busemann_function_at eta x y))", "have \"ereal(dist x y) - ereal(2 * deltaG(TYPE('a)) + max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) \\<le>\n                    liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n)))\""], ["proof (prove)\nusing this:\n  ereal (dist x y)\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n        ereal (2 * deltaG TYPE('a)) +\n        max (ereal (Busemann_function_at xi x y))\n         (ereal (Busemann_function_at eta x y))\n\ngoal (1 subgoal):\n 1. ereal (dist x y) -\n    ereal\n     (2 * deltaG TYPE('a) +\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))", "unfolding ereal_max[symmetric] add.assoc plus_ereal.simps(1)"], ["proof (prove)\nusing this:\n  ereal (dist x y)\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) +\n        ereal\n         (2 * deltaG TYPE('a) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n\ngoal (1 subgoal):\n 1. ereal (dist x y) -\n    ereal\n     (2 * deltaG TYPE('a) +\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))", "by (subst ereal_minus_le, auto)"], ["proof (state)\nthis:\n  ereal (dist x y) -\n  ereal\n   (2 * deltaG TYPE('a) +\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "then"], ["proof (chain)\npicking this:\n  ereal (dist x y) -\n  ereal\n   (2 * deltaG TYPE('a) +\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))", "have \"ereal(dist x y - 2 * deltaG(TYPE('a)) - max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) \\<le>\n                    liminf (\\<lambda>n. ereal(2 * Gromov_product_at y (u n) (v n)))\""], ["proof (prove)\nusing this:\n  ereal (dist x y) -\n  ereal\n   (2 * deltaG TYPE('a) +\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))", "unfolding ereal_minus(1)"], ["proof (prove)\nusing this:\n  ereal\n   (dist x y -\n    (2 * deltaG TYPE('a) +\n     max (Busemann_function_at xi x y) (Busemann_function_at eta x y)))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n    \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))", "by (auto simp add: algebra_simps)"], ["proof (state)\nthis:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "also"], ["proof (state)\nthis:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "have \"... = ereal 2 * liminf (\\<lambda>n. ereal(Gromov_product_at y (u n) (v n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) =\n    ereal 2 * liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "unfolding times_ereal.simps(1)[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. liminf (\\<lambda>n. ereal 2 * ereal (Gromov_product_at y (u n) (v n))) =\n    ereal 2 * liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "by (subst Liminf_ereal_mult_left, auto)"], ["proof (state)\nthis:\n  liminf (\\<lambda>n. ereal (2 * Gromov_product_at y (u n) (v n))) =\n  ereal 2 * liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "finally"], ["proof (chain)\npicking this:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> ereal 2 *\n        liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y))\n  \\<le> ereal 2 *\n        liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))\n\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))", "by (subst ereal_divide_le_pos, auto)"], ["proof (state)\nthis:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n  ereal 2\n  \\<le> liminf (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n)))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>abs_Gromov_completion ?u = xi; abs_Gromov_completion ?v = eta;\n   Gromov_completion_rel ?u ?u; Gromov_completion_rel ?v ?v\\<rbrakk>\n  \\<Longrightarrow> ereal\n                     (dist x y - 2 * deltaG TYPE('a) -\n                      max (Busemann_function_at xi x y)\n                       (Busemann_function_at eta x y)) /\n                    ereal 2\n                    \\<le> liminf\n                           (\\<lambda>n.\n                               ereal (Gromov_product_at y (?u n) (?v n)))\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "have \"ereal(dist x y - 2 * deltaG(TYPE('a)) - max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) / ereal 2 \\<le>\n                    extended_Gromov_product_at y xi eta\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> extended_Gromov_product_at y xi eta", "unfolding extended_Gromov_product_at_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ereal\n     (dist x y - 2 * deltaG TYPE('a) -\n      max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n    ereal 2\n    \\<le> Inf {liminf\n                (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n))) |\n               u v.\n               abs_Gromov_completion u = xi \\<and>\n               abs_Gromov_completion v = eta \\<and>\n               Gromov_completion_rel u u \\<and> Gromov_completion_rel v v}", "apply (rule Inf_greatest)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {liminf\n                  (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n))) |\n                 u v.\n                 abs_Gromov_completion u = xi \\<and>\n                 abs_Gromov_completion v = eta \\<and>\n                 Gromov_completion_rel u u \\<and>\n                 Gromov_completion_rel v v} \\<Longrightarrow>\n       ereal\n        (dist x y - 2 * deltaG TYPE('a) -\n         max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n       ereal 2\n       \\<le> xa", "using A"], ["proof (prove)\nusing this:\n  \\<lbrakk>abs_Gromov_completion ?u = xi; abs_Gromov_completion ?v = eta;\n   Gromov_completion_rel ?u ?u; Gromov_completion_rel ?v ?v\\<rbrakk>\n  \\<Longrightarrow> ereal\n                     (dist x y - 2 * deltaG TYPE('a) -\n                      max (Busemann_function_at xi x y)\n                       (Busemann_function_at eta x y)) /\n                    ereal 2\n                    \\<le> liminf\n                           (\\<lambda>n.\n                               ereal (Gromov_product_at y (?u n) (?v n)))\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       xa \\<in> {liminf\n                  (\\<lambda>n. ereal (Gromov_product_at y (u n) (v n))) |\n                 u v.\n                 abs_Gromov_completion u = xi \\<and>\n                 abs_Gromov_completion v = eta \\<and>\n                 Gromov_completion_rel u u \\<and>\n                 Gromov_completion_rel v v} \\<Longrightarrow>\n       ereal\n        (dist x y - 2 * deltaG TYPE('a) -\n         max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n       ereal 2\n       \\<le> xa", "by auto"], ["proof (state)\nthis:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n  ereal 2\n  \\<le> extended_Gromov_product_at y xi eta\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n  ereal 2\n  \\<le> extended_Gromov_product_at y xi eta\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "have \"... = ereal(real_of_ereal(extended_Gromov_product_at y xi eta))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. extended_Gromov_product_at y xi eta =\n    ereal (real_of_ereal (extended_Gromov_product_at y xi eta))", "using assms"], ["proof (prove)\nusing this:\n  xi \\<noteq> eta\n\ngoal (1 subgoal):\n 1. extended_Gromov_product_at y xi eta =\n    ereal (real_of_ereal (extended_Gromov_product_at y xi eta))", "by simp"], ["proof (state)\nthis:\n  extended_Gromov_product_at y xi eta =\n  ereal (real_of_ereal (extended_Gromov_product_at y xi eta))\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "finally"], ["proof (chain)\npicking this:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n  ereal 2\n  \\<le> ereal (real_of_ereal (extended_Gromov_product_at y xi eta))", "show ?thesis"], ["proof (prove)\nusing this:\n  ereal\n   (dist x y - 2 * deltaG TYPE('a) -\n    max (Busemann_function_at xi x y) (Busemann_function_at eta x y)) /\n  ereal 2\n  \\<le> ereal (real_of_ereal (extended_Gromov_product_at y xi eta))\n\ngoal (1 subgoal):\n 1. dist x y\n    \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n          max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n          2 * deltaG TYPE('a)", "by simp"], ["proof (state)\nthis:\n  dist x y\n  \\<le> 2 * real_of_ereal (extended_Gromov_product_at y xi eta) +\n        max (Busemann_function_at xi x y) (Busemann_function_at eta x y) +\n        2 * deltaG TYPE('a)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma dist_minus_Busemann_max_ineq:\n  \"dist (x::'a::Gromov_hyperbolic_space) z - Busemann_function_at xi z x \\<le> max (dist x y - Busemann_function_at xi y x) (dist y z - Busemann_function_at xi z y - 2 * Busemann_function_at xi y x) + 8 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a)", "have I: \"dist x z - Busemann_function_at (to_Gromov_completion t) z x \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n                      (dist y z - Busemann_function_at (to_Gromov_completion t) z y - 2 * Busemann_function_at (to_Gromov_completion t) y x)\n                        + 2 * deltaG(TYPE('a))\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "have \"2 * dist x t + - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x) (dist y z - Busemann_function_at (to_Gromov_completion t) z y - 2 * Busemann_function_at (to_Gromov_completion t) y x)\n          = min (2 * dist x t - (dist x y - Busemann_function_at (to_Gromov_completion t) y x)) (2 * dist x t - (dist y z - Busemann_function_at (to_Gromov_completion t) z y - 2 * Busemann_function_at (to_Gromov_completion t) y x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * dist x t +\n    - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n       (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n        2 * Busemann_function_at (to_Gromov_completion t) y x) =\n    min (2 * dist x t -\n         (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n     (2 * dist x t -\n      (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n       2 * Busemann_function_at (to_Gromov_completion t) y x))", "unfolding minus_max_eq_min min_add_distrib_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. min (2 * dist x t +\n         - (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n     (2 * dist x t +\n      - (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n         2 * Busemann_function_at (to_Gromov_completion t) y x)) =\n    min (2 * dist x t -\n         (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n     (2 * dist x t -\n      (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n       2 * Busemann_function_at (to_Gromov_completion t) y x))", "by auto"], ["proof (state)\nthis:\n  2 * dist x t +\n  - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n     (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n      2 * Busemann_function_at (to_Gromov_completion t) y x) =\n  min (2 * dist x t -\n       (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n   (2 * dist x t -\n    (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n     2 * Busemann_function_at (to_Gromov_completion t) y x))\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  2 * dist x t +\n  - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n     (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n      2 * Busemann_function_at (to_Gromov_completion t) y x) =\n  min (2 * dist x t -\n       (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n   (2 * dist x t -\n    (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n     2 * Busemann_function_at (to_Gromov_completion t) y x))\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "have \"... = min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (2 * dist x t -\n         (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n     (2 * dist x t -\n      (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n       2 * Busemann_function_at (to_Gromov_completion t) y x)) =\n    min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z)", "apply (rule cong[of \"min _\" \"min _\"], rule cong [of min min])"], ["proof (prove)\ngoal (3 subgoals):\n 1. min = min\n 2. 2 * dist x t -\n    (dist x y - Busemann_function_at (to_Gromov_completion t) y x) =\n    2 * Gromov_product_at t x y\n 3. 2 * dist x t -\n    (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n     2 * Busemann_function_at (to_Gromov_completion t) y x) =\n    2 * Gromov_product_at t y z", "unfolding Gromov_product_at_def Busemann_function_inner"], ["proof (prove)\ngoal (3 subgoals):\n 1. min = min\n 2. 2 * dist x t - (dist x y - (dist y t - dist x t)) =\n    2 * ((dist t x + dist t y - dist x y) / 2)\n 3. 2 * dist x t -\n    (dist y z - (dist z t - dist y t) - 2 * (dist y t - dist x t)) =\n    2 * ((dist t y + dist t z - dist y z) / 2)", "by (auto simp add: algebra_simps dist_commute divide_simps)"], ["proof (state)\nthis:\n  min (2 * dist x t -\n       (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n   (2 * dist x t -\n    (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n     2 * Busemann_function_at (to_Gromov_completion t) y x)) =\n  min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  min (2 * dist x t -\n       (dist x y - Busemann_function_at (to_Gromov_completion t) y x))\n   (2 * dist x t -\n    (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n     2 * Busemann_function_at (to_Gromov_completion t) y x)) =\n  min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "have \"... = 2 * (min (Gromov_product_at t x y) (Gromov_product_at t y z))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z) =\n    2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)", "by auto"], ["proof (state)\nthis:\n  min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z) =\n  2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  min (2 * Gromov_product_at t x y) (2 * Gromov_product_at t y z) =\n  2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "have \"... \\<le> 2 * (Gromov_product_at t x z + deltaG(TYPE('a)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)\n    \\<le> 2 * (Gromov_product_at t x z + deltaG TYPE('a))", "by (intro mono_intros, auto)"], ["proof (state)\nthis:\n  2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)\n  \\<le> 2 * (Gromov_product_at t x z + deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "also"], ["proof (state)\nthis:\n  2 * min (Gromov_product_at t x y) (Gromov_product_at t y z)\n  \\<le> 2 * (Gromov_product_at t x z + deltaG TYPE('a))\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "have \"... = 2 * dist x t - (dist x z - Busemann_function_at (to_Gromov_completion t) z x) + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * (Gromov_product_at t x z + deltaG TYPE('a)) =\n    2 * dist x t -\n    (dist x z - Busemann_function_at (to_Gromov_completion t) z x) +\n    2 * deltaG TYPE('a)", "unfolding Gromov_product_at_def Busemann_function_inner"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * ((dist t x + dist t z - dist x z) / 2 + deltaG TYPE('a)) =\n    2 * dist x t - (dist x z - (dist z t - dist x t)) + 2 * deltaG TYPE('a)", "by (auto simp add: algebra_simps dist_commute divide_simps)"], ["proof (state)\nthis:\n  2 * (Gromov_product_at t x z + deltaG TYPE('a)) =\n  2 * dist x t -\n  (dist x z - Busemann_function_at (to_Gromov_completion t) z x) +\n  2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "finally"], ["proof (chain)\npicking this:\n  2 * dist x t +\n  - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n     (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n      2 * Busemann_function_at (to_Gromov_completion t) y x)\n  \\<le> 2 * dist x t -\n        (dist x z - Busemann_function_at (to_Gromov_completion t) z x) +\n        2 * deltaG TYPE('a)", "show ?thesis"], ["proof (prove)\nusing this:\n  2 * dist x t +\n  - max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n     (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n      2 * Busemann_function_at (to_Gromov_completion t) y x)\n  \\<le> 2 * dist x t -\n        (dist x z - Busemann_function_at (to_Gromov_completion t) z x) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion t) z x\n    \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n           (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n            2 * Busemann_function_at (to_Gromov_completion t) y x) +\n          2 * deltaG TYPE('a)", "by auto"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at (to_Gromov_completion t) z x\n  \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion t) y x)\n         (dist y z - Busemann_function_at (to_Gromov_completion t) z y -\n          2 * Busemann_function_at (to_Gromov_completion t) y x) +\n        2 * deltaG TYPE('a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at (to_Gromov_completion ?t) z x\n  \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion ?t) y x)\n         (dist y z - Busemann_function_at (to_Gromov_completion ?t) z y -\n          2 * Busemann_function_at (to_Gromov_completion ?t) y x) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a)", "have \"dist x z - Busemann_function_at xi z x \\<le> max (dist x y - Busemann_function_at xi y x) (dist y z - Busemann_function_at xi z y - 2 * Busemann_function_at xi y x) + 8 * deltaG(TYPE('a)) + d\"\n    if \"d > 0\" for d"], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "define e where \"e = d/4\""], ["proof (state)\nthis:\n  e = d / 4\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"e > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < e", "unfolding e_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < d / 4", "using that"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. 0 < d / 4", "by auto"], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "obtain t where t: \"(\\<lambda>n. to_Gromov_completion (t n)) \\<longlonglongrightarrow> xi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>t.\n        (\\<lambda>n. to_Gromov_completion (t n))\n        \\<longlonglongrightarrow> xi \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using rep_Gromov_completion_limit"], ["proof (prove)\nusing this:\n  (\\<lambda>n. to_Gromov_completion (rep_Gromov_completion ?x n))\n  \\<longlonglongrightarrow> ?x\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        (\\<lambda>n. to_Gromov_completion (t n))\n        \\<longlonglongrightarrow> xi \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>n. to_Gromov_completion (t n)) \\<longlonglongrightarrow> xi\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have A: \"eventually (\\<lambda>n. Busemann_function_at xi y x \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x + 2 * deltaG(TYPE('a)) + e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at xi y x\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x +\n             2 * deltaG TYPE('a) +\n             e", "by (rule eventually_mono[OF Busemann_function_inside_approx[OF \\<open>e > 0\\<close> t, of y x]], auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Busemann_function_at xi y x\n     \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x +\n           2 * deltaG TYPE('a) +\n           e\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have B: \"eventually (\\<lambda>n. Busemann_function_at xi z y \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y + 2 * deltaG(TYPE('a)) + e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at xi z y\n       \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n             2 * deltaG TYPE('a) +\n             e", "by (rule eventually_mono[OF Busemann_function_inside_approx[OF \\<open>e > 0\\<close> t, of z y]], auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Busemann_function_at xi z y\n     \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n           2 * deltaG TYPE('a) +\n           e\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have C: \"eventually (\\<lambda>n. Busemann_function_at xi z x \\<ge> Busemann_function_at (to_Gromov_completion (t n)) z x - e) sequentially\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       Busemann_function_at (to_Gromov_completion (t n)) z x - e\n       \\<le> Busemann_function_at xi z x", "by (rule eventually_mono[OF Busemann_function_inside_approx[OF \\<open>e > 0\\<close> t, of z x]], auto)"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     Busemann_function_at (to_Gromov_completion (t n)) z x - e\n     \\<le> Busemann_function_at xi z x\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "obtain n where H: \"Busemann_function_at xi y x \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x + 2 * deltaG(TYPE('a)) + e\"\n                      \"Busemann_function_at xi z y \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y + 2 * deltaG(TYPE('a)) + e\"\n                      \"Busemann_function_at xi z x \\<ge> Busemann_function_at (to_Gromov_completion (t n)) z x - e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>Busemann_function_at xi y x\n                 \\<le> Busemann_function_at (to_Gromov_completion (t n)) y\n                        x +\n                       2 * deltaG TYPE('a) +\n                       e;\n         Busemann_function_at xi z y\n         \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n               2 * deltaG TYPE('a) +\n               e;\n         Busemann_function_at (to_Gromov_completion (t n)) z x - e\n         \\<le> Busemann_function_at xi z x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using eventually_conj[OF A eventually_conj[OF B C]] eventually_sequentially"], ["proof (prove)\nusing this:\n  \\<forall>\\<^sub>F xa in sequentially.\n     Busemann_function_at xi y x\n     \\<le> Busemann_function_at (to_Gromov_completion (t xa)) y x +\n           2 * deltaG TYPE('a) +\n           e \\<and>\n     Busemann_function_at xi z y\n     \\<le> Busemann_function_at (to_Gromov_completion (t xa)) z y +\n           2 * deltaG TYPE('a) +\n           e \\<and>\n     Busemann_function_at (to_Gromov_completion (t xa)) z x - e\n     \\<le> Busemann_function_at xi z x\n  eventually ?P sequentially = (\\<exists>N. \\<forall>n\\<ge>N. ?P n)\n\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<lbrakk>Busemann_function_at xi y x\n                 \\<le> Busemann_function_at (to_Gromov_completion (t n)) y\n                        x +\n                       2 * deltaG TYPE('a) +\n                       e;\n         Busemann_function_at xi z y\n         \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n               2 * deltaG TYPE('a) +\n               e;\n         Busemann_function_at (to_Gromov_completion (t n)) z x - e\n         \\<le> Busemann_function_at xi z x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Busemann_function_at xi y x\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at xi z y\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at (to_Gromov_completion (t n)) z x - e\n  \\<le> Busemann_function_at xi z x\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"dist x z - Busemann_function_at xi z x - e \\<le> dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x - e\n    \\<le> dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x", "using H"], ["proof (prove)\nusing this:\n  Busemann_function_at xi y x\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at xi z y\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at (to_Gromov_completion (t n)) z x - e\n  \\<le> Busemann_function_at xi z x\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x - e\n    \\<le> dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x", "by auto"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at xi z x - e\n  \\<le> dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "also"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at xi z x - e\n  \\<le> dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"... \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion (t n)) y x)\n                      (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y - 2 * Busemann_function_at (to_Gromov_completion (t n)) y x)\n                        + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n    \\<le> max (dist x y -\n               Busemann_function_at (to_Gromov_completion (t n)) y x)\n           (dist y z -\n            Busemann_function_at (to_Gromov_completion (t n)) z y -\n            2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n          2 * deltaG TYPE('a)", "using I"], ["proof (prove)\nusing this:\n  dist x z - Busemann_function_at (to_Gromov_completion ?t) z x\n  \\<le> max (dist x y - Busemann_function_at (to_Gromov_completion ?t) y x)\n         (dist y z - Busemann_function_at (to_Gromov_completion ?t) z y -\n          2 * Busemann_function_at (to_Gromov_completion ?t) y x) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n    \\<le> max (dist x y -\n               Busemann_function_at (to_Gromov_completion (t n)) y x)\n           (dist y z -\n            Busemann_function_at (to_Gromov_completion (t n)) z y -\n            2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n          2 * deltaG TYPE('a)", "by auto"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n  \\<le> max (dist x y -\n             Busemann_function_at (to_Gromov_completion (t n)) y x)\n         (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y -\n          2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "also"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at (to_Gromov_completion (t n)) z x\n  \\<le> max (dist x y -\n             Busemann_function_at (to_Gromov_completion (t n)) y x)\n         (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y -\n          2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"... \\<le> max (dist x y - (Busemann_function_at xi y x - 2 * deltaG(TYPE('a)) - e))\n                      (dist y z - (Busemann_function_at xi z y - 2 * deltaG(TYPE('a)) - e) - 2 * (Busemann_function_at xi y x - 2 * deltaG(TYPE('a)) - e))\n                        + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (dist x y - Busemann_function_at (to_Gromov_completion (t n)) y x)\n     (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y -\n      2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n    2 * deltaG TYPE('a)\n    \\<le> max (dist x y -\n               (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n           (dist y z -\n            (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n            2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n          2 * deltaG TYPE('a)", "apply (intro mono_intros)"], ["proof (prove)\ngoal (4 subgoals):\n 1. Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x\n 2. Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y\n 3. Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x\n 4. 0 \\<le> 2", "using H"], ["proof (prove)\nusing this:\n  Busemann_function_at xi y x\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at xi z y\n  \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y +\n        2 * deltaG TYPE('a) +\n        e\n  Busemann_function_at (to_Gromov_completion (t n)) z x - e\n  \\<le> Busemann_function_at xi z x\n\ngoal (4 subgoals):\n 1. Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x\n 2. Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) z y\n 3. Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e\n    \\<le> Busemann_function_at (to_Gromov_completion (t n)) y x\n 4. 0 \\<le> 2", "by auto"], ["proof (state)\nthis:\n  max (dist x y - Busemann_function_at (to_Gromov_completion (t n)) y x)\n   (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y -\n    2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n  2 * deltaG TYPE('a)\n  \\<le> max (dist x y -\n             (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n         (dist y z -\n          (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n          2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "also"], ["proof (state)\nthis:\n  max (dist x y - Busemann_function_at (to_Gromov_completion (t n)) y x)\n   (dist y z - Busemann_function_at (to_Gromov_completion (t n)) z y -\n    2 * Busemann_function_at (to_Gromov_completion (t n)) y x) +\n  2 * deltaG TYPE('a)\n  \\<le> max (dist x y -\n             (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n         (dist y z -\n          (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n          2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"... \\<le> max (dist x y - Busemann_function_at xi y x + 6 * deltaG(TYPE('a)) + 3 * e)\n                      (dist y z - Busemann_function_at xi z y - 2 * Busemann_function_at xi y x + 6 * deltaG(TYPE('a)) + 3 * e)\n                        + 2 * deltaG(TYPE('a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (dist x y - (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n     (dist y z - (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n      2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n    2 * deltaG TYPE('a)\n    \\<le> max (dist x y - Busemann_function_at xi y x +\n               6 * deltaG TYPE('a) +\n               3 * e)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x +\n            6 * deltaG TYPE('a) +\n            3 * e) +\n          2 * deltaG TYPE('a)", "apply (intro add_mono max.mono)"], ["proof (prove)\ngoal (3 subgoals):\n 1. dist x y - (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)\n    \\<le> dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) +\n          3 * e\n 2. dist y z - (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n    2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)\n    \\<le> dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x +\n          6 * deltaG TYPE('a) +\n          3 * e\n 3. 2 * deltaG TYPE('a) \\<le> 2 * deltaG TYPE('a)", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (3 subgoals):\n 1. dist x y - (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)\n    \\<le> dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) +\n          3 * e\n 2. dist y z - (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n    2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)\n    \\<le> dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x +\n          6 * deltaG TYPE('a) +\n          3 * e\n 3. 2 * deltaG TYPE('a) \\<le> 2 * deltaG TYPE('a)", "by auto"], ["proof (state)\nthis:\n  max (dist x y - (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n   (dist y z - (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n    2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n  2 * deltaG TYPE('a)\n  \\<le> max (dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) +\n             3 * e)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x +\n          6 * deltaG TYPE('a) +\n          3 * e) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "also"], ["proof (state)\nthis:\n  max (dist x y - (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e))\n   (dist y z - (Busemann_function_at xi z y - 2 * deltaG TYPE('a) - e) -\n    2 * (Busemann_function_at xi y x - 2 * deltaG TYPE('a) - e)) +\n  2 * deltaG TYPE('a)\n  \\<le> max (dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) +\n             3 * e)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x +\n          6 * deltaG TYPE('a) +\n          3 * e) +\n        2 * deltaG TYPE('a)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "have \"... = max (dist x y - Busemann_function_at xi y x) (dist y z - Busemann_function_at xi z y - 2 * Busemann_function_at xi y x) + 8 * deltaG(TYPE('a)) + 3 * e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. max (dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) +\n         3 * e)\n     (dist y z - Busemann_function_at xi z y -\n      2 * Busemann_function_at xi y x +\n      6 * deltaG TYPE('a) +\n      3 * e) +\n    2 * deltaG TYPE('a) =\n    max (dist x y - Busemann_function_at xi y x)\n     (dist y z - Busemann_function_at xi z y -\n      2 * Busemann_function_at xi y x) +\n    8 * deltaG TYPE('a) +\n    3 * e", "by auto"], ["proof (state)\nthis:\n  max (dist x y - Busemann_function_at xi y x + 6 * deltaG TYPE('a) + 3 * e)\n   (dist y z - Busemann_function_at xi z y -\n    2 * Busemann_function_at xi y x +\n    6 * deltaG TYPE('a) +\n    3 * e) +\n  2 * deltaG TYPE('a) =\n  max (dist x y - Busemann_function_at xi y x)\n   (dist y z - Busemann_function_at xi z y -\n    2 * Busemann_function_at xi y x) +\n  8 * deltaG TYPE('a) +\n  3 * e\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "finally"], ["proof (chain)\npicking this:\n  dist x z - Busemann_function_at xi z x - e\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        3 * e", "show ?thesis"], ["proof (prove)\nusing this:\n  dist x z - Busemann_function_at xi z x - e\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        3 * e\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "unfolding e_def"], ["proof (prove)\nusing this:\n  dist x z - Busemann_function_at xi z x - d / 4\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        3 * (d / 4)\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a) +\n          d", "by auto"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at xi z x\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        d\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?d \\<Longrightarrow>\n  dist x z - Busemann_function_at xi z x\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        ?d\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a)", "then"], ["proof (chain)\npicking this:\n  0 < ?d \\<Longrightarrow>\n  dist x z - Busemann_function_at xi z x\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        ?d", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < ?d \\<Longrightarrow>\n  dist x z - Busemann_function_at xi z x\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a) +\n        ?d\n\ngoal (1 subgoal):\n 1. dist x z - Busemann_function_at xi z x\n    \\<le> max (dist x y - Busemann_function_at xi y x)\n           (dist y z - Busemann_function_at xi z y -\n            2 * Busemann_function_at xi y x) +\n          8 * deltaG TYPE('a)", "by (rule field_le_epsilon)"], ["proof (state)\nthis:\n  dist x z - Busemann_function_at xi z x\n  \\<le> max (dist x y - Busemann_function_at xi y x)\n         (dist y z - Busemann_function_at xi z y -\n          2 * Busemann_function_at xi y x) +\n        8 * deltaG TYPE('a)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(*of theory Busemann_Function*)"]]}