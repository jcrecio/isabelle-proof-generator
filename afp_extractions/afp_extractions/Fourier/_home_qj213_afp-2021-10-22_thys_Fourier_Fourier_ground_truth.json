{"file_name": "/home/qj213/afp-2021-10-22/thys/Fourier/Fourier.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Fourier", "problem_names": ["lemma orthonormal_system_eq: \"orthonormal_system S w \\<Longrightarrow> l2product S (w m) (w n) = (if m = n then 1 else 0)\"", "lemma orthonormal_system_l2norm:\n   \"orthonormal_system S w \\<Longrightarrow> l2norm S (w i) = 1\"", "lemma orthonormal_partial_sum_diff:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\" and \"finite I\"\n  shows \"(l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n        (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -  2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)\"", "lemma orthonormal_optimal_partial_sum:\n  assumes \"orthonormal_system S w\" \"\\<And>i. (w i) square_integrable S\"\n          \"f square_integrable S\" \"finite I\"\n  shows \"l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n       \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))\"", "lemma Bessel_inequality:\n  assumes \"orthonormal_system S w\" \"\\<And>i. (w i) square_integrable S\"\n    \"f square_integrable S\" \"finite I\"\n  shows \"(\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2) \\<le> (l2norm S f)\\<^sup>2\"", "lemma Fourier_series_square_summable:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  shows \"summable (confine (\\<lambda>i. (orthonormal_coeff S w f i) ^ 2) I)\"", "lemma orthonormal_Fourier_partial_sum_diff_squared:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\" and \"finite I\"\n  shows \"(l2norm S (\\<lambda>x. f x -(\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n         (l2norm S f)\\<^sup>2 - (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)\"", "lemma Fourier_series_l2_summable:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  obtains g where \"g square_integrable S\"\n                  \"(\\<lambda>n. l2norm S (\\<lambda>x. (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) - g x))\n                   \\<longlonglongrightarrow> 0\"", "lemma Fourier_series_l2_summable_strong:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  obtains g where \"g square_integrable S\"\n          \"\\<And>i. i \\<in> I \\<Longrightarrow> orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0\"\n          \"(\\<lambda>n. l2norm S (\\<lambda>x. (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) - g x))\n           \\<longlonglongrightarrow> 0\"", "lemma integrable_sin_cx:\n  \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(x * c))\"", "lemma integrable_cos_cx:\n  \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(x * c))\"", "lemma integral_cos_Z' [simp]:\n  assumes \"n \\<in> \\<int>\"\n  shows \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(n * x)) = (if n = 0 then 2 * pi else 0)\"", "lemma integral_sin_and_cos:\n  fixes m n::int\n  shows\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * cos(n * x)) = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi else 0)\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * sin(n * x)) = 0\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(m * x) * cos(n * x)) = 0\"\n  \"\\<lbrakk>m \\<ge> 0; n \\<ge> 0\\<rbrakk> \\<Longrightarrow> integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x)) = (if m = n \\<and> n \\<noteq> 0 then pi else 0)\"\n  \"\\<bar>integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x))\\<bar> = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)\"", "lemma integral_sin_and_cos_Z [simp]:\n  fixes m n::real\n  assumes \"m \\<in> \\<int>\" \"n \\<in> \\<int>\"\n  shows\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * cos(n * x)) = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi else 0)\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * sin(n * x)) = 0\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(m * x) * cos(n * x)) = 0\"\n  \"\\<bar>integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x))\\<bar> = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)\"", "lemma integral_sin_and_cos_N [simp]:\n  fixes m n::real\n  assumes \"m \\<in> \\<nat>\" \"n \\<in> \\<nat>\"\n  shows \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x)) = (if m = n \\<and> n \\<noteq> 0 then pi else 0)\"", "lemma integrable_sin_and_cos:\n  fixes m n::int\n  shows \"integrable (lebesgue_on {a..b}) (\\<lambda>x. cos(x * m) * cos(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. cos(x * m) * sin(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. sin(x * m) * cos(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. sin(x * m) * sin(x * n))\"", "lemma sqrt_pi_ge1: \"sqrt pi \\<ge> 1\"", "lemma trigonometric_set:\n  \"trigonometric_set 0 x = 1 / sqrt(2 * pi)\"\n  \"trigonometric_set (Suc (2 * n)) x = sin(real(Suc n) * x) / sqrt(pi)\"\n  \"trigonometric_set (2 * n + 2) x = cos(real(Suc n) * x) / sqrt(pi)\"\n  \"trigonometric_set (Suc (Suc (2 * n))) x = cos(real(Suc n) * x) / sqrt(pi)\"", "lemma trigonometric_set_even:\n   \"trigonometric_set(2*k) = (if k = 0 then (\\<lambda>x. 1 / sqrt(2 * pi)) else (\\<lambda>x. cos(k * x) / sqrt pi))\"", "lemma orthonormal_system_trigonometric_set:\n    \"orthonormal_system {-pi..pi} trigonometric_set\"", "lemma square_integrable_trigonometric_set:\n   \"(trigonometric_set i) square_integrable {-pi..pi}\"", "lemma Weierstrass_trig_1:\n  fixes g :: \"real \\<Rightarrow> real\"\n  assumes contf: \"continuous_on UNIV g\" and periodic: \"\\<And>x. g(x + 2 * pi) = g x\" and 1: \"norm z = 1\"\n  shows \"continuous (at z within (sphere 0 1)) (g \\<circ> Im \\<circ> Ln)\"", "lemma Weierstrass_trig_polynomial:\n  assumes contf: \"continuous_on {-pi..pi} f\" and fpi: \"f(-pi) = f pi\" and \"0 < e\"\n  obtains n::nat and a b where\n    \"\\<And>x::real. x \\<in> {-pi..pi} \\<Longrightarrow> \\<bar>f x - (\\<Sum>k\\<le>n. a k * sin (k * x) + b k * cos (k * x))\\<bar> < e\"", "lemma integral_tweak_ends:\n  fixes a b :: real\n  assumes \"a < b\" \"e > 0\"\n  obtains f where \"continuous_on {a..b} f\" \"f a = d\" \"f b = 0\" \"l2norm {a..b} f < e\"", "lemma square_integrable_approximate_continuous_ends:\n  assumes f: \"f square_integrable {a..b}\" and \"a < b\" \"0 < e\"\n  obtains g where \"continuous_on {a..b} g\" \"g b = g a\" \"g square_integrable {a..b}\" \"l2norm {a..b} (\\<lambda>x. f x - g x) < e\"", "lemma Weierstrass_l2_trig_polynomial:\n  assumes f: \"f square_integrable {-pi..pi}\" and \"0 < e\"\n  obtains n a b where\n   \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * sin(real k * x) + b k * cos(real k * x))) < e\"", "lemma Fourier_series_l2:\n  assumes \"f square_integrable {-pi..pi}\"\n  shows \"(\\<lambda>n. l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>i\\<le>n. Fourier_coefficient f i * trigonometric_set i x)))\n         \\<longlonglongrightarrow> 0\"", "lemma trigonometric_set_mul_absolutely_integrable:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. trigonometric_set n x * f x) absolutely_integrable_on {-pi..pi}\"", "lemma trigonometric_set_mul_integrable:\n   \"f absolutely_integrable_on {-pi..pi} \\<Longrightarrow> integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. trigonometric_set n x * f x)\"", "lemma trigonometric_set_integrable [simp]: \"integrable (lebesgue_on {-pi..pi}) (trigonometric_set n)\"", "lemma absolutely_integrable_sin_product:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. sin(k * x) * f x) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_cos_product:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. cos(k * x) * f x) absolutely_integrable_on {-pi..pi}\"", "lemma\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows Fourier_products_integrable_cos: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(k * x) * f x)\"\n  and   Fourier_products_integrable_sin: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(k * x) * f x)\"", "lemma Riemann_lebesgue_square_integrable:\n  assumes \"orthonormal_system S w\" \"\\<And>i. w i square_integrable S\" \"f square_integrable S\"\n  shows \"orthonormal_coeff S w f \\<longlonglongrightarrow> 0\"", "lemma Riemann_lebesgue_sin:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(real n * x) * f x)) \\<longlonglongrightarrow> 0\"", "lemma Riemann_lebesgue_cos:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(real n * x) * f x)) \\<longlonglongrightarrow> 0\"", "lemma Riemann_lebesgue_sin_half:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. sin ((real n + 1/2) * x) * f x) \\<longlonglongrightarrow> 0\"", "lemma Fourier_sum_limit_pair:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\"\n        (is \"?lhs = ?rhs\")", "lemma Fourier_sum_0:\n  \"(\\<Sum>k \\<le> n. Fourier_coefficient f k * trigonometric_set k 0) =\n     (\\<Sum>k \\<le> n div 2. Fourier_coefficient f(2*k) * trigonometric_set (2*k) 0)\"\n  (is \"?lhs = ?rhs\")", "lemma Fourier_sum_0_explicit:\n  \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0)\n    = (Fourier_coefficient f 0 / sqrt 2 + (\\<Sum>k = 1..n div 2. Fourier_coefficient f(2*k))) / sqrt pi\"\n  (is \"?lhs = ?rhs\")", "lemma Fourier_sum_0_integrals:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n          (integral\\<^sup>L (lebesgue_on {-pi..pi}) f / 2 +\n           (\\<Sum>k = Suc 0..n div 2. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(k * x) * f x))) / pi\"", "lemma Fourier_sum_0_integral:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n       integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. (1/2 + (\\<Sum>k = Suc 0..n div 2. cos(k * x))) * f x) / pi\"", "lemma Fourier_coefficient_add:\n  assumes \"f absolutely_integrable_on {-pi..pi}\" \"g absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. f x + g x) i =\n                Fourier_coefficient f i + Fourier_coefficient g i\"", "lemma Fourier_coefficient_minus:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. - f x) i = - Fourier_coefficient f i\"", "lemma Fourier_coefficient_diff:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and g: \"g absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. f x - g x) i = Fourier_coefficient f i - Fourier_coefficient g i\"", "lemma Fourier_coefficient_const:\n   \"Fourier_coefficient (\\<lambda>x. c) i = (if i = 0 then c * sqrt(2 * pi) else 0)\"", "lemma Fourier_offset_term:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"Fourier_coefficient (\\<lambda>x. f(x+t)) (2 * n + 2) * trigonometric_set (2 * n + 2) 0\n        = Fourier_coefficient f(2 * n+1) * trigonometric_set (2 * n+1) t\n        + Fourier_coefficient f(2 * n + 2) * trigonometric_set (2 * n + 2) t\"", "lemma Fourier_sum_offset:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n          (\\<Sum>k\\<le>2*n. Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\" (is \"?lhs = ?rhs\")", "lemma Fourier_sum_offset_unpaired:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n          (\\<Sum>k\\<le>n. Fourier_coefficient (\\<lambda>x. f(x+t)) (2*k) * trigonometric_set (2*k) 0)\"\n  (is \"?lhs = ?rhs\")", "lemma Dirichlet_kernel_0 [simp]:\n   \"\\<bar>x\\<bar> < 2 * pi \\<Longrightarrow> Dirichlet_kernel 0 x = 1/2\"", "lemma Dirichlet_kernel_minus [simp]: \"Dirichlet_kernel n (-x) = Dirichlet_kernel n x\"", "lemma Dirichlet_kernel_continuous_strong:\n   \"continuous_on {-(2 * pi)<..<2 * pi} (Dirichlet_kernel n)\"", "lemma Dirichlet_kernel_continuous: \"continuous_on {-pi..pi} (Dirichlet_kernel n)\"", "lemma absolutely_integrable_mult_Dirichlet_kernel:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f x) absolutely_integrable_on {-pi..pi}\"", "lemma cosine_sum_lemma:\n   \"(1/2 + (\\<Sum>k = Suc 0..n. cos(real k * x))) * sin(x/2) =  sin((real n + 1/2) * x) / 2\"", "lemma Dirichlet_kernel_cosine_sum:\n  assumes \"\\<bar>x\\<bar> < 2 * pi\"\n  shows \"Dirichlet_kernel n x = 1/2 + (\\<Sum>k = Suc 0..n. cos(real k * x))\"", "lemma integrable_Dirichlet_kernel: \"integrable (lebesgue_on {-pi..pi}) (Dirichlet_kernel n)\"", "lemma integral_Dirichlet_kernel [simp]:\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (Dirichlet_kernel n) = pi\"", "lemma integral_Dirichlet_kernel_half [simp]:\n  \"integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi/2\"", "lemma Fourier_sum_offset_Dirichlet_kernel:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows\n   \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n            integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * f(x+t)) / pi\"\n  (is \"?lhs = ?rhs\")", "lemma Fourier_sum_limit_Dirichlet_kernel:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"((\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l)\n     \\<longleftrightarrow> (\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)) \\<longlonglongrightarrow> pi * l\"\n    (is \"?lhs = ?rhs\")", "lemma simple_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and ft: \"(\\<lambda>x. (f(x+t) - f t) / sin(x/2)) absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\"", "lemma bounded_inverse_sin_half:\n  assumes \"d > 0\"\n  obtains B where \"B>0\" \"\\<And>x. x \\<in> ({-pi..pi} - {-d<..<d}) \\<Longrightarrow> \\<bar>inverse (sin (x/2))\\<bar> \\<le> B\"", "lemma differentiable_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and fdif: \"f differentiable (at t)\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\"", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f(t+x)) absolutely_integrable_on {-pi..pi}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * f(t-x)) absolutely_integrable_on {-pi..pi}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected_part:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f(t+x)) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * f(t-x)) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {0..d}\"", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected_part2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * (f(t+x) + f(t-x))) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * ((f(t+x) + f(t-x)) - c)) absolutely_integrable_on {0..d}\"", "lemma integral_reflect_and_add:\n  fixes f :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"integrable (lebesgue_on {-a..a}) f\"\n  shows \"integral\\<^sup>L (lebesgue_on {-a..a}) f = integral\\<^sup>L (lebesgue_on {0..a})  (\\<lambda>x. f x + f(-x))\"", "lemma Fourier_sum_offset_Dirichlet_kernel_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) - l\n       = (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l)) / pi\"", "lemma Fourier_sum_limit_Dirichlet_kernel_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l))) \\<longlonglongrightarrow> 0\"", "lemma Riemann_localization_integral_range:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * f x)\n            - integral\\<^sup>L (lebesgue_on {-d..d}) (\\<lambda>x. Dirichlet_kernel n x * f x))\n             \\<longlonglongrightarrow> 0\"", "lemma Riemann_localization:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and g: \"g absolutely_integrable_on {-pi..pi}\"\n    and perf: \"\\<And>x. f(x + 2*pi) = f x\"\n    and perg: \"\\<And>x. g(x + 2*pi) = g x\"\n    and \"d > 0\" and d: \"\\<And>x. \\<bar>x-t\\<bar> < d \\<Longrightarrow> f x = g x\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> c\n     \\<longleftrightarrow> (\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t) \\<longlonglongrightarrow> c\"", "lemma Riemann_localization_integral_range_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f x + f(-x)))\n            - (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f(-x)))) \\<longlonglongrightarrow> 0\"", "lemma Fourier_sum_limit_Dirichlet_kernel_part:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and d: \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * ((f(t+x) + f(t-x)) - 2*l))) \\<longlonglongrightarrow> 0\"", "lemma inte_Dirichlet_kernel_mul_expand:\n  assumes f: \"f \\<in> borel_measurable (lebesgue_on S)\" and S: \"S \\<in> sets lebesgue\"\n  shows \"(LINT x|lebesgue_on S. Dirichlet_kernel n x * f x\n        = LINT x|lebesgue_on S. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\n       \\<and> (integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x)\n      \\<longleftrightarrow> integrable (lebesgue_on S) (\\<lambda>x. sin((n+1/2) * x) * f x / (2 * sin(x/2))))\"", "lemma\n  assumes f: \"f \\<in> borel_measurable (lebesgue_on S)\" and S: \"S \\<in> sets lebesgue\"\n  shows integral_Dirichlet_kernel_mul_expand:\n        \"(LINT x|lebesgue_on S. Dirichlet_kernel n x * f x)\n       = (LINT x|lebesgue_on S. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\" (is \"?th1\")\n  and integrable_Dirichlet_kernel_mul_expand:\n       \"integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x)\n    \\<longleftrightarrow> integrable (lebesgue_on S) (\\<lambda>x. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\" (is \"?th2\")", "lemma Fejer_kernel:\n     \"Fejer_kernel n x =\n        (if n = 0 then 0\n         else if x = 0 then n/2\n         else sin(n / 2 * x) ^ 2 / (2 * n * sin(x/2) ^ 2))\"", "lemma Fejer_kernel_0 [simp]: \"Fejer_kernel 0 x = 0\"  \"Fejer_kernel n 0 = n/2\"", "lemma Fejer_kernel_continuous_strong:\n  \"continuous_on {-(2 * pi)<..<2 * pi} (Fejer_kernel n)\"", "lemma Fejer_kernel_continuous:\n  \"continuous_on {-pi..pi} (Fejer_kernel n)\"", "lemma absolutely_integrable_mult_Fejer_kernel:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f x) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected1:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t + x)) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t - x)) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected3:\n  shows \"(\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {-pi..pi}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part1:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t + x)) absolutely_integrable_on {0..d}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t - x)) absolutely_integrable_on {0..d}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part3:\n  assumes \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {0..d}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part4:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * (f(t + x) + f(t - x))) absolutely_integrable_on {0..d}\"", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part5:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * ((f(t + x) + f(t - x)) - c)) absolutely_integrable_on {0..d}\"", "lemma Fourier_sum_offset_Fejer_kernel_half:\n  fixes n::nat\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"n > 0\"\n  shows \"(\\<Sum>r<n. \\<Sum>k\\<le>2*r. Fourier_coefficient f k * trigonometric_set k t) / n - l\n       = (LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * (f(t + x) + f(t - x) - 2 * l)) / pi\"", "lemma Fourier_sum_limit_Fejer_kernel_half:\n  fixes n::nat\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. ((\\<Sum>r<n. \\<Sum>k\\<le>2*r. Fourier_coefficient f k * trigonometric_set k t)) / n) \\<longlonglongrightarrow> l\n         \\<longleftrightarrow>\n         ((\\<lambda>n. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * ((f(t + x) + f(t - x)) - 2*l)))  \\<longlonglongrightarrow> 0)\"\n        (is \"?lhs = ?rhs\")", "lemma has_integral_Fejer_kernel:\n  \"has_bochner_integral (lebesgue_on {-pi..pi}) (Fejer_kernel n) (if n = 0 then 0 else pi)\"", "lemma has_integral_Fejer_kernel_half:\n  \"has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n) (if n = 0 then 0 else pi/2)\"", "lemma Fejer_kernel_pos_le [simp]: \"Fejer_kernel n x \\<ge> 0\"", "theorem Fourier_Fejer_Cesaro_summable:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and fl: \"(f \\<longlongrightarrow> l) (at t within atMost t)\"\n    and fr: \"(f \\<longlongrightarrow> r) (at t within atLeast t)\"\n  shows \"(\\<lambda>n. (\\<Sum>m<n. \\<Sum>k\\<le>2*m. Fourier_coefficient f k * trigonometric_set k t) / n) \\<longlonglongrightarrow> (l+r) / 2\""], "translations": [["", "lemma orthonormal_system_eq: \"orthonormal_system S w \\<Longrightarrow> l2product S (w m) (w n) = (if m = n then 1 else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthonormal_system S w \\<Longrightarrow>\n    l2product S (w m) (w n) = (if m = n then 1 else 0)", "by (simp add: orthonormal_system_def)"], ["", "lemma orthonormal_system_l2norm:\n   \"orthonormal_system S w \\<Longrightarrow> l2norm S (w i) = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthonormal_system S w \\<Longrightarrow> l2norm S (w i) = 1", "by (simp add: l2norm_def orthonormal_system_def)"], ["", "lemma orthonormal_partial_sum_diff:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\" and \"finite I\"\n  shows \"(l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n        (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -  2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n    2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n    2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)", "have \"S \\<in> sets lebesgue\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "using f square_integrable_def"], ["proof (prove)\nusing this:\n  f square_integrable S\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "by blast"], ["proof (state)\nthis:\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n    2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)", "then"], ["proof (chain)\npicking this:\n  S \\<in> sets lebesgue", "have \"(\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S\""], ["proof (prove)\nusing this:\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S", "by (intro square_integrable_sum square_integrable_lmult w \\<open>finite I\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S\n\ngoal (1 subgoal):\n 1. (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n    2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)", "with assms"], ["proof (chain)\npicking this:\n  orthonormal_system S w\n  w ?i square_integrable S\n  f square_integrable S\n  finite I\n  (\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S", "show ?thesis"], ["proof (prove)\nusing this:\n  orthonormal_system S w\n  w ?i square_integrable S\n  f square_integrable S\n  finite I\n  (\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S\n\ngoal (1 subgoal):\n 1. (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n    2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)", "apply (simp add: l2norm_pow_2 orthonormal_coeff_def orthonormal_system_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>m n.\n                l2product S (w m) (w n) = (if m = n then 1 else 0);\n     \\<And>i. w i square_integrable S; f square_integrable S; finite I;\n     (\\<lambda>x. \\<Sum>i\\<in>I. a i * w i x) square_integrable S\\<rbrakk>\n    \\<Longrightarrow> l2product S\n                       (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))\n                       (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)) =\n                      l2product S f f + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n                      2 * (\\<Sum>i\\<in>I. a i * l2product S (w i) f)", "apply (simp add: l2product_rdiff l2product_sym\n           l2product_rsum l2product_rmult algebra_simps power2_eq_square if_distrib [of \"\\<lambda>x. _ * x\"])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2 =\n  (l2norm S f)\\<^sup>2 + (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n  2 * (\\<Sum>i\\<in>I. a i * orthonormal_coeff S w f i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma orthonormal_optimal_partial_sum:\n  assumes \"orthonormal_system S w\" \"\\<And>i. (w i) square_integrable S\"\n          \"f square_integrable S\" \"finite I\"\n  shows \"l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n       \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "have \"2 * (a i * l2product S f(w i)) \\<le> (a i)\\<^sup>2 + (l2product S f(w i))\\<^sup>2\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 * (a i * l2product S f (w i))\n    \\<le> (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2", "using sum_squares_bound [of \"a i\" \"l2product S f(w i)\"]"], ["proof (prove)\nusing this:\n  2 * a i * l2product S f (w i)\n  \\<le> (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2\n\ngoal (1 subgoal):\n 1. 2 * (a i * l2product S f (w i))\n    \\<le> (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2", "by (force simp: algebra_simps)"], ["proof (state)\nthis:\n  2 * (a ?i * l2product S f (w ?i))\n  \\<le> (a ?i)\\<^sup>2 + (l2product S f (w ?i))\\<^sup>2\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "then"], ["proof (chain)\npicking this:\n  2 * (a ?i * l2product S f (w ?i))\n  \\<le> (a ?i)\\<^sup>2 + (l2product S f (w ?i))\\<^sup>2", "have *: \"2 * (\\<Sum>i\\<in>I. a i * l2product S f(w i)) \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f(w i))\\<^sup>2)\""], ["proof (prove)\nusing this:\n  2 * (a ?i * l2product S f (w ?i))\n  \\<le> (a ?i)\\<^sup>2 + (l2product S f (w ?i))\\<^sup>2\n\ngoal (1 subgoal):\n 1. 2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n    \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2)", "by (simp add: sum_distrib_left sum_mono)"], ["proof (state)\nthis:\n  2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n  \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2)\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "have S: \"S \\<in> sets lebesgue\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "using assms square_integrable_def"], ["proof (prove)\nusing this:\n  orthonormal_system S w\n  w ?i square_integrable S\n  f square_integrable S\n  finite I\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "by blast"], ["proof (state)\nthis:\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "with assms *"], ["proof (chain)\npicking this:\n  orthonormal_system S w\n  w ?i square_integrable S\n  f square_integrable S\n  finite I\n  2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n  \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2)\n  S \\<in> sets lebesgue", "show ?thesis"], ["proof (prove)\nusing this:\n  orthonormal_system S w\n  w ?i square_integrable S\n  f square_integrable S\n  finite I\n  2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n  \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2)\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n    \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))", "apply (simp add: l2norm_le square_integrable_sum square_integrable_diff square_integrable_lmult flip: l2norm_pow_2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>orthonormal_system S w; \\<And>i. w i square_integrable S;\n     f square_integrable S; finite I;\n     2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n     \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2);\n     S \\<in> sets lebesgue\\<rbrakk>\n    \\<Longrightarrow> (l2norm S\n                        (\\<lambda>x.\n                            f x -\n                            (\\<Sum>i\\<in>I.\n                               orthonormal_coeff S w f i * w i x)))\\<^sup>2\n                      \\<le> (l2norm S\n                              (\\<lambda>x.\n                                  f x -\n                                  (\\<Sum>i\\<in>I. a i * w i x)))\\<^sup>2", "apply (simp add: orthonormal_coeff_def orthonormal_partial_sum_diff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>orthonormal_system S w; \\<And>i. w i square_integrable S;\n     f square_integrable S; finite I;\n     2 * (\\<Sum>i\\<in>I. a i * l2product S f (w i))\n     \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2 + (l2product S f (w i))\\<^sup>2);\n     S \\<in> sets lebesgue\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>i\\<in>I. (l2product S (w i) f)\\<^sup>2) -\n                      2 *\n                      (\\<Sum>i\\<in>I.\n                         l2product S (w i) f * l2product S (w i) f)\n                      \\<le> (\\<Sum>i\\<in>I. (a i)\\<^sup>2) -\n                            2 * (\\<Sum>i\\<in>I. a i * l2product S (w i) f)", "apply (simp add: l2product_sym power2_eq_square sum.distrib)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  l2norm S\n   (\\<lambda>x. f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x))\n  \\<le> l2norm S (\\<lambda>x. f x - (\\<Sum>i\\<in>I. a i * w i x))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Bessel_inequality:\n  assumes \"orthonormal_system S w\" \"\\<And>i. (w i) square_integrable S\"\n    \"f square_integrable S\" \"finite I\"\n  shows \"(\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2) \\<le> (l2norm S f)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)\n    \\<le> (l2norm S f)\\<^sup>2", "using orthonormal_partial_sum_diff [OF assms, of \"orthonormal_coeff S w f\"]"], ["proof (prove)\nusing this:\n  (l2norm S\n    (\\<lambda>x.\n        f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n  (l2norm S f)\\<^sup>2 +\n  (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2) -\n  2 * (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * orthonormal_coeff S w f i)\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)\n    \\<le> (l2norm S f)\\<^sup>2", "apply (simp add: algebra_simps flip: power2_eq_square)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2) +\n    (l2norm S\n      (\\<lambda>x.\n          f x -\n          (\\<Sum>i\\<in>I. w i x * orthonormal_coeff S w f i)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 \\<Longrightarrow>\n    (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)\n    \\<le> (l2norm S f)\\<^sup>2", "by (metis (lifting) add_diff_cancel_left' diff_ge_0_iff_ge zero_le_power2)"], ["", "lemma Fourier_series_square_summable:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  shows \"summable (confine (\\<lambda>i. (orthonormal_coeff S w f i) ^ 2) I)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "have \"incseq (\\<lambda>n. \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. incseq\n     (\\<lambda>n.\n         \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)", "by (auto simp: incseq_def intro: sum_mono2)"], ["proof (state)\nthis:\n  incseq\n   (\\<lambda>n.\n       \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "moreover"], ["proof (state)\nthis:\n  incseq\n   (\\<lambda>n.\n       \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "have \"\\<And>i. (\\<Sum>i\\<in>I \\<inter> {..i}. (orthonormal_coeff S w f i)\\<^sup>2) \\<le> (l2norm S f)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<Sum>i\\<in>I \\<inter> {..i}. (orthonormal_coeff S w f i)\\<^sup>2)\n       \\<le> (l2norm S f)\\<^sup>2", "by (simp add: Bessel_inequality assms)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I \\<inter> {..?i}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<le> (l2norm S f)\\<^sup>2\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "ultimately"], ["proof (chain)\npicking this:\n  incseq\n   (\\<lambda>n.\n       \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  (\\<Sum>i\\<in>I \\<inter> {..?i}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<le> (l2norm S f)\\<^sup>2", "obtain L where \"(\\<lambda>n. \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2) \\<longlonglongrightarrow> L\""], ["proof (prove)\nusing this:\n  incseq\n   (\\<lambda>n.\n       \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  (\\<Sum>i\\<in>I \\<inter> {..?i}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<le> (l2norm S f)\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        (\\<lambda>n.\n            \\<Sum>i\\<in>I \\<inter> {..n}.\n              (orthonormal_coeff S w f i)\\<^sup>2)\n        \\<longlonglongrightarrow> L \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using incseq_convergent"], ["proof (prove)\nusing this:\n  incseq\n   (\\<lambda>n.\n       \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  (\\<Sum>i\\<in>I \\<inter> {..?i}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<le> (l2norm S f)\\<^sup>2\n  \\<lbrakk>incseq ?X; \\<forall>i. ?X i \\<le> ?B;\n   \\<And>L.\n      \\<lbrakk>?X \\<longlonglongrightarrow> L;\n       \\<forall>i. ?X i \\<le> L\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>L.\n        (\\<lambda>n.\n            \\<Sum>i\\<in>I \\<inter> {..n}.\n              (orthonormal_coeff S w f i)\\<^sup>2)\n        \\<longlonglongrightarrow> L \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<longlonglongrightarrow> L\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<longlonglongrightarrow> L", "have \"\\<forall>r>0. \\<exists>no. \\<forall>n\\<ge>no. \\<bar>(\\<Sum>i\\<in>{..n} \\<inter> I. (orthonormal_coeff S w f i)\\<^sup>2) - L\\<bar> < r\""], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2)\n  \\<longlonglongrightarrow> L\n\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>i\\<in>{..n} \\<inter> I.\n                      (orthonormal_coeff S w f i)\\<^sup>2) -\n                   L\\<bar>\n             < r", "by (simp add: LIMSEQ_iff Int_commute)"], ["proof (state)\nthis:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           \\<bar>(\\<Sum>i\\<in>{..n} \\<inter> I.\n                    (orthonormal_coeff S w f i)\\<^sup>2) -\n                 L\\<bar>\n           < r\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "then"], ["proof (chain)\npicking this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           \\<bar>(\\<Sum>i\\<in>{..n} \\<inter> I.\n                    (orthonormal_coeff S w f i)\\<^sup>2) -\n                 L\\<bar>\n           < r", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           \\<bar>(\\<Sum>i\\<in>{..n} \\<inter> I.\n                    (orthonormal_coeff S w f i)\\<^sup>2) -\n                 L\\<bar>\n           < r\n\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "by (auto simp: summable_def sums_confine_le LIMSEQ_iff)"], ["proof (state)\nthis:\n  summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma orthonormal_Fourier_partial_sum_diff_squared:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\" and \"finite I\"\n  shows \"(l2norm S (\\<lambda>x. f x -(\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n         (l2norm S f)\\<^sup>2 - (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          f x -\n          (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 -\n    (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)", "using orthonormal_partial_sum_diff [OF assms, where a = \"orthonormal_coeff S w f\"]"], ["proof (prove)\nusing this:\n  (l2norm S\n    (\\<lambda>x.\n        f x - (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n  (l2norm S f)\\<^sup>2 +\n  (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2) -\n  2 * (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * orthonormal_coeff S w f i)\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          f x -\n          (\\<Sum>i\\<in>I. orthonormal_coeff S w f i * w i x)))\\<^sup>2 =\n    (l2norm S f)\\<^sup>2 -\n    (\\<Sum>i\\<in>I. (orthonormal_coeff S w f i)\\<^sup>2)", "by (simp add: power2_eq_square)"], ["", "lemma Fourier_series_l2_summable:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  obtains g where \"g square_integrable S\"\n                  \"(\\<lambda>n. l2norm S (\\<lambda>x. (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) - g x))\n                   \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have S: \"S \\<in> sets lebesgue\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "using f square_integrable_def"], ["proof (prove)\nusing this:\n  f square_integrable S\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "by blast"], ["proof (state)\nthis:\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?\\<Theta> = \"\\<lambda>A x. (\\<Sum>i\\<in>I \\<inter> A. orthonormal_coeff S w f i * w i x)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?\\<Psi> = \"confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have si: \"?\\<Theta> A square_integrable S\" if \"finite A\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> A.\n          orthonormal_coeff S w f i * w i x) square_integrable\n    S", "by (force intro: square_integrable_lmult w square_integrable_sum S that)"], ["proof (state)\nthis:\n  finite ?A \\<Longrightarrow>\n  (\\<lambda>x.\n      \\<Sum>i\\<in>I \\<inter> ?A.\n        orthonormal_coeff S w f i * w i x) square_integrable\n  S\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<exists>N. \\<forall>m\\<ge>N. \\<forall>n\\<ge>N. l2norm S (\\<lambda>x. ?\\<Theta> {..m} x - ?\\<Theta> {..n} x) < e\"\n    if \"e > 0\" for e"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "have \"summable ?\\<Psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "by (rule Fourier_series_square_summable [OF os w f])"], ["proof (state)\nthis:\n  summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "then"], ["proof (chain)\npicking this:\n  summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)", "have \"Cauchy (\\<lambda>n. sum ?\\<Psi> {..n})\""], ["proof (prove)\nusing this:\n  summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n\ngoal (1 subgoal):\n 1. Cauchy\n     (\\<lambda>n.\n         sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n          {..n})", "by (simp add: summable_def sums_def_le convergent_eq_Cauchy)"], ["proof (state)\nthis:\n  Cauchy\n   (\\<lambda>n.\n       sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n        {..n})\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "then"], ["proof (chain)\npicking this:\n  Cauchy\n   (\\<lambda>n.\n       sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n        {..n})", "obtain M where M: \"\\<And>m n. \\<lbrakk>m\\<ge>M; n\\<ge>M\\<rbrakk> \\<Longrightarrow> dist (sum ?\\<Psi> {..m}) (sum ?\\<Psi> {..n}) < e\\<^sup>2\""], ["proof (prove)\nusing this:\n  Cauchy\n   (\\<lambda>n.\n       sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n        {..n})\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>m n.\n            \\<lbrakk>M \\<le> m; M \\<le> n\\<rbrakk>\n            \\<Longrightarrow> dist\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..m})\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..n})\n                              < e\\<^sup>2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  Cauchy\n   (\\<lambda>n.\n       sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n        {..n})\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>m n.\n            \\<lbrakk>M \\<le> m; M \\<le> n\\<rbrakk>\n            \\<Longrightarrow> dist\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..m})\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..n})\n                              < e\\<^sup>2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding Cauchy_def"], ["proof (prove)\nusing this:\n  \\<forall>e>0.\n     \\<exists>M.\n        \\<forall>m\\<ge>M.\n           \\<forall>n\\<ge>M.\n              dist\n               (sum (confine\n                      (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                 {..m})\n               (sum (confine\n                      (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                 {..n})\n              < e\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        (\\<And>m n.\n            \\<lbrakk>M \\<le> m; M \\<le> n\\<rbrakk>\n            \\<Longrightarrow> dist\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..m})\n                               (sum (confine\n(\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I)\n                                 {..n})\n                              < e\\<^sup>2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (drule_tac x=\"e^2\" in spec) auto"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<le> ?m; M \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> dist\n                     (sum (confine\n                            (\\<lambda>i.\n                                (orthonormal_coeff S w f i)\\<^sup>2)\n                            I)\n                       {..?m})\n                     (sum (confine\n                            (\\<lambda>i.\n                                (orthonormal_coeff S w f i)\\<^sup>2)\n                            I)\n                       {..?n})\n                    < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "have \"\\<lbrakk>m\\<ge>M; n\\<ge>M\\<rbrakk> \\<Longrightarrow> l2norm S (\\<lambda>x. ?\\<Theta> {..m} x - ?\\<Theta> {..n} x) < e\" for m n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>M \\<le> m; M \\<le> n\\<rbrakk>\n    \\<Longrightarrow> l2norm S\n                       (\\<lambda>x.\n                           (\\<Sum>i\\<in>I \\<inter> {..m}.\n                              orthonormal_coeff S w f i * w i x) -\n                           (\\<Sum>i\\<in>I \\<inter> {..n}.\n                              orthonormal_coeff S w f i * w i x))\n                      < e", "proof (induct m n rule: linorder_class.linorder_wlog)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "case (le m n)"], ["proof (state)\nthis:\n  m \\<le> n\n  M \\<le> m\n  M \\<le> n\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "have sum_diff: \"sum f(I \\<inter> {..n}) - sum f(I \\<inter> {..m}) = sum f(I \\<inter> {Suc m..n})\" for f :: \"nat \\<Rightarrow> real\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f (I \\<inter> {..n}) - sum f (I \\<inter> {..m}) =\n    sum f (I \\<inter> {Suc m..n})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sum f (I \\<inter> {..n}) - sum f (I \\<inter> {..m}) =\n    sum f (I \\<inter> {Suc m..n})", "have \"(I \\<inter> {..n}) =  (I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n})\" \"(I \\<inter> {..m}) \\<inter> (I \\<inter> {Suc m..n}) = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. I \\<inter> {..n} = I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n} &&&\n    I \\<inter> {..m} \\<inter> (I \\<inter> {Suc m..n}) = {}", "using le"], ["proof (prove)\nusing this:\n  m \\<le> n\n  M \\<le> m\n  M \\<le> n\n\ngoal (1 subgoal):\n 1. I \\<inter> {..n} = I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n} &&&\n    I \\<inter> {..m} \\<inter> (I \\<inter> {Suc m..n}) = {}", "by auto"], ["proof (state)\nthis:\n  I \\<inter> {..n} = I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n}\n  I \\<inter> {..m} \\<inter> (I \\<inter> {Suc m..n}) = {}\n\ngoal (1 subgoal):\n 1. sum f (I \\<inter> {..n}) - sum f (I \\<inter> {..m}) =\n    sum f (I \\<inter> {Suc m..n})", "then"], ["proof (chain)\npicking this:\n  I \\<inter> {..n} = I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n}\n  I \\<inter> {..m} \\<inter> (I \\<inter> {Suc m..n}) = {}", "show ?thesis"], ["proof (prove)\nusing this:\n  I \\<inter> {..n} = I \\<inter> {..m} \\<union> I \\<inter> {Suc m..n}\n  I \\<inter> {..m} \\<inter> (I \\<inter> {Suc m..n}) = {}\n\ngoal (1 subgoal):\n 1. sum f (I \\<inter> {..n}) - sum f (I \\<inter> {..m}) =\n    sum f (I \\<inter> {Suc m..n})", "by (simp add: algebra_simps flip: sum.union_disjoint)"], ["proof (state)\nthis:\n  sum f (I \\<inter> {..n}) - sum f (I \\<inter> {..m}) =\n  sum f (I \\<inter> {Suc m..n})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  sum ?f (I \\<inter> {..n}) - sum ?f (I \\<inter> {..m}) =\n  sum ?f (I \\<inter> {Suc m..n})\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "have \"(l2norm S (\\<lambda>x. ?\\<Theta> {..n} x - ?\\<Theta> {..m} x))^2\n            \\<le> \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}. (orthonormal_coeff S w f i)\\<^sup>2) - (\\<Sum>i\\<in>I \\<inter> {..m}. (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          (\\<Sum>i\\<in>I \\<inter> {..n}.\n             orthonormal_coeff S w f i * w i x) -\n          (\\<Sum>i\\<in>I \\<inter> {..m}.\n             orthonormal_coeff S w f i * w i x)))\\<^sup>2\n    \\<le> \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n                   (orthonormal_coeff S w f i)\\<^sup>2) -\n                (\\<Sum>i\\<in>I \\<inter> {..m}.\n                   (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>", "proof (simp add: sum_diff)"], ["proof (state)\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "have \"(l2norm S (?\\<Theta> {Suc m..n}))\\<^sup>2\n            = (\\<Sum>i\\<in>I \\<inter> {Suc m..n}. l2product S (\\<lambda>x. \\<Sum>j\\<in>I \\<inter> {Suc m..n}. orthonormal_coeff S w f j * w j x)\n                                               (\\<lambda>x. orthonormal_coeff S w f i * w i x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2 =\n    (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n       l2product S\n        (\\<lambda>x.\n            \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n              orthonormal_coeff S w f j * w j x)\n        (\\<lambda>x. orthonormal_coeff S w f i * w i x))", "by (simp add: l2norm_pow_2 l2product_rsum si w)"], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n          orthonormal_coeff S w f i * w i x))\\<^sup>2 =\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     l2product S\n      (\\<lambda>x.\n          \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f j * w j x)\n      (\\<lambda>x. orthonormal_coeff S w f i * w i x))\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "also"], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n          orthonormal_coeff S w f i * w i x))\\<^sup>2 =\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     l2product S\n      (\\<lambda>x.\n          \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f j * w j x)\n      (\\<lambda>x. orthonormal_coeff S w f i * w i x))\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "have \"\\<dots> = (\\<Sum>i\\<in>I \\<inter> {Suc m..n}. \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n                            orthonormal_coeff S w f j * orthonormal_coeff S w f i * l2product S (w j) (w i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n       l2product S\n        (\\<lambda>x.\n            \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n              orthonormal_coeff S w f j * w j x)\n        (\\<lambda>x. orthonormal_coeff S w f i * w i x)) =\n    (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n       \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n         orthonormal_coeff S w f j * orthonormal_coeff S w f i *\n         l2product S (w j) (w i))", "by (simp add: l2product_lsum l2product_lmult l2product_rmult si w flip: mult.assoc)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     l2product S\n      (\\<lambda>x.\n          \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f j * w j x)\n      (\\<lambda>x. orthonormal_coeff S w f i * w i x)) =\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n       orthonormal_coeff S w f j * orthonormal_coeff S w f i *\n       l2product S (w j) (w i))\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "also"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     l2product S\n      (\\<lambda>x.\n          \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f j * w j x)\n      (\\<lambda>x. orthonormal_coeff S w f i * w i x)) =\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n       orthonormal_coeff S w f j * orthonormal_coeff S w f i *\n       l2product S (w j) (w i))\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "have \"\\<dots> \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}. (orthonormal_coeff S w f i)\\<^sup>2\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n       \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n         orthonormal_coeff S w f j * orthonormal_coeff S w f i *\n         l2product S (w j) (w i))\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "by (simp add: orthonormal_system_eq [OF os] power2_eq_square if_distrib [of \"(*)_\"] cong: if_cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n     \\<Sum>j\\<in>I \\<inter> {Suc m..n}.\n       orthonormal_coeff S w f j * orthonormal_coeff S w f i *\n       l2product S (w j) (w i))\n  \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                (orthonormal_coeff S w f i)\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "finally"], ["proof (chain)\npicking this:\n  (l2norm S\n    (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n          orthonormal_coeff S w f i * w i x))\\<^sup>2\n  \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "show \"(l2norm S (?\\<Theta> {Suc m..n}))\\<^sup>2 \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}. (orthonormal_coeff S w f i)\\<^sup>2\\<bar>\""], ["proof (prove)\nusing this:\n  (l2norm S\n    (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n          orthonormal_coeff S w f i * w i x))\\<^sup>2\n  \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                (orthonormal_coeff S w f i)\\<^sup>2\\<bar>\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n            orthonormal_coeff S w f i * w i x))\\<^sup>2\n    \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                  (orthonormal_coeff S w f i)\\<^sup>2\\<bar>", "."], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        \\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n          orthonormal_coeff S w f i * w i x))\\<^sup>2\n  \\<le> \\<bar>\\<Sum>i\\<in>I \\<inter> {Suc m..n}.\n                (orthonormal_coeff S w f i)\\<^sup>2\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  \\<le> \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n                 (orthonormal_coeff S w f i)\\<^sup>2) -\n              (\\<Sum>i\\<in>I \\<inter> {..m}.\n                 (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "also"], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  \\<le> \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n                 (orthonormal_coeff S w f i)\\<^sup>2) -\n              (\\<Sum>i\\<in>I \\<inter> {..m}.\n                 (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "have \"\\<dots> < e\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n             (orthonormal_coeff S w f i)\\<^sup>2) -\n          (\\<Sum>i\\<in>I \\<inter> {..m}.\n             (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\n    < e\\<^sup>2", "using M [OF \\<open>n\\<ge>M\\<close> \\<open>m\\<ge>M\\<close>]"], ["proof (prove)\nusing this:\n  dist\n   (sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I) {..n})\n   (sum (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) I) {..m})\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n             (orthonormal_coeff S w f i)\\<^sup>2) -\n          (\\<Sum>i\\<in>I \\<inter> {..m}.\n             (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\n    < e\\<^sup>2", "by (simp add: dist_real_def sum_confine_eq_Int Int_commute)"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>i\\<in>I \\<inter> {..n}.\n           (orthonormal_coeff S w f i)\\<^sup>2) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           (orthonormal_coeff S w f i)\\<^sup>2)\\<bar>\n  < e\\<^sup>2\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "finally"], ["proof (chain)\npicking this:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2", "have \"(l2norm S (\\<lambda>x. ?\\<Theta> {..m} x - ?\\<Theta> {..n} x))^2 < e^2\""], ["proof (prove)\nusing this:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          (\\<Sum>i\\<in>I \\<inter> {..m}.\n             orthonormal_coeff S w f i * w i x) -\n          (\\<Sum>i\\<in>I \\<inter> {..n}.\n             orthonormal_coeff S w f i * w i x)))\\<^sup>2\n    < e\\<^sup>2", "using l2norm_diff [OF si si]"], ["proof (prove)\nusing this:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..m}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2\n  \\<lbrakk>finite ?A2; finite ?A1\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> ?A2.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> ?A1.\n                            orthonormal_coeff S w f i * w i x)) =\n                    l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> ?A1.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> ?A2.\n                            orthonormal_coeff S w f i * w i x))\n\ngoal (1 subgoal):\n 1. (l2norm S\n      (\\<lambda>x.\n          (\\<Sum>i\\<in>I \\<inter> {..m}.\n             orthonormal_coeff S w f i * w i x) -\n          (\\<Sum>i\\<in>I \\<inter> {..n}.\n             orthonormal_coeff S w f i * w i x)))\\<^sup>2\n    < e\\<^sup>2", "by simp"], ["proof (state)\nthis:\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..m}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..n}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2\n\ngoal (2 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<le> b; M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e\n 2. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "with \\<open>e > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < e\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..m}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..n}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2", "show ?case"], ["proof (prove)\nusing this:\n  0 < e\n  (l2norm S\n    (\\<lambda>x.\n        (\\<Sum>i\\<in>I \\<inter> {..m}. orthonormal_coeff S w f i * w i x) -\n        (\\<Sum>i\\<in>I \\<inter> {..n}.\n           orthonormal_coeff S w f i * w i x)))\\<^sup>2\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x.\n         (\\<Sum>i\\<in>I \\<inter> {..m}. orthonormal_coeff S w f i * w i x) -\n         (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x))\n    < e", "by (simp add: power2_less_imp_less)"], ["proof (state)\nthis:\n  l2norm S\n   (\\<lambda>x.\n       (\\<Sum>i\\<in>I \\<inter> {..m}. orthonormal_coeff S w f i * w i x) -\n       (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x))\n  < e\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "case (sym a b)"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..b}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..a}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e\n  M \\<le> a\n  M \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>\\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n                \\<Longrightarrow> l2norm S\n                                   (\\<lambda>x.\n (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x) -\n (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x))\n                                  < e;\n        M \\<le> a; M \\<le> b\\<rbrakk>\n       \\<Longrightarrow> l2norm S\n                          (\\<lambda>x.\n                              (\\<Sum>i\\<in>I \\<inter> {..a}.\n                                 orthonormal_coeff S w f i * w i x) -\n                              (\\<Sum>i\\<in>I \\<inter> {..b}.\n                                 orthonormal_coeff S w f i * w i x))\n                         < e", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..b}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..a}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e\n  M \\<le> a\n  M \\<le> b", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>M \\<le> b; M \\<le> a\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..b}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..a}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e\n  M \\<le> a\n  M \\<le> b\n\ngoal (1 subgoal):\n 1. l2norm S\n     (\\<lambda>x.\n         (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x) -\n         (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x))\n    < e", "by (subst l2norm_diff) (auto simp: si)"], ["proof (state)\nthis:\n  l2norm S\n   (\\<lambda>x.\n       (\\<Sum>i\\<in>I \\<inter> {..a}. orthonormal_coeff S w f i * w i x) -\n       (\\<Sum>i\\<in>I \\<inter> {..b}. orthonormal_coeff S w f i * w i x))\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>M \\<le> ?m; M \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..?m}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..?n}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>M \\<le> ?m; M \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..?m}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..?n}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>M \\<le> ?m; M \\<le> ?n\\<rbrakk>\n  \\<Longrightarrow> l2norm S\n                     (\\<lambda>x.\n                         (\\<Sum>i\\<in>I \\<inter> {..?m}.\n                            orthonormal_coeff S w f i * w i x) -\n                         (\\<Sum>i\\<in>I \\<inter> {..?n}.\n                            orthonormal_coeff S w f i * w i x))\n                    < e\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>m\\<ge>N.\n          \\<forall>n\\<ge>N.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..m}.\n                     orthonormal_coeff S w f i * w i x) -\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x))\n             < e", "by blast"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>m\\<ge>N.\n        \\<forall>n\\<ge>N.\n           l2norm S\n            (\\<lambda>x.\n                (\\<Sum>i\\<in>I \\<inter> {..m}.\n                   orthonormal_coeff S w f i * w i x) -\n                (\\<Sum>i\\<in>I \\<inter> {..n}.\n                   orthonormal_coeff S w f i * w i x))\n           < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>N.\n     \\<forall>m\\<ge>N.\n        \\<forall>n\\<ge>N.\n           l2norm S\n            (\\<lambda>x.\n                (\\<Sum>i\\<in>I \\<inter> {..m}.\n                   orthonormal_coeff S w f i * w i x) -\n                (\\<Sum>i\\<in>I \\<inter> {..n}.\n                   orthonormal_coeff S w f i * w i x))\n           < ?e\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with that"], ["proof (chain)\npicking this:\n  \\<lbrakk>?g square_integrable S;\n   (\\<lambda>n.\n       l2norm S\n        (\\<lambda>x.\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x) -\n            ?g x))\n   \\<longlonglongrightarrow> 0\\<rbrakk>\n  \\<Longrightarrow> thesis\n  0 < ?e \\<Longrightarrow>\n  \\<exists>N.\n     \\<forall>m\\<ge>N.\n        \\<forall>n\\<ge>N.\n           l2norm S\n            (\\<lambda>x.\n                (\\<Sum>i\\<in>I \\<inter> {..m}.\n                   orthonormal_coeff S w f i * w i x) -\n                (\\<Sum>i\\<in>I \\<inter> {..n}.\n                   orthonormal_coeff S w f i * w i x))\n           < ?e", "show thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?g square_integrable S;\n   (\\<lambda>n.\n       l2norm S\n        (\\<lambda>x.\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x) -\n            ?g x))\n   \\<longlonglongrightarrow> 0\\<rbrakk>\n  \\<Longrightarrow> thesis\n  0 < ?e \\<Longrightarrow>\n  \\<exists>N.\n     \\<forall>m\\<ge>N.\n        \\<forall>n\\<ge>N.\n           l2norm S\n            (\\<lambda>x.\n                (\\<Sum>i\\<in>I \\<inter> {..m}.\n                   orthonormal_coeff S w f i * w i x) -\n                (\\<Sum>i\\<in>I \\<inter> {..n}.\n                   orthonormal_coeff S w f i * w i x))\n           < ?e\n\ngoal (1 subgoal):\n 1. thesis", "by (blast intro: si [of \"{.._}\"] l2_complete [of \"\\<lambda>n. ?\\<Theta> {..n}\"])"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_series_l2_summable_strong:\n  assumes os: \"orthonormal_system S w\" and w: \"\\<And>i. (w i) square_integrable S\"\n    and f: \"f square_integrable S\"\n  obtains g where \"g square_integrable S\"\n          \"\\<And>i. i \\<in> I \\<Longrightarrow> orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0\"\n          \"(\\<lambda>n. l2norm S (\\<lambda>x. (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) - g x))\n           \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         \\<And>i.\n            i \\<in> I \\<Longrightarrow>\n            orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         \\<And>i.\n            i \\<in> I \\<Longrightarrow>\n            orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have S: \"S \\<in> sets lebesgue\""], ["proof (prove)\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "using f square_integrable_def"], ["proof (prove)\nusing this:\n  f square_integrable S\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. S \\<in> sets lebesgue", "by blast"], ["proof (state)\nthis:\n  S \\<in> sets lebesgue\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         \\<And>i.\n            i \\<in> I \\<Longrightarrow>\n            orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain g where g: \"g square_integrable S\"\n            and teng: \"(\\<lambda>n. l2norm S (\\<lambda>x. (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) - g x))\n                       \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Fourier_series_l2_summable [OF assms]"], ["proof (prove)\nusing this:\n  (\\<And>g.\n      \\<lbrakk>g square_integrable S;\n       (\\<lambda>n.\n           l2norm S\n            (\\<lambda>x.\n                (\\<Sum>i\\<in>?I \\<inter> {..n}.\n                   orthonormal_coeff S w f i * w i x) -\n                g x))\n       \\<longlonglongrightarrow> 0\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "."], ["proof (state)\nthis:\n  g square_integrable S\n  (\\<lambda>n.\n      l2norm S\n       (\\<lambda>x.\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) -\n           g x))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g square_integrable S;\n         \\<And>i.\n            i \\<in> I \\<Longrightarrow>\n            orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0;\n         (\\<lambda>n.\n             l2norm S\n              (\\<lambda>x.\n                  (\\<Sum>i\\<in>I \\<inter> {..n}.\n                     orthonormal_coeff S w f i * w i x) -\n                  g x))\n         \\<longlonglongrightarrow> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. ?g square_integrable S\n 2. \\<And>i.\n       i \\<in> I \\<Longrightarrow>\n       orthonormal_coeff S w (\\<lambda>x. f x - ?g x) i = 0\n 3. (\\<lambda>n.\n        l2norm S\n         (\\<lambda>x.\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) -\n             ?g x))\n    \\<longlonglongrightarrow> 0", "show \"orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0\"\n      if \"i \\<in> I\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. orthonormal_coeff S w (\\<lambda>x. f x - g x) i = 0", "proof (rule tendsto_unique)"], ["proof (state)\ngoal (3 subgoals):\n 1. ?F \\<noteq> \\<bottom>\n 2. (?f \\<longlongrightarrow>\n     orthonormal_coeff S w (\\<lambda>x. f x - g x) i)\n     ?F\n 3. (?f \\<longlongrightarrow> 0) ?F", "let ?\\<Theta> = \"\\<lambda>A x. (\\<Sum>i\\<in>I \\<inter> A. orthonormal_coeff S w f i * w i x)\""], ["proof (state)\ngoal (3 subgoals):\n 1. ?F \\<noteq> \\<bottom>\n 2. (?f \\<longlongrightarrow>\n     orthonormal_coeff S w (\\<lambda>x. f x - g x) i)\n     ?F\n 3. (?f \\<longlongrightarrow> 0) ?F", "let ?f = \"\\<lambda>n. l2product S (w i) (\\<lambda>x. (f x - ?\\<Theta> {..n} x) + (?\\<Theta> {..n} x - g x))\""], ["proof (state)\ngoal (3 subgoals):\n 1. ?F \\<noteq> \\<bottom>\n 2. (?f \\<longlongrightarrow>\n     orthonormal_coeff S w (\\<lambda>x. f x - g x) i)\n     ?F\n 3. (?f \\<longlongrightarrow> 0) ?F", "show \"?f \\<longlonglongrightarrow> orthonormal_coeff S w (\\<lambda>x. f x - g x) i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> orthonormal_coeff S w (\\<lambda>x. f x - g x)\n                               i", "by (simp add: orthonormal_coeff_def)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      l2product S (w i)\n       (\\<lambda>x.\n           f x -\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) +\n           ((\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x) -\n            g x)))\n  \\<longlonglongrightarrow> orthonormal_coeff S w (\\<lambda>x. f x - g x) i\n\ngoal (2 subgoals):\n 1. sequentially \\<noteq> \\<bottom>\n 2. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> 0", "have 1: \"(\\<lambda>n. l2product S (w i) (\\<lambda>x. f x - ?\\<Theta> {..n} x)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x)))\n    \\<longlonglongrightarrow> 0", "proof (rule tendsto_eventually)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l2product S (w i)\n        (\\<lambda>x.\n            f x -\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x)) =\n       0", "have \"l2product S (w i) (\\<lambda>x. f x - ?\\<Theta> {..j} x) = 0\"\n            if \"j \\<ge> i\" for j"], ["proof (prove)\ngoal (1 subgoal):\n 1. l2product S (w i)\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<in>I \\<inter> {..j}.\n            orthonormal_coeff S w f i * w i x)) =\n    0", "using that \\<open>i \\<in> I\\<close>"], ["proof (prove)\nusing this:\n  i \\<le> j\n  i \\<in> I\n\ngoal (1 subgoal):\n 1. l2product S (w i)\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<in>I \\<inter> {..j}.\n            orthonormal_coeff S w f i * w i x)) =\n    0", "apply (simp add: l2product_rdiff l2product_rsum l2product_rmult orthonormal_coeff_def w f S)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i \\<le> j; i \\<in> I\\<rbrakk>\n    \\<Longrightarrow> l2product S (w i) f =\n                      (\\<Sum>ia\\<in>I \\<inter> {..j}.\n                         l2product S (w ia) f * l2product S (w i) (w ia))", "apply (simp add: orthonormal_system_eq [OF os] if_distrib [of \"(*)_\"] cong: if_cong)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  i \\<le> ?j \\<Longrightarrow>\n  l2product S (w i)\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<in>I \\<inter> {..?j}. orthonormal_coeff S w f i * w i x)) =\n  0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l2product S (w i)\n        (\\<lambda>x.\n            f x -\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x)) =\n       0", "then"], ["proof (chain)\npicking this:\n  i \\<le> ?j \\<Longrightarrow>\n  l2product S (w i)\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<in>I \\<inter> {..?j}. orthonormal_coeff S w f i * w i x)) =\n  0", "show \"\\<forall>\\<^sub>F n in sequentially. l2product S (w i) (\\<lambda>x. f x - ?\\<Theta> {..n} x) = 0\""], ["proof (prove)\nusing this:\n  i \\<le> ?j \\<Longrightarrow>\n  l2product S (w i)\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<in>I \\<inter> {..?j}. orthonormal_coeff S w f i * w i x)) =\n  0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l2product S (w i)\n        (\\<lambda>x.\n            f x -\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x)) =\n       0", "using eventually_at_top_linorder"], ["proof (prove)\nusing this:\n  i \\<le> ?j \\<Longrightarrow>\n  l2product S (w i)\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<in>I \\<inter> {..?j}. orthonormal_coeff S w f i * w i x)) =\n  0\n  eventually ?P at_top = (\\<exists>N. \\<forall>n\\<ge>N. ?P n)\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       l2product S (w i)\n        (\\<lambda>x.\n            f x -\n            (\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x)) =\n       0", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     l2product S (w i)\n      (\\<lambda>x.\n          f x -\n          (\\<Sum>i\\<in>I \\<inter> {..n}.\n             orthonormal_coeff S w f i * w i x)) =\n     0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      l2product S (w i)\n       (\\<lambda>x.\n           f x -\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. sequentially \\<noteq> \\<bottom>\n 2. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> 0", "have 2: \"(\\<lambda>n. l2product S (w i) (\\<lambda>x. ?\\<Theta> {..n} x - g x)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) -\n             g x))\n    \\<longlonglongrightarrow> 0", "proof (intro Lim_null_comparison [OF _ teng] eventuallyI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       norm\n        (l2product S (w i)\n          (\\<lambda>xa.\n              (\\<Sum>i\\<in>I \\<inter> {..x}.\n                 orthonormal_coeff S w f i * w i xa) -\n              g xa))\n       \\<le> l2norm S\n              (\\<lambda>xa.\n                  (\\<Sum>i\\<in>I \\<inter> {..x}.\n                     orthonormal_coeff S w f i * w i xa) -\n                  g xa)", "show \"norm (l2product S (w i) (\\<lambda>x. ?\\<Theta> {..n} x - g x)) \\<le> l2norm S (\\<lambda>x. ?\\<Theta> {..n} x - g x)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm\n     (l2product S (w i)\n       (\\<lambda>x.\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) -\n           g x))\n    \\<le> l2norm S\n           (\\<lambda>x.\n               (\\<Sum>i\\<in>I \\<inter> {..n}.\n                  orthonormal_coeff S w f i * w i x) -\n               g x)", "using Schwartz_inequality_abs [of \"w i\" S \"(\\<lambda>x. ?\\<Theta> {..n} x - g x)\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>w i square_integrable S;\n   (\\<lambda>x.\n       (\\<Sum>i\\<in>I \\<inter> {..n}. orthonormal_coeff S w f i * w i x) -\n       g x) square_integrable\n   S\\<rbrakk>\n  \\<Longrightarrow> \\<bar>l2product S (w i)\n                           (\\<lambda>x.\n                               (\\<Sum>i\\<in>I \\<inter> {..n}.\n                                  orthonormal_coeff S w f i * w i x) -\n                               g x)\\<bar>\n                    \\<le> l2norm S (w i) *\n                          l2norm S\n                           (\\<lambda>x.\n                               (\\<Sum>i\\<in>I \\<inter> {..n}.\n                                  orthonormal_coeff S w f i * w i x) -\n                               g x)\n\ngoal (1 subgoal):\n 1. norm\n     (l2product S (w i)\n       (\\<lambda>x.\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) -\n           g x))\n    \\<le> l2norm S\n           (\\<lambda>x.\n               (\\<Sum>i\\<in>I \\<inter> {..n}.\n                  orthonormal_coeff S w f i * w i x) -\n               g x)", "by (simp add: S g f w orthonormal_system_l2norm [OF os])"], ["proof (state)\nthis:\n  norm\n   (l2product S (w i)\n     (\\<lambda>x.\n         (\\<Sum>i\\<in>I \\<inter> {..?n}.\n            orthonormal_coeff S w f i * w i x) -\n         g x))\n  \\<le> l2norm S\n         (\\<lambda>x.\n             (\\<Sum>i\\<in>I \\<inter> {..?n}.\n                orthonormal_coeff S w f i * w i x) -\n             g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      l2product S (w i)\n       (\\<lambda>x.\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) -\n           g x))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. sequentially \\<noteq> \\<bottom>\n 2. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> 0", "show \"?f \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> 0", "using that tendsto_add [OF 1 2]"], ["proof (prove)\nusing this:\n  i \\<in> I\n  (\\<lambda>x.\n      l2product S (w i)\n       (\\<lambda>xa.\n           f xa -\n           (\\<Sum>i\\<in>I \\<inter> {..x}.\n              orthonormal_coeff S w f i * w i xa)) +\n      l2product S (w i)\n       (\\<lambda>xa.\n           (\\<Sum>i\\<in>I \\<inter> {..x}.\n              orthonormal_coeff S w f i * w i xa) -\n           g xa))\n  \\<longlonglongrightarrow> 0 + 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2product S (w i)\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) +\n             ((\\<Sum>i\\<in>I \\<inter> {..n}.\n                 orthonormal_coeff S w f i * w i x) -\n              g x)))\n    \\<longlonglongrightarrow> 0", "by (subst l2product_radd) (simp_all add: l2product_radd w f g S)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      l2product S (w i)\n       (\\<lambda>x.\n           f x -\n           (\\<Sum>i\\<in>I \\<inter> {..n}.\n              orthonormal_coeff S w f i * w i x) +\n           ((\\<Sum>i\\<in>I \\<inter> {..n}.\n               orthonormal_coeff S w f i * w i x) -\n            g x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. sequentially \\<noteq> \\<bottom>", "qed auto"], ["proof (state)\nthis:\n  ?i \\<in> I \\<Longrightarrow>\n  orthonormal_coeff S w (\\<lambda>x. f x - g x) ?i = 0\n\ngoal (2 subgoals):\n 1. g square_integrable S\n 2. (\\<lambda>n.\n        l2norm S\n         (\\<lambda>x.\n             (\\<Sum>i\\<in>I \\<inter> {..n}.\n                orthonormal_coeff S w f i * w i x) -\n             g x))\n    \\<longlonglongrightarrow> 0", "qed (auto simp: g teng)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Actual trigonometric orthogonality relations\\<close>"], ["", "lemma integrable_sin_cx:\n  \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(x * c))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. sin (x * c))", "by (intro continuous_imp_integrable_real continuous_intros)"], ["", "lemma integrable_cos_cx:\n  \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(x * c))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (x * c))", "by (intro continuous_imp_integrable_real continuous_intros)"], ["", "lemma integral_cos_Z' [simp]:\n  assumes \"n \\<in> \\<int>\"\n  shows \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(n * x)) = (if n = 0 then 2 * pi else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. cos (n * x) =\n    (if n = 0 then 2 * pi else 0)", "by (metis assms integral_cos_Z mult_commute_abs)"], ["", "lemma integral_sin_and_cos:\n  fixes m n::int\n  shows\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * cos(n * x)) = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi else 0)\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * sin(n * x)) = 0\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(m * x) * cos(n * x)) = 0\"\n  \"\\<lbrakk>m \\<ge> 0; n \\<ge> 0\\<rbrakk> \\<Longrightarrow> integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x)) = (if m = n \\<and> n \\<noteq> 0 then pi else 0)\"\n  \"\\<bar>integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x))\\<bar> = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}.\n        cos (real_of_int m * x) * cos (real_of_int n * x) =\n     (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi\n      else 0) &&&\n     LINT x|lebesgue_on {- pi..pi}.\n        cos (real_of_int m * x) * sin (real_of_int n * x) =\n     0) &&&\n    LINT x|lebesgue_on {- pi..pi}.\n       sin (real_of_int m * x) * cos (real_of_int n * x) =\n    0 &&&\n    (\\<lbrakk>0 \\<le> m; 0 \\<le> n\\<rbrakk>\n     \\<Longrightarrow> LINT x|lebesgue_on {- pi..pi}.\n                          sin (real_of_int m * x) *\n                          sin (real_of_int n * x) =\n                       (if m = n \\<and> n \\<noteq> 0 then pi else 0)) &&&\n    \\<bar>LINT x|lebesgue_on {- pi..pi}.\n             sin (real_of_int m * x) * sin (real_of_int n * x)\\<bar> =\n    (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)", "by (simp_all add: abs_if sin_times_sin cos_times_sin sin_times_cos cos_times_cos\n                    integrable_sin_cx integrable_cos_cx mult_ac\n               flip: distrib_left distrib_right left_diff_distrib right_diff_distrib)"], ["", "lemma integral_sin_and_cos_Z [simp]:\n  fixes m n::real\n  assumes \"m \\<in> \\<int>\" \"n \\<in> \\<int>\"\n  shows\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * cos(n * x)) = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi else 0)\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(m * x) * sin(n * x)) = 0\"\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(m * x) * cos(n * x)) = 0\"\n  \"\\<bar>integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x))\\<bar> = (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. cos (m * x) * cos (n * x) =\n     (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi\n      else 0) &&&\n     LINT x|lebesgue_on {- pi..pi}. cos (m * x) * sin (n * x) = 0) &&&\n    LINT x|lebesgue_on {- pi..pi}. sin (m * x) * cos (n * x) = 0 &&&\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x)\\<bar> =\n    (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)", "using assms"], ["proof (prove)\nusing this:\n  m \\<in> \\<int>\n  n \\<in> \\<int>\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. cos (m * x) * cos (n * x) =\n     (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi\n      else 0) &&&\n     LINT x|lebesgue_on {- pi..pi}. cos (m * x) * sin (n * x) = 0) &&&\n    LINT x|lebesgue_on {- pi..pi}. sin (m * x) * cos (n * x) = 0 &&&\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x)\\<bar> =\n    (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)", "unfolding Ints_def"], ["proof (prove)\nusing this:\n  m \\<in> range real_of_int\n  n \\<in> range real_of_int\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. cos (m * x) * cos (n * x) =\n     (if \\<bar>m\\<bar> = \\<bar>n\\<bar> then if n = 0 then 2 * pi else pi\n      else 0) &&&\n     LINT x|lebesgue_on {- pi..pi}. cos (m * x) * sin (n * x) = 0) &&&\n    LINT x|lebesgue_on {- pi..pi}. sin (m * x) * cos (n * x) = 0 &&&\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x)\\<bar> =\n    (if \\<bar>m\\<bar> = \\<bar>n\\<bar> \\<and> n \\<noteq> 0 then pi else 0)", "apply safe"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> LINT xb|lebesgue_on {- pi..pi}.\n                            cos (real_of_int x * xb) *\n                            cos (real_of_int xa * xb) =\n                         (if \\<bar>real_of_int x\\<bar> =\n                             \\<bar>real_of_int xa\\<bar>\n                          then if real_of_int xa = 0 then 2 * pi else pi\n                          else 0)\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> LINT xb|lebesgue_on {- pi..pi}.\n                            cos (real_of_int x * xb) *\n                            sin (real_of_int xa * xb) =\n                         0\n 3. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> LINT xb|lebesgue_on {- pi..pi}.\n                            sin (real_of_int x * xb) *\n                            cos (real_of_int xa * xb) =\n                         0\n 4. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT xb|lebesgue_on {- pi..pi}.\n                                  sin (real_of_int x * xb) *\n                                  sin (real_of_int xa * xb)\\<bar> =\n                         (if \\<bar>real_of_int x\\<bar> =\n                             \\<bar>real_of_int xa\\<bar> \\<and>\n                             real_of_int xa \\<noteq> 0\n                          then pi else 0)", "unfolding integral_sin_and_cos"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> (if \\<bar>x\\<bar> = \\<bar>xa\\<bar>\n                          then if xa = 0 then 2 * pi else pi else 0) =\n                         (if \\<bar>real_of_int x\\<bar> =\n                             \\<bar>real_of_int xa\\<bar>\n                          then if real_of_int xa = 0 then 2 * pi else pi\n                          else 0)\n 2. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> 0 = 0\n 3. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> 0 = 0\n 4. \\<And>x xa.\n       \\<lbrakk>x \\<in> UNIV; m = real_of_int x; xa \\<in> UNIV;\n        n = real_of_int xa\\<rbrakk>\n       \\<Longrightarrow> (if \\<bar>x\\<bar> = \\<bar>xa\\<bar> \\<and>\n                             xa \\<noteq> 0\n                          then pi else 0) =\n                         (if \\<bar>real_of_int x\\<bar> =\n                             \\<bar>real_of_int xa\\<bar> \\<and>\n                             real_of_int xa \\<noteq> 0\n                          then pi else 0)", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma integral_sin_and_cos_N [simp]:\n  fixes m n::real\n  assumes \"m \\<in> \\<nat>\" \"n \\<in> \\<nat>\"\n  shows \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin (m * x) * sin (n * x)) = (if m = n \\<and> n \\<noteq> 0 then pi else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x) =\n    (if m = n \\<and> n \\<noteq> 0 then pi else 0)", "using assms"], ["proof (prove)\nusing this:\n  m \\<in> \\<nat>\n  n \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x) =\n    (if m = n \\<and> n \\<noteq> 0 then pi else 0)", "unfolding Nats_altdef1"], ["proof (prove)\nusing this:\n  m \\<in> {real_of_int n |n. 0 \\<le> n}\n  n \\<in> {real_of_int n |n. 0 \\<le> n}\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. sin (m * x) * sin (n * x) =\n    (if m = n \\<and> n \\<noteq> 0 then pi else 0)", "by (auto simp: integral_sin_and_cos)"], ["", "lemma integrable_sin_and_cos:\n  fixes m n::int\n  shows \"integrable (lebesgue_on {a..b}) (\\<lambda>x. cos(x * m) * cos(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. cos(x * m) * sin(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. sin(x * m) * cos(x * n))\"\n        \"integrable (lebesgue_on {a..b}) (\\<lambda>x. sin(x * m) * sin(x * n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (integrable (lebesgue_on {a..b})\n      (\\<lambda>x. cos (x * real_of_int m) * cos (x * real_of_int n)) &&&\n     integrable (lebesgue_on {a..b})\n      (\\<lambda>x. cos (x * real_of_int m) * sin (x * real_of_int n))) &&&\n    integrable (lebesgue_on {a..b})\n     (\\<lambda>x. sin (x * real_of_int m) * cos (x * real_of_int n)) &&&\n    integrable (lebesgue_on {a..b})\n     (\\<lambda>x. sin (x * real_of_int m) * sin (x * real_of_int n))", "by (intro continuous_imp_integrable_real continuous_intros)+"], ["", "lemma sqrt_pi_ge1: \"sqrt pi \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 \\<le> sqrt pi", "using pi_gt3"], ["proof (prove)\nusing this:\n  3 < pi\n\ngoal (1 subgoal):\n 1. 1 \\<le> sqrt pi", "by auto"], ["", "definition trigonometric_set :: \"nat \\<Rightarrow> real \\<Rightarrow> real\"\n  where \"trigonometric_set n \\<equiv>\n    if n = 0 then \\<lambda>x. 1 / sqrt(2 * pi)\n    else if odd n then \\<lambda>x. sin(real(Suc (n div 2)) * x) / sqrt(pi)\n    else (\\<lambda>x. cos((n div 2) * x) / sqrt pi)\""], ["", "lemma trigonometric_set:\n  \"trigonometric_set 0 x = 1 / sqrt(2 * pi)\"\n  \"trigonometric_set (Suc (2 * n)) x = sin(real(Suc n) * x) / sqrt(pi)\"\n  \"trigonometric_set (2 * n + 2) x = cos(real(Suc n) * x) / sqrt(pi)\"\n  \"trigonometric_set (Suc (Suc (2 * n))) x = cos(real(Suc n) * x) / sqrt(pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (trigonometric_set 0 x = 1 / sqrt (2 * pi) &&&\n     trigonometric_set (Suc (2 * n)) x =\n     sin (real (Suc n) * x) / sqrt pi) &&&\n    trigonometric_set (2 * n + 2) x = cos (real (Suc n) * x) / sqrt pi &&&\n    trigonometric_set (Suc (Suc (2 * n))) x =\n    cos (real (Suc n) * x) / sqrt pi", "by (simp_all add: trigonometric_set_def algebra_simps add_divide_distrib)"], ["", "lemma trigonometric_set_even:\n   \"trigonometric_set(2*k) = (if k = 0 then (\\<lambda>x. 1 / sqrt(2 * pi)) else (\\<lambda>x. cos(k * x) / sqrt pi))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trigonometric_set (2 * k) =\n    (if k = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n     else (\\<lambda>x. cos (real k * x) / sqrt pi))", "by (induction k) (auto simp: trigonometric_set_def add_divide_distrib split: if_split_asm)"], ["", "lemma orthonormal_system_trigonometric_set:\n    \"orthonormal_system {-pi..pi} trigonometric_set\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthonormal_system {- pi..pi} trigonometric_set", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. orthonormal_system {- pi..pi} trigonometric_set", "have \"l2product {-pi..pi} (trigonometric_set m) (trigonometric_set n) = (if m = n then 1 else 0)\" for m n"], ["proof (prove)\ngoal (1 subgoal):\n 1. l2product {- pi..pi} (trigonometric_set m) (trigonometric_set n) =\n    (if m = n then 1 else 0)", "proof (induction m rule: odd_even_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. l2product {- pi..pi} (trigonometric_set 0) (trigonometric_set n) =\n    (if 0 = n then 1 else 0)\n 2. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (Suc (2 * na)))\n        (trigonometric_set n) =\n       (if Suc (2 * na) = n then 1 else 0)\n 3. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "case 0"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. l2product {- pi..pi} (trigonometric_set 0) (trigonometric_set n) =\n    (if 0 = n then 1 else 0)\n 2. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (Suc (2 * na)))\n        (trigonometric_set n) =\n       (if Suc (2 * na) = n then 1 else 0)\n 3. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. l2product {- pi..pi} (trigonometric_set 0) (trigonometric_set n) =\n    (if 0 = n then 1 else 0)", "by (induction n rule: odd_even_cases) (auto simp: trigonometric_set l2product_def measure_restrict_space)"], ["proof (state)\nthis:\n  l2product {- pi..pi} (trigonometric_set 0) (trigonometric_set n) =\n  (if 0 = n then 1 else 0)\n\ngoal (2 subgoals):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (Suc (2 * na)))\n        (trigonometric_set n) =\n       (if Suc (2 * na) = n then 1 else 0)\n 2. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (Suc (2 * na)))\n        (trigonometric_set n) =\n       (if Suc (2 * na) = n then 1 else 0)\n 2. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "case (odd m)"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (Suc (2 * na)))\n        (trigonometric_set n) =\n       (if Suc (2 * na) = n then 1 else 0)\n 2. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. l2product {- pi..pi} (trigonometric_set (Suc (2 * m)))\n     (trigonometric_set n) =\n    (if Suc (2 * m) = n then 1 else 0)", "by (induction n rule: odd_even_cases) (auto simp: trigonometric_set l2product_def double_not_eq_Suc_double)"], ["proof (state)\nthis:\n  l2product {- pi..pi} (trigonometric_set (Suc (2 * m)))\n   (trigonometric_set n) =\n  (if Suc (2 * m) = n then 1 else 0)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "case (even m)"], ["proof (state)\nthis:\n  \n\ngoal (1 subgoal):\n 1. \\<And>na.\n       l2product {- pi..pi} (trigonometric_set (2 * na + 2))\n        (trigonometric_set n) =\n       (if 2 * na + 2 = n then 1 else 0)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. l2product {- pi..pi} (trigonometric_set (2 * m + 2))\n     (trigonometric_set n) =\n    (if 2 * m + 2 = n then 1 else 0)", "by (induction n rule: odd_even_cases) (auto simp: trigonometric_set l2product_def Suc_double_not_eq_double)"], ["proof (state)\nthis:\n  l2product {- pi..pi} (trigonometric_set (2 * m + 2))\n   (trigonometric_set n) =\n  (if 2 * m + 2 = n then 1 else 0)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l2product {- pi..pi} (trigonometric_set ?m) (trigonometric_set ?n) =\n  (if ?m = ?n then 1 else 0)\n\ngoal (1 subgoal):\n 1. orthonormal_system {- pi..pi} trigonometric_set", "then"], ["proof (chain)\npicking this:\n  l2product {- pi..pi} (trigonometric_set ?m) (trigonometric_set ?n) =\n  (if ?m = ?n then 1 else 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  l2product {- pi..pi} (trigonometric_set ?m) (trigonometric_set ?n) =\n  (if ?m = ?n then 1 else 0)\n\ngoal (1 subgoal):\n 1. orthonormal_system {- pi..pi} trigonometric_set", "unfolding orthonormal_system_def"], ["proof (prove)\nusing this:\n  l2product {- pi..pi} (trigonometric_set ?m) (trigonometric_set ?n) =\n  (if ?m = ?n then 1 else 0)\n\ngoal (1 subgoal):\n 1. \\<forall>m n.\n       l2product {- pi..pi} (trigonometric_set m) (trigonometric_set n) =\n       (if m = n then 1 else 0)", "by auto"], ["proof (state)\nthis:\n  orthonormal_system {- pi..pi} trigonometric_set\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma square_integrable_trigonometric_set:\n   \"(trigonometric_set i) square_integrable {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "have \"continuous_on {-pi..pi} (\\<lambda>x. sin ((1 + real n) * x) / sqrt pi)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi} (\\<lambda>x. sin ((1 + real n) * x) / sqrt pi)", "by (intro continuous_intros) auto"], ["proof (state)\nthis:\n  continuous_on {- pi..pi} (\\<lambda>x. sin ((1 + real ?n) * x) / sqrt pi)\n\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "moreover"], ["proof (state)\nthis:\n  continuous_on {- pi..pi} (\\<lambda>x. sin ((1 + real ?n) * x) / sqrt pi)\n\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "have \"continuous_on {-pi..pi} (\\<lambda>x. cos (real i * x / 2) / sqrt pi) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi} (\\<lambda>x. cos (real i * x / 2) / sqrt pi)", "by (intro continuous_intros) auto"], ["proof (state)\nthis:\n  continuous_on {- pi..pi} (\\<lambda>x. cos (real i * x / 2) / sqrt pi)\n\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "ultimately"], ["proof (chain)\npicking this:\n  continuous_on {- pi..pi} (\\<lambda>x. sin ((1 + real ?n) * x) / sqrt pi)\n  continuous_on {- pi..pi} (\\<lambda>x. cos (real i * x / 2) / sqrt pi)", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous_on {- pi..pi} (\\<lambda>x. sin ((1 + real ?n) * x) / sqrt pi)\n  continuous_on {- pi..pi} (\\<lambda>x. cos (real i * x / 2) / sqrt pi)\n\ngoal (1 subgoal):\n 1. trigonometric_set i square_integrable {- pi..pi}", "by (simp add: trigonometric_set_def)"], ["proof (state)\nthis:\n  trigonometric_set i square_integrable {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Weierstrass for trigonometric polynomials\\<close>"], ["", "lemma Weierstrass_trig_1:\n  fixes g :: \"real \\<Rightarrow> real\"\n  assumes contf: \"continuous_on UNIV g\" and periodic: \"\\<And>x. g(x + 2 * pi) = g x\" and 1: \"norm z = 1\"\n  shows \"continuous (at z within (sphere 0 1)) (g \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "proof (cases \"Re z < 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n 2. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "let ?f = \"complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ> Im \\<circ> Ln \\<circ> uminus\""], ["proof (state)\ngoal (2 subgoals):\n 1. Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n 2. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "case True"], ["proof (state)\nthis:\n  Re z < 0\n\ngoal (2 subgoals):\n 1. Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n 2. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "have \"continuous (at z within (sphere 0 1)) (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "proof (rule continuous_transform_within)"], ["proof (state)\ngoal (4 subgoals):\n 1. continuous (at z within sphere 0 1) ?f\n 2. 0 < ?d\n 3. z \\<in> sphere 0 1\n 4. \\<And>x'.\n       \\<lbrakk>x' \\<in> sphere 0 1; dist x' z < ?d\\<rbrakk>\n       \\<Longrightarrow> ?f x' =\n                         (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n                          x'", "have [simp]: \"z \\<notin> \\<real>\\<^sub>\\<ge>\\<^sub>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<notin> \\<real>\\<^sub>\\<ge>\\<^sub>0", "using True complex_nonneg_Reals_iff"], ["proof (prove)\nusing this:\n  Re z < 0\n  (?z \\<in> \\<real>\\<^sub>\\<ge>\\<^sub>0) = (0 \\<le> Re ?z \\<and> Im ?z = 0)\n\ngoal (1 subgoal):\n 1. z \\<notin> \\<real>\\<^sub>\\<ge>\\<^sub>0", "by auto"], ["proof (state)\nthis:\n  z \\<notin> \\<real>\\<^sub>\\<ge>\\<^sub>0\n\ngoal (4 subgoals):\n 1. continuous (at z within sphere 0 1) ?f\n 2. 0 < ?d\n 3. z \\<in> sphere 0 1\n 4. \\<And>x'.\n       \\<lbrakk>x' \\<in> sphere 0 1; dist x' z < ?d\\<rbrakk>\n       \\<Longrightarrow> ?f x' =\n                         (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n                          x'", "show \"continuous (at z within (sphere 0 1)) ?f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n      Im \\<circ>\n      Ln \\<circ>\n      uminus)", "by (intro continuous_within_Ln continuous_intros continuous_on_imp_continuous_within [OF contf]) auto"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n    Im \\<circ>\n    Ln \\<circ>\n    uminus)\n\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. z \\<in> sphere 0 1\n 3. \\<And>x'.\n       \\<lbrakk>x' \\<in> sphere 0 1; dist x' z < ?d\\<rbrakk>\n       \\<Longrightarrow> (complex_of_real \\<circ> g \\<circ>\n                          (\\<lambda>x. x + pi) \\<circ>\n                          Im \\<circ>\n                          Ln \\<circ>\n                          uminus)\n                          x' =\n                         (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n                          x'", "show \"?f x' =  (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'\"\n      if \"x' \\<in> (sphere 0 1)\" and \"dist x' z < 1\" for x'"], ["proof (prove)\ngoal (1 subgoal):\n 1. (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n     Im \\<circ>\n     Ln \\<circ>\n     uminus)\n     x' =\n    (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n     Im \\<circ>\n     Ln \\<circ>\n     uminus)\n     x' =\n    (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'", "have \"x' \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x' \\<noteq> 0", "using that"], ["proof (prove)\nusing this:\n  x' \\<in> sphere 0 1\n  dist x' z < 1\n\ngoal (1 subgoal):\n 1. x' \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  x' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n     Im \\<circ>\n     Ln \\<circ>\n     uminus)\n     x' =\n    (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'", "with that"], ["proof (chain)\npicking this:\n  x' \\<in> sphere 0 1\n  dist x' z < 1\n  x' \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  x' \\<in> sphere 0 1\n  dist x' z < 1\n  x' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ>\n     Im \\<circ>\n     Ln \\<circ>\n     uminus)\n     x' =\n    (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'", "by (auto simp: Ln_minus add.commute periodic)"], ["proof (state)\nthis:\n  (complex_of_real \\<circ> g \\<circ> (\\<lambda>x. x + pi) \\<circ> Im \\<circ>\n   Ln \\<circ>\n   uminus)\n   x' =\n  (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) x'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?x' \\<in> sphere 0 1; dist ?x' z < 1\\<rbrakk>\n  \\<Longrightarrow> (complex_of_real \\<circ> g \\<circ>\n                     (\\<lambda>x. x + pi) \\<circ>\n                     Im \\<circ>\n                     Ln \\<circ>\n                     uminus)\n                     ?x' =\n                    (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln) ?x'\n\ngoal (2 subgoals):\n 1. 0 < 1\n 2. z \\<in> sphere 0 1", "qed (use 1 in auto)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (2 subgoals):\n 1. Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n 2. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "then"], ["proof (chain)\npicking this:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "have \"continuous (at z within (sphere 0 1)) (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "unfolding o_def"], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (\\<lambda>x. complex_of_real (g (Im (Ln x))))\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (\\<lambda>x. Re (complex_of_real (g (Im (Ln x)))))", "by (rule continuous_Re)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (2 subgoals):\n 1. Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n 2. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "then"], ["proof (chain)\npicking this:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "by (simp add: o_def)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "case False"], ["proof (state)\nthis:\n  \\<not> Re z < 0\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "let ?f = \"complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln \\<circ> uminus\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "have \"z \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<noteq> 0", "using 1"], ["proof (prove)\nusing this:\n  cmod z = 1\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "with False"], ["proof (chain)\npicking this:\n  \\<not> Re z < 0\n  z \\<noteq> 0", "have \"z \\<notin> \\<real>\\<^sub>\\<le>\\<^sub>0\""], ["proof (prove)\nusing this:\n  \\<not> Re z < 0\n  z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. z \\<notin> \\<real>\\<^sub>\\<le>\\<^sub>0", "by (auto simp: not_less nonpos_Reals_def)"], ["proof (state)\nthis:\n  z \\<notin> \\<real>\\<^sub>\\<le>\\<^sub>0\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "then"], ["proof (chain)\npicking this:\n  z \\<notin> \\<real>\\<^sub>\\<le>\\<^sub>0", "have \"continuous (at z within (sphere 0 1)) (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\nusing this:\n  z \\<notin> \\<real>\\<^sub>\\<le>\\<^sub>0\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "by (intro continuous_within_Ln continuous_intros continuous_on_imp_continuous_within [OF contf]) auto"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "then"], ["proof (chain)\npicking this:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "have \"continuous (at z within (sphere 0 1)) (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "unfolding o_def"], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (\\<lambda>x. complex_of_real (g (Im (Ln x))))\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1)\n     (\\<lambda>x. Re (complex_of_real (g (Im (Ln x)))))", "by (rule continuous_Re)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. \\<not> Re z < 0 \\<Longrightarrow>\n    continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "then"], ["proof (chain)\npicking this:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)", "show ?thesis"], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1)\n   (Re \\<circ> complex_of_real \\<circ> g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "by (simp add: o_def)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n\ngoal:\nNo subgoals!", "qed"], ["", "inductive_set cx_poly :: \"(complex \\<Rightarrow> real) set\" where\n    Re: \"Re \\<in> cx_poly\"\n  | Im: \"Im \\<in> cx_poly\"\n  | const: \"(\\<lambda>x. c) \\<in> cx_poly\"\n  | add:   \"\\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk> \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\"\n  | mult:  \"\\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk> \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\""], ["", "declare cx_poly.intros [intro]"], ["", "lemma Weierstrass_trig_polynomial:\n  assumes contf: \"continuous_on {-pi..pi} f\" and fpi: \"f(-pi) = f pi\" and \"0 < e\"\n  obtains n::nat and a b where\n    \"\\<And>x::real. x \\<in> {-pi..pi} \\<Longrightarrow> \\<bar>f x - (\\<Sum>k\\<le>n. a k * sin (k * x) + b k * cos (k * x))\\<bar> < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "interpret CR: function_ring_on \"cx_poly\" \"sphere 0 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. function_ring_on cx_poly (sphere 0 1)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f. f \\<in> cx_poly \\<Longrightarrow> continuous_on (sphere 0 1) f\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 5. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly\n 6. \\<And>x y.\n       \\<lbrakk>x \\<in> sphere 0 1; y \\<in> sphere 0 1;\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "show \"continuous_on (sphere 0 1) f\" if \"f \\<in> cx_poly\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on (sphere 0 1) f", "using that"], ["proof (prove)\nusing this:\n  f \\<in> cx_poly\n\ngoal (1 subgoal):\n 1. continuous_on (sphere 0 1) f", "by induction (assumption | intro continuous_intros)+"], ["proof (state)\nthis:\n  ?f \\<in> cx_poly \\<Longrightarrow> continuous_on (sphere 0 1) ?f\n\ngoal (5 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 4. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly\n 5. \\<And>x y.\n       \\<lbrakk>x \\<in> sphere 0 1; y \\<in> sphere 0 1;\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "fix x y::complex"], ["proof (state)\ngoal (5 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 4. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly\n 5. \\<And>x y.\n       \\<lbrakk>x \\<in> sphere 0 1; y \\<in> sphere 0 1;\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "assume \"x \\<in> sphere 0 1\" and \"y \\<in> sphere 0 1\" and \"x \\<noteq> y\""], ["proof (state)\nthis:\n  x \\<in> sphere 0 1\n  y \\<in> sphere 0 1\n  x \\<noteq> y\n\ngoal (5 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 4. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly\n 5. \\<And>x y.\n       \\<lbrakk>x \\<in> sphere 0 1; y \\<in> sphere 0 1;\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "then"], ["proof (chain)\npicking this:\n  x \\<in> sphere 0 1\n  y \\<in> sphere 0 1\n  x \\<noteq> y", "consider \"Re x \\<noteq> Re y\" | \"Im x \\<noteq> Im y\""], ["proof (prove)\nusing this:\n  x \\<in> sphere 0 1\n  y \\<in> sphere 0 1\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Re x \\<noteq> Re y \\<Longrightarrow> thesis;\n     Im x \\<noteq> Im y \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using complex_eqI"], ["proof (prove)\nusing this:\n  x \\<in> sphere 0 1\n  y \\<in> sphere 0 1\n  x \\<noteq> y\n  \\<lbrakk>Re ?x = Re ?y; Im ?x = Im ?y\\<rbrakk> \\<Longrightarrow> ?x = ?y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Re x \\<noteq> Re y \\<Longrightarrow> thesis;\n     Im x \\<noteq> Im y \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  \\<lbrakk>Re x \\<noteq> Re y \\<Longrightarrow> ?thesis;\n   Im x \\<noteq> Im y \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (5 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 4. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly\n 5. \\<And>x y.\n       \\<lbrakk>x \\<in> sphere 0 1; y \\<in> sphere 0 1;\n        x \\<noteq> y\\<rbrakk>\n       \\<Longrightarrow> \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>Re x \\<noteq> Re y \\<Longrightarrow> ?thesis;\n   Im x \\<noteq> Im y \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"\\<exists>f\\<in>cx_poly. f x \\<noteq> f y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Re x \\<noteq> Re y \\<Longrightarrow> ?thesis;\n   Im x \\<noteq> Im y \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<exists>f\\<in>cx_poly. f x \\<noteq> f y", "by (metis cx_poly.Im cx_poly.Re)"], ["proof (state)\nthis:\n  \\<exists>f\\<in>cx_poly. f x \\<noteq> f y\n\ngoal (4 subgoals):\n 1. compact (sphere 0 1)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x + g x) \\<in> cx_poly\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; g \\<in> cx_poly\\<rbrakk>\n       \\<Longrightarrow> (\\<lambda>x. f x * g x) \\<in> cx_poly\n 4. \\<And>c. (\\<lambda>_. c) \\<in> cx_poly", "qed (auto simp: cx_poly.intros)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have \"continuous (at z within (sphere 0 1)) (f \\<circ> Im \\<circ> Ln)\" if \"norm z = 1\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "obtain g where contg: \"continuous_on UNIV g\" and gf: \"\\<And>x. x \\<in> {-pi..pi} \\<Longrightarrow> g x = f x\"\n      and periodic: \"\\<And>x. g(x + 2*pi) = g x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g;\n         \\<And>x. x \\<in> {- pi..pi} \\<Longrightarrow> g x = f x;\n         \\<And>x. g (x + 2 * pi) = g x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using Tietze_periodic_interval [OF contf fpi]"], ["proof (prove)\nusing this:\n  (\\<And>g.\n      \\<lbrakk>continuous_on UNIV g;\n       \\<And>x. x \\<in> {- pi..pi} \\<Longrightarrow> g x = f x;\n       \\<And>x. g (x + (pi - - pi)) = g x\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g;\n         \\<And>x. x \\<in> {- pi..pi} \\<Longrightarrow> g x = f x;\n         \\<And>x. g (x + 2 * pi) = g x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  continuous_on UNIV g\n  ?x \\<in> {- pi..pi} \\<Longrightarrow> g ?x = f ?x\n  g (?x + 2 * pi) = g ?x\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "let ?f = \"(g \\<circ> Im \\<circ> Ln)\""], ["proof (state)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "proof (rule continuous_transform_within)"], ["proof (state)\ngoal (4 subgoals):\n 1. continuous (at z within sphere 0 1) ?f\n 2. 0 < ?d\n 3. z \\<in> sphere 0 1\n 4. \\<And>x'.\n       \\<lbrakk>x' \\<in> sphere 0 1; dist x' z < ?d\\<rbrakk>\n       \\<Longrightarrow> ?f x' = (f \\<circ> Im \\<circ> Ln) x'", "show \"continuous (at z within (sphere 0 1)) ?f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "using Weierstrass_trig_1 [OF contg periodic that]"], ["proof (prove)\nusing this:\n  continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)", "by (simp add: sphere_def)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1) (g \\<circ> Im \\<circ> Ln)\n\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. z \\<in> sphere 0 1\n 3. \\<And>x'.\n       \\<lbrakk>x' \\<in> sphere 0 1; dist x' z < ?d\\<rbrakk>\n       \\<Longrightarrow> (g \\<circ> Im \\<circ> Ln) x' =\n                         (f \\<circ> Im \\<circ> Ln) x'", "show \"?f x' = (f \\<circ> Im \\<circ> Ln) x'\"\n        if \"x' \\<in> sphere 0 1\" \"dist x' z < 1\" for x'"], ["proof (prove)\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "have \"x' \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x' \\<noteq> 0", "using that"], ["proof (prove)\nusing this:\n  x' \\<in> sphere 0 1\n  dist x' z < 1\n\ngoal (1 subgoal):\n 1. x' \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  x' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "then"], ["proof (chain)\npicking this:\n  x' \\<noteq> 0", "have \"Im (Ln x') \\<in> {-pi..pi}\""], ["proof (prove)\nusing this:\n  x' \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Im (Ln x') \\<in> {- pi..pi}", "using Im_Ln_le_pi [of x'] mpi_less_Im_Ln [of x']"], ["proof (prove)\nusing this:\n  x' \\<noteq> 0\n  x' \\<noteq> 0 \\<Longrightarrow> Im (Ln x') \\<le> pi\n  x' \\<noteq> 0 \\<Longrightarrow> - pi < Im (Ln x')\n\ngoal (1 subgoal):\n 1. Im (Ln x') \\<in> {- pi..pi}", "by simp"], ["proof (state)\nthis:\n  Im (Ln x') \\<in> {- pi..pi}\n\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "then"], ["proof (chain)\npicking this:\n  Im (Ln x') \\<in> {- pi..pi}", "show ?thesis"], ["proof (prove)\nusing this:\n  Im (Ln x') \\<in> {- pi..pi}\n\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "using gf"], ["proof (prove)\nusing this:\n  Im (Ln x') \\<in> {- pi..pi}\n  ?x \\<in> {- pi..pi} \\<Longrightarrow> g ?x = f ?x\n\ngoal (1 subgoal):\n 1. (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'", "by simp"], ["proof (state)\nthis:\n  (g \\<circ> Im \\<circ> Ln) x' = (f \\<circ> Im \\<circ> Ln) x'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?x' \\<in> sphere 0 1; dist ?x' z < 1\\<rbrakk>\n  \\<Longrightarrow> (g \\<circ> Im \\<circ> Ln) ?x' =\n                    (f \\<circ> Im \\<circ> Ln) ?x'\n\ngoal (2 subgoals):\n 1. 0 < 1\n 2. z \\<in> sphere 0 1", "qed (use that in auto)"], ["proof (state)\nthis:\n  continuous (at z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  cmod ?z = 1 \\<Longrightarrow>\n  continuous (at ?z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  cmod ?z = 1 \\<Longrightarrow>\n  continuous (at ?z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "have \"continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)\""], ["proof (prove)\nusing this:\n  cmod ?z = 1 \\<Longrightarrow>\n  continuous (at ?z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "using continuous_on_eq_continuous_within mem_sphere_0"], ["proof (prove)\nusing this:\n  cmod ?z = 1 \\<Longrightarrow>\n  continuous (at ?z within sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n  continuous_on ?s ?f = (\\<forall>x\\<in>?s. continuous (at x within ?s) ?f)\n  (?x \\<in> sphere (0::?'a) ?e) = (norm ?x = ?e)\n\ngoal (1 subgoal):\n 1. continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "by blast"], ["proof (state)\nthis:\n  continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)", "obtain g where \"g \\<in> cx_poly\" and g: \"\\<And>x. x \\<in> sphere 0 1 \\<Longrightarrow> \\<bar>(f \\<circ> Im \\<circ> Ln) x - g x\\<bar> < e\""], ["proof (prove)\nusing this:\n  continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> cx_poly;\n         \\<And>x.\n            x \\<in> sphere 0 1 \\<Longrightarrow>\n            \\<bar>(f \\<circ> Im \\<circ> Ln) x - g x\\<bar> < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using CR.Stone_Weierstrass_basic [of \"f \\<circ> Im \\<circ> Ln\"] \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln)\n  \\<lbrakk>continuous_on (sphere 0 1) (f \\<circ> Im \\<circ> Ln);\n   0 < ?e\\<rbrakk>\n  \\<Longrightarrow> \\<exists>g\\<in>cx_poly.\n                       \\<forall>x\\<in>sphere 0 1.\n                          \\<bar>(f \\<circ> Im \\<circ> Ln) x - g x\\<bar> < ?e\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>g \\<in> cx_poly;\n         \\<And>x.\n            x \\<in> sphere 0 1 \\<Longrightarrow>\n            \\<bar>(f \\<circ> Im \\<circ> Ln) x - g x\\<bar> < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by meson"], ["proof (state)\nthis:\n  g \\<in> cx_poly\n  ?x \\<in> sphere 0 1 \\<Longrightarrow>\n  \\<bar>(f \\<circ> Im \\<circ> Ln) ?x - g ?x\\<bar> < e\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "define trigpoly where\n    \"trigpoly \\<equiv> \\<lambda>f. \\<exists>n a b. f = (\\<lambda>x. (\\<Sum>k\\<le>n. a k * sin(real k * x) +  b k * cos(real k * x)))\""], ["proof (state)\nthis:\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_const: \"trigpoly(\\<lambda>x. c)\" for c"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c)", "unfolding trigpoly_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>n a b.\n       (\\<lambda>x. c) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))", "by (rule_tac x=0 in exI) auto"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. ?c)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_add: \"trigpoly(\\<lambda>x. f x + g x)\" if \"trigpoly f\" \"trigpoly g\" for f g"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "obtain n1 a1 b1 where feq: \"f = (\\<lambda>x. \\<Sum>k\\<le>n1. a1 k * sin (real k * x) + b1 k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a1 b1 n1.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n1.\n               a1 k * sin (real k * x) +\n               b1 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>trigpoly f\\<close> trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly f\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a1 b1 n1.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n1.\n               a1 k * sin (real k * x) +\n               b1 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  f =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n1. a1 k * sin (real k * x) + b1 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "obtain n2 a2 b2 where geq: \"g = (\\<lambda>x. \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a2 b2 n2.\n        g =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n2.\n               a2 k * sin (real k * x) +\n               b2 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>trigpoly g\\<close> trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly g\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a2 b2 n2.\n        g =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n2.\n               a2 k * sin (real k * x) +\n               b2 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  g =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "let ?a = \"\\<lambda>n. (if n \\<le> n1 then a1 n else 0) + (if n \\<le> n2 then a2 n else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "let ?b = \"\\<lambda>n. (if n \\<le> n1 then b1 n else 0) + (if n \\<le> n2 then b2 n else 0)\""], ["proof (state)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "have eq: \"{k. k \\<le> max a b \\<and> k \\<le> a} = {..a}\" \"{k. k \\<le> max a b \\<and> k \\<le> b} = {..b}\" for a b::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. {k. k \\<le> max a b \\<and> k \\<le> a} = {..a} &&&\n    {k. k \\<le> max a b \\<and> k \\<le> b} = {..b}", "by auto"], ["proof (state)\nthis:\n  {k. k \\<le> max ?a ?b \\<and> k \\<le> ?a} = {..?a}\n  {k. k \\<le> max ?a ?b \\<and> k \\<le> ?b} = {..?b}\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "have \"(\\<lambda>x. f x + g x) = (\\<lambda>x. \\<Sum>k \\<le> max n1 n2. ?a k * sin (real k * x) + ?b k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x + g x) =\n    (\\<lambda>x.\n        \\<Sum>k\\<le>max n1 n2.\n           ((if k \\<le> n1 then a1 k else 0) +\n            (if k \\<le> n2 then a2 k else 0)) *\n           sin (real k * x) +\n           ((if k \\<le> n1 then b1 k else 0) +\n            (if k \\<le> n2 then b2 k else 0)) *\n           cos (real k * x))", "by (simp add: feq geq algebra_simps eq sum.distrib if_distrib [of \"\\<lambda>u. _ * u\"] cong: if_cong flip: sum.inter_filter)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x + g x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>max n1 n2.\n         ((if k \\<le> n1 then a1 k else 0) +\n          (if k \\<le> n2 then a2 k else 0)) *\n         sin (real k * x) +\n         ((if k \\<le> n1 then b1 k else 0) +\n          (if k \\<le> n2 then b2 k else 0)) *\n         cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x + g x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>max n1 n2.\n         ((if k \\<le> n1 then a1 k else 0) +\n          (if k \\<le> n2 then a2 k else 0)) *\n         sin (real k * x) +\n         ((if k \\<le> n1 then b1 k else 0) +\n          (if k \\<le> n2 then b2 k else 0)) *\n         cos (real k * x))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x + g x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>max n1 n2.\n         ((if k \\<le> n1 then a1 k else 0) +\n          (if k \\<le> n2 then a2 k else 0)) *\n         sin (real k * x) +\n         ((if k \\<le> n1 then b1 k else 0) +\n          (if k \\<le> n2 then b2 k else 0)) *\n         cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x + g x)", "unfolding trigpoly_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x + g x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>max n1 n2.\n         ((if k \\<le> n1 then a1 k else 0) +\n          (if k \\<le> n2 then a2 k else 0)) *\n         sin (real k * x) +\n         ((if k \\<le> n1 then b1 k else 0) +\n          (if k \\<le> n2 then b2 k else 0)) *\n         cos (real k * x))\n\ngoal (1 subgoal):\n 1. \\<exists>n a b.\n       (\\<lambda>x. f x + g x) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))", "by meson"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. f x + g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>trigpoly ?f; trigpoly ?g\\<rbrakk>\n  \\<Longrightarrow> trigpoly (\\<lambda>x. ?f x + ?g x)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_sum: \"trigpoly(\\<lambda>x. \\<Sum>i\\<in>S. f i x)\" if \"finite S\" \"\\<And>i. i \\<in> S \\<Longrightarrow> trigpoly(f i)\" for f and S :: \"nat set\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. \\<Sum>i\\<in>S. f i x)", "using that"], ["proof (prove)\nusing this:\n  finite S\n  ?i \\<in> S \\<Longrightarrow> trigpoly (f ?i)\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. \\<Sum>i\\<in>S. f i x)", "by induction (auto simp: tp_const tp_add)"], ["proof (state)\nthis:\n  \\<lbrakk>finite ?S;\n   \\<And>i. i \\<in> ?S \\<Longrightarrow> trigpoly (?f i)\\<rbrakk>\n  \\<Longrightarrow> trigpoly (\\<lambda>x. \\<Sum>i\\<in>?S. ?f i x)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_cmul: \"trigpoly(\\<lambda>x. c * f x)\" if \"trigpoly f\" for f c"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c * f x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c * f x)", "obtain n a b where feq: \"f = (\\<lambda>x. \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n.\n               a k * sin (real k * x) +\n               b k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>trigpoly f\\<close> trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly f\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n.\n               a k * sin (real k * x) +\n               b k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  f =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c * f x)", "have \"(\\<lambda>x. c * f x) = (\\<lambda>x. \\<Sum>k \\<le> n. (c * a k) * sin (real k * x) + (c * b k) * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. c * f x) =\n    (\\<lambda>x.\n        \\<Sum>k\\<le>n.\n           c * a k * sin (real k * x) + c * b k * cos (real k * x))", "by (simp add: feq algebra_simps sum_distrib_left)"], ["proof (state)\nthis:\n  (\\<lambda>x. c * f x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n.\n         c * a k * sin (real k * x) + c * b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c * f x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. c * f x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n.\n         c * a k * sin (real k * x) + c * b k * cos (real k * x))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. c * f x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n.\n         c * a k * sin (real k * x) + c * b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. c * f x)", "unfolding trigpoly_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. c * f x) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n.\n         c * a k * sin (real k * x) + c * b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. \\<exists>n a b.\n       (\\<lambda>x. c * f x) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))", "by meson"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. c * f x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trigpoly ?f \\<Longrightarrow> trigpoly (\\<lambda>x. ?c * ?f x)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_cdiv: \"trigpoly(\\<lambda>x. f x / c)\" if \"trigpoly f\" for f c"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x / c)", "using tp_cmul [OF \\<open>trigpoly f\\<close>, of \"inverse c\"]"], ["proof (prove)\nusing this:\n  trigpoly (\\<lambda>x. inverse c * f x)\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x / c)", "by (simp add: divide_inverse_commute)"], ["proof (state)\nthis:\n  trigpoly ?f \\<Longrightarrow> trigpoly (\\<lambda>x. ?f x / ?c)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_diff: \"trigpoly(\\<lambda>x. f x - g x)\" if \"trigpoly f\" \"trigpoly g\" for f g"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x - g x)", "using tp_add [OF \\<open>trigpoly f\\<close> tp_cmul [OF \\<open>trigpoly g\\<close>, of \"-1\"]]"], ["proof (prove)\nusing this:\n  trigpoly (\\<lambda>x. f x + - 1 * g x)\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x - g x)", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>trigpoly ?f; trigpoly ?g\\<rbrakk>\n  \\<Longrightarrow> trigpoly (\\<lambda>x. ?f x - ?g x)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_sin: \"trigpoly(\\<lambda>x. sin (n * x))\" if \"n \\<in> \\<nat>\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. sin (n * x))", "unfolding trigpoly_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>na a b.\n       (\\<lambda>x. sin (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>na. a k * sin (real k * x) + b k * cos (real k * x))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. sin (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>?n. a k * sin (real k * x) + b k * cos (real k * x))", "obtain k where \"n = real k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k. n = real k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using Nats_cases \\<open>n \\<in> \\<nat>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> \\<nat>;\n   \\<And>n. ?x = of_nat n \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  n \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>k. n = real k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  n = real k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. sin (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>?n. a k * sin (real k * x) + b k * cos (real k * x))", "then"], ["proof (chain)\npicking this:\n  n = real k", "show \"\\<exists>a b. (\\<lambda>x. sin (n * x)) = (\\<lambda>x. \\<Sum>i \\<le> nat\\<lfloor>n\\<rfloor>. a i * sin (real i * x) + b i * cos (real i * x))\""], ["proof (prove)\nusing this:\n  n = real k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. sin (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n              a i * sin (real i * x) + b i * cos (real i * x))", "apply (rule_tac x=\"\\<lambda>i. if i = k then 1 else 0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. n = real k \\<Longrightarrow>\n    \\<exists>b.\n       (\\<lambda>x. sin (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n              (if i = k then 1 else 0) * sin (real i * x) +\n              b i * cos (real i * x))", "apply (rule_tac x=\"\\<lambda>i. 0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. n = real k \\<Longrightarrow>\n    (\\<lambda>x. sin (n * x)) =\n    (\\<lambda>x.\n        \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n           (if i = k then 1 else 0) * sin (real i * x) +\n           0 * cos (real i * x))", "apply (simp add: if_distrib [of \"\\<lambda>u. u * _\"] cong: if_cong)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>a b.\n     (\\<lambda>x. sin (n * x)) =\n     (\\<lambda>x.\n         \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n            a i * sin (real i * x) + b i * cos (real i * x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n \\<in> \\<nat> \\<Longrightarrow> trigpoly (\\<lambda>x. sin (?n * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_cos: \"trigpoly(\\<lambda>x. cos (n * x))\" if \"n \\<in> \\<nat>\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. cos (n * x))", "unfolding trigpoly_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>na a b.\n       (\\<lambda>x. cos (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>na. a k * sin (real k * x) + b k * cos (real k * x))", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. cos (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>?n. a k * sin (real k * x) + b k * cos (real k * x))", "obtain k where \"n = real k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>k. n = real k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using Nats_cases \\<open>n \\<in> \\<nat>\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> \\<nat>;\n   \\<And>n. ?x = of_nat n \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  n \\<in> \\<nat>\n\ngoal (1 subgoal):\n 1. (\\<And>k. n = real k \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  n = real k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. cos (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>k\\<le>?n. a k * sin (real k * x) + b k * cos (real k * x))", "then"], ["proof (chain)\npicking this:\n  n = real k", "show \"\\<exists>a b. (\\<lambda>x. cos (n * x)) = (\\<lambda>x. \\<Sum>i \\<le> nat\\<lfloor>n\\<rfloor>. a i * sin (real i * x) + b i * cos (real i * x))\""], ["proof (prove)\nusing this:\n  n = real k\n\ngoal (1 subgoal):\n 1. \\<exists>a b.\n       (\\<lambda>x. cos (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n              a i * sin (real i * x) + b i * cos (real i * x))", "apply (rule_tac x=\"\\<lambda>i. 0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. n = real k \\<Longrightarrow>\n    \\<exists>b.\n       (\\<lambda>x. cos (n * x)) =\n       (\\<lambda>x.\n           \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n              0 * sin (real i * x) + b i * cos (real i * x))", "apply (rule_tac x=\"\\<lambda>i. if i = k then 1 else 0\" in exI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. n = real k \\<Longrightarrow>\n    (\\<lambda>x. cos (n * x)) =\n    (\\<lambda>x.\n        \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n           0 * sin (real i * x) +\n           (if i = k then 1 else 0) * cos (real i * x))", "apply (simp add: if_distrib [of \"\\<lambda>u. u * _\"] cong: if_cong)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<exists>a b.\n     (\\<lambda>x. cos (n * x)) =\n     (\\<lambda>x.\n         \\<Sum>i\\<le>nat \\<lfloor>n\\<rfloor>.\n            a i * sin (real i * x) + b i * cos (real i * x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?n \\<in> \\<nat> \\<Longrightarrow> trigpoly (\\<lambda>x. cos (?n * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_sincos: \"trigpoly(\\<lambda>x. sin(i * x) * sin(j * x)) \\<and> trigpoly(\\<lambda>x. sin(i * x) * cos(j * x)) \\<and>\n                   trigpoly(\\<lambda>x. cos(i * x) * sin(j * x)) \\<and> trigpoly(\\<lambda>x. cos(i * x) * cos(j * x))\" (is \"?P i j\")\n    for i j::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. sin (real i * x) * sin (real j * x)) \\<and>\n    trigpoly (\\<lambda>x. sin (real i * x) * cos (real j * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real i * x) * sin (real j * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real i * x) * cos (real j * x))", "proof (rule linorder_wlog [of _ j i])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a b.\n       a \\<le> b \\<Longrightarrow>\n       trigpoly (\\<lambda>x. sin (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. sin (real b * x) * cos (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * cos (real a * x))\n 2. \\<And>a b.\n       trigpoly (\\<lambda>x. sin (real a * x) * sin (real b * x)) \\<and>\n       trigpoly (\\<lambda>x. sin (real a * x) * cos (real b * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real a * x) * sin (real b * x)) \\<and>\n       trigpoly\n        (\\<lambda>x. cos (real a * x) * cos (real b * x)) \\<Longrightarrow>\n       trigpoly (\\<lambda>x. sin (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. sin (real b * x) * cos (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * cos (real a * x))", "show \"?P j i\" if \"i \\<le> j\" for j i"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. sin (real j * x) * sin (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. sin (real j * x) * cos (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real j * x) * sin (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real j * x) * cos (real i * x))", "using that"], ["proof (prove)\nusing this:\n  i \\<le> j\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. sin (real j * x) * sin (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. sin (real j * x) * cos (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real j * x) * sin (real i * x)) \\<and>\n    trigpoly (\\<lambda>x. cos (real j * x) * cos (real i * x))", "by (simp add: sin_times_sin cos_times_cos sin_times_cos cos_times_sin diff_divide_distrib \n                    tp_add tp_diff tp_cdiv tp_cos tp_sin flip: left_diff_distrib distrib_right)"], ["proof (state)\nthis:\n  ?i \\<le> ?j \\<Longrightarrow>\n  trigpoly (\\<lambda>x. sin (real ?j * x) * sin (real ?i * x)) \\<and>\n  trigpoly (\\<lambda>x. sin (real ?j * x) * cos (real ?i * x)) \\<and>\n  trigpoly (\\<lambda>x. cos (real ?j * x) * sin (real ?i * x)) \\<and>\n  trigpoly (\\<lambda>x. cos (real ?j * x) * cos (real ?i * x))\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       trigpoly (\\<lambda>x. sin (real a * x) * sin (real b * x)) \\<and>\n       trigpoly (\\<lambda>x. sin (real a * x) * cos (real b * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real a * x) * sin (real b * x)) \\<and>\n       trigpoly\n        (\\<lambda>x. cos (real a * x) * cos (real b * x)) \\<Longrightarrow>\n       trigpoly (\\<lambda>x. sin (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. sin (real b * x) * cos (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * sin (real a * x)) \\<and>\n       trigpoly (\\<lambda>x. cos (real b * x) * cos (real a * x))", "qed (simp add: mult_ac)"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. sin (real ?i * x) * sin (real ?j * x)) \\<and>\n  trigpoly (\\<lambda>x. sin (real ?i * x) * cos (real ?j * x)) \\<and>\n  trigpoly (\\<lambda>x. cos (real ?i * x) * sin (real ?j * x)) \\<and>\n  trigpoly (\\<lambda>x. cos (real ?i * x) * cos (real ?j * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have tp_mult: \"trigpoly(\\<lambda>x. f x * g x)\" if \"trigpoly f\" \"trigpoly g\" for f g"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x * g x)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x * g x)", "obtain n1 a1 b1 where feq: \"f = (\\<lambda>x. \\<Sum>k\\<le>n1. a1 k * sin (real k * x) + b1 k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a1 b1 n1.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n1.\n               a1 k * sin (real k * x) +\n               b1 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>trigpoly f\\<close> trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly f\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a1 b1 n1.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n1.\n               a1 k * sin (real k * x) +\n               b1 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  f =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n1. a1 k * sin (real k * x) + b1 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x * g x)", "obtain n2 a2 b2 where geq: \"g = (\\<lambda>x. \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a2 b2 n2.\n        g =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n2.\n               a2 k * sin (real k * x) +\n               b2 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>trigpoly g\\<close> trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly g\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a2 b2 n2.\n        g =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n2.\n               a2 k * sin (real k * x) +\n               b2 k * cos (real k * x)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  g =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x * g x)", "then"], ["proof (chain)\npicking this:\n  g =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))", "show ?thesis"], ["proof (prove)\nusing this:\n  g =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f x * g x)", "unfolding feq geq"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x)) =\n  (\\<lambda>x.\n      \\<Sum>k\\<le>n2. a2 k * sin (real k * x) + b2 k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. trigpoly\n     (\\<lambda>x.\n         (\\<Sum>k\\<le>n1.\n             a1 k * sin (real k * x) + b1 k * cos (real k * x)) *\n         (\\<Sum>k\\<le>n2.\n             a2 k * sin (real k * x) + b2 k * cos (real k * x)))", "by (simp add: algebra_simps sum_product tp_sum tp_add tp_cmul tp_sincos del: mult.commute)"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. f x * g x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>trigpoly ?f; trigpoly ?g\\<rbrakk>\n  \\<Longrightarrow> trigpoly (\\<lambda>x. ?f x * ?g x)\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "have *: \"trigpoly(\\<lambda>x.  f(exp(\\<i> * of_real x)))\" if \"f \\<in> cx_poly\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f (iexp x))", "using that"], ["proof (prove)\nusing this:\n  f \\<in> cx_poly\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. f (iexp x))", "proof induction"], ["proof (state)\ngoal (5 subgoals):\n 1. trigpoly (\\<lambda>x. Re (iexp x))\n 2. trigpoly (\\<lambda>x. Im (iexp x))\n 3. \\<And>c. trigpoly (\\<lambda>x. c)\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 5. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "case Re"], ["proof (state)\nthis:\n  \n\ngoal (5 subgoals):\n 1. trigpoly (\\<lambda>x. Re (iexp x))\n 2. trigpoly (\\<lambda>x. Im (iexp x))\n 3. \\<And>c. trigpoly (\\<lambda>x. c)\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 5. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. Re (iexp x))", "using tp_cos [of 1]"], ["proof (prove)\nusing this:\n  1 \\<in> \\<nat> \\<Longrightarrow> trigpoly (\\<lambda>x. cos (1 * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. Re (iexp x))", "by (auto simp: Re_exp)"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. Re (iexp x))\n\ngoal (4 subgoals):\n 1. trigpoly (\\<lambda>x. Im (iexp x))\n 2. \\<And>c. trigpoly (\\<lambda>x. c)\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. trigpoly (\\<lambda>x. Im (iexp x))\n 2. \\<And>c. trigpoly (\\<lambda>x. c)\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "case Im"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. trigpoly (\\<lambda>x. Im (iexp x))\n 2. \\<And>c. trigpoly (\\<lambda>x. c)\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 4. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. Im (iexp x))", "using tp_sin [of 1]"], ["proof (prove)\nusing this:\n  1 \\<in> \\<nat> \\<Longrightarrow> trigpoly (\\<lambda>x. sin (1 * x))\n\ngoal (1 subgoal):\n 1. trigpoly (\\<lambda>x. Im (iexp x))", "by (auto simp: Im_exp)"], ["proof (state)\nthis:\n  trigpoly (\\<lambda>x. Im (iexp x))\n\ngoal (3 subgoals):\n 1. \\<And>c. trigpoly (\\<lambda>x. c)\n 2. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) + g (iexp x))\n 3. \\<And>f g.\n       \\<lbrakk>f \\<in> cx_poly; trigpoly (\\<lambda>x. f (iexp x));\n        g \\<in> cx_poly; trigpoly (\\<lambda>x. g (iexp x))\\<rbrakk>\n       \\<Longrightarrow> trigpoly (\\<lambda>x. f (iexp x) * g (iexp x))", "qed (auto simp: tp_const tp_add tp_mult)"], ["proof (state)\nthis:\n  ?f \\<in> cx_poly \\<Longrightarrow> trigpoly (\\<lambda>x. ?f (iexp x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "obtain n a b where eq: \"(g (iexp x)) = (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            g (iexp x) =\n            (\\<Sum>k\\<le>n.\n                a k * sin (real k * x) +\n                b k * cos (real k * x))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using * [OF \\<open>g \\<in> cx_poly\\<close>] trigpoly_def"], ["proof (prove)\nusing this:\n  trigpoly (\\<lambda>x. g (iexp x))\n  trigpoly \\<equiv>\n  \\<lambda>f.\n     \\<exists>n a b.\n        f =\n        (\\<lambda>x.\n            \\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            g (iexp x) =\n            (\\<Sum>k\\<le>n.\n                a k * sin (real k * x) +\n                b k * cos (real k * x))) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by meson"], ["proof (state)\nthis:\n  g (iexp ?x) =\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x) + b k * cos (real k * ?x))\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>f x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       \\<bar>f x -\n             (\\<Sum>k\\<le>?n.\n                 ?a k * sin (real k * x) + ?b k * cos (real k * x))\\<bar>\n       < e", "show \"\\<bar>f \\<theta> - (\\<Sum>k\\<le>n. a k * sin (real k * \\<theta>) + b k * cos (real k * \\<theta>))\\<bar> < e\"\n      if \"\\<theta> \\<in> {-pi..pi}\" for \\<theta>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f \\<theta> -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * \\<theta>) +\n              b k * cos (real k * \\<theta>))\\<bar>\n    < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>f \\<theta> -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * \\<theta>) +\n              b k * cos (real k * \\<theta>))\\<bar>\n    < e", "have \"f \\<theta> - g (iexp \\<theta>) = (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "proof (cases \"\\<theta> = -pi\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<theta> = - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n 2. \\<theta> \\<noteq> - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "case True"], ["proof (state)\nthis:\n  \\<theta> = - pi\n\ngoal (2 subgoals):\n 1. \\<theta> = - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n 2. \\<theta> \\<noteq> - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "then"], ["proof (chain)\npicking this:\n  \\<theta> = - pi", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<theta> = - pi\n\ngoal (1 subgoal):\n 1. f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "by (simp add: exp_minus fpi)"], ["proof (state)\nthis:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<theta> \\<noteq> - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<theta> \\<noteq> - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "case False"], ["proof (state)\nthis:\n  \\<theta> \\<noteq> - pi\n\ngoal (1 subgoal):\n 1. \\<theta> \\<noteq> - pi \\<Longrightarrow>\n    f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "then"], ["proof (chain)\npicking this:\n  \\<theta> \\<noteq> - pi", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<theta> \\<noteq> - pi\n\ngoal (1 subgoal):\n 1. f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "using that"], ["proof (prove)\nusing this:\n  \\<theta> \\<noteq> - pi\n  \\<theta> \\<in> {- pi..pi}\n\ngoal (1 subgoal):\n 1. f \\<theta> - g (iexp \\<theta>) =\n    (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "by auto"], ["proof (state)\nthis:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<bar>f \\<theta> -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * \\<theta>) +\n              b k * cos (real k * \\<theta>))\\<bar>\n    < e", "then"], ["proof (chain)\npicking this:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)", "show ?thesis"], ["proof (prove)\nusing this:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n\ngoal (1 subgoal):\n 1. \\<bar>f \\<theta> -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * \\<theta>) +\n              b k * cos (real k * \\<theta>))\\<bar>\n    < e", "using g [of \"exp(\\<i> * of_real \\<theta>)\"]"], ["proof (prove)\nusing this:\n  f \\<theta> - g (iexp \\<theta>) =\n  (f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\n  iexp \\<theta> \\<in> sphere 0 1 \\<Longrightarrow>\n  \\<bar>(f \\<circ> Im \\<circ> Ln) (iexp \\<theta>) - g (iexp \\<theta>)\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. \\<bar>f \\<theta> -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * \\<theta>) +\n              b k * cos (real k * \\<theta>))\\<bar>\n    < e", "by (simp flip: eq)"], ["proof (state)\nthis:\n  \\<bar>f \\<theta> -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * \\<theta>) +\n            b k * cos (real k * \\<theta>))\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?\\<theta> \\<in> {- pi..pi} \\<Longrightarrow>\n  \\<bar>f ?\\<theta> -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * ?\\<theta>) +\n            b k * cos (real k * ?\\<theta>))\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>A bit of extra hacking round so that the ends of a function are OK\\<close>"], ["", "lemma integral_tweak_ends:\n  fixes a b :: real\n  assumes \"a < b\" \"e > 0\"\n  obtains f where \"continuous_on {a..b} f\" \"f a = d\" \"f b = 0\" \"l2norm {a..b} f < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have cont: \"continuous_on {a..b}\n          (\\<lambda>x. if x \\<le> a+1 / real(Suc n)\n               then ((Suc n) * d) * ((a+1 / (Suc n)) - x) else 0)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "proof (cases \"a+1/(Suc n) \\<le> b\")"], ["proof (state)\ngoal (2 subgoals):\n 1. a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n 2. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "case True"], ["proof (state)\nthis:\n  a + 1 / real (Suc n) \\<le> b\n\ngoal (2 subgoals):\n 1. a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n 2. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "have *: \"1 / (1 + real n) > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < 1 / (1 + real n)", "by auto"], ["proof (state)\nthis:\n  0 < 1 / (1 + real n)\n\ngoal (2 subgoals):\n 1. a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n 2. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "have abeq: \"{a..b} = {a..a+1/(Suc n)} \\<union> {a+1/(Suc n)..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a..b} = {a..a + 1 / real (Suc n)} \\<union> {a + 1 / real (Suc n)..b}", "using \\<open>a < b\\<close> True"], ["proof (prove)\nusing this:\n  a < b\n  a + 1 / real (Suc n) \\<le> b\n\ngoal (1 subgoal):\n 1. {a..b} = {a..a + 1 / real (Suc n)} \\<union> {a + 1 / real (Suc n)..b}", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>a < b; a + 1 / (1 + real n) \\<le> x; x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> x", "using \"*\""], ["proof (prove)\nusing this:\n  0 < 1 / (1 + real n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>a < b; a + 1 / (1 + real n) \\<le> x; x \\<le> b\\<rbrakk>\n       \\<Longrightarrow> a \\<le> x", "by linarith"], ["proof (state)\nthis:\n  {a..b} = {a..a + 1 / real (Suc n)} \\<union> {a + 1 / real (Suc n)..b}\n\ngoal (2 subgoals):\n 1. a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n 2. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "unfolding abeq"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on\n     ({a..a + 1 / real (Suc n)} \\<union> {a + 1 / real (Suc n)..b})\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "proof (rule continuous_on_cases)"], ["proof (state)\ngoal (5 subgoals):\n 1. closed {a..a + 1 / real (Suc n)}\n 2. closed {a + 1 / real (Suc n)..b}\n 3. continuous_on {a..a + 1 / real (Suc n)}\n     (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))\n 4. continuous_on {a + 1 / real (Suc n)..b} (\\<lambda>x. 0)\n 5. \\<forall>x.\n       x \\<in> {a..a + 1 / real (Suc n)} \\<and>\n       \\<not> x \\<le> a + 1 / real (Suc n) \\<or>\n       x \\<in> {a + 1 / real (Suc n)..b} \\<and>\n       x \\<le> a + 1 / real (Suc n) \\<longrightarrow>\n       real (Suc n) * d * (a + 1 / real (Suc n) - x) = 0", "show \"continuous_on {a..a+1 / real (Suc n)} (\\<lambda>x. real (Suc n) * d * (a+1 / real (Suc n) - x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..a + 1 / real (Suc n)}\n     (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))", "by (intro continuous_intros)"], ["proof (state)\nthis:\n  continuous_on {a..a + 1 / real (Suc n)}\n   (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))\n\ngoal (4 subgoals):\n 1. closed {a..a + 1 / real (Suc n)}\n 2. closed {a + 1 / real (Suc n)..b}\n 3. continuous_on {a + 1 / real (Suc n)..b} (\\<lambda>x. 0)\n 4. \\<forall>x.\n       x \\<in> {a..a + 1 / real (Suc n)} \\<and>\n       \\<not> x \\<le> a + 1 / real (Suc n) \\<or>\n       x \\<in> {a + 1 / real (Suc n)..b} \\<and>\n       x \\<le> a + 1 / real (Suc n) \\<longrightarrow>\n       real (Suc n) * d * (a + 1 / real (Suc n) - x) = 0", "qed auto"], ["proof (state)\nthis:\n  continuous_on {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc n)\n       then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n\ngoal (1 subgoal):\n 1. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "case False"], ["proof (state)\nthis:\n  \\<not> a + 1 / real (Suc n) \\<le> b\n\ngoal (1 subgoal):\n 1. \\<not> a + 1 / real (Suc n) \\<le> b \\<Longrightarrow>\n    continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc n)\n         then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "proof (rule continuous_on_eq [where f = \"\\<lambda>x. ((Suc n) * d) * ((a+1/(Suc n)) - x)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. continuous_on {a..b}\n     (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))\n 2. \\<And>x.\n       x \\<in> {a..b} \\<Longrightarrow>\n       real (Suc n) * d * (a + 1 / real (Suc n) - x) =\n       (if x \\<le> a + 1 / real (Suc n)\n        then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "show \" continuous_on {a..b} (\\<lambda>x. (Suc n) * d * (a+1 / real (Suc n) - x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b}\n     (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))", "by (intro continuous_intros)"], ["proof (state)\nthis:\n  continuous_on {a..b}\n   (\\<lambda>x. real (Suc n) * d * (a + 1 / real (Suc n) - x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {a..b} \\<Longrightarrow>\n       real (Suc n) * d * (a + 1 / real (Suc n) - x) =\n       (if x \\<le> a + 1 / real (Suc n)\n        then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)", "qed (use False in auto)"], ["proof (state)\nthis:\n  continuous_on {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc n)\n       then real (Suc n) * d * (a + 1 / real (Suc n) - x) else 0)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  continuous_on {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc ?n)\n       then real (Suc ?n) * d * (a + 1 / real (Suc ?n) - x) else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?f = \"\\<lambda>k x. (if x \\<le> a+1 / (Suc k) then (Suc k) * d * (a+1 / (Suc k) - x) else 0)\\<^sup>2\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?g = \"\\<lambda>x. if x = a then d\\<^sup>2 else 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have bmg: \"?g \\<in> borel_measurable (lebesgue_on {a..b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n    \\<in> borel_measurable (lebesgue_on {a..b})", "apply (rule measurable_restrict_space1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n    \\<in> borel_measurable lebesgue", "using borel_measurable_if_I [of _ \"{a}\", OF borel_measurable_const]"], ["proof (prove)\nusing this:\n  {a} \\<in> sets lebesgue \\<Longrightarrow>\n  (\\<lambda>x. if x \\<in> {a} then ?f2 else (0::?'b))\n  \\<in> borel_measurable lebesgue\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n    \\<in> borel_measurable lebesgue", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n  \\<in> borel_measurable (lebesgue_on {a..b})\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have bmf: \"?f k \\<in> borel_measurable (lebesgue_on {a..b})\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {a..b})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {a..b})", "have bm: \"(\\<lambda>x. (Suc k) * d * (a+1 / real (Suc k) - x))\n              \\<in> borel_measurable (lebesgue_on {..a+1 / (Suc k)})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. real (Suc k) * d * (a + 1 / real (Suc k) - x))\n    \\<in> borel_measurable (lebesgue_on {..a + 1 / real (Suc k)})", "by (intro measurable) (auto simp: measurable_completion measurable_restrict_space1)"], ["proof (state)\nthis:\n  (\\<lambda>x. real (Suc k) * d * (a + 1 / real (Suc k) - x))\n  \\<in> borel_measurable (lebesgue_on {..a + 1 / real (Suc k)})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {a..b})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {a..b})", "apply (intro borel_measurable_power measurable_restrict_space1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<le> a + 1 / real (Suc k)\n        then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\n    \\<in> borel_measurable lebesgue", "using borel_measurable_if_I [of _ \"{.. a+1 / (Suc k)}\", OF bm]"], ["proof (prove)\nusing this:\n  {..a + 1 / real (Suc k)} \\<in> sets lebesgue \\<Longrightarrow>\n  (\\<lambda>x.\n      if x \\<in> {..a + 1 / real (Suc k)}\n      then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\n  \\<in> borel_measurable lebesgue\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<le> a + 1 / real (Suc k)\n        then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\n    \\<in> borel_measurable lebesgue", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n  \\<in> borel_measurable (lebesgue_on {a..b})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if x \\<le> a + 1 / real (Suc ?k)\n       then real (Suc ?k) * d * (a + 1 / real (Suc ?k) - x) else 0)\\<^sup>2)\n  \\<in> borel_measurable (lebesgue_on {a..b})\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have int_d2: \"integrable (lebesgue_on {a..b}) (\\<lambda>x. d\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {a..b}) (\\<lambda>x. d\\<^sup>2)", "by (intro continuous_imp_integrable_real continuous_intros)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {a..b}) (\\<lambda>x. d\\<^sup>2)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"(\\<lambda>k. ?f k x) \\<longlonglongrightarrow> ?g x\"\n    if x: \"x \\<in> {a..b}\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "proof (cases \"x = a\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n 2. x \\<noteq> a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> a\n\ngoal (2 subgoals):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n 2. x \\<noteq> a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "then"], ["proof (chain)\npicking this:\n  x \\<noteq> a", "have \"x > a\""], ["proof (prove)\nusing this:\n  x \\<noteq> a\n\ngoal (1 subgoal):\n 1. a < x", "using x"], ["proof (prove)\nusing this:\n  x \\<noteq> a\n  x \\<in> {a..b}\n\ngoal (1 subgoal):\n 1. a < x", "by auto"], ["proof (state)\nthis:\n  a < x\n\ngoal (2 subgoals):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n 2. x \\<noteq> a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "with x"], ["proof (chain)\npicking this:\n  x \\<in> {a..b}\n  a < x", "obtain N where \"N > 0\" and N: \"1 / real N < x-a\""], ["proof (prove)\nusing this:\n  x \\<in> {a..b}\n  a < x\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using real_arch_invD [of \"x-a\"]"], ["proof (prove)\nusing this:\n  x \\<in> {a..b}\n  a < x\n  0 < x - a \\<Longrightarrow>\n  \\<exists>n.\n     n \\<noteq> 0 \\<and>\n     0 < inverse (real n) \\<and> inverse (real n) < x - a\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (force simp: inverse_eq_divide)"], ["proof (state)\nthis:\n  0 < N\n  1 / real N < x - a\n\ngoal (2 subgoals):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n 2. x \\<noteq> a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "then"], ["proof (chain)\npicking this:\n  0 < N\n  1 / real N < x - a", "have \"x > a+1 / (1 + real k)\"\n      if \"k \\<ge> N\" for k"], ["proof (prove)\nusing this:\n  0 < N\n  1 / real N < x - a\n\ngoal (1 subgoal):\n 1. a + 1 / (1 + real k) < x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n    \\<Longrightarrow> a + 1 / (1 + real k) < x", "have \"a+1 / (1 + real k) < a+1 / real N\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a + 1 / (1 + real k) < a + 1 / real N", "using that \\<open>0 < N\\<close>"], ["proof (prove)\nusing this:\n  N \\<le> k\n  0 < N\n\ngoal (1 subgoal):\n 1. a + 1 / (1 + real k) < a + 1 / real N", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  a + 1 / (1 + real k) < a + 1 / real N\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n    \\<Longrightarrow> a + 1 / (1 + real k) < x", "also"], ["proof (state)\nthis:\n  a + 1 / (1 + real k) < a + 1 / real N\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n    \\<Longrightarrow> a + 1 / (1 + real k) < x", "have \"\\<dots> < x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a + 1 / real N < x", "using N"], ["proof (prove)\nusing this:\n  1 / real N < x - a\n\ngoal (1 subgoal):\n 1. a + 1 / real N < x", "by linarith"], ["proof (state)\nthis:\n  a + 1 / real N < x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < N; 1 / real N < x - a\\<rbrakk>\n    \\<Longrightarrow> a + 1 / (1 + real k) < x", "finally"], ["proof (chain)\npicking this:\n  a + 1 / (1 + real k) < x", "show ?thesis"], ["proof (prove)\nusing this:\n  a + 1 / (1 + real k) < x\n\ngoal (1 subgoal):\n 1. a + 1 / (1 + real k) < x", "."], ["proof (state)\nthis:\n  a + 1 / (1 + real k) < x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?k \\<Longrightarrow> a + 1 / (1 + real ?k) < x\n\ngoal (2 subgoals):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n 2. x \\<noteq> a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "then"], ["proof (chain)\npicking this:\n  N \\<le> ?k \\<Longrightarrow> a + 1 / (1 + real ?k) < x", "show ?thesis"], ["proof (prove)\nusing this:\n  N \\<le> ?k \\<Longrightarrow> a + 1 / (1 + real ?k) < x\n\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "apply (intro tendsto_eventually eventually_sequentiallyI [where c=N])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>\\<And>k.\n                   N \\<le> k \\<Longrightarrow> a + 1 / (1 + real k) < x;\n        N \\<le> xa\\<rbrakk>\n       \\<Longrightarrow> (if x \\<le> a + 1 / real (Suc xa)\n                          then real (Suc xa) * d *\n                               (a + 1 / real (Suc xa) - x)\n                          else 0)\\<^sup>2 =\n                         (if x = a then d\\<^sup>2 else 0)", "by (fastforce simp: False)"], ["proof (state)\nthis:\n  (\\<lambda>k.\n      (if x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. x = a \\<Longrightarrow>\n    (\\<lambda>k.\n        (if x \\<le> a + 1 / real (Suc k)\n         then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> (if x = a then d\\<^sup>2 else 0)", "qed auto"], ["proof (state)\nthis:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  (\\<lambda>k.\n      (if ?x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - ?x) else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> (if ?x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  (\\<lambda>k.\n      (if ?x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - ?x) else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> (if ?x = a then d\\<^sup>2 else 0)", "have tends: \"AE x in (lebesgue_on {a..b}). (\\<lambda>k. ?f k x) \\<longlonglongrightarrow> ?g x\""], ["proof (prove)\nusing this:\n  ?x \\<in> {a..b} \\<Longrightarrow>\n  (\\<lambda>k.\n      (if ?x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - ?x) else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> (if ?x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {a..b}. (\\<lambda>k.\n                         (if x \\<le> a + 1 / real (Suc k)\n                          then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n                          else 0)\\<^sup>2)\n                     \\<longlonglongrightarrow> (if x = a then d\\<^sup>2\n          else 0)", "by force"], ["proof (state)\nthis:\n  AE x in lebesgue_on\n           {a..b}. (\\<lambda>k.\n                       (if x \\<le> a + 1 / real (Suc k)\n                        then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n                        else 0)\\<^sup>2)\n                   \\<longlonglongrightarrow> (if x = a then d\\<^sup>2\n        else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have le_d2: \"\\<And>k. AE x in (lebesgue_on {a..b}). norm (?f k x) \\<le> d\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       AE x in lebesgue_on\n                {a..b}. norm\n                         ((if x \\<le> a + 1 / real (Suc k)\n                           then real (Suc k) * d *\n                                (a + 1 / real (Suc k) - x)\n                           else 0)\\<^sup>2)\n                        \\<le> d\\<^sup>2", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>k x.\n       x \\<in> space (lebesgue_on {a..b}) \\<Longrightarrow>\n       norm\n        ((if x \\<le> a + 1 / real (Suc k)\n          then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n          else 0)\\<^sup>2)\n       \\<le> d\\<^sup>2", "show \"norm ((if x \\<le> a+1 / real (Suc k) then real (Suc k) * d * (a+1 / real (Suc k) - x) else 0)\\<^sup>2) \\<le> d\\<^sup>2\"\n      if \"x \\<in> space (lebesgue_on {a..b})\" for k x"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm\n     ((if x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<le> d\\<^sup>2", "using that"], ["proof (prove)\nusing this:\n  x \\<in> space (lebesgue_on {a..b})\n\ngoal (1 subgoal):\n 1. norm\n     ((if x \\<le> a + 1 / real (Suc k)\n       then real (Suc k) * d * (a + 1 / real (Suc k) - x) else 0)\\<^sup>2)\n    \\<le> d\\<^sup>2", "apply (simp add: abs_mult divide_simps flip: abs_le_square_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<le> x \\<and> x \\<le> b \\<Longrightarrow>\n    x * (1 + real k) \\<le> a * (1 + real k) + 1 \\<longrightarrow>\n    \\<bar>d\\<bar> * (a * (1 + real k) + 1 - x * (1 + real k))\n    \\<le> \\<bar>d\\<bar>", "apply (auto simp: abs_if zero_less_mult_iff mult_left_le)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ?x \\<in> space (lebesgue_on {a..b}) \\<Longrightarrow>\n  norm\n   ((if ?x \\<le> a + 1 / real (Suc ?k)\n     then real (Suc ?k) * d * (a + 1 / real (Suc ?k) - ?x) else 0)\\<^sup>2)\n  \\<le> d\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  AE x in lebesgue_on\n           {a..b}. norm\n                    ((if x \\<le> a + 1 / real (Suc ?k)\n                      then real (Suc ?k) * d * (a + 1 / real (Suc ?k) - x)\n                      else 0)\\<^sup>2)\n                   \\<le> d\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have integ: \"integrable (lebesgue_on {a..b}) ?g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {a..b})\n     (\\<lambda>x. if x = a then d\\<^sup>2 else 0)", "using integrable_dominated_convergence [OF bmg bmf int_d2 tends le_d2]"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {a..b})\n   (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {a..b})\n     (\\<lambda>x. if x = a then d\\<^sup>2 else 0)", "by auto"], ["proof (state)\nthis:\n  integrable (lebesgue_on {a..b})\n   (\\<lambda>x. if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have int: \"(\\<lambda>k. integral\\<^sup>L (lebesgue_on {a..b}) (?f k)) \\<longlonglongrightarrow> integral\\<^sup>L (lebesgue_on {a..b}) ?g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        LINT x|lebesgue_on {a..b}.\n           (if x \\<le> a + 1 / real (Suc k)\n            then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n            else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                                 (if x = a then d\\<^sup>2 else 0)", "using integral_dominated_convergence [OF bmg bmf int_d2 tends le_d2]"], ["proof (prove)\nusing this:\n  (\\<lambda>i.\n      LINT x|lebesgue_on {a..b}.\n         (if x \\<le> a + 1 / real (Suc i)\n          then real (Suc i) * d * (a + 1 / real (Suc i) - x)\n          else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                               (if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        LINT x|lebesgue_on {a..b}.\n           (if x \\<le> a + 1 / real (Suc k)\n            then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n            else 0)\\<^sup>2)\n    \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                                 (if x = a then d\\<^sup>2 else 0)", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>k.\n      LINT x|lebesgue_on {a..b}.\n         (if x \\<le> a + 1 / real (Suc k)\n          then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n          else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                               (if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>k.\n      LINT x|lebesgue_on {a..b}.\n         (if x \\<le> a + 1 / real (Suc k)\n          then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n          else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                               (if x = a then d\\<^sup>2 else 0)", "obtain N where N: \"\\<And>k. k \\<ge> N \\<Longrightarrow> \\<bar>integral\\<^sup>L (lebesgue_on {a..b}) (?f k) - integral\\<^sup>L (lebesgue_on {a..b}) ?g\\<bar> < e\\<^sup>2\""], ["proof (prove)\nusing this:\n  (\\<lambda>k.\n      LINT x|lebesgue_on {a..b}.\n         (if x \\<le> a + 1 / real (Suc k)\n          then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n          else 0)\\<^sup>2)\n  \\<longlonglongrightarrow> LINT x|lebesgue_on {a..b}.\n                               (if x = a then d\\<^sup>2 else 0)\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>k.\n            N \\<le> k \\<Longrightarrow>\n            \\<bar>(LINT x|lebesgue_on {a..b}.\n                      (if x \\<le> a + 1 / real (Suc k)\n                       then real (Suc k) * d * (a + 1 / real (Suc k) - x)\n                       else 0)\\<^sup>2) -\n                  (LINT x|lebesgue_on {a..b}.\n                      (if x = a then d\\<^sup>2 else 0))\\<bar>\n            < e\\<^sup>2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "apply (simp add: lim_sequentially dist_real_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>N.\n                (\\<And>k.\n                    N \\<le> k \\<Longrightarrow>\n                    \\<bar>(LINT x|lebesgue_on {a..b}.\n                              (if x \\<le> a + 1 / (1 + real k)\n                               then real (Suc k) * d *\n                                    (a + 1 / real (Suc k) - x)\n                               else 0)\\<^sup>2) -\n                          (LINT x|lebesgue_on {a..b}.\n                              (if x = a then d\\<^sup>2 else 0))\\<bar>\n                    < e\\<^sup>2) \\<Longrightarrow>\n                thesis;\n     \\<forall>r>0.\n        \\<exists>no.\n           \\<forall>n\\<ge>no.\n              \\<bar>(LINT x|lebesgue_on {a..b}.\n                        (if x \\<le> a + 1 / (1 + real n)\n                         then real (Suc n) * d * (a + 1 / real (Suc n) - x)\n                         else 0)\\<^sup>2) -\n                    (LINT x|lebesgue_on {a..b}.\n                        (if x = a then d\\<^sup>2 else 0))\\<bar>\n              < r\\<rbrakk>\n    \\<Longrightarrow> thesis", "apply (drule_tac x=\"e^2\" in spec)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>N.\n                (\\<And>k.\n                    N \\<le> k \\<Longrightarrow>\n                    \\<bar>(LINT x|lebesgue_on {a..b}.\n                              (if x \\<le> a + 1 / (1 + real k)\n                               then real (Suc k) * d *\n                                    (a + 1 / real (Suc k) - x)\n                               else 0)\\<^sup>2) -\n                          (LINT x|lebesgue_on {a..b}.\n                              (if x = a then d\\<^sup>2 else 0))\\<bar>\n                    < e\\<^sup>2) \\<Longrightarrow>\n                thesis;\n     0 < e\\<^sup>2 \\<longrightarrow>\n     (\\<exists>no.\n         \\<forall>n\\<ge>no.\n            \\<bar>(LINT x|lebesgue_on {a..b}.\n                      (if x \\<le> a + 1 / (1 + real n)\n                       then real (Suc n) * d * (a + 1 / real (Suc n) - x)\n                       else 0)\\<^sup>2) -\n                  (LINT x|lebesgue_on {a..b}.\n                      (if x = a then d\\<^sup>2 else 0))\\<bar>\n            < e\\<^sup>2)\\<rbrakk>\n    \\<Longrightarrow> thesis", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>N.\n                (\\<And>k.\n                    N \\<le> k \\<Longrightarrow>\n                    \\<bar>(LINT x|lebesgue_on {a..b}.\n                              (if x \\<le> a + 1 / (1 + real k)\n                               then real (Suc k) * d *\n                                    (a + 1 / real (Suc k) - x)\n                               else 0)\\<^sup>2) -\n                          (LINT x|lebesgue_on {a..b}.\n                              (if x = a then d\\<^sup>2 else 0))\\<bar>\n                    < e\\<^sup>2) \\<Longrightarrow>\n                thesis;\n     0 < e\\<^sup>2 \\<longrightarrow>\n     (\\<exists>no.\n         \\<forall>n\\<ge>no.\n            \\<bar>(LINT x|lebesgue_on {a..b}.\n                      (if x \\<le> a + 1 / (1 + real n)\n                       then real (Suc n) * d * (a + 1 / real (Suc n) - x)\n                       else 0)\\<^sup>2) -\n                  (LINT x|lebesgue_on {a..b}.\n                      (if x = a then d\\<^sup>2 else 0))\\<bar>\n            < e\\<^sup>2)\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  N \\<le> ?k \\<Longrightarrow>\n  \\<bar>(LINT x|lebesgue_on {a..b}.\n            (if x \\<le> a + 1 / real (Suc ?k)\n             then real (Suc ?k) * d * (a + 1 / real (Suc ?k) - x)\n             else 0)\\<^sup>2) -\n        (LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0))\\<bar>\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain M where \"M > 0\" and M: \"1 / real M < b-a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>M.\n        \\<lbrakk>0 < M; 1 / real M < b - a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using real_arch_invD [of \"b-a\"]"], ["proof (prove)\nusing this:\n  0 < b - a \\<Longrightarrow>\n  \\<exists>n.\n     n \\<noteq> 0 \\<and>\n     0 < inverse (real n) \\<and> inverse (real n) < b - a\n\ngoal (1 subgoal):\n 1. (\\<And>M.\n        \\<lbrakk>0 < M; 1 / real M < b - a\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis \\<open>a < b\\<close> diff_gt_0_iff_gt inverse_eq_divide neq0_conv)"], ["proof (state)\nthis:\n  0 < M\n  1 / real M < b - a\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have *: \"\\<bar>integral\\<^sup>L (lebesgue_on {a..b}) (?f (max M N)) - integral\\<^sup>L (lebesgue_on {a..b}) ?g\\<bar> < e\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|lebesgue_on {a..b}.\n              (if x \\<le> a + 1 / real (Suc (max M N))\n               then real (Suc (max M N)) * d *\n                    (a + 1 / real (Suc (max M N)) - x)\n               else 0)\\<^sup>2) -\n          (LINT x|lebesgue_on {a..b}.\n              (if x = a then d\\<^sup>2 else 0))\\<bar>\n    < e\\<^sup>2", "using N"], ["proof (prove)\nusing this:\n  N \\<le> ?k \\<Longrightarrow>\n  \\<bar>(LINT x|lebesgue_on {a..b}.\n            (if x \\<le> a + 1 / real (Suc ?k)\n             then real (Suc ?k) * d * (a + 1 / real (Suc ?k) - x)\n             else 0)\\<^sup>2) -\n        (LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0))\\<bar>\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|lebesgue_on {a..b}.\n              (if x \\<le> a + 1 / real (Suc (max M N))\n               then real (Suc (max M N)) * d *\n                    (a + 1 / real (Suc (max M N)) - x)\n               else 0)\\<^sup>2) -\n          (LINT x|lebesgue_on {a..b}.\n              (if x = a then d\\<^sup>2 else 0))\\<bar>\n    < e\\<^sup>2", "by force"], ["proof (state)\nthis:\n  \\<bar>(LINT x|lebesgue_on {a..b}.\n            (if x \\<le> a + 1 / real (Suc (max M N))\n             then real (Suc (max M N)) * d *\n                  (a + 1 / real (Suc (max M N)) - x)\n             else 0)\\<^sup>2) -\n        (LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0))\\<bar>\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?\\<phi> = \"\\<lambda>x. if x \\<le> a+1/(Suc (max M N)) then ((Suc (max M N)) * d) * ((a+1/(Suc (max M N))) - x) else 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>continuous_on {a..b} f; f a = d; f b = 0;\n         l2norm {a..b} f < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. continuous_on {a..b} ?f\n 2. ?f a = d\n 3. ?f b = 0\n 4. l2norm {a..b} ?f < e", "show \"continuous_on {a..b} ?\\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)", "by (rule cont)"], ["proof (state)\nthis:\n  continuous_on {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n\ngoal (3 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. (if b \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - b)\n     else 0) =\n    0\n 3. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "have \"1 / (1 + real (max M N)) \\<le> 1 / (real M)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / (1 + real (max M N)) \\<le> 1 / real M", "by (simp add: \\<open>0 < M\\<close> frac_le)"], ["proof (state)\nthis:\n  1 / (1 + real (max M N)) \\<le> 1 / real M\n\ngoal (3 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. (if b \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - b)\n     else 0) =\n    0\n 3. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "then"], ["proof (chain)\npicking this:\n  1 / (1 + real (max M N)) \\<le> 1 / real M", "have \"\\<not> (b \\<le> a+1 / (1 + real (max M N)))\""], ["proof (prove)\nusing this:\n  1 / (1 + real (max M N)) \\<le> 1 / real M\n\ngoal (1 subgoal):\n 1. \\<not> b \\<le> a + 1 / (1 + real (max M N))", "using M \\<open>a < b\\<close> \\<open>M > 0\\<close> max.cobounded1 [of M N]"], ["proof (prove)\nusing this:\n  1 / (1 + real (max M N)) \\<le> 1 / real M\n  1 / real M < b - a\n  a < b\n  0 < M\n  M \\<le> max M N\n\ngoal (1 subgoal):\n 1. \\<not> b \\<le> a + 1 / (1 + real (max M N))", "by linarith"], ["proof (state)\nthis:\n  \\<not> b \\<le> a + 1 / (1 + real (max M N))\n\ngoal (3 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. (if b \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - b)\n     else 0) =\n    0\n 3. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "then"], ["proof (chain)\npicking this:\n  \\<not> b \\<le> a + 1 / (1 + real (max M N))", "show \"?\\<phi> b = 0\""], ["proof (prove)\nusing this:\n  \\<not> b \\<le> a + 1 / (1 + real (max M N))\n\ngoal (1 subgoal):\n 1. (if b \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - b)\n     else 0) =\n    0", "by simp"], ["proof (state)\nthis:\n  (if b \\<le> a + 1 / real (Suc (max M N))\n   then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - b)\n   else 0) =\n  0\n\ngoal (2 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "have null_a: \"{a} \\<in> null_sets (lebesgue_on {a..b})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a} \\<in> null_sets (lebesgue_on {a..b})", "using \\<open>a < b\\<close>"], ["proof (prove)\nusing this:\n  a < b\n\ngoal (1 subgoal):\n 1. {a} \\<in> null_sets (lebesgue_on {a..b})", "by (simp add: null_sets_restrict_space)"], ["proof (state)\nthis:\n  {a} \\<in> null_sets (lebesgue_on {a..b})\n\ngoal (2 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "have \"LINT x|lebesgue_on {a..b}. ?g x = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) = 0", "by (force intro: integral_eq_zero_AE AE_I' [OF null_a])"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) = 0\n\ngoal (2 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "then"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) = 0", "have \"l2norm {a..b} ?\\<phi> < sqrt (e^2)\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) = 0\n\ngoal (1 subgoal):\n 1. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < sqrt (e\\<^sup>2)", "unfolding l2norm_def l2product_def power2_eq_square [symmetric]"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) = 0\n\ngoal (1 subgoal):\n 1. sqrt\n     (LINT x|lebesgue_on {a..b}.\n         (if x \\<le> a + 1 / real (Suc (max M N))\n          then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n          else 0)\\<^sup>2)\n    < sqrt (e\\<^sup>2)", "apply (intro real_sqrt_less_mono)"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) =\n    0 \\<Longrightarrow>\n    LINT x|lebesgue_on {a..b}.\n       (if x \\<le> a + 1 / real (Suc (max M N))\n        then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n        else 0)\\<^sup>2\n    < e\\<^sup>2", "using \"*\""], ["proof (prove)\nusing this:\n  \\<bar>(LINT x|lebesgue_on {a..b}.\n            (if x \\<le> a + 1 / real (Suc (max M N))\n             then real (Suc (max M N)) * d *\n                  (a + 1 / real (Suc (max M N)) - x)\n             else 0)\\<^sup>2) -\n        (LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0))\\<bar>\n  < e\\<^sup>2\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {a..b}. (if x = a then d\\<^sup>2 else 0) =\n    0 \\<Longrightarrow>\n    LINT x|lebesgue_on {a..b}.\n       (if x \\<le> a + 1 / real (Suc (max M N))\n        then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n        else 0)\\<^sup>2\n    < e\\<^sup>2", "by linarith"], ["proof (state)\nthis:\n  l2norm {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n  < sqrt (e\\<^sup>2)\n\ngoal (2 subgoals):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d\n 2. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "then"], ["proof (chain)\npicking this:\n  l2norm {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n  < sqrt (e\\<^sup>2)", "show \"l2norm {a..b} ?\\<phi> < e\""], ["proof (prove)\nusing this:\n  l2norm {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n  < sqrt (e\\<^sup>2)\n\ngoal (1 subgoal):\n 1. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  l2norm {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n  < sqrt (e\\<^sup>2)\n  0 < e\n\ngoal (1 subgoal):\n 1. l2norm {a..b}\n     (\\<lambda>x.\n         if x \\<le> a + 1 / real (Suc (max M N))\n         then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n         else 0)\n    < e", "by auto"], ["proof (state)\nthis:\n  l2norm {a..b}\n   (\\<lambda>x.\n       if x \\<le> a + 1 / real (Suc (max M N))\n       then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - x)\n       else 0)\n  < e\n\ngoal (1 subgoal):\n 1. (if a \\<le> a + 1 / real (Suc (max M N))\n     then real (Suc (max M N)) * d * (a + 1 / real (Suc (max M N)) - a)\n     else 0) =\n    d", "qed auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma square_integrable_approximate_continuous_ends:\n  assumes f: \"f square_integrable {a..b}\" and \"a < b\" \"0 < e\"\n  obtains g where \"continuous_on {a..b} g\" \"g b = g a\" \"g square_integrable {a..b}\" \"l2norm {a..b} (\\<lambda>x. f x - g x) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {a..b} g; g b = g a;\n         g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {a..b} g; g b = g a;\n         g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain g where contg: \"continuous_on UNIV g\" and \"g square_integrable {a..b}\"\n    and lg: \"l2norm {a..b} (\\<lambda>x. f x - g x) < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g; g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using f \\<open>e > 0\\<close> square_integrable_approximate_continuous"], ["proof (prove)\nusing this:\n  f square_integrable {a..b}\n  0 < e\n  \\<lbrakk>?f square_integrable ?S; ?S \\<in> lmeasurable; 0 < ?e;\n   \\<And>g.\n      \\<lbrakk>continuous_on UNIV g; g square_integrable ?S;\n       l2norm ?S (\\<lambda>x. ?f x - g x) < ?e\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g; g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (full_types) box_real(2) half_gt_zero_iff lmeasurable_cbox)"], ["proof (state)\nthis:\n  continuous_on UNIV g\n  g square_integrable {a..b}\n  l2norm {a..b} (\\<lambda>x. f x - g x) < e / 2\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {a..b} g; g b = g a;\n         g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "obtain h where conth: \"continuous_on {a..b} h\" and \"h a = g b - g a\" \"h b = 0\"\n    and lh: \"l2norm {a..b} h < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>continuous_on {a..b} h; h a = g b - g a; h b = 0;\n         l2norm {a..b} h < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using integral_tweak_ends \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a < ?b; 0 < ?e;\n   \\<And>f.\n      \\<lbrakk>continuous_on {?a..?b} f; f ?a = ?d; f ?b = 0;\n       l2norm {?a..?b} f < ?e\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>continuous_on {a..b} h; h a = g b - g a; h b = 0;\n         l2norm {a..b} h < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis \\<open>a < b\\<close> zero_less_divide_iff zero_less_numeral)"], ["proof (state)\nthis:\n  continuous_on {a..b} h\n  h a = g b - g a\n  h b = 0\n  l2norm {a..b} h < e / 2\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {a..b} g; g b = g a;\n         g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"h square_integrable {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h square_integrable {a..b}", "using \\<open>continuous_on {a..b} h\\<close> continuous_imp_square_integrable"], ["proof (prove)\nusing this:\n  continuous_on {a..b} h\n  continuous_on {?a..?b} ?f \\<Longrightarrow> ?f square_integrable {?a..?b}\n\ngoal (1 subgoal):\n 1. h square_integrable {a..b}", "by blast"], ["proof (state)\nthis:\n  h square_integrable {a..b}\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {a..b} g; g b = g a;\n         g square_integrable {a..b};\n         l2norm {a..b} (\\<lambda>x. f x - g x) < e\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. continuous_on {a..b} ?g\n 2. ?g b = ?g a\n 3. ?g square_integrable {a..b}\n 4. l2norm {a..b} (\\<lambda>x. f x - ?g x) < e", "show \"continuous_on {a..b} (\\<lambda>x. g x + h x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {a..b} (\\<lambda>x. g x + h x)", "by (blast intro: continuous_on_subset [OF contg] conth continuous_intros)"], ["proof (state)\nthis:\n  continuous_on {a..b} (\\<lambda>x. g x + h x)\n\ngoal (3 subgoals):\n 1. g b + h b = g a + h a\n 2. (\\<lambda>x. g x + h x) square_integrable {a..b}\n 3. l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e", "then"], ["proof (chain)\npicking this:\n  continuous_on {a..b} (\\<lambda>x. g x + h x)", "show \"(\\<lambda>x. g x + h x) square_integrable {a..b}\""], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. g x + h x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. g x + h x) square_integrable {a..b}", "using continuous_imp_square_integrable"], ["proof (prove)\nusing this:\n  continuous_on {a..b} (\\<lambda>x. g x + h x)\n  continuous_on {?a..?b} ?f \\<Longrightarrow> ?f square_integrable {?a..?b}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. g x + h x) square_integrable {a..b}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. g x + h x) square_integrable {a..b}\n\ngoal (2 subgoals):\n 1. g b + h b = g a + h a\n 2. l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e", "show \"g b + h b = g a + h a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g b + h b = g a + h a", "by (simp add: \\<open>h a = g b - g a\\<close> \\<open>h b = 0\\<close>)"], ["proof (state)\nthis:\n  g b + h b = g a + h a\n\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e", "have \"l2norm {a..b} (\\<lambda>x. (f x - g x) + - h x) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - g x + - h x) < e", "proof (rule le_less_trans [OF l2norm_triangle [of \"\\<lambda>x. f x - g x\" \"{a..b}\" \"\\<lambda>x. - (h x)\"]])"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. f x - g x) square_integrable {a..b}\n 2. (\\<lambda>x. - h x) square_integrable {a..b}\n 3. l2norm {a..b} (\\<lambda>x. f x - g x) +\n    l2norm {a..b} (\\<lambda>x. - h x)\n    < e", "show \"(\\<lambda>x. f x - g x) square_integrable {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) square_integrable {a..b}", "using \\<open>g square_integrable {a..b}\\<close> f square_integrable_diff"], ["proof (prove)\nusing this:\n  g square_integrable {a..b}\n  f square_integrable {a..b}\n  \\<lbrakk>?f square_integrable ?S; ?g square_integrable ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x - ?g x) square_integrable ?S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) square_integrable {a..b}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - g x) square_integrable {a..b}\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. - h x) square_integrable {a..b}\n 2. l2norm {a..b} (\\<lambda>x. f x - g x) +\n    l2norm {a..b} (\\<lambda>x. - h x)\n    < e", "show \"(\\<lambda>x. - h x) square_integrable {a..b}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. - h x) square_integrable {a..b}", "by (simp add: \\<open>h square_integrable {a..b}\\<close>)"], ["proof (state)\nthis:\n  (\\<lambda>x. - h x) square_integrable {a..b}\n\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - g x) +\n    l2norm {a..b} (\\<lambda>x. - h x)\n    < e", "show \"l2norm {a..b} (\\<lambda>x. f x - g x) + l2norm {a..b} (\\<lambda>x. - h x) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - g x) +\n    l2norm {a..b} (\\<lambda>x. - h x)\n    < e", "using \\<open>h square_integrable {a..b}\\<close> l2norm_neg lg lh"], ["proof (prove)\nusing this:\n  h square_integrable {a..b}\n  ?f square_integrable ?S \\<Longrightarrow>\n  l2norm ?S (\\<lambda>x. - ?f x) = l2norm ?S ?f\n  l2norm {a..b} (\\<lambda>x. f x - g x) < e / 2\n  l2norm {a..b} h < e / 2\n\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - g x) +\n    l2norm {a..b} (\\<lambda>x. - h x)\n    < e", "by auto"], ["proof (state)\nthis:\n  l2norm {a..b} (\\<lambda>x. f x - g x) + l2norm {a..b} (\\<lambda>x. - h x)\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l2norm {a..b} (\\<lambda>x. f x - g x + - h x) < e\n\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e", "then"], ["proof (chain)\npicking this:\n  l2norm {a..b} (\\<lambda>x. f x - g x + - h x) < e", "show \"l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e\""], ["proof (prove)\nusing this:\n  l2norm {a..b} (\\<lambda>x. f x - g x + - h x) < e\n\ngoal (1 subgoal):\n 1. l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  l2norm {a..b} (\\<lambda>x. f x - (g x + h x)) < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Hence the main approximation result\\<close>"], ["", "lemma Weierstrass_l2_trig_polynomial:\n  assumes f: \"f square_integrable {-pi..pi}\" and \"0 < e\"\n  obtains n a b where\n   \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * sin(real k * x) + b k * cos(real k * x))) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "let ?\\<phi> = \"\\<lambda>n a b x. \\<Sum>k\\<le>n. a k * sin(real k * x) + b k * cos(real k * x)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "obtain g where contg: \"continuous_on {-pi..pi} g\" and geq: \"g(-pi) = g pi\"\n           and g: \"g square_integrable {-pi..pi}\" and norm_fg: \"l2norm {-pi..pi} (\\<lambda>x. f x - g x) < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {- pi..pi} g; g (- pi) = g pi;\n         g square_integrable {- pi..pi};\n         l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on {- pi..pi} g; g (- pi) = g pi;\n         g square_integrable {- pi..pi};\n         l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto intro: square_integrable_approximate_continuous_ends [OF f, of \"e/2\"])"], ["proof (state)\nthis:\n  continuous_on {- pi..pi} g\n  g (- pi) = g pi\n  g square_integrable {- pi..pi}\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  continuous_on {- pi..pi} g\n  g (- pi) = g pi\n  g square_integrable {- pi..pi}\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2", "obtain n a b where g_phi_less: \"\\<And>x. x \\<in> {-pi..pi} \\<Longrightarrow> \\<bar>g x - (?\\<phi> n a b x)\\<bar> < e/6\""], ["proof (prove)\nusing this:\n  continuous_on {- pi..pi} g\n  g (- pi) = g pi\n  g square_integrable {- pi..pi}\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>g x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e / 6) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>e > 0\\<close> Weierstrass_trig_polynomial [OF contg geq, of \"e/6\"]"], ["proof (prove)\nusing this:\n  continuous_on {- pi..pi} g\n  g (- pi) = g pi\n  g square_integrable {- pi..pi}\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\n  0 < e\n  \\<lbrakk>0 < e / 6;\n   \\<And>n a b.\n      (\\<And>x.\n          x \\<in> {- pi..pi} \\<Longrightarrow>\n          \\<bar>g x -\n                (\\<Sum>k\\<le>n.\n                    a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n          < e / 6) \\<Longrightarrow>\n      ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        (\\<And>x.\n            x \\<in> {- pi..pi} \\<Longrightarrow>\n            \\<bar>g x -\n                  (\\<Sum>k\\<le>n.\n                      a k * sin (real k * x) + b k * cos (real k * x))\\<bar>\n            < e / 6) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson zero_less_divide_iff zero_less_numeral)"], ["proof (state)\nthis:\n  ?x \\<in> {- pi..pi} \\<Longrightarrow>\n  \\<bar>g ?x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * ?x) + b k * cos (real k * ?x))\\<bar>\n  < e / 6\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "have si: \"(?\\<phi> n u v) square_integrable {-pi..pi}\" for n::nat and u v"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        \\<Sum>k\\<le>n.\n           u k * sin (real k * x) +\n           v k * cos (real k * x)) square_integrable\n    {- pi..pi}", "proof (intro square_integrable_sum continuous_imp_square_integrable)"], ["proof (state)\ngoal (3 subgoals):\n 1. finite {..n}\n 2. \\<And>k.\n       k \\<in> {..n} \\<Longrightarrow>\n       continuous_on {- pi..pi}\n        (\\<lambda>x. u k * sin (real k * x) + v k * cos (real k * x))\n 3. {- pi..pi} \\<in> sets lebesgue", "show \"continuous_on {-pi..pi} (\\<lambda>x. u k * sin (real k * x) + v k * cos (real k * x))\"\n        if \"k \\<in> {..n}\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi}\n     (\\<lambda>x. u k * sin (real k * x) + v k * cos (real k * x))", "using that"], ["proof (prove)\nusing this:\n  k \\<in> {..n}\n\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi}\n     (\\<lambda>x. u k * sin (real k * x) + v k * cos (real k * x))", "by (intro continuous_intros)"], ["proof (state)\nthis:\n  ?k \\<in> {..n} \\<Longrightarrow>\n  continuous_on {- pi..pi}\n   (\\<lambda>x. u ?k * sin (real ?k * x) + v ?k * cos (real ?k * x))\n\ngoal (2 subgoals):\n 1. finite {..n}\n 2. {- pi..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      \\<Sum>k\\<le>?n.\n         ?u k * sin (real k * x) +\n         ?v k * cos (real k * x)) square_integrable\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "have \"l2norm {-pi..pi} (\\<lambda>x. f x - (?\\<phi> n a b x)) =  l2norm {-pi..pi} (\\<lambda>x. (f x - g x) + (g x - (?\\<phi> n a b x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))) =\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x - g x +\n         (g x -\n          (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))", "by simp"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))) =\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x - g x +\n       (g x -\n        (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "also"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))) =\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x - g x +\n       (g x -\n        (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "have \"\\<dots> \\<le> l2norm {-pi..pi} (\\<lambda>x. f x - g x) + l2norm {-pi..pi} (\\<lambda>x. g x - (?\\<phi> n a b x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x - g x +\n         (g x -\n          (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))\n    \\<le> l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n          l2norm {- pi..pi}\n           (\\<lambda>x.\n               g x -\n               (\\<Sum>k\\<le>n.\n                   a k * sin (real k * x) + b k * cos (real k * x)))", "proof (rule l2norm_triangle)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. f x - g x) square_integrable {- pi..pi}\n 2. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "show \"(\\<lambda>x. f x - g x) square_integrable {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) square_integrable {- pi..pi}", "using f g square_integrable_diff"], ["proof (prove)\nusing this:\n  f square_integrable {- pi..pi}\n  g square_integrable {- pi..pi}\n  \\<lbrakk>?f square_integrable ?S; ?g square_integrable ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x - ?g x) square_integrable ?S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) square_integrable {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - g x) square_integrable {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "show \"(\\<lambda>x. g x - (?\\<phi> n a b x)) square_integrable {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "using g si square_integrable_diff"], ["proof (prove)\nusing this:\n  g square_integrable {- pi..pi}\n  (\\<lambda>x.\n      \\<Sum>k\\<le>?n.\n         ?u k * sin (real k * x) +\n         ?v k * cos (real k * x)) square_integrable\n  {- pi..pi}\n  \\<lbrakk>?f square_integrable ?S; ?g square_integrable ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x - ?g x) square_integrable ?S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) +\n          b k * cos (real k * x))) square_integrable\n  {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x - g x +\n       (g x -\n        (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))\n  \\<le> l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             g x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "also"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x - g x +\n       (g x -\n        (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x))))\n  \\<le> l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             g x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "have \"\\<dots> < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "have g_phi: \"(\\<lambda>x. g x - (?\\<phi> n a b x)) square_integrable {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "using g si square_integrable_diff"], ["proof (prove)\nusing this:\n  g square_integrable {- pi..pi}\n  (\\<lambda>x.\n      \\<Sum>k\\<le>?n.\n         ?u k * sin (real k * x) +\n         ?v k * cos (real k * x)) square_integrable\n  {- pi..pi}\n  \\<lbrakk>?f square_integrable ?S; ?g square_integrable ?S\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f x - ?g x) square_integrable ?S\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) +\n            b k * cos (real k * x))) square_integrable\n    {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) +\n          b k * cos (real k * x))) square_integrable\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "have \"l2norm {-pi..pi} (\\<lambda>x. g x - (?\\<phi> n a b x)) \\<le> e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    \\<le> e / 2", "unfolding l2norm_def l2product_def power2_eq_square [symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt\n     (LINT x|lebesgue_on {- pi..pi}.\n         (g x -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2)\n    \\<le> e / 2", "proof (rule real_le_lsqrt)"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 \\<le> LINT x|lebesgue_on {- pi..pi}.\n               (g x -\n                (\\<Sum>k\\<le>n.\n                    a k * sin (real k * x) +\n                    b k * cos (real k * x)))\\<^sup>2\n 2. 0 \\<le> e / 2\n 3. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "show \"0 \\<le> LINT x|lebesgue_on {-pi..pi}. (g x - (?\\<phi> n a b x))\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> LINT x|lebesgue_on {- pi..pi}.\n               (g x -\n                (\\<Sum>k\\<le>n.\n                    a k * sin (real k * x) +\n                    b k * cos (real k * x)))\\<^sup>2", "by (rule integral_nonneg_AE) auto"], ["proof (state)\nthis:\n  0 \\<le> LINT x|lebesgue_on {- pi..pi}.\n             (g x -\n              (\\<Sum>k\\<le>n.\n                  a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n\ngoal (2 subgoals):\n 1. 0 \\<le> e / 2\n 2. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "have \"LINT x|lebesgue_on {-pi..pi}. (g x - (?\\<phi> n a b x))\\<^sup>2\n            \\<le> LINT x|lebesgue_on {-pi..pi}. (e / 6) ^ 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2", "proof (rule integral_mono)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x.\n         (g x -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2)\n 2. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. (e / 6)\\<^sup>2)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n       \\<le> (e / 6)\\<^sup>2", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. (g x - (?\\<phi> n a b x))\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x.\n         (g x -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2)", "using g_phi square_integrable_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) +\n          b k * cos (real k * x))) square_integrable\n  {- pi..pi}\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x.\n         (g x -\n          (\\<Sum>k\\<le>n.\n              a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2)", "by auto"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2)\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. (e / 6)\\<^sup>2)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n       \\<le> (e / 6)\\<^sup>2", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. (e / 6)\\<^sup>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. (e / 6)\\<^sup>2)", "by (intro continuous_intros continuous_imp_integrable_real)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. (e / 6)\\<^sup>2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n       \\<le> (e / 6)\\<^sup>2", "show \"(g x - (?\\<phi> n a b x))\\<^sup>2 \\<le> (e / 6)\\<^sup>2\" if \"x \\<in> space (lebesgue_on {-pi..pi})\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (g x -\n     (\\<Sum>k\\<le>n.\n         a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 6)\\<^sup>2", "using \\<open>e > 0\\<close> g_phi_less that"], ["proof (prove)\nusing this:\n  0 < e\n  ?x \\<in> {- pi..pi} \\<Longrightarrow>\n  \\<bar>g ?x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * ?x) + b k * cos (real k * ?x))\\<bar>\n  < e / 6\n  x \\<in> space (lebesgue_on {- pi..pi})\n\ngoal (1 subgoal):\n 1. (g x -\n     (\\<Sum>k\\<le>n.\n         a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 6)\\<^sup>2", "apply (simp add: abs_le_square_iff [symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < e;\n     \\<And>x.\n        - pi \\<le> x \\<and> x \\<le> pi \\<Longrightarrow>\n        \\<bar>g x -\n              (\\<Sum>k\\<le>n.\n                  a k * sin (real k * x) + b k * cos (real k * x))\\<bar> *\n        6\n        < e;\n     - pi \\<le> x \\<and> x \\<le> pi\\<rbrakk>\n    \\<Longrightarrow> \\<bar>g x -\n                            (\\<Sum>k\\<le>n.\n                                a k * sin (real k * x) +\n                                b k * cos (real k * x))\\<bar> *\n                      6\n                      \\<le> e", "using less_eq_real_def"], ["proof (prove)\nusing this:\n  (?x \\<le> ?y) = (?x < ?y \\<or> ?x = ?y)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < e;\n     \\<And>x.\n        - pi \\<le> x \\<and> x \\<le> pi \\<Longrightarrow>\n        \\<bar>g x -\n              (\\<Sum>k\\<le>n.\n                  a k * sin (real k * x) + b k * cos (real k * x))\\<bar> *\n        6\n        < e;\n     - pi \\<le> x \\<and> x \\<le> pi\\<rbrakk>\n    \\<Longrightarrow> \\<bar>g x -\n                            (\\<Sum>k\\<le>n.\n                                a k * sin (real k * x) +\n                                b k * cos (real k * x))\\<bar> *\n                      6\n                      \\<le> e", "by blast"], ["proof (state)\nthis:\n  ?x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n  (g ?x -\n   (\\<Sum>k\\<le>n.\n       a k * sin (real k * ?x) + b k * cos (real k * ?x)))\\<^sup>2\n  \\<le> (e / 6)\\<^sup>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     (g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n  \\<le> LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2\n\ngoal (2 subgoals):\n 1. 0 \\<le> e / 2\n 2. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     (g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n  \\<le> LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2\n\ngoal (2 subgoals):\n 1. 0 \\<le> e / 2\n 2. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "have \"\\<dots> \\<le> (e / 2)\\<^sup>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2 \\<le> (e / 2)\\<^sup>2", "using \\<open>e > 0\\<close> pi_less_4"], ["proof (prove)\nusing this:\n  0 < e\n  pi < 4\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2 \\<le> (e / 2)\\<^sup>2", "by (auto simp: power2_eq_square measure_restrict_space)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. (e / 6)\\<^sup>2 \\<le> (e / 2)\\<^sup>2\n\ngoal (2 subgoals):\n 1. 0 \\<le> e / 2\n 2. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "finally"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}.\n     (g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n  \\<le> (e / 2)\\<^sup>2", "show \"LINT x|lebesgue_on {-pi..pi}. (g x - (?\\<phi> n a b x))\\<^sup>2 \\<le> (e / 2)\\<^sup>2\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}.\n     (g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n  \\<le> (e / 2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       (g x -\n        (\\<Sum>k\\<le>n.\n            a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n    \\<le> (e / 2)\\<^sup>2", "."], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     (g x -\n      (\\<Sum>k\\<le>n.\n          a k * sin (real k * x) + b k * cos (real k * x)))\\<^sup>2\n  \\<le> (e / 2)\\<^sup>2\n\ngoal (1 subgoal):\n 1. 0 \\<le> e / 2", "qed (use \\<open>e > 0\\<close> in auto)"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       g x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  \\<le> e / 2\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "with norm_fg"], ["proof (chain)\npicking this:\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       g x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  \\<le> e / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) < e / 2\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       g x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  \\<le> e / 2\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         g x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "by auto"], ["proof (state)\nthis:\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       g x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l2norm {- pi..pi} (\\<lambda>x. f x - g x) +\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       g x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>?n.\n             ?a k * sin (real k * x) + ?b k * cos (real k * x)))\n    < e", "finally"], ["proof (chain)\npicking this:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e", "show \"l2norm {-pi..pi} (\\<lambda>x. f x - (?\\<phi> n a b x)) < e\""], ["proof (prove)\nusing this:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n    < e", "."], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition Weierstrass_l2_trigonometric_set:\n  assumes f: \"f square_integrable {-pi..pi}\" and \"0 < e\"\n  obtains n a where \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x)) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a n.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a n.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "obtain n a b where lee:\n    \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * sin(real k * x) + b k * cos(real k * x))) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Weierstrass_l2_trig_polynomial [OF assms]"], ["proof (prove)\nusing this:\n  (\\<And>n a b.\n      l2norm {- pi..pi}\n       (\\<lambda>x.\n           f x -\n           (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n      < e \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>a b n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>k\\<le>n.\n                 a k * sin (real k * x) + b k * cos (real k * x)))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "."], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n\ngoal (1 subgoal):\n 1. (\\<And>a n.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "let ?a = \"\\<lambda>k. if k = 0 then sqrt(2 * pi) * b 0\n                else if even k then sqrt pi * b(k div 2)\n                else if k \\<le> 2 * n then sqrt pi * a((Suc k) div 2)\n                else 0\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>a n.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "show thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "have [simp]: \"Suc (i * 2) \\<le> n * 2 \\<longleftrightarrow> i<n\" \"{..n} \\<inter> {..<n} = {..<n}\" for i n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (Suc (i * 2) \\<le> n * 2) = (i < n) &&& {..n} \\<inter> {..<n} = {..<n}", "by auto"], ["proof (state)\nthis:\n  (Suc (?i * 2) \\<le> ?n * 2) = (?i < ?n)\n  {..?n} \\<inter> {..<?n} = {..<?n}\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "have \"(\\<Sum>k\\<le>n. b k * cos (real k * x)) = (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * x))\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. b k * cos (real k * x)) =\n    (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * x))", "by (rule sum.cong) auto"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. b k * cos (real k * ?x)) =\n  (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * ?x))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. b k * cos (real k * ?x)) =\n  (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * ?x))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "have \"(\\<Sum>k\\<le>n. a k * sin (real k * x)) = (\\<Sum>i\\<le>n. (if Suc (2 * i) \\<le> 2 * n then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) / sqrt pi)\"\n                   (is \"?lhs = ?rhs\") for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "proof (cases \"n=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "case False"], ["proof (state)\nthis:\n  n \\<noteq> 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "then"], ["proof (chain)\npicking this:\n  n \\<noteq> 0", "obtain n' where n': \"n = Suc n'\""], ["proof (prove)\nusing this:\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>n'. n = Suc n' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using not0_implies_Suc"], ["proof (prove)\nusing this:\n  n \\<noteq> 0\n  ?n \\<noteq> 0 \\<Longrightarrow> \\<exists>m. ?n = Suc m\n\ngoal (1 subgoal):\n 1. (\\<And>n'. n = Suc n' \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by blast"], ["proof (state)\nthis:\n  n = Suc n'\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "have \"?lhs = (\\<Sum>k = Suc 0..n. a k * sin (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>k = Suc 0..n. a k * sin (real k * x))", "by (simp add: atMost_atLeast0 sum_shift_lb_Suc0_0)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n  (\\<Sum>k = Suc 0..n. a k * sin (real k * x))\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n  (\\<Sum>k = Suc 0..n. a k * sin (real k * x))\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "have \"\\<dots> = (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..n. a k * sin (real k * x)) =\n    (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))", "proof (subst sum.reindex_bij_betw [symmetric])"], ["proof (state)\ngoal (2 subgoals):\n 1. bij_betw ?h ?S {Suc 0..n}\n 2. (\\<Sum>xa\\<in>?S. a (?h xa) * sin (real (?h xa) * x)) =\n    (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))", "show \"bij_betw Suc {..n'} {Suc 0..n}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bij_betw Suc {..n'} {Suc 0..n}", "by (simp add: atMost_atLeast0 n')"], ["proof (state)\nthis:\n  bij_betw Suc {..n'} {Suc 0..n}\n\ngoal (1 subgoal):\n 1. (\\<Sum>xa\\<le>n'. a (Suc xa) * sin (real (Suc xa) * x)) =\n    (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))", "show \"(\\<Sum>j\\<le>n'. a (Suc j) * sin (real (Suc j) * x)) = (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<le>n'. a (Suc j) * sin (real (Suc j) * x)) =\n    (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))", "unfolding n' lessThan_Suc_atMost"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j\\<le>n'. a (Suc j) * sin (real (Suc j) * x)) =\n    (\\<Sum>i\\<le>n'. a (Suc i) * sin (x + x * real i))", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>j\\<le>n'. a (Suc j) * sin (real (Suc j) * x)) =\n  (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n. a k * sin (real k * x)) =\n  (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n. a k * sin (real k * x)) =\n  (\\<Sum>i<n. a (Suc i) * sin (x + x * real i))\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "have \"\\<dots> = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<n. a (Suc i) * sin (x + x * real i)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "by (simp add: field_simps if_distrib [of \"\\<lambda>x. x/_\"] sum.inter_restrict [where B = \"{..<n}\", simplified, symmetric] cong: if_cong)"], ["proof (state)\nthis:\n  (\\<Sum>i<n. a (Suc i) * sin (x + x * real i)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n      sqrt pi)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n      sqrt pi)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n      sqrt pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "."], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n      sqrt pi)\n\ngoal (1 subgoal):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k\\<le>n. a k * sin (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if Suc (2 * i) \\<le> 2 * n\n         then sqrt pi * a (Suc i) * sin ((1 + real i) * x) else 0) /\n        sqrt pi)", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * ?x) else 0) /\n      sqrt pi)\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>n. b k * cos (real k * ?x)) =\n  (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * ?x))\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * ?x) else 0) /\n      sqrt pi)", "have \"(\\<Sum>k\\<le>n. a k * sin(real k * x) + b k * cos(real k * x)) = (\\<Sum>k \\<le> Suc(2*n). ?a k * trigonometric_set k x)\" for x"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>n. b k * cos (real k * ?x)) =\n  (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * ?x))\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * ?x) else 0) /\n      sqrt pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)) =\n    (\\<Sum>k\\<le>Suc (2 * n).\n        (if k = 0 then sqrt (2 * pi) * b 0\n         else if even k then sqrt pi * b (k div 2)\n              else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2) else 0) *\n        trigonometric_set k x)", "unfolding sum.in_pairs_0 trigonometric_set_def"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>n. b k * cos (real k * ?x)) =\n  (\\<Sum>i\\<le>n. if i = 0 then b 0 else b i * cos (real i * ?x))\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x)) =\n  (\\<Sum>i\\<le>n.\n      (if Suc (2 * i) \\<le> 2 * n\n       then sqrt pi * a (Suc i) * sin ((1 + real i) * ?x) else 0) /\n      sqrt pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)) =\n    (\\<Sum>i\\<le>n.\n        (if 2 * i = 0 then sqrt (2 * pi) * b 0\n         else if even (2 * i) then sqrt pi * b (2 * i div 2)\n              else if 2 * i \\<le> 2 * n then sqrt pi * a (Suc (2 * i) div 2)\n                   else 0) *\n        (if 2 * i = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n         else if odd (2 * i)\n              then \\<lambda>x. sin (real (Suc (2 * i div 2)) * x) / sqrt pi\n              else (\\<lambda>x. cos (real (2 * i) / 2 * x) / sqrt pi))\n         x +\n        (if Suc (2 * i) = 0 then sqrt (2 * pi) * b 0\n         else if even (Suc (2 * i)) then sqrt pi * b (Suc (2 * i) div 2)\n              else if Suc (2 * i) \\<le> 2 * n\n                   then sqrt pi * a (Suc (Suc (2 * i)) div 2) else 0) *\n        (if Suc (2 * i) = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n         else if odd (Suc (2 * i))\n              then \\<lambda>x.\n                      sin (real (Suc (Suc (2 * i) div 2)) * x) / sqrt pi\n              else (\\<lambda>x. cos (real (Suc (2 * i)) / 2 * x) / sqrt pi))\n         x)", "by (simp add: sum.distrib if_distrib [of \"\\<lambda>x. x*_\"] cong: if_cong)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x) + b k * cos (real k * ?x)) =\n  (\\<Sum>k\\<le>Suc (2 * n).\n      (if k = 0 then sqrt (2 * pi) * b 0\n       else if even k then sqrt pi * b (k div 2)\n            else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2) else 0) *\n      trigonometric_set k ?x)\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>?n. ?a k * trigonometric_set k x))\n    < e", "with lee"], ["proof (chain)\npicking this:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x) + b k * cos (real k * ?x)) =\n  (\\<Sum>k\\<le>Suc (2 * n).\n      (if k = 0 then sqrt (2 * pi) * b 0\n       else if even k then sqrt pi * b (k div 2)\n            else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2) else 0) *\n      trigonometric_set k ?x)", "show \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k \\<le> Suc(2*n). ?a k * trigonometric_set k x)) < e\""], ["proof (prove)\nusing this:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>n. a k * sin (real k * x) + b k * cos (real k * x)))\n  < e\n  (\\<Sum>k\\<le>n. a k * sin (real k * ?x) + b k * cos (real k * ?x)) =\n  (\\<Sum>k\\<le>Suc (2 * n).\n      (if k = 0 then sqrt (2 * pi) * b 0\n       else if even k then sqrt pi * b (k div 2)\n            else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2) else 0) *\n      trigonometric_set k ?x)\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>k\\<le>Suc (2 * n).\n             (if k = 0 then sqrt (2 * pi) * b 0\n              else if even k then sqrt pi * b (k div 2)\n                   else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2)\n                        else 0) *\n             trigonometric_set k x))\n    < e", "by auto"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>k\\<le>Suc (2 * n).\n           (if k = 0 then sqrt (2 * pi) * b 0\n            else if even k then sqrt pi * b (k div 2)\n                 else if k \\<le> 2 * n then sqrt pi * a (Suc k div 2)\n                      else 0) *\n           trigonometric_set k x))\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Convergence wrt the L2 norm of trigonometric Fourier series\\<close>"], ["", "definition Fourier_coefficient\n  where \"Fourier_coefficient \\<equiv> orthonormal_coeff {-pi..pi} trigonometric_set\""], ["", "lemma Fourier_series_l2:\n  assumes \"f square_integrable {-pi..pi}\"\n  shows \"(\\<lambda>n. l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>i\\<le>n. Fourier_coefficient f i * trigonometric_set i x)))\n         \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>n.\n                 Fourier_coefficient f i * trigonometric_set i x)))\n    \\<longlonglongrightarrow> 0", "proof (clarsimp simp add: lim_sequentially dist_real_def Fourier_coefficient_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>l2norm {- pi..pi}\n                    (\\<lambda>x.\n                        f x -\n                        (\\<Sum>i\\<le>n.\n                            orthonormal_coeff {- pi..pi} trigonometric_set f\n                             i *\n                            trigonometric_set i x))\\<bar>\n             < r", "let ?h = \"\\<lambda>n x. (\\<Sum>i\\<le>n. orthonormal_coeff {-pi..pi} trigonometric_set f i * trigonometric_set i x)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>l2norm {- pi..pi}\n                    (\\<lambda>x.\n                        f x -\n                        (\\<Sum>i\\<le>n.\n                            orthonormal_coeff {- pi..pi} trigonometric_set f\n                             i *\n                            trigonometric_set i x))\\<bar>\n             < r", "show \"\\<exists>N. \\<forall>n\\<ge>N. \\<bar>l2norm {-pi..pi} (\\<lambda>x. f x - ?h n x)\\<bar> < e\"\n    if \"0 < e\" for e"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>l2norm {- pi..pi}\n                 (\\<lambda>x.\n                     f x -\n                     (\\<Sum>i\\<le>n.\n                         orthonormal_coeff {- pi..pi} trigonometric_set f\n                          i *\n                         trigonometric_set i x))\\<bar>\n          < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>l2norm {- pi..pi}\n                 (\\<lambda>x.\n                     f x -\n                     (\\<Sum>i\\<le>n.\n                         orthonormal_coeff {- pi..pi} trigonometric_set f\n                          i *\n                         trigonometric_set i x))\\<bar>\n          < e", "obtain N a where lte: \"l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x)) < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>a N.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Weierstrass_l2_trigonometric_set"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f square_integrable {- pi..pi}; 0 < ?e;\n   \\<And>n a.\n      l2norm {- pi..pi}\n       (\\<lambda>x. ?f x - (\\<Sum>k\\<le>n. a k * trigonometric_set k x))\n      < ?e \\<Longrightarrow>\n      ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>a N.\n        l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n        < e \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson \\<open>0 < e\\<close> assms)"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n  < e\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>l2norm {- pi..pi}\n                 (\\<lambda>x.\n                     f x -\n                     (\\<Sum>i\\<le>n.\n                         orthonormal_coeff {- pi..pi} trigonometric_set f\n                          i *\n                         trigonometric_set i x))\\<bar>\n          < e", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>l2norm {- pi..pi}\n                 (\\<lambda>x.\n                     f x -\n                     (\\<Sum>i\\<le>n.\n                         orthonormal_coeff {- pi..pi} trigonometric_set f\n                          i *\n                         trigonometric_set i x))\\<bar>\n          < e", "proof (intro exI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>l2norm {- pi..pi}\n              (\\<lambda>x.\n                  f x -\n                  (\\<Sum>i\\<le>n.\n                      orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                      trigonometric_set i x))\\<bar>\n       < e", "show \"\\<bar>l2norm {-pi..pi} (\\<lambda>x. f x - ?h m x)\\<bar> < e\"\n        if \"N \\<le> m\" for m"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "have \"\\<bar>l2norm {-pi..pi} (\\<lambda>x. f x - ?h m x)\\<bar> = l2norm {-pi..pi} (\\<lambda>x. f x - ?h m x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar> =\n    l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))", "proof (rule abs_of_nonneg)"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<le> l2norm {- pi..pi}\n             (\\<lambda>x.\n                 f x -\n                 (\\<Sum>i\\<le>m.\n                     orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                     trigonometric_set i x))", "show \"0 \\<le> l2norm {-pi..pi} (\\<lambda>x. f x -  ?h m x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> l2norm {- pi..pi}\n             (\\<lambda>x.\n                 f x -\n                 (\\<Sum>i\\<le>m.\n                     orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                     trigonometric_set i x))", "apply (intro l2norm_pos_le square_integrable_diff square_integrable_sum square_integrable_lmult\n                square_integrable_trigonometric_set assms, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  0 \\<le> l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar> =\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "also"], ["proof (state)\nthis:\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar> =\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "have \"\\<dots> \\<le> l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "have \"(\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i x) = (\\<Sum>i\\<le>N. a i * trigonometric_set i x)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m.\n        (if i \\<le> N then a i else 0) * trigonometric_set i x) =\n    (\\<Sum>i\\<le>N. a i * trigonometric_set i x)", "using sum.inter_restrict [where A = \"{..m}\" and B = \"{..N}\", symmetric] that"], ["proof (prove)\nusing this:\n  finite {..m} \\<Longrightarrow>\n  (\\<Sum>x\\<le>m. if x \\<in> {..N} then ?g x else (0::?'a)) =\n  sum ?g ({..m} \\<inter> {..N})\n  N \\<le> m\n\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>m.\n        (if i \\<le> N then a i else 0) * trigonometric_set i x) =\n    (\\<Sum>i\\<le>N. a i * trigonometric_set i x)", "by (force simp: if_distrib [of \"\\<lambda>x. x * _\"] min_absorb2 cong: if_cong)"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i ?x) =\n  (\\<Sum>i\\<le>N. a i * trigonometric_set i ?x)\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i ?x) =\n  (\\<Sum>i\\<le>N. a i * trigonometric_set i ?x)\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "have \"l2norm {-pi..pi} (\\<lambda>x. f x - ?h m x)\n                \\<le> l2norm {-pi..pi} (\\<lambda>x. f x - (\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   (if i \\<le> N then a i else 0) * trigonometric_set i x))", "using orthonormal_optimal_partial_sum\n              [OF orthonormal_system_trigonometric_set square_integrable_trigonometric_set assms]"], ["proof (prove)\nusing this:\n  finite ?I \\<Longrightarrow>\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<in>?I.\n          orthonormal_coeff {- pi..pi} trigonometric_set f i *\n          trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>i\\<in>?I. ?a i * trigonometric_set i x))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   (if i \\<le> N then a i else 0) * trigonometric_set i x))", "by simp"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 (if i \\<le> N then a i else 0) * trigonometric_set i x))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i ?x) =\n  (\\<Sum>i\\<le>N. a i * trigonometric_set i ?x)\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 (if i \\<le> N then a i else 0) * trigonometric_set i x))", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i\\<le>m. (if i \\<le> N then a i else 0) * trigonometric_set i ?x) =\n  (\\<Sum>i\\<le>N. a i * trigonometric_set i ?x)\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 (if i \\<le> N then a i else 0) * trigonometric_set i x))\n\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x.\n         f x -\n         (\\<Sum>i\\<le>m.\n             orthonormal_coeff {- pi..pi} trigonometric_set f i *\n             trigonometric_set i x))\n    \\<le> l2norm {- pi..pi}\n           (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))", "by simp"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "also"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x.\n       f x -\n       (\\<Sum>i\\<le>m.\n           orthonormal_coeff {- pi..pi} trigonometric_set f i *\n           trigonometric_set i x))\n  \\<le> l2norm {- pi..pi}\n         (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "have \"\\<dots> < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l2norm {- pi..pi}\n     (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n    < e", "by (rule lte)"], ["proof (state)\nthis:\n  l2norm {- pi..pi}\n   (\\<lambda>x. f x - (\\<Sum>k\\<le>N. a k * trigonometric_set k x))\n  < e\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "finally"], ["proof (chain)\npicking this:\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar>\n  < e", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. \\<bar>l2norm {- pi..pi}\n           (\\<lambda>x.\n               f x -\n               (\\<Sum>i\\<le>m.\n                   orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                   trigonometric_set i x))\\<bar>\n    < e", "."], ["proof (state)\nthis:\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?m \\<Longrightarrow>\n  \\<bar>l2norm {- pi..pi}\n         (\\<lambda>x.\n             f x -\n             (\\<Sum>i\\<le>?m.\n                 orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                 trigonometric_set i x))\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<bar>l2norm {- pi..pi}\n               (\\<lambda>x.\n                   f x -\n                   (\\<Sum>i\\<le>n.\n                       orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                       trigonometric_set i x))\\<bar>\n        < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<bar>l2norm {- pi..pi}\n               (\\<lambda>x.\n                   f x -\n                   (\\<Sum>i\\<le>n.\n                       orthonormal_coeff {- pi..pi} trigonometric_set f i *\n                       trigonometric_set i x))\\<bar>\n        < ?e\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Fourier coefficients go to 0 (weak form of Riemann-Lebesgue)\\<close>"], ["", "lemma trigonometric_set_mul_absolutely_integrable:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. trigonometric_set n x * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. trigonometric_set n x * f x) absolutely_integrable_on\n    {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. trigonometric_set n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded (trigonometric_set n ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"trigonometric_set n \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trigonometric_set n \\<in> borel_measurable (lebesgue_on {- pi..pi})", "using square_integrable_def square_integrable_trigonometric_set"], ["proof (prove)\nusing this:\n  ?f square_integrable ?S \\<equiv>\n  ?S \\<in> sets lebesgue \\<and>\n  ?f \\<in> borel_measurable (lebesgue_on ?S) \\<and>\n  integrable (lebesgue_on ?S) (\\<lambda>x. (?f x)\\<^sup>2)\n  trigonometric_set ?i square_integrable {- pi..pi}\n\ngoal (1 subgoal):\n 1. trigonometric_set n \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by blast"], ["proof (state)\nthis:\n  trigonometric_set n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded (trigonometric_set n ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "show \"bounded (trigonometric_set n ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded (trigonometric_set n ` {- pi..pi})", "unfolding bounded_iff"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<forall>x\\<in>trigonometric_set n ` {- pi..pi}. norm x \\<le> a", "using pi_gt3 sqrt_pi_ge1"], ["proof (prove)\nusing this:\n  3 < pi\n  1 \\<le> sqrt pi\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<forall>x\\<in>trigonometric_set n ` {- pi..pi}. norm x \\<le> a", "by (rule_tac x=1 in exI)\n      (auto simp: trigonometric_set_def dist_real_def\n        intro: order_trans [OF abs_sin_le_one] order_trans [OF abs_cos_le_one])"], ["proof (state)\nthis:\n  bounded (trigonometric_set n ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (auto simp: assms)"], ["", "lemma trigonometric_set_mul_integrable:\n   \"f absolutely_integrable_on {-pi..pi} \\<Longrightarrow> integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. trigonometric_set n x * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n    integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * f x)", "using trigonometric_set_mul_absolutely_integrable"], ["proof (prove)\nusing this:\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  (\\<lambda>x. trigonometric_set ?n x * ?f x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n    integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * f x)", "by (simp add: integrable_restrict_space set_integrable_def)"], ["", "lemma trigonometric_set_integrable [simp]: \"integrable (lebesgue_on {-pi..pi}) (trigonometric_set n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (trigonometric_set n)", "using trigonometric_set_mul_integrable [where f = id]"], ["proof (prove)\nusing this:\n  id absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set ?n x * id x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (trigonometric_set n)", "by simp (metis absolutely_integrable_imp_integrable fmeasurableD interval_cbox lmeasurable_cbox square_integrable_imp_absolutely_integrable square_integrable_trigonometric_set)"], ["", "lemma absolutely_integrable_sin_product:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. sin(k * x) * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (k * x) * f x) absolutely_integrable_on {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. sin (k * x))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. sin (k * x)) ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"(\\<lambda>x. sin (k * x)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (k * x))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (metis borel_measurable_integrable integrable_sin_cx mult_commute_abs)"], ["proof (state)\nthis:\n  (\\<lambda>x. sin (k * x)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. sin (k * x)) ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "show \"bounded ((\\<lambda>x. sin (k * x)) ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. sin (k * x)) ` {- pi..pi})", "by (metis (mono_tags, lifting) abs_sin_le_one bounded_iff imageE real_norm_def)"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. sin (k * x)) ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (auto simp: assms)"], ["", "lemma absolutely_integrable_cos_product:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. cos(k * x) * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. cos (k * x) * f x) absolutely_integrable_on {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. cos (k * x))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. cos (k * x)) ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"(\\<lambda>x. cos (k * x)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. cos (k * x))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (metis borel_measurable_integrable integrable_cos_cx mult_commute_abs)"], ["proof (state)\nthis:\n  (\\<lambda>x. cos (k * x)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. cos (k * x)) ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "show \"bounded ((\\<lambda>x. cos (k * x)) ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. cos (k * x)) ` {- pi..pi})", "by (metis (mono_tags, lifting) abs_cos_le_one bounded_iff imageE real_norm_def)"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. cos (k * x)) ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (auto simp: assms)"], ["", "lemma\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows Fourier_products_integrable_cos: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(k * x) * f x)\"\n  and   Fourier_products_integrable_sin: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(k * x) * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (k * x) * f x) &&&\n    integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. sin (k * x) * f x)", "using absolutely_integrable_cos_product absolutely_integrable_sin_product assms"], ["proof (prove)\nusing this:\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  (\\<lambda>x. cos (?k * x) * ?f x) absolutely_integrable_on {- pi..pi}\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  (\\<lambda>x. sin (?k * x) * ?f x) absolutely_integrable_on {- pi..pi}\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (k * x) * f x) &&&\n    integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. sin (k * x) * f x)", "by (auto simp: integrable_restrict_space set_integrable_def)"], ["", "lemma Riemann_lebesgue_square_integrable:\n  assumes \"orthonormal_system S w\" \"\\<And>i. w i square_integrable S\" \"f square_integrable S\"\n  shows \"orthonormal_coeff S w f \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. orthonormal_coeff S w f \\<longlonglongrightarrow> 0", "using Fourier_series_square_summable [OF assms, of UNIV] summable_LIMSEQ_zero"], ["proof (prove)\nusing this:\n  summable (confine (\\<lambda>i. (orthonormal_coeff S w f i)\\<^sup>2) UNIV)\n  summable ?f \\<Longrightarrow> ?f \\<longlonglongrightarrow> (0::?'a)\n\ngoal (1 subgoal):\n 1. orthonormal_coeff S w f \\<longlonglongrightarrow> 0", "by force"], ["", "proposition Riemann_lebesgue:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient f \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient f \\<longlonglongrightarrow> 0", "unfolding lim_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "then"], ["proof (chain)\npicking this:\n  0 < e", "obtain g where \"continuous_on UNIV g\" and gabs: \"g absolutely_integrable_on {-pi..pi}\"\n                and fg_e2: \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>) < e/2\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g;\n         g absolutely_integrable_on {- pi..pi};\n         LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n         < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using absolutely_integrable_approximate_continuous [OF assms, of \"e/2\"]"], ["proof (prove)\nusing this:\n  0 < e\n  \\<lbrakk>{- pi..pi} \\<in> lmeasurable; 0 < e / 2;\n   \\<And>g.\n      \\<lbrakk>continuous_on UNIV g; g absolutely_integrable_on {- pi..pi};\n       LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar> < e / 2\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>continuous_on UNIV g;\n         g absolutely_integrable_on {- pi..pi};\n         LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n         < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (full_types) box_real(2) half_gt_zero_iff lmeasurable_cbox)"], ["proof (state)\nthis:\n  continuous_on UNIV g\n  g absolutely_integrable_on {- pi..pi}\n  LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "have \"g square_integrable {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g square_integrable {- pi..pi}", "using \\<open>continuous_on UNIV g\\<close> continuous_imp_square_integrable continuous_on_subset"], ["proof (prove)\nusing this:\n  continuous_on UNIV g\n  continuous_on {?a..?b} ?f \\<Longrightarrow> ?f square_integrable {?a..?b}\n  \\<lbrakk>continuous_on ?s ?f; ?t \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?t ?f\n\ngoal (1 subgoal):\n 1. g square_integrable {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  g square_integrable {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "then"], ["proof (chain)\npicking this:\n  g square_integrable {- pi..pi}", "have \"orthonormal_coeff {-pi..pi} trigonometric_set g \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  g square_integrable {- pi..pi}\n\ngoal (1 subgoal):\n 1. orthonormal_coeff {- pi..pi} trigonometric_set g\n    \\<longlonglongrightarrow> 0", "using Riemann_lebesgue_square_integrable orthonormal_system_trigonometric_set square_integrable_trigonometric_set"], ["proof (prove)\nusing this:\n  g square_integrable {- pi..pi}\n  \\<lbrakk>orthonormal_system ?S ?w; \\<And>i. ?w i square_integrable ?S;\n   ?f square_integrable ?S\\<rbrakk>\n  \\<Longrightarrow> orthonormal_coeff ?S ?w ?f \\<longlonglongrightarrow> 0\n  orthonormal_system {- pi..pi} trigonometric_set\n  trigonometric_set ?i square_integrable {- pi..pi}\n\ngoal (1 subgoal):\n 1. orthonormal_coeff {- pi..pi} trigonometric_set g\n    \\<longlonglongrightarrow> 0", "by blast"], ["proof (state)\nthis:\n  orthonormal_coeff {- pi..pi} trigonometric_set g\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "with \\<open>e > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < e\n  orthonormal_coeff {- pi..pi} trigonometric_set g\n  \\<longlonglongrightarrow> 0", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> \\<bar>orthonormal_coeff {-pi..pi} trigonometric_set g n\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  0 < e\n  orthonormal_coeff {- pi..pi} trigonometric_set g\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>orthonormal_coeff {- pi..pi} trigonometric_set g n\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           dist (orthonormal_coeff {- pi..pi} trigonometric_set g n) 0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>orthonormal_coeff {- pi..pi} trigonometric_set g n\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis half_gt_zero_iff norm_conv_dist real_norm_def)"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow>\n  \\<bar>orthonormal_coeff {- pi..pi} trigonometric_set g ?n\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "have \"\\<bar>Fourier_coefficient f n\\<bar> < e\"\n    if \"n \\<ge> N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "have \"\\<bar>LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * g x\\<bar> < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x\\<bar>\n    < e / 2", "using N [OF \\<open>n \\<ge> N\\<close>]"], ["proof (prove)\nusing this:\n  \\<bar>orthonormal_coeff {- pi..pi} trigonometric_set g n\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x\\<bar>\n    < e / 2", "by (auto simp: orthonormal_coeff_def l2product_def)"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "have \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. trigonometric_set n x * g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * g x)", "using gabs trigonometric_set_mul_integrable"], ["proof (prove)\nusing this:\n  g absolutely_integrable_on {- pi..pi}\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set ?n x * ?f x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * g x)", "by blast"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * g x)\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "moreover"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * g x)\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "have \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. trigonometric_set n x * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * f x)", "using assms trigonometric_set_mul_integrable"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set ?n x * ?f x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * f x)", "by blast"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * f x)\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "ultimately"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * g x)\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * f x)", "have \"\\<bar>(LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * g x) -\n                        (LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * f x)\\<bar>\n                     = \\<bar>(LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * (g x - f x))\\<bar>\""], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * g x)\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * f x)\n\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n          (LINT x|lebesgue_on {- pi..pi}.\n              trigonometric_set n x * f x)\\<bar> =\n    \\<bar>LINT x|lebesgue_on {- pi..pi}.\n             trigonometric_set n x * (g x - f x)\\<bar>", "by (simp add:  algebra_simps flip: Bochner_Integration.integral_diff)"], ["proof (state)\nthis:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar> =\n  \\<bar>LINT x|lebesgue_on {- pi..pi}.\n           trigonometric_set n x * (g x - f x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "also"], ["proof (state)\nthis:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar> =\n  \\<bar>LINT x|lebesgue_on {- pi..pi}.\n           trigonometric_set n x * (g x - f x)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "have \"\\<dots> \\<le> LINT x|lebesgue_on {-pi..pi}. \\<bar>f x - g x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}.\n             trigonometric_set n x * (g x - f x)\\<bar>\n    \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>", "proof (rule integral_abs_bound_integral)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * (g x - f x))\n 2. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. trigonometric_set n x * (g x - f x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. trigonometric_set n x * (g x - f x))", "by (simp add: gabs assms trigonometric_set_mul_integrable)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set n x * (g x - f x))\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "have \"(\\<lambda>x. f x - g x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) absolutely_integrable_on {- pi..pi}", "using gabs assms"], ["proof (prove)\nusing this:\n  g absolutely_integrable_on {- pi..pi}\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - g x) absolutely_integrable_on {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - g x) absolutely_integrable_on {- pi..pi}\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f x - g x) absolutely_integrable_on {- pi..pi}", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f x - g x) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)", "by (simp add: absolutely_integrable_imp_integrable)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. \\<bar>f x - g x\\<bar>)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "assume \"x \\<in> space (lebesgue_on {-pi..pi})\""], ["proof (state)\nthis:\n  x \\<in> space (lebesgue_on {- pi..pi})\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  x \\<in> space (lebesgue_on {- pi..pi})", "have \"-pi \\<le> x\" \"x \\<le> pi\""], ["proof (prove)\nusing this:\n  x \\<in> space (lebesgue_on {- pi..pi})\n\ngoal (1 subgoal):\n 1. - pi \\<le> x &&& x \\<le> pi", "by auto"], ["proof (state)\nthis:\n  - pi \\<le> x\n  x \\<le> pi\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "have \"\\<bar>trigonometric_set n x\\<bar> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>trigonometric_set n x\\<bar> \\<le> 1", "using pi_ge_two"], ["proof (prove)\nusing this:\n  2 \\<le> pi\n\ngoal (1 subgoal):\n 1. \\<bar>trigonometric_set n x\\<bar> \\<le> 1", "apply (simp add: trigonometric_set_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 \\<le> pi \\<Longrightarrow>\n    (odd n \\<longrightarrow>\n     0 < n \\<longrightarrow>\n     \\<bar>sin ((1 + real (n div 2)) * x)\\<bar> \\<le> sqrt pi) \\<and>\n    (even n \\<longrightarrow>\n     0 < n \\<longrightarrow> \\<bar>cos (real n * x / 2)\\<bar> \\<le> sqrt pi)", "using sqrt_pi_ge1 abs_sin_le_one order_trans abs_cos_le_one"], ["proof (prove)\nusing this:\n  1 \\<le> sqrt pi\n  \\<bar>sin ?x\\<bar> \\<le> 1\n  \\<lbrakk>?x \\<le> ?y; ?y \\<le> ?z\\<rbrakk> \\<Longrightarrow> ?x \\<le> ?z\n  \\<bar>cos ?x\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. 2 \\<le> pi \\<Longrightarrow>\n    (odd n \\<longrightarrow>\n     0 < n \\<longrightarrow>\n     \\<bar>sin ((1 + real (n div 2)) * x)\\<bar> \\<le> sqrt pi) \\<and>\n    (even n \\<longrightarrow>\n     0 < n \\<longrightarrow> \\<bar>cos (real n * x / 2)\\<bar> \\<le> sqrt pi)", "by metis"], ["proof (state)\nthis:\n  \\<bar>trigonometric_set n x\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {- pi..pi}) \\<Longrightarrow>\n       \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n       \\<le> \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>trigonometric_set n x\\<bar> \\<le> 1", "show \"\\<bar>trigonometric_set n x * (g x - f x)\\<bar> \\<le> \\<bar>f x - g x\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>trigonometric_set n x\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n    \\<le> \\<bar>f x - g x\\<bar>", "using abs_ge_zero mult_right_mono"], ["proof (prove)\nusing this:\n  \\<bar>trigonometric_set n x\\<bar> \\<le> 1\n  (0::?'a) \\<le> \\<bar>?a\\<bar>\n  \\<lbrakk>?a \\<le> ?b; (0::?'a) \\<le> ?c\\<rbrakk>\n  \\<Longrightarrow> ?a * ?c \\<le> ?b * ?c\n\ngoal (1 subgoal):\n 1. \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n    \\<le> \\<bar>f x - g x\\<bar>", "by (fastforce simp add: abs_mult abs_minus_commute)"], ["proof (state)\nthis:\n  \\<bar>trigonometric_set n x * (g x - f x)\\<bar>\n  \\<le> \\<bar>f x - g x\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}.\n           trigonometric_set n x * (g x - f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "finally"], ["proof (chain)\npicking this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>", "have \"\\<bar>(LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * g x) -\n           (LINT x|lebesgue_on {-pi..pi}. trigonometric_set n x * f x)\\<bar>\n          \\<le> LINT x|lebesgue_on {-pi..pi}. \\<bar>f x - g x\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n          (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n    \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>", "."], ["proof (state)\nthis:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "then"], ["proof (chain)\npicking this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "using N [OF \\<open>n \\<ge> N\\<close>] fg_e2"], ["proof (prove)\nusing this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n  \\<bar>orthonormal_coeff {- pi..pi} trigonometric_set g n\\<bar> < e / 2\n  LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f n\\<bar> < e", "unfolding Fourier_coefficient_def orthonormal_coeff_def l2product_def"], ["proof (prove)\nusing this:\n  \\<bar>(LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x) -\n        (LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x)\\<bar>\n  \\<le> LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * g x\\<bar>\n  < e / 2\n  LINT x|lebesgue_on {- pi..pi}. \\<bar>f x - g x\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. trigonometric_set n x * f x\\<bar>\n    < e", "by linarith"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f n\\<bar> < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r", "then"], ["proof (chain)\npicking this:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e", "show \"\\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < e\""], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < e", "by auto"], ["proof (state)\nthis:\n  \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < e\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Riemann_lebesgue_sin:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin(real n * x) * f x)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x)\n    \\<longlonglongrightarrow> 0", "unfolding lim_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "then"], ["proof (chain)\npicking this:\n  0 < e", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> \\<bar>Fourier_coefficient f n\\<bar> < e/4\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Riemann_lebesgue [OF assms]"], ["proof (prove)\nusing this:\n  0 < e\n  Fourier_coefficient f \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>r>0.\n     \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis norm_conv_dist real_norm_def zero_less_divide_iff zero_less_numeral)"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 4\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "have \"\\<bar>LINT x|lebesgue_on {-pi..pi}. sin (real n * x) * f x\\<bar> < e\" if \"n > N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x\\<bar> < e", "using that"], ["proof (prove)\nusing this:\n  N < n\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x\\<bar> < e", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "case (Suc n)"], ["proof (state)\nthis:\n  N < n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x\\<bar> < e\n  N < Suc n\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "have \"\\<bar>Fourier_coefficient f(Suc (2 * n))\\<bar> < e/4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * n))\\<bar> < e / 4", "using N Suc.prems"], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 4\n  N < Suc n\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * n))\\<bar> < e / 4", "by auto"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f (Suc (2 * n))\\<bar> < e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "then"], ["proof (chain)\npicking this:\n  \\<bar>Fourier_coefficient f (Suc (2 * n))\\<bar> < e / 4", "have \"\\<bar>LINT x|lebesgue_on {-pi..pi}. sin ((1 + real n) * x) * f x\\<bar> < sqrt pi * e / 4\""], ["proof (prove)\nusing this:\n  \\<bar>Fourier_coefficient f (Suc (2 * n))\\<bar> < e / 4\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. sin ((1 + real n) * x) * f x\\<bar>\n    < sqrt pi * e / 4", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def\n          trigonometric_set_def l2product_def field_simps)"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin ((1 + real n) * x) * f x\\<bar>\n  < sqrt pi * e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin ((1 + real n) * x) * f x\\<bar>\n  < sqrt pi * e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "have \"\\<dots> \\<le> e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt pi * e / 4 \\<le> e", "using \\<open>0 < e\\<close> pi_less_4 real_sqrt_less_mono"], ["proof (prove)\nusing this:\n  0 < e\n  pi < 4\n  ?x < ?y \\<Longrightarrow> sqrt ?x < sqrt ?y\n\ngoal (1 subgoal):\n 1. sqrt pi * e / 4 \\<le> e", "by (fastforce simp add: field_simps)"], ["proof (state)\nthis:\n  sqrt pi * e / 4 \\<le> e\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         sin (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  sin (real (Suc n) * x) * f x\\<bar>\n                         < e", "finally"], ["proof (chain)\npicking this:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin ((1 + real n) * x) * f x\\<bar>\n  < e", "show ?case"], ["proof (prove)\nusing this:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin ((1 + real n) * x) * f x\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x\\<bar>\n    < e", "by simp"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real 0 * x) * f x\\<bar> < e", "qed auto"], ["proof (state)\nthis:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real ?n * x) * f x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0\n             < r", "then"], ["proof (chain)\npicking this:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real ?n * x) * f x\\<bar> < e", "show \"\\<exists>no. \\<forall>n\\<ge>no. dist (LINT x|lebesgue_on {-pi..pi}. sin (real n * x) * f x) 0 < e\""], ["proof (prove)\nusing this:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. sin (real ?n * x) * f x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<exists>no.\n       \\<forall>n\\<ge>no.\n          dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0 < e", "by (metis (full_types) le_neq_implies_less less_add_same_cancel2 less_trans norm_conv_dist real_norm_def zero_less_one)"], ["proof (state)\nthis:\n  \\<exists>no.\n     \\<forall>n\\<ge>no.\n        dist (LINT x|lebesgue_on {- pi..pi}. sin (real n * x) * f x) 0 < e\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Riemann_lebesgue_cos:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(real n * x) * f x)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x)\n    \\<longlonglongrightarrow> 0", "unfolding lim_sequentially"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "then"], ["proof (chain)\npicking this:\n  0 < e", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> \\<bar>Fourier_coefficient f n\\<bar> < e/4\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Riemann_lebesgue [OF assms]"], ["proof (prove)\nusing this:\n  0 < e\n  Fourier_coefficient f \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>r>0.\n     \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 4) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis norm_conv_dist real_norm_def zero_less_divide_iff zero_less_numeral)"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 4\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "have \"\\<bar>LINT x|lebesgue_on {-pi..pi}. cos (real n * x) * f x\\<bar> < e\" if \"n > N\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x\\<bar> < e", "using that"], ["proof (prove)\nusing this:\n  N < n\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x\\<bar> < e", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "case (Suc n)"], ["proof (state)\nthis:\n  N < n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x\\<bar> < e\n  N < Suc n\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "have eq: \"(x * 2 + x * (real n * 2)) / 2 = x + x * (real n)\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x * 2 + x * (real n * 2)) / 2 = x + x * real n", "by simp"], ["proof (state)\nthis:\n  (?x * 2 + ?x * (real n * 2)) / 2 = ?x + ?x * real n\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "have \"\\<bar>Fourier_coefficient f(2*n + 2)\\<bar> < e/4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (2 * n + 2)\\<bar> < e / 4", "using N Suc.prems"], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 4\n  N < Suc n\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (2 * n + 2)\\<bar> < e / 4", "by auto"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f (2 * n + 2)\\<bar> < e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "then"], ["proof (chain)\npicking this:\n  \\<bar>Fourier_coefficient f (2 * n + 2)\\<bar> < e / 4", "have \"\\<bar>LINT x|lebesgue_on {-pi..pi}. f x * cos (x + x * (real n))\\<bar> < sqrt pi * e / 4\""], ["proof (prove)\nusing this:\n  \\<bar>Fourier_coefficient f (2 * n + 2)\\<bar> < e / 4\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. f x * cos (x + x * real n)\\<bar>\n    < sqrt pi * e / 4", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def\n          trigonometric_set_def l2product_def field_simps eq)"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. f x * cos (x + x * real n)\\<bar>\n  < sqrt pi * e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "also"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. f x * cos (x + x * real n)\\<bar>\n  < sqrt pi * e / 4\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "have \"\\<dots> \\<le> e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sqrt pi * e / 4 \\<le> e", "using \\<open>0 < e\\<close> pi_less_4 real_sqrt_less_mono"], ["proof (prove)\nusing this:\n  0 < e\n  pi < 4\n  ?x < ?y \\<Longrightarrow> sqrt ?x < sqrt ?y\n\ngoal (1 subgoal):\n 1. sqrt pi * e / 4 \\<le> e", "by (fastforce simp add: field_simps)"], ["proof (state)\nthis:\n  sqrt pi * e / 4 \\<le> e\n\ngoal (2 subgoals):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e\n 2. \\<And>n.\n       \\<lbrakk>N < n \\<Longrightarrow>\n                \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                         cos (real n * x) * f x\\<bar>\n                < e;\n        N < Suc n\\<rbrakk>\n       \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {- pi..pi}.\n                                  cos (real (Suc n) * x) * f x\\<bar>\n                         < e", "finally"], ["proof (chain)\npicking this:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. f x * cos (x + x * real n)\\<bar> < e", "show ?case"], ["proof (prove)\nusing this:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. f x * cos (x + x * real n)\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x\\<bar>\n    < e", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. N < 0 \\<Longrightarrow>\n    \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real 0 * x) * f x\\<bar> < e", "qed auto"], ["proof (state)\nthis:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real ?n * x) * f x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0\n             < r", "then"], ["proof (chain)\npicking this:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real ?n * x) * f x\\<bar> < e", "show \"\\<exists>no. \\<forall>n\\<ge>no. dist (LINT x|lebesgue_on {-pi..pi}. cos (real n * x) * f x) 0 < e\""], ["proof (prove)\nusing this:\n  N < ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {- pi..pi}. cos (real ?n * x) * f x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<exists>no.\n       \\<forall>n\\<ge>no.\n          dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0 < e", "by (metis (full_types) le_neq_implies_less less_add_same_cancel2 less_trans norm_conv_dist real_norm_def zero_less_one)"], ["proof (state)\nthis:\n  \\<exists>no.\n     \\<forall>n\\<ge>no.\n        dist (LINT x|lebesgue_on {- pi..pi}. cos (real n * x) * f x) 0 < e\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Riemann_lebesgue_sin_half:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. sin ((real n + 1/2) * x) * f x) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. sin ((real n + 1 / 2) * x) * f x)\n    \\<longlonglongrightarrow> 0", "proof (simp add: algebra_simps sin_add)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           f x * (cos (x * real n) * sin (x / 2)) +\n           f x * (sin (x * real n) * cos (x / 2)))\n    \\<longlonglongrightarrow> 0", "let ?INT = \"integral\\<^sup>L (lebesgue_on {-pi..pi})\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           f x * (cos (x * real n) * sin (x / 2)) +\n           f x * (sin (x * real n) * cos (x / 2)))\n    \\<longlonglongrightarrow> 0", "let ?f = \"(\\<lambda>n. ?INT (\\<lambda>x. sin(n * x) * cos(1/2 * x) * f x) +\n                 ?INT (\\<lambda>x. cos(n * x) * sin(1/2 * x) * f x))\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           f x * (cos (x * real n) * sin (x / 2)) +\n           f x * (sin (x * real n) * cos (x / 2)))\n    \\<longlonglongrightarrow> 0", "show \"(\\<lambda>n. ?INT (\\<lambda>x. f x * (cos (x * real n) * sin (x/2)) + f x * (sin (x * real n) * cos (x/2)))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           f x * (cos (x * real n) * sin (x / 2)) +\n           f x * (sin (x * real n) * cos (x / 2)))\n    \\<longlonglongrightarrow> 0", "proof (rule Lim_transform_eventually)"], ["proof (state)\ngoal (2 subgoals):\n 1. ?f \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f x =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "have sin: \"(\\<lambda>x. sin (1/2 * x) * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (1 / 2 * x) * f x) absolutely_integrable_on {- pi..pi}", "by (intro absolutely_integrable_sin_product assms)"], ["proof (state)\nthis:\n  (\\<lambda>x. sin (1 / 2 * x) * f x) absolutely_integrable_on {- pi..pi}\n\ngoal (2 subgoals):\n 1. ?f \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f x =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "have cos: \"(\\<lambda>x. cos (1/2 * x) * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. cos (1 / 2 * x) * f x) absolutely_integrable_on {- pi..pi}", "by (intro absolutely_integrable_cos_product assms)"], ["proof (state)\nthis:\n  (\\<lambda>x. cos (1 / 2 * x) * f x) absolutely_integrable_on {- pi..pi}\n\ngoal (2 subgoals):\n 1. ?f \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f x =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "show \"\\<forall>\\<^sub>F n in sequentially. ?f n = ?INT (\\<lambda>x. f x * (cos (x * real n) * sin (x/2)) + f x * (sin (x * real n) * cos (x/2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       (LINT x|lebesgue_on {- pi..pi}.\n           sin (real n * x) * cos (1 / 2 * x) * f x) +\n       (LINT x|lebesgue_on {- pi..pi}.\n           cos (real n * x) * sin (1 / 2 * x) * f x) =\n       LINT x|lebesgue_on {- pi..pi}.\n          f x * (cos (x * real n) * sin (x / 2)) +\n          f x * (sin (x * real n) * cos (x / 2))", "unfolding mult.assoc"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       (LINT x|lebesgue_on {- pi..pi}.\n           sin (real n * x) * (cos (1 / 2 * x) * f x)) +\n       (LINT x|lebesgue_on {- pi..pi}.\n           cos (real n * x) * (sin (1 / 2 * x) * f x)) =\n       LINT x|lebesgue_on {- pi..pi}.\n          f x * (cos (x * real n) * sin (x / 2)) +\n          f x * (sin (x * real n) * cos (x / 2))", "apply (rule eventuallyI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (LINT xa|lebesgue_on {- pi..pi}.\n           sin (real x * xa) * (cos (1 / 2 * xa) * f xa)) +\n       (LINT xa|lebesgue_on {- pi..pi}.\n           cos (real x * xa) * (sin (1 / 2 * xa) * f xa)) =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "apply (subst Bochner_Integration.integral_add [symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x.\n       integrable (lebesgue_on {- pi..pi})\n        (\\<lambda>xa. sin (real x * xa) * (cos (1 / 2 * xa) * f xa))\n 2. \\<And>x.\n       integrable (lebesgue_on {- pi..pi})\n        (\\<lambda>xa. cos (real x * xa) * (sin (1 / 2 * xa) * f xa))\n 3. \\<And>x.\n       LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * (cos (1 / 2 * xa) * f xa) +\n          cos (real x * xa) * (sin (1 / 2 * xa) * f xa) =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "apply (safe intro!: cos absolutely_integrable_sin_product sin absolutely_integrable_cos_product absolutely_integrable_imp_integrable)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x. {- pi..pi} \\<in> sets lebesgue\n 3. \\<And>x.\n       LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * (cos (1 / 2 * xa) * f xa) +\n          cos (real x * xa) * (sin (1 / 2 * xa) * f xa) =\n       LINT xa|lebesgue_on {- pi..pi}.\n          f xa * (cos (xa * real x) * sin (xa / 2)) +\n          f xa * (sin (xa * real x) * cos (xa / 2))", "apply (auto simp: algebra_simps)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     (LINT x|lebesgue_on {- pi..pi}.\n         sin (real n * x) * cos (1 / 2 * x) * f x) +\n     (LINT x|lebesgue_on {- pi..pi}.\n         cos (real n * x) * sin (1 / 2 * x) * f x) =\n     LINT x|lebesgue_on {- pi..pi}.\n        f x * (cos (x * real n) * sin (x / 2)) +\n        f x * (sin (x * real n) * cos (x / 2))\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}.\n            sin (real n * x) * cos (1 / 2 * x) * f x) +\n        (LINT x|lebesgue_on {- pi..pi}.\n            cos (real n * x) * sin (1 / 2 * x) * f x))\n    \\<longlonglongrightarrow> 0", "have \"?f \\<longlonglongrightarrow> 0 + 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (LINT xa|lebesgue_on {- pi..pi}.\n            sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n        (LINT xa|lebesgue_on {- pi..pi}.\n            cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n    \\<longlonglongrightarrow> 0 + 0", "unfolding mult.assoc"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (LINT xa|lebesgue_on {- pi..pi}.\n            sin (real x * xa) * (cos (1 / 2 * xa) * f xa)) +\n        (LINT xa|lebesgue_on {- pi..pi}.\n            cos (real x * xa) * (sin (1 / 2 * xa) * f xa)))\n    \\<longlonglongrightarrow> 0 + 0", "by (intro tendsto_add Riemann_lebesgue_sin Riemann_lebesgue_cos sin cos)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n      (LINT xa|lebesgue_on {- pi..pi}.\n          cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n  \\<longlonglongrightarrow> 0 + 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}.\n            sin (real n * x) * cos (1 / 2 * x) * f x) +\n        (LINT x|lebesgue_on {- pi..pi}.\n            cos (real n * x) * sin (1 / 2 * x) * f x))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      (LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n      (LINT xa|lebesgue_on {- pi..pi}.\n          cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n  \\<longlonglongrightarrow> 0 + 0", "show \"?f \\<longlonglongrightarrow> (0::real)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      (LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n      (LINT xa|lebesgue_on {- pi..pi}.\n          cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n  \\<longlonglongrightarrow> 0 + 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (LINT xa|lebesgue_on {- pi..pi}.\n            sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n        (LINT xa|lebesgue_on {- pi..pi}.\n            cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (LINT xa|lebesgue_on {- pi..pi}.\n          sin (real x * xa) * cos (1 / 2 * xa) * f xa) +\n      (LINT xa|lebesgue_on {- pi..pi}.\n          cos (real x * xa) * sin (1 / 2 * xa) * f xa))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         f x * (cos (x * real n) * sin (x / 2)) +\n         f x * (sin (x * real n) * cos (x / 2)))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_limit_pair:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\"\n        (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l\n 2. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "assume L: ?lhs"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal (2 subgoals):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l\n 2. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "show ?rhs"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "unfolding lim_sequentially dist_real_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  0 < e", "obtain N1 where N1: \"\\<And>n. n \\<ge> N1 \\<Longrightarrow> \\<bar>Fourier_coefficient f n\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        (\\<And>n.\n            N1 \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using Riemann_lebesgue [OF assms]"], ["proof (prove)\nusing this:\n  0 < e\n  Fourier_coefficient f \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        (\\<And>n.\n            N1 \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>r>0.\n     \\<exists>no. \\<forall>n\\<ge>no. dist (Fourier_coefficient f n) 0 < r\n\ngoal (1 subgoal):\n 1. (\\<And>N1.\n        (\\<And>n.\n            N1 \\<le> n \\<Longrightarrow>\n            \\<bar>Fourier_coefficient f n\\<bar> < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis norm_conv_dist real_norm_def zero_less_divide_iff zero_less_numeral)"], ["proof (state)\nthis:\n  N1 \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "obtain N2 where N2: \"\\<And>n. n \\<ge> N2 \\<Longrightarrow> \\<bar>(\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) - l\\<bar> < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        (\\<And>n.\n            N2 \\<le> n \\<Longrightarrow>\n            \\<bar>(\\<Sum>k\\<le>2 * n.\n                      Fourier_coefficient f k * trigonometric_set k t) -\n                  l\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using L"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        (\\<And>n.\n            N2 \\<le> n \\<Longrightarrow>\n            \\<bar>(\\<Sum>k\\<le>2 * n.\n                      Fourier_coefficient f k * trigonometric_set k t) -\n                  l\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially dist_real_def"], ["proof (prove)\nusing this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           \\<bar>(\\<Sum>k\\<le>2 * n.\n                     Fourier_coefficient f k * trigonometric_set k t) -\n                 l\\<bar>\n           < r\n\ngoal (1 subgoal):\n 1. (\\<And>N2.\n        (\\<And>n.\n            N2 \\<le> n \\<Longrightarrow>\n            \\<bar>(\\<Sum>k\\<le>2 * n.\n                      Fourier_coefficient f k * trigonometric_set k t) -\n                  l\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson \\<open>0 < e\\<close> half_gt_zero_iff)"], ["proof (state)\nthis:\n  N2 \\<le> ?n \\<Longrightarrow>\n  \\<bar>(\\<Sum>k\\<le>2 * ?n.\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>(\\<Sum>k\\<le>n.\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < r", "show \"\\<exists>no. \\<forall>n\\<ge>no. \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - l\\<bar> < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>no.\n       \\<forall>n\\<ge>no.\n          \\<bar>(\\<Sum>k\\<le>n.\n                    Fourier_coefficient f k * trigonometric_set k t) -\n                l\\<bar>\n          < e", "proof (intro exI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?no \\<le> n \\<Longrightarrow>\n       \\<bar>(\\<Sum>k\\<le>n.\n                 Fourier_coefficient f k * trigonometric_set k t) -\n             l\\<bar>\n       < e", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?no \\<le> n \\<Longrightarrow>\n       \\<bar>(\\<Sum>k\\<le>n.\n                 Fourier_coefficient f k * trigonometric_set k t) -\n             l\\<bar>\n       < e", "assume n: \"N1 + 2*N2 + 1 \\<le> n\""], ["proof (state)\nthis:\n  N1 + 2 * N2 + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?no \\<le> n \\<Longrightarrow>\n       \\<bar>(\\<Sum>k\\<le>n.\n                 Fourier_coefficient f k * trigonometric_set k t) -\n             l\\<bar>\n       < e", "then"], ["proof (chain)\npicking this:\n  N1 + 2 * N2 + 1 \\<le> n", "have \"n \\<ge> N1\" \"n \\<ge> N2\" \"n div 2 \\<ge> N2\""], ["proof (prove)\nusing this:\n  N1 + 2 * N2 + 1 \\<le> n\n\ngoal (1 subgoal):\n 1. N1 \\<le> n &&& N2 \\<le> n &&& N2 \\<le> n div 2", "by linarith+"], ["proof (state)\nthis:\n  N1 \\<le> n\n  N2 \\<le> n\n  N2 \\<le> n div 2\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?no \\<le> n \\<Longrightarrow>\n       \\<bar>(\\<Sum>k\\<le>n.\n                 Fourier_coefficient f k * trigonometric_set k t) -\n             l\\<bar>\n       < e", "consider \"n = 2 * (n div 2)\" | \"n = Suc(2 * (n div 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n = 2 * (n div 2) \\<Longrightarrow> thesis;\n     n = Suc (2 * (n div 2)) \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by linarith"], ["proof (state)\nthis:\n  \\<lbrakk>n = 2 * (n div 2) \\<Longrightarrow> ?thesis;\n   n = Suc (2 * (n div 2)) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?no \\<le> n \\<Longrightarrow>\n       \\<bar>(\\<Sum>k\\<le>n.\n                 Fourier_coefficient f k * trigonometric_set k t) -\n             l\\<bar>\n       < e", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>n = 2 * (n div 2) \\<Longrightarrow> ?thesis;\n   n = Suc (2 * (n div 2)) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"\\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - l\\<bar> < e\""], ["proof (prove)\nusing this:\n  \\<lbrakk>n = 2 * (n div 2) \\<Longrightarrow> ?thesis;\n   n = Suc (2 * (n div 2)) \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 2 * (n div 2) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e\n 2. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "case 1"], ["proof (state)\nthis:\n  n = 2 * (n div 2)\n\ngoal (2 subgoals):\n 1. n = 2 * (n div 2) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e\n 2. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "apply (subst 1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n              Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "using N2 [OF \\<open>n div 2 \\<ge> N2\\<close>]"], ["proof (prove)\nusing this:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n              Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "by linarith"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e\n\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "case 2"], ["proof (state)\nthis:\n  n = Suc (2 * (n div 2))\n\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "have \"\\<bar>(\\<Sum>k\\<le>2 * (n div 2). Fourier_coefficient f k * trigonometric_set k t) - l\\<bar> < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n              Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e / 2", "using N2 [OF \\<open>n div 2 \\<ge> N2\\<close>]"], ["proof (prove)\nusing this:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n              Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e / 2", "by linarith"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "moreover"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "have \"\\<bar>Fourier_coefficient f(Suc (2 * (n div 2))) * trigonometric_set (Suc (2 * (n div 2))) t\\<bar> < (e/2) * 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "have \"\\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1", "apply (simp add: trigonometric_set)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sin ((1 + real (n div 2)) * t)\\<bar> \\<le> sqrt pi", "using abs_sin_le_one sqrt_pi_ge1"], ["proof (prove)\nusing this:\n  \\<bar>sin ?x\\<bar> \\<le> 1\n  1 \\<le> sqrt pi\n\ngoal (1 subgoal):\n 1. \\<bar>sin ((1 + real (n div 2)) * t)\\<bar> \\<le> sqrt pi", "by (blast intro: order_trans)"], ["proof (state)\nthis:\n  \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "moreover"], ["proof (state)\nthis:\n  \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "have \"\\<bar>Fourier_coefficient f(Suc (2 * (n div 2)))\\<bar> < e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2", "using N1 \\<open>N1 \\<le> n\\<close>"], ["proof (prove)\nusing this:\n  N1 \\<le> ?n \\<Longrightarrow> \\<bar>Fourier_coefficient f ?n\\<bar> < e / 2\n  N1 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2", "by auto"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n          trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "unfolding abs_mult"], ["proof (prove)\nusing this:\n  \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar> \\<le> 1\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>Fourier_coefficient f (Suc (2 * (n div 2)))\\<bar> *\n    \\<bar>trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n    < e / 2 * 1", "by (meson abs_ge_zero le_less_trans mult_left_mono mult_less_iff1 zero_less_one)"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n        trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n  < e / 2 * 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n        trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n  < e / 2 * 1\n\ngoal (1 subgoal):\n 1. n = Suc (2 * (n div 2)) \\<Longrightarrow>\n    \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n        trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n  < e / 2 * 1", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e / 2\n  \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n        trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n  < e / 2 * 1\n\ngoal (1 subgoal):\n 1. \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n          l\\<bar>\n    < e", "apply (subst 2)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < e / 2;\n     \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n           trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n     < e / 2 * 1\\<rbrakk>\n    \\<Longrightarrow> \\<bar>(\\<Sum>k\\<le>Suc (2 * (n div 2)).\n                                Fourier_coefficient f k *\n                                trigonometric_set k t) -\n                            l\\<bar>\n                      < e", "unfolding sum.atMost_Suc"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n                       Fourier_coefficient f k * trigonometric_set k t) -\n                   l\\<bar>\n             < e / 2;\n     \\<bar>Fourier_coefficient f (Suc (2 * (n div 2))) *\n           trigonometric_set (Suc (2 * (n div 2))) t\\<bar>\n     < e / 2 * 1\\<rbrakk>\n    \\<Longrightarrow> \\<bar>(\\<Sum>k\\<le>2 * (n div 2).\n                                Fourier_coefficient f k *\n                                trigonometric_set k t) +\n                            Fourier_coefficient f (Suc (2 * (n div 2))) *\n                            trigonometric_set (Suc (2 * (n div 2))) t -\n                            l\\<bar>\n                      < e", "by linarith"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n        l\\<bar>\n  < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>no.\n     \\<forall>n\\<ge>no.\n        \\<bar>(\\<Sum>k\\<le>n.\n                  Fourier_coefficient f k * trigonometric_set k t) -\n              l\\<bar>\n        < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "assume ?rhs"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l \\<Longrightarrow>\n    (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l", "show ?lhs"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           dist\n            (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n            l\n           < r\n\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             dist\n              (\\<Sum>k\\<le>2 * n.\n                  Fourier_coefficient f k * trigonometric_set k t)\n              l\n             < r", "by (auto simp: elim!: imp_forward ex_forward)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Express Fourier sum in terms of the special expansion at the origin\\<close>"], ["", "lemma Fourier_sum_0:\n  \"(\\<Sum>k \\<le> n. Fourier_coefficient f k * trigonometric_set k 0) =\n     (\\<Sum>k \\<le> n div 2. Fourier_coefficient f(2*k) * trigonometric_set (2*k) 0)\"\n  (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "have \"?lhs = (\\<Sum>k = 2 * 0.. Suc (2 * (n div 2)). Fourier_coefficient f k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = 2 * 0..Suc (2 * (n div 2)).\n        Fourier_coefficient f k * trigonometric_set k 0)", "proof (rule sum.mono_neutral_left)"], ["proof (state)\ngoal (3 subgoals):\n 1. finite {2 * 0..Suc (2 * (n div 2))}\n 2. {..n} \\<subseteq> {2 * 0..Suc (2 * (n div 2))}\n 3. \\<forall>i\\<in>{2 * 0..Suc (2 * (n div 2))} - {..n}.\n       Fourier_coefficient f i * trigonometric_set i 0 = 0", "show \"\\<forall>i\\<in>{2 * 0..Suc (2 * (n div 2))} - {..n}. Fourier_coefficient f i * trigonometric_set i 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{2 * 0..Suc (2 * (n div 2))} - {..n}.\n       Fourier_coefficient f i * trigonometric_set i 0 = 0", "proof clarsimp"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "assume \"i \\<le> Suc (2 * (n div 2))\" \"\\<not> i \\<le> n\""], ["proof (state)\nthis:\n  i \\<le> Suc (2 * (n div 2))\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "then"], ["proof (chain)\npicking this:\n  i \\<le> Suc (2 * (n div 2))\n  \\<not> i \\<le> n", "have \"i = Suc n\" \"even n\""], ["proof (prove)\nusing this:\n  i \\<le> Suc (2 * (n div 2))\n  \\<not> i \\<le> n\n\ngoal (1 subgoal):\n 1. i = Suc n &&& even n", "by presburger+"], ["proof (state)\nthis:\n  i = Suc n\n  even n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "moreover"], ["proof (state)\nthis:\n  i = Suc n\n  even n\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "assume \"trigonometric_set i 0 \\<noteq> 0\""], ["proof (state)\nthis:\n  trigonometric_set i 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<le> Suc (2 * (n div 2)); \\<not> i \\<le> n;\n        trigonometric_set i 0 \\<noteq> 0\\<rbrakk>\n       \\<Longrightarrow> Fourier_coefficient f i = 0", "ultimately"], ["proof (chain)\npicking this:\n  i = Suc n\n  even n\n  trigonometric_set i 0 \\<noteq> 0", "show \"Fourier_coefficient f i = 0\""], ["proof (prove)\nusing this:\n  i = Suc n\n  even n\n  trigonometric_set i 0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f i = 0", "by (simp add: trigonometric_set_def)"], ["proof (state)\nthis:\n  Fourier_coefficient f i = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{2 * 0..Suc (2 * (n div 2))} - {..n}.\n     Fourier_coefficient f i * trigonometric_set i 0 = 0\n\ngoal (2 subgoals):\n 1. finite {2 * 0..Suc (2 * (n div 2))}\n 2. {..n} \\<subseteq> {2 * 0..Suc (2 * (n div 2))}", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = 2 * 0..Suc (2 * (n div 2)).\n      Fourier_coefficient f k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = 2 * 0..Suc (2 * (n div 2)).\n      Fourier_coefficient f k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "have \"\\<dots> = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 2 * 0..Suc (2 * (n div 2)).\n        Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "unfolding sum.in_pairs"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..n div 2.\n        Fourier_coefficient f (2 * i) * trigonometric_set (2 * i) 0 +\n        Fourier_coefficient f (Suc (2 * i)) *\n        trigonometric_set (Suc (2 * i)) 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "by (simp add: trigonometric_set atMost_atLeast0)"], ["proof (state)\nthis:\n  (\\<Sum>k = 2 * 0..Suc (2 * (n div 2)).\n      Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k\\<le>n div 2.\n      Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k\\<le>n div 2.\n      Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k\\<le>n div 2.\n      Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n div 2.\n        Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)", "."], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k\\<le>n div 2.\n      Fourier_coefficient f (2 * k) * trigonometric_set (2 * k) 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_0_explicit:\n  \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0)\n    = (Fourier_coefficient f 0 / sqrt 2 + (\\<Sum>k = 1..n div 2. Fourier_coefficient f(2*k))) / sqrt pi\"\n  (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "have \"(\\<Sum>k=0..n. Fourier_coefficient f k * trigonometric_set k 0)\n        = Fourier_coefficient f 0 * trigonometric_set 0 0 + (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0)", "by (simp add: Fourier_sum_0 sum.atLeast_Suc_atMost)"], ["proof (state)\nthis:\n  (\\<Sum>k = 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  Fourier_coefficient f 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  Fourier_coefficient f 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "have \"\\<dots> = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "have \"Fourier_coefficient f 0 * trigonometric_set 0 0 = Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 =\n    Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)", "by (simp add: real_sqrt_mult trigonometric_set(1))"], ["proof (state)\nthis:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 =\n  Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "moreover"], ["proof (state)\nthis:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 =\n  Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "have \"(\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) = (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f(2*k)) / sqrt pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) / sqrt pi", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<Sum>k = Suc 0..0. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..0 div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n 2. \\<And>n.\n       (\\<Sum>k = Suc 0..n.\n           Fourier_coefficient f k * trigonometric_set k 0) =\n       (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) /\n       sqrt pi \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..Suc n.\n           Fourier_coefficient f k * trigonometric_set k 0) =\n       (\\<Sum>k = Suc 0..Suc n div 2. Fourier_coefficient f (2 * k)) /\n       sqrt pi", "case (Suc n)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n\ngoal (2 subgoals):\n 1. (\\<Sum>k = Suc 0..0. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..0 div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n 2. \\<And>n.\n       (\\<Sum>k = Suc 0..n.\n           Fourier_coefficient f k * trigonometric_set k 0) =\n       (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) /\n       sqrt pi \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..Suc n.\n           Fourier_coefficient f k * trigonometric_set k 0) =\n       (\\<Sum>k = Suc 0..Suc n div 2. Fourier_coefficient f (2 * k)) /\n       sqrt pi", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc n.\n        Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..Suc n div 2. Fourier_coefficient f (2 * k)) / sqrt pi", "by (simp add: Suc) (auto simp: trigonometric_set_def field_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc n.\n      Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..Suc n div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..0. Fourier_coefficient f k * trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..0 div 2. Fourier_coefficient f (2 * k)) / sqrt pi", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "ultimately"], ["proof (chain)\npicking this:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 =\n  Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) / sqrt pi", "show ?thesis"], ["proof (prove)\nusing this:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 =\n  Fourier_coefficient f 0 / (sqrt 2 * sqrt pi)\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..n div 2. Fourier_coefficient f (2 * k)) / sqrt pi\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "by (simp add: add_divide_distrib)"], ["proof (state)\nthis:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (Fourier_coefficient f 0 / sqrt 2 +\n   (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n  sqrt pi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Fourier_coefficient f 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = 1..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (Fourier_coefficient f 0 / sqrt 2 +\n   (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n  sqrt pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k = 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (Fourier_coefficient f 0 / sqrt 2 +\n   (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n  sqrt pi", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = 0..n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (Fourier_coefficient f 0 / sqrt 2 +\n   (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n  sqrt pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi", "by (simp add: atMost_atLeast0)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (Fourier_coefficient f 0 / sqrt 2 +\n   (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n  sqrt pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_0_integrals:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n          (integral\\<^sup>L (lebesgue_on {-pi..pi}) f / 2 +\n           (\\<Sum>k = Suc 0..n div 2. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. cos(k * x) * f x))) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "have \"integral\\<^sup>L (lebesgue_on {-pi..pi}) f / (sqrt (2 * pi) * sqrt 2 * sqrt pi) = integral\\<^sup>L (lebesgue_on {-pi..pi}) f / (2 * pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n    (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n    integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)", "by (simp add: algebra_simps real_sqrt_mult)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n  (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "moreover"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n  (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "have \"(\\<Sum>k = Suc 0..n div 2. LINT x|lebesgue_on {-pi..pi}. trigonometric_set (2*k) x * f x) / sqrt pi\n               = (\\<Sum>k = Suc 0..n div 2. LINT x|lebesgue_on {-pi..pi}. cos (k * x) * f x) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. trigonometric_set (2 * k) x * f x) /\n    sqrt pi =\n    (\\<Sum>k = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x) /\n    pi", "by (simp add: trigonometric_set_def sum_divide_distrib)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. trigonometric_set (2 * k) x * f x) /\n  sqrt pi =\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x) /\n  pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "ultimately"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n  (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. trigonometric_set (2 * k) x * f x) /\n  sqrt pi =\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x) /\n  pi", "show ?thesis"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n  (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. trigonometric_set (2 * k) x * f x) /\n  sqrt pi =\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x) /\n  pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "unfolding Fourier_sum_0_explicit"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f /\n  (sqrt (2 * pi) * sqrt 2 * sqrt pi) =\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / (2 * pi)\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. trigonometric_set (2 * k) x * f x) /\n  sqrt pi =\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x) /\n  pi\n\ngoal (1 subgoal):\n 1. (Fourier_coefficient f 0 / sqrt 2 +\n     (\\<Sum>k = 1..n div 2. Fourier_coefficient f (2 * k))) /\n    sqrt pi =\n    (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n     (\\<Sum>k = Suc 0..n div 2.\n         LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n    pi", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def l2product_def trigonometric_set add_divide_distrib)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n   (\\<Sum>k = Suc 0..n div 2.\n       LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f x)) /\n  pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_0_integral:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n       integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. (1/2 + (\\<Sum>k = Suc 0..n div 2. cos(k * x))) * f x) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "note * = Fourier_products_integrable_cos [OF assms]"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (?k * x) * f x)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "have \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))", "using *"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (?k * x) * f x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))", "by (force simp: mult_ac)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "moreover"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "have \"integral\\<^sup>L (lebesgue_on {-pi..pi}) f / 2 + (\\<Sum>k = Suc 0..n div 2. LINT x|lebesgue_on {-pi..pi}. f x * cos (x * real k))\n               = (LINT x|lebesgue_on {-pi..pi}. f x / 2) + (LINT x|lebesgue_on {-pi..pi}. (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n    (\\<Sum>k = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n    (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))", "proof (subst Bochner_Integration.integral_sum)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> {Suc 0..n div 2} \\<Longrightarrow>\n       integrable (lebesgue_on {- pi..pi})\n        (\\<lambda>x. f x * cos (x * real i))\n 2. integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n    (\\<Sum>k = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n    (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n    (\\<Sum>i = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real i))", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. f x * cos (x * real i))\"\n      if \"i \\<in> {Suc 0..n div 2}\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. f x * cos (x * real i))", "using that * [of i]"], ["proof (prove)\nusing this:\n  i \\<in> {Suc 0..n div 2}\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (real i * x) * f x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. f x * cos (x * real i))", "by (auto simp: Bochner_Integration.integral_sum mult_ac)"], ["proof (state)\nthis:\n  ?i \\<in> {Suc 0..n div 2} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. f x * cos (x * real ?i))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n    (\\<Sum>k = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n    (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n    (\\<Sum>i = Suc 0..n div 2.\n        LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real i))", "qed auto"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n  (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n  (LINT x|lebesgue_on {- pi..pi}.\n      (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "ultimately"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n  (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n  (LINT x|lebesgue_on {- pi..pi}.\n      (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n  (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n  (LINT x|lebesgue_on {- pi..pi}.\n      (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "using Fourier_products_integrable_cos [OF assms] absolutely_integrable_imp_integrable [OF assms]"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>n = Suc 0..n div 2. f x * cos (x * real n))\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) f / 2 +\n  (\\<Sum>k = Suc 0..n div 2.\n      LINT x|lebesgue_on {- pi..pi}. f x * cos (x * real k)) =\n  (LINT x|lebesgue_on {- pi..pi}. f x / 2) +\n  (LINT x|lebesgue_on {- pi..pi}.\n      (\\<Sum>n = Suc 0..n div 2. f x * cos (x * real n)))\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (?k * x) * f x)\n  {- pi..pi} \\<in> sets lebesgue \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi}) f\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n    pi", "by (simp add: Fourier_sum_0_integrals sum_distrib_left assms algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k 0) =\n  (LINT x|lebesgue_on {- pi..pi}.\n      (1 / 2 + (\\<Sum>k = Suc 0..n div 2. cos (real k * x))) * f x) /\n  pi\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>How Fourier coefficients behave under addition etc\\<close>"], ["", "lemma Fourier_coefficient_add:\n  assumes \"f absolutely_integrable_on {-pi..pi}\" \"g absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. f x + g x) i =\n                Fourier_coefficient f i + Fourier_coefficient g i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x + g x) i =\n    Fourier_coefficient f i + Fourier_coefficient g i", "using assms trigonometric_set_mul_integrable"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  g absolutely_integrable_on {- pi..pi}\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set ?n x * ?f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x + g x) i =\n    Fourier_coefficient f i + Fourier_coefficient g i", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def l2product_def distrib_left)"], ["", "lemma Fourier_coefficient_minus:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. - f x) i = - Fourier_coefficient f i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. - f x) i = - Fourier_coefficient f i", "using assms trigonometric_set_mul_integrable"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. trigonometric_set ?n x * ?f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. - f x) i = - Fourier_coefficient f i", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def l2product_def)"], ["", "lemma Fourier_coefficient_diff:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and g: \"g absolutely_integrable_on {-pi..pi}\"\n  shows \"Fourier_coefficient (\\<lambda>x. f x - g x) i = Fourier_coefficient f i - Fourier_coefficient g i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - g x) i =\n    Fourier_coefficient f i - Fourier_coefficient g i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - g x) i =\n    Fourier_coefficient f i - Fourier_coefficient g i", "have mg: \"(\\<lambda>x. - g x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. - g x) absolutely_integrable_on {- pi..pi}", "using g"], ["proof (prove)\nusing this:\n  g absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. - g x) absolutely_integrable_on {- pi..pi}", "by (simp add: absolutely_integrable_measurable_real)"], ["proof (state)\nthis:\n  (\\<lambda>x. - g x) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - g x) i =\n    Fourier_coefficient f i - Fourier_coefficient g i", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - g x) i =\n    Fourier_coefficient f i - Fourier_coefficient g i", "using Fourier_coefficient_add [OF f mg] Fourier_coefficient_minus [OF g]"], ["proof (prove)\nusing this:\n  Fourier_coefficient (\\<lambda>x. f x + - g x) ?i =\n  Fourier_coefficient f ?i + Fourier_coefficient (\\<lambda>x. - g x) ?i\n  Fourier_coefficient (\\<lambda>x. - g x) ?i = - Fourier_coefficient g ?i\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - g x) i =\n    Fourier_coefficient f i - Fourier_coefficient g i", "by simp"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f x - g x) i =\n  Fourier_coefficient f i - Fourier_coefficient g i\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_coefficient_const:\n   \"Fourier_coefficient (\\<lambda>x. c) i = (if i = 0 then c * sqrt(2 * pi) else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. c) i =\n    (if i = 0 then c * sqrt (2 * pi) else 0)", "by (auto simp: Fourier_coefficient_def orthonormal_coeff_def l2product_def trigonometric_set_def divide_simps measure_restrict_space)"], ["", "lemma Fourier_offset_term:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"Fourier_coefficient (\\<lambda>x. f(x+t)) (2 * n + 2) * trigonometric_set (2 * n + 2) 0\n        = Fourier_coefficient f(2 * n+1) * trigonometric_set (2 * n+1) t\n        + Fourier_coefficient f(2 * n + 2) * trigonometric_set (2 * n + 2) t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have eq: \"(2 + 2 * real n) * x / 2 = (1 + real n) * x\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (2 + 2 * real n) * x / 2 = (1 + real n) * x", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  (2 + 2 * real n) * ?x / 2 = (1 + real n) * ?x\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have 1: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. f x * (cos (x + x * n) * cos (t + t * n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. f x * (cos (x + x * real n) * cos (t + t * real n)))", "using Fourier_products_integrable_cos [of f \"Suc n\"] f"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * x) * f x)\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. f x * (cos (x + x * real n) * cos (t + t * real n)))", "by (simp add: algebra_simps) (simp add: mult.assoc [symmetric])"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. f x * (cos (x + x * real n) * cos (t + t * real n)))\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have 2: \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. f x * (sin (x + x * n) * sin (t + t * n)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. f x * (sin (x + x * real n) * sin (t + t * real n)))", "using Fourier_products_integrable_sin [of f \"Suc n\"] f"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. sin (real (Suc n) * x) * f x)\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. f x * (sin (x + x * real n) * sin (t + t * real n)))", "by (simp add: algebra_simps) (simp add: mult.assoc [symmetric])"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. f x * (sin (x + x * real n) * sin (t + t * real n)))\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have \"has_bochner_integral (lebesgue_on {-pi..pi}) (\\<lambda>x. cos (real (Suc n) * (x + t - t)) * f(x + t))\n                 (LINT x|lebesgue_on {-pi..pi}. cos (real (Suc n) * (x - t)) * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>x. cos (real (Suc n) * (x + t - t)) * f (x + t))\n     (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)", "proof (rule has_integral_periodic_offset)"], ["proof (state)\ngoal (2 subgoals):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>a. cos (real (Suc n) * (a - t)) * f a)\n     (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n 2. \\<And>x.\n       cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n       cos (real (Suc n) * (x - t)) * f x", "have \"(\\<lambda>x. cos (real (Suc n) * (x - t)) * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        cos (real (Suc n) * (x - t)) * f x) absolutely_integrable_on\n    {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. cos (real (Suc n) * (x - t)))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. cos (real (Suc n) * (x - t))) ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"(\\<lambda>x. cos (real (Suc n) * (x - t))) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. cos (real (Suc n) * (x - t)))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (intro continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. cos (real (Suc n) * (x - t)))\n  \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. cos (real (Suc n) * (x - t))) ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "show \"bounded ((\\<lambda>x. cos (real (Suc n) * (x - t))) ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. cos (real (Suc n) * (x - t))) ` {- pi..pi})", "by (rule boundedI [where B=1]) auto"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. cos (real (Suc n) * (x - t))) ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (use f in auto)"], ["proof (state)\nthis:\n  (\\<lambda>x. cos (real (Suc n) * (x - t)) * f x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (2 subgoals):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>a. cos (real (Suc n) * (a - t)) * f a)\n     (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n 2. \\<And>x.\n       cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n       cos (real (Suc n) * (x - t)) * f x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. cos (real (Suc n) * (x - t)) * f x) absolutely_integrable_on\n  {- pi..pi}", "show \"has_bochner_integral (lebesgue_on {-pi..pi}) (\\<lambda>x. cos ((Suc n) * (x - t)) * f x) (LINT x|lebesgue_on {-pi..pi}. cos (real (Suc n) * (x - t)) * f x)\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. cos (real (Suc n) * (x - t)) * f x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>x. cos (real (Suc n) * (x - t)) * f x)\n     (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)", "by (simp add: has_bochner_integral_integrable integrable_restrict_space set_integrable_def)"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * (x - t)) * f x)\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n       cos (real (Suc n) * (x - t)) * f x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n       cos (real (Suc n) * (x - t)) * f x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n       cos (real (Suc n) * (x - t)) * f x", "show \"cos (real (Suc n) * (x + (pi - - pi) - t)) * f(x + (pi - - pi)) = cos (real (Suc n) * (x - t)) * f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n    cos (real (Suc n) * (x - t)) * f x", "using periodic cos.plus_of_nat [of \"(Suc n) * (x - t)\" \"Suc n\"]"], ["proof (prove)\nusing this:\n  f (?x + 2 * pi) = f ?x\n  cos (real (Suc n) * (x - t) + real (Suc n) * (2 * of_real pi)) =\n  cos (real (Suc n) * (x - t))\n\ngoal (1 subgoal):\n 1. cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n    cos (real (Suc n) * (x - t)) * f x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  cos (real (Suc n) * (x + (pi - - pi) - t)) * f (x + (pi - - pi)) =\n  cos (real (Suc n) * (x - t)) * f x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * (x + t - t)) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "then"], ["proof (chain)\npicking this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * (x + t - t)) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)", "have \"has_bochner_integral (lebesgue_on {-pi..pi}) (\\<lambda>x. cos (real (Suc n) * x) * f(x + t))\n                 (LINT x|lebesgue_on {-pi..pi}. cos (real (Suc n) * (x - t)) * f x)\""], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * (x + t - t)) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>x. cos (real (Suc n) * x) * f (x + t))\n     (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)", "by simp"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * x) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "then"], ["proof (chain)\npicking this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * x) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)", "have \"LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * x) * f(x+t)\n           = LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * (x - t)) * f x\""], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * x) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n    LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x", "using has_bochner_integral_integral_eq"], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. cos (real (Suc n) * x) * f (x + t))\n   (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x)\n  has_bochner_integral ?M ?f ?x \\<Longrightarrow>\n  integral\\<^sup>L ?M ?f = ?x\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n    LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x", "by blast"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have \"\\<dots> = LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * x - ((Suc n) * t)) * f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x =\n    LINT x|lebesgue_on {- pi..pi}.\n       cos (real (Suc n) * x - real (Suc n) * t) * f x", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x =\n  LINT x|lebesgue_on {- pi..pi}.\n     cos (real (Suc n) * x - real (Suc n) * t) * f x\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * (x - t)) * f x =\n  LINT x|lebesgue_on {- pi..pi}.\n     cos (real (Suc n) * x - real (Suc n) * t) * f x\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "have \"\\<dots> = cos ((Suc n) * t) * (LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * x) * f x)\n                 + sin ((Suc n) * t) * (LINT x|lebesgue_on {-pi..pi}. sin ((Suc n) * x) * f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       cos (real (Suc n) * x - real (Suc n) * t) * f x =\n    cos (real (Suc n) * t) *\n    (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n    sin (real (Suc n) * t) *\n    (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)", "by (simp add: cos_diff algebra_simps 1 2 flip: integral_mult_left_zero integral_mult_right_zero)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     cos (real (Suc n) * x - real (Suc n) * t) * f x =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "finally"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)", "have \"LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * x) * f(x+t)\n        = cos ((Suc n) * t) * (LINT x|lebesgue_on {-pi..pi}. cos ((Suc n) * x) * f x)\n        + sin ((Suc n) * t) * (LINT x|lebesgue_on {-pi..pi}. sin ((Suc n) * x) * f x)\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n    cos (real (Suc n) * t) *\n    (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n    sin (real (Suc n) * t) *\n    (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)", "."], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "then"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n    trigonometric_set (2 * n + 2) 0 =\n    Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n    Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t", "unfolding Fourier_coefficient_def orthonormal_coeff_def trigonometric_set_def"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f (x + t) =\n  cos (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. cos (real (Suc n) * x) * f x) +\n  sin (real (Suc n) * t) *\n  (LINT x|lebesgue_on {- pi..pi}. sin (real (Suc n) * x) * f x)\n\ngoal (1 subgoal):\n 1. l2product {- pi..pi}\n     (if 2 * n + 2 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n      else if odd (2 * n + 2)\n           then \\<lambda>x.\n                   sin (real (Suc ((2 * n + 2) div 2)) * x) / sqrt pi\n           else (\\<lambda>x. cos (real (2 * n + 2) / 2 * x) / sqrt pi))\n     (\\<lambda>x. f (x + t)) *\n    (if 2 * n + 2 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n     else if odd (2 * n + 2)\n          then \\<lambda>x.\n                  sin (real (Suc ((2 * n + 2) div 2)) * x) / sqrt pi\n          else (\\<lambda>x. cos (real (2 * n + 2) / 2 * x) / sqrt pi))\n     0 =\n    l2product {- pi..pi}\n     (if 2 * n + 1 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n      else if odd (2 * n + 1)\n           then \\<lambda>x.\n                   sin (real (Suc ((2 * n + 1) div 2)) * x) / sqrt pi\n           else (\\<lambda>x. cos (real (2 * n + 1) / 2 * x) / sqrt pi))\n     f *\n    (if 2 * n + 1 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n     else if odd (2 * n + 1)\n          then \\<lambda>x.\n                  sin (real (Suc ((2 * n + 1) div 2)) * x) / sqrt pi\n          else (\\<lambda>x. cos (real (2 * n + 1) / 2 * x) / sqrt pi))\n     t +\n    l2product {- pi..pi}\n     (if 2 * n + 2 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n      else if odd (2 * n + 2)\n           then \\<lambda>x.\n                   sin (real (Suc ((2 * n + 2) div 2)) * x) / sqrt pi\n           else (\\<lambda>x. cos (real (2 * n + 2) / 2 * x) / sqrt pi))\n     f *\n    (if 2 * n + 2 = 0 then \\<lambda>x. 1 / sqrt (2 * pi)\n     else if odd (2 * n + 2)\n          then \\<lambda>x.\n                  sin (real (Suc ((2 * n + 2) div 2)) * x) / sqrt pi\n          else (\\<lambda>x. cos (real (2 * n + 2) / 2 * x) / sqrt pi))\n     t", "by (simp add: eq) (simp add: divide_simps algebra_simps l2product_def)"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * n + 2) *\n  trigonometric_set (2 * n + 2) 0 =\n  Fourier_coefficient f (2 * n + 1) * trigonometric_set (2 * n + 1) t +\n  Fourier_coefficient f (2 * n + 2) * trigonometric_set (2 * n + 2) t\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_offset:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n          (\\<Sum>k\\<le>2*n. Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\" (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "have \"?lhs = Fourier_coefficient f 0 * trigonometric_set 0 t + (\\<Sum>k = Suc 0..2*n. Fourier_coefficient f k * trigonometric_set k t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    Fourier_coefficient f 0 * trigonometric_set 0 t +\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t)", "by (simp add: atMost_atLeast0 sum.atLeast_Suc_atMost)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  Fourier_coefficient f 0 * trigonometric_set 0 t +\n  (\\<Sum>k = Suc 0..2 * n. Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  Fourier_coefficient f 0 * trigonometric_set 0 t +\n  (\\<Sum>k = Suc 0..2 * n. Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "have \"(\\<Sum>k = Suc 0..2*n. Fourier_coefficient f k * trigonometric_set k t) =\n                 (\\<Sum>k = Suc 0..2*n. Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "proof (cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "case (Suc n')"], ["proof (state)\nthis:\n  n = Suc n'\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "have \"(\\<Sum>k = Suc 0..2 * n. Fourier_coefficient f k * trigonometric_set k t)\n        = (\\<Sum>k = Suc 0.. Suc (Suc (2 * n')). Fourier_coefficient f k * trigonometric_set k t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient f k * trigonometric_set k t)", "by (simp add: Suc)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "have \"\\<dots> = (\\<Sum>k \\<le> Suc (2 * n'). Fourier_coefficient f(Suc k) * trigonometric_set (Suc k) t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>Suc (2 * n').\n        Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t)", "unfolding atMost_atLeast0"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = 0..Suc (2 * n').\n        Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t)", "using sum.shift_bounds_cl_Suc_ivl"], ["proof (prove)\nusing this:\n  sum ?g {Suc ?m..Suc ?n} = (\\<Sum>i = ?m..?n. ?g (Suc i))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = 0..Suc (2 * n').\n        Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t)", "by blast"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "have \"\\<dots> = (\\<Sum>k \\<le> Suc (2 * n'). Fourier_coefficient (\\<lambda>x. f(x+t)) (Suc k) * trigonometric_set (Suc k) 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>Suc (2 * n').\n        Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t) =\n    (\\<Sum>k\\<le>Suc (2 * n').\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n        trigonometric_set (Suc k) 0)", "unfolding sum.in_pairs_0"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i\\<le>n'.\n        Fourier_coefficient f (Suc (2 * i)) *\n        trigonometric_set (Suc (2 * i)) t +\n        Fourier_coefficient f (Suc (Suc (2 * i))) *\n        trigonometric_set (Suc (Suc (2 * i))) t) =\n    (\\<Sum>i\\<le>n'.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * i)) *\n        trigonometric_set (Suc (2 * i)) 0 +\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (Suc (2 * i))) *\n        trigonometric_set (Suc (Suc (2 * i))) 0)", "proof (rule sum.cong [OF refl])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {..n'} \\<Longrightarrow>\n       Fourier_coefficient f (Suc (2 * x)) *\n       trigonometric_set (Suc (2 * x)) t +\n       Fourier_coefficient f (Suc (Suc (2 * x))) *\n       trigonometric_set (Suc (Suc (2 * x))) t =\n       Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * x)) *\n       trigonometric_set (Suc (2 * x)) 0 +\n       Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (Suc (2 * x))) *\n       trigonometric_set (Suc (Suc (2 * x))) 0", "show \"Fourier_coefficient f(Suc (2 * k)) * trigonometric_set (Suc (2 * k)) t + Fourier_coefficient f(Suc (Suc (2 * k))) * trigonometric_set (Suc (Suc (2 * k))) t = Fourier_coefficient (\\<lambda>x. f(x + t)) (Suc (2 * k)) * trigonometric_set (Suc (2 * k)) 0 + Fourier_coefficient (\\<lambda>x. f(x + t)) (Suc (Suc (2 * k))) * trigonometric_set (Suc (Suc (2 * k))) 0\"\n        if \"k \\<in> {..n'}\" for k"], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient f (Suc (2 * k)) *\n    trigonometric_set (Suc (2 * k)) t +\n    Fourier_coefficient f (Suc (Suc (2 * k))) *\n    trigonometric_set (Suc (Suc (2 * k))) t =\n    Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n    trigonometric_set (Suc (2 * k)) 0 +\n    Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (Suc (2 * k))) *\n    trigonometric_set (Suc (Suc (2 * k))) 0", "using that Fourier_offset_term [OF assms, of t ]"], ["proof (prove)\nusing this:\n  k \\<in> {..n'}\n  Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * ?n + 2) *\n  trigonometric_set (2 * ?n + 2) 0 =\n  Fourier_coefficient f (2 * ?n + 1) * trigonometric_set (2 * ?n + 1) t +\n  Fourier_coefficient f (2 * ?n + 2) * trigonometric_set (2 * ?n + 2) t\n\ngoal (1 subgoal):\n 1. Fourier_coefficient f (Suc (2 * k)) *\n    trigonometric_set (Suc (2 * k)) t +\n    Fourier_coefficient f (Suc (Suc (2 * k))) *\n    trigonometric_set (Suc (Suc (2 * k))) t =\n    Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n    trigonometric_set (Suc (2 * k)) 0 +\n    Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (Suc (2 * k))) *\n    trigonometric_set (Suc (Suc (2 * k))) 0", "by (auto simp: trigonometric_set_def)"], ["proof (state)\nthis:\n  ?k \\<in> {..n'} \\<Longrightarrow>\n  Fourier_coefficient f (Suc (2 * ?k)) *\n  trigonometric_set (Suc (2 * ?k)) t +\n  Fourier_coefficient f (Suc (Suc (2 * ?k))) *\n  trigonometric_set (Suc (Suc (2 * ?k))) t =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * ?k)) *\n  trigonometric_set (Suc (2 * ?k)) 0 +\n  Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (Suc (2 * ?k))) *\n  trigonometric_set (Suc (Suc (2 * ?k))) 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t) =\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n      trigonometric_set (Suc k) 0)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient f (Suc k) * trigonometric_set (Suc k) t) =\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n      trigonometric_set (Suc k) 0)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "have \"\\<dots> = (\\<Sum>k = Suc 0..Suc (Suc (2 * n')). Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>Suc (2 * n').\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n        trigonometric_set (Suc k) 0) =\n    (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "by (simp only: atMost_atLeast0 sum.shift_bounds_cl_Suc_ivl)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n      trigonometric_set (Suc k) 0) =\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>Suc (2 * n').\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc k) *\n      trigonometric_set (Suc k) 0) =\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "have \"\\<dots> = (\\<Sum>k = Suc 0..2*n. Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "by (simp add: Suc)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc (Suc (2 * n')).\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n      trigonometric_set k 0) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient f k * trigonometric_set k t) =\n       (\\<Sum>k = Suc 0..2 * n.\n           Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n           trigonometric_set k 0)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "."], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "have \"?rhs\n           = Fourier_coefficient (\\<lambda>x. f(x+t)) 0 * trigonometric_set 0 0 + (\\<Sum>k = Suc 0..2*n. Fourier_coefficient (\\<lambda>x. f(x+t)) k * trigonometric_set k 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0) =\n    Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0 +\n    (\\<Sum>k = Suc 0..2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "by (simp add: atMost_atLeast0 sum.atLeast_Suc_atMost)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n      trigonometric_set k 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n      trigonometric_set k 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "have \"Fourier_coefficient f 0 * trigonometric_set 0 t\n               = Fourier_coefficient (\\<lambda>x. f(x+t)) 0 * trigonometric_set 0 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient f 0 * trigonometric_set 0 t =\n    Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def trigonometric_set_def l2product_def integral_periodic_offset periodic)"], ["proof (state)\nthis:\n  Fourier_coefficient f 0 * trigonometric_set 0 t =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  Fourier_coefficient f 0 * trigonometric_set 0 t +\n  (\\<Sum>k = Suc 0..2 * n. Fourier_coefficient f k * trigonometric_set k t)\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n  (\\<Sum>k\\<le>2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n      trigonometric_set k 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n  Fourier_coefficient f 0 * trigonometric_set 0 t =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  Fourier_coefficient f 0 * trigonometric_set 0 t +\n  (\\<Sum>k = Suc 0..2 * n. Fourier_coefficient f k * trigonometric_set k t)\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n  (\\<Sum>k\\<le>2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n      trigonometric_set k 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0 +\n  (\\<Sum>k = Suc 0..2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n  Fourier_coefficient f 0 * trigonometric_set 0 t =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 * trigonometric_set 0 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0)", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>2 * n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) k * trigonometric_set k 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_offset_unpaired:\n  fixes f :: \"real \\<Rightarrow> real\"\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows  \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n          (\\<Sum>k\\<le>n. Fourier_coefficient (\\<lambda>x. f(x+t)) (2*k) * trigonometric_set (2*k) 0)\"\n  (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "have \"?lhs = (\\<Sum>k\\<le>n. Fourier_coefficient (\\<lambda>x. f(x+t)) (2*k) *  trigonometric_set (2*k) 0 +\n                   Fourier_coefficient (\\<lambda>x. f(x+t)) (Suc (2*k)) * trigonometric_set (Suc (2*k)) 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0 +\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n        trigonometric_set (Suc (2 * k)) 0)", "apply (simp add: assms Fourier_sum_offset)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0 +\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n        trigonometric_set (Suc (2 * k)) 0)", "apply (subst sum.in_pairs_0 [symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) k *\n        trigonometric_set k 0) =\n    (\\<Sum>a\\<le>Suc (2 * n).\n        Fourier_coefficient (\\<lambda>x. f (x + t)) a *\n        trigonometric_set a 0)", "by (simp add: trigonometric_set)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0 +\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n      trigonometric_set (Suc (2 * k)) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0 +\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n      trigonometric_set (Suc (2 * k)) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "have \"\\<dots> = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0 +\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n        trigonometric_set (Suc (2 * k)) 0) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "by (auto simp: trigonometric_set)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0 +\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (Suc (2 * k)) *\n      trigonometric_set (Suc (2 * k)) 0) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "."], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Express partial sums using Dirichlet kernel\\<close>"], ["", "definition Dirichlet_kernel\n  where \"Dirichlet_kernel \\<equiv>\n           \\<lambda>n x. if x = 0 then real n + 1/2\n                          else sin((real n + 1/2) * x) / (2 * sin(x/2))\""], ["", "lemma Dirichlet_kernel_0 [simp]:\n   \"\\<bar>x\\<bar> < 2 * pi \\<Longrightarrow> Dirichlet_kernel 0 x = 1/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x\\<bar> < 2 * pi \\<Longrightarrow> Dirichlet_kernel 0 x = 1 / 2", "by (auto simp: Dirichlet_kernel_def sin_zero_iff)"], ["", "lemma Dirichlet_kernel_minus [simp]: \"Dirichlet_kernel n (-x) = Dirichlet_kernel n x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Dirichlet_kernel n (- x) = Dirichlet_kernel n x", "by (auto simp: Dirichlet_kernel_def)"], ["", "lemma Dirichlet_kernel_continuous_strong:\n   \"continuous_on {-(2 * pi)<..<2 * pi} (Dirichlet_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Dirichlet_kernel n)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Dirichlet_kernel n)", "have \"isCont (Dirichlet_kernel n) z\" if \"-(2 * pi) < z\" \"z < 2 * pi\" for z"], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont (Dirichlet_kernel n) z", "proof (cases \"z=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. z = 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z\n 2. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "case True"], ["proof (state)\nthis:\n  z = 0\n\ngoal (2 subgoals):\n 1. z = 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z\n 2. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "have *: \"(\\<lambda>x. sin ((n + 1/2) * x) / (2 * sin (x/2))) \\<midarrow>0 \\<rightarrow> real n + 1/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)))\n    \\<midarrow>0\\<rightarrow> real n + 1 / 2", "by real_asymp"], ["proof (state)\nthis:\n  (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) \\<midarrow>0\n  \\<rightarrow> real n + 1 / 2\n\ngoal (2 subgoals):\n 1. z = 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z\n 2. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont (Dirichlet_kernel n) z", "unfolding Dirichlet_kernel_def continuous_at True"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x = 0 then real n + 1 / 2\n        else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)))\n    \\<midarrow>0\n    \\<rightarrow> (if 0 = 0 then real n + 1 / 2\n                   else sin ((real n + 1 / 2) * 0) / (2 * sin (0 / 2)))", "apply (rule Lim_transform_eventually [where f = \"\\<lambda>x. sin((n + 1/2) * x) / (2 * sin(x/2))\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)))\n    \\<midarrow>0\n    \\<rightarrow> (if 0 = 0 then real n + 1 / 2\n                   else sin ((real n + 1 / 2) * 0) / (2 * sin (0 / 2)))\n 2. \\<forall>\\<^sub>F x in at 0.\n       sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n       (if x = 0 then real n + 1 / 2\n        else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)))", "apply (auto simp: * eventually_at_filter)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  isCont (Dirichlet_kernel n) z\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "case False"], ["proof (state)\nthis:\n  z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "have \"continuous (at z) (\\<lambda>x. sin((real n + 1/2) * x) / (2 * sin(x/2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z", "using that False"], ["proof (prove)\nusing this:\n  - (2 * pi) < z\n  z < 2 * pi\n  z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z", "by (intro continuous_intros) (auto simp: sin_zero_iff)"], ["proof (state)\nthis:\n  isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "moreover"], ["proof (state)\nthis:\n  isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "have \"\\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0", "using False t1_space_nhds"], ["proof (prove)\nusing this:\n  z \\<noteq> 0\n  ?x \\<noteq> ?y \\<Longrightarrow>\n  \\<forall>\\<^sub>F x in nhds ?x. x \\<noteq> ?y\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0", "by blast"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. z \\<noteq> 0 \\<Longrightarrow> isCont (Dirichlet_kernel n) z", "ultimately"], ["proof (chain)\npicking this:\n  isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z\n  \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z\n  \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. isCont (Dirichlet_kernel n) z", "using False"], ["proof (prove)\nusing this:\n  isCont (\\<lambda>x. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) z\n  \\<forall>\\<^sub>F x in nhds z. x \\<noteq> 0\n  z \\<noteq> 0\n\ngoal (1 subgoal):\n 1. isCont (Dirichlet_kernel n) z", "by (force simp: Dirichlet_kernel_def continuous_at eventually_at_filter elim: Lim_transform_eventually)"], ["proof (state)\nthis:\n  isCont (Dirichlet_kernel n) z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>- (2 * pi) < ?z; ?z < 2 * pi\\<rbrakk>\n  \\<Longrightarrow> isCont (Dirichlet_kernel n) ?z\n\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Dirichlet_kernel n)", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>- (2 * pi) < ?z; ?z < 2 * pi\\<rbrakk>\n  \\<Longrightarrow> isCont (Dirichlet_kernel n) ?z", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>- (2 * pi) < ?z; ?z < 2 * pi\\<rbrakk>\n  \\<Longrightarrow> isCont (Dirichlet_kernel n) ?z\n\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Dirichlet_kernel n)", "by (simp add: continuous_on_eq_continuous_at)"], ["proof (state)\nthis:\n  continuous_on {- (2 * pi)<..<2 * pi} (Dirichlet_kernel n)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Dirichlet_kernel_continuous: \"continuous_on {-pi..pi} (Dirichlet_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi} (Dirichlet_kernel n)", "apply (rule continuous_on_subset [OF Dirichlet_kernel_continuous_strong], clarsimp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>- pi \\<le> x; x \\<le> pi\\<rbrakk>\n       \\<Longrightarrow> - (2 * pi) < x \\<and> x < 2 * pi", "using pi_gt_zero"], ["proof (prove)\nusing this:\n  0 < pi\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>- pi \\<le> x; x \\<le> pi\\<rbrakk>\n       \\<Longrightarrow> - (2 * pi) < x \\<and> x < 2 * pi", "by linarith"], ["", "lemma absolutely_integrable_mult_Dirichlet_kernel:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f x) absolutely_integrable_on\n    {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. Dirichlet_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded (Dirichlet_kernel n ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"Dirichlet_kernel n \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Dirichlet_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (simp add: Dirichlet_kernel_continuous continuous_imp_measurable_on_sets_lebesgue)"], ["proof (state)\nthis:\n  Dirichlet_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded (Dirichlet_kernel n ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "have \"compact (Dirichlet_kernel n ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. compact (Dirichlet_kernel n ` {- pi..pi})", "by (auto simp: compact_continuous_image [OF Dirichlet_kernel_continuous])"], ["proof (state)\nthis:\n  compact (Dirichlet_kernel n ` {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded (Dirichlet_kernel n ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  compact (Dirichlet_kernel n ` {- pi..pi})", "show \"bounded (Dirichlet_kernel n ` {-pi..pi})\""], ["proof (prove)\nusing this:\n  compact (Dirichlet_kernel n ` {- pi..pi})\n\ngoal (1 subgoal):\n 1. bounded (Dirichlet_kernel n ` {- pi..pi})", "using compact_imp_bounded"], ["proof (prove)\nusing this:\n  compact (Dirichlet_kernel n ` {- pi..pi})\n  compact ?U \\<Longrightarrow> bounded ?U\n\ngoal (1 subgoal):\n 1. bounded (Dirichlet_kernel n ` {- pi..pi})", "by blast"], ["proof (state)\nthis:\n  bounded (Dirichlet_kernel n ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (use assms in auto)"], ["", "lemma cosine_sum_lemma:\n   \"(1/2 + (\\<Sum>k = Suc 0..n. cos(real k * x))) * sin(x/2) =  sin((real n + 1/2) * x) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "consider \"n=0\" | \"n \\<ge> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n = 0 \\<Longrightarrow> thesis;\n     1 \\<le> n \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by linarith"], ["proof (state)\nthis:\n  \\<lbrakk>n = 0 \\<Longrightarrow> ?thesis;\n   1 \\<le> n \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>n = 0 \\<Longrightarrow> ?thesis;\n   1 \\<le> n \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>n = 0 \\<Longrightarrow> ?thesis;\n   1 \\<le> n \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2\n 2. 1 \\<le> n \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "case 2"], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2\n 2. 1 \\<le> n \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "then"], ["proof (chain)\npicking this:\n  1 \\<le> n", "have \"(\\<Sum>k = Suc 0..n. (sin (real k * x + x/2) * 2 - sin (real k * x - x/2) * 2) / 2)\n        = sin (real n * x + x/2) - sin (x/2)\""], ["proof (prove)\nusing this:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real n * x + x / 2) - sin (x / 2)", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. 1 \\<le> 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..0.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real 0 * x + x / 2) - sin (x / 2)\n 2. \\<And>n.\n       \\<lbrakk>1 \\<le> n \\<Longrightarrow>\n                (\\<Sum>k = Suc 0..n.\n                    (sin (real k * x + x / 2) * 2 -\n                     sin (real k * x - x / 2) * 2) /\n                    2) =\n                sin (real n * x + x / 2) - sin (x / 2);\n        1 \\<le> Suc n\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>k = Suc 0..Suc n.\n                             (sin (real k * x + x / 2) * 2 -\n                              sin (real k * x - x / 2) * 2) /\n                             2) =\n                         sin (real (Suc n) * x + x / 2) - sin (x / 2)", "case (Suc n)"], ["proof (state)\nthis:\n  1 \\<le> n \\<Longrightarrow>\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)\n  1 \\<le> Suc n\n\ngoal (2 subgoals):\n 1. 1 \\<le> 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..0.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real 0 * x + x / 2) - sin (x / 2)\n 2. \\<And>n.\n       \\<lbrakk>1 \\<le> n \\<Longrightarrow>\n                (\\<Sum>k = Suc 0..n.\n                    (sin (real k * x + x / 2) * 2 -\n                     sin (real k * x - x / 2) * 2) /\n                    2) =\n                sin (real n * x + x / 2) - sin (x / 2);\n        1 \\<le> Suc n\\<rbrakk>\n       \\<Longrightarrow> (\\<Sum>k = Suc 0..Suc n.\n                             (sin (real k * x + x / 2) * 2 -\n                              sin (real k * x - x / 2) * 2) /\n                             2) =\n                         sin (real (Suc n) * x + x / 2) - sin (x / 2)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)", "proof (cases \"n=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)", "case False"], ["proof (state)\nthis:\n  n \\<noteq> 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)", "with Suc"], ["proof (chain)\npicking this:\n  1 \\<le> n \\<Longrightarrow>\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)\n  1 \\<le> Suc n\n  n \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  1 \\<le> n \\<Longrightarrow>\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)\n  1 \\<le> Suc n\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)", "by (simp add: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real (Suc n) * x + x / 2) - sin (x / 2)\n\ngoal (1 subgoal):\n 1. n = 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..Suc n.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real (Suc n) * x + x / 2) - sin (x / 2)", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..Suc n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real (Suc n) * x + x / 2) - sin (x / 2)\n\ngoal (1 subgoal):\n 1. 1 \\<le> 0 \\<Longrightarrow>\n    (\\<Sum>k = Suc 0..0.\n        (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n    sin (real 0 * x + x / 2) - sin (x / 2)", "qed auto"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2\n 2. 1 \\<le> n \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "then"], ["proof (chain)\npicking this:\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = Suc 0..n.\n      (sin (real k * x + x / 2) * 2 - sin (real k * x - x / 2) * 2) / 2) =\n  sin (real n * x + x / 2) - sin (x / 2)\n\ngoal (1 subgoal):\n 1. (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "by (simp add: distrib_right sum_distrib_right cos_times_sin)"], ["proof (state)\nthis:\n  (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n  sin ((real n + 1 / 2) * x) / 2\n\ngoal (1 subgoal):\n 1. n = 0 \\<Longrightarrow>\n    (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n    sin ((real n + 1 / 2) * x) / 2", "qed auto"], ["proof (state)\nthis:\n  (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n  sin ((real n + 1 / 2) * x) / 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Dirichlet_kernel_cosine_sum:\n  assumes \"\\<bar>x\\<bar> < 2 * pi\"\n  shows \"Dirichlet_kernel n x = 1/2 + (\\<Sum>k = Suc 0..n. cos(real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x = 1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x = 1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "have \"sin ((real n + 1/2) * x) / (2 * sin (x/2)) = 1/2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\"\n    if \"x \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n    1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n    1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "have \"sin(x/2) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sin (x / 2) \\<noteq> 0", "using assms that"], ["proof (prove)\nusing this:\n  \\<bar>x\\<bar> < 2 * pi\n  x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sin (x / 2) \\<noteq> 0", "by (auto simp: sin_zero_iff)"], ["proof (state)\nthis:\n  sin (x / 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n    1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "then"], ["proof (chain)\npicking this:\n  sin (x / 2) \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  sin (x / 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n    1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "using cosine_sum_lemma [of x n]"], ["proof (prove)\nusing this:\n  sin (x / 2) \\<noteq> 0\n  (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n  sin ((real n + 1 / 2) * x) / 2\n\ngoal (1 subgoal):\n 1. sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n    1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n  1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<noteq> 0 \\<Longrightarrow>\n  sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n  1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x = 1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "then"], ["proof (chain)\npicking this:\n  x \\<noteq> 0 \\<Longrightarrow>\n  sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n  1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> 0 \\<Longrightarrow>\n  sin ((real n + 1 / 2) * x) / (2 * sin (x / 2)) =\n  1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x = 1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "by (auto simp: Dirichlet_kernel_def)"], ["proof (state)\nthis:\n  Dirichlet_kernel n x = 1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma integrable_Dirichlet_kernel: \"integrable (lebesgue_on {-pi..pi}) (Dirichlet_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (Dirichlet_kernel n)", "using Dirichlet_kernel_continuous continuous_imp_integrable_real"], ["proof (prove)\nusing this:\n  continuous_on {- pi..pi} (Dirichlet_kernel ?n)\n  continuous_on {?a..?b} ?f \\<Longrightarrow>\n  integrable (lebesgue_on {?a..?b}) ?f\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (Dirichlet_kernel n)", "by blast"], ["", "lemma integral_Dirichlet_kernel [simp]:\n  \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (Dirichlet_kernel n) = pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "have \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (Dirichlet_kernel n) = LINT x|lebesgue_on {-pi..pi}. 1/2 + (\\<Sum>k = Suc 0..n. cos (k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) =\n    LINT x|lebesgue_on {- pi..pi}.\n       1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "using pi_ge_two"], ["proof (prove)\nusing this:\n  2 \\<le> pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) =\n    LINT x|lebesgue_on {- pi..pi}.\n       1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))", "by (force intro: Bochner_Integration.integral_cong [OF refl Dirichlet_kernel_cosine_sum])"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) =\n  LINT x|lebesgue_on {- pi..pi}.\n     1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "also"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) =\n  LINT x|lebesgue_on {- pi..pi}.\n     1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "have \"\\<dots> = (LINT x|lebesgue_on {-pi..pi}. 1/2) + (LINT x|lebesgue_on {-pi..pi}. (\\<Sum>k = Suc 0..n. cos (k * x)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x)) =\n    (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)))", "proof (rule Bochner_Integration.integral_add)"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. 1 / 2)\n 2. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. \\<Sum>k = Suc 0..n. cos (real k * x))", "show \"integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. \\<Sum>k = Suc 0..n. cos (real k * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi})\n     (\\<lambda>x. \\<Sum>k = Suc 0..n. cos (real k * x))", "by (rule Bochner_Integration.integrable_sum) (metis integrable_cos_cx mult_commute_abs)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {- pi..pi})\n   (\\<lambda>x. \\<Sum>k = Suc 0..n. cos (real k * x))\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. 1 / 2)", "qed auto"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x)) =\n  (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n  (LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x)) =\n  (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n  (LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "have \"\\<dots> = pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    pi", "have \"\\<And>i. \\<lbrakk>Suc 0 \\<le> i; i \\<le> n\\<rbrakk>\n         \\<Longrightarrow> integrable (lebesgue_on {-pi..pi}) (\\<lambda>x. cos (real i * x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>Suc 0 \\<le> i; i \\<le> n\\<rbrakk>\n       \\<Longrightarrow> integrable (lebesgue_on {- pi..pi})\n                          (\\<lambda>x. cos (real i * x))", "by (metis integrable_cos_cx mult_commute_abs)"], ["proof (state)\nthis:\n  \\<lbrakk>Suc 0 \\<le> ?i; ?i \\<le> n\\<rbrakk>\n  \\<Longrightarrow> integrable (lebesgue_on {- pi..pi})\n                     (\\<lambda>x. cos (real ?i * x))\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    pi", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>Suc 0 \\<le> ?i; ?i \\<le> n\\<rbrakk>\n  \\<Longrightarrow> integrable (lebesgue_on {- pi..pi})\n                     (\\<lambda>x. cos (real ?i * x))", "have \"LINT x|lebesgue_on {-pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)) = 0\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Suc 0 \\<le> ?i; ?i \\<le> n\\<rbrakk>\n  \\<Longrightarrow> integrable (lebesgue_on {- pi..pi})\n                     (\\<lambda>x. cos (real ?i * x))\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)) =\n    0", "by (simp add: Bochner_Integration.integral_sum)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)) = 0\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    pi", "then"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x)) = 0\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n    (LINT x|lebesgue_on {- pi..pi}.\n        (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    pi", "by (auto simp: measure_restrict_space)"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n  (LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n  pi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. 1 / 2) +\n  (LINT x|lebesgue_on {- pi..pi}. (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n  pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "finally"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "show ?thesis"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi", "."], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel n) = pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma integral_Dirichlet_kernel_half [simp]:\n  \"integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "have \"integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n        integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n    integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n    pi", "using integral_combine [OF integrable_Dirichlet_kernel] integral_Dirichlet_kernel"], ["proof (prove)\nusing this:\n  \\<lbrakk>- pi \\<le> ?c; ?c \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> integral\\<^sup>L (lebesgue_on {- pi..pi})\n                     (Dirichlet_kernel ?n1) =\n                    integral\\<^sup>L (lebesgue_on {- pi..?c})\n                     (Dirichlet_kernel ?n1) +\n                    integral\\<^sup>L (lebesgue_on {?c..pi})\n                     (Dirichlet_kernel ?n1)\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (Dirichlet_kernel ?n) = pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n    integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n    pi", "by simp"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n  pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "moreover"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n  pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "have \"integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) = integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) =\n    integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)", "using integral_reflect_real [of pi 0 \"Dirichlet_kernel n\"]"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..- 0}. Dirichlet_kernel n (- x) =\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) =\n    integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)", "by simp"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) =\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "ultimately"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n  pi\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) =\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)", "show ?thesis"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) +\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) =\n  pi\n  integral\\<^sup>L (lebesgue_on {- pi..0}) (Dirichlet_kernel n) =\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2", "by simp"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Dirichlet_kernel n) = pi / 2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_offset_Dirichlet_kernel:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows\n   \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) =\n            integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * f(x+t)) / pi\"\n  (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have ft: \"(\\<lambda>x. f(x+t)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset [OF f, of t] periodic"], ["proof (prove)\nusing this:\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"?lhs = (\\<Sum>k=0..n. Fourier_coefficient (\\<lambda>x. f(x+t)) (2*k) * trigonometric_set (2*k) 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = 0..n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "using Fourier_sum_offset_unpaired assms atMost_atLeast0"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<Sum>k\\<le>2 * ?n.\n                        Fourier_coefficient ?f k * trigonometric_set k ?t) =\n                    (\\<Sum>k\\<le>?n.\n                        Fourier_coefficient (\\<lambda>x. ?f (x + ?t))\n                         (2 * k) *\n                        trigonometric_set (2 * k) 0)\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  {..?n} = {0..?n}\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (\\<Sum>k = 0..n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0)", "by auto"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (\\<Sum>k = 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"\\<dots> = Fourier_coefficient (\\<lambda>x. f(x+t)) 0 / sqrt (2 * pi)\n                 + (\\<Sum>k = Suc 0..n. Fourier_coefficient (\\<lambda>x. f(x+t)) (2*k) / sqrt pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = 0..n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n        trigonometric_set (2 * k) 0) =\n    Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n    (\\<Sum>k = Suc 0..n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi)", "by (simp add: sum.atLeast_Suc_atMost trigonometric_set_def)"], ["proof (state)\nthis:\n  (\\<Sum>k = 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "also"], ["proof (state)\nthis:\n  (\\<Sum>k = 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) *\n      trigonometric_set (2 * k) 0) =\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"\\<dots> = (LINT x|lebesgue_on {-pi..pi}. f(x+t)) / (2 * pi) +\n                   (\\<Sum>k = Suc 0..n. (LINT x|lebesgue_on {-pi..pi}. cos (real k * x) * f(x+t)) / pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n    (\\<Sum>k = Suc 0..n.\n        Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi) =\n    (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n    (\\<Sum>k = Suc 0..n.\n        (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) / pi)", "by (simp add: Fourier_coefficient_def orthonormal_coeff_def trigonometric_set_def l2product_def)"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi) =\n  (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) / pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "also"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f (x + t)) 0 / sqrt (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f (x + t)) (2 * k) / sqrt pi) =\n  (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) / pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"\\<dots> = LINT x|lebesgue_on {-pi..pi}.\n                     f(x+t) / (2 * pi) + (\\<Sum>k = Suc 0..n. (cos (real k * x) * f(x+t)) / pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n    (\\<Sum>k = Suc 0..n.\n        (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) /\n        pi) =\n    LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / (2 * pi) +\n       (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi)", "using Fourier_products_integrable_cos [OF ft] absolutely_integrable_imp_integrable [OF ft]"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. cos (?k * x) * f (x + t))\n  {- pi..pi} \\<in> sets lebesgue \\<Longrightarrow>\n  integrable (lebesgue_on {- pi..pi}) (\\<lambda>x. f (x + t))\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n    (\\<Sum>k = Suc 0..n.\n        (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) /\n        pi) =\n    LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / (2 * pi) +\n       (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi)", "by simp"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) / pi) =\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / (2 * pi) +\n     (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "also"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. f (x + t)) / (2 * pi) +\n  (\\<Sum>k = Suc 0..n.\n      (LINT x|lebesgue_on {- pi..pi}. cos (real k * x) * f (x + t)) / pi) =\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / (2 * pi) +\n     (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"\\<dots> = (LINT x|lebesgue_on {-pi..pi}.\n                     f(x+t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f(x+t))) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / (2 * pi) +\n       (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi) =\n    (LINT x|lebesgue_on {- pi..pi}.\n        f (x + t) / 2 +\n        (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n    pi", "by (simp add: divide_simps sum_distrib_right mult.assoc)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / (2 * pi) +\n     (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi) =\n  (LINT x|lebesgue_on {- pi..pi}.\n      f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n  pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / (2 * pi) +\n     (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t) / pi) =\n  (LINT x|lebesgue_on {- pi..pi}.\n      f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n  pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"\\<dots> = ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}.\n        f (x + t) / 2 +\n        (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n    pi =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}.\n        f (x + t) / 2 +\n        (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n    pi =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "have \"LINT x|lebesgue_on {-pi..pi}. f(x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f(x + t))\n        = LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)", "have eq: \"f(x+t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f(x + t))\n              = Dirichlet_kernel n x * f(x + t)\" if \"- pi \\<le> x\" \"x \\<le> pi\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "proof (cases \"x = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)\n 2. x \\<noteq> 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "case False"], ["proof (state)\nthis:\n  x \\<noteq> 0\n\ngoal (2 subgoals):\n 1. x = 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)\n 2. x \\<noteq> 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "then"], ["proof (chain)\npicking this:\n  x \\<noteq> 0", "have \"sin (x/2) \\<noteq> 0\""], ["proof (prove)\nusing this:\n  x \\<noteq> 0\n\ngoal (1 subgoal):\n 1. sin (x / 2) \\<noteq> 0", "using that"], ["proof (prove)\nusing this:\n  x \\<noteq> 0\n  - pi \\<le> x\n  x \\<le> pi\n\ngoal (1 subgoal):\n 1. sin (x / 2) \\<noteq> 0", "by (auto simp: sin_zero_iff)"], ["proof (state)\nthis:\n  sin (x / 2) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. x = 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)\n 2. x \\<noteq> 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "then"], ["proof (chain)\npicking this:\n  sin (x / 2) \\<noteq> 0", "have \"f(x + t) * (1/2 + (\\<Sum>k = Suc 0..n. cos(real k * x))) = f(x + t) * sin((real n + 1/2) * x) / 2 / sin(x/2)\""], ["proof (prove)\nusing this:\n  sin (x / 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. f (x + t) * (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    f (x + t) * sin ((real n + 1 / 2) * x) / 2 / sin (x / 2)", "using cosine_sum_lemma [of x n]"], ["proof (prove)\nusing this:\n  sin (x / 2) \\<noteq> 0\n  (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) * sin (x / 2) =\n  sin ((real n + 1 / 2) * x) / 2\n\ngoal (1 subgoal):\n 1. f (x + t) * (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n    f (x + t) * sin ((real n + 1 / 2) * x) / 2 / sin (x / 2)", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  f (x + t) * (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n  f (x + t) * sin ((real n + 1 / 2) * x) / 2 / sin (x / 2)\n\ngoal (2 subgoals):\n 1. x = 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)\n 2. x \\<noteq> 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "then"], ["proof (chain)\npicking this:\n  f (x + t) * (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n  f (x + t) * sin ((real n + 1 / 2) * x) / 2 / sin (x / 2)", "show ?thesis"], ["proof (prove)\nusing this:\n  f (x + t) * (1 / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x))) =\n  f (x + t) * sin ((real n + 1 / 2) * x) / 2 / sin (x / 2)\n\ngoal (1 subgoal):\n 1. f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "by (simp add: Dirichlet_kernel_def False field_simps sum_distrib_left)"], ["proof (state)\nthis:\n  f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n  Dirichlet_kernel n x * f (x + t)\n\ngoal (1 subgoal):\n 1. x = 0 \\<Longrightarrow>\n    f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    Dirichlet_kernel n x * f (x + t)", "qed (simp add: Dirichlet_kernel_def algebra_simps)"], ["proof (state)\nthis:\n  \\<lbrakk>- pi \\<le> ?x; ?x \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> f (?x + t) / 2 +\n                    (\\<Sum>k = Suc 0..n. cos (real k * ?x) * f (?x + t)) =\n                    Dirichlet_kernel n ?x * f (?x + t)\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n    LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)", "by (rule Bochner_Integration.integral_cong [OF refl]) (simp add: eq)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}.\n        f (x + t) / 2 +\n        (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n    pi =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "then"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}.\n     f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t)) =\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}.\n        f (x + t) / 2 +\n        (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n    pi =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "by simp"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}.\n      f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n  pi =\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}.\n      f (x + t) / 2 + (\\<Sum>k = Suc 0..n. cos (real k * x) * f (x + t))) /\n  pi =\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi", "."], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) =\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) / pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_limit_Dirichlet_kernel:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"((\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l)\n     \\<longleftrightarrow> (\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)) \\<longlonglongrightarrow> pi * l\"\n    (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "have \"?lhs \\<longleftrightarrow> (\\<lambda>n. (LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)) / pi) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n        pi)\n    \\<longlonglongrightarrow> l", "by (simp add: Fourier_sum_limit_pair [OF f, symmetric] Fourier_sum_offset_Dirichlet_kernel assms)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n      pi)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n      pi)\n  \\<longlonglongrightarrow> l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "have \"\\<dots> \\<longleftrightarrow> (\\<lambda>k. (LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel k x * f(x + t)) * inverse pi)\n                    \\<longlonglongrightarrow> pi * l * inverse pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n        pi)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>k.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n        inverse pi)\n    \\<longlonglongrightarrow> pi * l * inverse pi", "by (auto simp: divide_simps)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n      pi)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>k.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n      inverse pi)\n  \\<longlonglongrightarrow> pi * l * inverse pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t)) /\n      pi)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>k.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n      inverse pi)\n  \\<longlonglongrightarrow> pi * l * inverse pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "have \"\\<dots> \\<longleftrightarrow> ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n        inverse pi)\n    \\<longlonglongrightarrow> pi * l * inverse pi =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "using tendsto_mult_right_iff [of \"inverse pi\", symmetric]"], ["proof (prove)\nusing this:\n  inverse pi \\<noteq> 0 \\<Longrightarrow>\n  (?f \\<longlongrightarrow> ?l) ?F =\n  ((\\<lambda>x. ?f x * inverse pi) \\<longlongrightarrow> ?l * inverse pi) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>k.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n        inverse pi)\n    \\<longlonglongrightarrow> pi * l * inverse pi =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>k.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel k x * f (x + t)) *\n      inverse pi)\n  \\<longlonglongrightarrow> pi * l * inverse pi =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * l", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * l\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * l", "."], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * l\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>A directly deduced sufficient condition for convergence at a point\\<close>"], ["", "lemma simple_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and ft: \"(\\<lambda>x. (f(x+t) - f t) / sin(x/2)) absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "let ?\\<Phi> = \"\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "let ?\\<Psi> = \"\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * (f(x + t) - f t)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "have fft: \"(\\<lambda>x. f x - f t) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f x - f t) absolutely_integrable_on {- pi..pi}", "by (simp add: f absolutely_integrable_measurable_real)"], ["proof (state)\nthis:\n  (\\<lambda>x. f x - f t) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "have fxt: \"(\\<lambda>x. f(x + t)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "have *: \"?\\<Phi> \\<longlonglongrightarrow> 0 \\<longleftrightarrow> ?\\<Psi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n.\n           Fourier_coefficient (\\<lambda>x. f x - f t) k *\n           trigonometric_set k t)\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           Dirichlet_kernel n x * (f (x + t) - f t))\n    \\<longlonglongrightarrow> 0", "by (simp add: Fourier_sum_limit_Dirichlet_kernel fft periodic)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "have \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t) \\<longlonglongrightarrow> 0\"\n    if \"?\\<Phi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n        f t)\n    \\<longlonglongrightarrow> 0", "proof (rule Lim_transform_eventually [OF that eventually_sequentiallyI])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c1 \\<le> x \\<Longrightarrow>\n       (\\<Sum>k\\<le>x.\n           Fourier_coefficient (\\<lambda>x. f x - f t) k *\n           trigonometric_set k t) =\n       (\\<Sum>k\\<le>x. Fourier_coefficient f k * trigonometric_set k t) -\n       f t", "show \"(\\<Sum>k\\<le>n. Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t)\n        = (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t\"\n      if \"Suc 0 \\<le> n\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "have \"(\\<Sum>k = Suc 0..n. Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t)\n          = (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k = Suc 0..n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)", "proof (rule sum.cong [OF refl])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {Suc 0..n} \\<Longrightarrow>\n       Fourier_coefficient (\\<lambda>x. f x - f t) x *\n       trigonometric_set x t =\n       Fourier_coefficient f x * trigonometric_set x t", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {Suc 0..n} \\<Longrightarrow>\n       Fourier_coefficient (\\<lambda>x. f x - f t) x *\n       trigonometric_set x t =\n       Fourier_coefficient f x * trigonometric_set x t", "assume k: \"k \\<in> {Suc 0..n}\""], ["proof (state)\nthis:\n  k \\<in> {Suc 0..n}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {Suc 0..n} \\<Longrightarrow>\n       Fourier_coefficient (\\<lambda>x. f x - f t) x *\n       trigonometric_set x t =\n       Fourier_coefficient f x * trigonometric_set x t", "then"], ["proof (chain)\npicking this:\n  k \\<in> {Suc 0..n}", "have [simp]: \"integral\\<^sup>L (lebesgue_on {-pi..pi}) (trigonometric_set k) = 0\""], ["proof (prove)\nusing this:\n  k \\<in> {Suc 0..n}\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- pi..pi}) (trigonometric_set k) = 0", "by (auto simp: trigonometric_set_def)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- pi..pi}) (trigonometric_set k) = 0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {Suc 0..n} \\<Longrightarrow>\n       Fourier_coefficient (\\<lambda>x. f x - f t) x *\n       trigonometric_set x t =\n       Fourier_coefficient f x * trigonometric_set x t", "show \"Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t = Fourier_coefficient f k * trigonometric_set k t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t =\n    Fourier_coefficient f k * trigonometric_set k t", "using k"], ["proof (prove)\nusing this:\n  k \\<in> {Suc 0..n}\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t =\n    Fourier_coefficient f k * trigonometric_set k t", "unfolding Fourier_coefficient_def orthonormal_coeff_def l2product_def"], ["proof (prove)\nusing this:\n  k \\<in> {Suc 0..n}\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. trigonometric_set k x * (f x - f t)) *\n    trigonometric_set k t =\n    (LINT x|lebesgue_on {- pi..pi}. trigonometric_set k x * f x) *\n    trigonometric_set k t", "by (simp add: right_diff_distrib f absolutely_integrable_measurable_real trigonometric_set_mul_integrable)"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f x - f t) k * trigonometric_set k t =\n  Fourier_coefficient f k * trigonometric_set k t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "moreover"], ["proof (state)\nthis:\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "have \"Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n                     Fourier_coefficient f 0 * trigonometric_set 0 t - f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n    Fourier_coefficient f 0 * trigonometric_set 0 t - f t", "using f"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n    Fourier_coefficient f 0 * trigonometric_set 0 t - f t", "unfolding Fourier_coefficient_def orthonormal_coeff_def l2product_def"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. trigonometric_set 0 x * (f x - f t)) *\n    trigonometric_set 0 t =\n    (LINT x|lebesgue_on {- pi..pi}. trigonometric_set 0 x * f x) *\n    trigonometric_set 0 t -\n    f t", "by (auto simp: divide_simps trigonometric_set absolutely_integrable_imp_integrable measure_restrict_space)"], ["proof (state)\nthis:\n  Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n  Fourier_coefficient f 0 * trigonometric_set 0 t - f t\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "ultimately"], ["proof (chain)\npicking this:\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)\n  Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n  Fourier_coefficient f 0 * trigonometric_set 0 t - f t", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>k = Suc 0..n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k = Suc 0..n. Fourier_coefficient f k * trigonometric_set k t)\n  Fourier_coefficient (\\<lambda>x. f x - f t) 0 * trigonometric_set 0 t =\n  Fourier_coefficient f 0 * trigonometric_set 0 t - f t\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        Fourier_coefficient (\\<lambda>x. f x - f t) k *\n        trigonometric_set k t) =\n    (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t", "by (simp add: sum.atLeast_Suc_atMost atMost_atLeast0)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) - f t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Suc 0 \\<le> ?n \\<Longrightarrow>\n  (\\<Sum>k\\<le>?n.\n      Fourier_coefficient (\\<lambda>x. f x - f t) k *\n      trigonometric_set k t) =\n  (\\<Sum>k\\<le>?n. Fourier_coefficient f k * trigonometric_set k t) - f t\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n.\n      (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n      f t)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n.\n      (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n      f t)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "have \"?\\<Psi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           Dirichlet_kernel n x * (f (x + t) - f t))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           Dirichlet_kernel n x * (f (x + t) - f t))\n    \\<longlonglongrightarrow> 0", "have eq: \"\\<And>n. ?\\<Psi> n = integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin((n + 1/2) * x) * ((f(x+t) - f t) / sin(x/2) / 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       LINT x|lebesgue_on {- pi..pi}.\n          Dirichlet_kernel n x * (f (x + t) - f t) =\n       LINT x|lebesgue_on {- pi..pi}.\n          sin ((real n + 1 / 2) * x) * ((f (x + t) - f t) / sin (x / 2) / 2)", "unfolding Dirichlet_kernel_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n.\n       LINT x|lebesgue_on {- pi..pi}.\n          (if x = 0 then real n + 1 / 2\n           else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n          (f (x + t) - f t) =\n       LINT x|lebesgue_on {- pi..pi}.\n          sin ((real n + 1 / 2) * x) * ((f (x + t) - f t) / sin (x / 2) / 2)", "by (rule Bochner_Integration.integral_cong [OF refl]) (auto simp: divide_simps sin_zero_iff)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel ?n x * (f (x + t) - f t) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) * ((f (x + t) - f t) / sin (x / 2) / 2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           Dirichlet_kernel n x * (f (x + t) - f t))\n    \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           Dirichlet_kernel n x * (f (x + t) - f t))\n    \\<longlonglongrightarrow> 0", "unfolding eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           sin ((real n + 1 / 2) * x) *\n           ((f (x + t) - f t) / sin (x / 2) / 2))\n    \\<longlonglongrightarrow> 0", "by (intro ft set_integrable_divide Riemann_lebesgue_sin_half)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n.\n      (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n      f t)\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n.\n         Fourier_coefficient (\\<lambda>x. f x - f t) k *\n         trigonometric_set k t)\n  \\<longlonglongrightarrow> 0 \\<Longrightarrow>\n  (\\<lambda>n.\n      (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) -\n      f t)\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         Dirichlet_kernel n x * (f (x + t) - f t))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "by (simp add: LIM_zero_cancel)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> f t\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>A more natural sufficient Hoelder condition at a point\\<close>"], ["", "lemma bounded_inverse_sin_half:\n  assumes \"d > 0\"\n  obtains B where \"B>0\" \"\\<And>x. x \\<in> ({-pi..pi} - {-d<..<d}) \\<Longrightarrow> \\<bar>inverse (sin (x/2))\\<bar> \\<le> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"bounded ((\\<lambda>x. inverse (sin (x/2))) ` ({-pi..pi} - {- d<..<d}))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded\n     ((\\<lambda>x. inverse (sin (x / 2))) ` ({- pi..pi} - {- d<..<d}))", "proof (intro compact_imp_bounded compact_continuous_image)"], ["proof (state)\ngoal (2 subgoals):\n 1. continuous_on ({- pi..pi} - {- d<..<d})\n     (\\<lambda>x. inverse (sin (x / 2)))\n 2. compact ({- pi..pi} - {- d<..<d})", "have \"\\<lbrakk>x \\<in> {-pi..pi}; x \\<noteq> 0\\<rbrakk> \\<Longrightarrow> sin (x/2) \\<noteq> 0\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> {- pi..pi}; x \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> sin (x / 2) \\<noteq> 0", "using \\<open>0 < d\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> {- pi..pi}; x \\<noteq> 0\\<rbrakk>\n    \\<Longrightarrow> sin (x / 2) \\<noteq> 0", "by (auto simp: sin_zero_iff)"], ["proof (state)\nthis:\n  \\<lbrakk>?x \\<in> {- pi..pi}; ?x \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> sin (?x / 2) \\<noteq> 0\n\ngoal (2 subgoals):\n 1. continuous_on ({- pi..pi} - {- d<..<d})\n     (\\<lambda>x. inverse (sin (x / 2)))\n 2. compact ({- pi..pi} - {- d<..<d})", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x \\<in> {- pi..pi}; ?x \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> sin (?x / 2) \\<noteq> 0", "show \"continuous_on ({-pi..pi} - {-d<..<d}) (\\<lambda>x. inverse (sin (x/2)))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> {- pi..pi}; ?x \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> sin (?x / 2) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. continuous_on ({- pi..pi} - {- d<..<d})\n     (\\<lambda>x. inverse (sin (x / 2)))", "using \\<open>0 < d\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> {- pi..pi}; ?x \\<noteq> 0\\<rbrakk>\n  \\<Longrightarrow> sin (?x / 2) \\<noteq> 0\n  0 < d\n\ngoal (1 subgoal):\n 1. continuous_on ({- pi..pi} - {- d<..<d})\n     (\\<lambda>x. inverse (sin (x / 2)))", "by (intro continuous_intros) auto"], ["proof (state)\nthis:\n  continuous_on ({- pi..pi} - {- d<..<d})\n   (\\<lambda>x. inverse (sin (x / 2)))\n\ngoal (1 subgoal):\n 1. compact ({- pi..pi} - {- d<..<d})", "show \"compact ({-pi..pi} - {-d<..<d})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. compact ({- pi..pi} - {- d<..<d})", "by (simp add: compact_diff)"], ["proof (state)\nthis:\n  compact ({- pi..pi} - {- d<..<d})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. inverse (sin (x / 2))) ` ({- pi..pi} - {- d<..<d}))\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "then"], ["proof (chain)\npicking this:\n  bounded ((\\<lambda>x. inverse (sin (x / 2))) ` ({- pi..pi} - {- d<..<d}))", "show thesis"], ["proof (prove)\nusing this:\n  bounded ((\\<lambda>x. inverse (sin (x / 2))) ` ({- pi..pi} - {- d<..<d}))\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  bounded ((\\<lambda>x. inverse (sin (x / 2))) ` ({- pi..pi} - {- d<..<d}))\n  \\<lbrakk>0 < ?B;\n   \\<And>x.\n      x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n      \\<bar>inverse (sin (x / 2))\\<bar> \\<le> ?B\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by (auto simp: bounded_pos)"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "proposition Hoelder_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and \"d > 0\" \"a > 0\"\n    and ft: \"\\<And>x. \\<bar>x-t\\<bar> < d \\<Longrightarrow> \\<bar>f x - f t\\<bar> \\<le> M * \\<bar>x-t\\<bar> powr a\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "proof (rule simple_Fourier_convergence_periodic [OF f])"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "have half: \"((\\<lambda>x. sin(x/2)) has_real_derivative 1/2) (at 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. sin (x / 2)) has_real_derivative 1 / 2) (at 0)", "by (rule derivative_eq_intros refl | force)+"], ["proof (state)\nthis:\n  ((\\<lambda>x. sin (x / 2)) has_real_derivative 1 / 2) (at 0)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. sin (x / 2)) has_real_derivative 1 / 2) (at 0)", "obtain e0::real where \"e0 > 0\" and e0: \"\\<And>x. \\<lbrakk>x \\<noteq> 0; \\<bar>x\\<bar> < e0\\<rbrakk> \\<Longrightarrow> \\<bar>sin (x/2) / x - 1/2\\<bar> < 1/4\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. sin (x / 2)) has_real_derivative 1 / 2) (at 0)\n\ngoal (1 subgoal):\n 1. (\\<And>e0.\n        \\<lbrakk>0 < e0;\n         \\<And>x.\n            \\<lbrakk>x \\<noteq> 0; \\<bar>x\\<bar> < e0\\<rbrakk>\n            \\<Longrightarrow> \\<bar>sin (x / 2) / x - 1 / 2\\<bar>\n                              < 1 / 4\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply (simp add: DERIV_def Lim_at dist_real_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>e0.\n                \\<lbrakk>0 < e0;\n                 \\<And>x.\n                    \\<lbrakk>x \\<noteq> 0; \\<bar>x\\<bar> < e0\\<rbrakk>\n                    \\<Longrightarrow> \\<bar>sin (x / 2) / x - 1 / 2\\<bar> *\n4\n< 1\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     \\<forall>e>0.\n        \\<exists>d>0.\n           \\<forall>x.\n              x \\<noteq> 0 \\<and> \\<bar>x\\<bar> < d \\<longrightarrow>\n              \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < e\\<rbrakk>\n    \\<Longrightarrow> thesis", "apply (drule_tac x=\"1/4\" in spec, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  0 < e0\n  \\<lbrakk>?x \\<noteq> 0; \\<bar>?x\\<bar> < e0\\<rbrakk>\n  \\<Longrightarrow> \\<bar>sin (?x / 2) / ?x - 1 / 2\\<bar> < 1 / 4\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "obtain e where \"e > 0\" and e: \"\\<And>x. \\<bar>x\\<bar> < e \\<Longrightarrow> \\<bar>(f(x+t) - f t) / sin (x/2)\\<bar> \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a-1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>e.\n        \\<lbrakk>0 < e;\n         \\<And>x.\n            \\<bar>x\\<bar> < e \\<Longrightarrow>\n            \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n            \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<And>e.\n        \\<lbrakk>0 < e;\n         \\<And>x.\n            \\<bar>x\\<bar> < e \\<Longrightarrow>\n            \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n            \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    0 < ?e2\n 2. \\<And>x.\n       \\<lbrakk>\\<And>e.\n                   \\<lbrakk>0 < e;\n                    \\<And>x.\n                       \\<bar>x\\<bar> < e \\<Longrightarrow>\n                       \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                       \\<le> 4 *\n                             (\\<bar>M\\<bar> *\n                              \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<bar>x\\<bar> < ?e2\\<rbrakk>\n       \\<Longrightarrow> \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                         \\<le> 4 *\n                               (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "show \"min d e0 > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < min d e0", "using \\<open>d > 0\\<close> \\<open>e0 > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n  0 < e0\n\ngoal (1 subgoal):\n 1. 0 < min d e0", "by auto"], ["proof (state)\nthis:\n  0 < min d e0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>e.\n                   \\<lbrakk>0 < e;\n                    \\<And>x.\n                       \\<bar>x\\<bar> < e \\<Longrightarrow>\n                       \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                       \\<le> 4 *\n                             (\\<bar>M\\<bar> *\n                              \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<bar>x\\<bar> < min d e0\\<rbrakk>\n       \\<Longrightarrow> \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                         \\<le> 4 *\n                               (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>e.\n                   \\<lbrakk>0 < e;\n                    \\<And>x.\n                       \\<bar>x\\<bar> < e \\<Longrightarrow>\n                       \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                       \\<le> 4 *\n                             (\\<bar>M\\<bar> *\n                              \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<bar>x\\<bar> < min d e0\\<rbrakk>\n       \\<Longrightarrow> \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                         \\<le> 4 *\n                               (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>e.\n                   \\<lbrakk>0 < e;\n                    \\<And>x.\n                       \\<bar>x\\<bar> < e \\<Longrightarrow>\n                       \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                       \\<le> 4 *\n                             (\\<bar>M\\<bar> *\n                              \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<bar>x\\<bar> < min d e0\\<rbrakk>\n       \\<Longrightarrow> \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                         \\<le> 4 *\n                               (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "assume x: \"\\<bar>x\\<bar> < min d e0\""], ["proof (state)\nthis:\n  \\<bar>x\\<bar> < min d e0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>\\<And>e.\n                   \\<lbrakk>0 < e;\n                    \\<And>x.\n                       \\<bar>x\\<bar> < e \\<Longrightarrow>\n                       \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                       \\<le> 4 *\n                             (\\<bar>M\\<bar> *\n                              \\<bar>x\\<bar> powr (a - 1))\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        \\<bar>x\\<bar> < min d e0\\<rbrakk>\n       \\<Longrightarrow> \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n                         \\<le> 4 *\n                               (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "show \"\\<bar>(f(x + t) - f t) / sin (x/2)\\<bar> \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "proof (cases \"sin(x/2) = 0 \\<or> x=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. sin (x / 2) = 0 \\<or> x = 0 \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n 2. \\<not> (sin (x / 2) = 0 \\<or> x = 0) \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "case False"], ["proof (state)\nthis:\n  \\<not> (sin (x / 2) = 0 \\<or> x = 0)\n\ngoal (2 subgoals):\n 1. sin (x / 2) = 0 \\<or> x = 0 \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n 2. \\<not> (sin (x / 2) = 0 \\<or> x = 0) \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "have eq: \"\\<bar>(f(x + t) - f t) / sin (x/2)\\<bar> = \\<bar>inverse (sin (x/2) / x)\\<bar> * (\\<bar>f(x + t) - f t\\<bar> / \\<bar>x\\<bar>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar> =\n    \\<bar>inverse (sin (x / 2) / x)\\<bar> *\n    (\\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>)", "by simp"], ["proof (state)\nthis:\n  \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar> =\n  \\<bar>inverse (sin (x / 2) / x)\\<bar> *\n  (\\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>)\n\ngoal (2 subgoals):\n 1. sin (x / 2) = 0 \\<or> x = 0 \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n 2. \\<not> (sin (x / 2) = 0 \\<or> x = 0) \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "unfolding eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> *\n    (\\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>)\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "proof (rule mult_mono)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4\n 2. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 3. 0 \\<le> 4\n 4. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "have \"\\<bar>sin (x/2) / x - 1/2\\<bar> < 1/4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4", "using e0 [of x] x False"], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<noteq> 0; \\<bar>x\\<bar> < e0\\<rbrakk>\n  \\<Longrightarrow> \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4\n  \\<bar>x\\<bar> < min d e0\n  \\<not> (sin (x / 2) = 0 \\<or> x = 0)\n\ngoal (1 subgoal):\n 1. \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4", "by force"], ["proof (state)\nthis:\n  \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4\n\ngoal (4 subgoals):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4\n 2. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 3. 0 \\<le> 4\n 4. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4", "have \"1/4 \\<le> \\<bar>sin (x/2) / x\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>sin (x / 2) / x - 1 / 2\\<bar> < 1 / 4\n\ngoal (1 subgoal):\n 1. 1 / 4 \\<le> \\<bar>sin (x / 2) / x\\<bar>", "by (simp add: abs_if field_simps split: if_split_asm)"], ["proof (state)\nthis:\n  1 / 4 \\<le> \\<bar>sin (x / 2) / x\\<bar>\n\ngoal (4 subgoals):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4\n 2. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 3. 0 \\<le> 4\n 4. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "then"], ["proof (chain)\npicking this:\n  1 / 4 \\<le> \\<bar>sin (x / 2) / x\\<bar>", "show \"\\<bar>inverse (sin (x/2) / x)\\<bar> \\<le> 4\""], ["proof (prove)\nusing this:\n  1 / 4 \\<le> \\<bar>sin (x / 2) / x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4", "using False"], ["proof (prove)\nusing this:\n  1 / 4 \\<le> \\<bar>sin (x / 2) / x\\<bar>\n  \\<not> (sin (x / 2) = 0 \\<or> x = 0)\n\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<bar>inverse (sin (x / 2) / x)\\<bar> \\<le> 4\n\ngoal (3 subgoals):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 2. 0 \\<le> 4\n 3. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "have \"\\<bar>f(x + t) - f t\\<bar> / \\<bar>x\\<bar> \\<le> M * \\<bar>x + t - t\\<bar> powr (a - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> M * \\<bar>x + t - t\\<bar> powr (a - 1)", "using ft [of \"x+t\"] x"], ["proof (prove)\nusing this:\n  \\<bar>x + t - t\\<bar> < d \\<Longrightarrow>\n  \\<bar>f (x + t) - f t\\<bar> \\<le> M * \\<bar>x + t - t\\<bar> powr a\n  \\<bar>x\\<bar> < min d e0\n\ngoal (1 subgoal):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> M * \\<bar>x + t - t\\<bar> powr (a - 1)", "by (auto simp: divide_simps algebra_simps Transcendental.powr_mult_base)"], ["proof (state)\nthis:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n  \\<le> M * \\<bar>x + t - t\\<bar> powr (a - 1)\n\ngoal (3 subgoals):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 2. 0 \\<le> 4\n 3. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n  \\<le> M * \\<bar>x + t - t\\<bar> powr (a - 1)\n\ngoal (3 subgoals):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 2. 0 \\<le> 4\n 3. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "have \"\\<dots> \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M * \\<bar>x + t - t\\<bar> powr (a - 1)\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)", "by (simp add: mult_mono)"], ["proof (state)\nthis:\n  M * \\<bar>x + t - t\\<bar> powr (a - 1)\n  \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n\ngoal (3 subgoals):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n 2. 0 \\<le> 4\n 3. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n  \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)", "show \"\\<bar>f(x + t) - f t\\<bar> / \\<bar>x\\<bar> \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\""], ["proof (prove)\nusing this:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n  \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n\ngoal (1 subgoal):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n    \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)", "."], ["proof (state)\nthis:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>\n  \\<le> \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1)\n\ngoal (2 subgoals):\n 1. 0 \\<le> 4\n 2. 0 \\<le> \\<bar>f (x + t) - f t\\<bar> / \\<bar>x\\<bar>", "qed auto"], ["proof (state)\nthis:\n  \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n  \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n\ngoal (1 subgoal):\n 1. sin (x / 2) = 0 \\<or> x = 0 \\<Longrightarrow>\n    \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n    \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "qed auto"], ["proof (state)\nthis:\n  \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n  \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < e\n  \\<bar>?x\\<bar> < e \\<Longrightarrow>\n  \\<bar>(f (?x + t) - f t) / sin (?x / 2)\\<bar>\n  \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>?x\\<bar> powr (a - 1))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "obtain B where \"B>0\" and B: \"\\<And>x. x \\<in> ({-pi..pi} - {- e<..<e}) \\<Longrightarrow> \\<bar>inverse (sin (x/2))\\<bar> \\<le> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- e<..<e} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using bounded_inverse_sin_half [OF \\<open>e > 0\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>B.\n      \\<lbrakk>0 < B;\n       \\<And>x.\n          x \\<in> {- pi..pi} - {- e<..<e} \\<Longrightarrow>\n          \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- e<..<e} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  0 < B\n  ?x \\<in> {- pi..pi} - {- e<..<e} \\<Longrightarrow>\n  \\<bar>inverse (sin (?x / 2))\\<bar> \\<le> B\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "let ?g = \"\\<lambda>x. max (B * \\<bar>f(x + t) - f t\\<bar>) ((4 * \\<bar>M\\<bar>) * \\<bar>x\\<bar> powr (a - 1))\""], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x", "show \"(\\<lambda>x. (f(x + t) - f t) / sin (x/2)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}", "proof (rule measurable_bounded_by_integrable_imp_absolutely_integrable)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. ?g integrable_on {- pi..pi}\n 4. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "have fxt: \"(\\<lambda>x. f(x + t)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  0 < d\n  0 < a\n  \\<bar>?x - t\\<bar> < d \\<Longrightarrow>\n  \\<bar>f ?x - f t\\<bar> \\<le> M * \\<bar>?x - t\\<bar> powr a\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. ?g integrable_on {- pi..pi}\n 4. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "show \"(\\<lambda>x. (f(x + t) - f t) / sin (x/2)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f (x + t) - f t) / sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "proof (intro measurable)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. f (x + t)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. f t \\<in> space borel\n 3. (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "show \"(\\<lambda>x. f(x + t)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) \\<in> borel_measurable (lebesgue_on {- pi..pi})", "using absolutely_integrable_on_def fxt integrable_imp_measurable"], ["proof (prove)\nusing this:\n  (?f absolutely_integrable_on ?S) =\n  (?f integrable_on ?S \\<and> (\\<lambda>x. norm (?f x)) integrable_on ?S)\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n  ?f integrable_on ?S \\<Longrightarrow>\n  ?f \\<in> borel_measurable (lebesgue_on ?S)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (2 subgoals):\n 1. f t \\<in> space borel\n 2. (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "show \"(\\<lambda>x. sin (x/2)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (intro continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. sin (x / 2)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (1 subgoal):\n 1. f t \\<in> space borel", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (x + t) - f t) / sin (x / 2))\n  \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "have \"(\\<lambda>x. f(x + t) - f t) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on {- pi..pi}", "by (intro set_integral_diff fxt) (simp add: set_integrable_def)"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on {- pi..pi}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on {- pi..pi}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "have \"(\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n    {- pi..pi}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n    {- pi..pi}", "have \"((\\<lambda>x. x powr (a - 1)) has_integral\n       inverse a * pi powr a - inverse a * 0 powr a)\n       {0..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. x powr (a - 1)) has_integral\n     inverse a * pi powr a - inverse a * 0 powr a)\n     {0..pi}", "proof (rule fundamental_theorem_of_calculus_interior)"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 \\<le> pi\n 2. continuous_on {0..pi} (\\<lambda>b. inverse a * b powr a)\n 3. \\<And>x.\n       x \\<in> {0<..<pi} \\<Longrightarrow>\n       ((\\<lambda>b. inverse a * b powr a) has_vector_derivative\n        x powr (a - 1))\n        (at x)", "show \"continuous_on {0..pi} (\\<lambda>x. inverse a * x powr a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {0..pi} (\\<lambda>x. inverse a * x powr a)", "using \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < a\n\ngoal (1 subgoal):\n 1. continuous_on {0..pi} (\\<lambda>x. inverse a * x powr a)", "by (intro continuous_on_powr' continuous_intros) auto"], ["proof (state)\nthis:\n  continuous_on {0..pi} (\\<lambda>x. inverse a * x powr a)\n\ngoal (2 subgoals):\n 1. 0 \\<le> pi\n 2. \\<And>x.\n       x \\<in> {0<..<pi} \\<Longrightarrow>\n       ((\\<lambda>b. inverse a * b powr a) has_vector_derivative\n        x powr (a - 1))\n        (at x)", "show \"((\\<lambda>b. inverse a * b powr a) has_vector_derivative x powr (a - 1)) (at x)\"\n          if \"x \\<in> {0<..<pi}\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>b. inverse a * b powr a) has_vector_derivative\n     x powr (a - 1))\n     (at x)", "using that \\<open>a > 0\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> {0<..<pi}\n  0 < a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>b. inverse a * b powr a) has_vector_derivative\n     x powr (a - 1))\n     (at x)", "apply (simp flip: has_field_derivative_iff_has_vector_derivative)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>0 < x \\<and> x < pi; 0 < a\\<rbrakk>\n    \\<Longrightarrow> ((\\<lambda>b.\n                           inverse a * b powr a) has_real_derivative\n                       x powr (a - 1))\n                       (at x)", "apply (rule derivative_eq_intros | simp)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ?x \\<in> {0<..<pi} \\<Longrightarrow>\n  ((\\<lambda>b. inverse a * b powr a) has_vector_derivative ?x powr (a - 1))\n   (at ?x)\n\ngoal (1 subgoal):\n 1. 0 \\<le> pi", "qed auto"], ["proof (state)\nthis:\n  ((\\<lambda>x. x powr (a - 1)) has_integral\n   inverse a * pi powr a - inverse a * 0 powr a)\n   {0..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n    {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. x powr (a - 1)) has_integral\n   inverse a * pi powr a - inverse a * 0 powr a)\n   {0..pi}", "have int: \"(\\<lambda>x. x powr (a - 1)) integrable_on {0..pi}\""], ["proof (prove)\nusing this:\n  ((\\<lambda>x. x powr (a - 1)) has_integral\n   inverse a * pi powr a - inverse a * 0 powr a)\n   {0..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. x powr (a - 1)) integrable_on {0..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. x powr (a - 1)) integrable_on {0..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n    {- pi..pi}", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n    {- pi..pi}", "proof (rule nonnegative_absolutely_integrable_1)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..pi}\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       0 \\<le> \\<bar>x\\<bar> powr (a - 1)", "show \"(\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..pi}", "proof (rule Henstock_Kurzweil_Integration.integrable_combine)"], ["proof (state)\ngoal (4 subgoals):\n 1. - pi \\<le> ?c\n 2. ?c \\<le> pi\n 3. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..?c}\n 4. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {?c..pi}", "show \"(\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}", "using int integrable_eq"], ["proof (prove)\nusing this:\n  (\\<lambda>x. x powr (a - 1)) integrable_on {0..pi}\n  \\<lbrakk>?f integrable_on ?s;\n   \\<And>x. x \\<in> ?s \\<Longrightarrow> ?f x = ?g x\\<rbrakk>\n  \\<Longrightarrow> ?g integrable_on ?s\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}\n\ngoal (3 subgoals):\n 1. - pi \\<le> 0\n 2. 0 \\<le> pi\n 3. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..0}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}", "show \"(\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..0}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..0}", "using Henstock_Kurzweil_Integration.integrable_reflect_real"], ["proof (prove)\nusing this:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {0..pi}\n  ((\\<lambda>x. ?f (- x)) integrable_on {- ?b..- ?a}) =\n  (?f integrable_on {?a..?b})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..0}", "by fastforce"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..0}\n\ngoal (2 subgoals):\n 1. - pi \\<le> 0\n 2. 0 \\<le> pi", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       0 \\<le> \\<bar>x\\<bar> powr (a - 1)", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2)) \\<le> ?g x", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on {- pi..pi}\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n  {- pi..pi}", "show \"?g integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on {- pi..pi}\n  (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        max (B * \\<bar>f (x + t) - f t\\<bar>)\n         (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))) integrable_on\n    {- pi..pi}", "apply (intro set_lebesgue_integral_eq_integral absolutely_integrable_max_1 absolutely_integrable_bounded_measurable_product_real set_integrable_abs measurable)"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> B \\<in> space borel\n 2. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> {- pi..pi} \\<in> sets lebesgue\n 3. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> bounded ((\\<lambda>x. B) ` {- pi..pi})\n 4. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n                      {- pi..pi}\n 5. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> 4 \\<in> space borel\n 6. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> M \\<in> space borel\n 7. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> {- pi..pi} \\<in> sets lebesgue\n 8. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> bounded ((\\<lambda>x. 4 * \\<bar>M\\<bar>) ` {- pi..pi})\n 9. \\<lbrakk>(\\<lambda>x. f (x + t) - f t) absolutely_integrable_on\n             {- pi..pi};\n     (\\<lambda>x. \\<bar>x\\<bar> powr (a - 1)) absolutely_integrable_on\n     {- pi..pi}\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x.\n                          \\<bar>x\\<bar> powr\n                          (a - 1)) absolutely_integrable_on\n                      {- pi..pi}", "apply (auto simp: image_constant_conv)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      max (B * \\<bar>f (x + t) - f t\\<bar>)\n       (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))) integrable_on\n  {- pi..pi}\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((f (x + t) - f t) / sin (x / 2))\n       \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n              (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "show \"norm ((f(x + t) - f t) / sin (x/2)) \\<le> ?g x\" if \"x \\<in> {-pi..pi}\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "proof (cases \"\\<bar>x\\<bar> < e\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n 2. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "case True"], ["proof (state)\nthis:\n  \\<bar>x\\<bar> < e\n\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n 2. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "then"], ["proof (chain)\npicking this:\n  \\<bar>x\\<bar> < e", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>x\\<bar> < e\n\ngoal (1 subgoal):\n 1. norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "using e [OF True]"], ["proof (prove)\nusing this:\n  \\<bar>x\\<bar> < e\n  \\<bar>(f (x + t) - f t) / sin (x / 2)\\<bar>\n  \\<le> 4 * (\\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n\ngoal (1 subgoal):\n 1. norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "by (simp add: max_def)"], ["proof (state)\nthis:\n  norm ((f (x + t) - f t) / sin (x / 2))\n  \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n         (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>x\\<bar> < e", "have \"\\<bar>inverse (sin (x/2))\\<bar> \\<le> B\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>x\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B", "using B that"], ["proof (prove)\nusing this:\n  \\<not> \\<bar>x\\<bar> < e\n  ?x \\<in> {- pi..pi} - {- e<..<e} \\<Longrightarrow>\n  \\<bar>inverse (sin (?x / 2))\\<bar> \\<le> B\n  x \\<in> {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B", "by force"], ["proof (state)\nthis:\n  \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "then"], ["proof (chain)\npicking this:\n  \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B", "have \"\\<bar>inverse (sin (x/2))\\<bar> * \\<bar>f(x + t) - f t\\<bar> \\<le> B * \\<bar>f(x + t) - f t\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\n\ngoal (1 subgoal):\n 1. \\<bar>inverse (sin (x / 2))\\<bar> * \\<bar>f (x + t) - f t\\<bar>\n    \\<le> B * \\<bar>f (x + t) - f t\\<bar>", "by (simp add: mult_right_mono)"], ["proof (state)\nthis:\n  \\<bar>inverse (sin (x / 2))\\<bar> * \\<bar>f (x + t) - f t\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "then"], ["proof (chain)\npicking this:\n  \\<bar>inverse (sin (x / 2))\\<bar> * \\<bar>f (x + t) - f t\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>", "have \"\\<bar>f(x + t) - f t\\<bar> / \\<bar>sin (x/2)\\<bar> \\<le> B * \\<bar>f(x + t) - f t\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>inverse (sin (x / 2))\\<bar> * \\<bar>f (x + t) - f t\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>f (x + t) - f t\\<bar> / \\<bar>sin (x / 2)\\<bar>\n    \\<le> B * \\<bar>f (x + t) - f t\\<bar>", "by (simp add: divide_simps split: if_split_asm)"], ["proof (state)\nthis:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>sin (x / 2)\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>\n\ngoal (1 subgoal):\n 1. \\<not> \\<bar>x\\<bar> < e \\<Longrightarrow>\n    norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "then"], ["proof (chain)\npicking this:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>sin (x / 2)\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f (x + t) - f t\\<bar> / \\<bar>sin (x / 2)\\<bar>\n  \\<le> B * \\<bar>f (x + t) - f t\\<bar>\n\ngoal (1 subgoal):\n 1. norm ((f (x + t) - f t) / sin (x / 2))\n    \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n           (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))", "by auto"], ["proof (state)\nthis:\n  norm ((f (x + t) - f t) / sin (x / 2))\n  \\<le> max (B * \\<bar>f (x + t) - f t\\<bar>)\n         (4 * \\<bar>M\\<bar> * \\<bar>x\\<bar> powr (a - 1))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x \\<in> {- pi..pi} \\<Longrightarrow>\n  norm ((f (?x + t) - f t) / sin (?x / 2))\n  \\<le> max (B * \\<bar>f (?x + t) - f t\\<bar>)\n         (4 * \\<bar>M\\<bar> * \\<bar>?x\\<bar> powr (a - 1))\n\ngoal (1 subgoal):\n 1. {- pi..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (x + t) - f t) / sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>x. f (x + 2 * pi) = f x", "qed (auto simp: periodic)"], ["", "text\\<open>In particular, a Lipschitz condition at the point\\<close>"], ["", "corollary Lipschitz_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and \"d > 0\"\n    and ft: \"\\<And>x. \\<bar>x-t\\<bar> < d \\<Longrightarrow> \\<bar>f x - f t\\<bar> \\<le> M * \\<bar>x-t\\<bar>\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "using Hoelder_Fourier_convergence_periodic [OF f \\<open>d > 0\\<close>, of 1] assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < 1;\n   \\<And>x.\n      \\<bar>x - ?t\\<bar> < d \\<Longrightarrow>\n      \\<bar>f x - f ?t\\<bar> \\<le> ?M * \\<bar>x - ?t\\<bar> powr 1;\n   \\<And>x. f (x + 2 * pi) = f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n.\n                        \\<Sum>k\\<le>n.\n                           Fourier_coefficient f k * trigonometric_set k ?t)\n                    \\<longlonglongrightarrow> f ?t\n  f absolutely_integrable_on {- pi..pi}\n  0 < d\n  \\<bar>?x - t\\<bar> < d \\<Longrightarrow>\n  \\<bar>f ?x - f t\\<bar> \\<le> M * \\<bar>?x - t\\<bar>\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "by (fastforce simp add:)"], ["", "text\\<open>In particular, if left and right derivatives both exist\\<close>"], ["", "proposition bi_differentiable_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and f_lt: \"f differentiable at_left t\"\n    and f_gt: \"f differentiable at_right t\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "obtain D_lt where D_lt: \"\\<And>e. e > 0 \\<Longrightarrow> \\<exists>d>0. \\<forall>x<t. 0 < dist x t \\<and> dist x t < d \\<longrightarrow> dist ((f x - f t) / (x - t)) D_lt < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D_lt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x<t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_lt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using f_lt"], ["proof (prove)\nusing this:\n  f differentiable at_left t\n\ngoal (1 subgoal):\n 1. (\\<And>D_lt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x<t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_lt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding has_field_derivative_iff real_differentiable_def Lim_within"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     \\<forall>e>0.\n        \\<exists>d>0.\n           \\<forall>x\\<in>{..<t}.\n              0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n              dist ((f x - f t) / (x - t)) D < e\n\ngoal (1 subgoal):\n 1. (\\<And>D_lt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x<t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_lt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson lessThan_iff)"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x<t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_lt < ?e\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "then"], ["proof (chain)\npicking this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x<t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_lt < ?e", "obtain d_lt where \"d_lt > 0\"\n    and d_lt: \"\\<And>x. \\<lbrakk>x < t; 0 < \\<bar>x - t\\<bar>; \\<bar>x - t\\<bar> < d_lt\\<rbrakk> \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x<t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_lt < ?e\n\ngoal (1 subgoal):\n 1. (\\<And>d_lt.\n        \\<lbrakk>0 < d_lt;\n         \\<And>x.\n            \\<lbrakk>x < t; 0 < \\<bar>x - t\\<bar>;\n             \\<bar>x - t\\<bar> < d_lt\\<rbrakk>\n            \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_lt\\<bar>\n                              < 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding dist_real_def"], ["proof (prove)\nusing this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x<t.\n        0 < \\<bar>x - t\\<bar> \\<and> \\<bar>x - t\\<bar> < d \\<longrightarrow>\n        \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < ?e\n\ngoal (1 subgoal):\n 1. (\\<And>d_lt.\n        \\<lbrakk>0 < d_lt;\n         \\<And>x.\n            \\<lbrakk>x < t; 0 < \\<bar>x - t\\<bar>;\n             \\<bar>x - t\\<bar> < d_lt\\<rbrakk>\n            \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_lt\\<bar>\n                              < 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis dist_commute dist_real_def zero_less_one)"], ["proof (state)\nthis:\n  0 < d_lt\n  \\<lbrakk>?x < t; 0 < \\<bar>?x - t\\<bar>;\n   \\<bar>?x - t\\<bar> < d_lt\\<rbrakk>\n  \\<Longrightarrow> \\<bar>(f ?x - f t) / (?x - t) - D_lt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "obtain D_gt where D_gt: \"\\<And>e. e > 0 \\<Longrightarrow> \\<exists>d>0. \\<forall>x>t. 0 < dist x t \\<and> dist x t < d \\<longrightarrow> dist ((f x - f t) / (x - t)) D_gt < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>D_gt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x>t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_gt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using f_gt"], ["proof (prove)\nusing this:\n  f differentiable at_right t\n\ngoal (1 subgoal):\n 1. (\\<And>D_gt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x>t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_gt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding has_field_derivative_iff real_differentiable_def Lim_within"], ["proof (prove)\nusing this:\n  \\<exists>D.\n     \\<forall>e>0.\n        \\<exists>d>0.\n           \\<forall>x\\<in>{t<..}.\n              0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n              dist ((f x - f t) / (x - t)) D < e\n\ngoal (1 subgoal):\n 1. (\\<And>D_gt.\n        (\\<And>e.\n            0 < e \\<Longrightarrow>\n            \\<exists>d>0.\n               \\<forall>x>t.\n                  0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                  dist ((f x - f t) / (x - t)) D_gt < e) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (meson greaterThan_iff)"], ["proof (state)\nthis:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x>t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_gt < ?e\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "then"], ["proof (chain)\npicking this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x>t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_gt < ?e", "obtain d_gt where \"d_gt > 0\"\n    and d_gt: \"\\<And>x. \\<lbrakk>x > t; 0 < \\<bar>x - t\\<bar>; \\<bar>x - t\\<bar> < d_gt\\<rbrakk> \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x>t.\n        0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n        dist ((f x - f t) / (x - t)) D_gt < ?e\n\ngoal (1 subgoal):\n 1. (\\<And>d_gt.\n        \\<lbrakk>0 < d_gt;\n         \\<And>x.\n            \\<lbrakk>t < x; 0 < \\<bar>x - t\\<bar>;\n             \\<bar>x - t\\<bar> < d_gt\\<rbrakk>\n            \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_gt\\<bar>\n                              < 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding dist_real_def"], ["proof (prove)\nusing this:\n  0 < ?e \\<Longrightarrow>\n  \\<exists>d>0.\n     \\<forall>x>t.\n        0 < \\<bar>x - t\\<bar> \\<and> \\<bar>x - t\\<bar> < d \\<longrightarrow>\n        \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < ?e\n\ngoal (1 subgoal):\n 1. (\\<And>d_gt.\n        \\<lbrakk>0 < d_gt;\n         \\<And>x.\n            \\<lbrakk>t < x; 0 < \\<bar>x - t\\<bar>;\n             \\<bar>x - t\\<bar> < d_gt\\<rbrakk>\n            \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_gt\\<bar>\n                              < 1\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis dist_commute dist_real_def zero_less_one)"], ["proof (state)\nthis:\n  0 < d_gt\n  \\<lbrakk>t < ?x; 0 < \\<bar>?x - t\\<bar>;\n   \\<bar>?x - t\\<bar> < d_gt\\<rbrakk>\n  \\<Longrightarrow> \\<bar>(f ?x - f t) / (?x - t) - D_gt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "proof (rule Lipschitz_Fourier_convergence_periodic [OF f])"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. \\<And>x.\n       \\<bar>x - t\\<bar> < ?d \\<Longrightarrow>\n       \\<bar>f x - f t\\<bar> \\<le> ?M * \\<bar>x - t\\<bar>\n 3. \\<And>x. f (x + 2 * pi) = f x", "fix x"], ["proof (state)\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. \\<And>x.\n       \\<bar>x - t\\<bar> < ?d \\<Longrightarrow>\n       \\<bar>f x - f t\\<bar> \\<le> ?M * \\<bar>x - t\\<bar>\n 3. \\<And>x. f (x + 2 * pi) = f x", "assume \"\\<bar>x - t\\<bar> < min d_lt d_gt\""], ["proof (state)\nthis:\n  \\<bar>x - t\\<bar> < min d_lt d_gt\n\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. \\<And>x.\n       \\<bar>x - t\\<bar> < ?d \\<Longrightarrow>\n       \\<bar>f x - f t\\<bar> \\<le> ?M * \\<bar>x - t\\<bar>\n 3. \\<And>x. f (x + 2 * pi) = f x", "then"], ["proof (chain)\npicking this:\n  \\<bar>x - t\\<bar> < min d_lt d_gt", "have *: \"\\<bar>x - t\\<bar> < d_lt\" \"\\<bar>x - t\\<bar> < d_gt\""], ["proof (prove)\nusing this:\n  \\<bar>x - t\\<bar> < min d_lt d_gt\n\ngoal (1 subgoal):\n 1. \\<bar>x - t\\<bar> < d_lt &&& \\<bar>x - t\\<bar> < d_gt", "by auto"], ["proof (state)\nthis:\n  \\<bar>x - t\\<bar> < d_lt\n  \\<bar>x - t\\<bar> < d_gt\n\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. \\<And>x.\n       \\<bar>x - t\\<bar> < ?d \\<Longrightarrow>\n       \\<bar>f x - f t\\<bar> \\<le> ?M * \\<bar>x - t\\<bar>\n 3. \\<And>x. f (x + 2 * pi) = f x", "consider \"x<t\" | \"x=t\" | \"x>t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x < t \\<Longrightarrow> thesis; x = t \\<Longrightarrow> thesis;\n     t < x \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by linarith"], ["proof (state)\nthis:\n  \\<lbrakk>x < t \\<Longrightarrow> ?thesis; x = t \\<Longrightarrow> ?thesis;\n   t < x \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (3 subgoals):\n 1. 0 < ?d\n 2. \\<And>x.\n       \\<bar>x - t\\<bar> < ?d \\<Longrightarrow>\n       \\<bar>f x - f t\\<bar> \\<le> ?M * \\<bar>x - t\\<bar>\n 3. \\<And>x. f (x + 2 * pi) = f x", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>x < t \\<Longrightarrow> ?thesis; x = t \\<Longrightarrow> ?thesis;\n   t < x \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show \"\\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1)  * \\<bar>x - t\\<bar>\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x < t \\<Longrightarrow> ?thesis; x = t \\<Longrightarrow> ?thesis;\n   t < x \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "proof cases"], ["proof (state)\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "case 1"], ["proof (state)\nthis:\n  x < t\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  x < t", "have \"\\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  x < t\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1", "using d_lt [OF 1] *"], ["proof (prove)\nusing this:\n  x < t\n  \\<lbrakk>0 < \\<bar>x - t\\<bar>; \\<bar>x - t\\<bar> < d_lt\\<rbrakk>\n  \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1\n  \\<bar>x - t\\<bar> < d_lt\n  \\<bar>x - t\\<bar> < d_gt\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1", "by auto"], ["proof (state)\nthis:\n  \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1", "have \"\\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_lt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  \\<bar>(f x - f t) / (x - t) - D_lt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_lt\\<bar> < 1", "by linarith"], ["proof (state)\nthis:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_lt\\<bar> < 1\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_lt\\<bar> < 1", "have \"\\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_lt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>", "by (simp add: comm_semiring_class.distrib divide_simps split: if_split_asm)"], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "have \"\\<dots> \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "by (simp add: mult_right_mono)"], ["proof (state)\nthis:\n  (\\<bar>D_lt\\<bar> + 1) * \\<bar>x - t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (3 subgoals):\n 1. x < t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 3. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "."], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "case 3"], ["proof (state)\nthis:\n  t < x\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  t < x", "have \"\\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  t < x\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1", "using d_gt [OF 3] *"], ["proof (prove)\nusing this:\n  t < x\n  \\<lbrakk>0 < \\<bar>x - t\\<bar>; \\<bar>x - t\\<bar> < d_gt\\<rbrakk>\n  \\<Longrightarrow> \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1\n  \\<bar>x - t\\<bar> < d_lt\n  \\<bar>x - t\\<bar> < d_gt\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1", "by auto"], ["proof (state)\nthis:\n  \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1", "have \"\\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_gt\\<bar> < 1\""], ["proof (prove)\nusing this:\n  \\<bar>(f x - f t) / (x - t) - D_gt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_gt\\<bar> < 1", "by linarith"], ["proof (state)\nthis:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_gt\\<bar> < 1\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_gt\\<bar> < 1", "have \"\\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\""], ["proof (prove)\nusing this:\n  \\<bar>(f x - f t) / (x - t)\\<bar> - \\<bar>D_gt\\<bar> < 1\n\ngoal (1 subgoal):\n 1. \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "by (simp add: comm_semiring_class.distrib divide_simps split: if_split_asm)"], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "also"], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar> \\<le> (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "have \"\\<dots> \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "by (simp add: mult_right_mono)"], ["proof (state)\nthis:\n  (\\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (2 subgoals):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n 2. t < x \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "finally"], ["proof (chain)\npicking this:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "."], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (1 subgoal):\n 1. x = t \\<Longrightarrow>\n    \\<bar>f x - f t\\<bar>\n    \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>", "qed auto"], ["proof (state)\nthis:\n  \\<bar>f x - f t\\<bar>\n  \\<le> (\\<bar>D_lt\\<bar> + \\<bar>D_gt\\<bar> + 1) * \\<bar>x - t\\<bar>\n\ngoal (2 subgoals):\n 1. 0 < min d_lt d_gt\n 2. \\<And>x. f (x + 2 * pi) = f x", "qed (auto simp: \\<open>0 < d_gt\\<close> \\<open>0 < d_lt\\<close> periodic)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> f t\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>And in particular at points where the function is differentiable\\<close>"], ["", "lemma differentiable_Fourier_convergence_periodic:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and fdif: \"f differentiable (at t)\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> f t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> f t", "by (rule bi_differentiable_Fourier_convergence_periodic) (auto simp: differentiable_at_withinI assms)"], ["", "text\\<open>Use reflection to halve the region of integration\\<close>"], ["", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f(t+x)) absolutely_integrable_on {-pi..pi}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * f(t-x)) absolutely_integrable_on {-pi..pi}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n    {- pi..pi} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on\n    {- pi..pi}", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n    {- pi..pi}\n 2. (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}\n 3. (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on\n    {- pi..pi}", "show \"(\\<lambda>x. Dirichlet_kernel n x * f(t+x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n    {- pi..pi}", "apply (rule absolutely_integrable_mult_Dirichlet_kernel)"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset [OF f, of t] periodic"], ["proof (prove)\nusing this:\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}\n 2. (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on\n    {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n  {- pi..pi}", "show \"(\\<lambda>x. Dirichlet_kernel n x * f(t-x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}", "by (subst absolutely_integrable_reflect_real [symmetric]) simp"], ["proof (state)\nthis:\n  (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on\n    {- pi..pi}", "show \"(\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on\n    {- pi..pi}", "by (simp add: absolutely_integrable_measurable_real borel_measurable_integrable integrable_Dirichlet_kernel)"], ["proof (state)\nthis:\n  (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected_part:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * f(t+x)) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * f(t-x)) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {0..d}", "using absolutely_integrable_mult_Dirichlet_kernel_reflected [OF f periodic, of n] \\<open>d \\<le> pi\\<close>"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Dirichlet_kernel n x * f (?t + x)) absolutely_integrable_on\n  {- pi..pi}\n  (\\<lambda>x. Dirichlet_kernel n x * f (?t - x)) absolutely_integrable_on\n  {- pi..pi}\n  (\\<lambda>x. Dirichlet_kernel n x * ?c) absolutely_integrable_on\n  {- pi..pi}\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x. Dirichlet_kernel n x * c) absolutely_integrable_on {0..d}", "by (force intro: absolutely_integrable_on_subinterval)+"], ["", "lemma absolutely_integrable_mult_Dirichlet_kernel_reflected_part2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Dirichlet_kernel n x * (f(t+x) + f(t-x))) absolutely_integrable_on {0..d}\"\n        \"(\\<lambda>x. Dirichlet_kernel n x * ((f(t+x) + f(t-x)) - c)) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Dirichlet_kernel n x *\n        (f (t + x) + f (t - x))) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x.\n        Dirichlet_kernel n x *\n        (f (t + x) + f (t - x) - c)) absolutely_integrable_on\n    {0..d}", "using absolutely_integrable_mult_Dirichlet_kernel_reflected_part assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x; ?d \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        Dirichlet_kernel ?n x *\n                        ?f (?t + x)) absolutely_integrable_on\n                    {0..?d}\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x; ?d \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        Dirichlet_kernel ?n x *\n                        ?f (?t - x)) absolutely_integrable_on\n                    {0..?d}\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x; ?d \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        Dirichlet_kernel ?n x * ?c) absolutely_integrable_on\n                    {0..?d}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Dirichlet_kernel n x *\n        (f (t + x) + f (t - x))) absolutely_integrable_on\n    {0..d} &&&\n    (\\<lambda>x.\n        Dirichlet_kernel n x *\n        (f (t + x) + f (t - x) - c)) absolutely_integrable_on\n    {0..d}", "by (simp_all add: distrib_left right_diff_distrib)"], ["", "lemma integral_reflect_and_add:\n  fixes f :: \"real \\<Rightarrow> 'b::euclidean_space\"\n  assumes \"integrable (lebesgue_on {-a..a}) f\"\n  shows \"integral\\<^sup>L (lebesgue_on {-a..a}) f = integral\\<^sup>L (lebesgue_on {0..a})  (\\<lambda>x. f x + f(-x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "proof (cases \"a \\<ge> 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "case True"], ["proof (state)\nthis:\n  0 \\<le> a\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "have f: \"integrable (lebesgue_on {0..a}) f\" \"integrable (lebesgue_on {-a..0}) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..a}) f &&&\n    integrable (lebesgue_on {- a..0}) f", "using integrable_subinterval assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>integrable (lebesgue_on {?a..?b}) ?f;\n   {?c..?d} \\<subseteq> {?a..?b}\\<rbrakk>\n  \\<Longrightarrow> integrable (lebesgue_on {?c..?d}) ?f\n  integrable (lebesgue_on {- a..a}) f\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..a}) f &&&\n    integrable (lebesgue_on {- a..0}) f", "by fastforce+"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..a}) f\n  integrable (lebesgue_on {- a..0}) f\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "then"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {0..a}) f\n  integrable (lebesgue_on {- a..0}) f", "have fm: \"integrable (lebesgue_on {0..a}) (\\<lambda>x. f(-x))\""], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..a}) f\n  integrable (lebesgue_on {- a..0}) f\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..a}) (\\<lambda>x. f (- x))", "using integrable_reflect_real"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..a}) f\n  integrable (lebesgue_on {- a..0}) f\n  integrable (lebesgue_on {- ?b..- ?a}) (\\<lambda>x. ?f (- x)) =\n  integrable (lebesgue_on {?a..?b}) ?f\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..a}) (\\<lambda>x. f (- x))", "by fastforce"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..a}) (\\<lambda>x. f (- x))\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "have \"integral\\<^sup>L (lebesgue_on {-a..a}) f = integral\\<^sup>L (lebesgue_on {-a..0}) f + integral\\<^sup>L (lebesgue_on {0..a}) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    integral\\<^sup>L (lebesgue_on {- a..0}) f +\n    integral\\<^sup>L (lebesgue_on {0..a}) f", "by (simp add: True assms integral_combine)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- a..a}) f =\n  integral\\<^sup>L (lebesgue_on {- a..0}) f +\n  integral\\<^sup>L (lebesgue_on {0..a}) f\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "also"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- a..a}) f =\n  integral\\<^sup>L (lebesgue_on {- a..0}) f +\n  integral\\<^sup>L (lebesgue_on {0..a}) f\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "have \"\\<dots> = integral\\<^sup>L (lebesgue_on {0..a}) (\\<lambda>x. f(-x)) + integral\\<^sup>L (lebesgue_on {0..a}) f\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- a..0}) f +\n    integral\\<^sup>L (lebesgue_on {0..a}) f =\n    (LINT x|lebesgue_on {0..a}. f (- x)) +\n    integral\\<^sup>L (lebesgue_on {0..a}) f", "by (metis (no_types) add.inverse_inverse add.inverse_neutral integral_reflect_real)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- a..0}) f +\n  integral\\<^sup>L (lebesgue_on {0..a}) f =\n  (LINT x|lebesgue_on {0..a}. f (- x)) +\n  integral\\<^sup>L (lebesgue_on {0..a}) f\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "also"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- a..0}) f +\n  integral\\<^sup>L (lebesgue_on {0..a}) f =\n  (LINT x|lebesgue_on {0..a}. f (- x)) +\n  integral\\<^sup>L (lebesgue_on {0..a}) f\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "have \"\\<dots> = integral\\<^sup>L (lebesgue_on {0..a}) (\\<lambda>x. f x + f(-x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {0..a}. f (- x)) +\n    integral\\<^sup>L (lebesgue_on {0..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "by (simp add: fm f)"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {0..a}. f (- x)) +\n  integral\\<^sup>L (lebesgue_on {0..a}) f =\n  LINT x|lebesgue_on {0..a}. f x + f (- x)\n\ngoal (2 subgoals):\n 1. 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)\n 2. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "finally"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {- a..a}) f =\n  LINT x|lebesgue_on {0..a}. f x + f (- x)", "show ?thesis"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {- a..a}) f =\n  LINT x|lebesgue_on {0..a}. f x + f (- x)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "."], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {- a..a}) f =\n  LINT x|lebesgue_on {0..a}. f x + f (- x)\n\ngoal (1 subgoal):\n 1. \\<not> 0 \\<le> a \\<Longrightarrow>\n    integral\\<^sup>L (lebesgue_on {- a..a}) f =\n    LINT x|lebesgue_on {0..a}. f x + f (- x)", "qed (use assms in auto)"], ["", "lemma Fourier_sum_offset_Dirichlet_kernel_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<Sum>k\\<le>2*n. Fourier_coefficient f k * trigonometric_set k t) - l\n       = (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l)) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have fxt: \"(\\<lambda>x. f(x + t)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have int: \"integrable (lebesgue_on {0..pi}) (Dirichlet_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi}) (Dirichlet_kernel n)", "using not_integrable_integral_eq"], ["proof (prove)\nusing this:\n  \\<not> integrable ?M ?f \\<Longrightarrow>\n  integral\\<^sup>L ?M ?f = (0::?'b)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi}) (Dirichlet_kernel n)", "by fastforce"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..pi}) (Dirichlet_kernel n)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have \"LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)\n      = LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * f(x + t) + Dirichlet_kernel n (- x) * f(- x + t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t) =\n    LINT x|lebesgue_on {0..pi}.\n       Dirichlet_kernel n x * f (x + t) +\n       Dirichlet_kernel n (- x) * f (- x + t)", "by (simp add: integral_reflect_and_add absolutely_integrable_imp_integrable absolutely_integrable_mult_Dirichlet_kernel fxt)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t) =\n  LINT x|lebesgue_on {0..pi}.\n     Dirichlet_kernel n x * f (x + t) +\n     Dirichlet_kernel n (- x) * f (- x + t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t) =\n  LINT x|lebesgue_on {0..pi}.\n     Dirichlet_kernel n x * f (x + t) +\n     Dirichlet_kernel n (- x) * f (- x + t)\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have \"\\<dots> = (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l)) + pi * l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..pi}.\n       Dirichlet_kernel n x * f (x + t) +\n       Dirichlet_kernel n (- x) * f (- x + t) =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) +\n    pi * l", "using absolutely_integrable_mult_Dirichlet_kernel_reflected_part [OF f periodic order_refl, of n t]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Dirichlet_kernel n x * f (t + x)) absolutely_integrable_on\n  {0..pi}\n  (\\<lambda>x. Dirichlet_kernel n x * f (t - x)) absolutely_integrable_on\n  {0..pi}\n  (\\<lambda>x. Dirichlet_kernel n x * t) absolutely_integrable_on {0..pi}\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..pi}.\n       Dirichlet_kernel n x * f (x + t) +\n       Dirichlet_kernel n (- x) * f (- x + t) =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) +\n    pi * l", "apply (simp add: algebra_simps absolutely_integrable_imp_integrable int)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..pi}.\n     Dirichlet_kernel n x * f (x + t) +\n     Dirichlet_kernel n (- x) * f (- x + t) =\n  (LINT x|lebesgue_on {0..pi}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) +\n  pi * l\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "finally"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t) =\n  (LINT x|lebesgue_on {0..pi}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) +\n  pi * l", "show ?thesis"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t) =\n  (LINT x|lebesgue_on {0..pi}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) +\n  pi * l\n\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "by (simp add: Fourier_sum_offset_Dirichlet_kernel assms divide_simps)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t) - l =\n  (LINT x|lebesgue_on {0..pi}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n  pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_limit_Dirichlet_kernel_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "apply (simp flip: Fourier_sum_limit_pair [OF f])"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>2 * n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "apply (simp add: Lim_null [where l=l] Fourier_sum_offset_Dirichlet_kernel_half assms)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "subsection\\<open>Localization principle: convergence only depends on values \"nearby\"\\<close>"], ["", "proposition Riemann_localization_integral:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and g: \"g absolutely_integrable_on {-pi..pi}\"\n    and \"d > 0\" and d: \"\\<And>x. \\<bar>x\\<bar> < d \\<Longrightarrow> f x = g x\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * f x)\n            - integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * g x))\n         \\<longlonglongrightarrow> 0\"  (is \"?a \\<longlonglongrightarrow> 0\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n    \\<longlonglongrightarrow> 0", "let ?f = \"\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin(x/2) / 2\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n    \\<longlonglongrightarrow> 0", "have eq: \"?a n = integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin((n+1/2) * x) * ?f x)\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "have \"?a n = integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x)", "apply (simp add: absolutely_integrable_imp_integrable absolutely_integrable_mult_Dirichlet_kernel f g flip: Bochner_Integration.integral_diff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       Dirichlet_kernel n x * f x - Dirichlet_kernel n x * g x =\n    LINT x|lebesgue_on {- pi..pi}.\n       Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x)", "apply (auto simp: d algebra_simps intro: Bochner_Integration.integral_cong)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "also"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "have \"\\<dots> = integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. sin((n+1/2) * x) * ?f x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "using \\<open>d > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {- pi..pi}.\n       Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "by (auto simp: Dirichlet_kernel_def intro: Bochner_Integration.integral_cong)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {- pi..pi}.\n     Dirichlet_kernel n x * (if \\<bar>x\\<bar> < d then 0 else f x - g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real n + 1 / 2) * x) *\n     ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "finally"], ["proof (chain)\npicking this:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real n + 1 / 2) * x) *\n     ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "show ?thesis"], ["proof (prove)\nusing this:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real n + 1 / 2) * x) *\n     ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n    (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)", "."], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real n + 1 / 2) * x) *\n     ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel ?n x * f x) -\n  (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel ?n x * g x) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) *\n     ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n    \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n    \\<longlonglongrightarrow> 0", "unfolding eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           sin ((real n + 1 / 2) * x) *\n           ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) / 2))\n    \\<longlonglongrightarrow> 0", "proof (rule Riemann_lebesgue_sin_half)"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n        2) absolutely_integrable_on\n    {- pi..pi}", "obtain B where \"B>0\" and B: \"\\<And>x. x \\<in> ({-pi..pi} - {-d<..<d}) \\<Longrightarrow> \\<bar>inverse (sin (x/2))\\<bar> \\<le> B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using bounded_inverse_sin_half [OF \\<open>d > 0\\<close>]"], ["proof (prove)\nusing this:\n  (\\<And>B.\n      \\<lbrakk>0 < B;\n       \\<And>x.\n          x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n          \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>B.\n        \\<lbrakk>0 < B;\n         \\<And>x.\n            x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n            \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  0 < B\n  ?x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n  \\<bar>inverse (sin (?x / 2))\\<bar> \\<le> B\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n        2) absolutely_integrable_on\n    {- pi..pi}", "have \"(\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x/2)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) /\n        sin (x / 2)) absolutely_integrable_on\n    {- pi..pi}", "proof (rule measurable_bounded_by_integrable_imp_absolutely_integrable)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. ?g integrable_on {- pi..pi}\n 4. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> ?g x", "show \"(\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x/2)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "proof (intro measurable)"], ["proof (state)\ngoal (6 subgoals):\n 1. 0 \\<in> space borel\n 2. f \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 3. g \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 4. (\\<lambda>x. x) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 5. d \\<in> space borel\n 6. (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "show \"f \\<in> borel_measurable (lebesgue_on {-pi..pi})\" \"g \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (lebesgue_on {- pi..pi}) &&&\n    g \\<in> borel_measurable (lebesgue_on {- pi..pi})", "using absolutely_integrable_on_def f g integrable_imp_measurable"], ["proof (prove)\nusing this:\n  (?f absolutely_integrable_on ?S) =\n  (?f integrable_on ?S \\<and> (\\<lambda>x. norm (?f x)) integrable_on ?S)\n  f absolutely_integrable_on {- pi..pi}\n  g absolutely_integrable_on {- pi..pi}\n  ?f integrable_on ?S \\<Longrightarrow>\n  ?f \\<in> borel_measurable (lebesgue_on ?S)\n\ngoal (1 subgoal):\n 1. f \\<in> borel_measurable (lebesgue_on {- pi..pi}) &&&\n    g \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by blast+"], ["proof (state)\nthis:\n  f \\<in> borel_measurable (lebesgue_on {- pi..pi})\n  g \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (4 subgoals):\n 1. 0 \\<in> space borel\n 2. (\\<lambda>x. x) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 3. d \\<in> space borel\n 4. (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "show \"(\\<lambda>x. x) \\<in> borel_measurable (lebesgue_on {-pi..pi})\"\n             \"(\\<lambda>x. sin (x/2)) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. x) \\<in> borel_measurable (lebesgue_on {- pi..pi}) &&&\n    (\\<lambda>x. sin (x / 2))\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (intro continuous_intros continuous_imp_measurable_on_sets_lebesgue | force)+"], ["proof (state)\nthis:\n  (\\<lambda>x. x) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n  (\\<lambda>x. sin (x / 2)) \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (2 subgoals):\n 1. 0 \\<in> space borel\n 2. d \\<in> space borel", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n  \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> ?g x", "have \"(\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n    {- pi..pi}", "using \\<open>B > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < B\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n    {- pi..pi}", "by (simp add: f g set_integrable_abs)"], ["proof (state)\nthis:\n  (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. ?g integrable_on {- pi..pi}\n 3. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> ?g x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n  {- pi..pi}", "show \"(\\<lambda>x. B * \\<bar>f x - g x\\<bar>) integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) integrable_on {- pi..pi}", "using absolutely_integrable_on_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) absolutely_integrable_on\n  {- pi..pi}\n  (?f absolutely_integrable_on ?S) =\n  (?f integrable_on ?S \\<and> (\\<lambda>x. norm (?f x)) integrable_on ?S)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) integrable_on {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x. B * \\<bar>f x - g x\\<bar>) integrable_on {- pi..pi}\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> B * \\<bar>f x - g x\\<bar>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> B * \\<bar>f x - g x\\<bar>", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> B * \\<bar>f x - g x\\<bar>", "assume x: \"x \\<in> {-pi..pi}\""], ["proof (state)\nthis:\n  x \\<in> {- pi..pi}\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> B * \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- pi..pi}", "have [simp]: \"sin (x/2) = 0 \\<longleftrightarrow> x=0\""], ["proof (prove)\nusing this:\n  x \\<in> {- pi..pi}\n\ngoal (1 subgoal):\n 1. (sin (x / 2) = 0) = (x = 0)", "using \\<open>0 < d\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> {- pi..pi}\n  0 < d\n\ngoal (1 subgoal):\n 1. (sin (x / 2) = 0) = (x = 0)", "by (force simp: sin_zero_iff)"], ["proof (state)\nthis:\n  (sin (x / 2) = 0) = (x = 0)\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. \\<And>x.\n       x \\<in> {- pi..pi} \\<Longrightarrow>\n       norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n       \\<le> B * \\<bar>f x - g x\\<bar>", "show \"norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x/2)) \\<le> B * \\<bar>f x - g x\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "proof (cases \"\\<bar>x\\<bar> < d\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>\n 2. \\<not> \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "case False"], ["proof (state)\nthis:\n  \\<not> \\<bar>x\\<bar> < d\n\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>\n 2. \\<not> \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  \\<not> \\<bar>x\\<bar> < d", "have \"1 \\<le> B * \\<bar>sin (x/2)\\<bar>\""], ["proof (prove)\nusing this:\n  \\<not> \\<bar>x\\<bar> < d\n\ngoal (1 subgoal):\n 1. 1 \\<le> B * \\<bar>sin (x / 2)\\<bar>", "using \\<open>B > 0\\<close> B [of x] x \\<open>d > 0\\<close>"], ["proof (prove)\nusing this:\n  \\<not> \\<bar>x\\<bar> < d\n  0 < B\n  x \\<in> {- pi..pi} - {- d<..<d} \\<Longrightarrow>\n  \\<bar>inverse (sin (x / 2))\\<bar> \\<le> B\n  x \\<in> {- pi..pi}\n  0 < d\n\ngoal (1 subgoal):\n 1. 1 \\<le> B * \\<bar>sin (x / 2)\\<bar>", "by (auto simp: abs_less_iff divide_simps split: if_split_asm)"], ["proof (state)\nthis:\n  1 \\<le> B * \\<bar>sin (x / 2)\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>\n 2. \\<not> \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  1 \\<le> B * \\<bar>sin (x / 2)\\<bar>", "have \"1 * \\<bar>f x - g x\\<bar> \\<le> B * \\<bar>sin (x/2)\\<bar> * \\<bar>f x - g x\\<bar>\""], ["proof (prove)\nusing this:\n  1 \\<le> B * \\<bar>sin (x / 2)\\<bar>\n\ngoal (1 subgoal):\n 1. 1 * \\<bar>f x - g x\\<bar>\n    \\<le> B * \\<bar>sin (x / 2)\\<bar> * \\<bar>f x - g x\\<bar>", "by (metis (full_types) abs_ge_zero mult.commute mult_left_mono)"], ["proof (state)\nthis:\n  1 * \\<bar>f x - g x\\<bar>\n  \\<le> B * \\<bar>sin (x / 2)\\<bar> * \\<bar>f x - g x\\<bar>\n\ngoal (2 subgoals):\n 1. \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>\n 2. \\<not> \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "then"], ["proof (chain)\npicking this:\n  1 * \\<bar>f x - g x\\<bar>\n  \\<le> B * \\<bar>sin (x / 2)\\<bar> * \\<bar>f x - g x\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  1 * \\<bar>f x - g x\\<bar>\n  \\<le> B * \\<bar>sin (x / 2)\\<bar> * \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "using False"], ["proof (prove)\nusing this:\n  1 * \\<bar>f x - g x\\<bar>\n  \\<le> B * \\<bar>sin (x / 2)\\<bar> * \\<bar>f x - g x\\<bar>\n  \\<not> \\<bar>x\\<bar> < d\n\ngoal (1 subgoal):\n 1. norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "by (auto simp: divide_simps algebra_simps)"], ["proof (state)\nthis:\n  norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n  \\<le> B * \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x\\<bar> < d \\<Longrightarrow>\n    norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n    \\<le> B * \\<bar>f x - g x\\<bar>", "qed (simp add: d)"], ["proof (state)\nthis:\n  norm ((if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2))\n  \\<le> B * \\<bar>f x - g x\\<bar>\n\ngoal (1 subgoal):\n 1. {- pi..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < d then 0 else f x - g x) /\n      sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n        2) absolutely_integrable_on\n    {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < d then 0 else f x - g x) /\n      sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}", "show \"(\\<lambda>x. (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x/2) / 2) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < d then 0 else f x - g x) /\n      sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n        2) absolutely_integrable_on\n    {- pi..pi}", "using set_integrable_divide"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < d then 0 else f x - g x) /\n      sin (x / 2)) absolutely_integrable_on\n  {- pi..pi}\n  (?a \\<noteq> (0::?'a) \\<Longrightarrow>\n   set_integrable ?M ?A ?f) \\<Longrightarrow>\n  set_integrable ?M ?A (\\<lambda>t. ?f t / ?a)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n        2) absolutely_integrable_on\n    {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < d then 0 else f x - g x) / sin (x / 2) /\n      2) absolutely_integrable_on\n  {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g x))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Riemann_localization_integral_range:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. integral\\<^sup>L (lebesgue_on {-pi..pi}) (\\<lambda>x. Dirichlet_kernel n x * f x)\n            - integral\\<^sup>L (lebesgue_on {-d..d}) (\\<lambda>x. Dirichlet_kernel n x * f x))\n             \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n    \\<longlonglongrightarrow> 0", "have *: \"(\\<lambda>n. (LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f x)\n              - (LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * (if x \\<in> {-d..d} then f x else 0)))\n           \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- pi..pi}.\n            Dirichlet_kernel n x * (if x \\<in> {- d..d} then f x else 0)))\n    \\<longlonglongrightarrow> 0", "proof (rule Riemann_localization_integral [OF f _ \\<open>0 < d\\<close>])"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x.\n       \\<bar>x\\<bar> < d \\<Longrightarrow>\n       f x = (if x \\<in> {- d..d} then f x else 0)", "have \"f absolutely_integrable_on {-d..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- d..d}", "using f absolutely_integrable_on_subinterval \\<open>d \\<le> pi\\<close>"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  \\<lbrakk>?f absolutely_integrable_on ?S; {?a..?b} \\<subseteq> ?S\\<rbrakk>\n  \\<Longrightarrow> ?f absolutely_integrable_on {?a..?b}\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- d..d}", "by fastforce"], ["proof (state)\nthis:\n  f absolutely_integrable_on {- d..d}\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x.\n       \\<bar>x\\<bar> < d \\<Longrightarrow>\n       f x = (if x \\<in> {- d..d} then f x else 0)", "moreover"], ["proof (state)\nthis:\n  f absolutely_integrable_on {- d..d}\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x.\n       \\<bar>x\\<bar> < d \\<Longrightarrow>\n       f x = (if x \\<in> {- d..d} then f x else 0)", "have \"(\\<lambda>x. if - pi \\<le> x \\<and> x \\<le> pi then if x \\<in> {-d..d} then f x else 0  else 0)\n                 = (\\<lambda>x. if x \\<in> {-d..d} then f x else 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if - pi \\<le> x \\<and> x \\<le> pi\n        then if x \\<in> {- d..d} then f x else 0 else 0) =\n    (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)", "using \\<open>d \\<le> pi\\<close>"], ["proof (prove)\nusing this:\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if - pi \\<le> x \\<and> x \\<le> pi\n        then if x \\<in> {- d..d} then f x else 0 else 0) =\n    (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)", "by force"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      if - pi \\<le> x \\<and> x \\<le> pi\n      then if x \\<in> {- d..d} then f x else 0 else 0) =\n  (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n    {- pi..pi}\n 2. \\<And>x.\n       \\<bar>x\\<bar> < d \\<Longrightarrow>\n       f x = (if x \\<in> {- d..d} then f x else 0)", "ultimately"], ["proof (chain)\npicking this:\n  f absolutely_integrable_on {- d..d}\n  (\\<lambda>x.\n      if - pi \\<le> x \\<and> x \\<le> pi\n      then if x \\<in> {- d..d} then f x else 0 else 0) =\n  (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)", "show \"(\\<lambda>x. if x \\<in> {-d..d} then f x else 0) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- d..d}\n  (\\<lambda>x.\n      if - pi \\<le> x \\<and> x \\<le> pi\n      then if x \\<in> {- d..d} then f x else 0 else 0) =\n  (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n    {- pi..pi}", "apply (subst absolutely_integrable_restrict_UNIV [symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f absolutely_integrable_on {- d..d};\n     (\\<lambda>x.\n         if - pi \\<le> x \\<and> x \\<le> pi\n         then if x \\<in> {- d..d} then f x else 0 else 0) =\n     (\\<lambda>x. if x \\<in> {- d..d} then f x else 0)\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x.\n                          if x \\<in> {- pi..pi}\n                          then if x \\<in> {- d..d} then f x else 0\n                          else 0) absolutely_integrable_on\n                      UNIV", "apply (simp flip: absolutely_integrable_restrict_UNIV [of \"{-d..d}\" f])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x. if x \\<in> {- d..d} then f x else 0) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<bar>x\\<bar> < d \\<Longrightarrow>\n       f x = (if x \\<in> {- d..d} then f x else 0)", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- pi..pi}.\n          Dirichlet_kernel n x * (if x \\<in> {- d..d} then f x else 0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- pi..pi}.\n          Dirichlet_kernel n x * (if x \\<in> {- d..d} then f x else 0)))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- pi..pi}.\n          Dirichlet_kernel n x * (if x \\<in> {- d..d} then f x else 0)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n    \\<longlonglongrightarrow> 0", "using integral_restrict [of \"{-d..d}\" \"{-pi..pi}\" \"\\<lambda>x. Dirichlet_kernel _ x * f x\"] assms"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- pi..pi}.\n          Dirichlet_kernel n x * (if x \\<in> {- d..d} then f x else 0)))\n  \\<longlonglongrightarrow> 0\n  \\<lbrakk>{- d..d} \\<subseteq> {- pi..pi}; {- d..d} \\<in> sets lebesgue;\n   {- pi..pi} \\<in> sets lebesgue\\<rbrakk>\n  \\<Longrightarrow> LINT x|lebesgue_on {- pi..pi}.\n                       (if x \\<in> {- d..d}\n                        then Dirichlet_kernel ?uu3 x * f x else 0) =\n                    LINT x|lebesgue_on {- d..d}.\n                       Dirichlet_kernel ?uu3 x * f x\n  f absolutely_integrable_on {- pi..pi}\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n        (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n    \\<longlonglongrightarrow> 0", "by (simp add: if_distrib cong: if_cong)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Riemann_localization:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\" and g: \"g absolutely_integrable_on {-pi..pi}\"\n    and perf: \"\\<And>x. f(x + 2*pi) = f x\"\n    and perg: \"\\<And>x. g(x + 2*pi) = g x\"\n    and \"d > 0\" and d: \"\\<And>x. \\<bar>x-t\\<bar> < d \\<Longrightarrow> f x = g x\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> c\n     \\<longleftrightarrow> (\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t) \\<longlonglongrightarrow> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c =\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c =\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c", "have \"(\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * f(x + t)) \\<longlonglongrightarrow> pi * c\n    \\<longleftrightarrow> (\\<lambda>n. LINT x|lebesgue_on {-pi..pi}. Dirichlet_kernel n x * g (x + t)) \\<longlonglongrightarrow> pi * c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n    \\<longlonglongrightarrow> pi * c =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g (x + t))\n    \\<longlonglongrightarrow> pi * c", "proof (intro Lim_transform_eq Riemann_localization_integral)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n 2. (\\<lambda>x. g (x + t)) absolutely_integrable_on {- pi..pi}\n 3. 0 < ?d1\n 4. \\<And>x. \\<bar>x\\<bar> < ?d1 \\<Longrightarrow> f (x + t) = g (x + t)", "show \"(\\<lambda>x. f(x + t)) absolutely_integrable_on {-pi..pi}\" \"(\\<lambda>x. g (x + t)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi} &&&\n    (\\<lambda>x. g (x + t)) absolutely_integrable_on {- pi..pi}", "using assms"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  g absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  g (?x + 2 * pi) = g ?x\n  0 < d\n  \\<bar>?x - t\\<bar> < d \\<Longrightarrow> f ?x = g ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi} &&&\n    (\\<lambda>x. g (x + t)) absolutely_integrable_on {- pi..pi}", "by (auto intro: absolutely_integrable_periodic_offset)"], ["proof (state)\nthis:\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n  (\\<lambda>x. g (x + t)) absolutely_integrable_on {- pi..pi}\n\ngoal (2 subgoals):\n 1. 0 < ?d1\n 2. \\<And>x. \\<bar>x\\<bar> < ?d1 \\<Longrightarrow> f (x + t) = g (x + t)", "qed (use assms in auto)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * c =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g (x + t))\n  \\<longlonglongrightarrow> pi * c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c =\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * c =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g (x + t))\n  \\<longlonglongrightarrow> pi * c", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f (x + t))\n  \\<longlonglongrightarrow> pi * c =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * g (x + t))\n  \\<longlonglongrightarrow> pi * c\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c =\n    (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t)\n    \\<longlonglongrightarrow> c", "by (simp add: Fourier_sum_limit_Dirichlet_kernel assms)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> c =\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient g k * trigonometric_set k t)\n  \\<longlonglongrightarrow> c\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Localize the earlier integral\\<close>"], ["", "lemma Riemann_localization_integral_range_half:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f x + f(-x)))\n            - (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f(-x)))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "have *: \"(\\<lambda>x. Dirichlet_kernel n x * f x) absolutely_integrable_on {-d..d}\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f x) absolutely_integrable_on\n    {- d..d}", "by (metis (full_types) absolutely_integrable_mult_Dirichlet_kernel absolutely_integrable_on_subinterval\n              \\<open>d \\<le> pi\\<close> atLeastatMost_subset_iff f neg_le_iff_le)"], ["proof (state)\nthis:\n  (\\<lambda>x. Dirichlet_kernel ?n x * f x) absolutely_integrable_on\n  {- d..d}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "using absolutely_integrable_mult_Dirichlet_kernel [OF f]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Dirichlet_kernel ?n x * f x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "using Riemann_localization_integral_range [OF assms]"], ["proof (prove)\nusing this:\n  (\\<lambda>x. Dirichlet_kernel ?n x * f x) absolutely_integrable_on\n  {- pi..pi}\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {- pi..pi}. Dirichlet_kernel n x * f x) -\n      (LINT x|lebesgue_on {- d..d}. Dirichlet_kernel n x * f x))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel n x * (f x + f (- x))) -\n        (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n    \\<longlonglongrightarrow> 0", "apply (simp add: \"*\" absolutely_integrable_imp_integrable integral_reflect_and_add)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>n.\n                (\\<lambda>x.\n                    Dirichlet_kernel n x * f x) absolutely_integrable_on\n                {- pi..pi};\n     (\\<lambda>n.\n         (LINT x|lebesgue_on {0..pi}.\n             Dirichlet_kernel n x * f x + Dirichlet_kernel n x * f (- x)) -\n         (LINT x|lebesgue_on {0..d}.\n             Dirichlet_kernel n x * f x + Dirichlet_kernel n x * f (- x)))\n     \\<longlonglongrightarrow> 0\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>n.\n                          (LINT x|lebesgue_on {0..pi}.\n                              Dirichlet_kernel n x * (f x + f (- x))) -\n                          (LINT x|lebesgue_on {0..d}.\n                              Dirichlet_kernel n x * (f x + f (- x))))\n                      \\<longlonglongrightarrow> 0", "apply (simp add: algebra_simps)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f x + f (- x))) -\n      (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f x + f (- x))))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_limit_Dirichlet_kernel_part:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and d: \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. (LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * ((f(t+x) + f(t-x)) - 2*l))) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "have \"(\\<lambda>x. f(t+x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset [OF f, of t] periodic"], ["proof (prove)\nusing this:\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (x + t)) absolutely_integrable_on {- pi..pi}\n  (\\<And>x. f (x + (pi - - pi)) = f x) \\<Longrightarrow>\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "have int: \"(\\<lambda>x. f(t+x) - l) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "have \"(\\<lambda>n. LINT x|lebesgue_on {0..pi}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l)) \\<longlonglongrightarrow> 0\n    \\<longleftrightarrow> (\\<lambda>n. LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * (f(t+x) + f(t-x) - 2*l)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "by (rule Lim_transform_eq) (use Riemann_localization_integral_range_half [OF int d] in auto)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "by (simp add: Fourier_sum_limit_Dirichlet_kernel_half assms)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Make a harmless simplifying tweak to the Dirichlet kernel\\<close>"], ["", "lemma inte_Dirichlet_kernel_mul_expand:\n  assumes f: \"f \\<in> borel_measurable (lebesgue_on S)\" and S: \"S \\<in> sets lebesgue\"\n  shows \"(LINT x|lebesgue_on S. Dirichlet_kernel n x * f x\n        = LINT x|lebesgue_on S. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\n       \\<and> (integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x)\n      \\<longleftrightarrow> integrable (lebesgue_on S) (\\<lambda>x. sin((n+1/2) * x) * f x / (2 * sin(x/2))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "proof (cases \"0 \\<in> S\")"], ["proof (state)\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "case True"], ["proof (state)\nthis:\n  0 \\<in> S\n\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "have *: \"{x. x = 0 \\<and> x \\<in> S} \\<in> sets (lebesgue_on S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {x. x = 0 \\<and> x \\<in> S} \\<in> sets (lebesgue_on S)", "using True"], ["proof (prove)\nusing this:\n  0 \\<in> S\n\ngoal (1 subgoal):\n 1. {x. x = 0 \\<and> x \\<in> S} \\<in> sets (lebesgue_on S)", "by (simp add: S sets_restrict_space_iff cong: conj_cong)"], ["proof (state)\nthis:\n  {x. x = 0 \\<and> x \\<in> S} \\<in> sets (lebesgue_on S)\n\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "have bm1: \"(\\<lambda>x. Dirichlet_kernel n x * f x) \\<in> borel_measurable (lebesgue_on S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Dirichlet_kernel n x * f x)\n    \\<in> borel_measurable (lebesgue_on S)", "unfolding Dirichlet_kernel_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if x = 0 then real n + 1 / 2\n         else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n        f x)\n    \\<in> borel_measurable (lebesgue_on S)", "by (force intro: * assms measurable continuous_imp_measurable_on_sets_lebesgue continuous_intros)"], ["proof (state)\nthis:\n  (\\<lambda>x. Dirichlet_kernel n x * f x)\n  \\<in> borel_measurable (lebesgue_on S)\n\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "have bm2: \"(\\<lambda>x. sin ((n + 1/2) * x) * f x / (2 * sin (x/2))) \\<in> borel_measurable (lebesgue_on S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n    \\<in> borel_measurable (lebesgue_on S)", "by (intro assms measurable continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n  \\<in> borel_measurable (lebesgue_on S)\n\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "have 0: \"{0} \\<in> null_sets (lebesgue_on S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {0} \\<in> null_sets (lebesgue_on S)", "using True"], ["proof (prove)\nusing this:\n  0 \\<in> S\n\ngoal (1 subgoal):\n 1. {0} \\<in> null_sets (lebesgue_on S)", "by (simp add: S null_sets_restrict_space)"], ["proof (state)\nthis:\n  {0} \\<in> null_sets (lebesgue_on S)\n\ngoal (2 subgoals):\n 1. 0 \\<in> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n 2. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "apply (intro conjI integral_cong_AE integrable_cong_AE bm1 bm2 AE_I' [OF 0])"], ["proof (prove)\ngoal (2 subgoals):\n 1. {x \\<in> space (lebesgue_on S).\n     Dirichlet_kernel n x * f x \\<noteq>\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2))}\n    \\<subseteq> {0}\n 2. {x \\<in> space (lebesgue_on S).\n     Dirichlet_kernel n x * f x \\<noteq>\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2))}\n    \\<subseteq> {0}", "unfolding Dirichlet_kernel_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. {x \\<in> space (lebesgue_on S).\n     (if x = 0 then real n + 1 / 2\n      else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n     f x \\<noteq>\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2))}\n    \\<subseteq> {0}\n 2. {x \\<in> space (lebesgue_on S).\n     (if x = 0 then real n + 1 / 2\n      else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n     f x \\<noteq>\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2))}\n    \\<subseteq> {0}", "by auto"], ["proof (state)\nthis:\n  LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n  LINT x|lebesgue_on S.\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n  integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n  integrable (lebesgue_on S)\n   (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n\ngoal (1 subgoal):\n 1. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "case False"], ["proof (state)\nthis:\n  0 \\<notin> S\n\ngoal (1 subgoal):\n 1. 0 \\<notin> S \\<Longrightarrow>\n    LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "then"], ["proof (chain)\npicking this:\n  0 \\<notin> S", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<notin> S\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "unfolding Dirichlet_kernel_def"], ["proof (prove)\nusing this:\n  0 \\<notin> S\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S.\n       (if x = 0 then real n + 1 / 2\n        else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n       f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n    integrable (lebesgue_on S)\n     (\\<lambda>x.\n         (if x = 0 then real n + 1 / 2\n          else sin ((real n + 1 / 2) * x) / (2 * sin (x / 2))) *\n         f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "by (auto intro!: Bochner_Integration.integral_cong Bochner_Integration.integrable_cong)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n  LINT x|lebesgue_on S.\n     sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n  integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n  integrable (lebesgue_on S)\n   (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma\n  assumes f: \"f \\<in> borel_measurable (lebesgue_on S)\" and S: \"S \\<in> sets lebesgue\"\n  shows integral_Dirichlet_kernel_mul_expand:\n        \"(LINT x|lebesgue_on S. Dirichlet_kernel n x * f x)\n       = (LINT x|lebesgue_on S. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\" (is \"?th1\")\n  and integrable_Dirichlet_kernel_mul_expand:\n       \"integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x)\n    \\<longleftrightarrow> integrable (lebesgue_on S) (\\<lambda>x. sin((n+1/2) * x) * f x / (2 * sin(x/2)))\" (is \"?th2\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) &&&\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "using inte_Dirichlet_kernel_mul_expand [OF assms]"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on S. Dirichlet_kernel ?n x * f x =\n  LINT x|lebesgue_on S.\n     sin ((real ?n + 1 / 2) * x) * f x / (2 * sin (x / 2)) \\<and>\n  integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel ?n x * f x) =\n  integrable (lebesgue_on S)\n   (\\<lambda>x. sin ((real ?n + 1 / 2) * x) * f x / (2 * sin (x / 2)))\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on S. Dirichlet_kernel n x * f x =\n    LINT x|lebesgue_on S.\n       sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)) &&&\n    integrable (lebesgue_on S) (\\<lambda>x. Dirichlet_kernel n x * f x) =\n    integrable (lebesgue_on S)\n     (\\<lambda>x. sin ((real n + 1 / 2) * x) * f x / (2 * sin (x / 2)))", "by auto"], ["", "proposition Fourier_sum_limit_sine_part:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and d: \"0 < d\" \"d \\<le> pi\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l\n     \\<longleftrightarrow> (\\<lambda>n. LINT x|lebesgue_on {0..d}. sin((n + 1/2) * x) * ((f(t+x) + f(t-x) - 2*l) / x)) \\<longlonglongrightarrow> 0\"\n    (is \"?lhs \\<longleftrightarrow> ?\\<Psi> \\<longlonglongrightarrow> 0\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "have ftx: \"(\\<lambda>x. f(t+x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "have ftmx: \"(\\<lambda>x. f(t-x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "by (simp flip: absolutely_integrable_reflect_real [where f= \"(\\<lambda>x. f(t+x))\"])"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "have fbm: \"(\\<lambda>x. f(t+x) + f(t-x) - 2*l) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "by (force intro: ftmx ftx)"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "let ?\\<Phi> = \"\\<lambda>n. LINT x|lebesgue_on {0..d}. Dirichlet_kernel n x * ((f(t+x) + f(t-x)) - 2*l)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "have \"?lhs \\<longleftrightarrow> ?\\<Phi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "by (intro Fourier_sum_limit_Dirichlet_kernel_part assms)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "have \"?\\<Phi> \\<longlonglongrightarrow> 0 \\<longleftrightarrow> ?\\<Psi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "proof (rule Lim_transform_eq [OF Lim_transform_eventually])"], ["proof (state)\ngoal (2 subgoals):\n 1. ?f1 \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f1 x =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "let ?f = \"\\<lambda>n. LINT x|lebesgue_on {0..d}. sin((real n + 1/2) * x) * (1 / (2 * sin(x/2)) - 1/x) * (f(t+x) + f(t-x) - 2*l)\""], ["proof (state)\ngoal (2 subgoals):\n 1. ?f1 \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f1 x =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "have \"?f n = (LINT x|lebesgue_on {-pi..pi}.\n            sin ((n + 1/2) * x) * ((if x \\<in> {0..d} then 1 / (2 * sin (x/2)) - 1/x else 0) * (f(t+x) + f(t-x) - 2*l)))\" for n"], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..d}.\n       sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n       (f (t + x) + f (t - x) - 2 * l) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n        (f (t + x) + f (t - x) - 2 * l))", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..d}.\n       sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n       (f (t + x) + f (t - x) - 2 * l) =\n    LINT x|lebesgue_on {- pi..pi}.\n       sin ((real n + 1 / 2) * x) *\n       ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n        (f (t + x) + f (t - x) - 2 * l))", "by (simp add: integral_restrict if_distrib [of \"\\<lambda>u. _ * (u * _)\"] mult.assoc flip: atLeastAtMost_iff cong: if_cong)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real ?n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) *\n     ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n      (f (t + x) + f (t - x) - 2 * l))\n\ngoal (2 subgoals):\n 1. ?f1 \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f1 x =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "moreover"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real ?n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) *\n     ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n      (f (t + x) + f (t - x) - 2 * l))\n\ngoal (2 subgoals):\n 1. ?f1 \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f1 x =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "have \"\\<dots> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {- pi..pi}.\n           sin ((real n + 1 / 2) * x) *\n           ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n            (f (t + x) + f (t - x) - 2 * l)))\n    \\<longlonglongrightarrow> 0", "proof (intro Riemann_lebesgue_sin_half absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0)\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 4. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "have \"(\\<lambda>x. 1 / (2 * sin(x/2)) - 1/x) \\<in> borel_measurable (lebesgue_on {0..d})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})", "by (intro measurable continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x)\n  \\<in> borel_measurable (lebesgue_on {0..d})\n\ngoal (4 subgoals):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0)\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 4. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x)\n  \\<in> borel_measurable (lebesgue_on {0..d})", "show \"(\\<lambda>x. if x \\<in> {0..d} then 1 / (2 * sin(x/2)) - 1/x else 0) \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x)\n  \\<in> borel_measurable (lebesgue_on {0..d})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0)\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "using d"], ["proof (prove)\nusing this:\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x)\n  \\<in> borel_measurable (lebesgue_on {0..d})\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0)\n    \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (simp add: borel_measurable_if_lebesgue_on flip: atLeastAtMost_iff)"], ["proof (state)\nthis:\n  (\\<lambda>x. if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0)\n  \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "let ?g = \"\\<lambda>x::real. 1 / (2 * sin(x/2)) - 1/x\""], ["proof (state)\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "have limg: \"(?g \\<longlongrightarrow> ?g a) (at a within {0..d})\"   \\<comment>\\<open>thanks to Manuel Eberl\\<close>\n        if a: \"0 \\<le> a\" \"a \\<le> d\" for a"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "have \"(?g \\<longlongrightarrow> 0) (at_right 0)\" and \"(?g \\<longlongrightarrow> ?g d) (at_left d)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n     (at_right 0) &&&\n    ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (d / 2)) - 1 / d)\n     (at_left d)", "using d sin_gt_zero[of \"d/2\"]"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n  \\<lbrakk>0 < d / 2; d / 2 < pi\\<rbrakk> \\<Longrightarrow> 0 < sin (d / 2)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n     (at_right 0) &&&\n    ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (d / 2)) - 1 / d)\n     (at_left d)", "by (real_asymp simp: field_simps)+"], ["proof (state)\nthis:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n   (at_right 0)\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (d / 2)) - 1 / d)\n   (at_left d)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "moreover"], ["proof (state)\nthis:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n   (at_right 0)\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (d / 2)) - 1 / d)\n   (at_left d)\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "have \"(?g \\<longlongrightarrow> ?g a) (at a)\" if \"a > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n    \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a", "using a that d sin_gt_zero[of \"a/2\"] that"], ["proof (prove)\nusing this:\n  0 \\<le> a\n  a \\<le> d\n  0 < a\n  0 < d\n  d \\<le> pi\n  \\<lbrakk>0 < a / 2; a / 2 < pi\\<rbrakk> \\<Longrightarrow> 0 < sin (a / 2)\n  0 < a\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n    \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a", "by (real_asymp simp: field_simps)"], ["proof (state)\nthis:\n  0 < a \\<Longrightarrow>\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n  \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "ultimately"], ["proof (chain)\npicking this:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n   (at_right 0)\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (d / 2)) - 1 / d)\n   (at_left d)\n  0 < a \\<Longrightarrow>\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n  \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a", "show ?thesis"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n   (at_right 0)\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (d / 2)) - 1 / d)\n   (at_left d)\n  0 < a \\<Longrightarrow>\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n  \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "using that d"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow> 0)\n   (at_right 0)\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (d / 2)) - 1 / d)\n   (at_left d)\n  0 < a \\<Longrightarrow>\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<midarrow>a\n  \\<rightarrow> 1 / (2 * sin (a / 2)) - 1 / a\n  0 \\<le> a\n  a \\<le> d\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n     1 / (2 * sin (a / 2)) - 1 / a)\n     (at a within {0..d})", "by (cases \"a = 0 \\<or> a = d\") (auto simp: at_within_Icc_at at_within_Icc_at_right at_within_Icc_at_left)"], ["proof (state)\nthis:\n  ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) \\<longlongrightarrow>\n   1 / (2 * sin (a / 2)) - 1 / a)\n   (at a within {0..d})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>0 \\<le> ?a; ?a \\<le> d\\<rbrakk>\n  \\<Longrightarrow> ((\\<lambda>x.\n                         1 / (2 * sin (x / 2)) -\n                         1 / x) \\<longlongrightarrow>\n                     1 / (2 * sin (?a / 2)) - 1 / ?a)\n                     (at ?a within {0..d})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "have \"((\\<lambda>x. if x \\<in> {0..d} then 1 / (2 * sin(x/2)) - 1/x else 0) ` {-pi..pi}) = ((\\<lambda>x. 1 / (2 * sin(x/2)) - 1/x) ` {0..d})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n    {- pi..pi} =\n    (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n    {- pi..pi} =\n    (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}", "by (auto intro: image_eqI [where x=0])"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n  {- pi..pi} =\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n  {- pi..pi} =\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "have \"bounded \\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d})", "by (intro compact_imp_bounded compact_continuous_image) (auto simp: continuous_on limg)"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n  {- pi..pi} =\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}\n  bounded ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d})", "show \"bounded ((\\<lambda>x. if x \\<in> {0..d} then 1 / (2 * sin(x/2)) - 1/x else 0) ` {-pi..pi})\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n  {- pi..pi} =\n  (\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d}\n  bounded ((\\<lambda>x. 1 / (2 * sin (x / 2)) - 1 / x) ` {0..d})\n\ngoal (1 subgoal):\n 1. bounded\n     ((\\<lambda>x.\n          if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n      {- pi..pi})", "by simp"], ["proof (state)\nthis:\n  bounded\n   ((\\<lambda>x.\n        if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) `\n    {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "qed (auto simp: fbm)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         sin ((real n + 1 / 2) * x) *\n         ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n          (f (t + x) + f (t - x) - 2 * l)))\n  \\<longlonglongrightarrow> 0\n\ngoal (2 subgoals):\n 1. ?f1 \\<longlonglongrightarrow> 0\n 2. \\<forall>\\<^sub>F x in sequentially.\n       ?f1 x =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "ultimately"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real ?n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) *\n     ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n      (f (t + x) + f (t - x) - 2 * l))\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         sin ((real n + 1 / 2) * x) *\n         ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n          (f (t + x) + f (t - x) - 2 * l)))\n  \\<longlonglongrightarrow> 0", "show \"?f \\<longlonglongrightarrow> (0::real)\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real ?n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  LINT x|lebesgue_on {- pi..pi}.\n     sin ((real ?n + 1 / 2) * x) *\n     ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n      (f (t + x) + f (t - x) - 2 * l))\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         sin ((real n + 1 / 2) * x) *\n         ((if x \\<in> {0..d} then 1 / (2 * sin (x / 2)) - 1 / x else 0) *\n          (f (t + x) + f (t - x) - 2 * l)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        LINT x|lebesgue_on {0..d}.\n           sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n           (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n         (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F x in sequentially.\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "show \"\\<forall>\\<^sub>F n in sequentially. ?f n = ?\\<Phi> n - ?\\<Psi> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       LINT x|lebesgue_on {0..d}.\n          sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n          (f (t + x) + f (t - x) - 2 * l) =\n       (LINT x|lebesgue_on {0..d}.\n           Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n       (LINT x|lebesgue_on {0..d}.\n           sin ((real n + 1 / 2) * x) *\n           ((f (t + x) + f (t - x) - 2 * l) / x))", "proof (rule eventually_sequentiallyI [where c = \"Suc 0\"])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "assume \"n \\<ge> Suc 0\""], ["proof (state)\nthis:\n  Suc 0 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "have \"integrable (lebesgue_on {0..d}) (\\<lambda>x. sin ((real n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / (2 * sin(x/2)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (\\<lambda>x.\n         sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n         (2 * sin (x / 2)))", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (\\<lambda>x.\n         sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n         (2 * sin (x / 2)))", "apply (subst integrable_Dirichlet_kernel_mul_expand [symmetric])"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>0 < d; d \\<le> pi\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x. f (t + x) + f (t - x) - 2 * l)\n                      \\<in> borel_measurable (lebesgue_on {0..d})\n 2. \\<lbrakk>0 < d; d \\<le> pi\\<rbrakk>\n    \\<Longrightarrow> {0..d} \\<in> sets lebesgue\n 3. \\<lbrakk>0 < d; d \\<le> pi\\<rbrakk>\n    \\<Longrightarrow> integrable (lebesgue_on {0..d})\n                       (\\<lambda>x.\n                           Dirichlet_kernel n x *\n                           (f (t + x) + f (t - x) - 2 * l))", "apply (intro assms absolutely_integrable_imp_borel_measurable absolutely_integrable_on_subinterval [OF fbm]\n                       absolutely_integrable_imp_integrable absolutely_integrable_mult_Dirichlet_kernel_reflected_part2 | force)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n       (2 * sin (x / 2)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "moreover"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n       (2 * sin (x / 2)))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "have \"integrable (lebesgue_on {0..d}) (\\<lambda>x. sin ((real n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (\\<lambda>x.\n         sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)", "proof (rule integrable_cong_AE_imp)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..d}) ?g\n 2. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 3. AE x in lebesgue_on\n             {0..d}. ?g x =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "let ?g = \"\\<lambda>x. Dirichlet_kernel n x * (2 * sin(x/2) / x * (f(t+x) + f(t-x) - 2*l))\""], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..d}) ?g\n 2. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 3. AE x in lebesgue_on\n             {0..d}. ?g x =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "have *: \"\\<bar>2 * sin (x/2) / x\\<bar> \\<le> 1\" for x::real"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>2 * sin (x / 2) / x\\<bar> \\<le> 1", "using abs_sin_x_le_abs_x [of \"x/2\"]"], ["proof (prove)\nusing this:\n  \\<bar>sin (x / 2)\\<bar> \\<le> \\<bar>x / 2\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>2 * sin (x / 2) / x\\<bar> \\<le> 1", "by (simp add: divide_simps mult.commute abs_mult)"], ["proof (state)\nthis:\n  \\<bar>2 * sin (?x / 2) / ?x\\<bar> \\<le> 1\n\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..d}) ?g\n 2. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 3. AE x in lebesgue_on\n             {0..d}. ?g x =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "have \"bounded ((\\<lambda>x. 1 + (x/2)\\<^sup>2) ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi})", "by (intro compact_imp_bounded compact_continuous_image continuous_intros) auto"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi})\n\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..d}) ?g\n 2. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 3. AE x in lebesgue_on\n             {0..d}. ?g x =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "then"], ["proof (chain)\npicking this:\n  bounded ((\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi})", "have bo: \"bounded ((\\<lambda>x. 2 * sin (x/2) / x) ` {-pi..pi})\""], ["proof (prove)\nusing this:\n  bounded ((\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi})\n\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 2 * sin (x / 2) / x) ` {- pi..pi})", "using *"], ["proof (prove)\nusing this:\n  bounded ((\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi})\n  \\<bar>2 * sin (?x / 2) / ?x\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 2 * sin (x / 2) / x) ` {- pi..pi})", "unfolding bounded_real"], ["proof (prove)\nusing this:\n  \\<exists>a.\n     \\<forall>x\\<in>(\\<lambda>x. 1 + (x / 2)\\<^sup>2) ` {- pi..pi}.\n        \\<bar>x\\<bar> \\<le> a\n  \\<bar>2 * sin (?x / 2) / ?x\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<exists>a.\n       \\<forall>x\\<in>(\\<lambda>x. 2 * sin (x / 2) / x) ` {- pi..pi}.\n          \\<bar>x\\<bar> \\<le> a", "by blast"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. 2 * sin (x / 2) / x) ` {- pi..pi})\n\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..d}) ?g\n 2. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 3. AE x in lebesgue_on\n             {0..d}. ?g x =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "show \"integrable (lebesgue_on {0..d}) ?g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (\\<lambda>x.\n         Dirichlet_kernel n x *\n         (2 * sin (x / 2) / x * (f (t + x) + f (t - x) - 2 * l)))", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (\\<lambda>x.\n         Dirichlet_kernel n x *\n         (2 * sin (x / 2) / x * (f (t + x) + f (t - x) - 2 * l)))", "apply (intro absolutely_integrable_imp_integrable\n              absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Dirichlet_kernel]\n              absolutely_integrable_bounded_measurable_product_real bo fbm\n              measurable continuous_imp_measurable_on_sets_lebesgue continuous_intros, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       Dirichlet_kernel n x *\n       (2 * sin (x / 2) / x * (f (t + x) + f (t - x) - 2 * l)))\n\ngoal (2 subgoals):\n 1. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})\n 2. AE x in lebesgue_on\n             {0..d}. Dirichlet_kernel n x *\n                     (2 * sin (x / 2) / x *\n                      (f (t + x) + f (t - x) - 2 * l)) =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "show \"(\\<lambda>x. sin ((n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / x) \\<in> borel_measurable (lebesgue_on {0..d})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..d})", "apply (intro measurable absolutely_integrable_imp_borel_measurable\n                       absolutely_integrable_on_subinterval [OF ftx] absolutely_integrable_on_subinterval [OF ftmx]\n                       absolutely_integrable_continuous_real continuous_intros, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n  \\<in> borel_measurable (lebesgue_on {0..d})\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..d}. Dirichlet_kernel n x *\n                     (2 * sin (x / 2) / x *\n                      (f (t + x) + f (t - x) - 2 * l)) =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "have \"Dirichlet_kernel n x * (2 * sin(x/2)) / x = sin ((real n + 1/2) * x) / x\"\n          if \"0 < x\" \"x \\<le> d\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x * (2 * sin (x / 2)) / x =\n    sin ((real n + 1 / 2) * x) / x", "using that d"], ["proof (prove)\nusing this:\n  0 < x\n  x \\<le> d\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. Dirichlet_kernel n x * (2 * sin (x / 2)) / x =\n    sin ((real n + 1 / 2) * x) / x", "by (simp add: Dirichlet_kernel_def divide_simps sin_zero_pi_iff)"], ["proof (state)\nthis:\n  \\<lbrakk>0 < ?x; ?x \\<le> d\\<rbrakk>\n  \\<Longrightarrow> Dirichlet_kernel n ?x * (2 * sin (?x / 2)) / ?x =\n                    sin ((real n + 1 / 2) * ?x) / ?x\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..d}. Dirichlet_kernel n x *\n                     (2 * sin (x / 2) / x *\n                      (f (t + x) + f (t - x) - 2 * l)) =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>0 < ?x; ?x \\<le> d\\<rbrakk>\n  \\<Longrightarrow> Dirichlet_kernel n ?x * (2 * sin (?x / 2)) / ?x =\n                    sin ((real n + 1 / 2) * ?x) / ?x", "show \"AE x in lebesgue_on {0..d}. ?g x = sin ((real n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?x; ?x \\<le> d\\<rbrakk>\n  \\<Longrightarrow> Dirichlet_kernel n ?x * (2 * sin (?x / 2)) / ?x =\n                    sin ((real n + 1 / 2) * ?x) / ?x\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..d}. Dirichlet_kernel n x *\n                     (2 * sin (x / 2) / x *\n                      (f (t + x) + f (t - x) - 2 * l)) =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "using d"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 < ?x; ?x \\<le> d\\<rbrakk>\n  \\<Longrightarrow> Dirichlet_kernel n ?x * (2 * sin (?x / 2)) / ?x =\n                    sin ((real n + 1 / 2) * ?x) / ?x\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..d}. Dirichlet_kernel n x *\n                     (2 * sin (x / 2) / x *\n                      (f (t + x) + f (t - x) - 2 * l)) =\n                     sin ((real n + 1 / 2) * x) *\n                     (f (t + x) + f (t - x) - 2 * l) /\n                     x", "by (force intro: AE_I' [where N=\"{0}\"])"], ["proof (state)\nthis:\n  AE x in lebesgue_on\n           {0..d}. Dirichlet_kernel n x *\n                   (2 * sin (x / 2) / x * (f (t + x) + f (t - x) - 2 * l)) =\n                   sin ((real n + 1 / 2) * x) *\n                   (f (t + x) + f (t - x) - 2 * l) /\n                   x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "ultimately"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n       (2 * sin (x / 2)))\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)", "have \"?f n = (LINT x|lebesgue_on {0..d}. sin ((n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / (2 * sin(x/2)))\n                 - (LINT x|lebesgue_on {0..d}. sin ((n + 1/2) * x) * (f(t+x) + f(t-x) - 2*l) / x)\""], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n       (2 * sin (x / 2)))\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x.\n       sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..d}.\n       sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n       (f (t + x) + f (t - x) - 2 * l) =\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n        (2 * sin (x / 2))) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)", "by (simp add: right_diff_distrib [of _ _ \"1/_\"] left_diff_distrib)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n      (2 * sin (x / 2))) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "also"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n      (2 * sin (x / 2))) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "have \"\\<dots> = ?\\<Phi> n - ?\\<Psi> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n        (2 * sin (x / 2))) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x) =\n    (LINT x|lebesgue_on {0..d}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))", "using d"], ["proof (prove)\nusing this:\n  0 < d\n  d \\<le> pi\n\ngoal (1 subgoal):\n 1. (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n        (2 * sin (x / 2))) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x) =\n    (LINT x|lebesgue_on {0..d}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))", "by (simp add: measurable_restrict_mono [OF absolutely_integrable_imp_borel_measurable [OF fbm]]\n                      integral_Dirichlet_kernel_mul_expand)"], ["proof (state)\nthis:\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) /\n      (2 * sin (x / 2))) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * (f (t + x) + f (t - x) - 2 * l) / x) =\n  (LINT x|lebesgue_on {0..d}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       Suc 0 \\<le> x \\<Longrightarrow>\n       LINT xa|lebesgue_on {0..d}.\n          sin ((real x + 1 / 2) * xa) * (1 / (2 * sin (xa / 2)) - 1 / xa) *\n          (f (t + xa) + f (t - xa) - 2 * l) =\n       (LINT xa|lebesgue_on {0..d}.\n           Dirichlet_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l)) -\n       (LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))", "finally"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  (LINT x|lebesgue_on {0..d}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))", "show \"?f n = ?\\<Phi> n - ?\\<Psi> n\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  (LINT x|lebesgue_on {0..d}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..d}.\n       sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n       (f (t + x) + f (t - x) - 2 * l) =\n    (LINT x|lebesgue_on {0..d}.\n        Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n    (LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))", "."], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..d}.\n     sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n     (f (t + x) + f (t - x) - 2 * l) =\n  (LINT x|lebesgue_on {0..d}.\n      Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n  (LINT x|lebesgue_on {0..d}.\n      sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     LINT x|lebesgue_on {0..d}.\n        sin ((real n + 1 / 2) * x) * (1 / (2 * sin (x / 2)) - 1 / x) *\n        (f (t + x) + f (t - x) - 2 * l) =\n     (LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l)) -\n     (LINT x|lebesgue_on {0..d}.\n         sin ((real n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..d}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..d}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..d}.\n         Dirichlet_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..d}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>x.\n        LINT xa|lebesgue_on {0..d}.\n           sin ((real x + 1 / 2) * xa) *\n           ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..d}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Dini's test for the convergence of a Fourier series\\<close>"], ["", "proposition Fourier_Dini_test:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and int0d: \"integrable (lebesgue_on {0..d}) (\\<lambda>x. \\<bar>f(t+x) + f(t-x) - 2*l\\<bar> / x)\"\n    and \"0 < d\"\n  shows \"(\\<lambda>n. (\\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)) \\<longlonglongrightarrow> l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "define \\<phi> where \"\\<phi> \\<equiv> \\<lambda>n x. sin((n + 1/2) * x) * ((f(t+x) + f(t-x) - 2*l) / x)\""], ["proof (state)\nthis:\n  \\<phi> \\<equiv>\n  \\<lambda>n x.\n     sin ((n + 1 / 2) * x) * ((f (t + x) + f (t - x) - 2 * l) / x)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "have \"(\\<lambda>n. LINT x|lebesgue_on {0..pi}. \\<phi> n x) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real x)))\n    \\<longlonglongrightarrow> 0", "unfolding lim_sequentially dist_real_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "proof (intro allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "fix e :: real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "define \\<theta> where \"\\<theta> \\<equiv> \\<lambda>x. LINT x|lebesgue_on {0..x}. \\<bar>f(t+x) + f(t-x) - 2*l\\<bar> / x\""], ["proof (state)\nthis:\n  \\<theta> \\<equiv>\n  \\<lambda>x.\n     LINT x|lebesgue_on {0..x}.\n        \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have [simp]: \"\\<theta> 0 = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<theta> 0 = 0", "by (simp add: \\<theta>_def integral_eq_zero_null_sets)"], ["proof (state)\nthis:\n  \\<theta> 0 = 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have cont: \"continuous_on {0..d} \\<theta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {0..d} \\<theta>", "unfolding \\<theta>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {0..d}\n     (\\<lambda>x.\n         LINT x|lebesgue_on {0..x}.\n            \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)", "using indefinite_integral_continuous_real int0d"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {?a..?b}) ?f \\<Longrightarrow>\n  continuous_on {?a..?b}\n   (\\<lambda>x. integral\\<^sup>L (lebesgue_on {?a..x}) ?f)\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n\ngoal (1 subgoal):\n 1. continuous_on {0..d}\n     (\\<lambda>x.\n         LINT x|lebesgue_on {0..x}.\n            \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)", "by blast"], ["proof (state)\nthis:\n  continuous_on {0..d} \\<theta>\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "with \\<open>d > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < d\n  continuous_on {0..d} \\<theta>", "have \"\\<forall>e>0. \\<exists>da>0. \\<forall>x'\\<in>{0..d}. \\<bar>x' - 0\\<bar> < da \\<longrightarrow> \\<bar>\\<theta> x' - \\<theta> 0\\<bar> < e\""], ["proof (prove)\nusing this:\n  0 < d\n  continuous_on {0..d} \\<theta>\n\ngoal (1 subgoal):\n 1. \\<forall>e>0.\n       \\<exists>da>0.\n          \\<forall>x'\\<in>{0..d}.\n             \\<bar>x' - 0\\<bar> < da \\<longrightarrow>\n             \\<bar>\\<theta> x' - \\<theta> 0\\<bar> < e", "by (force simp: continuous_on_real_range dest: bspec [where x=0])"], ["proof (state)\nthis:\n  \\<forall>e>0.\n     \\<exists>da>0.\n        \\<forall>x'\\<in>{0..d}.\n           \\<bar>x' - 0\\<bar> < da \\<longrightarrow>\n           \\<bar>\\<theta> x' - \\<theta> 0\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "with \\<open>e > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < e\n  \\<forall>e>0.\n     \\<exists>da>0.\n        \\<forall>x'\\<in>{0..d}.\n           \\<bar>x' - 0\\<bar> < da \\<longrightarrow>\n           \\<bar>\\<theta> x' - \\<theta> 0\\<bar> < e", "obtain k where \"k > 0\" and k: \"\\<And>x'. \\<lbrakk>0 \\<le> x'; x' < k; x' \\<le> d\\<rbrakk> \\<Longrightarrow> \\<bar>\\<theta> x'\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>e>0.\n     \\<exists>da>0.\n        \\<forall>x'\\<in>{0..d}.\n           \\<bar>x' - 0\\<bar> < da \\<longrightarrow>\n           \\<bar>\\<theta> x' - \\<theta> 0\\<bar> < e\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>0 < k;\n         \\<And>x'.\n            \\<lbrakk>0 \\<le> x'; x' < k; x' \\<le> d\\<rbrakk>\n            \\<Longrightarrow> \\<bar>\\<theta> x'\\<bar> < e / 2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (drule_tac x=\"e/2\" in spec) auto"], ["proof (state)\nthis:\n  0 < k\n  \\<lbrakk>0 \\<le> ?x'; ?x' < k; ?x' \\<le> d\\<rbrakk>\n  \\<Longrightarrow> \\<bar>\\<theta> ?x'\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "define \\<delta> where \"\\<delta> \\<equiv> min d (min (k/2) pi)\""], ["proof (state)\nthis:\n  \\<delta> \\<equiv> min d (min (k / 2) pi)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have e2: \"\\<bar>\\<theta> \\<delta>\\<bar> < e/2\" and \"\\<delta> > 0\" \"\\<delta> \\<le> pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<theta> \\<delta>\\<bar> < e / 2 &&&\n    0 < \\<delta> &&& \\<delta> \\<le> pi", "unfolding \\<delta>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<theta> (min d (min (k / 2) pi))\\<bar> < e / 2 &&&\n    0 < min d (min (k / 2) pi) &&& min d (min (k / 2) pi) \\<le> pi", "using k \\<open>k > 0\\<close> \\<open>d > 0\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>0 \\<le> ?x'; ?x' < k; ?x' \\<le> d\\<rbrakk>\n  \\<Longrightarrow> \\<bar>\\<theta> ?x'\\<bar> < e / 2\n  0 < k\n  0 < d\n\ngoal (1 subgoal):\n 1. \\<bar>\\<theta> (min d (min (k / 2) pi))\\<bar> < e / 2 &&&\n    0 < min d (min (k / 2) pi) &&& min d (min (k / 2) pi) \\<le> pi", "by auto"], ["proof (state)\nthis:\n  \\<bar>\\<theta> \\<delta>\\<bar> < e / 2\n  0 < \\<delta>\n  \\<delta> \\<le> pi\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have ftx: \"(\\<lambda>x. f(t+x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n  0 < d\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "have ftmx: \"(\\<lambda>x. f(t-x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "by (simp flip: absolutely_integrable_reflect_real [where f= \"(\\<lambda>x. f(t+x))\"])"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have 1: \"\\<phi> n absolutely_integrable_on {0..\\<delta>}\" for n::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> (real n) absolutely_integrable_on {0..\\<delta>}", "unfolding \\<phi>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) *\n        ((f (t + x) + f (t - x) - 2 * l) / x)) absolutely_integrable_on\n    {0..\\<delta>}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n 2. {0..\\<delta>} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {0..\\<delta>})\n 4. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "show \"(\\<lambda>x. sin ((real n + 1/2) * x)) \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<delta>})", "by (intro continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. sin ((real n + 1 / 2) * x))\n  \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n\ngoal (3 subgoals):\n 1. {0..\\<delta>} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {0..\\<delta>})\n 3. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "show \"bounded ((\\<lambda>x. sin ((real n + 1/2) * x)) ` {0..\\<delta>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {0..\\<delta>})", "by (simp add: bounded_iff) (use abs_sin_le_one in blast)"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {0..\\<delta>})\n\ngoal (2 subgoals):\n 1. {0..\\<delta>} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "have \"(\\<lambda>x. (f(t+x) + f(t-x) - 2*l) / x) \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<delta>})", "using \\<open>d > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<delta>})", "unfolding \\<delta>_def"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n    \\<in> borel_measurable (lebesgue_on {0..min d (min (k / 2) pi)})", "by (intro measurable absolutely_integrable_imp_borel_measurable\n            absolutely_integrable_on_subinterval [OF ftx] absolutely_integrable_on_subinterval [OF ftmx]\n            absolutely_integrable_continuous_real continuous_intros, auto)"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n\ngoal (2 subgoals):\n 1. {0..\\<delta>} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n\ngoal (2 subgoals):\n 1. {0..\\<delta>} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "have \"integrable (lebesgue_on {0..\\<delta>}) (norm \\<circ> (\\<lambda>x. (f(t+x) + f(t-x) - 2*l) / x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..\\<delta>})\n     (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))", "proof (rule integrable_subinterval [of 0 d])"], ["proof (state)\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {0..d})\n     (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))\n 2. {0..\\<delta>} \\<subseteq> {0..d}", "show \"integrable (lebesgue_on {0..d}) (norm \\<circ> (\\<lambda>x. (f(t+x) + f(t-x) - 2*l) / x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))", "using int0d"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..d})\n     (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))", "by (subst integrable_cong) (auto simp: o_def)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..d})\n   (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal (1 subgoal):\n 1. {0..\\<delta>} \\<subseteq> {0..d}", "show \"{0..\\<delta>} \\<subseteq> {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {0..\\<delta>} \\<subseteq> {0..d}", "using \\<open>d > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < d\n\ngoal (1 subgoal):\n 1. {0..\\<delta>} \\<subseteq> {0..d}", "by (auto simp: \\<delta>_def)"], ["proof (state)\nthis:\n  {0..\\<delta>} \\<subseteq> {0..d}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..\\<delta>})\n   (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal (2 subgoals):\n 1. {0..\\<delta>} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n  integrable (lebesgue_on {0..\\<delta>})\n   (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))", "show \"(\\<lambda>x. (f(t+x) + f(t-x) - 2*l) / x) absolutely_integrable_on {0..\\<delta>}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<delta>})\n  integrable (lebesgue_on {0..\\<delta>})\n   (norm \\<circ> (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x))\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {0..\\<delta>}", "by (auto simp: absolutely_integrable_measurable)"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n  {0..\\<delta>}\n\ngoal (1 subgoal):\n 1. {0..\\<delta>} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  \\<phi> (real ?n) absolutely_integrable_on {0..\\<delta>}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have 2: \"\\<phi> n absolutely_integrable_on {\\<delta>..pi}\" for n::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> (real n) absolutely_integrable_on {\\<delta>..pi}", "unfolding \\<phi>_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        sin ((real n + 1 / 2) * x) *\n        ((f (t + x) + f (t - x) - 2 * l) / x)) absolutely_integrable_on\n    {\\<delta>..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x))\n    \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n 2. {\\<delta>..pi} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {\\<delta>..pi})\n 4. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {\\<delta>..pi}", "show \"(\\<lambda>x. sin ((n + 1/2) * x)) \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. sin ((real n + 1 / 2) * x))\n    \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})", "by (intro continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. sin ((real n + 1 / 2) * x))\n  \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n\ngoal (3 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {\\<delta>..pi})\n 3. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {\\<delta>..pi}", "show \"bounded ((\\<lambda>x. sin ((n + 1/2) * x)) ` {\\<delta>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {\\<delta>..pi})", "by (simp add: bounded_iff) (use abs_sin_le_one in blast)"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. sin ((real n + 1 / 2) * x)) ` {\\<delta>..pi})\n\ngoal (2 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {\\<delta>..pi}", "have \"(\\<lambda>x. inverse x * (f(t+x) + f(t-x) - 2*l)) absolutely_integrable_on {\\<delta>..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        inverse x *\n        (f (t + x) + f (t - x) - 2 * l)) absolutely_integrable_on\n    {\\<delta>..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. inverse \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n 2. {\\<delta>..pi} \\<in> sets lebesgue\n 3. bounded (inverse ` {\\<delta>..pi})\n 4. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "have \"(\\<lambda>x. 1/x) \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (/) 1 \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})", "by (auto simp: measurable_completion measurable_restrict_space1)"], ["proof (state)\nthis:\n  (/) 1 \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n\ngoal (4 subgoals):\n 1. inverse \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n 2. {\\<delta>..pi} \\<in> sets lebesgue\n 3. bounded (inverse ` {\\<delta>..pi})\n 4. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "then"], ["proof (chain)\npicking this:\n  (/) 1 \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})", "show \"inverse \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\""], ["proof (prove)\nusing this:\n  (/) 1 \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n\ngoal (1 subgoal):\n 1. inverse \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})", "by (metis (no_types, lifting) inverse_eq_divide measurable_lebesgue_cong)"], ["proof (state)\nthis:\n  inverse \\<in> borel_measurable (lebesgue_on {\\<delta>..pi})\n\ngoal (3 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. bounded (inverse ` {\\<delta>..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "have \"\\<forall>x\\<in>{\\<delta>..pi}. inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{\\<delta>..pi}.\n       inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>", "using \\<open>0 < \\<delta>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<delta>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{\\<delta>..pi}.\n       inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>{\\<delta>..pi}.\n     inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>\n\ngoal (3 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. bounded (inverse ` {\\<delta>..pi})\n 3. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "then"], ["proof (chain)\npicking this:\n  \\<forall>x\\<in>{\\<delta>..pi}.\n     inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>", "show \"bounded (inverse ` {\\<delta>..pi})\""], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>{\\<delta>..pi}.\n     inverse \\<bar>x\\<bar> \\<le> inverse \\<delta>\n\ngoal (1 subgoal):\n 1. bounded (inverse ` {\\<delta>..pi})", "by (auto simp: bounded_iff)"], ["proof (state)\nthis:\n  bounded (inverse ` {\\<delta>..pi})\n\ngoal (2 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "show \"(\\<lambda>x. f(t+x) + f(t-x) - 2*l) absolutely_integrable_on {\\<delta>..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {\\<delta>..pi}", "proof (rule absolutely_integrable_on_subinterval)"], ["proof (state)\ngoal (2 subgoals):\n 1. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on ?S\n 2. {\\<delta>..pi} \\<subseteq> ?S", "show \"(\\<lambda>x. (f(t+x) + f(t-x) - 2*l)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n    {- pi..pi}", "by (fast intro: ftx ftmx absolutely_integrable_on_const)"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. {\\<delta>..pi} \\<subseteq> {- pi..pi}", "show \"{\\<delta>..pi} \\<subseteq> {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {\\<delta>..pi} \\<subseteq> {- pi..pi}", "using \\<open>0 < \\<delta>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<delta>\n\ngoal (1 subgoal):\n 1. {\\<delta>..pi} \\<subseteq> {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  {\\<delta>..pi} \\<subseteq> {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) + f (t - x) - 2 * l) absolutely_integrable_on\n  {\\<delta>..pi}\n\ngoal (1 subgoal):\n 1. {\\<delta>..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      inverse x * (f (t + x) + f (t - x) - 2 * l)) absolutely_integrable_on\n  {\\<delta>..pi}\n\ngoal (2 subgoals):\n 1. {\\<delta>..pi} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {\\<delta>..pi}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      inverse x * (f (t + x) + f (t - x) - 2 * l)) absolutely_integrable_on\n  {\\<delta>..pi}", "show \"(\\<lambda>x. (f(t+x) + f(t-x) - 2*l) / x) absolutely_integrable_on {\\<delta>..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      inverse x * (f (t + x) + f (t - x) - 2 * l)) absolutely_integrable_on\n  {\\<delta>..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n    {\\<delta>..pi}", "by (metis (no_types, lifting) divide_inverse mult.commute set_integrable_cong)"], ["proof (state)\nthis:\n  (\\<lambda>x. (f (t + x) + f (t - x) - 2 * l) / x) absolutely_integrable_on\n  {\\<delta>..pi}\n\ngoal (1 subgoal):\n 1. {\\<delta>..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  \\<phi> (real ?n) absolutely_integrable_on {\\<delta>..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"(\\<lambda>x. f(t+x) - l) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}", "using ftx"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"bounded ((\\<lambda>x. 0) ` {x. \\<bar>x\\<bar> < \\<delta>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 0::'a) ` {x. \\<bar>x\\<bar> < \\<delta>})", "using bounded_def"], ["proof (prove)\nusing this:\n  bounded ?S = (\\<exists>x e. \\<forall>y\\<in>?S. dist x y \\<le> e)\n\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. 0::'a) ` {x. \\<bar>x\\<bar> < \\<delta>})", "by blast"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. 0::?'a1) ` {x. \\<bar>x\\<bar> < \\<delta>})\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "moreover"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. 0::?'a1) ` {x. \\<bar>x\\<bar> < \\<delta>})\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})", "using \\<open>\\<delta> > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<delta>\n\ngoal (1 subgoal):\n 1. bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})", "by (auto simp: divide_simps intro: boundedI [where B = \"1/\\<delta>\"])"], ["proof (state)\nthis:\n  bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}\n  bounded ((\\<lambda>x. 0::?'a1) ` {x. \\<bar>x\\<bar> < \\<delta>})\n  bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})", "have \"(\\<lambda>x. (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) * (if x \\<in> {-pi..pi} then f(t+x) - l else 0)) absolutely_integrable_on UNIV\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x) - l) absolutely_integrable_on {- pi..pi}\n  bounded ((\\<lambda>x. 0::?'a1) ` {x. \\<bar>x\\<bar> < \\<delta>})\n  bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n        (if x \\<in> {- pi..pi} then f (t + x) - l\n         else 0)) absolutely_integrable_on\n    UNIV", "apply (intro absolutely_integrable_bounded_measurable_product_real measurable set_integral_diff)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> 0 \\<in> space borel\n 2. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x. x)\n                      \\<in> borel_measurable (lebesgue_on UNIV)\n 3. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x. x)\n                      \\<in> borel_measurable (lebesgue_on UNIV)\n 4. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> \\<delta> \\<in> space borel\n 5. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> UNIV \\<in> sets lebesgue\n 6. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> bounded\n                       (range\n                         (\\<lambda>x.\n                             if \\<bar>x\\<bar> < \\<delta> then 0\n                             else inverse x))\n 7. \\<lbrakk>(\\<lambda>x. f (t + x) - l) absolutely_integrable_on\n             {- pi..pi};\n     bounded ((\\<lambda>x. 0::?'a2) ` {x. \\<bar>x\\<bar> < \\<delta>});\n     bounded (inverse ` {x. \\<not> \\<bar>x\\<bar> < \\<delta>})\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x.\n                          if x \\<in> {- pi..pi} then f (t + x) - l\n                          else 0) absolutely_integrable_on\n                      UNIV", "apply (auto simp: lebesgue_on_UNIV_eq measurable_completion simp flip: absolutely_integrable_restrict_UNIV [where S = \"{-pi..pi}\"])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n      (if x \\<in> {- pi..pi} then f (t + x) - l\n       else 0)) absolutely_integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n      (if x \\<in> {- pi..pi} then f (t + x) - l\n       else 0)) absolutely_integrable_on\n  UNIV\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"(if x \\<in> {-pi..pi} then if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t+x) - l) / x else 0)\n               = (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) * (if x \\<in> {-pi..pi} then f(t+x) - l else 0)\"  for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if x \\<in> {- pi..pi}\n     then if \\<bar>x\\<bar> < \\<delta> then 0 else (f (t + x) - l) / x\n     else 0) =\n    (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n    (if x \\<in> {- pi..pi} then f (t + x) - l else 0)", "by (auto simp: divide_simps)"], ["proof (state)\nthis:\n  (if ?x1 \\<in> {- pi..pi}\n   then if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1\n   else 0) =\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else inverse ?x1) *\n  (if ?x1 \\<in> {- pi..pi} then f (t + ?x1) - l else 0)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n      (if x \\<in> {- pi..pi} then f (t + x) - l\n       else 0)) absolutely_integrable_on\n  UNIV\n  (if ?x1 \\<in> {- pi..pi}\n   then if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1\n   else 0) =\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else inverse ?x1) *\n  (if ?x1 \\<in> {- pi..pi} then f (t + ?x1) - l else 0)", "have *: \"(\\<lambda>x. if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t+x) - l) / x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      (if \\<bar>x\\<bar> < \\<delta> then 0 else inverse x) *\n      (if x \\<in> {- pi..pi} then f (t + x) - l\n       else 0)) absolutely_integrable_on\n  UNIV\n  (if ?x1 \\<in> {- pi..pi}\n   then if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1\n   else 0) =\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else inverse ?x1) *\n  (if ?x1 \\<in> {- pi..pi} then f (t + ?x1) - l else 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        if \\<bar>x\\<bar> < \\<delta> then 0\n        else (f (t + x) - l) / x) absolutely_integrable_on\n    {- pi..pi}", "by (simp add: flip: absolutely_integrable_restrict_UNIV [where S = \"{-pi..pi}\"])"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      if \\<bar>x\\<bar> < \\<delta> then 0\n      else (f (t + x) - l) / x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"(\\<lambda>n. LINT x|lebesgue_on {0..pi}. sin ((n + 1/2) * x) * (if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t+x) - l) / x)\n                                       + sin ((n + 1/2) * -x) * (if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t-x) - l) / -x))\n        \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        LINT xa|lebesgue_on {0..pi}.\n           sin ((real x + 1 / 2) * xa) *\n           (if \\<bar>xa\\<bar> < \\<delta> then 0\n            else (f (t + xa) - l) / xa) +\n           sin ((real x + 1 / 2) * - xa) *\n           (if \\<bar>xa\\<bar> < \\<delta> then 0\n            else (f (t - xa) - l) / - xa))\n    \\<longlonglongrightarrow> 0", "using Riemann_lebesgue_sin_half [OF *] *"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      LINT x|lebesgue_on {- pi..pi}.\n         sin ((real n + 1 / 2) * x) *\n         (if \\<bar>x\\<bar> < \\<delta> then 0 else (f (t + x) - l) / x))\n  \\<longlonglongrightarrow> 0\n  (\\<lambda>x.\n      if \\<bar>x\\<bar> < \\<delta> then 0\n      else (f (t + x) - l) / x) absolutely_integrable_on\n  {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        LINT xa|lebesgue_on {0..pi}.\n           sin ((real x + 1 / 2) * xa) *\n           (if \\<bar>xa\\<bar> < \\<delta> then 0\n            else (f (t + xa) - l) / xa) +\n           sin ((real x + 1 / 2) * - xa) *\n           (if \\<bar>xa\\<bar> < \\<delta> then 0\n            else (f (t - xa) - l) / - xa))\n    \\<longlonglongrightarrow> 0", "by (simp add: integral_reflect_and_add absolutely_integrable_imp_integrable absolutely_integrable_sin_product cong: if_cong)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t + xa) - l) / xa) +\n         sin ((real x + 1 / 2) * - xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t - xa) - l) / - xa))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t + xa) - l) / xa) +\n         sin ((real x + 1 / 2) * - xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t - xa) - l) / - xa))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"sin ((n + 1/2) * x) * (if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t+x) - l) / x)\n               + sin ((n + 1/2) * -x) * (if \\<bar>x\\<bar> < \\<delta> then 0 else (f(t-x) - l) / -x)\n           = (if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0)\" for x n"], ["proof (prove)\ngoal (1 subgoal):\n 1. sin ((n + 1 / 2) * x) *\n    (if \\<bar>x\\<bar> < \\<delta> then 0 else (f (t + x) - l) / x) +\n    sin ((n + 1 / 2) * - x) *\n    (if \\<bar>x\\<bar> < \\<delta> then 0 else (f (t - x) - l) / - x) =\n    (if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0)", "by simp (auto simp: divide_simps algebra_simps \\<phi>_def)"], ["proof (state)\nthis:\n  sin ((?n1 + 1 / 2) * ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1) +\n  sin ((?n1 + 1 / 2) * - ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t - ?x1) - l) / - ?x1) =\n  (if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t + xa) - l) / xa) +\n         sin ((real x + 1 / 2) * - xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t - xa) - l) / - xa))\n  \\<longlonglongrightarrow> 0\n  sin ((?n1 + 1 / 2) * ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1) +\n  sin ((?n1 + 1 / 2) * - ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t - ?x1) - l) / - ?x1) =\n  (if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0)", "have \"(\\<lambda>n. LINT x|lebesgue_on {0..pi}. (if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0)) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t + xa) - l) / xa) +\n         sin ((real x + 1 / 2) * - xa) *\n         (if \\<bar>xa\\<bar> < \\<delta> then 0 else (f (t - xa) - l) / - xa))\n  \\<longlonglongrightarrow> 0\n  sin ((?n1 + 1 / 2) * ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t + ?x1) - l) / ?x1) +\n  sin ((?n1 + 1 / 2) * - ?x1) *\n  (if \\<bar>?x1\\<bar> < \\<delta> then 0 else (f (t - ?x1) - l) / - ?x1) =\n  (if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        LINT xa|lebesgue_on {0..pi}.\n           (if \\<not> \\<bar>xa\\<bar> < \\<delta> then \\<phi> (real x) xa\n            else 0))\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         (if \\<not> \\<bar>xa\\<bar> < \\<delta> then \\<phi> (real x) xa\n          else 0))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "moreover"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         (if \\<not> \\<bar>xa\\<bar> < \\<delta> then \\<phi> (real x) xa\n          else 0))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"(if 0 \\<le> x \\<and> x \\<le> pi then if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0 else 0)\n               = (if \\<delta> \\<le> x \\<and> x \\<le> pi then \\<phi> n x else 0)\" for x n"], ["proof (prove)\ngoal (1 subgoal):\n 1. (if 0 \\<le> x \\<and> x \\<le> pi\n     then if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0\n     else 0) =\n    (if \\<delta> \\<le> x \\<and> x \\<le> pi then \\<phi> n x else 0)", "using \\<open>\\<delta> > 0\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<delta>\n\ngoal (1 subgoal):\n 1. (if 0 \\<le> x \\<and> x \\<le> pi\n     then if \\<not> \\<bar>x\\<bar> < \\<delta> then \\<phi> n x else 0\n     else 0) =\n    (if \\<delta> \\<le> x \\<and> x \\<le> pi then \\<phi> n x else 0)", "by auto"], ["proof (state)\nthis:\n  (if 0 \\<le> ?x1 \\<and> ?x1 \\<le> pi\n   then if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0\n   else 0) =\n  (if \\<delta> \\<le> ?x1 \\<and> ?x1 \\<le> pi then \\<phi> ?n1 ?x1 else 0)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "ultimately"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         (if \\<not> \\<bar>xa\\<bar> < \\<delta> then \\<phi> (real x) xa\n          else 0))\n  \\<longlonglongrightarrow> 0\n  (if 0 \\<le> ?x1 \\<and> ?x1 \\<le> pi\n   then if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0\n   else 0) =\n  (if \\<delta> \\<le> ?x1 \\<and> ?x1 \\<le> pi then \\<phi> ?n1 ?x1 else 0)", "have \\<dagger>: \"(\\<lambda>n. LINT x|lebesgue_on {\\<delta>..pi}. \\<phi> n x) \\<longlonglongrightarrow> 0\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         (if \\<not> \\<bar>xa\\<bar> < \\<delta> then \\<phi> (real x) xa\n          else 0))\n  \\<longlonglongrightarrow> 0\n  (if 0 \\<le> ?x1 \\<and> ?x1 \\<le> pi\n   then if \\<not> \\<bar>?x1\\<bar> < \\<delta> then \\<phi> ?n1 ?x1 else 0\n   else 0) =\n  (if \\<delta> \\<le> ?x1 \\<and> ?x1 \\<le> pi then \\<phi> ?n1 ?x1 else 0)\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real x)))\n    \\<longlonglongrightarrow> 0", "by (simp flip: Lebesgue_Measure.integral_restrict_UNIV)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x.\n      integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0", "obtain N::nat where N: \"\\<And>n. n\\<ge>N \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {\\<delta>..pi}. \\<phi> n x\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n                   (\\<phi> (real n))\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially dist_real_def"], ["proof (prove)\nusing this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n                  (\\<phi> (real n)) -\n                 0\\<bar>\n           < r\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n                   (\\<phi> (real n))\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis (full_types) \\<open>0 < e\\<close> diff_zero half_gt_zero_iff)"], ["proof (state)\nthis:\n  N \\<le> ?n1 \\<Longrightarrow>\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n         (\\<phi> (real ?n1))\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "have \"\\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> n)\\<bar> < e\" if \"n \\<ge> N\" for n::nat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "have int: \"integrable (lebesgue_on {0..pi}) (\\<phi> (real n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi}) (\\<phi> (real n))", "by (intro integrable_combine [of concl: 0 pi] absolutely_integrable_imp_integrable) (use  \\<open>\\<delta> > 0\\<close>  \\<open>\\<delta> \\<le> pi\\<close> 1 2 in auto)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..pi}) (\\<phi> (real n))\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "then"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {0..pi}) (\\<phi> (real n))", "have \"integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> n) = integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> n) + integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> n)\""], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..pi}) (\\<phi> (real n))\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n    integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n    integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))", "by (rule integral_combine) (use \\<open>0 < \\<delta>\\<close> \\<open>\\<delta> \\<le> pi\\<close> in auto)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "moreover"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "have \"\\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> n)\\<bar> \\<le> LINT x|lebesgue_on {0..\\<delta>}. \\<bar>f(t + x) + f(t - x) - 2 * l\\<bar> / x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>})\n           (\\<phi> (real n))\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n             \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "proof (rule integral_abs_bound_integral)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\n 2. integrable (lebesgue_on {0..\\<delta>})\n     (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<delta>}) \\<Longrightarrow>\n       \\<bar>\\<phi> (real n) x\\<bar>\n       \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "show \"integrable (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))", "by (meson integrable_subinterval \\<open>\\<delta> \\<le> pi\\<close> int atLeastatMost_subset_iff order_refl)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {0..\\<delta>})\n     (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<delta>}) \\<Longrightarrow>\n       \\<bar>\\<phi> (real n) x\\<bar>\n       \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "have \"{0..\\<delta>} \\<subseteq> {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {0..\\<delta>} \\<subseteq> {0..d}", "by (auto simp: \\<delta>_def)"], ["proof (state)\nthis:\n  {0..\\<delta>} \\<subseteq> {0..d}\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {0..\\<delta>})\n     (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<delta>}) \\<Longrightarrow>\n       \\<bar>\\<phi> (real n) x\\<bar>\n       \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "then"], ["proof (chain)\npicking this:\n  {0..\\<delta>} \\<subseteq> {0..d}", "show \"integrable (lebesgue_on {0..\\<delta>}) (\\<lambda>x. \\<bar>f(t + x) + f(t - x) - 2 * l\\<bar> / x)\""], ["proof (prove)\nusing this:\n  {0..\\<delta>} \\<subseteq> {0..d}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..\\<delta>})\n     (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)", "by (rule integrable_subinterval [OF int0d])"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..\\<delta>})\n   (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<delta>}) \\<Longrightarrow>\n       \\<bar>\\<phi> (real n) x\\<bar>\n       \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "show \"\\<bar>\\<phi> (real n) x\\<bar> \\<le> \\<bar>f(t + x) + f(t - x) - 2 * l\\<bar> / x\"\n        if \"x \\<in> space (lebesgue_on {0..\\<delta>})\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<phi> (real n) x\\<bar>\n    \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "using that"], ["proof (prove)\nusing this:\n  x \\<in> space (lebesgue_on {0..\\<delta>})\n\ngoal (1 subgoal):\n 1. \\<bar>\\<phi> (real n) x\\<bar>\n    \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "apply (auto simp: \\<phi>_def divide_simps abs_mult)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<le> \\<delta>; 0 < x\\<rbrakk>\n    \\<Longrightarrow> \\<bar>sin ((real n * 2 + 1) * x / 2)\\<bar> *\n                      \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar>\n                      \\<le> \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar>", "by (simp add: mult.commute mult_left_le)"], ["proof (state)\nthis:\n  ?x1 \\<in> space (lebesgue_on {0..\\<delta>}) \\<Longrightarrow>\n  \\<bar>\\<phi> (real n) ?x1\\<bar>\n  \\<le> \\<bar>f (t + ?x1) + f (t - ?x1) - 2 * l\\<bar> / ?x1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "ultimately"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x", "have \"\\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> n)\\<bar> < e/2 + e/2\""], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n    < e / 2 + e / 2", "using N [OF that] e2"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n         (\\<phi> (real n))\\<bar>\n  < e / 2\n  \\<bar>\\<theta> \\<delta>\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n    < e / 2 + e / 2", "unfolding \\<theta>_def"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) =\n  integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n)) +\n  integral\\<^sup>L (lebesgue_on {\\<delta>..pi}) (\\<phi> (real n))\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..\\<delta>}) (\\<phi> (real n))\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<delta>..pi})\n         (\\<phi> (real n))\\<bar>\n  < e / 2\n  \\<bar>LINT x|lebesgue_on {0..\\<delta>}.\n           \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n    < e / 2 + e / 2", "by linarith"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n  < e / 2 + e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "then"], ["proof (chain)\npicking this:\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n  < e / 2 + e / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar>\n  < e / 2 + e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e", "by simp"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n))\\<bar> < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  N \\<le> ?n1 \\<Longrightarrow>\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real ?n1))\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>integral\\<^sup>L (lebesgue_on {0..pi})\n                    (\\<phi> (real n)) -\n                   0\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  N \\<le> ?n1 \\<Longrightarrow>\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real ?n1))\\<bar> < e", "show \"\\<exists>N. \\<forall>n\\<ge>N. \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) - 0\\<bar> < e\""], ["proof (prove)\nusing this:\n  N \\<le> ?n1 \\<Longrightarrow>\n  \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real ?n1))\\<bar> < e\n\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) -\n                0\\<bar>\n          < e", "by force"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<bar>integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real n)) -\n              0\\<bar>\n        < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<phi> (real x)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "unfolding \\<phi>_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "using Fourier_sum_limit_sine_part assms pi_gt_zero"], ["proof (prove)\nusing this:\n  (\\<lambda>x.\n      LINT xa|lebesgue_on {0..pi}.\n         sin ((real x + 1 / 2) * xa) *\n         ((f (t + xa) + f (t - xa) - 2 * l) / xa))\n  \\<longlonglongrightarrow> 0\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x; 0 < ?d; ?d \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>n.\n                        \\<Sum>k\\<le>n.\n                           Fourier_coefficient ?f k *\n                           trigonometric_set k ?t)\n                    \\<longlonglongrightarrow> ?l =\n                    (\\<lambda>x.\n                        LINT xa|lebesgue_on {0..?d}.\n                           sin ((real x + 1 / 2) * xa) *\n                           ((?f (?t + xa) + ?f (?t - xa) - 2 * ?l) / xa))\n                    \\<longlonglongrightarrow> 0\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  integrable (lebesgue_on {0..d})\n   (\\<lambda>x. \\<bar>f (t + x) + f (t - x) - 2 * l\\<bar> / x)\n  0 < d\n  0 < pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n    \\<longlonglongrightarrow> l", "by blast"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      \\<Sum>k\\<le>n. Fourier_coefficient f k * trigonometric_set k t)\n  \\<longlonglongrightarrow> l\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Cesaro summability of Fourier series using Fej?r kernel\\<close>"], ["", "definition Fejer_kernel :: \"nat \\<Rightarrow> real \\<Rightarrow> real\"\n  where\n  \"Fejer_kernel \\<equiv> \\<lambda>n x. if n = 0 then 0 else (\\<Sum>r<n. Dirichlet_kernel r x) / n\""], ["", "lemma Fejer_kernel:\n     \"Fejer_kernel n x =\n        (if n = 0 then 0\n         else if x = 0 then n/2\n         else sin(n / 2 * x) ^ 2 / (2 * n * sin(x/2) ^ 2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "proof (cases \"x=0 \\<or> sin(x/2) = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = 0 \\<or> sin (x / 2) = 0 \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))\n 2. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "case True"], ["proof (state)\nthis:\n  x = 0 \\<or> sin (x / 2) = 0\n\ngoal (2 subgoals):\n 1. x = 0 \\<or> sin (x / 2) = 0 \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))\n 2. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "have \"(\\<Sum>r<n. (1 + real r * 2)) = real n * real n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n. 1 + real r * 2) = real n * real n", "by (induction n) (auto simp: algebra_simps)"], ["proof (state)\nthis:\n  (\\<Sum>r<n. 1 + real r * 2) = real n * real n\n\ngoal (2 subgoals):\n 1. x = 0 \\<or> sin (x / 2) = 0 \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))\n 2. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "with True"], ["proof (chain)\npicking this:\n  x = 0 \\<or> sin (x / 2) = 0\n  (\\<Sum>r<n. 1 + real r * 2) = real n * real n", "show ?thesis"], ["proof (prove)\nusing this:\n  x = 0 \\<or> sin (x / 2) = 0\n  (\\<Sum>r<n. 1 + real r * 2) = real n * real n\n\ngoal (1 subgoal):\n 1. Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "by (auto simp: Fejer_kernel_def Dirichlet_kernel_def field_simps simp flip: sum_divide_distrib)"], ["proof (state)\nthis:\n  Fejer_kernel n x =\n  (if n = 0 then 0\n   else if x = 0 then real n / 2\n        else (sin (real n / 2 * x))\\<^sup>2 /\n             (2 * real n * (sin (x / 2))\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "case False"], ["proof (state)\nthis:\n  \\<not> (x = 0 \\<or> sin (x / 2) = 0)\n\ngoal (1 subgoal):\n 1. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "have \"sin (x/2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n        sin (real n * x / 2) * sin (real n * x / 2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real n * x / 2) * sin (real n * x / 2)", "proof (induction n)"], ["proof (state)\ngoal (2 subgoals):\n 1. sin (x / 2) * (\\<Sum>r<0. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real 0 * x / 2) * sin (real 0 * x / 2)\n 2. \\<And>n.\n       sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real n * x / 2) * sin (real n * x / 2) \\<Longrightarrow>\n       sin (x / 2) * (\\<Sum>r<Suc n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real (Suc n) * x / 2) * sin (real (Suc n) * x / 2)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. sin (x / 2) * (\\<Sum>r<0. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real 0 * x / 2) * sin (real 0 * x / 2)\n 2. \\<And>n.\n       sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real n * x / 2) * sin (real n * x / 2) \\<Longrightarrow>\n       sin (x / 2) * (\\<Sum>r<Suc n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real (Suc n) * x / 2) * sin (real (Suc n) * x / 2)", "case (Suc n)"], ["proof (state)\nthis:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n\ngoal (2 subgoals):\n 1. sin (x / 2) * (\\<Sum>r<0. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real 0 * x / 2) * sin (real 0 * x / 2)\n 2. \\<And>n.\n       sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real n * x / 2) * sin (real n * x / 2) \\<Longrightarrow>\n       sin (x / 2) * (\\<Sum>r<Suc n. sin ((real r * 2 + 1) * x / 2)) =\n       sin (real (Suc n) * x / 2) * sin (real (Suc n) * x / 2)", "then"], ["proof (chain)\npicking this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)", "show ?case"], ["proof (prove)\nusing this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n\ngoal (1 subgoal):\n 1. sin (x / 2) * (\\<Sum>r<Suc n. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real (Suc n) * x / 2) * sin (real (Suc n) * x / 2)", "apply (simp add: field_simps sin_times_sin)"], ["proof (prove)\ngoal (1 subgoal):\n 1. cos (x * real n) +\n    2 * (sin (x / 2) * (\\<Sum>r<n. sin ((x + x * (real r * 2)) / 2))) =\n    1 \\<Longrightarrow>\n    cos ((x * 2 + x * (real n * 2)) / 2) =\n    cos ((x * 4 + x * (real n * 4)) / 4)", "apply (simp add: add_divide_distrib)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  sin (x / 2) * (\\<Sum>r<Suc n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real (Suc n) * x / 2) * sin (real (Suc n) * x / 2)\n\ngoal (1 subgoal):\n 1. sin (x / 2) * (\\<Sum>r<0. sin ((real r * 2 + 1) * x / 2)) =\n    sin (real 0 * x / 2) * sin (real 0 * x / 2)", "qed auto"], ["proof (state)\nthis:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n\ngoal (1 subgoal):\n 1. \\<not> (x = 0 \\<or> sin (x / 2) = 0) \\<Longrightarrow>\n    Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "then"], ["proof (chain)\npicking this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)", "show ?thesis"], ["proof (prove)\nusing this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n\ngoal (1 subgoal):\n 1. Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "using False"], ["proof (prove)\nusing this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n  \\<not> (x = 0 \\<or> sin (x / 2) = 0)\n\ngoal (1 subgoal):\n 1. Fejer_kernel n x =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "unfolding Fejer_kernel_def Dirichlet_kernel_def"], ["proof (prove)\nusing this:\n  sin (x / 2) * (\\<Sum>r<n. sin ((real r * 2 + 1) * x / 2)) =\n  sin (real n * x / 2) * sin (real n * x / 2)\n  \\<not> (x = 0 \\<or> sin (x / 2) = 0)\n\ngoal (1 subgoal):\n 1. (if n = 0 then 0\n     else (\\<Sum>r<n.\n              if x = 0 then real r + 1 / 2\n              else sin ((real r + 1 / 2) * x) / (2 * sin (x / 2))) /\n          real n) =\n    (if n = 0 then 0\n     else if x = 0 then real n / 2\n          else (sin (real n / 2 * x))\\<^sup>2 /\n               (2 * real n * (sin (x / 2))\\<^sup>2))", "by (simp add: divide_simps power2_eq_square mult.commute flip: sum_divide_distrib)"], ["proof (state)\nthis:\n  Fejer_kernel n x =\n  (if n = 0 then 0\n   else if x = 0 then real n / 2\n        else (sin (real n / 2 * x))\\<^sup>2 /\n             (2 * real n * (sin (x / 2))\\<^sup>2))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fejer_kernel_0 [simp]: \"Fejer_kernel 0 x = 0\"  \"Fejer_kernel n 0 = n/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fejer_kernel 0 x = 0 &&& Fejer_kernel n 0 = real n / 2", "by (auto simp: Fejer_kernel)"], ["", "lemma Fejer_kernel_continuous_strong:\n  \"continuous_on {-(2 * pi)<..<2 * pi} (Fejer_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)", "proof (cases \"n=0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)", "case False"], ["proof (state)\nthis:\n  n \\<noteq> 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)\n 2. n \\<noteq> 0 \\<Longrightarrow>\n    continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)", "then"], ["proof (chain)\npicking this:\n  n \\<noteq> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)", "by (simp add: Fejer_kernel_def continuous_intros Dirichlet_kernel_continuous_strong)"], ["proof (state)\nthis:\n  continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)\n\ngoal (1 subgoal):\n 1. n = 0 \\<Longrightarrow>\n    continuous_on {- (2 * pi)<..<2 * pi} (Fejer_kernel n)", "qed (simp add: Fejer_kernel_def)"], ["", "lemma Fejer_kernel_continuous:\n  \"continuous_on {-pi..pi} (Fejer_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {- pi..pi} (Fejer_kernel n)", "apply (rule continuous_on_subset [OF Fejer_kernel_continuous_strong])"], ["proof (prove)\ngoal (1 subgoal):\n 1. {- pi..pi} \\<subseteq> {- (2 * pi)<..<2 * pi}", "apply (simp add: subset_iff)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>t.\n       - pi \\<le> t \\<and> t \\<le> pi \\<longrightarrow>\n       - (2 * pi) < t \\<and> t < 2 * pi", "using pi_gt_zero"], ["proof (prove)\nusing this:\n  0 < pi\n\ngoal (1 subgoal):\n 1. \\<forall>t.\n       - pi \\<le> t \\<and> t \\<le> pi \\<longrightarrow>\n       - (2 * pi) < t \\<and> t < 2 * pi", "apply linarith"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma absolutely_integrable_mult_Fejer_kernel:\n  assumes \"f absolutely_integrable_on {-pi..pi}\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f x) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f x) absolutely_integrable_on {- pi..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. Fejer_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n 2. {- pi..pi} \\<in> sets lebesgue\n 3. bounded (Fejer_kernel n ` {- pi..pi})\n 4. f absolutely_integrable_on {- pi..pi}", "show \"Fejer_kernel n \\<in> borel_measurable (lebesgue_on {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fejer_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})", "by (simp add: Fejer_kernel_continuous continuous_imp_measurable_on_sets_lebesgue)"], ["proof (state)\nthis:\n  Fejer_kernel n \\<in> borel_measurable (lebesgue_on {- pi..pi})\n\ngoal (3 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. bounded (Fejer_kernel n ` {- pi..pi})\n 3. f absolutely_integrable_on {- pi..pi}", "show \"bounded (Fejer_kernel n ` {-pi..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded (Fejer_kernel n ` {- pi..pi})", "using Fejer_kernel_continuous compact_continuous_image compact_imp_bounded"], ["proof (prove)\nusing this:\n  continuous_on {- pi..pi} (Fejer_kernel ?n)\n  \\<lbrakk>continuous_on ?s ?f; compact ?s\\<rbrakk>\n  \\<Longrightarrow> compact (?f ` ?s)\n  compact ?U \\<Longrightarrow> bounded ?U\n\ngoal (1 subgoal):\n 1. bounded (Fejer_kernel n ` {- pi..pi})", "by blast"], ["proof (state)\nthis:\n  bounded (Fejer_kernel n ` {- pi..pi})\n\ngoal (2 subgoals):\n 1. {- pi..pi} \\<in> sets lebesgue\n 2. f absolutely_integrable_on {- pi..pi}", "qed (use assms in auto)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected1:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t + x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t + x)) absolutely_integrable_on\n    {- pi..pi}", "using assms"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t + x)) absolutely_integrable_on\n    {- pi..pi}", "by (force intro: absolutely_integrable_mult_Fejer_kernel absolutely_integrable_periodic_offset)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t - x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}", "have \"(\\<lambda>x. f(t - x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "using assms"], ["proof (prove)\nusing this:\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "apply (subst absolutely_integrable_reflect_real [symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>f absolutely_integrable_on {- pi..pi};\n     \\<And>x. f (x + 2 * pi) = f x\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>x. f (t - - x)) absolutely_integrable_on\n                      {- pi..- (- pi)}", "apply (simp add: absolutely_integrable_periodic_offset)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {- pi..pi}", "by (rule absolutely_integrable_mult_Fejer_kernel)"], ["proof (state)\nthis:\n  (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n  {- pi..pi}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected3:\n  shows \"(\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_on_const absolutely_integrable_mult_Fejer_kernel"], ["proof (prove)\nusing this:\n  ?S \\<in> lmeasurable \\<Longrightarrow>\n  (\\<lambda>x. ?c) absolutely_integrable_on ?S\n  ?f absolutely_integrable_on {- pi..pi} \\<Longrightarrow>\n  (\\<lambda>x. Fejer_kernel ?n x * ?f x) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {- pi..pi}", "by blast"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part1:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t + x)) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t + x)) absolutely_integrable_on\n    {0..d}", "by (rule absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Fejer_kernel_reflected1]) (auto simp: assms)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part2:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * f(t - x)) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {0..d}", "by (rule absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Fejer_kernel_reflected2]) (auto simp: assms)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part3:\n  assumes \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * c) absolutely_integrable_on {0..d}", "by (rule absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Fejer_kernel_reflected2]) (auto simp: assms)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part4:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * (f(t + x) + f(t - x))) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Fejer_kernel n x * (f (t + x) + f (t - x))) absolutely_integrable_on\n    {0..d}", "unfolding distrib_left"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Fejer_kernel n x * f (t + x) +\n        Fejer_kernel n x * f (t - x)) absolutely_integrable_on\n    {0..d}", "by (intro set_integral_add absolutely_integrable_mult_Fejer_kernel_reflected_part1 absolutely_integrable_mult_Fejer_kernel_reflected_part2 assms)"], ["", "lemma absolutely_integrable_mult_Fejer_kernel_reflected_part5:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"d \\<le> pi\"\n  shows \"(\\<lambda>x. Fejer_kernel n x * ((f(t + x) + f(t - x)) - c)) absolutely_integrable_on {0..d}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Fejer_kernel n x *\n        (f (t + x) + f (t - x) - c)) absolutely_integrable_on\n    {0..d}", "unfolding distrib_left right_diff_distrib"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        Fejer_kernel n x * f (t + x) + Fejer_kernel n x * f (t - x) -\n        Fejer_kernel n x * c) absolutely_integrable_on\n    {0..d}", "by (intro set_integral_add set_integral_diff absolutely_integrable_on_const\n      absolutely_integrable_mult_Fejer_kernel_reflected_part1 absolutely_integrable_mult_Fejer_kernel_reflected_part2 assms, auto)"], ["", "lemma Fourier_sum_offset_Fejer_kernel_half:\n  fixes n::nat\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\" and \"n > 0\"\n  shows \"(\\<Sum>r<n. \\<Sum>k\\<le>2*r. Fourier_coefficient f k * trigonometric_set k t) / n - l\n       = (LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * (f(t + x) + f(t - x) - 2 * l)) / pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have \"(\\<Sum>r<n. \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) - real n * l\n       = (\\<Sum>r<n. (\\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) - l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) -\n    real n * l =\n    (\\<Sum>r<n.\n        (\\<Sum>k\\<le>2 * r.\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l)", "by (simp add: sum_subtractf)"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  (\\<Sum>r<n.\n      (\\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n      l)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "also"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  (\\<Sum>r<n.\n      (\\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n      l)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have \"\\<dots> = (\\<Sum>r<n.\n                      (LINT x|lebesgue_on {0..pi}. Dirichlet_kernel r x * (f(t + x) + f(t - x) - 2 * l)) / pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (\\<Sum>k\\<le>2 * r.\n            Fourier_coefficient f k * trigonometric_set k t) -\n        l) =\n    (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi)", "by (simp add: Fourier_sum_offset_Dirichlet_kernel_half assms)"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      (\\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n      l) =\n  (\\<Sum>r<n.\n      (LINT x|lebesgue_on {0..pi}.\n          Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n      pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "also"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      (\\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n      l) =\n  (\\<Sum>r<n.\n      (LINT x|lebesgue_on {0..pi}.\n          Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n      pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "have \"\\<dots> = real n * ((LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * (f(t + x) + f(t - x) - 2 * l)) / pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi) =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi) =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "have \"integrable (lebesgue_on {0..pi}) (\\<lambda>x. Dirichlet_kernel i x * (f(t + x) + f(t - x) - 2 * l))\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi})\n     (\\<lambda>x. Dirichlet_kernel i x * (f (t + x) + f (t - x) - 2 * l))", "using absolutely_integrable_mult_Dirichlet_kernel_reflected_part2(2) f periodic"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {- pi..pi};\n   \\<And>x. ?f (x + 2 * pi) = ?f x; ?d \\<le> pi\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x.\n                        Dirichlet_kernel ?n x *\n                        (?f (?t + x) + ?f (?t - x) -\n                         ?c)) absolutely_integrable_on\n                    {0..?d}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi})\n     (\\<lambda>x. Dirichlet_kernel i x * (f (t + x) + f (t - x) - 2 * l))", "by (force simp: intro!: absolutely_integrable_imp_integrable)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..pi})\n   (\\<lambda>x. Dirichlet_kernel ?i x * (f (t + x) + f (t - x) - 2 * l))\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi) =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "then"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {0..pi})\n   (\\<lambda>x. Dirichlet_kernel ?i x * (f (t + x) + f (t - x) - 2 * l))", "show ?thesis"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..pi})\n   (\\<lambda>x. Dirichlet_kernel ?i x * (f (t + x) + f (t - x) - 2 * l))\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi) =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "using \\<open>n > 0\\<close>"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..pi})\n   (\\<lambda>x. Dirichlet_kernel ?i x * (f (t + x) + f (t - x) - 2 * l))\n  0 < n\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        (LINT x|lebesgue_on {0..pi}.\n            Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n        pi) =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "apply (simp add: Fejer_kernel_def flip: sum_divide_distrib)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>i.\n                integrable (lebesgue_on {0..pi})\n                 (\\<lambda>x.\n                     Dirichlet_kernel i x *\n                     (f (t + x) + f (t - x) - 2 * l));\n     0 < n\\<rbrakk>\n    \\<Longrightarrow> (\\<Sum>r<n.\n                          LINT x|lebesgue_on {0..pi}.\n                             Dirichlet_kernel r x *\n                             (f (t + x) + f (t - x) - 2 * l)) =\n                      LINT x|lebesgue_on {0..pi}.\n                         (\\<Sum>r<n. Dirichlet_kernel r x) *\n                         (f (t + x) + f (t - x) - 2 * l)", "apply (simp add: sum_distrib_right flip: Bochner_Integration.integral_sum [symmetric])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      (LINT x|lebesgue_on {0..pi}.\n          Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n      pi) =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      (LINT x|lebesgue_on {0..pi}.\n          Dirichlet_kernel r x * (f (t + x) + f (t - x) - 2 * l)) /\n      pi) =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)", "have \"(\\<Sum>r<n. \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) - real n * l = real n * ((LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * (f(t + x) + f(t - x) - 2 * l)) / pi)\""], ["proof (prove)\nusing this:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) -\n    real n * l =\n    real n *\n    ((LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n     pi)", "."], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "with \\<open>n > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < n\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < n\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) -\n  real n * l =\n  real n *\n  ((LINT x|lebesgue_on {0..pi}.\n       Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n   pi)\n\ngoal (1 subgoal):\n 1. (\\<Sum>r<n.\n        \\<Sum>k\\<le>2 * r.\n           Fourier_coefficient f k * trigonometric_set k t) /\n    real n -\n    l =\n    (LINT x|lebesgue_on {0..pi}.\n        Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n    pi", "by (auto simp: mult.commute divide_simps)"], ["proof (state)\nthis:\n  (\\<Sum>r<n.\n      \\<Sum>k\\<le>2 * r. Fourier_coefficient f k * trigonometric_set k t) /\n  real n -\n  l =\n  (LINT x|lebesgue_on {0..pi}.\n      Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l)) /\n  pi\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fourier_sum_limit_Fejer_kernel_half:\n  fixes n::nat\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. ((\\<Sum>r<n. \\<Sum>k\\<le>2*r. Fourier_coefficient f k * trigonometric_set k t)) / n) \\<longlonglongrightarrow> l\n         \\<longleftrightarrow>\n         ((\\<lambda>n. integral\\<^sup>L (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * ((f(t + x) + f(t - x)) - 2*l)))  \\<longlonglongrightarrow> 0)\"\n        (is \"?lhs = ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "have \"?lhs \\<longleftrightarrow>\n        (\\<lambda>n. ((\\<Sum>r<n. \\<Sum>k\\<le>2*r.  Fourier_coefficient f k * trigonometric_set k t)) / n - l) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n -\n        l)\n    \\<longlonglongrightarrow> 0", "by (simp add: LIM_zero_iff)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n -\n      l)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n -\n      l)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "have \"\\<dots> \\<longleftrightarrow>\n        (\\<lambda>n. ((((\\<Sum>r<n. \\<Sum>k\\<le>2*r.  Fourier_coefficient f k * trigonometric_set k t)) / n) - l) * pi) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n -\n        l)\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>n.\n        ((\\<Sum>r<n.\n             \\<Sum>k\\<le>2 * r.\n                Fourier_coefficient f k * trigonometric_set k t) /\n         real n -\n         l) *\n        pi)\n    \\<longlonglongrightarrow> 0", "using tendsto_mult_right_iff [OF pi_neq_zero]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. ?f x * pi) \\<longlongrightarrow> ?l * pi) ?F =\n  (?f \\<longlongrightarrow> ?l) ?F\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n -\n        l)\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>n.\n        ((\\<Sum>r<n.\n             \\<Sum>k\\<le>2 * r.\n                Fourier_coefficient f k * trigonometric_set k t) /\n         real n -\n         l) *\n        pi)\n    \\<longlonglongrightarrow> 0", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n -\n      l)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      ((\\<Sum>r<n.\n           \\<Sum>k\\<le>2 * r.\n              Fourier_coefficient f k * trigonometric_set k t) /\n       real n -\n       l) *\n      pi)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "also"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n -\n      l)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      ((\\<Sum>r<n.\n           \\<Sum>k\\<le>2 * r.\n              Fourier_coefficient f k * trigonometric_set k t) /\n       real n -\n       l) *\n      pi)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "have \"\\<dots> \\<longleftrightarrow> ?rhs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        ((\\<Sum>r<n.\n             \\<Sum>k\\<le>2 * r.\n                Fourier_coefficient f k * trigonometric_set k t) /\n         real n -\n         l) *\n        pi)\n    \\<longlonglongrightarrow> 0 =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "apply (intro Lim_transform_eq [OF Lim_transform_eventually [of \"\\<lambda>n. 0\"]] eventually_sequentiallyI [of 1])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<lambda>n. 0) \\<longlonglongrightarrow> 0\n 2. \\<And>x.\n       1 \\<le> x \\<Longrightarrow>\n       0 =\n       ((\\<Sum>r<x.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real x -\n        l) *\n       pi -\n       (LINT xa|lebesgue_on {0..pi}.\n           Fejer_kernel x xa * (f (t + xa) + f (t - xa) - 2 * l))", "apply (simp_all add: Fourier_sum_offset_Fejer_kernel_half assms)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      ((\\<Sum>r<n.\n           \\<Sum>k\\<le>2 * r.\n              Fourier_coefficient f k * trigonometric_set k t) /\n       real n -\n       l) *\n      pi)\n  \\<longlonglongrightarrow> 0 =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "finally"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>r<n.\n            \\<Sum>k\\<le>2 * r.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> l =\n    (\\<lambda>n.\n        LINT x|lebesgue_on {0..pi}.\n           Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n    \\<longlonglongrightarrow> 0", "."], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>r<n.\n          \\<Sum>k\\<le>2 * r.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> l =\n  (\\<lambda>n.\n      LINT x|lebesgue_on {0..pi}.\n         Fejer_kernel n x * (f (t + x) + f (t - x) - 2 * l))\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_integral_Fejer_kernel:\n  \"has_bochner_integral (lebesgue_on {-pi..pi}) (Fejer_kernel n) (if n = 0 then 0 else pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi)", "have \"has_bochner_integral (lebesgue_on {-pi..pi}) (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n) ((\\<Sum>r<n. pi) / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi})\n     (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n     ((\\<Sum>r<n. pi) / real n)", "by (simp add: has_bochner_integral_iff integrable_Dirichlet_kernel has_bochner_integral_divide has_bochner_integral_sum)"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi) / real n)\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi)", "then"], ["proof (chain)\npicking this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi) / real n)", "show ?thesis"], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {- pi..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi) / real n)\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {- pi..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi)", "by (auto simp: Fejer_kernel_def)"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {- pi..pi}) (Fejer_kernel n)\n   (if n = 0 then 0 else pi)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma has_integral_Fejer_kernel_half:\n  \"has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n) (if n = 0 then 0 else pi/2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi / 2)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi / 2)", "have \"has_bochner_integral (lebesgue_on {0..pi}) (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n) ((\\<Sum>r<n. pi/2) / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {0..pi})\n     (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n     ((\\<Sum>r<n. pi / 2) / real n)", "apply (intro has_bochner_integral_sum has_bochner_integral_divide)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> {..<n} \\<Longrightarrow>\n       has_bochner_integral (lebesgue_on {0..pi}) (Dirichlet_kernel r)\n        (pi / 2)", "using not_integrable_integral_eq"], ["proof (prove)\nusing this:\n  \\<not> integrable ?M ?f \\<Longrightarrow>\n  integral\\<^sup>L ?M ?f = (0::?'b)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       r \\<in> {..<n} \\<Longrightarrow>\n       has_bochner_integral (lebesgue_on {0..pi}) (Dirichlet_kernel r)\n        (pi / 2)", "by (force simp: has_bochner_integral_iff)"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {0..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi / 2) / real n)\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi / 2)", "then"], ["proof (chain)\npicking this:\n  has_bochner_integral (lebesgue_on {0..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi / 2) / real n)", "show ?thesis"], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {0..pi})\n   (\\<lambda>x. (\\<Sum>r<n. Dirichlet_kernel r x) / real n)\n   ((\\<Sum>r<n. pi / 2) / real n)\n\ngoal (1 subgoal):\n 1. has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n)\n     (if n = 0 then 0 else pi / 2)", "by (auto simp: Fejer_kernel_def)"], ["proof (state)\nthis:\n  has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel n)\n   (if n = 0 then 0 else pi / 2)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Fejer_kernel_pos_le [simp]: \"Fejer_kernel n x \\<ge> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> Fejer_kernel n x", "by (simp add: Fejer_kernel)"], ["", "theorem Fourier_Fejer_Cesaro_summable:\n  assumes f: \"f absolutely_integrable_on {-pi..pi}\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n    and fl: \"(f \\<longlongrightarrow> l) (at t within atMost t)\"\n    and fr: \"(f \\<longlongrightarrow> r) (at t within atLeast t)\"\n  shows \"(\\<lambda>n. (\\<Sum>m<n. \\<Sum>k\\<le>2*m. Fourier_coefficient f k * trigonometric_set k t) / n) \\<longlonglongrightarrow> (l+r) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "define h where \"h \\<equiv> \\<lambda>u. (f(t+u) + f(t-u)) - (l+r)\""], ["proof (state)\nthis:\n  h \\<equiv> \\<lambda>u. f (t + u) + f (t - u) - (l + r)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "have \"(\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n    \\<longlonglongrightarrow> 0", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n    \\<longlonglongrightarrow> 0", "have h0: \"(h \\<longlongrightarrow> 0) (at 0 within atLeast 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "have l0: \"((\\<lambda>u. f(t-u) - l) \\<longlongrightarrow> 0) (at 0 within {0..})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f (t - u) - l) \\<longlongrightarrow> 0)\n     (at 0 within {0..})", "using fl"], ["proof (prove)\nusing this:\n  (f \\<longlongrightarrow> l) (at t within {..t})\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f (t - u) - l) \\<longlongrightarrow> 0)\n     (at 0 within {0..})", "unfolding Lim_within"], ["proof (prove)\nusing this:\n  \\<forall>e>0.\n     \\<exists>d>0.\n        \\<forall>x\\<in>{..t}.\n           0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n           dist (f x) l < e\n\ngoal (1 subgoal):\n 1. \\<forall>e>0.\n       \\<exists>d>0.\n          \\<forall>x\\<in>{0..}.\n             0 < dist x 0 \\<and> dist x 0 < d \\<longrightarrow>\n             dist (f (t - x) - l) 0 < e", "apply (elim all_forward imp_forward ex_forward conj_forward asm_rl, clarify)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>e d x.\n       \\<lbrakk>\\<forall>x\\<in>{..t}.\n                   0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                   dist (f x) l < e;\n        \\<forall>e>0.\n           \\<exists>d>0.\n              \\<forall>x\\<in>{..t}.\n                 0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                 dist (f x) l < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d\\<rbrakk>\n       \\<Longrightarrow> dist (f (t - x) - l) 0 < e", "apply (drule_tac x=\"t-x\" in bspec)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>e d x.\n       \\<lbrakk>\\<forall>e>0.\n                   \\<exists>d>0.\n                      \\<forall>x\\<in>{..t}.\n                         0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                         dist (f x) l < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d\\<rbrakk>\n       \\<Longrightarrow> t - x \\<in> {..t}\n 2. \\<And>e d x.\n       \\<lbrakk>\\<forall>e>0.\n                   \\<exists>d>0.\n                      \\<forall>x\\<in>{..t}.\n                         0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                         dist (f x) l < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d;\n        0 < dist (t - x) t \\<and> dist (t - x) t < d \\<longrightarrow>\n        dist (f (t - x)) l < e\\<rbrakk>\n       \\<Longrightarrow> dist (f (t - x) - l) 0 < e", "apply (auto simp: dist_norm)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ((\\<lambda>u. f (t - u) - l) \\<longlongrightarrow> 0) (at 0 within {0..})\n\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "have r0: \"((\\<lambda>u. f(t + u) - r) \\<longlongrightarrow> 0) (at 0 within {0..})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f (t + u) - r) \\<longlongrightarrow> 0)\n     (at 0 within {0..})", "using fr"], ["proof (prove)\nusing this:\n  (f \\<longlongrightarrow> r) (at t within {t..})\n\ngoal (1 subgoal):\n 1. ((\\<lambda>u. f (t + u) - r) \\<longlongrightarrow> 0)\n     (at 0 within {0..})", "unfolding Lim_within"], ["proof (prove)\nusing this:\n  \\<forall>e>0.\n     \\<exists>d>0.\n        \\<forall>x\\<in>{t..}.\n           0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n           dist (f x) r < e\n\ngoal (1 subgoal):\n 1. \\<forall>e>0.\n       \\<exists>d>0.\n          \\<forall>x\\<in>{0..}.\n             0 < dist x 0 \\<and> dist x 0 < d \\<longrightarrow>\n             dist (f (t + x) - r) 0 < e", "apply (elim all_forward imp_forward ex_forward conj_forward asm_rl, clarify)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>e d x.\n       \\<lbrakk>\\<forall>x\\<in>{t..}.\n                   0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                   dist (f x) r < e;\n        \\<forall>e>0.\n           \\<exists>d>0.\n              \\<forall>x\\<in>{t..}.\n                 0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                 dist (f x) r < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d\\<rbrakk>\n       \\<Longrightarrow> dist (f (t + x) - r) 0 < e", "apply (drule_tac x=\"t+x\" in bspec)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>e d x.\n       \\<lbrakk>\\<forall>e>0.\n                   \\<exists>d>0.\n                      \\<forall>x\\<in>{t..}.\n                         0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                         dist (f x) r < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d\\<rbrakk>\n       \\<Longrightarrow> t + x \\<in> {t..}\n 2. \\<And>e d x.\n       \\<lbrakk>\\<forall>e>0.\n                   \\<exists>d>0.\n                      \\<forall>x\\<in>{t..}.\n                         0 < dist x t \\<and> dist x t < d \\<longrightarrow>\n                         dist (f x) r < e;\n        0 \\<le> x; 0 < dist x 0; dist x 0 < d;\n        0 < dist (t + x) t \\<and> dist (t + x) t < d \\<longrightarrow>\n        dist (f (t + x)) r < e\\<rbrakk>\n       \\<Longrightarrow> dist (f (t + x) - r) 0 < e", "apply (auto simp: dist_norm)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ((\\<lambda>u. f (t + u) - r) \\<longlongrightarrow> 0) (at 0 within {0..})\n\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "using tendsto_add [OF l0 r0]"], ["proof (prove)\nusing this:\n  ((\\<lambda>x. f (t - x) - l + (f (t + x) - r)) \\<longlongrightarrow>\n   0 + 0)\n   (at 0 within {0..})\n\ngoal (1 subgoal):\n 1. (h \\<longlongrightarrow> 0) (at 0 within {0..})", "by (simp add: h_def algebra_simps)"], ["proof (state)\nthis:\n  (h \\<longlongrightarrow> 0) (at 0 within {0..})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (h \\<longlongrightarrow> 0) (at 0 within {0..})\n\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n    \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n    \\<longlonglongrightarrow> 0", "unfolding lim_sequentially dist_real_def diff_0_right"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>r>0.\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "proof clarify"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "fix e::real"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "assume \"e > 0\""], ["proof (state)\nthis:\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  0 < e", "obtain x' where \"0 < x'\" \"\\<And>x. \\<lbrakk>0 < x; x < x'\\<rbrakk> \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\""], ["proof (prove)\nusing this:\n  0 < e\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>0 < x';\n         \\<And>x.\n            \\<lbrakk>0 < x; x < x'\\<rbrakk>\n            \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using h0"], ["proof (prove)\nusing this:\n  0 < e\n  (h \\<longlongrightarrow> 0) (at 0 within {0..})\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>0 < x';\n         \\<And>x.\n            \\<lbrakk>0 < x; x < x'\\<rbrakk>\n            \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Lim_within dist_real_def"], ["proof (prove)\nusing this:\n  0 < e\n  \\<forall>e>0.\n     \\<exists>d>0.\n        \\<forall>x\\<in>{0..}.\n           0 < \\<bar>x - 0\\<bar> \\<and>\n           \\<bar>x - 0\\<bar> < d \\<longrightarrow>\n           \\<bar>h x - 0\\<bar> < e\n\ngoal (1 subgoal):\n 1. (\\<And>x'.\n        \\<lbrakk>0 < x';\n         \\<And>x.\n            \\<lbrakk>0 < x; x < x'\\<rbrakk>\n            \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: dest: spec [where x=\"e/2/pi\"])"], ["proof (state)\nthis:\n  0 < x'\n  \\<lbrakk>0 < ?x; ?x < x'\\<rbrakk>\n  \\<Longrightarrow> \\<bar>h ?x\\<bar> < e / (2 * pi)\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  0 < x'\n  \\<lbrakk>0 < ?x; ?x < x'\\<rbrakk>\n  \\<Longrightarrow> \\<bar>h ?x\\<bar> < e / (2 * pi)", "obtain \\<xi> where \"0 < \\<xi>\" \"\\<xi> < pi\" and \\<xi>: \"\\<And>x. 0 < x \\<and> x \\<le> \\<xi> \\<Longrightarrow> \\<bar>h x\\<bar> < e/2/pi\""], ["proof (prove)\nusing this:\n  0 < x'\n  \\<lbrakk>0 < ?x; ?x < x'\\<rbrakk>\n  \\<Longrightarrow> \\<bar>h ?x\\<bar> < e / (2 * pi)\n\ngoal (1 subgoal):\n 1. (\\<And>\\<xi>.\n        \\<lbrakk>0 < \\<xi>; \\<xi> < pi;\n         \\<And>x.\n            0 < x \\<and> x \\<le> \\<xi> \\<Longrightarrow>\n            \\<bar>h x\\<bar> < e / 2 / pi\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "apply (intro that [where \\<xi>=\"min x' pi/2\"], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<xi>.\n                \\<lbrakk>0 < \\<xi>; \\<xi> < pi;\n                 \\<And>x.\n                    0 < x \\<and> x \\<le> \\<xi> \\<Longrightarrow>\n                    \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     0 < x';\n     \\<And>x.\n        \\<lbrakk>0 < x; x < x'\\<rbrakk>\n        \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n    \\<Longrightarrow> min x' pi < pi * 2", "using m2pi_less_pi"], ["proof (prove)\nusing this:\n  - (2 * pi) < pi\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<xi>.\n                \\<lbrakk>0 < \\<xi>; \\<xi> < pi;\n                 \\<And>x.\n                    0 < x \\<and> x \\<le> \\<xi> \\<Longrightarrow>\n                    \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n                \\<Longrightarrow> thesis;\n     0 < x';\n     \\<And>x.\n        \\<lbrakk>0 < x; x < x'\\<rbrakk>\n        \\<Longrightarrow> \\<bar>h x\\<bar> < e / (2 * pi)\\<rbrakk>\n    \\<Longrightarrow> min x' pi < pi * 2", "by linarith"], ["proof (state)\nthis:\n  0 < \\<xi>\n  \\<xi> < pi\n  0 < ?x \\<and> ?x \\<le> \\<xi> \\<Longrightarrow>\n  \\<bar>h ?x\\<bar> < e / 2 / pi\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "have ftx: \"(\\<lambda>x. f(t+x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_periodic_offset assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (x + ?c)) absolutely_integrable_on\n                    {?a..?b}\n  \\<lbrakk>?f absolutely_integrable_on {?a..?b};\n   \\<And>x. ?f (x + (?b - ?a)) = ?f x\\<rbrakk>\n  \\<Longrightarrow> (\\<lambda>x. ?f (?c + x)) absolutely_integrable_on\n                    {?a..?b}\n  f absolutely_integrable_on {- pi..pi}\n  f (?x + 2 * pi) = f ?x\n  (f \\<longlongrightarrow> l) (at t within {..t})\n  (f \\<longlongrightarrow> r) (at t within {t..})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "by auto"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}", "have ftmx: \"(\\<lambda>x. f(t-x)) absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. f (t + x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}", "by (simp flip: absolutely_integrable_reflect_real [where f= \"(\\<lambda>x. f(t+x))\"])"], ["proof (state)\nthis:\n  (\\<lambda>x. f (t - x)) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "have h_aint: \"h absolutely_integrable_on {-pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h absolutely_integrable_on {- pi..pi}", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>u. f (t + u) + f (t - u) - (l + r)) absolutely_integrable_on\n    {- pi..pi}", "by (intro absolutely_integrable_on_const set_integral_diff set_integral_add, auto simp: ftx ftmx)"], ["proof (state)\nthis:\n  h absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "have \"(\\<lambda>n. LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x) \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n. LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n    \\<longlonglongrightarrow> 0", "proof (rule Lim_null_comparison)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially.\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "define \\<phi> where \"\\<phi> \\<equiv> \\<lambda>n. (LINT x|lebesgue_on {\\<xi>..pi}. \\<bar>h x\\<bar> / (2 * sin(x/2) ^ 2)) / n\""], ["proof (state)\nthis:\n  \\<phi> \\<equiv>\n  (/) (LINT x|lebesgue_on {\\<xi>..pi}.\n          \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2))\n\ngoal (2 subgoals):\n 1. \\<forall>\\<^sub>F x in sequentially.\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> ?g x\n 2. ?g \\<longlonglongrightarrow> 0", "show \"\\<forall>\\<^sub>F n in sequentially. norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x) \\<le> \\<phi> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>\\<^sub>F n in sequentially.\n       norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n       \\<le> \\<phi> (real n)", "proof (rule eventually_sequentiallyI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "fix n::nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "assume \"n \\<ge> 1\""], ["proof (state)\nthis:\n  1 \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "have hint: \"(\\<lambda>x. h x / (2 * sin(x/2) ^ 2)) absolutely_integrable_on {\\<xi>..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. h x / (2 * (sin (x / 2))\\<^sup>2)) absolutely_integrable_on\n    {\\<xi>..pi}", "unfolding divide_inverse mult.commute [of \"h _\"]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        inverse (2 * (sin (x * inverse 2))\\<^sup>2) *\n        h x) absolutely_integrable_on\n    {\\<xi>..pi}", "proof (rule absolutely_integrable_bounded_measurable_product_real)"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. {\\<xi>..pi} \\<in> sets lebesgue\n 3. bounded\n     ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) `\n      {\\<xi>..pi})\n 4. h absolutely_integrable_on {\\<xi>..pi}", "have cont: \"continuous_on {\\<xi>..pi} (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. continuous_on {\\<xi>..pi}\n     (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))", "using \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. continuous_on {\\<xi>..pi}\n     (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))", "by (intro continuous_intros) (auto simp: sin_zero_pi_iff)"], ["proof (state)\nthis:\n  continuous_on {\\<xi>..pi}\n   (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n\ngoal (4 subgoals):\n 1. (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. {\\<xi>..pi} \\<in> sets lebesgue\n 3. bounded\n     ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) `\n      {\\<xi>..pi})\n 4. h absolutely_integrable_on {\\<xi>..pi}", "show \"(\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})", "using \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})", "by (intro cont continuous_imp_measurable_on_sets_lebesgue) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n  \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n\ngoal (3 subgoals):\n 1. {\\<xi>..pi} \\<in> sets lebesgue\n 2. bounded\n     ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) `\n      {\\<xi>..pi})\n 3. h absolutely_integrable_on {\\<xi>..pi}", "show \"bounded ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) ` {\\<xi>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded\n     ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) `\n      {\\<xi>..pi})", "using cont"], ["proof (prove)\nusing this:\n  continuous_on {\\<xi>..pi}\n   (\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2))\n\ngoal (1 subgoal):\n 1. bounded\n     ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) `\n      {\\<xi>..pi})", "by (simp add: compact_continuous_image compact_imp_bounded)"], ["proof (state)\nthis:\n  bounded\n   ((\\<lambda>x. inverse (2 * (sin (x * inverse 2))\\<^sup>2)) ` {\\<xi>..pi})\n\ngoal (2 subgoals):\n 1. {\\<xi>..pi} \\<in> sets lebesgue\n 2. h absolutely_integrable_on {\\<xi>..pi}", "show \"h absolutely_integrable_on {\\<xi>..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. h absolutely_integrable_on {\\<xi>..pi}", "using \\<open>0 < \\<xi>\\<close> \\<open>\\<xi> < pi\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n  \\<xi> < pi\n\ngoal (1 subgoal):\n 1. h absolutely_integrable_on {\\<xi>..pi}", "by (auto intro: absolutely_integrable_on_subinterval [OF h_aint])"], ["proof (state)\nthis:\n  h absolutely_integrable_on {\\<xi>..pi}\n\ngoal (1 subgoal):\n 1. {\\<xi>..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. h x / (2 * (sin (x / 2))\\<^sup>2)) absolutely_integrable_on\n  {\\<xi>..pi}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. h x / (2 * (sin (x / 2))\\<^sup>2)) absolutely_integrable_on\n  {\\<xi>..pi}", "have *: \"integrable (lebesgue_on {\\<xi>..pi}) (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x/2))\\<^sup>2))\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. h x / (2 * (sin (x / 2))\\<^sup>2)) absolutely_integrable_on\n  {\\<xi>..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2))", "by (simp add: absolutely_integrable_measurable o_def)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "define \\<psi> where\n              \"\\<psi> \\<equiv> \\<lambda>x. (if n = 0 then 0 else if x = 0 then n/2\n                         else (sin (real n / 2 * x))\\<^sup>2 / (2 * real n * (sin (x/2))\\<^sup>2)) * h x\""], ["proof (state)\nthis:\n  \\<psi> \\<equiv>\n  \\<lambda>x.\n     (if n = 0 then 0\n      else if x = 0 then real n / 2\n           else (sin (real n / 2 * x))\\<^sup>2 /\n                (2 * real n * (sin (x / 2))\\<^sup>2)) *\n     h x\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "have \"\\<bar>LINT x|lebesgue_on {\\<xi>..pi}. \\<psi> x\\<bar>\n              \\<le> (LINT x|lebesgue_on {\\<xi>..pi}. \\<bar>h x\\<bar> / (2 * (sin (x/2))\\<^sup>2) / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>integral\\<^sup>L (lebesgue_on {\\<xi>..pi}) \\<psi>\\<bar>\n    \\<le> LINT x|lebesgue_on {\\<xi>..pi}.\n             \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "proof (rule integral_abs_bound_integral)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {\\<xi>..pi}) \\<psi>\n 2. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n       \\<bar>\\<psi> x\\<bar>\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "show **: \"integrable (lebesgue_on {\\<xi>..pi}) (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x/2))\\<^sup>2) / n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n)", "using Bochner_Integration.integrable_mult_left [OF *, of \"1/n\"]"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x.\n       \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) * (1 / real n))\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n)\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {\\<xi>..pi}) \\<psi>\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n       \\<bar>\\<psi> x\\<bar>\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "show \\<dagger>: \"\\<bar>\\<psi> x\\<bar> \\<le> \\<bar>h x\\<bar> / (2 * (sin (x/2))\\<^sup>2) / real n\"\n              if \"x \\<in> space (lebesgue_on {\\<xi>..pi})\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> x\\<bar>\n    \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "using that \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> space (lebesgue_on {\\<xi>..pi})\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. \\<bar>\\<psi> x\\<bar>\n    \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "apply (simp add: \\<psi>_def divide_simps mult_less_0_iff abs_mult)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<xi> \\<le> x \\<and> x \\<le> pi; 0 < \\<xi>\\<rbrakk>\n    \\<Longrightarrow> sin (x / 2) \\<noteq> 0 \\<longrightarrow>\n                      0 < n \\<longrightarrow>\n                      (sin (real n * x / 2))\\<^sup>2 * \\<bar>h x\\<bar>\n                      \\<le> \\<bar>h x\\<bar>", "apply (auto simp: square_le_1 mult_left_le_one_le)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  ?x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n  \\<bar>\\<psi> ?x\\<bar>\n  \\<le> \\<bar>h ?x\\<bar> / (2 * (sin (?x / 2))\\<^sup>2) / real n\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi}) \\<psi>", "show \"integrable (lebesgue_on {\\<xi>..pi}) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi}) \\<psi>", "proof (rule measurable_bounded_by_integrable_imp_lebesgue_integrable [OF _ **])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. \\<And>x.\n       x \\<in> {\\<xi>..pi} \\<Longrightarrow>\n       norm (\\<psi> x)\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n 3. {\\<xi>..pi} \\<in> sets lebesgue", "let ?g = \"\\<lambda>x. \\<bar>h x\\<bar> / (2 * sin(x/2) ^ 2) / n\""], ["proof (state)\ngoal (3 subgoals):\n 1. \\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. \\<And>x.\n       x \\<in> {\\<xi>..pi} \\<Longrightarrow>\n       norm (\\<psi> x)\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n 3. {\\<xi>..pi} \\<in> sets lebesgue", "have ***: \"integrable (lebesgue_on {\\<xi>..pi}) (\\<lambda>x. (sin (n/2 * x))\\<^sup>2 * (inverse (2 * (sin (x/2))\\<^sup>2) * h x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x.\n         (sin (real n / 2 * x))\\<^sup>2 *\n         (inverse (2 * (sin (x / 2))\\<^sup>2) * h x))", "proof (rule absolutely_integrable_imp_integrable [OF absolutely_integrable_bounded_measurable_product_real])"], ["proof (state)\ngoal (5 subgoals):\n 1. (\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. {\\<xi>..pi} \\<in> sets lebesgue\n 3. bounded ((\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) ` {\\<xi>..pi})\n 4. (\\<lambda>x.\n        inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n    {\\<xi>..pi}\n 5. {\\<xi>..pi} \\<in> sets lebesgue", "show \"(\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2)\n    \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})", "by (intro continuous_imp_measurable_on_sets_lebesgue continuous_intros) auto"], ["proof (state)\nthis:\n  (\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2)\n  \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n\ngoal (4 subgoals):\n 1. {\\<xi>..pi} \\<in> sets lebesgue\n 2. bounded ((\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) ` {\\<xi>..pi})\n 3. (\\<lambda>x.\n        inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n    {\\<xi>..pi}\n 4. {\\<xi>..pi} \\<in> sets lebesgue", "show \"bounded ((\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) ` {\\<xi>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. bounded ((\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) ` {\\<xi>..pi})", "by (force simp: square_le_1 intro: boundedI [where B=1])"], ["proof (state)\nthis:\n  bounded ((\\<lambda>x. (sin (real n / 2 * x))\\<^sup>2) ` {\\<xi>..pi})\n\ngoal (3 subgoals):\n 1. {\\<xi>..pi} \\<in> sets lebesgue\n 2. (\\<lambda>x.\n        inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n    {\\<xi>..pi}\n 3. {\\<xi>..pi} \\<in> sets lebesgue", "show \"(\\<lambda>x. inverse (2 * (sin (x/2))\\<^sup>2) * h x) absolutely_integrable_on {\\<xi>..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n    {\\<xi>..pi}", "using hint"], ["proof (prove)\nusing this:\n  (\\<lambda>x. h x / (2 * (sin (x / 2))\\<^sup>2)) absolutely_integrable_on\n  {\\<xi>..pi}\n\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n    {\\<xi>..pi}", "by (simp add: divide_simps)"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      inverse (2 * (sin (x / 2))\\<^sup>2) * h x) absolutely_integrable_on\n  {\\<xi>..pi}\n\ngoal (2 subgoals):\n 1. {\\<xi>..pi} \\<in> sets lebesgue\n 2. {\\<xi>..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x.\n       (sin (real n / 2 * x))\\<^sup>2 *\n       (inverse (2 * (sin (x / 2))\\<^sup>2) * h x))\n\ngoal (3 subgoals):\n 1. \\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n 2. \\<And>x.\n       x \\<in> {\\<xi>..pi} \\<Longrightarrow>\n       norm (\\<psi> x)\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n 3. {\\<xi>..pi} \\<in> sets lebesgue", "show \"\\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})", "apply (rule borel_measurable_integrable)"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi}) \\<psi>", "apply (rule integrable_cong [where f = \"\\<lambda>x. sin(n / 2 * x) ^ 2 / (2 * n * sin(x/2) ^ 2) * h x\", OF refl, THEN iffD1])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n       (sin (real n / 2 * x))\\<^sup>2 /\n       (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n       h x =\n       \\<psi> x\n 2. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x.\n         (sin (real n / 2 * x))\\<^sup>2 /\n         (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n         h x)", "using \\<open>0 < \\<xi>\\<close> **"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x. \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n       (sin (real n / 2 * x))\\<^sup>2 /\n       (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n       h x =\n       \\<psi> x\n 2. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x.\n         (sin (real n / 2 * x))\\<^sup>2 /\n         (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n         h x)", "apply (force simp: \\<psi>_def divide_simps algebra_simps mult_less_0_iff abs_mult)"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x.\n         (sin (real n / 2 * x))\\<^sup>2 /\n         (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n         h x)", "using Bochner_Integration.integrable_mult_left [OF ***, of \"1/n\"]"], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {\\<xi>..pi})\n   (\\<lambda>x.\n       (sin (real n / 2 * x))\\<^sup>2 *\n       (inverse (2 * (sin (x / 2))\\<^sup>2) * h x) *\n       (1 / real n))\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {\\<xi>..pi})\n     (\\<lambda>x.\n         (sin (real n / 2 * x))\\<^sup>2 /\n         (real (2 * n) * (sin (x / 2))\\<^sup>2) *\n         h x)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  \\<psi> \\<in> borel_measurable (lebesgue_on {\\<xi>..pi})\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> {\\<xi>..pi} \\<Longrightarrow>\n       norm (\\<psi> x)\n       \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n 2. {\\<xi>..pi} \\<in> sets lebesgue", "show \"norm (\\<psi> x) \\<le> ?g x\" if \"x \\<in> {\\<xi>..pi}\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. norm (\\<psi> x)\n    \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "using that \\<dagger>"], ["proof (prove)\nusing this:\n  x \\<in> {\\<xi>..pi}\n  ?x \\<in> space (lebesgue_on {\\<xi>..pi}) \\<Longrightarrow>\n  \\<bar>\\<psi> ?x\\<bar>\n  \\<le> \\<bar>h ?x\\<bar> / (2 * (sin (?x / 2))\\<^sup>2) / real n\n\ngoal (1 subgoal):\n 1. norm (\\<psi> x)\n    \\<le> \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "by (simp add: \\<psi>_def)"], ["proof (state)\nthis:\n  ?x \\<in> {\\<xi>..pi} \\<Longrightarrow>\n  norm (\\<psi> ?x)\n  \\<le> \\<bar>h ?x\\<bar> / (2 * (sin (?x / 2))\\<^sup>2) / real n\n\ngoal (1 subgoal):\n 1. {\\<xi>..pi} \\<in> sets lebesgue", "qed auto"], ["proof (state)\nthis:\n  integrable (lebesgue_on {\\<xi>..pi}) \\<psi>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<xi>..pi}) \\<psi>\\<bar>\n  \\<le> LINT x|lebesgue_on {\\<xi>..pi}.\n           \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       ?c \\<le> x \\<Longrightarrow>\n       norm (LINT xa|lebesgue_on {\\<xi>..pi}. Fejer_kernel x xa * h xa)\n       \\<le> \\<phi> (real x)", "then"], ["proof (chain)\npicking this:\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<xi>..pi}) \\<psi>\\<bar>\n  \\<le> LINT x|lebesgue_on {\\<xi>..pi}.\n           \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n", "show \"norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x) \\<le> \\<phi> n\""], ["proof (prove)\nusing this:\n  \\<bar>integral\\<^sup>L (lebesgue_on {\\<xi>..pi}) \\<psi>\\<bar>\n  \\<le> LINT x|lebesgue_on {\\<xi>..pi}.\n           \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2) / real n\n\ngoal (1 subgoal):\n 1. norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n    \\<le> \\<phi> (real n)", "by (simp add: Fejer_kernel \\<phi>_def \\<psi>_def flip: Bochner_Integration.integral_divide [OF *])"], ["proof (state)\nthis:\n  norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n  \\<le> \\<phi> (real n)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>\\<^sub>F n in sequentially.\n     norm (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n     \\<le> \\<phi> (real n)\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (LINT x|lebesgue_on {\\<xi>..pi}.\n            \\<bar>h x\\<bar> / (2 * (sin (x / 2))\\<^sup>2)) /\n        real n)\n    \\<longlonglongrightarrow> 0", "show \"\\<phi> \\<longlonglongrightarrow> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. \\<phi> (real x)) \\<longlonglongrightarrow> 0", "unfolding \\<phi>_def divide_inverse"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x.\n        (LINT x|lebesgue_on {\\<xi>..pi}.\n            \\<bar>h x\\<bar> * inverse (2 * (sin (x * inverse 2))\\<^sup>2)) *\n        inverse (real x))\n    \\<longlonglongrightarrow> 0", "by (simp add: tendsto_mult_right_zero lim_inverse_n)"], ["proof (state)\nthis:\n  (\\<lambda>x. \\<phi> (real x)) \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n  \\<longlonglongrightarrow> 0", "obtain N where N: \"\\<And>n. n \\<ge> N \\<Longrightarrow> \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  (\\<lambda>n. LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>LINT x|lebesgue_on {\\<xi>..pi}.\n                     Fejer_kernel n x * h x\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding lim_sequentially"], ["proof (prove)\nusing this:\n  \\<forall>r>0.\n     \\<exists>no.\n        \\<forall>n\\<ge>no.\n           dist (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x) 0\n           < r\n\ngoal (1 subgoal):\n 1. (\\<And>N.\n        (\\<And>n.\n            N \\<le> n \\<Longrightarrow>\n            \\<bar>LINT x|lebesgue_on {\\<xi>..pi}.\n                     Fejer_kernel n x * h x\\<bar>\n            < e / 2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis half_gt_zero_iff norm_conv_dist real_norm_def \\<open>e > 0\\<close>)"], ["proof (state)\nthis:\n  N \\<le> ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel ?n x * h x\\<bar>\n  < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>r.\n       0 < r \\<Longrightarrow>\n       \\<exists>no.\n          \\<forall>n\\<ge>no.\n             \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar>\n             < r", "show \"\\<exists>N. \\<forall>n\\<ge>N. \\<bar>(LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\\<bar> < e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>N.\n       \\<forall>n\\<ge>N.\n          \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "proof (intro exI allI impI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "fix n :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "assume n: \"n \\<ge> max 1 N\""], ["proof (state)\nthis:\n  max 1 N \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "with N"], ["proof (chain)\npicking this:\n  N \\<le> ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel ?n x * h x\\<bar>\n  < e / 2\n  max 1 N \\<le> n", "have 1: \"\\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x\\<bar> < e/2\""], ["proof (prove)\nusing this:\n  N \\<le> ?n \\<Longrightarrow>\n  \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel ?n x * h x\\<bar>\n  < e / 2\n  max 1 N \\<le> n\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x\\<bar>\n    < e / 2", "by simp"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x\\<bar> < e / 2\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "have \"integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n)\n    \\<le> integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n)", "using \\<open>\\<xi> < pi\\<close> has_bochner_integral_iff has_integral_Fejer_kernel_half"], ["proof (prove)\nusing this:\n  \\<xi> < pi\n  has_bochner_integral ?M ?f ?x =\n  (integrable ?M ?f \\<and> integral\\<^sup>L ?M ?f = ?x)\n  has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel ?n)\n   (if ?n = 0 then 0 else pi / 2)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n)\n    \\<le> integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n)", "by (force intro!: integral_mono_lebesgue_on_AE)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n)\n  \\<le> integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "also"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n)\n  \\<le> integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "have \"\\<dots> \\<le> pi\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n) \\<le> pi", "using has_integral_Fejer_kernel_half"], ["proof (prove)\nusing this:\n  has_bochner_integral (lebesgue_on {0..pi}) (Fejer_kernel ?n)\n   (if ?n = 0 then 0 else pi / 2)\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n) \\<le> pi", "by (simp add: has_bochner_integral_iff)"], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..pi}) (Fejer_kernel n) \\<le> pi\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "finally"], ["proof (chain)\npicking this:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi", "have int_le_pi: \"integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi\""], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi\n\ngoal (1 subgoal):\n 1. integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi", "."], ["proof (state)\nthis:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "have 2: \"\\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar> \\<le> (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e/2/pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi", "have eq: \"integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (\\<lambda>x. Fejer_kernel n x * h x)\n                  = integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x =\n    LINT x|lebesgue_on {0..\\<xi>}.\n       Fejer_kernel n x * (if x = 0 then 0 else h x)", "proof (rule integral_cong_AE)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>x. Fejer_kernel n x * h x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 2. (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 3. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "have \\<dagger>: \"{u. u \\<noteq> 0 \\<longrightarrow> P u} \\<inter> {0..\\<xi>} = {0} \\<union> Collect P \\<inter> {0..\\<xi>}\"\n              \"{u. u \\<noteq> 0 \\<and> P u} \\<inter> {0..\\<xi>} = (Collect P \\<inter> {0..\\<xi>}) - {0}\" for P"], ["proof (prove)\ngoal (1 subgoal):\n 1. {u. u \\<noteq> 0 \\<longrightarrow> P u} \\<inter> {0..\\<xi>} =\n    {0} \\<union> Collect P \\<inter> {0..\\<xi>} &&&\n    {u. u \\<noteq> 0 \\<and> P u} \\<inter> {0..\\<xi>} =\n    Collect P \\<inter> {0..\\<xi>} - {0}", "using \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. {u. u \\<noteq> 0 \\<longrightarrow> P u} \\<inter> {0..\\<xi>} =\n    {0} \\<union> Collect P \\<inter> {0..\\<xi>} &&&\n    {u. u \\<noteq> 0 \\<and> P u} \\<inter> {0..\\<xi>} =\n    Collect P \\<inter> {0..\\<xi>} - {0}", "by auto"], ["proof (state)\nthis:\n  {u. u \\<noteq> 0 \\<longrightarrow> ?P u} \\<inter> {0..\\<xi>} =\n  {0} \\<union> Collect ?P \\<inter> {0..\\<xi>}\n  {u. u \\<noteq> 0 \\<and> ?P u} \\<inter> {0..\\<xi>} =\n  Collect ?P \\<inter> {0..\\<xi>} - {0}\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. Fejer_kernel n x * h x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 2. (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 3. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "have *: \"- {0} \\<inter> A \\<inter> {0..\\<xi>} = A \\<inter> {0..\\<xi>} - {0}\" for A"], ["proof (prove)\ngoal (1 subgoal):\n 1. - {0} \\<inter> A \\<inter> {0..\\<xi>} = A \\<inter> {0..\\<xi>} - {0}", "by auto"], ["proof (state)\nthis:\n  - {0} \\<inter> ?A \\<inter> {0..\\<xi>} = ?A \\<inter> {0..\\<xi>} - {0}\n\ngoal (3 subgoals):\n 1. (\\<lambda>x. Fejer_kernel n x * h x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 2. (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 3. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "show \"(\\<lambda>x. Fejer_kernel n x * h x) \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * h x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})", "using \\<open>\\<xi> < pi\\<close>"], ["proof (prove)\nusing this:\n  \\<xi> < pi\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * h x)\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})", "by (intro absolutely_integrable_imp_borel_measurable h_aint\n                  absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Fejer_kernel], auto)"], ["proof (state)\nthis:\n  (\\<lambda>x. Fejer_kernel n x * h x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n\ngoal (2 subgoals):\n 1. (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n 2. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>x. Fejer_kernel n x * h x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<xi>})", "show \"(\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x)) \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. Fejer_kernel n x * h x)\n  \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n\ngoal (1 subgoal):\n 1. (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n    \\<in> borel_measurable (lebesgue_on {0..\\<xi>})", "apply (simp add: in_borel_measurable Ball_def vimage_def Collect_conj_eq Collect_imp_eq * flip: Collect_neg_eq)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x.\n       x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n       {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n       \\<in> sets (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n    \\<forall>x.\n       (0 \\<in> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        insert 0 {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n        \\<in> sets (lebesgue_on {0..\\<xi>})) \\<and>\n       (0 \\<notin> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>} - {0}\n        \\<in> sets (lebesgue_on {0..\\<xi>}))", "apply (elim all_forward imp_forward asm_rl)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n       {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n       \\<in> sets (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       (0 \\<in> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        insert 0 {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n        \\<in> sets (lebesgue_on {0..\\<xi>})) \\<and>\n       (0 \\<notin> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>} - {0}\n        \\<in> sets (lebesgue_on {0..\\<xi>}))", "using \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n       {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n       \\<in> sets (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       (0 \\<in> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        insert 0 {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>}\n        \\<in> sets (lebesgue_on {0..\\<xi>})) \\<and>\n       (0 \\<notin> x \\<longrightarrow>\n        x \\<in> sigma_sets UNIV (Collect open) \\<longrightarrow>\n        {xa. Fejer_kernel n xa * h xa \\<in> x} \\<inter> {0..\\<xi>} - {0}\n        \\<in> sets (lebesgue_on {0..\\<xi>}))", "apply (auto simp: \\<dagger> sets.insert_in_sets sets_restrict_space_iff cong: conj_cong)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n  \\<in> borel_measurable (lebesgue_on {0..\\<xi>})\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "have 0: \"{0} \\<in> null_sets (lebesgue_on {0..\\<xi>})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {0} \\<in> null_sets (lebesgue_on {0..\\<xi>})", "using \\<open>0 < \\<xi>\\<close>"], ["proof (prove)\nusing this:\n  0 < \\<xi>\n\ngoal (1 subgoal):\n 1. {0} \\<in> null_sets (lebesgue_on {0..\\<xi>})", "by (simp add: null_sets_restrict_space)"], ["proof (state)\nthis:\n  {0} \\<in> null_sets (lebesgue_on {0..\\<xi>})\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "then"], ["proof (chain)\npicking this:\n  {0} \\<in> null_sets (lebesgue_on {0..\\<xi>})", "show \"AE x in lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x = Fejer_kernel n x * (if x = 0 then 0 else h x)\""], ["proof (prove)\nusing this:\n  {0} \\<in> null_sets (lebesgue_on {0..\\<xi>})\n\ngoal (1 subgoal):\n 1. AE x in lebesgue_on\n             {0..\\<xi>}. Fejer_kernel n x * h x =\n                         Fejer_kernel n x * (if x = 0 then 0 else h x)", "by (auto intro: AE_I' [OF 0])"], ["proof (state)\nthis:\n  AE x in lebesgue_on\n           {0..\\<xi>}. Fejer_kernel n x * h x =\n                       Fejer_kernel n x * (if x = 0 then 0 else h x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x =\n  LINT x|lebesgue_on {0..\\<xi>}.\n     Fejer_kernel n x * (if x = 0 then 0 else h x)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi", "unfolding eq"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>LINT x|lebesgue_on {0..\\<xi>}.\n             Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n    \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi", "proof (rule integral_abs_bound_integral)"], ["proof (state)\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n 2. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n       \\<le> Fejer_kernel n x * e / 2 / pi", "have \"(\\<lambda>x. if x = 0 then 0 else h x) absolutely_integrable_on {- pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x = 0 then 0 else h x) absolutely_integrable_on\n    {- pi..pi}", "proof (rule absolutely_integrable_spike [OF h_aint])"], ["proof (state)\ngoal (2 subgoals):\n 1. negligible ?S\n 2. \\<And>x.\n       x \\<in> {- pi..pi} - ?S \\<Longrightarrow>\n       (if x = 0 then 0 else h x) = h x", "show \"negligible {0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. negligible {0::'a}", "by auto"], ["proof (state)\nthis:\n  negligible {0::?'a1}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {- pi..pi} - {0} \\<Longrightarrow>\n       (if x = 0 then 0 else h x) = h x", "qed auto"], ["proof (state)\nthis:\n  (\\<lambda>x. if x = 0 then 0 else h x) absolutely_integrable_on {- pi..pi}\n\ngoal (3 subgoals):\n 1. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n 2. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)\n 3. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n       \\<le> Fejer_kernel n x * e / 2 / pi", "with \\<open>0 < \\<xi>\\<close> \\<open>\\<xi> < pi\\<close>"], ["proof (chain)\npicking this:\n  0 < \\<xi>\n  \\<xi> < pi\n  (\\<lambda>x. if x = 0 then 0 else h x) absolutely_integrable_on {- pi..pi}", "show \"integrable (lebesgue_on {0..\\<xi>}) (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\""], ["proof (prove)\nusing this:\n  0 < \\<xi>\n  \\<xi> < pi\n  (\\<lambda>x. if x = 0 then 0 else h x) absolutely_integrable_on {- pi..pi}\n\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))", "by (intro absolutely_integrable_imp_integrable h_aint absolutely_integrable_on_subinterval [OF absolutely_integrable_mult_Fejer_kernel]) auto"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..\\<xi>})\n   (\\<lambda>x. Fejer_kernel n x * (if x = 0 then 0 else h x))\n\ngoal (2 subgoals):\n 1. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)\n 2. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n       \\<le> Fejer_kernel n x * e / 2 / pi", "show \"integrable (lebesgue_on {0..\\<xi>}) (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..\\<xi>})\n     (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)", "by (simp add: absolutely_integrable_imp_integrable \\<open>\\<xi> < pi\\<close> absolutely_integrable_mult_Fejer_kernel_reflected_part3 less_eq_real_def)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..\\<xi>})\n   (\\<lambda>x. Fejer_kernel n x * e / 2 / pi)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> space (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n       \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n       \\<le> Fejer_kernel n x * e / 2 / pi", "show \"\\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar> \\<le> Fejer_kernel n x * e / 2 / pi\"\n              if \"x \\<in> space (lebesgue_on {0..\\<xi>})\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n    \\<le> Fejer_kernel n x * e / 2 / pi", "using that \\<xi> [of x] \\<open>e > 0\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> space (lebesgue_on {0..\\<xi>})\n  0 < x \\<and> x \\<le> \\<xi> \\<Longrightarrow> \\<bar>h x\\<bar> < e / 2 / pi\n  0 < e\n\ngoal (1 subgoal):\n 1. \\<bar>Fejer_kernel n x * (if x = 0 then 0 else h x)\\<bar>\n    \\<le> Fejer_kernel n x * e / 2 / pi", "by (auto simp: abs_mult eq simp flip: times_divide_eq_right intro: mult_left_mono)"], ["proof (state)\nthis:\n  ?x \\<in> space (lebesgue_on {0..\\<xi>}) \\<Longrightarrow>\n  \\<bar>Fejer_kernel n ?x * (if ?x = 0 then 0 else h ?x)\\<bar>\n  \\<le> Fejer_kernel n ?x * e / 2 / pi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "have 3: \"\\<dots> \\<le> e/2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi \\<le> e / 2", "using int_le_pi \\<open>0 < e\\<close>"], ["proof (prove)\nusing this:\n  integral\\<^sup>L (lebesgue_on {0..\\<xi>}) (Fejer_kernel n) \\<le> pi\n  0 < e\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi \\<le> e / 2", "by (simp add: divide_simps mult.commute [of e])"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi \\<le> e / 2\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "have \"integrable (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * h x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * h x)", "unfolding h_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. integrable (lebesgue_on {0..pi})\n     (\\<lambda>x. Fejer_kernel n x * (f (t + x) + f (t - x) - (l + r)))", "by (simp add: absolutely_integrable_imp_integrable absolutely_integrable_mult_Fejer_kernel_reflected_part5 assms)"], ["proof (state)\nthis:\n  integrable (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * h x)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "then"], ["proof (chain)\npicking this:\n  integrable (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * h x)", "have \"LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x\n                 = (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) + (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\""], ["proof (prove)\nusing this:\n  integrable (lebesgue_on {0..pi}) (\\<lambda>x. Fejer_kernel n x * h x)\n\ngoal (1 subgoal):\n 1. LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x =\n    (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) +\n    (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)", "by (rule integral_combine) (use  \\<open>0 < \\<xi>\\<close> \\<open>\\<xi> < pi\\<close> in auto)"], ["proof (state)\nthis:\n  LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x =\n  (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) +\n  (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "then"], ["proof (chain)\npicking this:\n  LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x =\n  (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) +\n  (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)", "show \"\\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e\""], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x =\n  (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) +\n  (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n\ngoal (1 subgoal):\n 1. \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "using 1 2 3"], ["proof (prove)\nusing this:\n  LINT x|lebesgue_on {0..pi}. Fejer_kernel n x * h x =\n  (LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x) +\n  (LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x)\n  \\<bar>LINT x|lebesgue_on {\\<xi>..pi}. Fejer_kernel n x * h x\\<bar> < e / 2\n  \\<bar>LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * h x\\<bar>\n  \\<le> LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi\n  LINT x|lebesgue_on {0..\\<xi>}. Fejer_kernel n x * e / 2 / pi \\<le> e / 2\n\ngoal (1 subgoal):\n 1. \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e", "by linarith"], ["proof (state)\nthis:\n  \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>N.\n     \\<forall>n\\<ge>N.\n        \\<bar>LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u\\<bar> < e\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n  \\<longlonglongrightarrow> 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n  \\<longlonglongrightarrow> 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n. LINT u|lebesgue_on {0..pi}. Fejer_kernel n u * h u)\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "unfolding h_def"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      LINT u|lebesgue_on {0..pi}.\n         Fejer_kernel n u * (f (t + u) + f (t - u) - (l + r)))\n  \\<longlonglongrightarrow> 0\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k t) /\n        real n)\n    \\<longlonglongrightarrow> (l + r) / 2", "by (simp add: Fourier_sum_limit_Fejer_kernel_half assms add_divide_distrib)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>m<n.\n          \\<Sum>k\\<le>2 * m.\n             Fourier_coefficient f k * trigonometric_set k t) /\n      real n)\n  \\<longlonglongrightarrow> (l + r) / 2\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary Fourier_Fejer_Cesaro_summable_simple:\n  assumes f: \"continuous_on UNIV f\"\n    and periodic: \"\\<And>x. f(x + 2*pi) = f x\"\n  shows \"(\\<lambda>n. (\\<Sum>m<n. \\<Sum>k\\<le>2*m. Fourier_coefficient f k * trigonometric_set k x) / n) \\<longlonglongrightarrow> f x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k x) /\n        real n)\n    \\<longlonglongrightarrow> f x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k x) /\n        real n)\n    \\<longlonglongrightarrow> f x", "have \"(\\<lambda>n. (\\<Sum>m<n. \\<Sum>k\\<le>2*m. Fourier_coefficient f k * trigonometric_set k x) / n) \\<longlonglongrightarrow> (f x + f x) / 2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k x) /\n        real n)\n    \\<longlonglongrightarrow> (f x + f x) / 2", "proof (rule Fourier_Fejer_Cesaro_summable)"], ["proof (state)\ngoal (4 subgoals):\n 1. f absolutely_integrable_on {- pi..pi}\n 2. \\<And>x. f (x + 2 * pi) = f x\n 3. (f \\<longlongrightarrow> f x) (at x within {..x})\n 4. (f \\<longlongrightarrow> f x) (at x within {x..})", "show \"f absolutely_integrable_on {- pi..pi}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- pi..pi}", "using absolutely_integrable_continuous_real continuous_on_subset f"], ["proof (prove)\nusing this:\n  continuous_on {?a..?b} ?f \\<Longrightarrow>\n  ?f absolutely_integrable_on {?a..?b}\n  \\<lbrakk>continuous_on ?s ?f; ?t \\<subseteq> ?s\\<rbrakk>\n  \\<Longrightarrow> continuous_on ?t ?f\n  continuous_on UNIV f\n\ngoal (1 subgoal):\n 1. f absolutely_integrable_on {- pi..pi}", "by blast"], ["proof (state)\nthis:\n  f absolutely_integrable_on {- pi..pi}\n\ngoal (3 subgoals):\n 1. \\<And>x. f (x + 2 * pi) = f x\n 2. (f \\<longlongrightarrow> f x) (at x within {..x})\n 3. (f \\<longlongrightarrow> f x) (at x within {x..})", "show \"(f \\<longlongrightarrow> f x) (at x within {..x})\"  \"(f \\<longlongrightarrow> f x) (at x within {x..})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (f \\<longlongrightarrow> f x) (at x within {..x}) &&&\n    (f \\<longlongrightarrow> f x) (at x within {x..})", "using Lim_at_imp_Lim_at_within continuous_on_def f"], ["proof (prove)\nusing this:\n  ?f \\<midarrow>?x\\<rightarrow> ?l \\<Longrightarrow>\n  (?f \\<longlongrightarrow> ?l) (at ?x within ?S)\n  continuous_on ?s ?f =\n  (\\<forall>x\\<in>?s. (?f \\<longlongrightarrow> ?f x) (at x within ?s))\n  continuous_on UNIV f\n\ngoal (1 subgoal):\n 1. (f \\<longlongrightarrow> f x) (at x within {..x}) &&&\n    (f \\<longlongrightarrow> f x) (at x within {x..})", "by blast+"], ["proof (state)\nthis:\n  (f \\<longlongrightarrow> f x) (at x within {..x})\n  (f \\<longlongrightarrow> f x) (at x within {x..})\n\ngoal (1 subgoal):\n 1. \\<And>x. f (x + 2 * pi) = f x", "qed (auto simp: periodic Lim_at_imp_Lim_at_within continuous_on_def f)"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>m<n.\n          \\<Sum>k\\<le>2 * m.\n             Fourier_coefficient f k * trigonometric_set k x) /\n      real n)\n  \\<longlonglongrightarrow> (f x + f x) / 2\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k x) /\n        real n)\n    \\<longlonglongrightarrow> f x", "then"], ["proof (chain)\npicking this:\n  (\\<lambda>n.\n      (\\<Sum>m<n.\n          \\<Sum>k\\<le>2 * m.\n             Fourier_coefficient f k * trigonometric_set k x) /\n      real n)\n  \\<longlonglongrightarrow> (f x + f x) / 2", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<lambda>n.\n      (\\<Sum>m<n.\n          \\<Sum>k\\<le>2 * m.\n             Fourier_coefficient f k * trigonometric_set k x) /\n      real n)\n  \\<longlonglongrightarrow> (f x + f x) / 2\n\ngoal (1 subgoal):\n 1. (\\<lambda>n.\n        (\\<Sum>m<n.\n            \\<Sum>k\\<le>2 * m.\n               Fourier_coefficient f k * trigonometric_set k x) /\n        real n)\n    \\<longlonglongrightarrow> f x", "by simp"], ["proof (state)\nthis:\n  (\\<lambda>n.\n      (\\<Sum>m<n.\n          \\<Sum>k\\<le>2 * m.\n             Fourier_coefficient f k * trigonometric_set k x) /\n      real n)\n  \\<longlonglongrightarrow> f x\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}