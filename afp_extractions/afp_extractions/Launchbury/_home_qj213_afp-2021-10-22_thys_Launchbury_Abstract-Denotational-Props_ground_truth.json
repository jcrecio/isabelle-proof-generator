{"file_name": "/home/qj213/afp-2021-10-22/thys/Launchbury/Abstract-Denotational-Props.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Launchbury", "problem_names": ["lemma ESem_considers_fv': \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho> f|` (fv e)\\<^esub>\"", "lemma ESem_Lam[simp]: \"\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\"", "lemma ESem_Let[simp]: \"\\<lbrakk>Let as body\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = tick \\<cdot> (\\<lbrakk>body\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)\"", "lemma ESem_subst_same: \"\\<rho> x = \\<rho> y \\<Longrightarrow>  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\"\n  and \n  \"\\<rho> x = \\<rho> y  \\<Longrightarrow>  (\\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) = \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\"", "lemma ESem_subst:\n  shows \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\""], "translations": [["", "lemma ESem_considers_fv': \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho> f|` (fv e)\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho> f|` fv e\\<^esub>", "proof (induct e arbitrary: \\<rho> rule:exp_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>var \\<rho>.\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Var var)\\<^esub>\n 2. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 3. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 4. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 5. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 6. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "case Var"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>var \\<rho>.\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Var var)\\<^esub>\n 2. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 3. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 4. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 5. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 6. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Var var_)\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Var var_)\\<^esub>\n\ngoal (5 subgoals):\n 1. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 2. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 3. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 4. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 5. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 2. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 3. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 4. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 5. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "have [simp]: \"\\<And> S x. S \\<inter> insert x S = S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>S x. S \\<inter> insert x S = S", "by auto"], ["proof (state)\nthis:\n  ?S1 \\<inter> insert ?x1 ?S1 = ?S1\n\ngoal (5 subgoals):\n 1. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 2. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 3. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 4. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 5. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "case App"], ["proof (state)\nthis:\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>?\\<rho>2\\<^esub> =\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>?\\<rho>2 f|` fv exp_\\<^esub>\n\ngoal (5 subgoals):\n 1. \\<And>exp var \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> App exp var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> App exp\n                  var \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp var)\\<^esub>\n 2. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 3. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 4. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 5. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> App exp_ var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> App exp_\n               var_ \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp_ var_)\\<^esub>", "by (simp, subst (1 2) App, simp)"], ["proof (state)\nthis:\n  \\<lbrakk> App exp_ var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> App exp_\n             var_ \\<rbrakk>\\<^bsub>\\<rho> f|` fv (App exp_ var_)\\<^esub>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 3. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 4. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 3. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 4. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "case (Lam x e)"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1 f|` fv e\\<^esub>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>var exp \\<rho>.\n       (\\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n    fv exp\\<^esub>) \\<Longrightarrow>\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n           fv (Lam [var]. exp)\\<^esub>\n 3. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 4. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Lam [x]. e)\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Lam [x]. e)\\<^esub>\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "case (IfThenElse scrut e\\<^sub>1 e\\<^sub>2)"], ["proof (state)\nthis:\n  \\<lbrakk> scrut \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> scrut \\<rbrakk>\\<^bsub>?\\<rho>1 f|` fv scrut\\<^esub>\n  \\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>1 f|` fv e\\<^sub>1\\<^esub>\n  \\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>1 f|` fv e\\<^sub>2\\<^esub>\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "have [simp]: \"(fv scrut \\<inter> (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)) = fv scrut\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv scrut \\<inter>\n    (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n    fv scrut", "by auto"], ["proof (state)\nthis:\n  fv scrut \\<inter> (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n  fv scrut\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "have [simp]: \"(fv e\\<^sub>1 \\<inter> (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)) = fv e\\<^sub>1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv e\\<^sub>1 \\<inter>\n    (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n    fv e\\<^sub>1", "by auto"], ["proof (state)\nthis:\n  fv e\\<^sub>1 \\<inter>\n  (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n  fv e\\<^sub>1\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "have [simp]: \"(fv e\\<^sub>2 \\<inter> (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)) = fv e\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv e\\<^sub>2 \\<inter>\n    (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n    fv e\\<^sub>2", "by auto"], ["proof (state)\nthis:\n  fv e\\<^sub>2 \\<inter>\n  (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) =\n  fv e\\<^sub>2\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>\n 3. \\<And>scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n              fv scrut\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e1\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho> f|` fv e2\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                     fv (scrut ? e1 : e2)\\<^esub>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> (scrut ? e\\<^sub>1\n               : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (scrut ? e\\<^sub>1\n               : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n       fv (scrut ? e\\<^sub>1 : e\\<^sub>2)\\<^esub>", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) =\n    tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>))", "apply (subst (1 2) IfThenElse(1))"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|` fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) =\n    tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>))", "apply (subst (1 2) IfThenElse(2))"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|` fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     fv e\\<^sub>1\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) =\n    tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n     fv e\\<^sub>1\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2)\\<^esub>))", "apply (subst (1 2) IfThenElse(3))"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|` fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     fv e\\<^sub>1\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     fv e\\<^sub>2\\<^esub>)) =\n    tick\\<cdot>\n    (B_project\\<cdot>\n     (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho> f|`\n (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n fv scrut\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n     fv e\\<^sub>1\\<^esub>)\\<cdot>\n     (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho> f|`\n     (fv scrut \\<union> fv e\\<^sub>1 \\<union> fv e\\<^sub>2) f|`\n     fv e\\<^sub>2\\<^esub>))", "apply (simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrakk> (scrut ? e\\<^sub>1\n             : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (scrut ? e\\<^sub>1\n             : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho> f|`\n     fv (scrut ? e\\<^sub>1 : e\\<^sub>2)\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "case (Let as e)"], ["proof (state)\nthis:\n  ?x1 \\<in> domA as \\<Longrightarrow>\n  \\<lbrakk> the (map_of as ?x1) \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> the (map_of as\n                  ?x1) \\<rbrakk>\\<^bsub>?\\<rho>1 f|`\n  fv (the (map_of as ?x1))\\<^esub>\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1 f|` fv e\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "have \"\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> = \\<lbrakk>e\\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv e)\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                                 (fv as \\<union> fv e)\\<^esub>", "apply (subst (1 2) Let(2))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                                 fv e\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                                 (fv as \\<union> fv e) f|`\n                                 fv e\\<^esub>", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                               (fv as \\<union> fv e)\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "also"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                               (fv as \\<union> fv e)\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "have \"fv as \\<subseteq> fv as \\<union> fv e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv as \\<subseteq> fv as \\<union> fv e", "by (rule inf_sup_ord(3))"], ["proof (state)\nthis:\n  fv as \\<subseteq> fv as \\<union> fv e\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "hence \"(\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv e) = \\<lbrace>as\\<rbrace>(\\<rho> f|` (fv as \\<union> fv e))\""], ["proof (prove)\nusing this:\n  fv as \\<subseteq> fv as \\<union> fv e\n\ngoal (1 subgoal):\n 1. (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv e) =\n    \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e)", "by (rule HSem_ignores_fresh_restr'[OF _ Let(1)])"], ["proof (state)\nthis:\n  (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv e) =\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "also"], ["proof (state)\nthis:\n  (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv e) =\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "have \"\\<lbrace>as\\<rbrace>(\\<rho> f|` (fv as \\<union> fv e)) = \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e - domA as)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e) =\n    \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e - domA as)", "by (rule HSem_restr_cong) (auto simp add: lookup_env_restr_eq)"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e) =\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv e - domA as)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> exp \\<rho>.\n       \\<lbrakk>\\<And>x \\<rho>.\n                   x \\<in> domA \\<Gamma> \\<Longrightarrow>\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> the (map_of \\<Gamma>\n                                   x) \\<rbrakk>\\<^bsub>\\<rho> f|`\n                 fv (the (map_of \\<Gamma> x))\\<^esub>;\n        \\<And>\\<rho>.\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho> f|` fv exp\\<^esub>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho> f|`\n                   fv (Terms.Let \\<Gamma> exp)\\<^esub>\n 2. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho> f|`\n             (fv as \\<union> fv e - domA as)\\<^esub>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho> f|`\n             (fv as \\<union> fv e - domA as)\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> Terms.Let as\n               e \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Terms.Let as e)\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Terms.Let as e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> Terms.Let as\n             e \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Terms.Let as e)\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>b \\<rho>.\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho> f|` fv (Bool b)\\<^esub>", "qed auto"], ["", "sublocale has_ignore_fresh_ESem ESem"], ["proof (prove)\ngoal (1 subgoal):\n 1. has_ignore_fresh_ESem ESem", "by standard (rule fv_supp_exp, rule ESem_considers_fv')"], ["", "subsubsection \\<open>Nicer equations for ESem, without freshness requirements\\<close>"], ["", "lemma ESem_Lam[simp]: \"\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have *: \"\\<And> v. ((\\<rho> f|` (fv e - {x}))(x := v)) f|` fv e = (\\<rho>(x := v)) f|` fv e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<rho> f|` (fv e - {x}))(x := v) f|` fv e = \\<rho>(x := v) f|` fv e", "by (rule ext) (auto simp add: lookup_env_restr_eq)"], ["proof (state)\nthis:\n  (\\<rho> f|` (fv e - {x}))(x := ?v1) f|` fv e = \\<rho>(x := ?v1) f|` fv e\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have \"\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub>", "by (rule ESem_fresh_cong) simp"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "also"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have \"\\<dots> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v)\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n         (x := v)\\<^esub>))", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub> =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n       (x := v)\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "also"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>env_delete x \\<rho>\\<^esub> =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n       (x := v)\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have \"\\<dots> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>((\\<rho> f|` (fv e - {x}))(x := v)) f|` fv e\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n         (x := v)\\<^esub>)) =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\nfv e\\<^esub>))", "by (subst  ESem_considers_fv, rule)"], ["proof (state)\nthis:\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n       (x := v)\\<^esub>)) =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\n                                    fv e\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "also"], ["proof (state)\nthis:\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))\n       (x := v)\\<^esub>)) =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\n                                    fv e\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have \"\\<dots> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\nfv e\\<^esub>)) =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>))", "unfolding *"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>)) =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>))", ".."], ["proof (state)\nthis:\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\n                                    fv e\\<^esub>)) =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "also"], ["proof (state)\nthis:\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>(\\<rho> f|` (fv e - {x}))(x := v) f|`\n                                    fv e\\<^esub>)) =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "have \"\\<dots> = tick \\<cdot> (Fn \\<cdot> (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v.\n         \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>)) =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "unfolding  ESem_considers_fv[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>)) =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", ".."], ["proof (state)\nthis:\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v.\n       \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v) f|` fv e\\<^esub>)) =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (Fn\\<cdot>\n     (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))", "."], ["proof (state)\nthis:\n  \\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (Fn\\<cdot>\n   (\\<Lambda> v. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(x := v)\\<^esub>))\n\ngoal:\nNo subgoals!", "qed"], ["", "declare ESem.simps(1)[simp del]"], ["", "lemma ESem_Let[simp]: \"\\<lbrakk>Let as body\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = tick \\<cdot> (\\<lbrakk>body\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "have \"\\<lbrakk> Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = tick \\<cdot> (\\<lbrakk>body\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>(\\<rho> f|` fv (Let as body))\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho> f|`\n                   fv (Terms.Let as body)\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho> f|`\n                 fv (Terms.Let as body)\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho> f|`\n                 fv (Terms.Let as body)\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "have \"\\<lbrace>as\\<rbrace>(\\<rho> f|` fv(Let as body)) = \\<lbrace>as\\<rbrace>(\\<rho> f|` (fv as \\<union> fv body))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace>as\\<rbrace>\\<rho> f|` fv (Terms.Let as body) =\n    \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body)", "by (rule HSem_restr_cong) (auto simp add: lookup_env_restr_eq)"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> f|` fv (Terms.Let as body) =\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> f|` fv (Terms.Let as body) =\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "have \"\\<dots> = (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv body)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body) =\n    (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv body)", "by (rule HSem_ignores_fresh_restr'[symmetric, OF _ ESem_considers_fv]) simp"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body) =\n  (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv body)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> f|` (fv as \\<union> fv body) =\n  (\\<lbrace>as\\<rbrace>\\<rho>) f|` (fv as \\<union> fv body)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "have \"\\<lbrakk>body\\<rbrakk>\\<^bsub>\\<dots>\\<^esub> = \\<lbrakk>body\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> body \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                                    (fv as \\<union> fv body)\\<^esub> =\n    \\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>", "by (rule ESem_fresh_cong) (auto simp add: lookup_env_restr_eq)"], ["proof (state)\nthis:\n  \\<lbrakk> body \\<rbrakk>\\<^bsub>(\\<lbrace>as\\<rbrace>\\<rho>) f|`\n                                  (fv as \\<union> fv body)\\<^esub> =\n  \\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    tick\\<cdot>\n    (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)", "."], ["proof (state)\nthis:\n  \\<lbrakk> Terms.Let as body \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  tick\\<cdot>\n  (\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>)\n\ngoal:\nNo subgoals!", "qed"], ["", "declare ESem.simps(4)[simp del]"], ["", "subsubsection \\<open>Denotation of Substitution\\<close>"], ["", "lemma ESem_subst_same: \"\\<rho> x = \\<rho> y \\<Longrightarrow>  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\"\n  and \n  \"\\<rho> x = \\<rho> y  \\<Longrightarrow>  (\\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) = \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<rho> x = \\<rho> y \\<Longrightarrow>\n     \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n     \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) &&&\n    (\\<rho> x = \\<rho> y \\<Longrightarrow>\n     \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n     \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "proof (nominal_induct e and as avoiding: x y arbitrary: \\<rho> and \\<rho> rule:exp_heap_strong_induct)"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>var x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Var var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>exp var x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> App exp\n                                    var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (App exp\n                                     var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 7. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 8. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case Var"], ["proof (state)\nthis:\n  \\<rho> x = \\<rho> y\n\ngoal (8 subgoals):\n 1. \\<And>var x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Var var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Var var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>exp var x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> App exp\n                                    var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (App exp\n                                     var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 7. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 8. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (Var var_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk> Var var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (Var var_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (7 subgoals):\n 1. \\<And>exp var x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> App exp\n                                    var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (App exp\n                                     var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 7. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>exp var x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> App exp\n                                    var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (App exp\n                                     var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 7. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case App"], ["proof (state)\nthis:\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> exp_[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (7 subgoals):\n 1. \\<And>exp var x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> App exp\n                                    var \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (App exp\n                                     var)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 7. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from App(1)[OF App(2)] App(2)"], ["proof (chain)\npicking this:\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> exp_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<rho> x = \\<rho> y", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> exp_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> App exp_ var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (App exp_ var_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk> App exp_ var_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (App exp_ var_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case (Let as exp x y \\<rho>)"], ["proof (state)\nthis:\n  atom ` domA as \\<sharp>* x\n  atom ` domA as \\<sharp>* y\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<^bold>\\<lbrakk> as[?b1::h=?ba1] \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> exp[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from \\<open>atom ` domA as \\<sharp>* x\\<close> \\<open>atom ` domA as  \\<sharp>* y\\<close>"], ["proof (chain)\npicking this:\n  atom ` domA as \\<sharp>* x\n  atom ` domA as \\<sharp>* y", "have \"x \\<notin> domA as\" \"y \\<notin> domA as\""], ["proof (prove)\nusing this:\n  atom ` domA as \\<sharp>* x\n  atom ` domA as \\<sharp>* y\n\ngoal (1 subgoal):\n 1. x \\<notin> domA as &&& y \\<notin> domA as", "by (metis fresh_star_at_base imageI)+"], ["proof (state)\nthis:\n  x \\<notin> domA as\n  y \\<notin> domA as\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "hence [simp]:\"domA (as[x::h=y]) = domA as\""], ["proof (prove)\nusing this:\n  x \\<notin> domA as\n  y \\<notin> domA as\n\ngoal (1 subgoal):\n 1. domA as[x::h=y] = domA as", "by (metis bn_subst)"], ["proof (state)\nthis:\n  domA as[x::h=y] = domA as\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from \\<open>\\<rho> x = \\<rho> y\\<close>"], ["proof (chain)\npicking this:\n  \\<rho> x = \\<rho> y", "have \"(\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as\\<rbrace>\\<rho>) y\""], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as\\<rbrace>\\<rho>) y", "using \\<open>x \\<notin> domA as\\<close> \\<open>y \\<notin> domA as\\<close>"], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n  x \\<notin> domA as\n  y \\<notin> domA as\n\ngoal (1 subgoal):\n 1. (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as\\<rbrace>\\<rho>) y", "by (simp add: lookup_HSem_other)"], ["proof (state)\nthis:\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as\\<rbrace>\\<rho>) y\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "hence \"\\<lbrakk>exp\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> = \\<lbrakk>exp[x::=y]\\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\nusing this:\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as\\<rbrace>\\<rho>) y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n    \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>", "by (rule Let)"], ["proof (state)\nthis:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from \\<open>\\<rho> x = \\<rho> y\\<close>"], ["proof (chain)\npicking this:\n  \\<rho> x = \\<rho> y", "have \"\\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho>\" and \"(\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y\""], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho> &&&\n    (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y", "apply (induction rule: parallel_HSem_ind)"], ["proof (prove)\ngoal (5 subgoals):\n 1. adm (\\<lambda>\\<rho>''.\n            \\<rho> x = \\<rho> y \\<longrightarrow>\n            fst \\<rho>'' = snd \\<rho>'' \\<and>\n            fst \\<rho>'' x = snd \\<rho>'' y)\n 2. \\<rho> x = \\<rho> y \\<Longrightarrow> \\<bottom> = \\<bottom>\n 3. \\<rho> x = \\<rho> y \\<Longrightarrow> \\<bottom> x = \\<bottom> y\n 4. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub> =\n                         \\<rho> ++\\<^bsub>domA\n     as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>\n 5. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply (intro adm_lemmas cont2cont cont2cont_fun)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<rho> x = \\<rho> y \\<Longrightarrow> \\<bottom> = \\<bottom>\n 2. \\<rho> x = \\<rho> y \\<Longrightarrow> \\<bottom> x = \\<bottom> y\n 3. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub> =\n                         \\<rho> ++\\<^bsub>domA\n     as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>\n 4. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<rho> x = \\<rho> y \\<Longrightarrow> \\<bottom> x = \\<bottom> y\n 2. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub> =\n                         \\<rho> ++\\<^bsub>domA\n     as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>\n 3. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub> =\n                         \\<rho> ++\\<^bsub>domA\n     as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>\n 2. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply simp"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>y x = y y; \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub> =\n                         \\<rho> ++\\<^bsub>domA\n     as\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>\n 2. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply (erule arg_cong[OF Let(3)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "using \\<open>x \\<notin> domA as\\<close> \\<open>y \\<notin> domA as\\<close>"], ["proof (prove)\nusing this:\n  x \\<notin> domA as\n  y \\<notin> domA as\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       \\<lbrakk>\\<rho> x = \\<rho> y \\<Longrightarrow> y = z;\n        \\<rho> x = \\<rho> y \\<Longrightarrow> y x = z y;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> (\\<rho> ++\\<^bsub>domA\n      as\\<^esub> \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n                          x =\n                         (\\<rho> ++\\<^bsub>domA\n      as[x::h=y]\\<^esub> \\<^bold>\\<lbrakk> as[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)\n                          y", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  \\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho>\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> exp x y \\<rho>.\n       \\<lbrakk>atom ` domA \\<Gamma> \\<sharp>* x;\n        atom ` domA \\<Gamma> \\<sharp>* y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Terms.Let \\<Gamma>\n                                    exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Terms.Let \\<Gamma>\n                                     exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 6. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n  \\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho>\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n  \\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho>\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (Terms.Let as exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "using Let(1,2,3)"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<lbrace>as\\<rbrace>\\<rho>\\<^esub>\n  \\<lbrace>as\\<rbrace>\\<rho> = \\<lbrace>as[x::h=y]\\<rbrace>\\<rho>\n  (\\<lbrace>as\\<rbrace>\\<rho>) x = (\\<lbrace>as[x::h=y]\\<rbrace>\\<rho>) y\n  atom ` domA as \\<sharp>* x\n  atom ` domA as \\<sharp>* y\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<^bold>\\<lbrakk> as \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<^bold>\\<lbrakk> as[?b1::h=?ba1] \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Terms.Let as exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (Terms.Let as exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by (simp add: fresh_star_Pair)"], ["proof (state)\nthis:\n  \\<lbrakk> Terms.Let as exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (Terms.Let as exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (5 subgoals):\n 1. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case (Lam var exp x y \\<rho>)"], ["proof (state)\nthis:\n  atom var \\<sharp> x\n  atom var \\<sharp> y\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> exp[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (5 subgoals):\n 1. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from \\<open>\\<rho> x = \\<rho> y\\<close>"], ["proof (chain)\npicking this:\n  \\<rho> x = \\<rho> y", "have \"\\<And>v. (\\<rho>(var := v)) x = (\\<rho>(var := v)) y\""], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<And>v. (\\<rho>(var := v)) x = (\\<rho>(var := v)) y", "using Lam(1,2)"], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n  atom var \\<sharp> x\n  atom var \\<sharp> y\n\ngoal (1 subgoal):\n 1. \\<And>v. (\\<rho>(var := v)) x = (\\<rho>(var := v)) y", "by (simp add: fresh_at_base)"], ["proof (state)\nthis:\n  (\\<rho>(var := ?v1)) x = (\\<rho>(var := ?v1)) y\n\ngoal (5 subgoals):\n 1. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "hence \"\\<And> v. \\<lbrakk>exp\\<rbrakk>\\<^bsub>\\<rho>(var := v)\\<^esub> = \\<lbrakk>exp[x::=y]\\<rbrakk>\\<^bsub>\\<rho>(var := v)\\<^esub>\""], ["proof (prove)\nusing this:\n  (\\<rho>(var := ?v1)) x = (\\<rho>(var := ?v1)) y\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>(var := v)\\<^esub> =\n       \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<rho>(var := v)\\<^esub>", "by (rule Lam)"], ["proof (state)\nthis:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub>\n\ngoal (5 subgoals):\n 1. \\<And>var exp x y \\<rho>.\n       \\<lbrakk>atom var \\<sharp> x; atom var \\<sharp> y;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 5. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "using Lam(1,2)"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub> =\n  \\<lbrakk> exp[x::=y] \\<rbrakk>\\<^bsub>\\<rho>(var := ?v1)\\<^esub>\n  atom var \\<sharp> x\n  atom var \\<sharp> y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> Lam [var]. exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (Lam [var]. exp)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (4 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case IfThenElse"], ["proof (state)\nthis:\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> scrut_ \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> scrut_[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> e1_ \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e1_[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> e2_ \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> e2_[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (4 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>scrut e1 e2 x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> scrut[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e1[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<lbrakk> e2[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<lbrakk> (scrut ? e1\n                                    : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<lbrakk> (scrut ? e1\n                                    : e2)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 4. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from IfThenElse(1)[OF IfThenElse(4)] IfThenElse(2)[OF IfThenElse(4)] IfThenElse(3)[OF IfThenElse(4)]"], ["proof (chain)\npicking this:\n  \\<lbrakk> scrut_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> scrut_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<lbrakk> e1_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> e1_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<lbrakk> e2_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> e2_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> scrut_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> scrut_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<lbrakk> e1_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> e1_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<lbrakk> e2_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> e2_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> (scrut_ ? e1_ : e2_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> (scrut_ ? e1_ : e2_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> (scrut_ ? e1_ : e2_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> (scrut_ ? e1_ : e2_)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (3 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case Nil"], ["proof (state)\nthis:\n  \\<rho> x = \\<rho> y\n\ngoal (3 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 3. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "thus ?case"], ["proof (prove)\nusing this:\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<^bold>\\<lbrakk> [] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<^bold>\\<lbrakk> [][x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "case Cons"], ["proof (state)\nthis:\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<lbrakk> exp_[?b1::=?ba1] \\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  ?\\<rho>1 ?b1 = ?\\<rho>1 ?ba1 \\<Longrightarrow>\n  \\<^bold>\\<lbrakk> \\<Gamma>_ \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub> =\n  \\<^bold>\\<lbrakk> \\<Gamma>_[?b1::h=?ba1] \\<^bold>\\<rbrakk>\\<^bsub>?\\<rho>1\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (2 subgoals):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n 2. \\<And>var exp \\<Gamma> x y \\<rho>.\n       \\<lbrakk>\\<And>b ba \\<rho>.\n                   \\<rho> b = \\<rho> ba \\<Longrightarrow>\n                   \\<lbrakk> exp \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                   \\<lbrakk> exp[b::=ba] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<And>b ba \\<rho>.\n           \\<rho> b = \\<rho> ba \\<Longrightarrow>\n           \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n           \\<^bold>\\<lbrakk> \\<Gamma>[b::h=ba] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>;\n        \\<rho> x = \\<rho> y\\<rbrakk>\n       \\<Longrightarrow> \\<^bold>\\<lbrakk> (var, exp) #\n     \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n                         \\<^bold>\\<lbrakk> ((var, exp) #\n      \\<Gamma>)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "from Cons(1,2)[OF Cons(3)] Cons(3)"], ["proof (chain)\npicking this:\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> exp_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<^bold>\\<lbrakk> \\<Gamma>_ \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<^bold>\\<lbrakk> \\<Gamma>_[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<rho> x = \\<rho> y", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk> exp_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<lbrakk> exp_[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<^bold>\\<lbrakk> \\<Gamma>_ \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<^bold>\\<lbrakk> \\<Gamma>_[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n  \\<rho> x = \\<rho> y\n\ngoal (1 subgoal):\n 1. \\<^bold>\\<lbrakk> (var_, exp_) #\n                      \\<Gamma>_ \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<^bold>\\<lbrakk> ((var_, exp_) #\n                       \\<Gamma>_)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by auto"], ["proof (state)\nthis:\n  \\<^bold>\\<lbrakk> (var_, exp_) #\n                    \\<Gamma>_ \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n  \\<^bold>\\<lbrakk> ((var_, exp_) #\n                     \\<Gamma>_)[x::h=y] \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>b x y \\<rho>.\n       \\<rho> x = \\<rho> y \\<Longrightarrow>\n       \\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n       \\<lbrakk> (Bool b)[x::=y] \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "qed auto"], ["", "lemma ESem_subst:\n  shows \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "proof(cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "hence [simp]: \"x \\<notin> fv e[x::=y]\""], ["proof (prove)\nusing this:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<notin> fv e[x::=y]", "by (auto simp add: fv_def supp_subst supp_at_base dest: subsetD[OF supp_subst])"], ["proof (state)\nthis:\n  x \\<notin> fv e[x::=y]\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "have \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub>", "by (rule ESem_subst_same) simp"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub>\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "also"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub>\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "have \"\\<dots> = \\<lbrakk> e[x::= y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "by (rule ESem_fresh_cong) simp"], ["proof (state)\nthis:\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n 2. x \\<noteq> y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "."], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. x = y \\<Longrightarrow>\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n    \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<sigma>(x := \\<sigma> y)\\<^esub> =\n  \\<lbrakk> e[x::=y] \\<rbrakk>\\<^bsub>\\<sigma>\\<^esub>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}