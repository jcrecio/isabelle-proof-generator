{"file_name": "/home/qj213/afp-2021-10-22/thys/Launchbury/CorrectnessResourced.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Launchbury", "problem_names": ["theorem correctness:\n  assumes \"\\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : z\"\n  and     \"fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\"\n  shows   \"\\<N>\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk>z\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\" and \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\""], "translations": [["", "theorem correctness:\n  assumes \"\\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : z\"\n  and     \"fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\"\n  shows   \"\\<N>\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk>z\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\" and \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> &&&\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "using assms"], ["proof (prove)\nusing this:\n  \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : z\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> &&&\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "proof(nominal_induct arbitrary: \\<rho> rule:reds.strong_induct)"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 3. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 9. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> b L \\<rho>.\n        fv (\\<Gamma>, Bool b)\n        \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n        domA \\<Gamma> \\<sqsubseteq>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\nA total of 12 subgoals...", "case Lambda"], ["proof (state)\nthis:\n  \n\ngoal (12 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 3. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 9. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> b L \\<rho>.\n        fv (\\<Gamma>, Bool b)\n        \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n        domA \\<Gamma> \\<sqsubseteq>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\nA total of 12 subgoals...", "case 1"], ["proof (state)\nthis:\n  fv (\\<Gamma>_, Lam [x_]. e_) \\<subseteq> set L_ \\<union> domA \\<Gamma>_\n\ngoal (12 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 3. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 9. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> b L \\<rho>.\n        fv (\\<Gamma>, Bool b)\n        \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n        domA \\<Gamma> \\<sqsubseteq>\n        (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\nA total of 12 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Lam [x_]. e_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> Lam [x_]. e_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>\\<^esub>", ".."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Lam [x_]. e_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Lam [x_]. e_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>\\<^esub>\n\ngoal (11 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 9. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n   : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                          \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\nA total of 11 subgoals...", "case 2"], ["proof (state)\nthis:\n  fv (\\<Gamma>_, Lam [x_]. e_) \\<subseteq> set L_ \\<union> domA \\<Gamma>_\n\ngoal (11 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<rho>.\n       fv (\\<Gamma>, Lam [x]. e)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 9. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n   : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                          \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\nA total of 11 subgoals...", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>) f|` domA \\<Gamma>_ \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>) f|` domA \\<Gamma>_", ".."], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>) f|` domA \\<Gamma>_ \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Gamma>_\\<rbrace>\\<rho>) f|` domA \\<Gamma>_\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "next"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "case (Application y \\<Gamma> e x L \\<Delta> \\<Theta> z e')"], ["proof (state)\nthis:\n  atom y \\<sharp> \\<Gamma>\n  atom y \\<sharp> e\n  atom y \\<sharp> x\n  atom y \\<sharp> L\n  atom y \\<sharp> \\<Delta>\n  atom y \\<sharp> \\<Theta>\n  atom y \\<sharp> z\n  \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e'\n  fv (\\<Gamma>, e)\n  \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (\\<Gamma>, e)\n  \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>\n  \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z\n  fv (\\<Delta>, e'[y::=x])\n  \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n  \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (\\<Delta>, e'[y::=x])\n  \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Delta> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>) f|` domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have Gamma_subset: \"domA \\<Gamma> \\<subseteq> domA \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA \\<Gamma> \\<subseteq> domA \\<Delta>", "by (rule reds_doesnt_forget[OF Application.hyps(8)])"], ["proof (state)\nthis:\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "case 1"], ["proof (state)\nthis:\n  fv (\\<Gamma>, App e x) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "hence prem1: \"fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\" and  \"x \\<in> set L \\<union> domA \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, App e x) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma> &&&\n    x \\<in> set L \\<union> domA \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "moreover"], ["proof (state)\nthis:\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "note reds_pres_closed[OF Application.hyps(8) prem1]"], ["proof (state)\nthis:\n  fv (\\<Delta>, Lam [y]. e') \\<subseteq> set L \\<union> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "moreover"], ["proof (state)\nthis:\n  fv (\\<Delta>, Lam [y]. e') \\<subseteq> set L \\<union> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "note reds_doesnt_forget[OF Application.hyps(8)]"], ["proof (state)\nthis:\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "moreover"], ["proof (state)\nthis:\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"fv (e'[y::=x]) \\<subseteq> fv (Lam [y]. e') \\<union> {x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv e'[y::=x] \\<subseteq> fv (Lam [y]. e') \\<union> {x}", "by (auto simp add: fv_subst_eq)"], ["proof (state)\nthis:\n  fv e'[y::=x] \\<subseteq> fv (Lam [y]. e') \\<union> {x}\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "ultimately"], ["proof (chain)\npicking this:\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n  fv (\\<Delta>, Lam [y]. e') \\<subseteq> set L \\<union> domA \\<Delta>\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n  fv e'[y::=x] \\<subseteq> fv (Lam [y]. e') \\<union> {x}", "have prem2: \"fv (\\<Delta>, e'[y::=x]) \\<subseteq> set L \\<union> domA \\<Delta>\""], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n  fv (\\<Delta>, Lam [y]. e') \\<subseteq> set L \\<union> domA \\<Delta>\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n  fv e'[y::=x] \\<subseteq> fv (Lam [y]. e') \\<union> {x}\n\ngoal (1 subgoal):\n 1. fv (\\<Delta>, e'[y::=x]) \\<subseteq> set L \\<union> domA \\<Delta>", "by auto"], ["proof (state)\nthis:\n  fv (\\<Delta>, e'[y::=x]) \\<subseteq> set L \\<union> domA \\<Delta>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have *: \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "proof(cases \"x \\<in> domA \\<Gamma>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "case True"], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "using fun_belowD[OF Application.hyps(10)[OF prem1], where \\<rho>1 = \\<rho> and x = x]"], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma>\n  ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq>\n  ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "by simp"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "case False"], ["proof (state)\nthis:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "from False \\<open>x \\<in> set L \\<union> domA \\<Gamma>\\<close> reds_avoids_live[OF Application.hyps(8)]"], ["proof (chain)\npicking this:\n  x \\<notin> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n  \\<lbrakk>?x \\<in> set L; ?x \\<notin> domA \\<Gamma>\\<rbrakk>\n  \\<Longrightarrow> ?x \\<notin> domA \\<Delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Gamma>\n  x \\<in> set L \\<union> domA \\<Gamma>\n  \\<lbrakk>?x \\<in> set L; ?x \\<notin> domA \\<Gamma>\\<rbrakk>\n  \\<Longrightarrow> ?x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "by (auto simp add: lookup_HSem_other)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "{"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "fix r"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"(\\<N>\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<sqsubseteq> ((\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<down>CFn (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> App e\n                    x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    ((\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r \\<down>CFn\n     (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>\n    r", "by (rule CEApp_no_restr)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> App e\n                  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  ((\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r \\<down>CFn\n   (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>\n  r\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> App e\n                  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  ((\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r \\<down>CFn\n   (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>\n  r\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"((\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)) \\<sqsubseteq> ((\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "using Application.hyps(9)[OF prem1]"], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "note \\<open>((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x) \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\\<close>"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"(\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<sqsubseteq> (CFn\\<cdot>(\\<Lambda> v. (\\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)(y := v)\\<^esub>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    CFn\\<cdot>\n    (\\<Lambda> v.\n        \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n        (y := v)\\<^esub>)", "by (rule CELam_no_restr)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  CFn\\<cdot>\n  (\\<Lambda> v.\n      \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n      (y := v)\\<^esub>)\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  CFn\\<cdot>\n  (\\<Lambda> v.\n      \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n      (y := v)\\<^esub>)\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"CFn\\<cdot>(\\<Lambda> v. (\\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)(y := v)\\<^esub>)) \\<down>CFn ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x) = (\\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)(y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CFn\\<cdot>\n    (\\<Lambda> v.\n        \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n        (y := v)\\<^esub>) \\<down>CFn\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x =\n    \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n    (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub>", "by simp"], ["proof (state)\nthis:\n  CFn\\<cdot>\n  (\\<Lambda> v.\n      \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n      (y := v)\\<^esub>) \\<down>CFn\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x =\n  \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n  (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  CFn\\<cdot>\n  (\\<Lambda> v.\n      \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n      (y := v)\\<^esub>) \\<down>CFn\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x =\n  \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n  (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"\\<dots> = (\\<N>\\<lbrakk> e'[y ::= x] \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n    (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub> =\n    \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "unfolding ESem_subst"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> =\n    \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", ".."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n  (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub> =\n  \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e' \\<rbrakk>\\<^bsub>(\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>)\n  (y := (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<^esub> =\n  \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>", "using Application.hyps(12)[OF prem2]"], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>", "."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont\n            (\\<lambda>a.\n                (a\\<cdot>r \\<down>CFn\n                 (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>\n                r);\n   cont\n    (\\<lambda>a.\n        ((\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n         r \\<down>CFn\n         a)\\<cdot>\n        r);\n   cont\n    (\\<lambda>a.\n        (a \\<down>CFn (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<cdot>r);\n   cont (\\<lambda>a. a\\<cdot>r)\\<rbrakk>\n  \\<Longrightarrow> (\\<N>\\<lbrakk> App e\n                                    x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r \\<sqsubseteq>\n                    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r", "have \"(\\<N>\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<sqsubseteq> (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont\n            (\\<lambda>a.\n                (a\\<cdot>r \\<down>CFn\n                 (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x)\\<cdot>\n                r);\n   cont\n    (\\<lambda>a.\n        ((\\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n         r \\<down>CFn\n         a)\\<cdot>\n        r);\n   cont\n    (\\<lambda>a.\n        (a \\<down>CFn (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x)\\<cdot>r);\n   cont (\\<lambda>a. a\\<cdot>r)\\<rbrakk>\n  \\<Longrightarrow> (\\<N>\\<lbrakk> App e\n                                    x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r \\<sqsubseteq>\n                    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> App e\n                    x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r", "by this (intro cont2cont)+"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> App e\n                  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "}"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> App e\n                  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2 \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2\n\ngoal (10 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> App e\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 10. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z\n        \\<rho>.\n        \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool\n                                 b;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> Bool\n                           b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Gamma>, scrut)\n            \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n            domA \\<Gamma> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n         \\<Delta> : (if b then e\\<^sub>1\n                     else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                           else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n            \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n         \\<And>\\<rho>.\n            fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n            \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n            (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n            domA \\<Delta> \\<sqsubseteq>\n            (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n         fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n         \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n        \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma> \\<sqsubseteq>\n                          (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                          domA \\<Gamma>", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrakk> App e\n                  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2 \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> App e\n                   x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>", "by (rule cfun_belowI)"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> App e\n                 x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (9 subgoals):\n 1. \\<And>y \\<Gamma> e x L \\<Delta> \\<Theta> z e' \\<rho>.\n       \\<lbrakk>atom y \\<sharp> \\<Gamma>; atom y \\<sharp> e;\n        atom y \\<sharp> x; atom y \\<sharp> L; atom y \\<sharp> \\<Delta>;\n        atom y \\<sharp> \\<Theta>; atom y \\<sharp> z;\n        \\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Lam [y]. e';\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Lam [y]. e' \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, e)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : e'[y::=x] \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> e'[y::=x] \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, e'[y::=x])\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, App e x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 9. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "show \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` (domA \\<Gamma>) \\<sqsubseteq> (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>)  f|` (domA \\<Gamma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "using Application.hyps(10)[OF prem1]\n          env_restr_below_subset[OF Gamma_subset Application.hyps(13)[OF prem2]]"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>3) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>3) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "by (rule below_trans)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case (Variable \\<Gamma> x e L \\<Delta> z)"], ["proof (state)\nthis:\n  map_of \\<Gamma> x = Some e\n  delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union>\n              domA (delete x \\<Gamma>) \\<Longrightarrow>\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union>\n              domA (delete x \\<Gamma>) \\<Longrightarrow>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>?\\<rho>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA (delete x \\<Gamma>)\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "hence [simp]:\"x \\<in> domA \\<Gamma>\""], ["proof (prove)\nusing this:\n  map_of \\<Gamma> x = Some e\n  delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union>\n              domA (delete x \\<Gamma>) \\<Longrightarrow>\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union>\n              domA (delete x \\<Gamma>) \\<Longrightarrow>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>?\\<rho>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. x \\<in> domA \\<Gamma>", "by (metis domA_from_set map_of_SomeD)"], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case 2"], ["proof (state)\nthis:\n  fv (\\<Gamma>, Var x) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"x \\<notin> domA \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta>", "by (rule reds_avoids_live[OF Variable.hyps(2)], simp_all)"], ["proof (state)\nthis:\n  x \\<notin> domA \\<Delta>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have subset: \"domA (delete x \\<Gamma>) \\<subseteq> domA \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA (delete x \\<Gamma>) \\<subseteq> domA \\<Delta>", "by (rule reds_doesnt_forget[OF Variable.hyps(2)])"], ["proof (state)\nthis:\n  domA (delete x \\<Gamma>) \\<subseteq> domA \\<Delta>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "let \"?new\" = \"domA \\<Delta> - domA \\<Gamma>\""], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"fv (delete x \\<Gamma>, e) \\<union> {x} \\<subseteq> fv (\\<Gamma>, Var x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (delete x \\<Gamma>, e) \\<union> {x} \\<subseteq> fv (\\<Gamma>, Var x)", "by (rule fv_delete_heap[OF \\<open>map_of \\<Gamma> x = Some e\\<close>])"], ["proof (state)\nthis:\n  fv (delete x \\<Gamma>, e) \\<union> {x} \\<subseteq> fv (\\<Gamma>, Var x)\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "hence prem: \"fv (delete x \\<Gamma>, e) \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)\""], ["proof (prove)\nusing this:\n  fv (delete x \\<Gamma>, e) \\<union> {x} \\<subseteq> fv (\\<Gamma>, Var x)\n\ngoal (1 subgoal):\n 1. fv (delete x \\<Gamma>, e)\n    \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)", "using 2"], ["proof (prove)\nusing this:\n  fv (delete x \\<Gamma>, e) \\<union> {x} \\<subseteq> fv (\\<Gamma>, Var x)\n  fv (\\<Gamma>, Var x) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv (delete x \\<Gamma>, e)\n    \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)", "by auto"], ["proof (state)\nthis:\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "hence fv_subset: \"fv (delete x \\<Gamma>, e) - domA (delete x \\<Gamma>) \\<subseteq> - ?new\""], ["proof (prove)\nusing this:\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. fv (delete x \\<Gamma>, e) - domA (delete x \\<Gamma>)\n    \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)", "using reds_avoids_live'[OF Variable.hyps(2)]"], ["proof (prove)\nusing this:\n  fv (delete x \\<Gamma>, e)\n  \\<subseteq> set (x # L) \\<union> domA (delete x \\<Gamma>)\n  (domA \\<Delta> - domA (delete x \\<Gamma>)) \\<inter> set (x # L) = {}\n\ngoal (1 subgoal):\n 1. fv (delete x \\<Gamma>, e) - domA (delete x \\<Gamma>)\n    \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)", "by auto"], ["proof (state)\nthis:\n  fv (delete x \\<Gamma>, e) - domA (delete x \\<Gamma>)\n  \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"domA \\<Gamma> \\<subseteq> (-?new)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA \\<Gamma> \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)", "by auto"], ["proof (state)\nthis:\n  domA \\<Gamma> \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> = \\<N>\\<lbrace>(x,e) # delete x \\<Gamma>\\<rbrace>\\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n    \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho>", "by (rule HSem_reorder[OF map_of_delete_insert[symmetric, OF Variable(1)]])"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho>\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = (\\<mu> \\<rho>'. (\\<rho> ++\\<^bsub>(domA (delete x \\<Gamma>))\\<^esub> (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>'))( x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>'\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho> =\n    (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>xa\\<^esub>))", "by (rule iterative_HSem, simp)"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho> =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>xa\\<^esub>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>(x, e) # delete x \\<Gamma>\\<rbrace>\\<rho> =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>xa\\<^esub>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = (\\<mu> \\<rho>'. (\\<rho> ++\\<^bsub>(domA (delete x \\<Gamma>))\\<^esub> (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>'))( x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>'\\<^esub>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>xa\\<^esub>)) =\n    (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                       \\<Gamma>\\<rbrace>xa\\<^esub>))", "by (rule iterative_HSem', simp)"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>xa\\<^esub>)) =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>))", "have \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)f|` (- ?new) \\<sqsubseteq> (...) f|` (- ?new)\""], ["proof (prove)\nusing this:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>))\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                       \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "by (rule ssubst) (rule below_refl)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> (\\<mu> \\<rho>'. (\\<rho> ++\\<^bsub>domA \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>'))( x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>'\\<^esub>)) f|` (- ?new)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                       \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "proof (induction rule: parallel_fix_ind[where P =\"\\<lambda> x y. x f|` (- ?new) \\<sqsubseteq> y f|` (- ?new)\"])"], ["proof (state)\ngoal (3 subgoals):\n 1. adm (\\<lambda>x.\n            fst x f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n            snd x f|` (- (domA \\<Delta> - domA \\<Gamma>)))\n 2. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n 3. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. adm (\\<lambda>x.\n            fst x f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n            snd x f|` (- (domA \\<Delta> - domA \\<Gamma>)))\n 2. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n 3. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x.\n            fst x f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n            snd x f|` (- (domA \\<Delta> - domA \\<Gamma>)))", "by simp"], ["proof (state)\nthis:\n  adm (\\<lambda>x.\n          fst x f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n          snd x f|` (- (domA \\<Delta> - domA \\<Gamma>)))\n\ngoal (2 subgoals):\n 1. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n 2. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n 2. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "case 2"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n 2. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))", ".."], ["proof (state)\nthis:\n  \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  \\<bottom> f|` (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "case (3 \\<sigma> \\<sigma>')"], ["proof (state)\nthis:\n  \\<sigma> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  \\<sigma>' f|` (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "hence \"\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>'\\<^esub>\"\n      and \"(\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|` domA (delete x \\<Gamma>) \\<sqsubseteq> (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\""], ["proof (prove)\nusing this:\n  \\<sigma> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  \\<sigma>' f|` (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n             \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n             \\<Gamma>\\<rbrace>\\<sigma>'\\<^esub> &&&\n    (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n    domA (delete x \\<Gamma>) \\<sqsubseteq>\n    (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>') f|`\n    domA (delete x \\<Gamma>)", "using fv_subset"], ["proof (prove)\nusing this:\n  \\<sigma> f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  \\<sigma>' f|` (- (domA \\<Delta> - domA \\<Gamma>))\n  fv (delete x \\<Gamma>, e) - domA (delete x \\<Gamma>)\n  \\<subseteq> - (domA \\<Delta> - domA \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n             \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n             \\<Gamma>\\<rbrace>\\<sigma>'\\<^esub> &&&\n    (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n    domA (delete x \\<Gamma>) \\<sqsubseteq>\n    (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>') f|`\n    domA (delete x \\<Gamma>)", "by (auto intro: ESem_fresh_cong_below HSem_fresh_cong_below  env_restr_below_subset[OF _ 3])"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>') f|`\n  domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "from below_trans[OF this(1) Variable(3)[OF prem]] below_trans[OF this(2) Variable(4)[OF prem]]"], ["proof (chain)\npicking this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)", "have  \"\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\"\n       and \"(\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|` domA (delete x \\<Gamma>) \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\""], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n             \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub> &&&\n    (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n    domA (delete x \\<Gamma>) \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)", "."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<And>xa y.\n       xa f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       y f|` (- (domA \\<Delta> - domA \\<Gamma>)) \\<Longrightarrow>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              (delete x\n                                \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                           \\<Gamma>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                          \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n       xa f|`\n       (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n       (\\<Lambda> xa.\n           (\\<rho> ++\\<^bsub>domA\n                              \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n           (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n       y f|`\n       (- (domA \\<Delta> - domA \\<Gamma>))", "thus ?case"], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\n\ngoal (1 subgoal):\n 1. (\\<Lambda> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                       \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n    \\<sigma> f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    (\\<Lambda> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n    \\<sigma>' f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "using subset"], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n           \\<Gamma>\\<rbrace>\\<sigma>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>'\\<^esub>\n  (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<sigma>) f|`\n  domA (delete x \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<sigma>') f|` domA (delete x \\<Gamma>)\n  domA (delete x \\<Gamma>) \\<subseteq> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<Lambda> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           (delete x\n                             \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                        \\<Gamma>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                       \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n    \\<sigma> f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n    (\\<Lambda> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n    \\<sigma>' f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "by (auto intro!: fun_belowI simp add: lookup_override_on_eq  lookup_env_restr_eq elim: env_restr_belowD)"], ["proof (state)\nthis:\n  (\\<Lambda> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>))\\<cdot>\n  \\<sigma> f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<Lambda> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>))\\<cdot>\n  \\<sigma>' f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         (delete x\n                           \\<Gamma>)\\<^esub> (\\<N>\\<lbrace>delete x\n                      \\<Gamma>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                     \\<Gamma>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = (\\<mu> \\<rho>'. (\\<rho> ++\\<^bsub>domA \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>'))( x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<rho>'\\<^esub>)) f|` (-?new)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) =\n    (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "by (rule arg_cong[OF iterative_HSem'[symmetric], OF \\<open>x \\<notin> domA \\<Delta>\\<close>])"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) =\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = (\\<N>\\<lbrace>(x,z) # \\<Delta>\\<rbrace>\\<rho>)  f|` (-?new)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<mu> xa.\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n        (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>xa\\<^esub>)) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>)) =\n    (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n    (- (domA \\<Delta> - domA \\<Gamma>))", "by (rule arg_cong[OF iterative_HSem[symmetric], OF \\<open>x \\<notin> domA \\<Delta>\\<close>])"], ["proof (state)\nthis:\n  (\\<mu> xa.\n      (\\<rho> ++\\<^bsub>domA\n                         \\<Delta>\\<^esub> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>xa))\n      (x := \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>xa\\<^esub>)) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) =\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (8 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 8. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))", "show le: ?case"], ["proof (prove)\nusing this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>)) \\<sqsubseteq>\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|`\n  (- (domA \\<Delta> - domA \\<Gamma>))\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "by (rule env_restr_below_subset[OF \\<open>domA \\<Gamma> \\<subseteq> (-?new)\\<close>]) (intro cont2cont)+"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x", "by (rule CESem_simps_no_tick)"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x", "using fun_belowD[OF le, where x = x]"], ["proof (prove)\nusing this:\n  ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq>\n  ((\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x", "by simp"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x =\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n            \\<Delta>\\<rbrace>\\<rho>\\<^esub>", "by (simp add: lookup_HSem_heap)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>) x =\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n          \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (7 subgoals):\n 1. \\<And>\\<Gamma> x e L \\<Delta> z \\<rho>.\n       \\<lbrakk>map_of \\<Gamma> x = Some e;\n        delete x \\<Gamma> : e \\<Down>\\<^bsub>x # L\\<^esub> \\<Delta> : z;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>delete x\n                    \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (delete x \\<Gamma>, e)\n           \\<subseteq> set (x # L) \\<union>\n                       domA (delete x \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>delete x \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA (delete x \\<Gamma>);\n        fv (\\<Gamma>, Var x)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Var\n  x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x,\n                                  z) #\n                                 \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 3. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 7. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n          \\<Delta>\\<rbrace>\\<rho>\\<^esub>", "show \"\\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) # \\<Delta>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\nusing this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n          \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n            \\<Delta>\\<rbrace>\\<rho>\\<^esub>", "by this (intro cont2cont)+"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>(x, z) #\n          \\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case (Bool b)"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case 1"], ["proof (state)\nthis:\n  fv (b, Bool b_) \\<subseteq> set L_ \\<union> domA b\n\ngoal (6 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n       \\<N>\\<lbrakk> Bool\n                      b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 6. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Bool\n                   b_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>b\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> Bool\n                   b_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>b\\<rbrace>\\<rho>\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Bool\n                 b_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>b\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Bool\n                 b_ \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>b\\<rbrace>\\<rho>\\<^esub>\n\ngoal (5 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case 2"], ["proof (state)\nthis:\n  fv (b, Bool b_) \\<subseteq> set L_ \\<union> domA b\n\ngoal (5 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> b L \\<rho>.\n       fv (\\<Gamma>, Bool b)\n       \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n       domA \\<Gamma> \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 5. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>b\\<rbrace>\\<rho>) f|` domA b \\<sqsubseteq>\n    (\\<N>\\<lbrace>b\\<rbrace>\\<rho>) f|` domA b", "by simp"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>b\\<rbrace>\\<rho>) f|` domA b \\<sqsubseteq>\n  (\\<N>\\<lbrace>b\\<rbrace>\\<rho>) f|` domA b\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case (IfThenElse \\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z)"], ["proof (state)\nthis:\n  \\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b\n  fv (\\<Gamma>, scrut)\n  \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n  \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> Bool\n                 b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (\\<Gamma>, scrut)\n  \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>\n  \\<Delta> : (if b then e\\<^sub>1\n              else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z\n  fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n  \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                 else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Delta> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>) f|` domA \\<Delta>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have Gamma_subset: \"domA \\<Gamma> \\<subseteq> domA \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA \\<Gamma> \\<subseteq> domA \\<Delta>", "by (rule reds_doesnt_forget[OF IfThenElse.hyps(1)])"], ["proof (state)\nthis:\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "let ?e = \"if b then e\\<^sub>1 else e\\<^sub>2\""], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case 1"], ["proof (state)\nthis:\n  fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "hence prem1: \"fv (\\<Gamma>, scrut) \\<subseteq> set L \\<union> domA \\<Gamma>\"\n    and prem2: \"fv (\\<Delta>, ?e) \\<subseteq> set L \\<union> domA \\<Delta>\"\n    and \"fv ?e \\<subseteq> domA \\<Gamma> \\<union> set L\""], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv (\\<Gamma>, scrut) \\<subseteq> set L \\<union> domA \\<Gamma> &&&\n    fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n    \\<subseteq> set L \\<union> domA \\<Delta> &&&\n    fv (if b then e\\<^sub>1 else e\\<^sub>2)\n    \\<subseteq> domA \\<Gamma> \\<union> set L", "using new_free_vars_on_heap[OF IfThenElse.hyps(1)] Gamma_subset"], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Gamma>\n  fv (\\<Delta>, Bool b) - domA \\<Delta>\n  \\<subseteq> fv (\\<Gamma>, scrut) - domA \\<Gamma>\n  domA \\<Gamma> \\<subseteq> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. fv (\\<Gamma>, scrut) \\<subseteq> set L \\<union> domA \\<Gamma> &&&\n    fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n    \\<subseteq> set L \\<union> domA \\<Delta> &&&\n    fv (if b then e\\<^sub>1 else e\\<^sub>2)\n    \\<subseteq> domA \\<Gamma> \\<union> set L", "by auto"], ["proof (state)\nthis:\n  fv (\\<Gamma>, scrut) \\<subseteq> set L \\<union> domA \\<Gamma>\n  fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Delta>\n  fv (if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> domA \\<Gamma> \\<union> set L\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "{"], ["proof (state)\nthis:\n  fv (\\<Gamma>, scrut) \\<subseteq> set L \\<union> domA \\<Gamma>\n  fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> set L \\<union> domA \\<Delta>\n  fv (if b then e\\<^sub>1 else e\\<^sub>2)\n  \\<subseteq> domA \\<Gamma> \\<union> set L\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "fix r"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"(\\<N>\\<lbrakk> (scrut ? e\\<^sub>1 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<sqsubseteq> CB_project\\<cdot>((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\\<cdot>((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\\<cdot>((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                    : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    CB_project\\<cdot>\n    ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)", "by (rule CESem_simps_no_tick)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> CB_project\\<cdot>((\\<N>\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\\<cdot>((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\\<cdot>((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CB_project\\<cdot>\n    ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r) \\<sqsubseteq>\n    CB_project\\<cdot>\n    ((\\<N>\\<lbrakk> Bool\n                     b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)", "by (intro monofun_cfun_fun monofun_cfun_arg  IfThenElse.hyps(2)[OF prem1])"], ["proof (state)\nthis:\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r) \\<sqsubseteq>\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> Bool\n                   b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r) \\<sqsubseteq>\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> Bool\n                   b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> = (\\<N>\\<lbrakk> ?e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CB_project\\<cdot>\n    ((\\<N>\\<lbrakk> Bool\n                     b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r)\\<cdot>\n    ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n     r) =\n    (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r", "by (cases r) simp_all"], ["proof (state)\nthis:\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> Bool\n                   b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r) =\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  CB_project\\<cdot>\n  ((\\<N>\\<lbrakk> Bool\n                   b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r)\\<cdot>\n  ((\\<N>\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n   r) =\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> (\\<N>\\<lbrakk> ?e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r", "proof(rule monofun_cfun_fun[OF ESem_fresh_cong_below_subset[OF  \\<open>fv ?e \\<subseteq> domA \\<Gamma> \\<union> set L\\<close> Env.env_restr_belowI]])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domA \\<Gamma> \\<union> set L \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domA \\<Gamma> \\<union> set L \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "assume \"x \\<in> domA \\<Gamma> \\<union> set L\""], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma> \\<union> set L\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> domA \\<Gamma> \\<union> set L \\<Longrightarrow>\n       (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n       (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "thus \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\""], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma> \\<union> set L\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "proof(cases \"x \\<in> domA \\<Gamma>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<in> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n 2. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "assume \"x \\<in> domA \\<Gamma>\""], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<in> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n 2. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "from IfThenElse.hyps(3)[OF prem1]"], ["proof (chain)\npicking this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>", "have \"((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq> ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x\""], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>)\n     x \\<sqsubseteq>\n    ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x", "by (rule fun_belowD)"], ["proof (state)\nthis:\n  ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq>\n  ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<in> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n 2. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "with \\<open>x \\<in> domA \\<Gamma>\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> domA \\<Gamma>\n  ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq>\n  ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma>\n  ((\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x \\<sqsubseteq>\n  ((\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>) x\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "by simp"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "assume \"x \\<notin> domA \\<Gamma>\""], ["proof (state)\nthis:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> domA \\<Gamma> \\<union> set L;\n     x \\<notin> domA \\<Gamma>\\<rbrakk>\n    \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n                      (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "from this \\<open>x \\<in> domA \\<Gamma> \\<union> set L\\<close> reds_avoids_live[OF IfThenElse.hyps(1)]"], ["proof (chain)\npicking this:\n  x \\<notin> domA \\<Gamma>\n  x \\<in> domA \\<Gamma> \\<union> set L\n  \\<lbrakk>?x \\<in> set L; ?x \\<notin> domA \\<Gamma>\\<rbrakk>\n  \\<Longrightarrow> ?x \\<notin> domA \\<Delta>", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Gamma>\n  x \\<in> domA \\<Gamma> \\<union> set L\n  \\<lbrakk>?x \\<in> set L; ?x \\<notin> domA \\<Gamma>\\<rbrakk>\n  \\<Longrightarrow> ?x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x", "by (simp add: lookup_HSem_other)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) x \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq> (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r", "by (intro monofun_cfun_fun monofun_cfun_arg IfThenElse.hyps(5)[OF prem2])"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (if b then e\\<^sub>1\n                  else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a);\n   cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                                    : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r \\<sqsubseteq>\n                    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r", "have \"(\\<N>\\<lbrakk> (scrut ? e\\<^sub>1 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r \\<sqsubseteq> (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>r\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a);\n   cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                                    : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r \\<sqsubseteq>\n                    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n                    r\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                    : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r \\<sqsubseteq>\n    (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n    r", "by this (intro cont2cont)+"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  r\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "}"], ["proof (state)\nthis:\n  (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2 \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2\n\ngoal (4 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 4. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2 \\<sqsubseteq>\n  (\\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>)\\<cdot>\n  ?r2\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                   : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>", "by (rule cfun_belowI)"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> (scrut ? e\\<^sub>1\n                 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (3 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>\n 3. \\<And>\\<Gamma> scrut L \\<Delta> b e\\<^sub>1 e\\<^sub>2 \\<Theta> z \\<rho>.\n       \\<lbrakk>\\<Gamma> : scrut \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : Bool b;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           \\<N>\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> Bool\n                          b \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Gamma>, scrut)\n           \\<subseteq> set L \\<union> domA \\<Gamma> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA \\<Gamma> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>;\n        \\<Delta> : (if b then e\\<^sub>1\n                    else e\\<^sub>2) \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           \\<N>\\<lbrakk> (if b then e\\<^sub>1\n                          else e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta>, if b then e\\<^sub>1 else e\\<^sub>2)\n           \\<subseteq> set L \\<union> domA \\<Delta> \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|`\n           domA \\<Delta> \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Delta>;\n        fv (\\<Gamma>, scrut ? e\\<^sub>1 : e\\<^sub>2)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "show \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` (domA \\<Gamma>) \\<sqsubseteq> (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>)  f|` (domA \\<Gamma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "using IfThenElse.hyps(3)[OF prem1]\n          env_restr_below_subset[OF Gamma_subset IfThenElse.hyps(6)[OF prem2]]"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>?\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA \\<Gamma>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>3) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>?\\<rho>3) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "by (rule below_trans)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case (Let as \\<Gamma> L body \\<Delta> z)"], ["proof (state)\nthis:\n  atom ` domA as \\<sharp>* \\<Gamma>\n  atom ` domA as \\<sharp>* L\n  as @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : z\n  fv (as @ \\<Gamma>, body)\n  \\<subseteq> set L \\<union> domA (as @ \\<Gamma>) \\<Longrightarrow>\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n             \\<Gamma>\\<rbrace>?\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>\\<^esub>\n  fv (as @ \\<Gamma>, body)\n  \\<subseteq> set L \\<union> domA (as @ \\<Gamma>) \\<Longrightarrow>\n  (\\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>?\\<rho>) f|`\n  domA (as @ \\<Gamma>) \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>?\\<rho>) f|` domA (as @ \\<Gamma>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "case 1"], ["proof (state)\nthis:\n  fv (\\<Gamma>, Terms.Let as body) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have *: \"domA as \\<inter> domA \\<Gamma> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA as \\<inter> domA \\<Gamma> = {}", "by (metis Let.hyps(1) fresh_distinct)"], ["proof (state)\nthis:\n  domA as \\<inter> domA \\<Gamma> = {}\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"fv (as @ \\<Gamma>, body) - domA (as @ \\<Gamma>) \\<subseteq> fv (\\<Gamma>, Let as body) - domA \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fv (as @ \\<Gamma>, body) - domA (as @ \\<Gamma>)\n    \\<subseteq> fv (\\<Gamma>, Terms.Let as body) - domA \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  fv (as @ \\<Gamma>, body) - domA (as @ \\<Gamma>)\n  \\<subseteq> fv (\\<Gamma>, Terms.Let as body) - domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "with 1"], ["proof (chain)\npicking this:\n  fv (\\<Gamma>, Terms.Let as body) \\<subseteq> set L \\<union> domA \\<Gamma>\n  fv (as @ \\<Gamma>, body) - domA (as @ \\<Gamma>)\n  \\<subseteq> fv (\\<Gamma>, Terms.Let as body) - domA \\<Gamma>", "have prem: \"fv (as @ \\<Gamma>, body)  \\<subseteq> set L \\<union>  domA (as @ \\<Gamma>)\""], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, Terms.Let as body) \\<subseteq> set L \\<union> domA \\<Gamma>\n  fv (as @ \\<Gamma>, body) - domA (as @ \\<Gamma>)\n  \\<subseteq> fv (\\<Gamma>, Terms.Let as body) - domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. fv (as @ \\<Gamma>, body) \\<subseteq> set L \\<union> domA (as @ \\<Gamma>)", "by auto"], ["proof (state)\nthis:\n  fv (as @ \\<Gamma>, body) \\<subseteq> set L \\<union> domA (as @ \\<Gamma>)\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have f1: \"atom ` domA as \\<sharp>* \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom ` domA as \\<sharp>* \\<Gamma>", "using Let(1)"], ["proof (prove)\nusing this:\n  atom ` domA as \\<sharp>* \\<Gamma>\n\ngoal (1 subgoal):\n 1. atom ` domA as \\<sharp>* \\<Gamma>", "by (simp add: set_bn_to_atom_domA)"], ["proof (state)\nthis:\n  atom ` domA as \\<sharp>* \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<N>\\<lbrakk> Let as body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Terms.Let as\n                   body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>", "by (rule CESem_simps_no_tick)"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Terms.Let as\n                 body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Terms.Let as\n                 body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> =  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> =\n    \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n               \\<Gamma>\\<rbrace>\\<rho>\\<^esub>", "by (rule arg_cong[OF HSem_merge[OF f1]])"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> =\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n             \\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> =\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n             \\<Gamma>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> \\<sqsubseteq>  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n               \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "by (rule Let.hyps(4)[OF prem])"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>as @\n             \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> \\<N>\\<lbrakk> Terms.Let \\<Delta>\n  body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n                         \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>\n 2. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrakk> Terms.Let as\n                 body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "show ?case"], ["proof (prove)\nusing this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrakk> Terms.Let as\n                 body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> Terms.Let as\n                   body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>", "by this (intro cont2cont)+"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> Terms.Let as\n                 body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` (domA \\<Gamma>) = (\\<N>\\<lbrace>as\\<rbrace>(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)) f|` (domA \\<Gamma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> =\n    (\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n    domA \\<Gamma>", "unfolding env_restr_HSem[OF *]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> =\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", ".."], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> =\n  (\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> =\n  (\\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n  domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<N>\\<lbrace>as\\<rbrace>(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) = (\\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n    \\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>", "by (rule HSem_merge[OF f1])"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  \\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>as\\<rbrace>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho> =\n  \\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "have \"\\<dots> f|` domA \\<Gamma> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n    domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "by (rule env_restr_below_subset[OF _ Let.hyps(5)[OF prem]]) simp"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>as @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n  domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> L body \\<Theta> z \\<rho>.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* L;\n        \\<Delta> @ \\<Gamma> : body \\<Down>\\<^bsub>L\\<^esub> \\<Theta> : z;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           \\<N>\\<lbrakk> body \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta> @\n                      \\<Gamma>\\<rbrace>\\<rho>\\<^esub> \\<sqsubseteq>\n           \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>\\<^esub>;\n        \\<And>\\<rho>.\n           fv (\\<Delta> @ \\<Gamma>, body)\n           \\<subseteq> set L \\<union>\n                       domA (\\<Delta> @ \\<Gamma>) \\<Longrightarrow>\n           (\\<N>\\<lbrace>\\<Delta> @ \\<Gamma>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>) \\<sqsubseteq>\n           (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n           domA (\\<Delta> @ \\<Gamma>);\n        fv (\\<Gamma>, Terms.Let \\<Delta> body)\n        \\<subseteq> set L \\<union> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma> \\<sqsubseteq>\n                         (\\<N>\\<lbrace>\\<Theta>\\<rbrace>\\<rho>) f|`\n                         domA \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "show \"(\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\""], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>", "."], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<rho>) f|` domA \\<Gamma>\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary correctness_empty_env:\n  assumes \"\\<Gamma> : e \\<Down>\\<^bsub>L\\<^esub> \\<Delta> : z\"\n  and     \"fv (\\<Gamma>, e) \\<subseteq> set L\"\n  shows   \"\\<N>\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk>z\\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\" and \"\\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq> \\<N>\\<lbrace>\\<Delta>\\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub> &&&\n    \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "proof-"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n 2. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "from assms(2)"], ["proof (chain)\npicking this:\n  fv (\\<Gamma>, e) \\<subseteq> set L", "have \"fv (\\<Gamma>, e) \\<subseteq> set L \\<union>  domA \\<Gamma>\""], ["proof (prove)\nusing this:\n  fv (\\<Gamma>, e) \\<subseteq> set L\n\ngoal (1 subgoal):\n 1. fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>", "by auto"], ["proof (state)\nthis:\n  fv (\\<Gamma>, e) \\<subseteq> set L \\<union> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n 2. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "note corr = correctness[OF assms(1) this, where \\<rho> = \"\\<bottom>\"]"], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n 2. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "show \"\\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq> \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>", "using corr(1)"], ["proof (prove)\nusing this:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n    \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>", "."], ["proof (state)\nthis:\n  \\<N>\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Gamma>\\<rbrace>\\<^esub> \\<sqsubseteq>\n  \\<N>\\<lbrakk> z \\<rbrakk>\\<^bsub>\\<N>\\<lbrace>\\<Delta>\\<rbrace>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "have \"\\<N>\\<lbrace>\\<Gamma>\\<rbrace> = (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> =\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma>", "using env_restr_useless[OF HSem_edom_subset, where \\<rho>1 = \"\\<bottom>\"]"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>?\\<Gamma>1\\<rbrace>) f|`\n  (edom \\<bottom> \\<union> domA ?\\<Gamma>1) =\n  \\<N>\\<lbrace>?\\<Gamma>1\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> =\n    (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma>", "by simp"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace> =\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "also"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace> =\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "have \"\\<dots> \\<sqsubseteq> (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>", "using corr(2)"], ["proof (prove)\nusing this:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n    (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>", "."], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "also"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Gamma>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "have \"\\<dots> \\<sqsubseteq> \\<N>\\<lbrace>\\<Delta>\\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "by (rule env_restr_below_itself)"], ["proof (state)\nthis:\n  (\\<N>\\<lbrace>\\<Delta>\\<rbrace>) f|` domA \\<Gamma> \\<sqsubseteq>\n  \\<N>\\<lbrace>\\<Delta>\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "finally"], ["proof (chain)\npicking this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n  \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "show \"\\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq> \\<N>\\<lbrace>\\<Delta>\\<rbrace>\""], ["proof (prove)\nusing this:\n  cont (\\<lambda>a. a) \\<Longrightarrow>\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n  \\<N>\\<lbrace>\\<Delta>\\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n    \\<N>\\<lbrace>\\<Delta>\\<rbrace>", "by this (intro cont2cont)+"], ["proof (state)\nthis:\n  \\<N>\\<lbrace>\\<Gamma>\\<rbrace> \\<sqsubseteq>\n  \\<N>\\<lbrace>\\<Delta>\\<rbrace>\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}