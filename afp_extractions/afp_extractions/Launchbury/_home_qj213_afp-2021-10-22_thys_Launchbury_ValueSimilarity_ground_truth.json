{"file_name": "/home/qj213/afp-2021-10-22/thys/Launchbury/ValueSimilarity.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Launchbury", "problem_names": ["lemma counter_example:\n  assumes \"Equation (3)\": \"\\<And> n d d'. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') = \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\"\n  shows \"False\"", "lemma counter_example2:\n  assumes \"Equation (2)\": \"\\<And> n e a c. \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) = (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>c\"\n  shows \"False\"", "lemma \"Abramsky 4,3,5 (1)\":\n  \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d') = \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\"", "lemma value_CValue_cases:\n  obtains\n  \"x = \\<bottom>\" \"y = \\<bottom>\" |\n  f where \"x = Fn\\<cdot>f\" \"y = \\<bottom>\" |\n  g where \"x = \\<bottom>\" \"y = CFn\\<cdot>g\" |\n  f g where \"x = Fn\\<cdot>f\" \"y = CFn \\<cdot> g\" |\n  b\\<^sub>1 where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = \\<bottom>\" |\n  b\\<^sub>1 g where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = CFn\\<cdot>g\" |\n  b\\<^sub>1 b\\<^sub>2 where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\" |\n  f b\\<^sub>2 where \"x = Fn\\<cdot>f\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\" |\n  b\\<^sub>2 where \"x = \\<bottom>\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\"", "lemma Value_CValue_take_induct:\n  assumes \"adm (case_prod P)\"\n  assumes \"\\<And> n. P (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\"\n  shows \"P x y\"", "lemma similar'_botI[intro!,simp]: \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>\"", "lemma similar'_FnI[intro]:\n  assumes \"\\<And>x y.  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g\"", "lemma similar'_FnE[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g\"\n  assumes \"(\\<And>x y.  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> P\"\n  shows P", "lemma bot_or_not_bot':\n  \"x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y \\<Longrightarrow> (x = \\<bottom> \\<longleftrightarrow> y = \\<bottom>)\"", "lemma similar'_bot[elim_format, elim!]:\n    \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> x \\<Longrightarrow> x = \\<bottom>\"\n    \"y \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom> \\<Longrightarrow> y = \\<bottom>\"", "lemma similar'_typed[simp]:\n  \"\\<not> B\\<cdot>b \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CFn\\<cdot>g\"\n  \"\\<not> Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CB\\<cdot>b\"", "lemma similar'_bool[simp]:\n  \"B\\<cdot>b\\<^sub>1 \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CB\\<cdot>b\\<^sub>2 \\<longleftrightarrow> b\\<^sub>1 = b\\<^sub>2\"", "lemma similar'_down: \"d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"\n  and similar'_up: \"d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"", "lemma similar'_up_le: \"n \\<le> m \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"", "lemma similar'_down_le: \"n \\<le> m \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"", "lemma similar'_take: \"d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"", "lemma similar'_base_adm: \"adm (\\<lambda> x. similar'_base (fst x) (snd x))\"", "lemma similar'_step_adm:\n  assumes \"adm (\\<lambda> x. s (fst x) (snd x))\"\n  shows \"adm (\\<lambda> x. similar'_step s (fst x) (snd x))\"", "lemma similar'_adm: \"adm (\\<lambda>x. fst x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> snd x)\"", "lemma similar'_admI: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda>x. f x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g x)\"", "lemma similarI:\n  \"(\\<And> n. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y) \\<Longrightarrow> x \\<triangleleft>\\<triangleright> y\"", "lemma similarE:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y\"", "lemma similar_bot[simp]: \"\\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>\"", "lemma similar_bool[simp]: \"B\\<cdot>b \\<triangleleft>\\<triangleright> CB\\<cdot>b\"", "lemma [elim_format, elim!]: \"x \\<triangleleft>\\<triangleright> \\<bottom> \\<Longrightarrow> x = \\<bottom>\"", "lemma [elim_format, elim!]: \"x \\<triangleleft>\\<triangleright> CB\\<cdot>b \\<Longrightarrow> x = B\\<cdot>b\"", "lemma [elim_format, elim!]: \"\\<bottom> \\<triangleleft>\\<triangleright> y \\<Longrightarrow> y = \\<bottom>\"", "lemma [elim_format, elim!]: \"B\\<cdot>b \\<triangleleft>\\<triangleright> y \\<Longrightarrow> y = CB\\<cdot>b\"", "lemma take_similar'_similar:\n  assumes \"x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\"\n  shows  \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y\"", "lemma bot_or_not_bot:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> (x = \\<bottom> \\<longleftrightarrow> y = \\<bottom>)\"", "lemma bool_or_not_bool:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> (x = B\\<cdot>b) \\<longleftrightarrow> (y = CB\\<cdot>b)\"", "lemma slimilar_bot_cases[consumes 1, case_names bot bool Fn]:\n  assumes \"x \\<triangleleft>\\<triangleright> y\"\n  obtains \"x = \\<bottom>\" \"y = \\<bottom>\" |\n  b where \"x = B\\<cdot>(Discr b)\" \"y = CB\\<cdot>(Discr b)\" |\n  f g where \"x = Fn\\<cdot>f\" \"y = CFn \\<cdot> g\"", "lemma similar_adm: \"adm (\\<lambda>x. fst x \\<triangleleft>\\<triangleright> snd x)\"", "lemma similar_admI: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda>x. f x \\<triangleleft>\\<triangleright> g x)\"", "lemma similar_nice_def: \"x \\<triangleleft>\\<triangleright> y \\<longleftrightarrow> (x = \\<bottom> \\<and> y = \\<bottom> \\<or> (\\<exists> b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or> (\\<exists> f g. x = Fn\\<cdot>f \\<and> y = CFn\\<cdot>g \\<and> (\\<forall> a b. a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow> f\\<cdot>a \\<triangleleft>\\<triangleright> g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)))\"\n  (is \"?L \\<longleftrightarrow> ?R\")", "lemma similar_FnI[intro]:\n  assumes \"\\<And>x y.  x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\"", "lemma similar_FnD[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\"\n  assumes \"x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\"", "lemma similar_FnE[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\"\n  assumes \"(\\<And>x y.  x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> P\"\n  shows P", "lemma fun_similar_fmap_bottom[simp]: \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^sup>* \\<bottom>\"", "lemma fun_similarE[elim]:\n  assumes \"m \\<triangleleft>\\<triangleright>\\<^sup>* m'\"\n  assumes \"(\\<And>x. (m  x) \\<triangleleft>\\<triangleright> (m' x)\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> Q\"\n  shows Q"], "translations": [["", "lemma counter_example:\n  assumes \"Equation (3)\": \"\\<And> n d d'. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') = \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\"\n  shows \"False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. False", "define n :: nat where \"n = 1\""], ["proof (state)\nthis:\n  n = 1\n\ngoal (1 subgoal):\n 1. False", "define d where \"d = Fn\\<cdot>(\\<Lambda> e. (e \\<down>Fn \\<bottom>))\""], ["proof (state)\nthis:\n  d = Fn\\<cdot>(\\<Lambda> e. e \\<down>Fn \\<bottom>)\n\ngoal (1 subgoal):\n 1. False", "define d' where \"d' = Fn\\<cdot>(\\<Lambda> _. Fn\\<cdot>(\\<Lambda> _. \\<bottom>))\""], ["proof (state)\nthis:\n  d' = Fn\\<cdot>(\\<Lambda> uu_. Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>))\n\ngoal (1 subgoal):\n 1. False", "have \"Fn\\<cdot>(\\<Lambda> _. \\<bottom>) = \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>) =\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d')", "by (simp add: d_def d'_def n_def cfun_map_def)"], ["proof (state)\nthis:\n  Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>) =\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d')\n\ngoal (1 subgoal):\n 1. False", "also"], ["proof (state)\nthis:\n  Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>) =\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d')\n\ngoal (1 subgoal):\n 1. False", "have \"\\<dots> = \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') =\n    \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'", "using \"Equation (3)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>?n\\<^esub>\\<cdot>(?d \\<down>Fn ?d') =\n  \\<psi>\\<^sup>D\\<^bsub>Suc ?n\\<^esub>\\<cdot>?d \\<down>Fn\n  \\<psi>\\<^sup>D\\<^bsub>?n\\<^esub>\\<cdot>?d'\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') =\n    \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'", "."], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') =\n  \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\n\ngoal (1 subgoal):\n 1. False", "also"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn d') =\n  \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\n\ngoal (1 subgoal):\n 1. False", "have \"\\<dots> = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d' =\n    \\<bottom>", "by (simp add: d_def d'_def n_def)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d' =\n  \\<bottom>\n\ngoal (1 subgoal):\n 1. False", "finally"], ["proof (chain)\npicking this:\n  Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>) = \\<bottom>", "show False"], ["proof (prove)\nusing this:\n  Fn\\<cdot>(\\<Lambda> uu_. \\<bottom>) = \\<bottom>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\nFor completeness, and to avoid making false assertions, the counter-example to equation (2):\n\\<close>"], ["", "lemma counter_example2:\n  assumes \"Equation (2)\": \"\\<And> n e a c. \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) = (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>c\"\n  shows \"False\""], ["proof (prove)\ngoal (1 subgoal):\n 1. False", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. False", "define n :: nat where \"n = 1\""], ["proof (state)\nthis:\n  n = 1\n\ngoal (1 subgoal):\n 1. False", "define e where \"e = CFn\\<cdot>(\\<Lambda> e r. (e\\<cdot>r \\<down>CFn \\<bottom>)\\<cdot>r)\""], ["proof (state)\nthis:\n  e = CFn\\<cdot>(\\<Lambda> e r. (e\\<cdot>r \\<down>CFn \\<bottom>)\\<cdot>r)\n\ngoal (1 subgoal):\n 1. False", "define a :: \"C \\<rightarrow> CValue\" where \"a = (\\<Lambda> _ . CFn\\<cdot>(\\<Lambda> _ _. CFn\\<cdot>(\\<Lambda> _ _. \\<bottom>)))\""], ["proof (state)\nthis:\n  a =\n  (\\<Lambda> uu_.\n      CFn\\<cdot>\n      (\\<Lambda> uu_ uu_. CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>)))\n\ngoal (1 subgoal):\n 1. False", "fix c :: C"], ["proof (state)\ngoal (1 subgoal):\n 1. False", "have \"CFn\\<cdot>(\\<Lambda> _ _. \\<bottom>) = \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>) =\n    \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c)", "by (simp add: e_def a_def n_def cfun_map_def)"], ["proof (state)\nthis:\n  CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>) =\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c)\n\ngoal (1 subgoal):\n 1. False", "also"], ["proof (state)\nthis:\n  CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>) =\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c)\n\ngoal (1 subgoal):\n 1. False", "have \"\\<dots> = (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) =\n    (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n     \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n    c", "using \"Equation (2)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>E\\<^bsub>?n\\<^esub>\\<cdot>((?e \\<down>CFn ?a)\\<cdot>?c) =\n  (\\<psi>\\<^sup>E\\<^bsub>Suc ?n\\<^esub>\\<cdot>?e \\<down>CFn\n   \\<psi>\\<^sup>A\\<^bsub>?n\\<^esub>\\<cdot>?a)\\<cdot>\n  ?c\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) =\n    (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n     \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n    c", "."], ["proof (state)\nthis:\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) =\n  (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n   \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n  c\n\ngoal (1 subgoal):\n 1. False", "also"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>((e \\<down>CFn a)\\<cdot>c) =\n  (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n   \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n  c\n\ngoal (1 subgoal):\n 1. False", "have \"\\<dots> = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n     \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n    c =\n    \\<bottom>", "by (simp add: e_def a_def n_def)"], ["proof (state)\nthis:\n  (\\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e \\<down>CFn\n   \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>a)\\<cdot>\n  c =\n  \\<bottom>\n\ngoal (1 subgoal):\n 1. False", "finally"], ["proof (chain)\npicking this:\n  CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>) = \\<bottom>", "show False"], ["proof (prove)\nusing this:\n  CFn\\<cdot>(\\<Lambda> uu_ uu_. \\<bottom>) = \\<bottom>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>A suitable substitute for the lemma can be found in 4.3.5 (1) in \\cite{fullabstraction},\nwhich in our setting becomes the following (note the extra invocation of @{term \"Value_take n\"} on\nthe left hand side):\n\\<close>"], ["", "lemma \"Abramsky 4,3,5 (1)\":\n  \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d') = \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (d \\<down>Fn \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d') =\n    \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>d \\<down>Fn\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d'", "by (cases d) (auto simp add: Value.take_take)"], ["", "text \\<open>\nThe problematic equations are used in the proof of the only-if direction of proposition 9 in\n\\cite{functionspaces}. It can be fixed by applying take-induction, which inserts the\nextra call to @{term \"Value_take n\"} in the right spot.\n\\<close>"], ["", "subsubsection \\<open>Working with @{typ Value} and @{typ CValue}\\<close>"], ["", "text \\<open>Combined case distinguishing and induction rules.\\<close>"], ["", "lemma value_CValue_cases:\n  obtains\n  \"x = \\<bottom>\" \"y = \\<bottom>\" |\n  f where \"x = Fn\\<cdot>f\" \"y = \\<bottom>\" |\n  g where \"x = \\<bottom>\" \"y = CFn\\<cdot>g\" |\n  f g where \"x = Fn\\<cdot>f\" \"y = CFn \\<cdot> g\" |\n  b\\<^sub>1 where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = \\<bottom>\" |\n  b\\<^sub>1 g where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = CFn\\<cdot>g\" |\n  b\\<^sub>1 b\\<^sub>2 where \"x = B\\<cdot>(Discr b\\<^sub>1)\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\" |\n  f b\\<^sub>2 where \"x = Fn\\<cdot>f\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\" |\n  b\\<^sub>2 where \"x = \\<bottom>\" \"y = CB\\<cdot>(Discr b\\<^sub>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>x = \\<bottom>; y = \\<bottom>\\<rbrakk>\n             \\<Longrightarrow> thesis;\n     \\<And>f.\n        \\<lbrakk>x = Fn\\<cdot>f; y = \\<bottom>\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>g.\n        \\<lbrakk>x = \\<bottom>; y = CFn\\<cdot>g\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>f g.\n        \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>b\\<^sub>1.\n        \\<lbrakk>x = B\\<cdot>(Discr b\\<^sub>1); y = \\<bottom>\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>b\\<^sub>1 g.\n        \\<lbrakk>x = B\\<cdot>(Discr b\\<^sub>1); y = CFn\\<cdot>g\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>b\\<^sub>1 b\\<^sub>2.\n        \\<lbrakk>x = B\\<cdot>(Discr b\\<^sub>1);\n         y = CB\\<cdot>(Discr b\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>f b\\<^sub>2.\n        \\<lbrakk>x = Fn\\<cdot>f; y = CB\\<cdot>(Discr b\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>b\\<^sub>2.\n        \\<lbrakk>x = \\<bottom>; y = CB\\<cdot>(Discr b\\<^sub>2)\\<rbrakk>\n        \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by (metis CValue.exhaust Discr_undiscr Value.exhaust)"], ["", "lemma Value_CValue_take_induct:\n  assumes \"adm (case_prod P)\"\n  assumes \"\\<And> n. P (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\"\n  shows \"P x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P x y", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. P x y", "have \"case_prod P (\\<Squnion>n. (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x, \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. case \\<Squnion>n.\n            (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x,\n             \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y) of\n    (x, xa) \\<Rightarrow> P x xa", "by (rule admD[OF \\<open>adm (case_prod P)\\<close> ch2ch_Pair[OF ch2ch_Rep_cfunL[OF Value.chain_take] ch2ch_Rep_cfunL[OF C_to_CValue_chain_take]]])\n       (simp add: assms(2))"], ["proof (state)\nthis:\n  case \\<Squnion>n.\n          (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x,\n           \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y) of\n  (x, xa) \\<Rightarrow> P x xa\n\ngoal (1 subgoal):\n 1. P x y", "hence \"case_prod P (x,y)\""], ["proof (prove)\nusing this:\n  case \\<Squnion>n.\n          (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x,\n           \\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y) of\n  (x, xa) \\<Rightarrow> P x xa\n\ngoal (1 subgoal):\n 1. case (x, y) of (x, xa) \\<Rightarrow> P x xa", "by (simp add: lub_Pair[OF ch2ch_Rep_cfunL[OF Value.chain_take] ch2ch_Rep_cfunL[OF C_to_CValue_chain_take]]\n                  Value.reach C_to_CValue_reach)"], ["proof (state)\nthis:\n  case (x, y) of (x, xa) \\<Rightarrow> P x xa\n\ngoal (1 subgoal):\n 1. P x y", "thus ?thesis"], ["proof (prove)\nusing this:\n  case (x, y) of (x, xa) \\<Rightarrow> P x xa\n\ngoal (1 subgoal):\n 1. P x y", "by simp"], ["proof (state)\nthis:\n  P x y\n\ngoal:\nNo subgoals!", "qed"], ["", "subsubsection \\<open>Restricted similarity is defined recursively\\<close>"], ["", "text \\<open>The base case\\<close>"], ["", "inductive similar'_base :: \"Value \\<Rightarrow> CValue \\<Rightarrow> bool\" where\n  bot_similar'_base[simp,intro]: \"similar'_base \\<bottom> \\<bottom>\""], ["", "inductive_cases [elim!]:\n   \"similar'_base x y\""], ["", "text \\<open>The inductive case\\<close>"], ["", "inductive similar'_step :: \"(Value \\<Rightarrow> CValue \\<Rightarrow> bool) \\<Rightarrow> Value \\<Rightarrow> CValue \\<Rightarrow> bool\" for s where\n  bot_similar'_step[intro!]: \"similar'_step s \\<bottom> \\<bottom>\" |\n  bool_similar'_step[intro]: \"similar'_step s (B\\<cdot>b) (CB\\<cdot>b)\" |\n  Fun_similar'_step[intro]: \"(\\<And> x y . s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> s (f\\<cdot>x) (g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow> similar'_step s (Fn\\<cdot>f) (CFn\\<cdot>g)\""], ["", "inductive_cases [elim!]:\n   \"similar'_step s x \\<bottom>\"\n   \"similar'_step s \\<bottom> y\"\n   \"similar'_step s (B\\<cdot>f) (CB\\<cdot>g)\"\n   \"similar'_step s (Fn\\<cdot>f) (CFn\\<cdot>g)\""], ["", "text \\<open>\nWe now create the restricted similarity relation, by primitive recursion over @{term n}.\n\nThis cannot be done using an inductive definition, as it would not be monotone.\n\\<close>"], ["", "fun similar' where\n \"similar' 0 = similar'_base\" |\n \"similar' (Suc n) = similar'_step (similar' n)\""], ["", "declare similar'.simps[simp del]"], ["", "abbreviation similar'_syn  (\"_ \\<triangleleft>\\<triangleright>\\<^bsub>_\\<^esub> _\" [50,50,50] 50)\n  where \"similar'_syn x n y \\<equiv> similar' n x y\""], ["", "lemma similar'_botI[intro!,simp]: \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>", "by (cases n) (auto simp add: similar'.simps)"], ["", "lemma similar'_FnI[intro]:\n  assumes \"\\<And>x y.  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fn\\<cdot>\n    f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g", "using assms"], ["proof (prove)\nusing this:\n  ?x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?y\\<cdot>\n                C\\<^sup>\\<infinity> \\<Longrightarrow>\n  f\\<cdot>\n  ?x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>?y\\<cdot>\n                C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. Fn\\<cdot>\n    f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g", "by (auto simp add: similar'.simps)"], ["", "lemma similar'_FnE[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g\"\n  assumes \"(\\<And>x y.  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "using assms"], ["proof (prove)\nusing this:\n  Fn\\<cdot>\n  f \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CFn\\<cdot>g\n  (\\<And>x y.\n      x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>\n                   C\\<^sup>\\<infinity> \\<Longrightarrow>\n      f\\<cdot>\n      x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\\<cdot>y\\<cdot>\n                   C\\<^sup>\\<infinity>) \\<Longrightarrow>\n  P\n\ngoal (1 subgoal):\n 1. P", "by (auto simp add: similar'.simps)"], ["", "lemma bot_or_not_bot':\n  \"x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y \\<Longrightarrow> (x = \\<bottom> \\<longleftrightarrow> y = \\<bottom>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y \\<Longrightarrow>\n    (x = \\<bottom>) = (y = \\<bottom>)", "by (cases n) (auto simp add: similar'.simps elim: similar'_base.cases similar'_step.cases)"], ["", "lemma similar'_bot[elim_format, elim!]:\n    \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> x \\<Longrightarrow> x = \\<bottom>\"\n    \"y \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom> \\<Longrightarrow> y = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> x \\<Longrightarrow>\n     x = \\<bottom>) &&&\n    (y \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom> \\<Longrightarrow>\n     y = \\<bottom>)", "by (metis bot_or_not_bot')+"], ["", "lemma similar'_typed[simp]:\n  \"\\<not> B\\<cdot>b \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CFn\\<cdot>g\"\n  \"\\<not> Fn\\<cdot>f \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CB\\<cdot>b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> B\\<cdot>\n           b \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CFn\\<cdot>\n                        g &&&\n    \\<not> Fn\\<cdot>\n           f \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> CB\\<cdot>b", "by (cases n, auto simp add: similar'.simps elim: similar'_base.cases similar'_step.cases)+"], ["", "lemma similar'_bool[simp]:\n  \"B\\<cdot>b\\<^sub>1 \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> CB\\<cdot>b\\<^sub>2 \\<longleftrightarrow> b\\<^sub>1 = b\\<^sub>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (B\\<cdot>\n     b\\<^sub>1 \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                 n\\<^esub> CB\\<cdot>b\\<^sub>2) =\n    (b\\<^sub>1 = b\\<^sub>2)", "by (auto simp add: similar'.simps elim: similar'_base.cases similar'_step.cases)"], ["", "subsubsection \\<open>Moving up and down the similarity relations\\<close>"], ["", "text \\<open>\nThese correspond to Lemma 7 in |cite{functionspaces}.\n\\<close>"], ["", "lemma similar'_down: \"d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\"\n  and similar'_up: \"d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n         n\\<^esub> e \\<Longrightarrow>\n     \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                  e) &&&\n    (d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n     \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n         n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e)", "proof (induction n arbitrary: d e)"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n            (Suc n)\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                        n\\<^esub>\\<cdot>\n e\n 4. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "case (Suc n)"], ["proof (state)\nthis:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n\ngoal (4 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n            (Suc n)\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                        n\\<^esub>\\<cdot>\n e\n 4. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "case 1"], ["proof (state)\nthis:\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc (Suc n)\\<^esub> e\n\ngoal (4 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n            (Suc n)\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                        n\\<^esub>\\<cdot>\n e\n 4. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "with  Suc"], ["proof (chain)\npicking this:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc (Suc n)\\<^esub> e", "show ?case"], ["proof (prove)\nusing this:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc (Suc n)\\<^esub> e\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e", "by (cases d e rule:value_CValue_cases) auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n      n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e\n\ngoal (3 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "case (Suc n)"], ["proof (state)\nthis:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n\ngoal (3 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "case 2"], ["proof (state)\nthis:\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\n\ngoal (3 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e\n 3. \\<And>n d e.\n       \\<lbrakk>\\<And>d e.\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                       n\\<^esub> e \\<Longrightarrow>\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                e;\n        \\<And>d e.\n           d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n           \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n           d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n               n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e;\n        d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\\<rbrakk>\n       \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n                         d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n                             (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc\n                              n\\<^esub>\\<cdot>\n       e", "with Suc"], ["proof (chain)\npicking this:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e", "show ?case"], ["proof (prove)\nusing this:\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                ?e\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?e \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  ?d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n       n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>?e\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc n\\<^esub> e\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e", "by (cases d e rule:value_CValue_cases) auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>Suc n\\<^esub>\\<cdot>\n  d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n      (Suc n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc n\\<^esub>\\<cdot>e\n\ngoal (2 subgoals):\n 1. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>\n                    e\n 2. \\<And>d e.\n       d \\<triangleleft>\\<triangleright>\\<^bsub>0\\<^esub> e \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>0\\<^esub>\\<cdot>\n       d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n           0\\<^esub> \\<psi>\\<^sup>E\\<^bsub>0\\<^esub>\\<cdot>e", "qed auto"], ["", "text \\<open>\nA generalisation of the above, doing multiple steps at once.\n\\<close>"], ["", "lemma similar'_up_le: \"n \\<le> m \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<le> m;\n     \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                  e\\<rbrakk>\n    \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                      d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                   e", "by (induction rule: dec_induct )\n     (auto dest: similar'_up simp add: Value.take_take CValue.take_take min_absorb2)"], ["", "lemma similar'_down_le: \"n \\<le> m \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>n \\<le> m;\n     \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n     d \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                  e\\<rbrakk>\n    \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                      d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                   e", "by (induction rule: inc_induct )\n     (auto dest: similar'_down simp add: Value.take_take CValue.take_take min_absorb1)"], ["", "lemma similar'_take: \"d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> e \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 e", "apply (drule similar'_up)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>e \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 e", "apply (drule similar'_down)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     d) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                    e) \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    d \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 e", "apply (simp add: Value.take_take CValue.take_take)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "subsubsection \\<open>Admissibility\\<close>"], ["", "text \\<open>\nA technical prerequisite for induction is admissibility of the predicate, i.e.\\ that the predicate\nholds for the limit of a chain, given that it holds for all elements.\n\\<close>"], ["", "lemma similar'_base_adm: \"adm (\\<lambda> x. similar'_base (fst x) (snd x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. similar'_base (fst x) (snd x))", "proof (rule admI, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_base (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "case (1 Y)"], ["proof (state)\nthis:\n  chain Y\n  \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))\n\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_base (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "then"], ["proof (chain)\npicking this:\n  chain Y\n  \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))", "have \"Y = (\\<lambda> _ . \\<bottom>)\""], ["proof (prove)\nusing this:\n  chain Y\n  \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))\n\ngoal (1 subgoal):\n 1. Y = (\\<lambda>_. \\<bottom>)", "by (metis prod.exhaust fst_eqD inst_prod_pcpo similar'_base.simps snd_eqD)"], ["proof (state)\nthis:\n  Y = (\\<lambda>_. \\<bottom>)\n\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_base (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_base (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "thus ?case"], ["proof (prove)\nusing this:\n  Y = (\\<lambda>_. \\<bottom>)\n\ngoal (1 subgoal):\n 1. similar'_base (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))", "by auto"], ["proof (state)\nthis:\n  similar'_base (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma similar'_step_adm:\n  assumes \"adm (\\<lambda> x. s (fst x) (snd x))\"\n  shows \"adm (\\<lambda> x. similar'_step s (fst x) (snd x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. similar'_step s (fst x) (snd x))", "proof (rule admI, goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "case prems: (1 Y)"], ["proof (state)\nthis:\n  chain Y\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "from \\<open>chain Y\\<close>"], ["proof (chain)\npicking this:\n  chain Y", "have \"chain (\\<lambda> i. fst (Y i))\""], ["proof (prove)\nusing this:\n  chain Y\n\ngoal (1 subgoal):\n 1. chain (\\<lambda>i. fst (Y i))", "by (rule ch2ch_fst)"], ["proof (state)\nthis:\n  chain (\\<lambda>i. fst (Y i))\n\ngoal (1 subgoal):\n 1. \\<And>Y.\n       \\<lbrakk>chain Y;\n        \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "thus ?case"], ["proof (prove)\nusing this:\n  chain (\\<lambda>i. fst (Y i))\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))", "proof(cases rule: Value_chainE)"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>) \\<Longrightarrow>\n    similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 3. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "case bot"], ["proof (state)\nthis:\n  (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>)\n\ngoal (3 subgoals):\n 1. (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>) \\<Longrightarrow>\n    similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 3. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence *: \"\\<And> i. fst (Y i) = \\<bottom>\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>)\n\ngoal (1 subgoal):\n 1. \\<And>i. fst (Y i) = \\<bottom>", "by metis"], ["proof (state)\nthis:\n  fst (Y ?i) = \\<bottom>\n\ngoal (3 subgoals):\n 1. (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>) \\<Longrightarrow>\n    similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 3. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "with prems(2)[unfolded split_beta]"], ["proof (chain)\npicking this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y ?i) = \\<bottom>", "have \"\\<And>i. snd (Y i) = \\<bottom>\""], ["proof (prove)\nusing this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y ?i) = \\<bottom>\n\ngoal (1 subgoal):\n 1. \\<And>i. snd (Y i) = \\<bottom>", "by auto"], ["proof (state)\nthis:\n  snd (Y ?i) = \\<bottom>\n\ngoal (3 subgoals):\n 1. (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>) \\<Longrightarrow>\n    similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 3. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence \"Y = (\\<lambda> i. (\\<bottom>, \\<bottom>))\""], ["proof (prove)\nusing this:\n  snd (Y ?i) = \\<bottom>\n\ngoal (1 subgoal):\n 1. Y = (\\<lambda>i. (\\<bottom>, \\<bottom>))", "using *"], ["proof (prove)\nusing this:\n  snd (Y ?i) = \\<bottom>\n  fst (Y ?i) = \\<bottom>\n\ngoal (1 subgoal):\n 1. Y = (\\<lambda>i. (\\<bottom>, \\<bottom>))", "by (metis surjective_pairing)"], ["proof (state)\nthis:\n  Y = (\\<lambda>i. (\\<bottom>, \\<bottom>))\n\ngoal (3 subgoals):\n 1. (\\<lambda>i. fst (Y i)) = (\\<lambda>_. \\<bottom>) \\<Longrightarrow>\n    similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 3. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "thus ?thesis"], ["proof (prove)\nusing this:\n  Y = (\\<lambda>i. (\\<bottom>, \\<bottom>))\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))", "by auto"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "case (B n b)"], ["proof (state)\nthis:\n  (\\<lambda>i. fst (Y i)) =\n  (\\<lambda>m. if m < n then \\<bottom> else B\\<cdot>b)\n\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence \"\\<forall>i. fst (Y (i + n)) = B\\<cdot>b\""], ["proof (prove)\nusing this:\n  (\\<lambda>i. fst (Y i)) =\n  (\\<lambda>m. if m < n then \\<bottom> else B\\<cdot>b)\n\ngoal (1 subgoal):\n 1. \\<forall>i. fst (Y (i + n)) = B\\<cdot>b", "by (metis add.commute not_add_less1)"], ["proof (state)\nthis:\n  \\<forall>i. fst (Y (i + n)) = B\\<cdot>b\n\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "with prems(2)"], ["proof (chain)\npicking this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  \\<forall>i. fst (Y (i + n)) = B\\<cdot>b", "have \"\\<forall>i. Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)\""], ["proof (prove)\nusing this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  \\<forall>i. fst (Y (i + n)) = B\\<cdot>b\n\ngoal (1 subgoal):\n 1. \\<forall>i. Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>\\<forall>i. similar'_step s (fst (Y i)) (snd (Y i));\n        \\<forall>i. fst (Y (i + n)) = B\\<cdot>b\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "apply (erule_tac x = \"i + n\" in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>\\<forall>i. fst (Y (i + n)) = B\\<cdot>b;\n        similar'_step s (fst (Y (i + n))) (snd (Y (i + n)))\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "apply (erule_tac x = \"i\" in allE)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>similar'_step s (fst (Y (i + n))) (snd (Y (i + n)));\n        fst (Y (i + n)) = B\\<cdot>b\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "apply (erule similar'_step.cases)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>i.\n       \\<lbrakk>fst (Y (i + n)) = B\\<cdot>b; fst (Y (i + n)) = \\<bottom>;\n        snd (Y (i + n)) = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)\n 2. \\<And>i ba.\n       \\<lbrakk>fst (Y (i + n)) = B\\<cdot>b; fst (Y (i + n)) = B\\<cdot>ba;\n        snd (Y (i + n)) = CB\\<cdot>ba\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)\n 3. \\<And>i f g.\n       \\<lbrakk>fst (Y (i + n)) = B\\<cdot>b; fst (Y (i + n)) = Fn\\<cdot>f;\n        snd (Y (i + n)) = CFn\\<cdot>g;\n        \\<And>x y.\n           s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n           s (f\\<cdot>x) (g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>fst (Y (i + n)) = B\\<cdot>b;\n        snd (Y (i + n)) = CB\\<cdot>b\\<rbrakk>\n       \\<Longrightarrow> Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)", "by (metis fst_conv old.prod.exhaust snd_conv)"], ["proof (state)\nthis:\n  \\<forall>i. Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)\n\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence \"similar'_step s (fst (\\<Squnion> i. Y (i + n))) (snd (\\<Squnion> i. Y (i + n)))\""], ["proof (prove)\nusing this:\n  \\<forall>i. Y (i + n) = (B\\<cdot>b, CB\\<cdot>b)\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n     (snd (\\<Squnion>i. Y (i + n)))", "by auto"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n   (snd (\\<Squnion>i. Y (i + n)))\n\ngoal (2 subgoals):\n 1. \\<And>n b.\n       (\\<lambda>i. fst (Y i)) =\n       (\\<lambda>m.\n           if m < n then \\<bottom> else B\\<cdot>b) \\<Longrightarrow>\n       similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n 2. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "thus ?thesis"], ["proof (prove)\nusing this:\n  similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n   (snd (\\<Squnion>i. Y (i + n)))\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))", "by (simp add: lub_range_shift[OF \\<open>chain Y\\<close>])"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "fix Y'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "assume \"chain Y'\" and \"(\\<lambda>i. fst (Y i)) = (\\<lambda> m. (if m < n then \\<bottom> else Fn\\<cdot>(Y' (m-n))))\""], ["proof (state)\nthis:\n  chain Y'\n  (\\<lambda>i. fst (Y i)) =\n  (\\<lambda>m. if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)))\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence Y': \"\\<And> i. fst (Y (i+n)) = Fn\\<cdot>(Y' i)\""], ["proof (prove)\nusing this:\n  chain Y'\n  (\\<lambda>i. fst (Y i)) =\n  (\\<lambda>m. if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)))\n\ngoal (1 subgoal):\n 1. \\<And>i. fst (Y (i + n)) = Fn\\<cdot>(Y' i)", "by (metis add_diff_cancel_right' not_add_less2)"], ["proof (state)\nthis:\n  fst (Y (?i + n)) = Fn\\<cdot>(Y' ?i)\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "with prems(2)[unfolded split_beta]"], ["proof (chain)\npicking this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y (?i + n)) = Fn\\<cdot>(Y' ?i)", "have \"\\<And>i. \\<exists> g'. snd (Y (i+n)) = CFn\\<cdot>g'\""], ["proof (prove)\nusing this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y (?i + n)) = Fn\\<cdot>(Y' ?i)\n\ngoal (1 subgoal):\n 1. \\<And>i. \\<exists>g'. snd (Y (i + n)) = CFn\\<cdot>g'", "by -(erule_tac x = \"i + n\" in allE, auto elim!: similar'_step.cases)"], ["proof (state)\nthis:\n  \\<exists>g'. snd (Y (?i + n)) = CFn\\<cdot>g'\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "then"], ["proof (chain)\npicking this:\n  \\<exists>g'. snd (Y (?i + n)) = CFn\\<cdot>g'", "obtain Y'' where Y'': \"\\<And> i. snd (Y (i+n)) = CFn\\<cdot>(Y'' i)\""], ["proof (prove)\nusing this:\n  \\<exists>g'. snd (Y (?i + n)) = CFn\\<cdot>g'\n\ngoal (1 subgoal):\n 1. (\\<And>Y''.\n        (\\<And>i. snd (Y (i + n)) = CFn\\<cdot>(Y'' i)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  snd (Y (?i + n)) = CFn\\<cdot>(Y'' ?i)\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "from prems(1)"], ["proof (chain)\npicking this:\n  chain Y", "have \"\\<And>i. Y i \\<sqsubseteq> Y (Suc i)\""], ["proof (prove)\nusing this:\n  chain Y\n\ngoal (1 subgoal):\n 1. \\<And>i. Y i \\<sqsubseteq> Y (Suc i)", "by (simp add: po_class.chain_def)"], ["proof (state)\nthis:\n  Y ?i \\<sqsubseteq> Y (Suc ?i)\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "then"], ["proof (chain)\npicking this:\n  Y ?i \\<sqsubseteq> Y (Suc ?i)", "have *: \"\\<And>i. Y (i + n) \\<sqsubseteq> Y (Suc i + n)\""], ["proof (prove)\nusing this:\n  Y ?i \\<sqsubseteq> Y (Suc ?i)\n\ngoal (1 subgoal):\n 1. \\<And>i. Y (i + n) \\<sqsubseteq> Y (Suc i + n)", "by simp"], ["proof (state)\nthis:\n  Y (?i + n) \\<sqsubseteq> Y (Suc ?i + n)\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "have \"chain Y''\""], ["proof (prove)\ngoal (1 subgoal):\n 1. chain Y''", "apply (rule chainI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. Y'' i \\<sqsubseteq> Y'' (Suc i)", "apply (rule iffD1[OF CValue.inverts(1)])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. CFn\\<cdot>(Y'' i) \\<sqsubseteq> CFn\\<cdot>(Y'' (Suc i))", "apply (subst (1 2) Y''[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. snd (Y (i + n)) \\<sqsubseteq> snd (Y (Suc i + n))", "apply (rule snd_monofun)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. Y (i + n) \\<sqsubseteq> Y (Suc i + n)", "apply (rule *)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  chain Y''\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "have \"similar'_step s (Fn\\<cdot>(\\<Squnion> i. (Y' i))) (CFn \\<cdot> (\\<Squnion> i. Y'' i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. similar'_step s (Fn\\<cdot>(\\<Squnion>i. Y' i))\n     (CFn\\<cdot>(\\<Squnion>i. Y'' i))", "proof (rule Fun_similar'_step)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "from prems(2) Y' Y''"], ["proof (chain)\npicking this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y (?i + n)) = Fn\\<cdot>(Y' ?i)\n  snd (Y (?i + n)) = CFn\\<cdot>(Y'' ?i)", "have \"\\<And>i. similar'_step s (Fn\\<cdot>(Y' i)) (CFn\\<cdot>(Y'' i))\""], ["proof (prove)\nusing this:\n  \\<forall>i. similar'_step s (fst (Y i)) (snd (Y i))\n  fst (Y (?i + n)) = Fn\\<cdot>(Y' ?i)\n  snd (Y (?i + n)) = CFn\\<cdot>(Y'' ?i)\n\ngoal (1 subgoal):\n 1. \\<And>i. similar'_step s (Fn\\<cdot>(Y' i)) (CFn\\<cdot>(Y'' i))", "by metis"], ["proof (state)\nthis:\n  similar'_step s (Fn\\<cdot>(Y' ?i)) (CFn\\<cdot>(Y'' ?i))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "moreover"], ["proof (state)\nthis:\n  similar'_step s (Fn\\<cdot>(Y' ?i)) (CFn\\<cdot>(Y'' ?i))\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "assume \"s x (y\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (state)\nthis:\n  s x (y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "ultimately"], ["proof (chain)\npicking this:\n  similar'_step s (Fn\\<cdot>(Y' ?i)) (CFn\\<cdot>(Y'' ?i))\n  s x (y\\<cdot>C\\<^sup>\\<infinity>)", "have \"\\<And>i. s (Y' i\\<cdot>x) (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  similar'_step s (Fn\\<cdot>(Y' ?i)) (CFn\\<cdot>(Y'' ?i))\n  s x (y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>i. s (Y' i\\<cdot>x) (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "by auto"], ["proof (state)\nthis:\n  s (Y' ?i\\<cdot>x) (Y'' ?i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "hence \"case_prod s (\\<Squnion> i. ((Y' i)\\<cdot>x, (Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>))\""], ["proof (prove)\nusing this:\n  s (Y' ?i\\<cdot>x) (Y'' ?i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. case \\<Squnion>i.\n            (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n    (x, xa) \\<Rightarrow> s x xa", "apply -"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        s (Y' i\\<cdot>x)\n         (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    case \\<Squnion>i.\n            (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n    (x, xa) \\<Rightarrow> s x xa", "apply (rule admD[OF adm_case_prod[where P = \"\\<lambda>_ . s\", OF assms]])"], ["proof (prove)\ngoal (2 subgoals):\n 1. (\\<And>i.\n        s (Y' i\\<cdot>x)\n         (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    chain\n     (\\<lambda>i. (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>i.\n       (\\<And>i.\n           s (Y' i\\<cdot>x)\n            (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n       case (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n       (a, b) \\<Rightarrow> s a b", "apply (simp add:  \\<open>chain Y'\\<close>  \\<open>chain Y''\\<close>)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       (\\<And>i.\n           s (Y' i\\<cdot>x)\n            (Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n       case (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n       (a, b) \\<Rightarrow> s a b", "apply simp"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  case \\<Squnion>i.\n          (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n  (x, xa) \\<Rightarrow> s x xa\n\ngoal (1 subgoal):\n 1. \\<And>x y.\n       s x (y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n       s ((\\<Squnion>i. Y' i)\\<cdot>x)\n        ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "thus \"s ((\\<Squnion> i. Y' i)\\<cdot>x) ((\\<Squnion> i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  case \\<Squnion>i.\n          (Y' i\\<cdot>x, Y'' i\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) of\n  (x, xa) \\<Rightarrow> s x xa\n\ngoal (1 subgoal):\n 1. s ((\\<Squnion>i. Y' i)\\<cdot>x)\n     ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)", "by (simp add: lub_Pair  ch2ch_Rep_cfunL contlub_cfun_fun  \\<open>chain Y'\\<close>  \\<open>chain Y''\\<close>)"], ["proof (state)\nthis:\n  s ((\\<Squnion>i. Y' i)\\<cdot>x)\n   ((\\<Squnion>i. Y'' i)\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  similar'_step s (Fn\\<cdot>(\\<Squnion>i. Y' i))\n   (CFn\\<cdot>(\\<Squnion>i. Y'' i))\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "hence \"similar'_step s (fst (\\<Squnion> i. Y (i+n))) (snd (\\<Squnion> i. Y (i+n)))\""], ["proof (prove)\nusing this:\n  similar'_step s (Fn\\<cdot>(\\<Squnion>i. Y' i))\n   (CFn\\<cdot>(\\<Squnion>i. Y'' i))\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n     (snd (\\<Squnion>i. Y (i + n)))", "by (simp add: Y' Y''\n          cont2contlubE[OF cont_fst chain_shift[OF prems(1)]]  cont2contlubE[OF cont_snd chain_shift[OF prems(1)]]\n           contlub_cfun_arg[OF \\<open>chain Y''\\<close>] contlub_cfun_arg[OF \\<open>chain Y'\\<close>])"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n   (snd (\\<Squnion>i. Y (i + n)))\n\ngoal (1 subgoal):\n 1. \\<And>n Y'.\n       \\<lbrakk>(\\<lambda>i. fst (Y i)) =\n                (\\<lambda>m.\n                    if m < n then \\<bottom> else Fn\\<cdot>(Y' (m - n)));\n        chain Y'\\<rbrakk>\n       \\<Longrightarrow> similar'_step s (fst (\\<Squnion>i. Y i))\n                          (snd (\\<Squnion>i. Y i))", "thus \"similar'_step s (fst (\\<Squnion> i. Y i)) (snd (\\<Squnion> i. Y i))\""], ["proof (prove)\nusing this:\n  similar'_step s (fst (\\<Squnion>i. Y (i + n)))\n   (snd (\\<Squnion>i. Y (i + n)))\n\ngoal (1 subgoal):\n 1. similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))", "by (simp add: lub_range_shift[OF \\<open>chain Y\\<close>])"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  similar'_step s (fst (\\<Squnion>i. Y i)) (snd (\\<Squnion>i. Y i))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma similar'_adm: \"adm (\\<lambda>x. fst x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> snd x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x.\n            fst x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> snd x)", "by (induct n) (auto simp add: similar'.simps intro: similar'_base_adm similar'_step_adm)"], ["", "lemma similar'_admI: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda>x. f x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>cont f; cont g\\<rbrakk>\n    \\<Longrightarrow> adm (\\<lambda>x.\n                              f x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> g\n        x)", "by (rule adm_subst[OF _ similar'_adm, where t = \"\\<lambda>x. (f x, g x)\", simplified]) auto"], ["", "subsubsection \\<open>The real similarity relation\\<close>"], ["", "text \\<open>\nThis is the goal of the theory: A relation between @{typ Value} and @{typ CValue}.\n\\<close>"], ["", "definition similar :: \"Value \\<Rightarrow> CValue \\<Rightarrow> bool\" (infix \"\\<triangleleft>\\<triangleright>\" 50) where\n  \"x \\<triangleleft>\\<triangleright> y \\<longleftrightarrow> (\\<forall>n. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)\""], ["", "lemma similarI:\n  \"(\\<And> n. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y) \\<Longrightarrow> x \\<triangleleft>\\<triangleright> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                     y) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>n.\n        \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                     y) \\<Longrightarrow>\n    \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                    y", "by blast"], ["", "lemma similarE:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 y", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                    y \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 y", "by blast"], ["", "lemma similar_bot[simp]: \"\\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>", "by (auto intro: similarI)"], ["", "lemma similar_bool[simp]: \"B\\<cdot>b \\<triangleleft>\\<triangleright> CB\\<cdot>b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B\\<cdot>b \\<triangleleft>\\<triangleright> CB\\<cdot>b", "by (rule similarI, case_tac n, auto)"], ["", "lemma [elim_format, elim!]: \"x \\<triangleleft>\\<triangleright> \\<bottom> \\<Longrightarrow> x = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> \\<bottom> \\<Longrightarrow>\n    x = \\<bottom>", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                    \\<bottom> \\<Longrightarrow>\n    x = \\<bottom>", "apply (cases x)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                             \\<bottom>;\n     x = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> x = \\<bottom>\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                \\<bottom>;\n        x = Fn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom>\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                \\<bottom>;\n        x = B\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom>", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (Fn\\<cdot>\n                    cfun) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>;\n        x = Fn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    discr) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>;\n        x = B\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> False", "apply (erule_tac x = \"Suc 0\" in allE, auto)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [elim_format, elim!]: \"x \\<triangleleft>\\<triangleright> CB\\<cdot>b \\<Longrightarrow> x = B\\<cdot>b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> CB\\<cdot>b \\<Longrightarrow>\n    x = B\\<cdot>b", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                    (CB\\<cdot>b) \\<Longrightarrow>\n    x = B\\<cdot>b", "apply (cases x)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                             (CB\\<cdot>b);\n     x = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> x = B\\<cdot>b\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                (CB\\<cdot>b);\n        x = Fn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> x = B\\<cdot>b\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                (CB\\<cdot>b);\n        x = B\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> x = B\\<cdot>b", "apply auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                     (CB\\<cdot>b);\n     x = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (Fn\\<cdot>\n                    cfun) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                     (CB\\<cdot>b);\n        x = Fn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    discr) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n(CB\\<cdot>b);\n        x = B\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> discr = b", "apply (erule_tac x = \"Suc 0\" in allE, auto)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [elim_format, elim!]: \"\\<bottom> \\<triangleleft>\\<triangleright> y \\<Longrightarrow> y = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    y = \\<bottom>", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                            y \\<Longrightarrow>\n    y = \\<bottom>", "apply (cases y)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                     y;\n     y = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> y = \\<bottom>\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n  y;\n        y = CFn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> y = \\<bottom>\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n  y;\n        y = CB\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> y = \\<bottom>", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n  (CFn\\<cdot>cfun);\n        y = CFn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<bottom> \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n  (CB\\<cdot>discr);\n        y = CB\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> False", "apply (erule_tac x = \"Suc 0\" in allE, auto)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma [elim_format, elim!]: \"B\\<cdot>b \\<triangleleft>\\<triangleright> y \\<Longrightarrow> y = CB\\<cdot>b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B\\<cdot>b \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    y = CB\\<cdot>b", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (B\\<cdot>\n        b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      y \\<Longrightarrow>\n    y = CB\\<cdot>b", "apply (cases y)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                (B\\<cdot>\n                 b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                               y;\n     y = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> y = CB\\<cdot>b\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                  y;\n        y = CFn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> y = CB\\<cdot>b\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                  y;\n        y = CB\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> y = CB\\<cdot>b", "apply auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>\\<forall>n.\n                \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                (B\\<cdot>\n                 b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<bottom>;\n     y = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<And>cfun.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                  (CFn\\<cdot>cfun);\n        y = CFn\\<cdot>cfun\\<rbrakk>\n       \\<Longrightarrow> False\n 3. \\<And>discr.\n       \\<lbrakk>\\<forall>n.\n                   \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n                   (B\\<cdot>\n                    b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                  (CB\\<cdot>discr);\n        y = CB\\<cdot>discr\\<rbrakk>\n       \\<Longrightarrow> discr = b", "apply (erule_tac x = \"Suc 0\" in allE, auto)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma take_similar'_similar:\n  assumes \"x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\"\n  shows  \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\n    \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y", "proof(rule similarI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n       (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x) \\<triangleleft>\\<triangleright>\\<^bsub>na\\<^esub> \\<psi>\\<^sup>E\\<^bsub>na\\<^esub>\\<cdot>\n                       (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n       (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x) \\<triangleleft>\\<triangleright>\\<^bsub>na\\<^esub> \\<psi>\\<^sup>E\\<^bsub>na\\<^esub>\\<cdot>\n                       (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "from assms"], ["proof (chain)\npicking this:\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y", "have \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y\""], ["proof (prove)\nusing this:\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 y", "by (rule similar'_take)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n               y\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n       (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x) \\<triangleleft>\\<triangleright>\\<^bsub>na\\<^esub> \\<psi>\\<^sup>E\\<^bsub>na\\<^esub>\\<cdot>\n                       (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "moreover"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n               y\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n       (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x) \\<triangleleft>\\<triangleright>\\<^bsub>na\\<^esub> \\<psi>\\<^sup>E\\<^bsub>na\\<^esub>\\<cdot>\n                       (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "have \"n \\<le> m \\<or> m \\<le> n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n \\<le> m \\<or> m \\<le> n", "by auto"], ["proof (state)\nthis:\n  n \\<le> m \\<or> m \\<le> n\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n       (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n        x) \\<triangleleft>\\<triangleright>\\<^bsub>na\\<^esub> \\<psi>\\<^sup>E\\<^bsub>na\\<^esub>\\<cdot>\n                       (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "ultimately"], ["proof (chain)\npicking this:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n               y\n  n \\<le> m \\<or> m \\<le> n", "show \"\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>(\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n               y\n  n \\<le> m \\<or> m \\<le> n\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     x) \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                   (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)", "by (auto elim: similar'_up_le similar'_down_le dest: similar'_take\n        simp add: min_absorb2 min_absorb1 Value.take_take CValue.take_take)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n   x) \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                 (\\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bot_or_not_bot:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> (x = \\<bottom> \\<longleftrightarrow> y = \\<bottom>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    (x = \\<bottom>) = (y = \\<bottom>)", "by (cases x y rule:value_CValue_cases) auto"], ["", "lemma bool_or_not_bool:\n  \"x \\<triangleleft>\\<triangleright> y \\<Longrightarrow> (x = B\\<cdot>b) \\<longleftrightarrow> (y = CB\\<cdot>b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    (x = B\\<cdot>b) = (y = CB\\<cdot>b)", "by (cases x y rule:value_CValue_cases) auto"], ["", "lemma slimilar_bot_cases[consumes 1, case_names bot bool Fn]:\n  assumes \"x \\<triangleleft>\\<triangleright> y\"\n  obtains \"x = \\<bottom>\" \"y = \\<bottom>\" |\n  b where \"x = B\\<cdot>(Discr b)\" \"y = CB\\<cdot>(Discr b)\" |\n  f g where \"x = Fn\\<cdot>f\" \"y = CFn \\<cdot> g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>x = \\<bottom>; y = \\<bottom>\\<rbrakk>\n             \\<Longrightarrow> thesis;\n     \\<And>b.\n        \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>f g.\n        \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n        \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "using assms"], ["proof (prove)\nusing this:\n  x \\<triangleleft>\\<triangleright> y\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<lbrakk>x = \\<bottom>; y = \\<bottom>\\<rbrakk>\n             \\<Longrightarrow> thesis;\n     \\<And>b.\n        \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n        \\<Longrightarrow> thesis;\n     \\<And>f g.\n        \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n        \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by (metis CValue.exhaust Value.exhaust bool_or_not_bool bot_or_not_bot discr.exhaust)"], ["", "lemma similar_adm: \"adm (\\<lambda>x. fst x \\<triangleleft>\\<triangleright> snd x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. fst x \\<triangleleft>\\<triangleright> snd x)", "unfolding similar_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x.\n            \\<forall>n.\n               \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n               (fst x) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                                  (snd x))", "by (intro adm_lemmas similar'_admI cont2cont)"], ["", "lemma similar_admI: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda>x. f x \\<triangleleft>\\<triangleright> g x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>cont f; cont g\\<rbrakk>\n    \\<Longrightarrow> adm (\\<lambda>x.\n                              f x \\<triangleleft>\\<triangleright> g x)", "by (rule adm_subst[OF _ similar_adm, where t = \"\\<lambda>x. (f x, g x)\", simplified]) auto"], ["", "text \\<open>\nHaving constructed the relation we can how show that it indeed is the desired relation,\nrelating $|bot$ with $|bot$ and functions with functions, if they take related arguments to related values.\nThis corresponds to Proposition 9 in |cite{functionspaces}.\n\\<close>"], ["", "lemma similar_nice_def: \"x \\<triangleleft>\\<triangleright> y \\<longleftrightarrow> (x = \\<bottom> \\<and> y = \\<bottom> \\<or> (\\<exists> b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or> (\\<exists> f g. x = Fn\\<cdot>f \\<and> y = CFn\\<cdot>g \\<and> (\\<forall> a b. a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow> f\\<cdot>a \\<triangleleft>\\<triangleright> g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)))\"\n  (is \"?L \\<longleftrightarrow> ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<triangleleft>\\<triangleright> y) =\n    (x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n     (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n     (\\<exists>f g.\n         x = Fn\\<cdot>f \\<and>\n         y = CFn\\<cdot>g \\<and>\n         (\\<forall>a b.\n             a \\<triangleleft>\\<triangleright>\n             b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n             f\\<cdot>a \\<triangleleft>\\<triangleright>\n             g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "assume \"?L\""], ["proof (state)\nthis:\n  x \\<triangleleft>\\<triangleright> y\n\ngoal (2 subgoals):\n 1. x \\<triangleleft>\\<triangleright> y \\<Longrightarrow>\n    x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "thus \"?R\""], ["proof (prove)\nusing this:\n  x \\<triangleleft>\\<triangleright> y\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "proof (cases x y rule:slimilar_bot_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>x = \\<bottom>; y = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                      (\\<exists>b.\n                          x = B\\<cdot>(Discr b) \\<and>\n                          y = CB\\<cdot>(Discr b)) \\<or>\n                      (\\<exists>f g.\n                          x = Fn\\<cdot>f \\<and>\n                          y = CFn\\<cdot>g \\<and>\n                          (\\<forall>a b.\n                              a \\<triangleleft>\\<triangleright>\n                              b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n                              f\\<cdot>a \\<triangleleft>\\<triangleright>\n                              g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>b.\n       \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 3. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "case bot"], ["proof (state)\nthis:\n  x = \\<bottom>\n  y = \\<bottom>\n\ngoal (3 subgoals):\n 1. \\<lbrakk>x = \\<bottom>; y = \\<bottom>\\<rbrakk>\n    \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                      (\\<exists>b.\n                          x = B\\<cdot>(Discr b) \\<and>\n                          y = CB\\<cdot>(Discr b)) \\<or>\n                      (\\<exists>f g.\n                          x = Fn\\<cdot>f \\<and>\n                          y = CFn\\<cdot>g \\<and>\n                          (\\<forall>a b.\n                              a \\<triangleleft>\\<triangleright>\n                              b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n                              f\\<cdot>a \\<triangleleft>\\<triangleright>\n                              g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>b.\n       \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 3. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = \\<bottom>\n  y = \\<bottom>\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "by simp"], ["proof (state)\nthis:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (2 subgoals):\n 1. \\<And>b.\n       \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b.\n       \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "case bool"], ["proof (state)\nthis:\n  x = B\\<cdot>(Discr b_)\n  y = CB\\<cdot>(Discr b_)\n\ngoal (2 subgoals):\n 1. \\<And>b.\n       \\<lbrakk>x = B\\<cdot>(Discr b); y = CB\\<cdot>(Discr b)\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n 2. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  x = B\\<cdot>(Discr b_)\n  y = CB\\<cdot>(Discr b_)\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "by simp"], ["proof (state)\nthis:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "case (Fn f g)"], ["proof (state)\nthis:\n  x = Fn\\<cdot>f\n  y = CFn\\<cdot>g\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "note \\<open>?L\\<close>[unfolded Fn]"], ["proof (state)\nthis:\n  Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "have \"\\<forall>a b. a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow> f\\<cdot>a \\<triangleleft>\\<triangleright> g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a b.\n       a \\<triangleleft>\\<triangleright>\n       b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n       f\\<cdot>a \\<triangleleft>\\<triangleright>\n       g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>", "proof(intro impI allI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       a \\<triangleleft>\\<triangleright>\n       b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       f\\<cdot>a \\<triangleleft>\\<triangleright>\n       g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>", "fix a b"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       a \\<triangleleft>\\<triangleright>\n       b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       f\\<cdot>a \\<triangleleft>\\<triangleright>\n       g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>", "assume \"a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (state)\nthis:\n  a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       a \\<triangleleft>\\<triangleright>\n       b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       f\\<cdot>a \\<triangleleft>\\<triangleright>\n       g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>", "show \"f\\<cdot>a \\<triangleleft>\\<triangleright> g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f\\<cdot>a \\<triangleleft>\\<triangleright>\n    g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>", "proof(rule similarI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)", "have \"adm (\\<lambda>(b, a). \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(f\\<cdot>b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(g\\<cdot>a\\<cdot>C\\<^sup>\\<infinity>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>(b, a).\n            \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n            (f\\<cdot>\n             b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                           (g\\<cdot>a\\<cdot>C\\<^sup>\\<infinity>))", "by (intro adm_case_prod similar'_admI cont2cont)"], ["proof (state)\nthis:\n  adm (\\<lambda>(b, a).\n          \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n          (f\\<cdot>\n           b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                         (g\\<cdot>a\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)", "thus \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(f\\<cdot>a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  adm (\\<lambda>(b, a).\n          \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n          (f\\<cdot>\n           b) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                         (g\\<cdot>a\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (f\\<cdot>\n     a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)", "proof (induct a b rule: Value_CValue_take_induct[consumes 1])"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "txt \\<open>This take induction is required to avoid the wrong equation shown above.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "fix m"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "from \\<open>a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity>\\<close>"], ["proof (chain)\npicking this:\n  a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity>", "have \"\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>a \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>(b\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    a \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                 (b\\<cdot>C\\<^sup>\\<infinity>)", "by (rule similarE)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n               (b\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "hence \"\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>a \\<triangleleft>\\<triangleright>\\<^bsub>max m n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>(b\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>m\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n               (b\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    a \\<triangleleft>\\<triangleright>\\<^bsub>max m\n        n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                  (b\\<cdot>C\\<^sup>\\<infinity>)", "by (rule similar'_up_le[rotated]) auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>max m\n      n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                (b\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "moreover"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>max m\n      n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                (b\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "from \\<open>Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\\<close>"], ["proof (chain)\npicking this:\n  Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "have \"\\<psi>\\<^sup>D\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>(Fn\\<cdot>f) \\<triangleleft>\\<triangleright>\\<^bsub>Suc (max m n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>(CFn\\<cdot>g)\""], ["proof (prove)\nusing this:\n  Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n          (max m\n            n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n                       (CFn\\<cdot>g)", "by (rule similarE)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        (max m\n          n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n                     (CFn\\<cdot>g)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "ultimately"], ["proof (chain)\npicking this:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>max m\n      n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                (b\\<cdot>C\\<^sup>\\<infinity>)\n  \\<psi>\\<^sup>D\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        (max m\n          n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n                     (CFn\\<cdot>g)", "have \"\\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>(f\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>a))) \\<triangleleft>\\<triangleright>\\<^bsub>max m n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>(g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>max m n\\<^esub>\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b))\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n  a \\<triangleleft>\\<triangleright>\\<^bsub>max m\n      n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>m\\<^esub>\\<cdot>\n                (b\\<cdot>C\\<^sup>\\<infinity>)\n  \\<psi>\\<^sup>D\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>Suc\n        (max m\n          n)\\<^esub> \\<psi>\\<^sup>E\\<^bsub>Suc (max m n)\\<^esub>\\<cdot>\n                     (CFn\\<cdot>g)\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n    (f\\<cdot>\n     (\\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n      (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n       a))) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n              n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>max m n\\<^esub>\\<cdot>\n                          (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b))\\<cdot>\n                         C\\<^sup>\\<infinity>)", "by auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n     a))) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n            n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>max m n\\<^esub>\\<cdot>\n                        (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b))\\<cdot>\n                       C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "hence \" \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>(f\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>a)) \\<triangleleft>\\<triangleright>\\<^bsub>max m n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>(g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n     a))) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n            n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>max m n\\<^esub>\\<cdot>\n                        (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b))\\<cdot>\n                       C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n    (f\\<cdot>\n     (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n      a)) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n            n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>\n                       C\\<^sup>\\<infinity>)", "by (simp add: Value.take_take cfun_map_map CValue.take_take ID_def eta_cfun min_absorb2 min_absorb1)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    a)) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n          n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                    (g\\<cdot>\n                     (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>\n                     C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (f\\<cdot>\n        (\\<psi>\\<^sup>D\\<^bsub>na\\<^esub>\\<cdot>\n         a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                        (g\\<cdot>\n                         (\\<psi>\\<^sup>A\\<^bsub>na\\<^esub>\\<cdot>b)\\<cdot>\n                         C\\<^sup>\\<infinity>)", "thus \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(f\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>max m n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    a)) \\<triangleleft>\\<triangleright>\\<^bsub>max m\n          n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>max m n\\<^esub>\\<cdot>\n                    (g\\<cdot>\n                     (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>\n                     C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (f\\<cdot>\n     (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n      a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                     (g\\<cdot>\n                      (\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>\n                      C\\<^sup>\\<infinity>)", "by (rule similar'_down_le[rotated]) auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>m\\<^esub>\\<cdot>\n    a)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>m\\<^esub>\\<cdot>b)\\<cdot>\n                    C\\<^sup>\\<infinity>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   a) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 (g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  f\\<cdot>a \\<triangleleft>\\<triangleright>\n  g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>a b.\n     a \\<triangleleft>\\<triangleright>\n     b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n     f\\<cdot>a \\<triangleleft>\\<triangleright>\n     g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<lbrakk>x = Fn\\<cdot>f; y = CFn\\<cdot>g\\<rbrakk>\n       \\<Longrightarrow> x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n                         (\\<exists>b.\n                             x = B\\<cdot>(Discr b) \\<and>\n                             y = CB\\<cdot>(Discr b)) \\<or>\n                         (\\<exists>f g.\n                             x = Fn\\<cdot>f \\<and>\n                             y = CFn\\<cdot>g \\<and>\n                             (\\<forall>a b.\n                                 a \\<triangleleft>\\<triangleright>\n                                 b\\<cdot>\n                                 C\\<^sup>\\<infinity> \\<longrightarrow>\n                                 f\\<cdot>a \\<triangleleft>\\<triangleright>\n                                 g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<forall>a b.\n     a \\<triangleleft>\\<triangleright>\n     b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n     f\\<cdot>a \\<triangleleft>\\<triangleright>\n     g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "unfolding Fn"], ["proof (prove)\nusing this:\n  \\<forall>a b.\n     a \\<triangleleft>\\<triangleright>\n     b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n     f\\<cdot>a \\<triangleleft>\\<triangleright>\n     g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. Fn\\<cdot>f = \\<bottom> \\<and> CFn\\<cdot>g = \\<bottom> \\<or>\n    (\\<exists>b.\n        Fn\\<cdot>f = B\\<cdot>(Discr b) \\<and>\n        CFn\\<cdot>g = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>fa ga.\n        Fn\\<cdot>f = Fn\\<cdot>fa \\<and>\n        CFn\\<cdot>g = CFn\\<cdot>ga \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            fa\\<cdot>a \\<triangleleft>\\<triangleright>\n            ga\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))", "by simp"], ["proof (state)\nthis:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "assume \"?R\""], ["proof (state)\nthis:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n    (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n    (\\<exists>f g.\n        x = Fn\\<cdot>f \\<and>\n        y = CFn\\<cdot>g \\<and>\n        (\\<forall>a b.\n            a \\<triangleleft>\\<triangleright>\n            b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n            f\\<cdot>a \\<triangleleft>\\<triangleright>\n            g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>)) \\<Longrightarrow>\n    x \\<triangleleft>\\<triangleright> y", "thus \"?L\""], ["proof (prove)\nusing this:\n  x = \\<bottom> \\<and> y = \\<bottom> \\<or>\n  (\\<exists>b. x = B\\<cdot>(Discr b) \\<and> y = CB\\<cdot>(Discr b)) \\<or>\n  (\\<exists>f g.\n      x = Fn\\<cdot>f \\<and>\n      y = CFn\\<cdot>g \\<and>\n      (\\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>))\n\ngoal (1 subgoal):\n 1. x \\<triangleleft>\\<triangleright> y", "proof(elim conjE disjE exE ssubst)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>\n 2. \\<And>b.\n       B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\n 3. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "show \"\\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>", "by simp"], ["proof (state)\nthis:\n  \\<bottom> \\<triangleleft>\\<triangleright> \\<bottom>\n\ngoal (2 subgoals):\n 1. \\<And>b.\n       B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\n 2. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b.\n       B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\n 2. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "fix b"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>b.\n       B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\n 2. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "show \"B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)", "by simp"], ["proof (state)\nthis:\n  B\\<cdot>(Discr b) \\<triangleleft>\\<triangleright> CB\\<cdot>(Discr b)\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "fix f g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "assume imp: \"\\<forall>a b. a \\<triangleleft>\\<triangleright> b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow> f\\<cdot>a \\<triangleleft>\\<triangleright> g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (state)\nthis:\n  \\<forall>a b.\n     a \\<triangleleft>\\<triangleright>\n     b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n     f\\<cdot>a \\<triangleleft>\\<triangleright>\n     g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>f g.\n       \\<forall>a b.\n          a \\<triangleleft>\\<triangleright>\n          b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n          f\\<cdot>a \\<triangleleft>\\<triangleright>\n          g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow>\n       Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "show \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "proof (rule similarI)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "fix n"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "show \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(Fn\\<cdot>f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(CFn\\<cdot>g)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (CFn\\<cdot>g)", "proof(cases n)"], ["proof (state)\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (CFn\\<cdot>g)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "case 0"], ["proof (state)\nthis:\n  n = 0\n\ngoal (2 subgoals):\n 1. n = 0 \\<Longrightarrow>\n    \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (CFn\\<cdot>g)\n 2. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "thus ?thesis"], ["proof (prove)\nusing this:\n  n = 0\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (CFn\\<cdot>g)", "by simp"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 (CFn\\<cdot>g)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (CFn\\<cdot>g)", "case (Suc n)"], ["proof (state)\nthis:\n  n__ = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "{"], ["proof (state)\nthis:\n  n__ = Suc n\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "assume \"x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (state)\nthis:\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>\n               C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "hence \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(y\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  x \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> y\\<cdot>\n               C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\n    \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(y\\<cdot>C\\<^sup>\\<infinity>)", "by (rule take_similar'_similar)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "hence \"f\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) \\<triangleleft>\\<triangleright> g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(y\\<cdot>C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. f\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     x) \\<triangleleft>\\<triangleright>\n    g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n    C\\<^sup>\\<infinity>", "using imp"], ["proof (prove)\nusing this:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x \\<triangleleft>\\<triangleright>\n  \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(y\\<cdot>C\\<^sup>\\<infinity>)\n  \\<forall>a b.\n     a \\<triangleleft>\\<triangleright>\n     b\\<cdot>C\\<^sup>\\<infinity> \\<longrightarrow>\n     f\\<cdot>a \\<triangleleft>\\<triangleright>\n     g\\<cdot>b\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. f\\<cdot>\n    (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n     x) \\<triangleleft>\\<triangleright>\n    g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n    C\\<^sup>\\<infinity>", "by auto"], ["proof (state)\nthis:\n  f\\<cdot>\n  (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) \\<triangleleft>\\<triangleright>\n  g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n  C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "hence \"\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>(f\\<cdot>(\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>(g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>C\\<^sup>\\<infinity>)\""], ["proof (prove)\nusing this:\n  f\\<cdot>\n  (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>x) \\<triangleleft>\\<triangleright>\n  g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n  C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    (f\\<cdot>\n     (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n      x)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                     (g\\<cdot>\n                      (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n                      C\\<^sup>\\<infinity>)", "by (rule similarE)"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    x)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                   (g\\<cdot>(\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>y)\\<cdot>\n                    C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "}"], ["proof (state)\nthis:\n  ?xa2 \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?ya2\\<cdot>\n                  C\\<^sup>\\<infinity> \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    ?xa2)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>?ya2)\\<cdot>\n                       C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<And>nat.\n       n__ = Suc nat \\<Longrightarrow>\n       \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n       (Fn\\<cdot>\n        f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                        (CFn\\<cdot>g)", "with Suc"], ["proof (chain)\npicking this:\n  n__ = Suc n\n  ?xa2 \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?ya2\\<cdot>\n                  C\\<^sup>\\<infinity> \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    ?xa2)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>?ya2)\\<cdot>\n                       C\\<^sup>\\<infinity>)", "show ?thesis"], ["proof (prove)\nusing this:\n  n__ = Suc n\n  ?xa2 \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> ?ya2\\<cdot>\n                  C\\<^sup>\\<infinity> \\<Longrightarrow>\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (f\\<cdot>\n   (\\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n    ?xa2)) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                      (g\\<cdot>\n                       (\\<psi>\\<^sup>A\\<^bsub>n\\<^esub>\\<cdot>?ya2)\\<cdot>\n                       C\\<^sup>\\<infinity>)\n\ngoal (1 subgoal):\n 1. \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n    (Fn\\<cdot>\n     f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                     (CFn\\<cdot>g)", "by auto"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n__\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>n__\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n__\\<^esub>\\<cdot>\n                   (CFn\\<cdot>g)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<psi>\\<^sup>D\\<^bsub>n\\<^esub>\\<cdot>\n  (Fn\\<cdot>\n   f) \\<triangleleft>\\<triangleright>\\<^bsub>n\\<^esub> \\<psi>\\<^sup>E\\<^bsub>n\\<^esub>\\<cdot>\n                 (CFn\\<cdot>g)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<triangleleft>\\<triangleright> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma similar_FnI[intro]:\n  assumes \"\\<And>x y.  x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g", "by (metis assms similar_nice_def)"], ["", "lemma similar_FnD[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\"\n  assumes \"x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity>\"\n  shows \"f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. f\\<cdot>x \\<triangleleft>\\<triangleright>\n    g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>", "using assms"], ["proof (prove)\nusing this:\n  Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\n  x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity>\n\ngoal (1 subgoal):\n 1. f\\<cdot>x \\<triangleleft>\\<triangleright>\n    g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>", "by (subst (asm) similar_nice_def) auto"], ["", "lemma similar_FnE[elim!]:\n  assumes \"Fn\\<cdot>f \\<triangleleft>\\<triangleright> CFn\\<cdot>g\"\n  assumes \"(\\<And>x y.  x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity> \\<Longrightarrow> f\\<cdot>x \\<triangleleft>\\<triangleright> g\\<cdot>y\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> P\"\n  shows P"], ["proof (prove)\ngoal (1 subgoal):\n 1. P", "by (metis assms similar_FnD)"], ["", "subsubsection \\<open>The similarity relation lifted pointwise to functions.\\<close>"], ["", "abbreviation fun_similar :: \"('a::type \\<Rightarrow> Value) \\<Rightarrow> ('a \\<Rightarrow> (C \\<rightarrow> CValue)) \\<Rightarrow> bool\"  (infix \"\\<triangleleft>\\<triangleright>\\<^sup>*\" 50) where\n  \"fun_similar \\<equiv> pointwise (\\<lambda>x y. x \\<triangleleft>\\<triangleright> y\\<cdot>C\\<^sup>\\<infinity>)\""], ["", "lemma fun_similar_fmap_bottom[simp]: \"\\<bottom> \\<triangleleft>\\<triangleright>\\<^sup>* \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bottom> \\<triangleleft>\\<triangleright>\\<^sup>* \\<bottom>", "by auto"], ["", "lemma fun_similarE[elim]:\n  assumes \"m \\<triangleleft>\\<triangleright>\\<^sup>* m'\"\n  assumes \"(\\<And>x. (m  x) \\<triangleleft>\\<triangleright> (m' x)\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow> Q\"\n  shows Q"], ["proof (prove)\ngoal (1 subgoal):\n 1. Q", "using assms"], ["proof (prove)\nusing this:\n  m \\<triangleleft>\\<triangleright>\\<^sup>* m'\n  (\\<And>x.\n      m x \\<triangleleft>\\<triangleright>\n      m' x\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n  Q\n\ngoal (1 subgoal):\n 1. Q", "unfolding pointwise_def"], ["proof (prove)\nusing this:\n  \\<forall>x.\n     m x \\<triangleleft>\\<triangleright> m' x\\<cdot>C\\<^sup>\\<infinity>\n  (\\<And>x.\n      m x \\<triangleleft>\\<triangleright>\n      m' x\\<cdot>C\\<^sup>\\<infinity>) \\<Longrightarrow>\n  Q\n\ngoal (1 subgoal):\n 1. Q", "by blast"], ["", "end"]]}