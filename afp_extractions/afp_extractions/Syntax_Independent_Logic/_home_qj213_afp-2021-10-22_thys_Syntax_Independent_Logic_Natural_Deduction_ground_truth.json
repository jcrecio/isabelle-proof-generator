{"file_name": "/home/qj213/afp-2021-10-22/thys/Syntax_Independent_Logic/Natural_Deduction.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Syntax_Independent_Logic", "problem_names": ["lemma nprv_hyp[simp,intro]:\n\"\\<phi> \\<in> F \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F \\<phi>\"", "lemma prv_nprv0I: \"prv \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> nprv {} \\<phi>\"", "lemma prv_nprv_emp: \"\\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi> \\<longleftrightarrow> nprv {} \\<phi>\"", "lemma nprv_mono:\nassumes \"nprv G \\<phi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"G \\<subseteq> F\" \"\\<phi> \\<in> fmla\"\nshows \"nprv F \\<phi>\"", "lemma nprv_cut:\nassumes \"nprv F \\<phi>\" and \"nprv (insert \\<phi> F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\"  \"\\<phi> \\<in> fmla\"  \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemma nprv_strong_cut2:\n\"nprv F \\<phi>1 \\<Longrightarrow> nprv (insert \\<phi>1 F) \\<phi>2 \\<Longrightarrow> nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemma nprv_cut2:\n\"nprv F \\<phi>1 \\<Longrightarrow> nprv F \\<phi>2 \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi> \\<Longrightarrow> nprv F \\<psi>\"", "lemma nprv_insertShiftI:\n\"nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow> nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi>\"", "lemma nprv_insertShift2I:\n\"nprv (insert \\<phi>3 (insert \\<phi>1 (insert \\<phi>2 F))) \\<psi> \\<Longrightarrow> nprv (insert \\<phi>1 (insert \\<phi>2 (insert \\<phi>3 F))) \\<psi>\"", "lemma prv_nprvI: \"prv \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F \\<phi>\"", "lemma prv_nprv1I:\nassumes \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" and \"prv (imp \\<phi> \\<psi>)\"\nshows \"nprv {\\<phi>} \\<psi>\"", "lemma prv_nprv2I:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<psi>))\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv {\\<phi>1,\\<phi>2} \\<psi>\"", "lemma nprv_prvI: \"nprv {} \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi>\"", "lemma nprv_clear: \"nprv {} \\<phi> \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> nprv F \\<phi>\"", "lemma nprv_cut_set:\nassumes F:  \"finite F\" \"F \\<subseteq> fmla\" and G: \"finite G\" \"G \\<subseteq> fmla\" \"\\<chi> \\<in> fmla\"\nand n1: \"\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv F \\<psi>\" and n2: \"nprv (G \\<union> F) \\<chi>\"\nshows \"nprv F \\<chi>\"", "lemma nprv_clear2_1:\n\"nprv {\\<phi>2} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2} \\<psi>\"", "lemma nprv_clear2_2:\n\"nprv {\\<phi>1} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2} \\<psi>\"", "lemma nprv_clear3_1:\n\"nprv {\\<phi>2,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\"", "lemma nprv_clear3_2:\n\"nprv {\\<phi>1,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\"", "lemma nprv_clear3_3:\n\"nprv {\\<phi>1,\\<phi>2} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\"", "lemma nprv_clear4_1:\n\"nprv {\\<phi>2,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\"", "lemma nprv_clear4_2:\n\"nprv {\\<phi>1,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\"", "lemma nprv_clear4_3:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\"", "lemma nprv_clear4_4:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\"", "lemma nprv_clear5_1:\n\"nprv {\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\"", "lemma nprv_clear5_2:\n\"nprv {\\<phi>1,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\"", "lemma nprv_clear5_3:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\"", "lemma nprv_clear5_4:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\"", "lemma nprv_clear5_5:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\"", "lemma nprv_subst:\nassumes \"x \\<in> var\" \"t \\<in> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\nand 1: \"nprv F \\<psi>\"\nshows \"nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)\"", "lemma nprv_subst_fresh:\nassumes 0: \"x \\<in> var\" \"t \\<in> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\n\"nprv F \\<psi>\" and 1: \"x \\<notin> \\<Union> (Fvars ` F)\"\nshows \"nprv F (subst \\<psi> t x)\"", "lemma nprv_subst_rev:\nassumes 0: \"x \\<in> var\" \"y \\<in> var\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\nand f: \"y = x \\<or> (y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F))\"\nand 1: \"nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F) (subst \\<psi> (Var y) x)\"\nshows \"nprv F \\<psi>\"", "lemma nprv_psubst:\nassumes 0: \"snd ` set txs \\<subseteq> var\" \"fst ` set txs \\<subseteq> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\n\"distinct (map snd txs)\"\nand 1: \"nprv F \\<psi>\"\nshows \"nprv ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F) (psubst \\<psi> txs)\"", "lemma nprv_impI:\n\"nprv (insert \\<phi> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (imp \\<phi> \\<psi>)\"", "lemma nprv_impI_rev:\nassumes \"nprv F (imp \\<phi> \\<psi>)\"\nand \"F \\<subseteq> fmla\" and \"finite F\" and \"\\<phi> \\<in> fmla\" and \"\\<psi> \\<in> fmla\"\nshows \"nprv (insert \\<phi> F) \\<psi>\"", "lemma nprv_impI_rev2:\nassumes \"nprv F (imp \\<phi> \\<psi>)\" and G: \"insert \\<phi> F \\<subseteq> G\"\nand \"G \\<subseteq> fmla\" and \"finite G\" and \"\\<phi> \\<in> fmla\" and \"\\<psi> \\<in> fmla\"\nshows \"nprv G \\<psi>\"", "lemma nprv_mp:\n\"nprv F (imp \\<phi> \\<psi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemma nprv_impE:\n\"nprv F (imp \\<phi> \\<psi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>  nprv (insert \\<psi> F) \\<chi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow> \\<chi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<chi>\"", "lemmas nprv_impE0 = nprv_impE[OF nprv_hyp _ _, simped]", "lemmas nprv_impE1 = nprv_impE[OF _ nprv_hyp _, simped]", "lemmas nprv_impE2 = nprv_impE[OF _ _ nprv_hyp, simped]", "lemmas nprv_impE01 = nprv_impE[OF nprv_hyp nprv_hyp _, simped]", "lemmas nprv_impE02 = nprv_impE[OF nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_impE12 = nprv_impE[OF _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_impE012 = nprv_impE[OF nprv_hyp nprv_hyp nprv_hyp, simped]", "lemma nprv_cnjI:\n\"nprv F \\<phi> \\<Longrightarrow> nprv F \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (cnj \\<phi> \\<psi>)\"", "lemma nprv_cnjE:\n\"nprv F (cnj \\<phi>1 \\<phi>2) \\<Longrightarrow> nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemmas nprv_cnjE0 = nprv_cnjE[OF nprv_hyp _, simped]", "lemmas nprv_cnjE1 = nprv_cnjE[OF _ nprv_hyp, simped]", "lemmas nprv_cnjE01 = nprv_cnjE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_dsjIL:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (dsj \\<phi> \\<psi>)\"", "lemma nprv_dsjIR:\n\"nprv F \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (dsj \\<phi> \\<psi>)\"", "lemma nprv_dsjE:\nassumes \"nprv F (dsj \\<phi> \\<psi>)\"\nand \"nprv (insert \\<phi> F) \\<chi>\" \"nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\"", "lemmas nprv_dsjE0 = nprv_dsjE[OF nprv_hyp _ _, simped]", "lemmas nprv_dsjE1 = nprv_dsjE[OF _ nprv_hyp _, simped]", "lemmas nprv_dsjE2 = nprv_dsjE[OF _ _ nprv_hyp, simped]", "lemmas nprv_dsjE01 = nprv_dsjE[OF nprv_hyp nprv_hyp _, simped]", "lemmas nprv_dsjE02 = nprv_dsjE[OF nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_dsjE12 = nprv_dsjE[OF _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_dsjE012 = nprv_dsjE[OF nprv_hyp nprv_hyp nprv_hyp, simped]", "lemma nprv_flsE: \"nprv F fls \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow>  nprv F \\<phi>\"", "lemmas nprv_flsE0 = nprv_flsE[OF nprv_hyp, simped]", "lemma nprv_truI: \"F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F tru\"", "lemma nprv_negI:\n\"nprv (insert \\<phi> F) fls \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow>\n nprv F (neg \\<phi>)\"", "lemma nprv_neg_fls:\n\"nprv F (neg \\<phi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F fls\"", "lemma nprv_negE:\n\"nprv F (neg \\<phi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemmas nprv_negE0 = nprv_negE[OF nprv_hyp _, simped]", "lemmas nprv_negE1 = nprv_negE[OF _ nprv_hyp, simped]", "lemmas nprv_negE01 = nprv_negE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_scnjI:\n\"(\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv F \\<psi>) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow>\n nprv F (scnj G)\"", "lemma nprv_scnjE:\n\"nprv F (scnj G) \\<Longrightarrow> nprv (G \\<union> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemmas nprv_scnjE0 = nprv_scnjE[OF nprv_hyp _, simped]", "lemmas nprv_scnjE1 = nprv_scnjE[OF _ nprv_hyp, simped]", "lemmas nprv_scnjE01 = nprv_scnjE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_lcnjI:\n\"(\\<And> \\<psi>. \\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv F \\<psi>) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<psi>s \\<subseteq> fmla \\<Longrightarrow>\n nprv F (lcnj \\<psi>s)\"", "lemma nprv_lcnjE:\n\"nprv F (lcnj \\<phi>s) \\<Longrightarrow> nprv (set \\<phi>s \\<union> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<phi>s \\<subseteq> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\"", "lemmas nprv_lcnjE0 = nprv_lcnjE[OF nprv_hyp _, simped]", "lemmas nprv_lcnjE1 = nprv_lcnjE[OF _ nprv_hyp, simped]", "lemmas nprv_lcnjE01 = nprv_lcnjE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_sdsjI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow> \\<phi> \\<in> G \\<Longrightarrow>\n nprv F (sdsj G)\"", "lemma nprv_sdsjE:\nassumes \"nprv F (sdsj G)\"\nand \"\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"G \\<subseteq> fmla\" \"finite G\" \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\"", "lemmas nprv_sdsjE0 = nprv_sdsjE[OF nprv_hyp _, simped]", "lemmas nprv_sdsjE1 = nprv_sdsjE[OF _ nprv_hyp, simped]", "lemmas nprv_sdsjE01 = nprv_sdsjE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_ldsjI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<phi>s \\<subseteq> fmla \\<Longrightarrow>  \\<phi> \\<in> set \\<phi>s \\<Longrightarrow>\n nprv F (ldsj \\<phi>s)\"", "lemma nprv_ldsjE:\nassumes \"nprv F (ldsj \\<psi>s)\"\nand \"\\<And> \\<psi>. \\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"set \\<psi>s \\<subseteq> fmla\"  \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\"", "lemmas nprv_ldsjE0 = nprv_ldsjE[OF nprv_hyp _, simped]", "lemmas nprv_ldsjE1 = nprv_ldsjE[OF _ nprv_hyp, simped]", "lemmas nprv_ldsjE01 = nprv_ldsjE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_allI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> x \\<in> var \\<Longrightarrow> x \\<notin> \\<Union> (Fvars ` F) \\<Longrightarrow>\n nprv F (all x \\<phi>)\"", "lemma nprv_allE:\nassumes \"nprv F (all x \\<phi>)\" \"nprv (insert (subst \\<phi> t x) F) \\<psi>\"\n\"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_allE0 = nprv_allE[OF nprv_hyp _, simped]", "lemmas nprv_allE1 = nprv_allE[OF _ nprv_hyp, simped]", "lemmas nprv_allE01 = nprv_allE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_exiI:\n\"nprv F (subst \\<phi> t x) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> t \\<in> trm \\<Longrightarrow> x \\<in> var \\<Longrightarrow>\n nprv F (exi x \\<phi>)\"", "lemma nprv_exiE:\nassumes n: \"nprv F (exi x \\<phi>)\"\nand nn: \"nprv (insert \\<phi> F) \\<psi>\"\nand 0[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\"\nand x: \"x \\<notin> \\<Union> (Fvars ` F)\" \"x \\<notin> Fvars \\<psi>\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_exiE0 = nprv_exiE[OF nprv_hyp _, simped]", "lemmas nprv_exiE1 = nprv_exiE[OF _ nprv_hyp, simped]", "lemmas nprv_exiE01 = nprv_exiE[OF nprv_hyp nprv_hyp, simped]", "lemma nprv_addLemmaE:\nassumes \"prv \\<phi>\" \"nprv (insert \\<phi> F) \\<psi>\"\nand \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" and \"F \\<subseteq> fmla\" and \"finite F\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_addLemmaE1 = nprv_addLemmaE[OF _ nprv_hyp, simped]", "lemma nprv_addImpLemmaI:\nassumes \"prv (imp \\<phi>1 \\<phi>2)\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\"\nand \"nprv F \\<phi>1\"\nshows \"nprv F \\<phi>2\"", "lemma nprv_addImpLemmaE:\nassumes \"prv (imp \\<phi>1 \\<phi>2)\" and \"nprv F \\<phi>1\" and \"nprv ((insert \\<phi>2) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_addImpLemmaE1 = nprv_addImpLemmaE[OF _ nprv_hyp _, simped]", "lemmas nprv_addImpLemmaE2 = nprv_addImpLemmaE[OF _ _ nprv_hyp, simped]", "lemmas nprv_addImpLemmaE12 = nprv_addImpLemmaE[OF _ nprv_hyp nprv_hyp, simped]", "lemma nprv_addImp2LemmaI:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<phi>3))\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\"\nand \"nprv F \\<phi>1\" \"nprv F \\<phi>2\"\nshows \"nprv F \\<phi>3\"", "lemma nprv_addImp2LemmaE:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<phi>3))\" and \"nprv F \\<phi>1\" and \"nprv F \\<phi>2\" and \"nprv ((insert \\<phi>3) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\"  \"\\<phi>3 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_addImp2LemmaE1 = nprv_addImp2LemmaE[OF _ nprv_hyp _ _, simped]", "lemmas nprv_addImp2LemmaE2 = nprv_addImp2LemmaE[OF _ _ nprv_hyp _, simped]", "lemmas nprv_addImp2LemmaE3 = nprv_addImp2LemmaE[OF _ _ _ nprv_hyp, simped]", "lemmas nprv_addImp2LemmaE12 = nprv_addImp2LemmaE[OF _ nprv_hyp nprv_hyp _, simped]", "lemmas nprv_addImp2LemmaE13 = nprv_addImp2LemmaE[OF _ nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_addImp2LemmaE23 = nprv_addImp2LemmaE[OF _ _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_addImp2LemmaE123 = nprv_addImp2LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp, simped]", "lemma nprv_addImp3LemmaI:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 (imp \\<phi>3 \\<phi>4)))\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\" \"\\<phi>4 \\<in> fmla\"\nand \"nprv F \\<phi>1\" \"nprv F \\<phi>2\" \"nprv F \\<phi>3\"\nshows \"nprv F \\<phi>4\"", "lemma nprv_addImp3LemmaE:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 (imp \\<phi>3 \\<phi>4)))\"  and \"nprv F \\<phi>1\" and \"nprv F \\<phi>2\" and \"nprv F \\<phi>3\"\nand \"nprv ((insert \\<phi>4) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\" \"\\<phi>4 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_addImp3LemmaE1 = nprv_addImp3LemmaE[OF _ nprv_hyp _ _ _, simped]", "lemmas nprv_addImp3LemmaE2 = nprv_addImp3LemmaE[OF _ _ nprv_hyp _ _, simped]", "lemmas nprv_addImp3LemmaE3 = nprv_addImp3LemmaE[OF _ _ _ nprv_hyp _, simped]", "lemmas nprv_addImp3LemmaE4 = nprv_addImp3LemmaE[OF _ _ _ _ nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE12 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp _ _, simped]", "lemmas nprv_addImp3LemmaE13 = nprv_addImp3LemmaE[OF _ nprv_hyp _ nprv_hyp _, simped]", "lemmas nprv_addImp3LemmaE14 = nprv_addImp3LemmaE[OF _ nprv_hyp _ _ nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE23 = nprv_addImp3LemmaE[OF _ _ nprv_hyp nprv_hyp _, simped]", "lemmas nprv_addImp3LemmaE24 = nprv_addImp3LemmaE[OF _ _ nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE34 = nprv_addImp3LemmaE[OF _ _ _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE123 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp _, simped]", "lemmas nprv_addImp3LemmaE124 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE134 = nprv_addImp3LemmaE[OF _ nprv_hyp _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE234 = nprv_addImp3LemmaE[OF _ _ nprv_hyp nprv_hyp nprv_hyp, simped]", "lemmas nprv_addImp3LemmaE1234 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp nprv_hyp, simped]", "lemma nprv_addDsjLemmaE:\nassumes \"prv (dsj \\<phi>1 \\<phi>2)\" and \"nprv (insert \\<phi>1 F) \\<psi>\" and \"nprv ((insert \\<phi>2) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\"", "lemmas nprv_addDsjLemmaE1 = nprv_addDsjLemmaE[OF _ nprv_hyp _, simped]", "lemmas nprv_addDsjLemmaE2 = nprv_addDsjLemmaE[OF _ _ nprv_hyp, simped]", "lemmas nprv_addDsjLemmaE12 = nprv_addDsjLemmaE[OF _ nprv_hyp nprv_hyp, simped]", "lemma nprv_eql_reflI: \"F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> t \\<in> trm \\<Longrightarrow> nprv F (eql t t)\"", "lemma nprv_eq_eqlI: \"t1 = t2 \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> t1 \\<in> trm \\<Longrightarrow> nprv F (eql t1 t2)\"", "lemmas nprv_eql_symI =  nprv_addImpLemmaI[OF prv_eql_sym, simped, rotated 4]", "lemmas nprv_eql_symE =  nprv_addImpLemmaE[OF prv_eql_sym, simped, rotated 2]", "lemmas nprv_eql_symE0 =  nprv_eql_symE[OF nprv_hyp _, simped]", "lemmas nprv_eql_symE1 =  nprv_eql_symE[OF _ nprv_hyp, simped]", "lemmas nprv_eql_symE01 =  nprv_eql_symE[OF nprv_hyp nprv_hyp, simped]", "lemmas nprv_eql_transI = nprv_addImp2LemmaI[OF prv_eql_imp_trans, simped, rotated 5]", "lemmas nprv_eql_transE = nprv_addImp2LemmaE[OF prv_eql_imp_trans, simped, rotated 3]", "lemmas nprv_eql_transE0 = nprv_eql_transE[OF nprv_hyp _ _, simped]", "lemmas nprv_eql_transE1 = nprv_eql_transE[OF _ nprv_hyp _, simped]", "lemmas nprv_eql_transE2 = nprv_eql_transE[OF _ _ nprv_hyp, simped]", "lemmas nprv_eql_transE01 = nprv_eql_transE[OF nprv_hyp nprv_hyp _, simped]", "lemmas nprv_eql_transE02 = nprv_eql_transE[OF nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_eql_transE12 = nprv_eql_transE[OF _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_eql_transE012 = nprv_eql_transE[OF nprv_hyp nprv_hyp nprv_hyp, simped]", "lemmas nprv_eql_substI =\nnprv_addImp2LemmaI[OF prv_eql_subst_trm_rev, simped, rotated 6]", "lemmas nprv_eql_substE = nprv_addImp2LemmaE[OF prv_eql_subst_trm_rev, simped, rotated 4]", "lemmas nprv_eql_substE0 = nprv_eql_substE[OF nprv_hyp _ _, simped]", "lemmas nprv_eql_substE1 = nprv_eql_substE[OF _ nprv_hyp _, simped]", "lemmas nprv_eql_substE2 = nprv_eql_substE[OF _ _ nprv_hyp, simped]", "lemmas nprv_eql_substE01 = nprv_eql_substE[OF nprv_hyp nprv_hyp _, simped]", "lemmas nprv_eql_substE02 = nprv_eql_substE[OF nprv_hyp _ nprv_hyp, simped]", "lemmas nprv_eql_substE12 = nprv_eql_substE[OF _ nprv_hyp nprv_hyp, simped]", "lemmas nprv_eql_substE012 = nprv_eql_substE[OF nprv_hyp nprv_hyp nprv_hyp, simped]", "lemma nprv_cnjH:\n\"nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<psi>\"", "lemma nprv_exi_commute:\nassumes [simp]: \"x \\<in> var\" \"y \\<in> var\" \"\\<phi> \\<in> fmla\"\nshows \"nprv {exi x (exi y \\<phi>)} (exi y (exi x \\<phi>))\"", "lemma prv_exi_commute:\nassumes [simp]: \"x \\<in> var\" \"y \\<in> var\" \"\\<phi> \\<in> fmla\"\nshows \"prv (imp (exi x (exi y \\<phi>)) (exi y (exi x \\<phi>)))\"", "lemma nprv_exuI:\nassumes n1: \"nprv F (subst \\<phi> t x)\" and n2: \"nprv (insert \\<phi> F) (eql (Var x) t)\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\"   \"x \\<notin> FvarsT t\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F (exu x \\<phi>)\"", "lemma nprv_exuI_var:\nassumes n1: \"nprv F (subst \\<phi> t x)\" and n2: \"nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\"\n\"y \\<in> var\" \"y \\<notin> FvarsT t\" and u: \"y \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\" and yx: \"y = x \\<or> y \\<notin> Fvars \\<phi>\"\nshows \"nprv F (exu x \\<phi>)\"", "lemma nprv_exuI_exi:\nassumes n1: \"nprv F (exi x \\<phi>)\" and n2: \"nprv (insert (subst \\<phi> (Var y) x) (insert \\<phi> F)) (eql (Var y) (Var x))\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"y \\<in> var\" \"y \\<noteq> x\" \"y \\<notin> Fvars \\<phi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\" \"y \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F (exu x \\<phi>)\"", "lemma prv_exu_imp_exi:\nassumes [simp]: \"\\<phi> \\<in> fmla\" \"x \\<in> var\"\nshows \"prv (imp (exu x \\<phi>) (exi x \\<phi>))\"", "lemma prv_exu_exi:\n  assumes \"x \\<in> var\" \"\\<phi> \\<in> fmla\" \"prv (exu x \\<phi>)\"\n  shows \"prv (exi x \\<phi>)\"", "lemma nprv_exuE_exi:\nassumes n1: \"nprv F (exu x \\<phi>)\" and n2: \"nprv (insert \\<phi> F) \\<psi>\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\" \"x \\<notin> Fvars \\<psi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F \\<psi>\"", "lemma nprv_exuF_exi:\nassumes n1: \"exu x \\<phi> \\<in> F\" and n2: \"nprv (insert \\<phi> F) \\<psi>\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\" \"x \\<notin> Fvars \\<psi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F \\<psi>\"", "lemma prv_exu_uni:\nassumes [simp]: \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"t1 \\<in> trm\" \"t2 \\<in> trm\"\nshows \"prv (imp (exu x \\<phi>) (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))\"", "lemmas nprv_exuE_uni = nprv_addImp3LemmaE[OF prv_exu_uni,simped,rotated 4]", "lemmas nprv_exuF_uni = nprv_exuE_uni[OF nprv_hyp,simped]"], "translations": [["", "lemma nprv_hyp[simp,intro]:\n\"\\<phi> \\<in> F \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<phi> \\<in> F; F \\<subseteq> fmla; finite F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<phi>", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<phi> \\<in> F; F \\<subseteq> fmla; finite F\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<phi>)", "by (simp add: prv_scnj_imp_in subset_iff)"], ["", "section \\<open>Structural Rules for the Natural Deduction Relation\\<close>"], ["", "lemma prv_nprv0I: \"prv \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> nprv {} \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv \\<phi>; \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {} \\<phi>", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv \\<phi>; \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj {}) \\<phi>)", "by (simp add: prv_imp_triv)"], ["", "lemma prv_nprv_emp: \"\\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi> \\<longleftrightarrow> nprv {} \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi> = nprv {} \\<phi>", "using prv_nprv0I"], ["proof (prove)\nusing this:\n  \\<lbrakk>prv ?\\<phi>; ?\\<phi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv {} ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi> = nprv {} \\<phi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>prv ?\\<phi>; ?\\<phi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> prv (imp (scnj {}) ?\\<phi>)\n\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla \\<Longrightarrow>\n    prv \\<phi> = prv (imp (scnj {}) \\<phi>)", "by (metis asList eqv finite.simps insert_not_empty lcnj.simps(1) ldsj.cases\n  list.simps(15) prv_eqvI prv_imp_mp prv_imp_tru scnj_def tru)"], ["", "lemma nprv_mono:\nassumes \"nprv G \\<phi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"G \\<subseteq> F\" \"\\<phi> \\<in> fmla\"\nshows \"nprv F \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<phi>", "using assms"], ["proof (prove)\nusing this:\n  nprv G \\<phi>\n  F \\<subseteq> fmla\n  finite F\n  G \\<subseteq> F\n  \\<phi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv F \\<phi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp (scnj G) \\<phi>)\n  F \\<subseteq> fmla\n  finite F\n  G \\<subseteq> F\n  \\<phi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) \\<phi>)", "by (meson order_trans prv_prv_imp_trans prv_scnj_mono rev_finite_subset scnj)"], ["", "lemma nprv_cut:\nassumes \"nprv F \\<phi>\" and \"nprv (insert \\<phi> F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\"  \"\\<phi> \\<in> fmla\"  \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  nprv F \\<phi>\n  nprv (insert \\<phi> F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp (scnj F) \\<phi>)\n  prv (imp (scnj (insert \\<phi> F)) \\<psi>)\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) \\<psi>)", "by (metis (full_types) cnj finite.insertI\n  insert_subset prv_imp_cnj prv_imp_cnj_scnj prv_imp_refl prv_prv_imp_trans scnj)"], ["", "lemma nprv_strong_cut2:\n\"nprv F \\<phi>1 \\<Longrightarrow> nprv (insert \\<phi>1 F) \\<phi>2 \\<Longrightarrow> nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>1; nprv (insert \\<phi>1 F) \\<phi>2;\n     nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi>; F \\<subseteq> fmla;\n     finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "by (meson finite.insertI insert_subsetI nprv_cut)"], ["", "lemma nprv_cut2:\n\"nprv F \\<phi>1 \\<Longrightarrow> nprv F \\<phi>2 \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi> \\<Longrightarrow> nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>1; nprv F \\<phi>2; F \\<subseteq> fmla; finite F;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<psi> \\<in> fmla;\n     nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi>\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "by (meson finite.insertI insert_subsetI nprv_mono nprv_strong_cut2 subset_insertI)"], ["", "text \\<open>Useful for fine control of the eigenformula:\\<close>"], ["", "lemma nprv_insertShiftI:\n\"nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow> nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow>\n    nprv (insert \\<phi>2 (insert \\<phi>1 F)) \\<psi>", "by (simp add: insert_commute)"], ["", "lemma nprv_insertShift2I:\n\"nprv (insert \\<phi>3 (insert \\<phi>1 (insert \\<phi>2 F))) \\<psi> \\<Longrightarrow> nprv (insert \\<phi>1 (insert \\<phi>2 (insert \\<phi>3 F))) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert \\<phi>3 (insert \\<phi>1 (insert \\<phi>2 F)))\n     \\<psi> \\<Longrightarrow>\n    nprv (insert \\<phi>1 (insert \\<phi>2 (insert \\<phi>3 F))) \\<psi>", "by (simp add: insert_commute)"], ["", "section \\<open>Back and Forth between Hilbert and Natural Deduction\\<close>"], ["", "text \\<open>This is now easy, thanks to the large number of facts we have\nproved for Hilbert-style deduction\\<close>"], ["", "lemma prv_nprvI: \"prv \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv \\<phi>; \\<phi> \\<in> fmla; F \\<subseteq> fmla;\n     finite F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<phi>", "using prv_nprv0I"], ["proof (prove)\nusing this:\n  \\<lbrakk>prv ?\\<phi>; ?\\<phi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv {} ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>prv \\<phi>; \\<phi> \\<in> fmla; F \\<subseteq> fmla;\n     finite F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<phi>", "by (simp add: nprv_def prv_imp_triv)"], ["", "thm prv_nprv0I"], ["", "lemma prv_nprv1I:\nassumes \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" and \"prv (imp \\<phi> \\<psi>)\"\nshows \"nprv {\\<phi>} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {\\<phi>} \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  prv (imp \\<phi> \\<psi>)\n\ngoal (1 subgoal):\n 1. nprv {\\<phi>} \\<psi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  prv (imp \\<phi> \\<psi>)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj {\\<phi>}) \\<psi>)", "by (simp add: prv_scnj_imp)"], ["", "lemma prv_nprv2I:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<psi>))\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv {\\<phi>1,\\<phi>2} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {\\<phi>1, \\<phi>2} \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  prv (imp \\<phi>1 (imp \\<phi>2 \\<psi>))\n  \\<phi>1 \\<in> fmla\n  \\<phi>2 \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv {\\<phi>1, \\<phi>2} \\<psi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp \\<phi>1 (imp \\<phi>2 \\<psi>))\n  \\<phi>1 \\<in> fmla\n  \\<phi>2 \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (scnj {\\<phi>1, \\<phi>2}) \\<psi>)", "by (meson cnj empty_subsetI finite.simps insert_subsetI prv_cnj_imp_monoR2 prv_prv_imp_trans prv_scnj2_imp_cnj scnj)"], ["", "lemma nprv_prvI: \"nprv {} \\<phi> \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> prv \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {} \\<phi>; \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv \\<phi>", "using prv_nprv_emp"], ["proof (prove)\nusing this:\n  ?\\<phi> \\<in> fmla \\<Longrightarrow> prv ?\\<phi> = nprv {} ?\\<phi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {} \\<phi>; \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv \\<phi>", "by auto"], ["", "section \\<open>More Structural Properties\\<close>"], ["", "lemma nprv_clear: \"nprv {} \\<phi> \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> nprv F \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {} \\<phi>; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<phi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_cut_set:\nassumes F:  \"finite F\" \"F \\<subseteq> fmla\" and G: \"finite G\" \"G \\<subseteq> fmla\" \"\\<chi> \\<in> fmla\"\nand n1: \"\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv F \\<psi>\" and n2: \"nprv (G \\<union> F) \\<chi>\"\nshows \"nprv F \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "using G F n1 n2"], ["proof (prove)\nusing this:\n  finite G\n  G \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  ?\\<psi> \\<in> G \\<Longrightarrow> nprv F ?\\<psi>\n  nprv (G \\<union> F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "proof(induction arbitrary: F \\<chi>)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>F \\<chi>.\n       \\<lbrakk>{} \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        \\<And>\\<psi>. \\<psi> \\<in> {} \\<Longrightarrow> nprv F \\<psi>;\n        nprv ({} \\<union> F) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<chi>\n 2. \\<And>x F Fa \\<chi>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Fa \\<chi>.\n           \\<lbrakk>F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n            Fa \\<subseteq> fmla;\n            \\<And>\\<psi>. \\<psi> \\<in> F \\<Longrightarrow> nprv Fa \\<psi>;\n            nprv (F \\<union> Fa) \\<chi>\\<rbrakk>\n           \\<Longrightarrow> nprv Fa \\<chi>;\n        insert x F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n        Fa \\<subseteq> fmla;\n        \\<And>\\<psi>.\n           \\<psi> \\<in> insert x F \\<Longrightarrow> nprv Fa \\<psi>;\n        nprv (insert x F \\<union> Fa) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv Fa \\<chi>", "case (insert \\<psi> G F \\<chi>)"], ["proof (state)\nthis:\n  finite G\n  \\<psi> \\<notin> G\n  \\<lbrakk>G \\<subseteq> fmla; ?\\<chi> \\<in> fmla; finite ?F;\n   ?F \\<subseteq> fmla;\n   \\<And>\\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv ?F \\<psi>;\n   nprv (G \\<union> ?F) ?\\<chi>\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<chi>\n  insert \\<psi> G \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  ?\\<psi> \\<in> insert \\<psi> G \\<Longrightarrow> nprv F ?\\<psi>\n  nprv (insert \\<psi> G \\<union> F) \\<chi>\n\ngoal (2 subgoals):\n 1. \\<And>F \\<chi>.\n       \\<lbrakk>{} \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        \\<And>\\<psi>. \\<psi> \\<in> {} \\<Longrightarrow> nprv F \\<psi>;\n        nprv ({} \\<union> F) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<chi>\n 2. \\<And>x F Fa \\<chi>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Fa \\<chi>.\n           \\<lbrakk>F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n            Fa \\<subseteq> fmla;\n            \\<And>\\<psi>. \\<psi> \\<in> F \\<Longrightarrow> nprv Fa \\<psi>;\n            nprv (F \\<union> Fa) \\<chi>\\<rbrakk>\n           \\<Longrightarrow> nprv Fa \\<chi>;\n        insert x F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n        Fa \\<subseteq> fmla;\n        \\<And>\\<psi>.\n           \\<psi> \\<in> insert x F \\<Longrightarrow> nprv Fa \\<psi>;\n        nprv (insert x F \\<union> Fa) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv Fa \\<chi>", "hence 0: \"nprv F \\<psi>\""], ["proof (prove)\nusing this:\n  finite G\n  \\<psi> \\<notin> G\n  \\<lbrakk>G \\<subseteq> fmla; ?\\<chi> \\<in> fmla; finite ?F;\n   ?F \\<subseteq> fmla;\n   \\<And>\\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv ?F \\<psi>;\n   nprv (G \\<union> ?F) ?\\<chi>\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<chi>\n  insert \\<psi> G \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  ?\\<psi> \\<in> insert \\<psi> G \\<Longrightarrow> nprv F ?\\<psi>\n  nprv (insert \\<psi> G \\<union> F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by auto"], ["proof (state)\nthis:\n  nprv F \\<psi>\n\ngoal (2 subgoals):\n 1. \\<And>F \\<chi>.\n       \\<lbrakk>{} \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        \\<And>\\<psi>. \\<psi> \\<in> {} \\<Longrightarrow> nprv F \\<psi>;\n        nprv ({} \\<union> F) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<chi>\n 2. \\<And>x F Fa \\<chi>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Fa \\<chi>.\n           \\<lbrakk>F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n            Fa \\<subseteq> fmla;\n            \\<And>\\<psi>. \\<psi> \\<in> F \\<Longrightarrow> nprv Fa \\<psi>;\n            nprv (F \\<union> Fa) \\<chi>\\<rbrakk>\n           \\<Longrightarrow> nprv Fa \\<chi>;\n        insert x F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n        Fa \\<subseteq> fmla;\n        \\<And>\\<psi>.\n           \\<psi> \\<in> insert x F \\<Longrightarrow> nprv Fa \\<psi>;\n        nprv (insert x F \\<union> Fa) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv Fa \\<chi>", "have 1: \"nprv (insert \\<psi> F) \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert \\<psi> F) \\<chi>", "using insert.prems"], ["proof (prove)\nusing this:\n  insert \\<psi> G \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  ?\\<psi> \\<in> insert \\<psi> G \\<Longrightarrow> nprv F ?\\<psi>\n  nprv (insert \\<psi> G \\<union> F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv (insert \\<psi> F) \\<chi>", "apply-"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>", "apply(rule insert.IH)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 2. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> \\<chi> \\<in> fmla\n 3. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> finite (insert \\<psi> F)\n 4. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> insert \\<psi> F \\<subseteq> fmla\n 5. \\<And>\\<psi>'.\n       \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla;\n        finite F; F \\<subseteq> fmla;\n        \\<And>\\<psi>'.\n           \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n        nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'\n 6. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> \\<chi> \\<in> fmla\n 2. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> finite (insert \\<psi> F)\n 3. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> insert \\<psi> F \\<subseteq> fmla\n 4. \\<And>\\<psi>'.\n       \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla;\n        finite F; F \\<subseteq> fmla;\n        \\<And>\\<psi>'.\n           \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n        nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'\n 5. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> \\<chi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> finite (insert \\<psi> F)\n 2. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> insert \\<psi> F \\<subseteq> fmla\n 3. \\<And>\\<psi>'.\n       \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla;\n        finite F; F \\<subseteq> fmla;\n        \\<And>\\<psi>'.\n           \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n        nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'\n 4. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> finite (insert \\<psi> F)", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> insert \\<psi> F \\<subseteq> fmla\n 2. \\<And>\\<psi>'.\n       \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla;\n        finite F; F \\<subseteq> fmla;\n        \\<And>\\<psi>'.\n           \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n        nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'\n 3. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> insert \\<psi> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>'.\n       \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla;\n        finite F; F \\<subseteq> fmla;\n        \\<And>\\<psi>'.\n           \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n        nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'\n 2. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>; \\<psi>'_ \\<in> G\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<psi> F) \\<psi>'_", "by (meson finite.simps insert_subset nprv_mono subsetD subset_insertI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>insert \\<psi> G \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     \\<And>\\<psi>'.\n        \\<psi>' \\<in> insert \\<psi> G \\<Longrightarrow> nprv F \\<psi>';\n     nprv (insert \\<psi> G \\<union> F) \\<chi>\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> insert \\<psi> F) \\<chi>", "by auto"], ["proof (state)\nthis:\n  nprv (insert \\<psi> F) \\<chi>\n\ngoal (2 subgoals):\n 1. \\<And>F \\<chi>.\n       \\<lbrakk>{} \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        \\<And>\\<psi>. \\<psi> \\<in> {} \\<Longrightarrow> nprv F \\<psi>;\n        nprv ({} \\<union> F) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<chi>\n 2. \\<And>x F Fa \\<chi>.\n       \\<lbrakk>finite F; x \\<notin> F;\n        \\<And>Fa \\<chi>.\n           \\<lbrakk>F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n            Fa \\<subseteq> fmla;\n            \\<And>\\<psi>. \\<psi> \\<in> F \\<Longrightarrow> nprv Fa \\<psi>;\n            nprv (F \\<union> Fa) \\<chi>\\<rbrakk>\n           \\<Longrightarrow> nprv Fa \\<chi>;\n        insert x F \\<subseteq> fmla; \\<chi> \\<in> fmla; finite Fa;\n        Fa \\<subseteq> fmla;\n        \\<And>\\<psi>.\n           \\<psi> \\<in> insert x F \\<Longrightarrow> nprv Fa \\<psi>;\n        nprv (insert x F \\<union> Fa) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv Fa \\<chi>", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "using insert.prems"], ["proof (prove)\nusing this:\n  insert \\<psi> G \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  ?\\<psi> \\<in> insert \\<psi> G \\<Longrightarrow> nprv F ?\\<psi>\n  nprv (insert \\<psi> G \\<union> F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "by (intro nprv_cut[OF 0 1]) auto"], ["proof (state)\nthis:\n  nprv F \\<chi>\n\ngoal (1 subgoal):\n 1. \\<And>F \\<chi>.\n       \\<lbrakk>{} \\<subseteq> fmla; \\<chi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        \\<And>\\<psi>. \\<psi> \\<in> {} \\<Longrightarrow> nprv F \\<psi>;\n        nprv ({} \\<union> F) \\<chi>\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<chi>", "qed(insert nprv_clear, auto)"], ["", "lemma nprv_clear2_1:\n\"nprv {\\<phi>2} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>2} \\<psi>; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear2_2:\n\"nprv {\\<phi>1} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1} \\<psi>; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear3_1:\n\"nprv {\\<phi>2,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>2, \\<phi>3} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear3_2:\n\"nprv {\\<phi>1,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>3} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear3_3:\n\"nprv {\\<phi>1,\\<phi>2} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear4_1:\n\"nprv {\\<phi>2,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>2, \\<phi>3, \\<phi>4} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<phi>4 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear4_2:\n\"nprv {\\<phi>1,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>3, \\<phi>4} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<phi>4 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear4_3:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2, \\<phi>4} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<phi>4 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear4_4:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow>\\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2, \\<phi>3} \\<psi>; \\<phi>1 \\<in> fmla;\n     \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla; \\<phi>4 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4} \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear5_1:\n\"nprv {\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5} \\<psi>;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla;\n     \\<phi>4 \\<in> fmla; \\<phi>5 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5}\n                       \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear5_2:\n\"nprv {\\<phi>1,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>3, \\<phi>4, \\<phi>5} \\<psi>;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla;\n     \\<phi>4 \\<in> fmla; \\<phi>5 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5}\n                       \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear5_3:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>4,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2, \\<phi>4, \\<phi>5} \\<psi>;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla;\n     \\<phi>4 \\<in> fmla; \\<phi>5 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5}\n                       \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear5_4:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>5} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>5} \\<psi>;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla;\n     \\<phi>4 \\<in> fmla; \\<phi>5 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5}\n                       \\<psi>", "by (rule nprv_mono) auto"], ["", "lemma nprv_clear5_5:\n\"nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4} \\<psi> \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<phi>3 \\<in> fmla \\<Longrightarrow> \\<phi>4 \\<in> fmla \\<Longrightarrow> \\<phi>5 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv {\\<phi>1,\\<phi>2,\\<phi>3,\\<phi>4,\\<phi>5} \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4} \\<psi>;\n     \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla; \\<phi>3 \\<in> fmla;\n     \\<phi>4 \\<in> fmla; \\<phi>5 \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv {\\<phi>1, \\<phi>2, \\<phi>3, \\<phi>4, \\<phi>5}\n                       \\<psi>", "by (rule nprv_mono) auto"], ["", "section \\<open>Properties Involving Substitution\\<close>"], ["", "lemma nprv_subst:\nassumes \"x \\<in> var\" \"t \\<in> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\nand 1: \"nprv F \\<psi>\"\nshows \"nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> var\n  t \\<in> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  nprv F \\<psi>\n\ngoal (1 subgoal):\n 1. nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)", "using prv_subst[OF _ _ _ 1[unfolded nprv_def]]"], ["proof (prove)\nusing this:\n  x \\<in> var\n  t \\<in> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  nprv F \\<psi>\n  \\<lbrakk>?x \\<in> var; imp (scnj F) \\<psi> \\<in> fmla;\n   ?t \\<in> trm\\<rbrakk>\n  \\<Longrightarrow> prv (subst (imp (scnj F) \\<psi>) ?t ?x)\n\ngoal (1 subgoal):\n 1. nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  x \\<in> var\n  t \\<in> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  prv (imp (scnj F) \\<psi>)\n  \\<lbrakk>?x \\<in> var; imp (scnj F) \\<psi> \\<in> fmla;\n   ?t \\<in> trm\\<rbrakk>\n  \\<Longrightarrow> prv (subst (imp (scnj F) \\<psi>) ?t ?x)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F))\n          (subst \\<psi> t x))", "by (intro prv_prv_imp_trans[OF _ _ _ prv_subst_scnj_imp]) auto"], ["", "lemma nprv_subst_fresh:\nassumes 0: \"x \\<in> var\" \"t \\<in> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\n\"nprv F \\<psi>\" and 1: \"x \\<notin> \\<Union> (Fvars ` F)\"\nshows \"nprv F (subst \\<psi> t x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "have 2: \"(\\<lambda>\\<phi>. subst \\<phi> t x) ` F = F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>\\<phi>. subst \\<phi> t x) ` F = F", "unfolding image_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {y. \\<exists>xa\\<in>F. y = subst xa t x} = F", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> var\n  t \\<in> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  nprv F \\<psi>\n  x \\<notin> \\<Union> (Fvars ` F)\n\ngoal (1 subgoal):\n 1. {y. \\<exists>xa\\<in>F. y = subst xa t x} = F", "by force"], ["proof (state)\nthis:\n  (\\<lambda>\\<phi>. subst \\<phi> t x) ` F = F\n\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "using nprv_subst[OF 0]"], ["proof (prove)\nusing this:\n  nprv ((\\<lambda>\\<phi>. subst \\<phi> t x) ` F) (subst \\<psi> t x)\n\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "unfolding 2"], ["proof (prove)\nusing this:\n  nprv F (subst \\<psi> t x)\n\ngoal (1 subgoal):\n 1. nprv F (subst \\<psi> t x)", "."], ["proof (state)\nthis:\n  nprv F (subst \\<psi> t x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nprv_subst_rev:\nassumes 0: \"x \\<in> var\" \"y \\<in> var\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\nand f: \"y = x \\<or> (y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F))\"\nand 1: \"nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F) (subst \\<psi> (Var y) x)\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "have 0: \"subst (subst \\<psi> (Var y) x) (Var x) y = \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst (subst \\<psi> (Var y) x) (Var x) y = \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> var\n  y \\<in> var\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  y = x \\<or> y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F)\n  nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   (subst \\<psi> (Var y) x)\n\ngoal (1 subgoal):\n 1. subst (subst \\<psi> (Var y) x) (Var x) y = \\<psi>", "by (auto simp: subst_compose_eq_or)"], ["proof (state)\nthis:\n  subst (subst \\<psi> (Var y) x) (Var x) y = \\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "have \"nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) ` (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n      (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n     \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> var\n  y \\<in> var\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  y = x \\<or> y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F)\n  nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   (subst \\<psi> (Var y) x)\n\ngoal (1 subgoal):\n 1. nprv\n     ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n      (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n     \\<psi>", "apply(subst 0[symmetric])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n                       (subst (subst \\<psi> (Var y) x) (Var x) y)", "by (rule nprv_subst) auto"], ["proof (state)\nthis:\n  nprv\n   ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n    (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   \\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "moreover"], ["proof (state)\nthis:\n  nprv\n   ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n    (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   \\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "have \"prv (imp (scnj F)\n                 (scnj ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) ` (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (scnj F)\n          (scnj\n            ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n             (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))", "using assms"], ["proof (prove)\nusing this:\n  x \\<in> var\n  y \\<in> var\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  y = x \\<or> y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F)\n  nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   (subst \\<psi> (Var y) x)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F)\n          (scnj\n            ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n             (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))", "apply(intro prv_scnj_mono_imp)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 2. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                      (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F\n                      \\<subseteq> fmla\n 3. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 4. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n 5. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                      (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F\n                      \\<subseteq> fmla\n 2. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 3. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n 4. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> (\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                      (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F\n                      \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 2. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n 3. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite F", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n 2. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> finite\n                       ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                        (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> \\<forall>\\<phi>2\n                               \\<in>(\\<lambda>\\<phi>.\n  subst \\<phi> (Var x) y) `\n                                    (\\<lambda>\\<phi>.\n  subst \\<phi> (Var y) x) `\n                                    F.\n                         \\<exists>\\<phi>1\\<in>F. prv (imp \\<phi>1 \\<phi>2)", "apply clarify"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<phi>2 \\<phi> \\<phi>'.\n       \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n        F \\<subseteq> fmla;\n        y = x \\<or>\n        y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n        nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n         (subst \\<psi> (Var y) x);\n        \\<phi>' \\<in> F\\<rbrakk>\n       \\<Longrightarrow> \\<exists>\\<phi>1\\<in>F.\n                            prv (imp \\<phi>1\n                                  (subst (subst \\<phi>' (Var y) x) (Var x)\n                                    y))", "subgoal for _ _ \\<phi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x);\n     \\<phi> \\<in> F\\<rbrakk>\n    \\<Longrightarrow> \\<exists>\\<phi>1\\<in>F.\n                         prv (imp \\<phi>1\n                               (subst (subst \\<phi> (Var y) x) (Var x) y))", "by (auto simp: subst_compose_eq_or intro!: bexI[of _ \\<phi>] prv_imp_refl2)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  prv (imp (scnj F)\n        (scnj\n          ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n           (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "ultimately"], ["proof (chain)\npicking this:\n  nprv\n   ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n    (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   \\<psi>\n  prv (imp (scnj F)\n        (scnj\n          ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n           (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))", "show ?thesis"], ["proof (prove)\nusing this:\n  nprv\n   ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n    (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   \\<psi>\n  prv (imp (scnj F)\n        (scnj\n          ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n           (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp (scnj\n             ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n              (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F))\n        \\<psi>)\n  prv (imp (scnj F)\n        (scnj\n          ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n           (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) \\<psi>)", "using assms"], ["proof (prove)\nusing this:\n  prv (imp (scnj\n             ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n              (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F))\n        \\<psi>)\n  prv (imp (scnj F)\n        (scnj\n          ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n           (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)))\n  x \\<in> var\n  y \\<in> var\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  y = x \\<or> y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F)\n  nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n   (subst \\<psi> (Var y) x)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) \\<psi>)", "apply-"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj\n                        ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n                         (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F))\n                   \\<psi>);\n     prv (imp (scnj F)\n           (scnj\n             ((\\<lambda>\\<phi>. subst \\<phi> (Var x) y) `\n              (\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)));\n     x \\<in> var; y \\<in> var; \\<psi> \\<in> fmla; finite F;\n     F \\<subseteq> fmla;\n     y = x \\<or>\n     y \\<notin> Fvars \\<psi> \\<and> y \\<notin> \\<Union> (Fvars ` F);\n     nprv ((\\<lambda>\\<phi>. subst \\<phi> (Var y) x) ` F)\n      (subst \\<psi> (Var y) x)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<psi>)", "by(rule prv_prv_imp_trans) auto"], ["proof (state)\nthis:\n  nprv F \\<psi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nprv_psubst:\nassumes 0: \"snd ` set txs \\<subseteq> var\" \"fst ` set txs \\<subseteq> trm\" \"\\<psi> \\<in> fmla\" \"finite F\" \"F \\<subseteq> fmla\"\n\"distinct (map snd txs)\"\nand 1: \"nprv F \\<psi>\"\nshows \"nprv ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F) (psubst \\<psi> txs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F) (psubst \\<psi> txs)", "using assms"], ["proof (prove)\nusing this:\n  snd ` set txs \\<subseteq> var\n  fst ` set txs \\<subseteq> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  distinct (map snd txs)\n  nprv F \\<psi>\n\ngoal (1 subgoal):\n 1. nprv ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F) (psubst \\<psi> txs)", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  snd ` set txs \\<subseteq> var\n  fst ` set txs \\<subseteq> trm\n  \\<psi> \\<in> fmla\n  finite F\n  F \\<subseteq> fmla\n  distinct (map snd txs)\n  prv (imp (scnj F) \\<psi>)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F))\n          (psubst \\<psi> txs))", "apply(intro prv_prv_imp_trans[OF _ _ _ prv_psubst_scnj_imp])"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> scnj ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F)\n                      \\<in> fmla\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst (scnj F) txs \\<in> fmla\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst \\<psi> txs \\<in> fmla\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 5. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 6. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 7. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 8. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 9. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> scnj ((\\<lambda>\\<phi>. psubst \\<phi> txs) ` F)\n                      \\<in> fmla", "by auto"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst (scnj F) txs \\<in> fmla\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst \\<psi> txs \\<in> fmla\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 5. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 6. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 7. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 8. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst (scnj F) txs \\<in> fmla", "by auto"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst \\<psi> txs \\<in> fmla\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 5. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 6. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 7. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> psubst \\<psi> txs \\<in> fmla", "by auto"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 5. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 6. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 5. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> finite F", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 4. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> snd ` set txs \\<subseteq> var", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 3. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> fst ` set txs \\<subseteq> trm", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)\n 2. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> distinct (map snd txs)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "using prv_psubst[OF _ _ _ 1[unfolded nprv_def]]"], ["proof (prove)\nusing this:\n  \\<lbrakk>imp (scnj F) \\<psi> \\<in> fmla; snd ` set ?txs \\<subseteq> var;\n   fst ` set ?txs \\<subseteq> trm\\<rbrakk>\n  \\<Longrightarrow> prv (psubst (imp (scnj F) \\<psi>) ?txs)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>snd ` set txs \\<subseteq> var; fst ` set txs \\<subseteq> trm;\n     \\<psi> \\<in> fmla; finite F; F \\<subseteq> fmla;\n     distinct (map snd txs); prv (imp (scnj F) \\<psi>)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (psubst (scnj F) txs) (psubst \\<psi> txs))", "by (metis imp psubst_imp scnj)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "section \\<open>Introduction and Elimination Rules\\<close>"], ["", "text \\<open>We systematically leave the side-conditions at the end, to simplify reasoning.\\<close>"], ["", "lemma nprv_impI:\n\"nprv (insert \\<phi> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (imp \\<phi> \\<psi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi> F) \\<psi>; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (imp \\<phi> \\<psi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj (insert \\<phi> F)) \\<psi>); F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (imp \\<phi> \\<psi>))", "by (metis cnj finite.insertI insert_subset prv_cnj_imp prv_imp_cnj_scnj prv_imp_com prv_prv_imp_trans scnj)"], ["", "lemma nprv_impI_rev:\nassumes \"nprv F (imp \\<phi> \\<psi>)\"\nand \"F \\<subseteq> fmla\" and \"finite F\" and \"\\<phi> \\<in> fmla\" and \"\\<psi> \\<in> fmla\"\nshows \"nprv (insert \\<phi> F) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert \\<phi> F) \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  nprv F (imp \\<phi> \\<psi>)\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv (insert \\<phi> F) \\<psi>", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp (scnj F) (imp \\<phi> \\<psi>))\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (scnj (insert \\<phi> F)) \\<psi>)", "by (metis cnj finite.insertI insert_subset prv_cnj_imp_monoR2 prv_eqv_imp_transi\n    prv_eqv_scnj_insert prv_imp_com scnj)"], ["", "lemma nprv_impI_rev2:\nassumes \"nprv F (imp \\<phi> \\<psi>)\" and G: \"insert \\<phi> F \\<subseteq> G\"\nand \"G \\<subseteq> fmla\" and \"finite G\" and \"\\<phi> \\<in> fmla\" and \"\\<psi> \\<in> fmla\"\nshows \"nprv G \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv G \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  nprv F (imp \\<phi> \\<psi>)\n  insert \\<phi> F \\<subseteq> G\n  G \\<subseteq> fmla\n  finite G\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv G \\<psi>", "apply-"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv G \\<psi>", "apply(rule nprv_mono[of \"insert \\<phi> F\"])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<phi> F) \\<psi>\n 2. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 4. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert \\<phi> F \\<subseteq> G\n 5. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<phi> F) \\<psi>", "by (meson nprv_impI_rev order_trans rev_finite_subset subset_insertI)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 3. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert \\<phi> F \\<subseteq> G\n 4. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); insert \\<phi> F \\<subseteq> G;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla", "by auto"], ["", "lemma nprv_mp:\n\"nprv F (imp \\<phi> \\<psi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) (imp \\<phi> \\<psi>));\n     prv (imp (scnj F) \\<phi>); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<psi>)", "by (metis (full_types) cnj prv_cnj_imp_monoR2 prv_imp_cnj prv_imp_refl prv_prv_imp_trans scnj)"], ["", "lemma nprv_impE:\n\"nprv F (imp \\<phi> \\<psi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>  nprv (insert \\<psi> F) \\<chi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow> \\<chi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); nprv F \\<phi>;\n     nprv (insert \\<psi> F) \\<chi>; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla; \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<chi>", "using nprv_cut nprv_mp"], ["proof (prove)\nusing this:\n  \\<lbrakk>nprv ?F ?\\<phi>; nprv (insert ?\\<phi> ?F) ?\\<psi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n  \\<lbrakk>nprv ?F (imp ?\\<phi> ?\\<psi>); nprv ?F ?\\<phi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> \\<psi>); nprv F \\<phi>;\n     nprv (insert \\<psi> F) \\<chi>; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla; \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<chi>", "by blast"], ["", "lemmas nprv_impE0 = nprv_impE[OF nprv_hyp _ _, simped]"], ["", "lemmas nprv_impE1 = nprv_impE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_impE2 = nprv_impE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_impE01 = nprv_impE[OF nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_impE02 = nprv_impE[OF nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_impE12 = nprv_impE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_impE012 = nprv_impE[OF nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_cnjI:\n\"nprv F \\<phi> \\<Longrightarrow> nprv F \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (cnj \\<phi> \\<psi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>; nprv F \\<psi>; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (cnj \\<phi> \\<psi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<phi>); prv (imp (scnj F) \\<psi>);\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (cnj \\<phi> \\<psi>))", "by (simp add: prv_imp_cnj)"], ["", "lemma nprv_cnjE:\n\"nprv F (cnj \\<phi>1 \\<phi>2) \\<Longrightarrow> nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (cnj \\<phi>1 \\<phi>2);\n     nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>; F \\<subseteq> fmla;\n     finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) (cnj \\<phi>1 \\<phi>2));\n     prv (imp (scnj (insert \\<phi>1 (insert \\<phi>2 F))) \\<psi>);\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<psi>)", "by (metis cnj nprv_cut2 nprv_def prv_imp_cnjL prv_imp_cnjR prv_prv_imp_trans scnj)"], ["", "lemmas nprv_cnjE0 = nprv_cnjE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_cnjE1 = nprv_cnjE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_cnjE01 = nprv_cnjE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_dsjIL:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (dsj \\<phi> \\<psi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>; F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (dsj \\<phi> \\<psi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<phi>); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (dsj \\<phi> \\<psi>))", "by (meson dsj prv_dsj_impL prv_prv_imp_trans scnj)"], ["", "lemma nprv_dsjIR:\n\"nprv F \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F (dsj \\<phi> \\<psi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<psi>; F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (dsj \\<phi> \\<psi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<psi>); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (dsj \\<phi> \\<psi>))", "by (meson dsj prv_dsj_impR prv_prv_imp_trans scnj)"], ["", "lemma nprv_dsjE:\nassumes \"nprv F (dsj \\<phi> \\<psi>)\"\nand \"nprv (insert \\<phi> F) \\<chi>\" \"nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "have \"nprv F (imp (dsj \\<phi> \\<psi>) \\<chi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (imp (dsj \\<phi> \\<psi>) \\<chi>)", "by (meson assms dsj imp nprv_def nprv_impI prv_imp_com prv_imp_dsjEE scnj)"], ["proof (state)\nthis:\n  nprv F (imp (dsj \\<phi> \\<psi>) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "hence \"nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>\""], ["proof (prove)\nusing this:\n  nprv F (imp (dsj \\<phi> \\<psi>) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  nprv F (imp (dsj \\<phi> \\<psi>) \\<chi>)\n  nprv F (dsj \\<phi> \\<psi>)\n  nprv (insert \\<phi> F) \\<chi>\n  nprv (insert \\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  \\<chi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>", "by (simp add: nprv_impI_rev)"], ["proof (state)\nthis:\n  nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  nprv (insert (dsj \\<phi> \\<psi>) F) \\<chi>\n  nprv F (dsj \\<phi> \\<psi>)\n  nprv (insert \\<phi> F) \\<chi>\n  nprv (insert \\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  \\<chi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "by (meson dsj nprv_cut)"], ["proof (state)\nthis:\n  nprv F \\<chi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_dsjE0 = nprv_dsjE[OF nprv_hyp _ _, simped]"], ["", "lemmas nprv_dsjE1 = nprv_dsjE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_dsjE2 = nprv_dsjE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_dsjE01 = nprv_dsjE[OF nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_dsjE02 = nprv_dsjE[OF nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_dsjE12 = nprv_dsjE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_dsjE012 = nprv_dsjE[OF nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_flsE: \"nprv F fls \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow>  nprv F \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F fls; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<phi>", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) fls); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<phi>)", "using prv_prv_imp_trans scnj"], ["proof (prove)\nusing this:\n  \\<lbrakk>?\\<phi> \\<in> fmla; ?\\<chi> \\<in> fmla; ?\\<psi> \\<in> fmla;\n   prv (imp ?\\<phi> ?\\<chi>); prv (imp ?\\<chi> ?\\<psi>)\\<rbrakk>\n  \\<Longrightarrow> prv (imp ?\\<phi> ?\\<psi>)\n  \\<lbrakk>?F \\<subseteq> fmla; finite ?F\\<rbrakk>\n  \\<Longrightarrow> scnj ?F \\<in> fmla\n\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) fls); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) \\<phi>)", "by blast"], ["", "lemmas nprv_flsE0 = nprv_flsE[OF nprv_hyp, simped]"], ["", "lemma nprv_truI: \"F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> nprv F tru\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>F \\<subseteq> fmla; finite F\\<rbrakk>\n    \\<Longrightarrow> nprv F tru", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>F \\<subseteq> fmla; finite F\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) tru)", "by (simp add: prv_imp_tru)"], ["", "lemma nprv_negI:\n\"nprv (insert \\<phi> F) fls \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow>\n nprv F (neg \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi> F) fls; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (neg \\<phi>)", "unfolding neg_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi> F) fls; F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (imp \\<phi> fls)", "by (auto intro: nprv_impI)"], ["", "lemma nprv_neg_fls:\n\"nprv F (neg \\<phi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F fls\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (neg \\<phi>); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F fls", "unfolding neg_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> fls); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F fls", "using nprv_mp"], ["proof (prove)\nusing this:\n  \\<lbrakk>nprv ?F (imp ?\\<phi> ?\\<psi>); nprv ?F ?\\<phi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (imp \\<phi> fls); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F fls", "by blast"], ["", "lemma nprv_negE:\n\"nprv F (neg \\<phi>) \\<Longrightarrow> nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (neg \\<phi>); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "using nprv_flsE nprv_neg_fls"], ["proof (prove)\nusing this:\n  \\<lbrakk>nprv ?F fls; ?F \\<subseteq> fmla; finite ?F;\n   ?\\<phi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<phi>\n  \\<lbrakk>nprv ?F (neg ?\\<phi>); nprv ?F ?\\<phi>; ?F \\<subseteq> fmla;\n   finite ?F; ?\\<phi> \\<in> fmla; ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F fls\n\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (neg \\<phi>); nprv F \\<phi>; F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "by blast"], ["", "lemmas nprv_negE0 = nprv_negE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_negE1 = nprv_negE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_negE01 = nprv_negE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_scnjI:\n\"(\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv F \\<psi>) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow>\n nprv F (scnj G)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv F \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G\\<rbrakk>\n    \\<Longrightarrow> nprv F (scnj G)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<psi>.\n                \\<psi> \\<in> G \\<Longrightarrow> prv (imp (scnj F) \\<psi>);\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (scnj G))", "by (simp add: prv_imp_scnj)"], ["", "lemma nprv_scnjE:\n\"nprv F (scnj G) \\<Longrightarrow> nprv (G \\<union> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "apply(rule nprv_cut_set[of _ G])"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite F\n 2. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 4. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 5. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 6. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 7. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite F", "by auto"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 3. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 4. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 5. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 6. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 2. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 4. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 5. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 3. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 4. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 2. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 3. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> G\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 2. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla; \\<psi>'_ \\<in> G\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>'_", "by (meson in_mono nprv_def prv_prv_imp_trans prv_scnj_imp_in scnj)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (scnj G); nprv (G \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (G \\<union> F) \\<psi>", "."], ["", "lemmas nprv_scnjE0 = nprv_scnjE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_scnjE1 = nprv_scnjE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_scnjE01 = nprv_scnjE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_lcnjI:\n\"(\\<And> \\<psi>. \\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv F \\<psi>) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<psi>s \\<subseteq> fmla \\<Longrightarrow>\n nprv F (lcnj \\<psi>s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<psi>.\n                \\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv F \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F (lcnj \\<psi>s)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<And>\\<psi>.\n                \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n                prv (imp (scnj F) \\<psi>);\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (lcnj \\<psi>s))", "by (simp add: prv_imp_lcnj)"], ["", "lemma nprv_lcnjE:\n\"nprv F (lcnj \\<phi>s) \\<Longrightarrow> nprv (set \\<phi>s \\<union> F) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<phi>s \\<subseteq> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "apply(rule nprv_cut_set[of _ \"set \\<phi>s \\<union> F\"])"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite F\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (set \\<phi>s \\<union> F)\n 4. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<phi>s \\<union> F \\<subseteq> fmla\n 5. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 6. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 7. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite F", "by auto"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (set \\<phi>s \\<union> F)\n 3. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<phi>s \\<union> F \\<subseteq> fmla\n 4. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 5. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 6. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (set \\<phi>s \\<union> F)\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<phi>s \\<union> F \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 4. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 5. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (set \\<phi>s \\<union> F)", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<phi>s \\<union> F \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 3. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 4. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<phi>s \\<union> F \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 2. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 3. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>\\<psi>'.\n       \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n        F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n        \\<psi> \\<in> fmla; \\<psi>' \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n       \\<Longrightarrow> nprv F \\<psi>'\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla; \\<psi>'_ \\<in> set \\<phi>s \\<union> F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>'_", "apply (elim UnE)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla; \\<psi>'_ \\<in> set \\<phi>s\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>'_\n 2. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla; \\<psi>'_ \\<in> F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>'_", "apply (meson lcnj nprv_def prv_lcnj_imp_in prv_prv_imp_trans scnj subset_code(1))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla; \\<psi>'_ \\<in> F\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>'_", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (lcnj \\<phi>s); nprv (set \\<phi>s \\<union> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; set \\<phi>s \\<subseteq> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (set \\<phi>s \\<union> F \\<union> F) \\<psi>", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "lemmas nprv_lcnjE0 = nprv_lcnjE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_lcnjE1 = nprv_lcnjE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_lcnjE01 = nprv_lcnjE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_sdsjI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> G \\<subseteq> fmla \\<Longrightarrow> finite G \\<Longrightarrow> \\<phi> \\<in> G \\<Longrightarrow>\n nprv F (sdsj G)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>; F \\<subseteq> fmla; finite F;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> G\\<rbrakk>\n    \\<Longrightarrow> nprv F (sdsj G)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<phi>); F \\<subseteq> fmla; finite F;\n     G \\<subseteq> fmla; finite G; \\<phi> \\<in> G\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (sdsj G))", "by (simp add: prv_imp_sdsj)"], ["", "lemma nprv_sdsjE:\nassumes \"nprv F (sdsj G)\"\nand \"\\<And> \\<psi>. \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"G \\<subseteq> fmla\" \"finite G\" \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "have 0: \"prv (imp (sdsj G) (imp (scnj F) \\<chi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (sdsj G) (imp (scnj F) \\<chi>))", "using assms"], ["proof (prove)\nusing this:\n  nprv F (sdsj G)\n  ?\\<psi> \\<in> G \\<Longrightarrow> nprv (insert ?\\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  G \\<subseteq> fmla\n  finite G\n  \\<chi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (sdsj G) (imp (scnj F) \\<chi>))", "apply(intro prv_sdsj_imp)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> imp (scnj F) \\<chi> \\<in> fmla\n 2. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 4. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (sdsj G);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> G\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> imp (scnj F) \\<chi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla\n 2. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 3. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (sdsj G);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> G\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> G \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G\n 2. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (sdsj G);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> G\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite G", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (sdsj G);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> G\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (sdsj G);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> G \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; G \\<subseteq> fmla; finite G;\n     \\<chi> \\<in> fmla; \\<phi>_ \\<in> G\\<rbrakk>\n    \\<Longrightarrow> prv (imp \\<phi>_ (imp (scnj F) \\<chi>))", "by (meson nprv_def nprv_impI prv_imp_com scnj set_rev_mp)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  prv (imp (sdsj G) (imp (scnj F) \\<chi>))\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "hence \"nprv F (imp (sdsj G) \\<chi>)\""], ["proof (prove)\nusing this:\n  prv (imp (sdsj G) (imp (scnj F) \\<chi>))\n\ngoal (1 subgoal):\n 1. nprv F (imp (sdsj G) \\<chi>)", "by (simp add: 0 assms nprv_def prv_imp_com)"], ["proof (state)\nthis:\n  nprv F (imp (sdsj G) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  nprv F (imp (sdsj G) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "using assms nprv_mp"], ["proof (prove)\nusing this:\n  nprv F (imp (sdsj G) \\<chi>)\n  nprv F (sdsj G)\n  ?\\<psi> \\<in> G \\<Longrightarrow> nprv (insert ?\\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  G \\<subseteq> fmla\n  finite G\n  \\<chi> \\<in> fmla\n  \\<lbrakk>nprv ?F (imp ?\\<phi> ?\\<psi>); nprv ?F ?\\<phi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "by blast"], ["proof (state)\nthis:\n  nprv F \\<chi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_sdsjE0 = nprv_sdsjE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_sdsjE1 = nprv_sdsjE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_sdsjE01 = nprv_sdsjE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_ldsjI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> set \\<phi>s \\<subseteq> fmla \\<Longrightarrow>  \\<phi> \\<in> set \\<phi>s \\<Longrightarrow>\n nprv F (ldsj \\<phi>s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>; F \\<subseteq> fmla; finite F;\n     set \\<phi>s \\<subseteq> fmla; \\<phi> \\<in> set \\<phi>s\\<rbrakk>\n    \\<Longrightarrow> nprv F (ldsj \\<phi>s)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<phi>); F \\<subseteq> fmla; finite F;\n     set \\<phi>s \\<subseteq> fmla; \\<phi> \\<in> set \\<phi>s\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (ldsj \\<phi>s))", "by(simp add: prv_imp_ldsj)"], ["", "lemma nprv_ldsjE:\nassumes \"nprv F (ldsj \\<psi>s)\"\nand \"\\<And> \\<psi>. \\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv (insert \\<psi> F) \\<chi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"set \\<psi>s \\<subseteq> fmla\"  \"\\<chi> \\<in> fmla\"\nshows \"nprv F \\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "have 0: \"prv (imp (ldsj \\<psi>s) (imp (scnj F) \\<chi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (ldsj \\<psi>s) (imp (scnj F) \\<chi>))", "using assms"], ["proof (prove)\nusing this:\n  nprv F (ldsj \\<psi>s)\n  ?\\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv (insert ?\\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  set \\<psi>s \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (ldsj \\<psi>s) (imp (scnj F) \\<chi>))", "apply(intro prv_ldsj_imp)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> imp (scnj F) \\<chi> \\<in> fmla\n 2. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<psi>s \\<subseteq> fmla\n 3. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (ldsj \\<psi>s);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n           nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> set \\<psi>s\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> imp (scnj F) \\<chi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<psi>s \\<subseteq> fmla\n 2. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (ldsj \\<psi>s);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n           nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> set \\<psi>s\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> set \\<psi>s \\<subseteq> fmla", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<phi>.\n       \\<lbrakk>nprv F (ldsj \\<psi>s);\n        \\<And>\\<psi>.\n           \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n           nprv (insert \\<psi> F) \\<chi>;\n        F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n        \\<chi> \\<in> fmla; \\<phi> \\<in> set \\<psi>s\\<rbrakk>\n       \\<Longrightarrow> prv (imp \\<phi> (imp (scnj F) \\<chi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (ldsj \\<psi>s);\n     \\<And>\\<psi>.\n        \\<psi> \\<in> set \\<psi>s \\<Longrightarrow>\n        nprv (insert \\<psi> F) \\<chi>;\n     F \\<subseteq> fmla; finite F; set \\<psi>s \\<subseteq> fmla;\n     \\<chi> \\<in> fmla; \\<phi>_ \\<in> set \\<psi>s\\<rbrakk>\n    \\<Longrightarrow> prv (imp \\<phi>_ (imp (scnj F) \\<chi>))", "by (meson nprv_def nprv_impI prv_imp_com scnj set_rev_mp)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  prv (imp (ldsj \\<psi>s) (imp (scnj F) \\<chi>))\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "hence \"nprv F (imp (ldsj \\<psi>s) \\<chi>)\""], ["proof (prove)\nusing this:\n  prv (imp (ldsj \\<psi>s) (imp (scnj F) \\<chi>))\n\ngoal (1 subgoal):\n 1. nprv F (imp (ldsj \\<psi>s) \\<chi>)", "by (simp add: 0 assms nprv_def prv_imp_com)"], ["proof (state)\nthis:\n  nprv F (imp (ldsj \\<psi>s) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  nprv F (imp (ldsj \\<psi>s) \\<chi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "using assms nprv_mp"], ["proof (prove)\nusing this:\n  nprv F (imp (ldsj \\<psi>s) \\<chi>)\n  nprv F (ldsj \\<psi>s)\n  ?\\<psi> \\<in> set \\<psi>s \\<Longrightarrow> nprv (insert ?\\<psi> F) \\<chi>\n  F \\<subseteq> fmla\n  finite F\n  set \\<psi>s \\<subseteq> fmla\n  \\<chi> \\<in> fmla\n  \\<lbrakk>nprv ?F (imp ?\\<phi> ?\\<psi>); nprv ?F ?\\<phi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<chi>", "by blast"], ["proof (state)\nthis:\n  nprv F \\<chi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_ldsjE0 = nprv_ldsjE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_ldsjE1 = nprv_ldsjE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_ldsjE01 = nprv_ldsjE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_allI:\n\"nprv F \\<phi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> x \\<in> var \\<Longrightarrow> x \\<notin> \\<Union> (Fvars ` F) \\<Longrightarrow>\n nprv F (all x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F \\<phi>; F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla;\n     x \\<in> var; x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv F (all x \\<phi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) \\<phi>); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; x \\<in> var;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (all x \\<phi>))", "by (rule prv_all_imp_gen) auto"], ["", "lemma nprv_allE:\nassumes \"nprv F (all x \\<phi>)\" \"nprv (insert (subst \\<phi> t x) F) \\<psi>\"\n\"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "have \"nprv F (subst \\<phi> t x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (subst \\<phi> t x)", "using assms"], ["proof (prove)\nusing this:\n  nprv F (all x \\<phi>)\n  nprv (insert (subst \\<phi> t x) F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  t \\<in> trm\n  x \\<in> var\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. nprv F (subst \\<phi> t x)", "unfolding nprv_def"], ["proof (prove)\nusing this:\n  prv (imp (scnj F) (all x \\<phi>))\n  prv (imp (scnj (insert (subst \\<phi> t x) F)) \\<psi>)\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  t \\<in> trm\n  x \\<in> var\n  \\<psi> \\<in> fmla\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) (subst \\<phi> t x))", "by (meson all subst prv_all_inst prv_prv_imp_trans scnj)"], ["proof (state)\nthis:\n  nprv F (subst \\<phi> t x)\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  nprv F (subst \\<phi> t x)\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by (meson assms local.subst nprv_cut)"], ["proof (state)\nthis:\n  nprv F \\<psi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_allE0 = nprv_allE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_allE1 = nprv_allE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_allE01 = nprv_allE[OF nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_exiI:\n\"nprv F (subst \\<phi> t x) \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi> \\<in> fmla \\<Longrightarrow> t \\<in> trm \\<Longrightarrow> x \\<in> var \\<Longrightarrow>\n nprv F (exi x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (subst \\<phi> t x); F \\<subseteq> fmla; finite F;\n     \\<phi> \\<in> fmla; t \\<in> trm; x \\<in> var\\<rbrakk>\n    \\<Longrightarrow> nprv F (exi x \\<phi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>prv (imp (scnj F) (subst \\<phi> t x)); F \\<subseteq> fmla;\n     finite F; \\<phi> \\<in> fmla; t \\<in> trm; x \\<in> var\\<rbrakk>\n    \\<Longrightarrow> prv (imp (scnj F) (exi x \\<phi>))", "by (meson exi local.subst prv_exi_inst prv_prv_imp_trans scnj)"], ["", "lemma nprv_exiE:\nassumes n: \"nprv F (exi x \\<phi>)\"\nand nn: \"nprv (insert \\<phi> F) \\<psi>\"\nand 0[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\"\nand x: \"x \\<notin> \\<Union> (Fvars ` F)\" \"x \\<notin> Fvars \\<psi>\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "have \"nprv F (imp (exi x \\<phi>) \\<psi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (imp (exi x \\<phi>) \\<psi>)", "unfolding nprv_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (scnj F) (imp (exi x \\<phi>) \\<psi>))", "apply(rule prv_imp_com)"], ["proof (prove)\ngoal (4 subgoals):\n 1. exi x \\<phi> \\<in> fmla\n 2. scnj F \\<in> fmla\n 3. \\<psi> \\<in> fmla\n 4. prv (imp (exi x \\<phi>) (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. exi x \\<phi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. scnj F \\<in> fmla\n 2. \\<psi> \\<in> fmla\n 3. prv (imp (exi x \\<phi>) (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. scnj F \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<psi> \\<in> fmla\n 2. prv (imp (exi x \\<phi>) (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exi x \\<phi>) (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exi x \\<phi>) (imp (scnj F) \\<psi>))", "apply(rule prv_exi_imp_gen)"], ["proof (prove)\ngoal (5 subgoals):\n 1. x \\<in> var\n 2. \\<phi> \\<in> fmla\n 3. imp (scnj F) \\<psi> \\<in> fmla\n 4. x \\<notin> Fvars (imp (scnj F) \\<psi>)\n 5. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> var", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<phi> \\<in> fmla\n 2. imp (scnj F) \\<psi> \\<in> fmla\n 3. x \\<notin> Fvars (imp (scnj F) \\<psi>)\n 4. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. imp (scnj F) \\<psi> \\<in> fmla\n 2. x \\<notin> Fvars (imp (scnj F) \\<psi>)\n 3. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. imp (scnj F) \\<psi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. x \\<notin> Fvars (imp (scnj F) \\<psi>)\n 2. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> Fvars (imp (scnj F) \\<psi>)", "using x"], ["proof (prove)\nusing this:\n  x \\<notin> \\<Union> (Fvars ` F)\n  x \\<notin> Fvars \\<psi>\n\ngoal (1 subgoal):\n 1. x \\<notin> Fvars (imp (scnj F) \\<psi>)", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp \\<phi> (imp (scnj F) \\<psi>))", "apply(rule prv_imp_com)"], ["proof (prove)\ngoal (4 subgoals):\n 1. scnj F \\<in> fmla\n 2. \\<phi> \\<in> fmla\n 3. \\<psi> \\<in> fmla\n 4. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. scnj F \\<in> fmla", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<phi> \\<in> fmla\n 2. \\<psi> \\<in> fmla\n 3. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<psi> \\<in> fmla\n 2. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "using assms(3-5) assms(7) nn nprv_def nprv_impI"], ["proof (prove)\nusing this:\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  nprv (insert \\<phi> F) \\<psi>\n  nprv ?F ?\\<phi> \\<equiv> prv (imp (scnj ?F) ?\\<phi>)\n  \\<lbrakk>nprv (insert ?\\<phi> ?F) ?\\<psi>; ?F \\<subseteq> fmla; finite ?F;\n   ?\\<phi> \\<in> fmla; ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F (imp ?\\<phi> ?\\<psi>)\n\ngoal (1 subgoal):\n 1. prv (imp (scnj F) (imp \\<phi> \\<psi>))", "by blast"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  nprv F (imp (exi x \\<phi>) \\<psi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  nprv F (imp (exi x \\<phi>) \\<psi>)\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using n assms nprv_mp"], ["proof (prove)\nusing this:\n  nprv F (imp (exi x \\<phi>) \\<psi>)\n  nprv F (exi x \\<phi>)\n  nprv F (exi x \\<phi>)\n  nprv (insert \\<phi> F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  x \\<in> var\n  \\<psi> \\<in> fmla\n  x \\<notin> \\<Union> (Fvars ` F)\n  x \\<notin> Fvars \\<psi>\n  \\<lbrakk>nprv ?F (imp ?\\<phi> ?\\<psi>); nprv ?F ?\\<phi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by blast"], ["proof (state)\nthis:\n  nprv F \\<psi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_exiE0 = nprv_exiE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_exiE1 = nprv_exiE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_exiE01 = nprv_exiE[OF nprv_hyp nprv_hyp, simped]"], ["", "section \\<open>Adding Lemmas of Various Shapes into the Proof Context\\<close>"], ["", "lemma nprv_addLemmaE:\nassumes \"prv \\<phi>\" \"nprv (insert \\<phi> F) \\<psi>\"\nand \"\\<phi> \\<in> fmla\" \"\\<psi> \\<in> fmla\" and \"F \\<subseteq> fmla\" and \"finite F\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using assms nprv_cut prv_nprvI"], ["proof (prove)\nusing this:\n  prv \\<phi>\n  nprv (insert \\<phi> F) \\<psi>\n  \\<phi> \\<in> fmla\n  \\<psi> \\<in> fmla\n  F \\<subseteq> fmla\n  finite F\n  \\<lbrakk>nprv ?F ?\\<phi>; nprv (insert ?\\<phi> ?F) ?\\<psi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n  \\<lbrakk>prv ?\\<phi>; ?\\<phi> \\<in> fmla; ?F \\<subseteq> fmla;\n   finite ?F\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<phi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by blast"], ["", "lemmas nprv_addLemmaE1 = nprv_addLemmaE[OF _ nprv_hyp, simped]"], ["", "lemma nprv_addImpLemmaI:\nassumes \"prv (imp \\<phi>1 \\<phi>2)\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\"\nand \"nprv F \\<phi>1\"\nshows \"nprv F \\<phi>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<phi>2", "by (meson assms nprv_def prv_prv_imp_trans scnj)"], ["", "lemma nprv_addImpLemmaE:\nassumes \"prv (imp \\<phi>1 \\<phi>2)\" and \"nprv F \\<phi>1\" and \"nprv ((insert \\<phi>2) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using assms nprv_addImpLemmaI nprv_cut"], ["proof (prove)\nusing this:\n  prv (imp \\<phi>1 \\<phi>2)\n  nprv F \\<phi>1\n  nprv (insert \\<phi>2 F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi>1 \\<in> fmla\n  \\<phi>2 \\<in> fmla\n  \\<psi> \\<in> fmla\n  \\<lbrakk>prv (imp ?\\<phi>1.0 ?\\<phi>2.0); ?F \\<subseteq> fmla; finite ?F;\n   ?\\<phi>1.0 \\<in> fmla; ?\\<phi>2.0 \\<in> fmla; nprv ?F ?\\<phi>1.0\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<phi>2.0\n  \\<lbrakk>nprv ?F ?\\<phi>; nprv (insert ?\\<phi> ?F) ?\\<psi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla;\n   ?\\<psi> \\<in> fmla\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by blast"], ["", "lemmas nprv_addImpLemmaE1 = nprv_addImpLemmaE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_addImpLemmaE2 = nprv_addImpLemmaE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_addImpLemmaE12 = nprv_addImpLemmaE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_addImp2LemmaI:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<phi>3))\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\"\nand \"nprv F \\<phi>1\" \"nprv F \\<phi>2\"\nshows \"nprv F \\<phi>3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<phi>3", "by (meson assms imp nprv_addImpLemmaI nprv_mp)"], ["", "lemma nprv_addImp2LemmaE:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 \\<phi>3))\" and \"nprv F \\<phi>1\" and \"nprv F \\<phi>2\" and \"nprv ((insert \\<phi>3) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\"  \"\\<phi>3 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by (meson assms nprv_addImp2LemmaI nprv_cut)"], ["", "lemmas nprv_addImp2LemmaE1 = nprv_addImp2LemmaE[OF _ nprv_hyp _ _, simped]"], ["", "lemmas nprv_addImp2LemmaE2 = nprv_addImp2LemmaE[OF _ _ nprv_hyp _, simped]"], ["", "lemmas nprv_addImp2LemmaE3 = nprv_addImp2LemmaE[OF _ _ _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp2LemmaE12 = nprv_addImp2LemmaE[OF _ nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_addImp2LemmaE13 = nprv_addImp2LemmaE[OF _ nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp2LemmaE23 = nprv_addImp2LemmaE[OF _ _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_addImp2LemmaE123 = nprv_addImp2LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_addImp3LemmaI:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 (imp \\<phi>3 \\<phi>4)))\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\" \"\\<phi>4 \\<in> fmla\"\nand \"nprv F \\<phi>1\" \"nprv F \\<phi>2\" \"nprv F \\<phi>3\"\nshows \"nprv F \\<phi>4\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<phi>4", "by (meson assms imp nprv_addImpLemmaI nprv_mp)"], ["", "lemma nprv_addImp3LemmaE:\nassumes \"prv (imp \\<phi>1 (imp \\<phi>2 (imp \\<phi>3 \\<phi>4)))\"  and \"nprv F \\<phi>1\" and \"nprv F \\<phi>2\" and \"nprv F \\<phi>3\"\nand \"nprv ((insert \\<phi>4) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<phi>3 \\<in> fmla\" \"\\<phi>4 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by (meson assms nprv_addImp3LemmaI nprv_cut)"], ["", "lemmas nprv_addImp3LemmaE1 = nprv_addImp3LemmaE[OF _ nprv_hyp _ _ _, simped]"], ["", "lemmas nprv_addImp3LemmaE2 = nprv_addImp3LemmaE[OF _ _ nprv_hyp _ _, simped]"], ["", "lemmas nprv_addImp3LemmaE3 = nprv_addImp3LemmaE[OF _ _ _ nprv_hyp _, simped]"], ["", "lemmas nprv_addImp3LemmaE4 = nprv_addImp3LemmaE[OF _ _ _ _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE12 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp _ _, simped]"], ["", "lemmas nprv_addImp3LemmaE13 = nprv_addImp3LemmaE[OF _ nprv_hyp _ nprv_hyp _, simped]"], ["", "lemmas nprv_addImp3LemmaE14 = nprv_addImp3LemmaE[OF _ nprv_hyp _ _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE23 = nprv_addImp3LemmaE[OF _ _ nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_addImp3LemmaE24 = nprv_addImp3LemmaE[OF _ _ nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE34 = nprv_addImp3LemmaE[OF _ _ _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE123 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_addImp3LemmaE124 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE134 = nprv_addImp3LemmaE[OF _ nprv_hyp _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE234 = nprv_addImp3LemmaE[OF _ _ nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_addImp3LemmaE1234 = nprv_addImp3LemmaE[OF _ nprv_hyp nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "lemma nprv_addDsjLemmaE:\nassumes \"prv (dsj \\<phi>1 \\<phi>2)\" and \"nprv (insert \\<phi>1 F) \\<psi>\" and \"nprv ((insert \\<phi>2) F) \\<psi>\"\nand \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi>1 \\<in> fmla\" \"\\<phi>2 \\<in> fmla\" \"\\<psi> \\<in> fmla\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by (meson assms dsj nprv_clear nprv_dsjE prv_nprv0I)"], ["", "lemmas nprv_addDsjLemmaE1 = nprv_addDsjLemmaE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_addDsjLemmaE2 = nprv_addDsjLemmaE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_addDsjLemmaE12 = nprv_addDsjLemmaE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "section \\<open>Rules for Equality\\<close>"], ["", "text \\<open>Reflexivity:\\<close>"], ["", "lemma nprv_eql_reflI: \"F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> t \\<in> trm \\<Longrightarrow> nprv F (eql t t)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>F \\<subseteq> fmla; finite F; t \\<in> trm\\<rbrakk>\n    \\<Longrightarrow> nprv F (eql t t)", "by (simp add: prv_eql_reflT prv_nprvI)"], ["", "lemma nprv_eq_eqlI: \"t1 = t2 \\<Longrightarrow> F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> t1 \\<in> trm \\<Longrightarrow> nprv F (eql t1 t2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>t1 = t2; F \\<subseteq> fmla; finite F; t1 \\<in> trm\\<rbrakk>\n    \\<Longrightarrow> nprv F (eql t1 t2)", "by (simp add: prv_eql_reflT prv_nprvI)"], ["", "text \\<open>Symmetry:\\<close>"], ["", "lemmas nprv_eql_symI =  nprv_addImpLemmaI[OF prv_eql_sym, simped, rotated 4]"], ["", "lemmas nprv_eql_symE =  nprv_addImpLemmaE[OF prv_eql_sym, simped, rotated 2]"], ["", "lemmas nprv_eql_symE0 =  nprv_eql_symE[OF nprv_hyp _, simped]"], ["", "lemmas nprv_eql_symE1 =  nprv_eql_symE[OF _ nprv_hyp, simped]"], ["", "lemmas nprv_eql_symE01 =  nprv_eql_symE[OF nprv_hyp nprv_hyp, simped]"], ["", "text \\<open>Transitivity:\\<close>"], ["", "lemmas nprv_eql_transI = nprv_addImp2LemmaI[OF prv_eql_imp_trans, simped, rotated 5]"], ["", "lemmas nprv_eql_transE = nprv_addImp2LemmaE[OF prv_eql_imp_trans, simped, rotated 3]"], ["", "lemmas nprv_eql_transE0 = nprv_eql_transE[OF nprv_hyp _ _, simped]"], ["", "lemmas nprv_eql_transE1 = nprv_eql_transE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_eql_transE2 = nprv_eql_transE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_eql_transE01 = nprv_eql_transE[OF nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_eql_transE02 = nprv_eql_transE[OF nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_eql_transE12 = nprv_eql_transE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_eql_transE012 = nprv_eql_transE[OF nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "text \\<open>Substitutivity:\\<close>"], ["", "lemmas nprv_eql_substI =\nnprv_addImp2LemmaI[OF prv_eql_subst_trm_rev, simped, rotated 6]"], ["", "lemmas nprv_eql_substE = nprv_addImp2LemmaE[OF prv_eql_subst_trm_rev, simped, rotated 4]"], ["", "lemmas nprv_eql_substE0 = nprv_eql_substE[OF nprv_hyp _ _, simped]"], ["", "lemmas nprv_eql_substE1 = nprv_eql_substE[OF _ nprv_hyp _, simped]"], ["", "lemmas nprv_eql_substE2 = nprv_eql_substE[OF _ _ nprv_hyp, simped]"], ["", "lemmas nprv_eql_substE01 = nprv_eql_substE[OF nprv_hyp nprv_hyp _, simped]"], ["", "lemmas nprv_eql_substE02 = nprv_eql_substE[OF nprv_hyp _ nprv_hyp, simped]"], ["", "lemmas nprv_eql_substE12 = nprv_eql_substE[OF _ nprv_hyp nprv_hyp, simped]"], ["", "lemmas nprv_eql_substE012 = nprv_eql_substE[OF nprv_hyp nprv_hyp nprv_hyp, simped]"], ["", "section \\<open>Other Rules\\<close>"], ["", "lemma nprv_cnjH:\n\"nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi> \\<Longrightarrow>\n F \\<subseteq> fmla \\<Longrightarrow> finite F \\<Longrightarrow> \\<phi>1 \\<in> fmla \\<Longrightarrow> \\<phi>2 \\<in> fmla \\<Longrightarrow> \\<psi> \\<in> fmla \\<Longrightarrow>\n nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<psi>", "apply(rule nprv_cut2[of _ \\<phi>1 \\<phi>2])"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<phi>1\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<phi>2\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert (cnj \\<phi>1 \\<phi>2) F \\<subseteq> fmla\n 4. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (insert (cnj \\<phi>1 \\<phi>2) F)\n 5. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla\n 6. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 7. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 8. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<phi>1", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<phi>2\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert (cnj \\<phi>1 \\<phi>2) F \\<subseteq> fmla\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (insert (cnj \\<phi>1 \\<phi>2) F)\n 4. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla\n 5. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 6. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 7. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv (insert (cnj \\<phi>1 \\<phi>2) F) \\<phi>2", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert (cnj \\<phi>1 \\<phi>2) F \\<subseteq> fmla\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (insert (cnj \\<phi>1 \\<phi>2) F)\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla\n 4. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 5. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 6. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> insert (cnj \\<phi>1 \\<phi>2) F \\<subseteq> fmla", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (insert (cnj \\<phi>1 \\<phi>2) F)\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 4. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 5. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> finite (insert (cnj \\<phi>1 \\<phi>2) F)", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 4. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>1 \\<in> fmla", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 3. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<phi>2 \\<in> fmla", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 2. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla", "by (auto simp: nprv_impI_rev prv_imp_cnjL prv_imp_cnjR prv_nprvI)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv (insert \\<phi>1 (insert \\<phi>2 F)) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi>1 \\<in> fmla; \\<phi>2 \\<in> fmla;\n     \\<psi> \\<in> fmla\\<rbrakk>\n    \\<Longrightarrow> nprv\n                       (insert \\<phi>2\n                         (insert \\<phi>1 (insert (cnj \\<phi>1 \\<phi>2) F)))\n                       \\<psi>", "by (meson cnj finite.insertI insert_iff insert_subset nprv_mono subset_insertI)"], ["", "lemma nprv_exi_commute:\nassumes [simp]: \"x \\<in> var\" \"y \\<in> var\" \"\\<phi> \\<in> fmla\"\nshows \"nprv {exi x (exi y \\<phi>)} (exi y (exi x \\<phi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exi x (exi y \\<phi>)} (exi y (exi x \\<phi>))", "apply(rule nprv_exiE0[of x \"exi y \\<phi>\"], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exi y \\<phi>, exi x (exi y \\<phi>)} (exi y (exi x \\<phi>))", "apply(rule nprv_clear2_2, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exi y \\<phi>} (exi y (exi x \\<phi>))", "apply(rule nprv_exiE0[of y \\<phi>], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {\\<phi>, exi y \\<phi>} (exi y (exi x \\<phi>))", "apply(rule nprv_clear2_2, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {\\<phi>} (exi y (exi x \\<phi>))", "apply(rule nprv_exiI[of _ _ \"Var y\"], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {\\<phi>} (exi x \\<phi>)", "by (rule nprv_exiI[of _ _ \"Var x\"], auto)"], ["", "lemma prv_exi_commute:\nassumes [simp]: \"x \\<in> var\" \"y \\<in> var\" \"\\<phi> \\<in> fmla\"\nshows \"prv (imp (exi x (exi y \\<phi>)) (exi y (exi x \\<phi>)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exi x (exi y \\<phi>)) (exi y (exi x \\<phi>)))", "apply(rule nprv_prvI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {} (imp (exi x (exi y \\<phi>)) (exi y (exi x \\<phi>)))", "apply(rule nprv_impI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exi x (exi y \\<phi>)} (exi y (exi x \\<phi>))", "by (rule nprv_exi_commute, auto)"], ["", "end"], ["", "(* context Deduct_with_False_Disj *)"], ["", "section \\<open>Natural Deduction for the Exists-Unique Quantifier\\<close>"], ["", "context Deduct_with_False_Disj_Rename\nbegin"], ["", "lemma nprv_exuI:\nassumes n1: \"nprv F (subst \\<phi> t x)\" and n2: \"nprv (insert \\<phi> F) (eql (Var x) t)\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\"   \"x \\<notin> FvarsT t\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F (exu x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "define z where \"z \\<equiv> getFr [x] [t] [\\<phi>]\""], ["proof (state)\nthis:\n  z \\<equiv> getFr [x] [t] [\\<phi>]\n\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "have z_facts[simp]: \"z \\<in> var\" \"z \\<noteq> x\" \"x \\<noteq> z\"   \"z \\<notin> FvarsT t\" \"z \\<notin> Fvars \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x) &&&\n    x \\<noteq> z &&& z \\<notin> FvarsT t &&& z \\<notin> Fvars \\<phi>", "using getFr_FvarsT_Fvars[of \"[x]\" \"[t]\" \"[\\<phi>]\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [t] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> getFr [x] [t] [\\<phi>] \\<in> var \\<and>\n                    getFr [x] [t] [\\<phi>] \\<notin> set [x] \\<and>\n                    (?t \\<in> set [t] \\<longrightarrow>\n                     getFr [x] [t] [\\<phi>] \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     getFr [x] [t] [\\<phi>] \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x) &&&\n    x \\<noteq> z &&& z \\<notin> FvarsT t &&& z \\<notin> Fvars \\<phi>", "unfolding z_def[symmetric]"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [t] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> z \\<in> var \\<and>\n                    z \\<notin> set [x] \\<and>\n                    (?t \\<in> set [t] \\<longrightarrow>\n                     z \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     z \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x) &&&\n    x \\<noteq> z &&& z \\<notin> FvarsT t &&& z \\<notin> Fvars \\<phi>", "by auto"], ["proof (state)\nthis:\n  z \\<in> var\n  z \\<noteq> x\n  x \\<noteq> z\n  z \\<notin> FvarsT t\n  z \\<notin> Fvars \\<phi>\n\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "have 0: \"exu x \\<phi> = cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. exu x \\<phi> =\n    cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))", "by (simp add: exu_def_var[of _ z])"], ["proof (state)\nthis:\n  exu x \\<phi> =\n  cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))\n\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "unfolding 0"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F\n     (cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z))))))", "apply(rule nprv_cnjI, auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. nprv F (exi x \\<phi>)\n 2. nprv F (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))", "apply(rule nprv_exiI[of _ _ t], auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. nprv F (subst \\<phi> t x)\n 2. nprv F (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))", "apply(rule n1)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))", "(**)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))", "apply(rule nprv_exiI[of _ _ t], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (all x (imp \\<phi> (eql (Var x) t)))", "apply(rule nprv_allI, insert u, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> Fvars xa \\<Longrightarrow>\n    nprv F (imp \\<phi> (eql (Var x) t))", "apply(rule nprv_impI, insert n2, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  nprv F (exu x \\<phi>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma nprv_exuI_var:\nassumes n1: \"nprv F (subst \\<phi> t x)\" and n2: \"nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"t \\<in> trm\" \"x \\<in> var\"\n\"y \\<in> var\" \"y \\<notin> FvarsT t\" and u: \"y \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\" and yx: \"y = x \\<or> y \\<notin> Fvars \\<phi>\"\nshows \"nprv F (exu x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "apply(subst exu_rename2[of _ _ y])"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<phi> \\<in> fmla\n 2. x \\<in> var\n 3. y \\<in> var\n 4. y = x \\<or> y \\<notin> Fvars \\<phi>\n 5. nprv F (exu y (subst \\<phi> (Var y) x))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> \\<in> fmla", "by auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. x \\<in> var\n 2. y \\<in> var\n 3. y = x \\<or> y \\<notin> Fvars \\<phi>\n 4. nprv F (exu y (subst \\<phi> (Var y) x))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> var", "by auto"], ["proof (prove)\ngoal (3 subgoals):\n 1. y \\<in> var\n 2. y = x \\<or> y \\<notin> Fvars \\<phi>\n 3. nprv F (exu y (subst \\<phi> (Var y) x))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> var", "by auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. y = x \\<or> y \\<notin> Fvars \\<phi>\n 2. nprv F (exu y (subst \\<phi> (Var y) x))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. y = x \\<or> y \\<notin> Fvars \\<phi>", "using yx"], ["proof (prove)\nusing this:\n  y = x \\<or> y \\<notin> Fvars \\<phi>\n\ngoal (1 subgoal):\n 1. y = x \\<or> y \\<notin> Fvars \\<phi>", "by auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu y (subst \\<phi> (Var y) x))", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu y (subst \\<phi> (Var y) x))", "apply(intro nprv_exuI[of _ _ t])"], ["proof (prove)\ngoal (9 subgoals):\n 1. nprv F (subst (subst \\<phi> (Var y) x) t y)\n 2. nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\n 3. F \\<subseteq> fmla\n 4. finite F\n 5. subst \\<phi> (Var y) x \\<in> fmla\n 6. t \\<in> trm\n 7. y \\<in> var\n 8. y \\<notin> FvarsT t\n 9. y \\<notin> \\<Union> (Fvars ` F)", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (subst (subst \\<phi> (Var y) x) t y)", "by (metis i(3) i(4) i(5) i(6) n1 subst_same_Var subst_subst yx)"], ["proof (prove)\ngoal (8 subgoals):\n 1. nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\n 2. F \\<subseteq> fmla\n 3. finite F\n 4. subst \\<phi> (Var y) x \\<in> fmla\n 5. t \\<in> trm\n 6. y \\<in> var\n 7. y \\<notin> FvarsT t\n 8. y \\<notin> \\<Union> (Fvars ` F)", "using n2 u"], ["proof (prove)\nusing this:\n  nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\n  y \\<notin> \\<Union> (Fvars ` F)\n\ngoal (8 subgoals):\n 1. nprv (insert (subst \\<phi> (Var y) x) F) (eql (Var y) t)\n 2. F \\<subseteq> fmla\n 3. finite F\n 4. subst \\<phi> (Var y) x \\<in> fmla\n 5. t \\<in> trm\n 6. y \\<in> var\n 7. y \\<notin> FvarsT t\n 8. y \\<notin> \\<Union> (Fvars ` F)", "by auto"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "text \\<open>This turned out to be the most useful introduction rule for arithmetic:\\<close>"], ["", "lemma nprv_exuI_exi:\nassumes n1: \"nprv F (exi x \\<phi>)\" and n2: \"nprv (insert (subst \\<phi> (Var y) x) (insert \\<phi> F)) (eql (Var y) (Var x))\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"y \\<in> var\" \"y \\<noteq> x\" \"y \\<notin> Fvars \\<phi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\" \"y \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F (exu x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "have e: \"nprv (insert \\<phi> F) (exu x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert \\<phi> F) (exu x \\<phi>)", "apply(rule nprv_exuI_var[of _ _ \"Var x\" _ y])"], ["proof (prove)\ngoal (11 subgoals):\n 1. nprv (insert \\<phi> F) (subst \\<phi> (Var x) x)\n 2. nprv (insert (subst \\<phi> (Var y) x) (insert \\<phi> F))\n     (eql (Var y) (Var x))\n 3. insert \\<phi> F \\<subseteq> fmla\n 4. finite (insert \\<phi> F)\n 5. \\<phi> \\<in> fmla\n 6. Var x \\<in> trm\n 7. x \\<in> var\n 8. y \\<in> var\n 9. y \\<notin> FvarsT (Var x)\n 10. y \\<notin> \\<Union> (Fvars ` insert \\<phi> F)\nA total of 11 subgoals...", "using n2 u"], ["proof (prove)\nusing this:\n  nprv (insert (subst \\<phi> (Var y) x) (insert \\<phi> F))\n   (eql (Var y) (Var x))\n  x \\<notin> \\<Union> (Fvars ` F)\n  y \\<notin> \\<Union> (Fvars ` F)\n\ngoal (11 subgoals):\n 1. nprv (insert \\<phi> F) (subst \\<phi> (Var x) x)\n 2. nprv (insert (subst \\<phi> (Var y) x) (insert \\<phi> F))\n     (eql (Var y) (Var x))\n 3. insert \\<phi> F \\<subseteq> fmla\n 4. finite (insert \\<phi> F)\n 5. \\<phi> \\<in> fmla\n 6. Var x \\<in> trm\n 7. x \\<in> var\n 8. y \\<in> var\n 9. y \\<notin> FvarsT (Var x)\n 10. y \\<notin> \\<Union> (Fvars ` insert \\<phi> F)\nA total of 11 subgoals...", "by auto"], ["proof (state)\nthis:\n  nprv (insert \\<phi> F) (exu x \\<phi>)\n\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F (exu x \\<phi>)", "apply(rule nprv_cut[OF n1], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv (insert (exi x \\<phi>) F) (exu x \\<phi>)", "apply(rule nprv_exiE0, insert u, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>xa\\<in>F. x \\<notin> Fvars xa;\n     \\<forall>x\\<in>F. y \\<notin> Fvars x\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<phi> (insert (exi x \\<phi>) F))\n                       (exu x \\<phi>)", "apply(rule nprv_mono[OF e], auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  nprv F (exu x \\<phi>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma prv_exu_imp_exi:\nassumes [simp]: \"\\<phi> \\<in> fmla\" \"x \\<in> var\"\nshows \"prv (imp (exu x \\<phi>) (exi x \\<phi>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>) (exi x \\<phi>))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>) (exi x \\<phi>))", "define z where z: \"z \\<equiv> getFr [x] [] [\\<phi>]\""], ["proof (state)\nthis:\n  z \\<equiv> getFr [x] [] [\\<phi>]\n\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>) (exi x \\<phi>))", "have z_facts[simp]: \"z \\<in> var\" \"z \\<noteq> x\" \"x \\<noteq> z\" \"z \\<notin> Fvars \\<phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x) &&&\n    x \\<noteq> z &&& z \\<notin> Fvars \\<phi>", "using getFr_FvarsT_Fvars[of \"[x]\" \"[]\" \"[\\<phi>]\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> getFr [x] [] [\\<phi>] \\<in> var \\<and>\n                    getFr [x] [] [\\<phi>] \\<notin> set [x] \\<and>\n                    (?t \\<in> set [] \\<longrightarrow>\n                     getFr [x] [] [\\<phi>] \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     getFr [x] [] [\\<phi>] \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x) &&&\n    x \\<noteq> z &&& z \\<notin> Fvars \\<phi>", "unfolding z"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> getFr [x] [] [\\<phi>] \\<in> var \\<and>\n                    getFr [x] [] [\\<phi>] \\<notin> set [x] \\<and>\n                    (?t \\<in> set [] \\<longrightarrow>\n                     getFr [x] [] [\\<phi>] \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     getFr [x] [] [\\<phi>] \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (getFr [x] [] [\\<phi>] \\<in> var &&&\n     getFr [x] [] [\\<phi>] \\<noteq> x) &&&\n    x \\<noteq> getFr [x] [] [\\<phi>] &&&\n    getFr [x] [] [\\<phi>] \\<notin> Fvars \\<phi>", "by auto"], ["proof (state)\nthis:\n  z \\<in> var\n  z \\<noteq> x\n  x \\<noteq> z\n  z \\<notin> Fvars \\<phi>\n\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>) (exi x \\<phi>))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>) (exi x \\<phi>))", "unfolding exu_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (let y = getFr [x] [] [\\<phi>]\n              in cnj (exi x \\<phi>)\n                  (exi y (all x (imp \\<phi> (eql (Var x) (Var y))))))\n          (exi x \\<phi>))", "by (simp add: Let_def z[symmetric] prv_imp_cnjL)"], ["proof (state)\nthis:\n  prv (imp (exu x \\<phi>) (exi x \\<phi>))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma prv_exu_exi:\n  assumes \"x \\<in> var\" \"\\<phi> \\<in> fmla\" \"prv (exu x \\<phi>)\"\n  shows \"prv (exi x \\<phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (exi x \\<phi>)", "by (meson assms exi exu prv_exu_imp_exi prv_imp_mp)"], ["", "text \\<open>This is just exu behaving for elimination and forward like exi:\\<close>"], ["", "lemma nprv_exuE_exi:\nassumes n1: \"nprv F (exu x \\<phi>)\" and n2: \"nprv (insert \\<phi> F) \\<psi>\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\" \"x \\<notin> Fvars \\<psi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using assms"], ["proof (prove)\nusing this:\n  nprv F (exu x \\<phi>)\n  nprv (insert \\<phi> F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  x \\<in> var\n  \\<psi> \\<in> fmla\n  x \\<notin> Fvars \\<psi>\n  x \\<notin> \\<Union> (Fvars ` F)\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "apply-"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv F \\<psi>", "apply(rule nprv_exiE[of _ x \\<phi>])"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv F (exi x \\<phi>)\n 2. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<phi> F) \\<psi>\n 3. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 4. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 5. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> \\<phi> \\<in> fmla\n 6. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<in> var\n 7. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 8. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> \\<Union> (Fvars ` F)\n 9. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> Fvars \\<psi>", "subgoal"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv F (exi x \\<phi>)", "by (rule nprv_addImpLemmaI[OF prv_exu_imp_exi[of \\<phi> x]]) auto"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> nprv (insert \\<phi> F) \\<psi>\n 2. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> F \\<subseteq> fmla\n 3. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> finite F\n 4. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> \\<phi> \\<in> fmla\n 5. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<in> var\n 6. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> \\<psi> \\<in> fmla\n 7. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> \\<Union> (Fvars ` F)\n 8. \\<lbrakk>nprv F (exu x \\<phi>); nprv (insert \\<phi> F) \\<psi>;\n     F \\<subseteq> fmla; finite F; \\<phi> \\<in> fmla; x \\<in> var;\n     \\<psi> \\<in> fmla; x \\<notin> Fvars \\<psi>;\n     x \\<notin> \\<Union> (Fvars ` F)\\<rbrakk>\n    \\<Longrightarrow> x \\<notin> Fvars \\<psi>", "by auto"], ["", "lemma nprv_exuF_exi:\nassumes n1: \"exu x \\<phi> \\<in> F\" and n2: \"nprv (insert \\<phi> F) \\<psi>\"\nand i[simp]: \"F \\<subseteq> fmla\" \"finite F\" \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"\\<psi> \\<in> fmla\" \"x \\<notin> Fvars \\<psi>\"\nand u: \"x \\<notin> (\\<Union>\\<phi> \\<in> F. Fvars \\<phi>)\"\nshows \"nprv F \\<psi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "using assms  nprv_exuE_exi nprv_hyp"], ["proof (prove)\nusing this:\n  exu x \\<phi> \\<in> F\n  nprv (insert \\<phi> F) \\<psi>\n  F \\<subseteq> fmla\n  finite F\n  \\<phi> \\<in> fmla\n  x \\<in> var\n  \\<psi> \\<in> fmla\n  x \\<notin> Fvars \\<psi>\n  x \\<notin> \\<Union> (Fvars ` F)\n  \\<lbrakk>nprv ?F (exu ?x ?\\<phi>); nprv (insert ?\\<phi> ?F) ?\\<psi>;\n   ?F \\<subseteq> fmla; finite ?F; ?\\<phi> \\<in> fmla; ?x \\<in> var;\n   ?\\<psi> \\<in> fmla; ?x \\<notin> Fvars ?\\<psi>;\n   ?x \\<notin> \\<Union> (Fvars ` ?F)\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<psi>\n  \\<lbrakk>?\\<phi> \\<in> ?F; ?F \\<subseteq> fmla; finite ?F\\<rbrakk>\n  \\<Longrightarrow> nprv ?F ?\\<phi>\n\ngoal (1 subgoal):\n 1. nprv F \\<psi>", "by metis"], ["", "lemma prv_exu_uni:\nassumes [simp]: \"\\<phi> \\<in> fmla\" \"x \\<in> var\" \"t1 \\<in> trm\" \"t2 \\<in> trm\"\nshows \"prv (imp (exu x \\<phi>) (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>)\n          (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>)\n          (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "define z where z: \"z \\<equiv> getFr [x] [t1,t2] [\\<phi>]\""], ["proof (state)\nthis:\n  z \\<equiv> getFr [x] [t1, t2] [\\<phi>]\n\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>)\n          (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "have z_facts[simp]: \"z \\<in> var\" \"z \\<noteq> x\" \"x \\<noteq> z\" \"z \\<notin> Fvars \\<phi>\"  \"z \\<notin> FvarsT t1\" \"z \\<notin> FvarsT t2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x &&& x \\<noteq> z) &&&\n    z \\<notin> Fvars \\<phi> &&&\n    z \\<notin> FvarsT t1 &&& z \\<notin> FvarsT t2", "using getFr_FvarsT_Fvars[of \"[x]\" \"[t1,t2]\" \"[\\<phi>]\"]"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [t1, t2] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> getFr [x] [t1, t2] [\\<phi>] \\<in> var \\<and>\n                    getFr [x] [t1, t2] [\\<phi>] \\<notin> set [x] \\<and>\n                    (?t \\<in> set [t1, t2] \\<longrightarrow>\n                     getFr [x] [t1, t2] [\\<phi>] \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     getFr [x] [t1, t2] [\\<phi>] \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (z \\<in> var &&& z \\<noteq> x &&& x \\<noteq> z) &&&\n    z \\<notin> Fvars \\<phi> &&&\n    z \\<notin> FvarsT t1 &&& z \\<notin> FvarsT t2", "unfolding z"], ["proof (prove)\nusing this:\n  \\<lbrakk>set [x] \\<subseteq> var; set [t1, t2] \\<subseteq> trm;\n   set [\\<phi>] \\<subseteq> fmla\\<rbrakk>\n  \\<Longrightarrow> getFr [x] [t1, t2] [\\<phi>] \\<in> var \\<and>\n                    getFr [x] [t1, t2] [\\<phi>] \\<notin> set [x] \\<and>\n                    (?t \\<in> set [t1, t2] \\<longrightarrow>\n                     getFr [x] [t1, t2] [\\<phi>] \\<notin> FvarsT ?t) \\<and>\n                    (?\\<phi> \\<in> set [\\<phi>] \\<longrightarrow>\n                     getFr [x] [t1, t2] [\\<phi>] \\<notin> Fvars ?\\<phi>)\n\ngoal (1 subgoal):\n 1. (getFr [x] [t1, t2] [\\<phi>] \\<in> var &&&\n     getFr [x] [t1, t2] [\\<phi>] \\<noteq> x &&&\n     x \\<noteq> getFr [x] [t1, t2] [\\<phi>]) &&&\n    getFr [x] [t1, t2] [\\<phi>] \\<notin> Fvars \\<phi> &&&\n    getFr [x] [t1, t2] [\\<phi>] \\<notin> FvarsT t1 &&&\n    getFr [x] [t1, t2] [\\<phi>] \\<notin> FvarsT t2", "by auto"], ["proof (state)\nthis:\n  z \\<in> var\n  z \\<noteq> x\n  x \\<noteq> z\n  z \\<notin> Fvars \\<phi>\n  z \\<notin> FvarsT t1\n  z \\<notin> FvarsT t2\n\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>)\n          (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. prv (imp (exu x \\<phi>)\n          (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "apply(rule nprv_prvI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {}\n     (imp (exu x \\<phi>)\n       (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))", "apply(rule nprv_impI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exu x \\<phi>}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(simp add: exu_def_var[of _ z])"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_cnjE0, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {exi x \\<phi>, exi z (all x (imp \\<phi> (eql (Var x) (Var z)))),\n      cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_clear3_1, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {exi z (all x (imp \\<phi> (eql (Var x) (Var z)))),\n      cnj (exi x \\<phi>) (exi z (all x (imp \\<phi> (eql (Var x) (Var z)))))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_clear2_2, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {exi z (all x (imp \\<phi> (eql (Var x) (Var z))))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_exiE0, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {all x (imp \\<phi> (eql (Var x) (Var z))),\n      exi z (all x (imp \\<phi> (eql (Var x) (Var z))))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_clear2_2, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {all x (imp \\<phi> (eql (Var x) (Var z)))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_allE0[of _ _ _ t1], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {imp (subst \\<phi> t1 x) (eql t1 (Var z)),\n      all x (imp \\<phi> (eql (Var x) (Var z)))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_allE0[of _ _ _ t2], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z)),\n      all x (imp \\<phi> (eql (Var x) (Var z)))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_clear3_3, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2)))", "apply(rule nprv_impI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {subst \\<phi> t1 x, imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (imp (subst \\<phi> t2 x) (eql t1 t2))", "apply(rule nprv_impI, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {subst \\<phi> t2 x, subst \\<phi> t1 x,\n      imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_impE01, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {eql t2 (Var z), subst \\<phi> t2 x, subst \\<phi> t1 x,\n      imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_clear5_2, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {eql t2 (Var z), subst \\<phi> t1 x,\n      imp (subst \\<phi> t2 x) (eql t2 (Var z)),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_clear4_3, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {eql t2 (Var z), subst \\<phi> t1 x,\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_impE01, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {eql t1 (Var z), eql t2 (Var z), subst \\<phi> t1 x,\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_clear4_3, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv\n     {eql t1 (Var z), eql t2 (Var z),\n      imp (subst \\<phi> t1 x) (eql t1 (Var z))}\n     (eql t1 t2)", "apply(rule nprv_clear3_3, auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {eql t1 (Var z), eql t2 (Var z)} (eql t1 t2)", "apply(rule nprv_eql_symE0[of t2 \"Var z\"], auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. nprv {eql (Var z) t2, eql t1 (Var z), eql t2 (Var z)} (eql t1 t2)", "apply(rule nprv_eql_transE012, auto)"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\nthis:\n  prv (imp (exu x \\<phi>)\n        (imp (subst \\<phi> t1 x) (imp (subst \\<phi> t2 x) (eql t1 t2))))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemmas nprv_exuE_uni = nprv_addImp3LemmaE[OF prv_exu_uni,simped,rotated 4]"], ["", "lemmas nprv_exuF_uni = nprv_exuE_uni[OF nprv_hyp,simped]"], ["", "end \\<comment> \\<open>context @{locale Deduct_with_False_Disj}\\<close>"], ["", "section \\<open>Eisbach Notation for Natural Deduction Proofs\\<close>"], ["", "text \\<open>The proof pattern will be: On a goal of the form @{term \"nprv F \\<phi>\"},\nwe apply a rule (usually an introduction, elimination, or cut/lemma-addition\nrule), then discharge the side-conditions with @{method auto}, ending up with zero,\none or two goals of the same nprv-shape. This process is abstracted away in the\nEisbach nrule method:\\<close>"], ["", "method nrule uses r = (rule r, auto?)"], ["", "(* For future developments, in case we refine what we do\n(and also for documentation): This is supposed to create two main nprv-subgoals: *)"], ["", "method nrule2 uses r = (rule r, auto?)"], ["", "text \\<open>Methods for chaining several nrule applications:\\<close>"], ["", "method nprover2 uses r1 r2 =\n  (-,(((nrule r: r1)?, (nrule r: r2)?) ; fail))"], ["", "method nprover3 uses r1 r2 r3 =\n  (-,(((nrule r: r1)?, (nrule r: r2)?, (nrule r: r3)?) ; fail))"], ["", "method nprover4 uses r1 r2 r3 r4 =\n  (-,(((nrule r: r1)?, (nrule r: r2)?, (nrule r: r3)?, (nrule r: r4)?) ; fail))"], ["", "method nprover5 uses r1 r2 r3 r4 r5 =\n  (-,((nrule r: r1)?, (nrule r: r2)?, (nrule r: r3)?,\n   (nrule r: r4)?, (nrule r: r5)?) ; fail)"], ["", "method nprover6 uses r1 r2 r3 r4 r5 r6 =\n  (-,((nrule r: r1)?, (nrule r: r2)?, (nrule r: r3)?,\n   (nrule r: r4)?, (nrule r: r5)?, (nrule r: r6)?) ; fail)"], ["", "(*<*)"], ["", "end"], ["", "(*>*)"]]}