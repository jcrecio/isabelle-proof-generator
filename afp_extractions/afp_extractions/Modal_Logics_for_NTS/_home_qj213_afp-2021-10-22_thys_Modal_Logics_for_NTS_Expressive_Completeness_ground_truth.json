{"file_name": "/home/qj213/afp-2021-10-22/thys/Modal_Logics_for_NTS/Expressive_Completeness.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Modal_Logics_for_NTS", "problem_names": ["lemma distinguishing_formula_card_aux:\n    \"|{-p \\<bullet> (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True}| <o natLeq +c |UNIV :: 'idx set|\"", "lemma distinguishing_formula_supp_aux:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"supp (Abs_bset {-p \\<bullet> (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True} :: _ set['idx]) \\<subseteq> supp P\"", "lemma distinguishing_formula_eqvt [simp]:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"p \\<bullet> distinguishing_formula P Q = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\"", "lemma supp_distinguishing_formula:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"supp (distinguishing_formula P Q) \\<subseteq> supp P\"", "lemma distinguishing_formula_distinguishes:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"(distinguishing_formula P Q) distinguishes P from Q\"", "lemma characteristic_formula_card_aux:\n    \"|{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}| <o natLeq +c |UNIV :: 'idx set|\"", "lemma characteristic_formula_supp_aux:\n    shows \"supp (Abs_bset {distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)} :: _ set['idx]) \\<subseteq> supp P\"", "lemma characteristic_formula_eqvt (*[eqvt]*) [simp]:\n    \"p \\<bullet> characteristic_formula P = characteristic_formula (p \\<bullet> P)\"", "lemma characteristic_formula_eqvt_raw [simp]:\n    \"p \\<bullet> characteristic_formula = characteristic_formula\"", "lemma characteristic_formula_is_characteristic':\n    \"Q \\<Turnstile> characteristic_formula P \\<longleftrightarrow> P =\\<cdot> Q\"", "lemma characteristic_formula_is_characteristic:\n    \"Q \\<Turnstile> characteristic_formula P \\<longleftrightarrow> P \\<sim>\\<cdot> Q\"", "theorem expressive_completeness:\n    assumes \"finite (supp S)\"\n    and \"\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<sim>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\"\n    shows \"P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) \\<longleftrightarrow> P \\<in> S\""], "translations": [["", "lemma distinguishing_formula_card_aux:\n    \"|{-p \\<bullet> (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True}| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "let ?some = \"\\<lambda>p. (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"?B \\<subseteq> (\\<lambda>p. -p \\<bullet> ?some p) ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {- p \\<bullet> (SOME x.\n                       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n     p. True}\n    \\<subseteq> range\n                 (\\<lambda>p.\n                     - p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))", "by auto"], ["proof (state)\nthis:\n  {- p \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "then"], ["proof (chain)\npicking this:\n  {- p \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))", "have \"|?B| \\<le>o |UNIV :: perm set|\""], ["proof (prove)\nusing this:\n  {- p \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| \\<le>o\n    |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: perm set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_perm)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "finally"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma distinguishing_formula_supp_aux:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"supp (Abs_bset {-p \\<bullet> (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True} :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "let ?some = \"\\<lambda>p. (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> Q", "have \"\\<not> (p \\<bullet> P =\\<cdot> p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q", "by (metis logically_equivalent_eqvt permute_minus_cancel(2))"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q", "have \"supp (?some p) \\<subseteq> supp (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. supp\n     (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n    \\<subseteq> supp (p \\<bullet> P)", "using distinguished_bounded_support"], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q\n  \\<lbrakk>?x distinguishes ?P from ?Q;\n   \\<And>y.\n      \\<lbrakk>supp y \\<subseteq> supp ?P;\n       y distinguishes ?P from ?Q\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. supp\n     (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n    \\<subseteq> supp (p \\<bullet> P)", "by (metis (mono_tags, lifting) equivalent_iff_not_distinguished someI_ex)"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n  \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "note supp_some = this"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "{"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}", "obtain p where \"x = -p \\<bullet> ?some p\""], ["proof (prove)\nusing this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        x =\n        - p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p \\<bullet> (SOME x.\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "with supp_some"], ["proof (chain)\npicking this:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n  x =\n  - p \\<bullet> (SOME x.\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "have \"supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  supp\n   (SOME x.\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n  x =\n  - p \\<bullet> (SOME x.\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)", "by simp"], ["proof (state)\nthis:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)", "have \"supp x \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp x \\<subseteq> supp P", "by (metis (full_types) permute_boolE subset_eqvt supp_eqvt)"], ["proof (state)\nthis:\n  supp x \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "note \"*\" = this"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "have supp_B: \"supp ?B \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}\n    \\<subseteq> supp P", "by (rule set_bounded_supp, fact finite_supp, cut_tac \"*\", blast)"], ["proof (state)\nthis:\n  supp\n   {- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "from supp_B and distinguishing_formula_card_aux"], ["proof (chain)\npicking this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by blast"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinguishing_formula_eqvt [simp]:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"p \\<bullet> distinguishing_formula P Q = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?some = \"\\<lambda>p. (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "with distinguishing_formula_card_aux"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "have *: \"p \\<bullet> Conj (Abs_bset ?B) = Conj (Abs_bset (p \\<bullet> ?B))\""], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {- p \\<bullet> (SOME x.\nsupp x \\<subseteq> supp (p \\<bullet> P) \\<and>\nx distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                    p. True}) =\n    Conj\n     (Abs_bset\n       (p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}))", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?some' = \"\\<lambda>p'. (\\<some>x. supp x \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and> x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?B' = \"{-p' \\<bullet> ?some' p'|p'. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "have \"p \\<bullet> ?B = ?B'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True} =\n    {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "fix px"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "assume \"px \\<in> p \\<bullet> ?B\""], ["proof (state)\nthis:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}", "obtain x where 1: \"px = p \\<bullet> x\" and 2: \"x \\<in> ?B\""], ["proof (prove)\nusing this:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>px = p \\<bullet> x;\n         x \\<in> {- p \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) image_iff permute_set_eq_image)"], ["proof (state)\nthis:\n  px = p \\<bullet> x\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}", "obtain p' where 3: \"x = -p' \\<bullet> ?some p'\""], ["proof (prove)\nusing this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        x =\n        - p' \\<bullet> (SOME x.\n                           supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                           x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "from 1 and 3"], ["proof (chain)\npicking this:\n  px = p \\<bullet> x\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))", "have \"px = -(p' - p) \\<bullet> ?some' (p' - p)\""], ["proof (prove)\nusing this:\n  px = p \\<bullet> x\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. px =\n    - (p' -\n       p) \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp\n                                     ((p' -\n p) \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes ((p' -\n    p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))", "by simp"], ["proof (state)\nthis:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))", "have \"px \\<in> ?B'\""], ["proof (prove)\nusing this:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. px \\<in> {- p' \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp\n        (p' \\<bullet> p \\<bullet> P) \\<and>\n                                 x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n              p'. True}", "by blast"], ["proof (state)\nthis:\n  px \\<in> {- p' \\<bullet> (SOME x.\n                               supp x\n                               \\<subseteq> supp\n      (p' \\<bullet> p \\<bullet> P) \\<and>\n                               x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n            p'. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "}"], ["proof (state)\nthis:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}", "show \"p \\<bullet> ?B \\<subseteq> ?B'\""], ["proof (prove)\nusing this:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}", "by blast"], ["proof (state)\nthis:\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True}\n  \\<subseteq> {- p' \\<bullet> (SOME x.\n                                  supp x\n                                  \\<subseteq> supp\n         (p' \\<bullet> p \\<bullet> P) \\<and>\n                                  x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n               p'. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "assume \"x \\<in> ?B'\""], ["proof (state)\nthis:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}", "obtain p' where \"x = -p' \\<bullet> ?some' p'\""], ["proof (prove)\nusing this:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        x =\n        - p' \\<bullet> (SOME x.\n                           supp x\n                           \\<subseteq> supp\n  (p' \\<bullet> p \\<bullet> P) \\<and>\n                           x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))", "have \"x = p \\<bullet> -(p' + p) \\<bullet> ?some (p' + p)\""], ["proof (prove)\nusing this:\n  x =\n  - p' \\<bullet> (SOME x.\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. x =\n    p \\<bullet> - (p' +\n                   p) \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp\n           ((p' + p) \\<bullet> P) \\<and>\n                                    x distinguishes ((p' +\n                p) \\<bullet> P) from ((p' + p) \\<bullet> Q))", "by (simp add: add.inverse_distrib_swap)"], ["proof (state)\nthis:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))", "have \"x \\<in> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                         p. True}", "using mem_permute_iff"], ["proof (prove)\nusing this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n  (?p \\<bullet> ?x \\<in> ?p \\<bullet> ?X) = (?x \\<in> ?X)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                         p. True}", "by blast"], ["proof (state)\nthis:\n  x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n   supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                       p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}", "show \"?B' \\<subseteq> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "by blast"], ["proof (state)\nthis:\n  {- p' \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n  \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                           p. True}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "with \"*\""], ["proof (chain)\npicking this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_formula P Q =\n    distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "unfolding distinguishing_formula_def"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {- p \\<bullet> (SOME x.\nsupp x \\<subseteq> supp (p \\<bullet> P) \\<and>\nx distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                    p. True}) =\n    Conj\n     (Abs_bset\n       {- pa \\<bullet> (SOME x.\n                           supp x\n                           \\<subseteq> supp\n  (pa \\<bullet> p \\<bullet> P) \\<and>\n                           x distinguishes (pa \\<bullet> p \\<bullet> P) from (pa \\<bullet> p \\<bullet> Q)) |\n        pa. True})", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> distinguishing_formula P Q =\n  distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma supp_distinguishing_formula:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"supp (distinguishing_formula P Q) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "let ?some = \"\\<lambda>p. (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "let ?B = \"{- p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "moreover"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "from this"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "ultimately"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "show ?thesis"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp (distinguishing_formula P Q) \\<subseteq> supp P", "unfolding distinguishing_formula_def"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp\n     (Conj\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))\n    \\<subseteq> supp P", "by simp"], ["proof (state)\nthis:\n  supp (distinguishing_formula P Q) \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinguishing_formula_distinguishes:\n    assumes \"\\<not> (P =\\<cdot> Q)\"\n    shows \"(distinguishing_formula P Q) distinguishes P from Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "let ?some = \"\\<lambda>p. (\\<some>x. supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "let ?B = \"{- p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "have \"(?some p) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (SOME x.\n        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)", "using assms"], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. (SOME x.\n        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)", "by (metis (mono_tags, lifting) is_distinguishing_formula_eqvt distinguished_bounded_support equivalent_iff_not_distinguished someI_ex)"], ["proof (state)\nthis:\n  (SOME x.\n      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  (SOME x.\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "note some_distinguishes = this"], ["proof (state)\nthis:\n  (SOME x.\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "{"], ["proof (state)\nthis:\n  (SOME x.\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "with distinguishing_formula_card_aux"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "have \"P' \\<Turnstile> distinguishing_formula P Q \\<longleftrightarrow> (\\<forall>x\\<in>?B. P' \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile> distinguishing_formula P Q =\n    (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}.\n        P' \\<Turnstile> x)", "unfolding distinguishing_formula_def"], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile>\n    Conj\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}) =\n    (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}.\n        P' \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P' \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      P' \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "note valid_distinguishing_formula = this"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "{"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "have \"P \\<Turnstile> -p \\<bullet> ?some p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile>\n    - p \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "by (metis (mono_tags) is_distinguishing_formula_def permute_minus_cancel(2) some_distinguishes valid_eqvt)"], ["proof (state)\nthis:\n  P \\<Turnstile>\n  - p \\<bullet> (SOME x.\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "then"], ["proof (chain)\npicking this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))", "have \"P \\<Turnstile> distinguishing_formula P Q\""], ["proof (prove)\nusing this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> distinguishing_formula P Q", "using valid_distinguishing_formula"], ["proof (prove)\nusing this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  ?P'9 \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> distinguishing_formula P Q", "by blast"], ["proof (state)\nthis:\n  P \\<Turnstile> distinguishing_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "moreover"], ["proof (state)\nthis:\n  P \\<Turnstile> distinguishing_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "have \"\\<not> Q \\<Turnstile> distinguishing_formula P Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> Q \\<Turnstile> distinguishing_formula P Q", "using valid_distinguishing_formula"], ["proof (prove)\nusing this:\n  ?P'9 \\<Turnstile> distinguishing_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. \\<not> Q \\<Turnstile> distinguishing_formula P Q", "by (metis (mono_tags, lifting) is_distinguishing_formula_def mem_Collect_eq permute_minus_cancel(1) some_distinguishes valid_eqvt)"], ["proof (state)\nthis:\n  \\<not> Q \\<Turnstile> distinguishing_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "ultimately"], ["proof (chain)\npicking this:\n  P \\<Turnstile> distinguishing_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_formula P Q", "show \"(distinguishing_formula P Q) distinguishes P from Q\""], ["proof (prove)\nusing this:\n  P \\<Turnstile> distinguishing_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "using is_distinguishing_formula_def"], ["proof (prove)\nusing this:\n  P \\<Turnstile> distinguishing_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_formula P Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n\ngoal (1 subgoal):\n 1. distinguishing_formula P Q distinguishes P from Q", "by blast"], ["proof (state)\nthis:\n  distinguishing_formula P Q distinguishes P from Q\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Characteristic formulas\\<close>"], ["", "text \\<open>A \\emph{characteristic formula} for a state~$P$ is valid for (exactly) those states that are\n    bisimilar to~$P$.\\<close>"], ["", "definition characteristic_formula :: \"'state \\<Rightarrow> ('idx, 'pred, 'act) formula\" where\n    \"characteristic_formula P \\<equiv> Conj (Abs_bset {distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)})\"\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma characteristic_formula_card_aux:\n    \"|{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "let ?B = \"{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"?B \\<subseteq> (distinguishing_formula P) ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> range (distinguishing_formula P)", "by auto"], ["proof (state)\nthis:\n  {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> range (distinguishing_formula P)\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "then"], ["proof (chain)\npicking this:\n  {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> range (distinguishing_formula P)", "have \"|?B| \\<le>o |UNIV :: 'state set|\""], ["proof (prove)\nusing this:\n  {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> range (distinguishing_formula P)\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| \\<le>o |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| \\<le>o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| \\<le>o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'state set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_state)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "finally"], ["proof (chain)\npicking this:\n  |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}| <o natLeq +c |UNIV|\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma characteristic_formula_supp_aux:\n    shows \"supp (Abs_bset {distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)} :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "let ?B = \"{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "obtain Q where \"x = distinguishing_formula P Q\" and \"\\<not> (P =\\<cdot> Q)\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_formula P Q;\n         \\<not> P =\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "with supp_distinguishing_formula"], ["proof (chain)\npicking this:\n  \\<not> ?P =\\<cdot> ?Q \\<Longrightarrow>\n  supp (distinguishing_formula ?P ?Q) \\<subseteq> supp ?P\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q", "have \"supp x \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> ?P =\\<cdot> ?Q \\<Longrightarrow>\n  supp (distinguishing_formula ?P ?Q) \\<subseteq> supp ?P\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp x \\<subseteq> supp P", "by metis"], ["proof (state)\nthis:\n  supp x \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_formula P Q |Q.\n         \\<not> P =\\<cdot> Q} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "note \"*\" = this"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_formula P Q |Q.\n         \\<not> P =\\<cdot> Q} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "have supp_B: \"supp ?B \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> supp P", "by (rule set_bounded_supp, fact finite_supp, cut_tac \"*\", blast)"], ["proof (state)\nthis:\n  supp {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "from supp_B and characteristic_formula_card_aux"], ["proof (chain)\npicking this:\n  supp {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  supp {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  supp {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "by blast"], ["proof (state)\nthis:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_formula_eqvt (*[eqvt]*) [simp]:\n    \"p \\<bullet> characteristic_formula P = characteristic_formula (p \\<bullet> P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "let ?B = \"{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "by (fact characteristic_formula_supp_aux)"], ["proof (state)\nthis:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "then"], ["proof (chain)\npicking this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "with characteristic_formula_card_aux"], ["proof (chain)\npicking this:\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "have *: \"p \\<bullet> Conj (Abs_bset ?B) = Conj (Abs_bset (p \\<bullet> ?B))\""], ["proof (prove)\nusing this:\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n    Conj\n     (Abs_bset\n       (p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "let ?B' = \"{distinguishing_formula (p \\<bullet> P) Q|Q. \\<not> ((p \\<bullet> P) =\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "have \"p \\<bullet> ?B = ?B'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q} =\n    {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "fix px"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "assume \"px \\<in> p \\<bullet> ?B\""], ["proof (state)\nthis:\n  px \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  px \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "obtain x where 1: \"px = p \\<bullet> x\" and 2: \"x \\<in> ?B\""], ["proof (prove)\nusing this:\n  px \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>px = p \\<bullet> x;\n         x \\<in> {distinguishing_formula P Q |Q.\n                  \\<not> P =\\<cdot> Q}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) image_iff permute_set_eq_image)"], ["proof (state)\nthis:\n  px = p \\<bullet> x\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "obtain Q where 3: \"x = distinguishing_formula P Q\" and 4: \"\\<not> (P =\\<cdot> Q)\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_formula P Q;\n         \\<not> P =\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "with 1"], ["proof (chain)\npicking this:\n  px = p \\<bullet> x\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q", "have \"px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  px = p \\<bullet> x\n  x = distinguishing_formula P Q\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "moreover"], ["proof (state)\nthis:\n  px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "from 4"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> Q", "have \"\\<not> ((p \\<bullet> P) =\\<cdot> (p \\<bullet> Q))\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q", "by (metis logically_equivalent_eqvt permute_minus_cancel(2))"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "ultimately"], ["proof (chain)\npicking this:\n  px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q", "have \"px \\<in> ?B'\""], ["proof (prove)\nusing this:\n  px = distinguishing_formula (p \\<bullet> P) (p \\<bullet> Q)\n  \\<not> p \\<bullet> P =\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. px \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n              \\<not> p \\<bullet> P =\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  px \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n            \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "}"], ["proof (state)\nthis:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_formula P Q |Q.\n                     \\<not> P =\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}\n 2. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_formula P Q |Q.\n                     \\<not> P =\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q}", "show \"p \\<bullet> ?B \\<subseteq> ?B'\""], ["proof (prove)\nusing this:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_formula P Q |Q.\n                     \\<not> P =\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n    \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P =\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n  \\<subseteq> {distinguishing_formula (p \\<bullet> P) Q |Q.\n               \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "assume \"x \\<in> ?B'\""], ["proof (state)\nthis:\n  x \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P =\\<cdot> Q}", "obtain Q where 1: \"x = distinguishing_formula (p \\<bullet> P) Q\" and 2: \"\\<not> ((p \\<bullet> P) =\\<cdot> Q)\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_formula (p \\<bullet> P) Q;\n         \\<not> p \\<bullet> P =\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_formula (p \\<bullet> P) Q\n  \\<not> p \\<bullet> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "from 2"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P =\\<cdot> Q", "have \"\\<not> (P =\\<cdot> (-p \\<bullet> Q))\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> P =\\<cdot> - p \\<bullet> Q", "by (metis logically_equivalent_eqvt permute_minus_cancel(1))"], ["proof (state)\nthis:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "moreover"], ["proof (state)\nthis:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "from this and 1"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n  x = distinguishing_formula (p \\<bullet> P) Q", "have \"x = p \\<bullet> distinguishing_formula P (-p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n  x = distinguishing_formula (p \\<bullet> P) Q\n\ngoal (1 subgoal):\n 1. x = p \\<bullet> distinguishing_formula P (- p \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  x = p \\<bullet> distinguishing_formula P (- p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_formula P (- p \\<bullet> Q)", "have \"x \\<in> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_formula P (- p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "using mem_permute_iff"], ["proof (prove)\nusing this:\n  \\<not> P =\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_formula P (- p \\<bullet> Q)\n  (?p \\<bullet> ?x \\<in> ?p \\<bullet> ?X) = (?x \\<in> ?X)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  x \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q} \\<Longrightarrow>\n  ?x9 \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  ?x9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q} \\<Longrightarrow>\n  ?x9 \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}", "show \"?B' \\<subseteq> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  ?x9\n  \\<in> {distinguishing_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P =\\<cdot> Q} \\<Longrightarrow>\n  ?x9 \\<in> p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P =\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                             \\<not> P =\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  {distinguishing_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P =\\<cdot> Q}\n  \\<subseteq> p \\<bullet> {distinguishing_formula P Q |Q.\n                           \\<not> P =\\<cdot> Q}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q} =\n  {distinguishing_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "with \"*\""], ["proof (chain)\npicking this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n  p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q} =\n  {distinguishing_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P =\\<cdot> Q}", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n  p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q} =\n  {distinguishing_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula P =\n    characteristic_formula (p \\<bullet> P)", "unfolding characteristic_formula_def"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n  p \\<bullet> {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q} =\n  {distinguishing_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P =\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n    Conj\n     (Abs_bset\n       {distinguishing_formula (p \\<bullet> P) Q |Q.\n        \\<not> p \\<bullet> P =\\<cdot> Q})", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> characteristic_formula P =\n  characteristic_formula (p \\<bullet> P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_formula_eqvt_raw [simp]:\n    \"p \\<bullet> characteristic_formula = characteristic_formula\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_formula = characteristic_formula", "by (simp add: permute_fun_def)"], ["", "lemma characteristic_formula_is_characteristic':\n    \"Q \\<Turnstile> characteristic_formula P \\<longleftrightarrow> P =\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "let ?B = \"{distinguishing_formula P Q|Q. \\<not> (P =\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n    \\<subseteq> supp P", "by (fact characteristic_formula_supp_aux)"], ["proof (state)\nthis:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "then"], ["proof (chain)\npicking this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "with characteristic_formula_card_aux"], ["proof (chain)\npicking this:\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))", "have \"P' \\<Turnstile> characteristic_formula P \\<longleftrightarrow> (\\<forall>x\\<in>?B. P' \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile> characteristic_formula P =\n    (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n        P' \\<Turnstile> x)", "unfolding characteristic_formula_def"], ["proof (prove)\nusing this:\n  |{distinguishing_formula ?P Q |Q. \\<not> ?P =\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile>\n    Conj (Abs_bset {distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}) =\n    (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n        P' \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P' \\<Turnstile> characteristic_formula P =\n  (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n      P' \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "}"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> characteristic_formula P =\n  (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "note valid_characteristic_formula = this"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> characteristic_formula P =\n  (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Q \\<Turnstile> characteristic_formula P \\<Longrightarrow> P =\\<cdot> Q\n 2. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "assume *: \"Q \\<Turnstile> characteristic_formula P\""], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_formula P\n\ngoal (2 subgoals):\n 1. Q \\<Turnstile> characteristic_formula P \\<Longrightarrow> P =\\<cdot> Q\n 2. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "show \"P =\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P =\\<cdot> Q", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P =\\<cdot> Q \\<Longrightarrow> False", "assume \"\\<not> (P =\\<cdot> Q)\""], ["proof (state)\nthis:\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> P =\\<cdot> Q \\<Longrightarrow> False", "with \"*\""], ["proof (chain)\npicking this:\n  Q \\<Turnstile> characteristic_formula P\n  \\<not> P =\\<cdot> Q", "show False"], ["proof (prove)\nusing this:\n  Q \\<Turnstile> characteristic_formula P\n  \\<not> P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. False", "using distinguishing_formula_distinguishes is_distinguishing_formula_def valid_characteristic_formula"], ["proof (prove)\nusing this:\n  Q \\<Turnstile> characteristic_formula P\n  \\<not> P =\\<cdot> Q\n  \\<not> ?P =\\<cdot> ?Q \\<Longrightarrow>\n  distinguishing_formula ?P ?Q distinguishes ?P from ?Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n  ?P'9 \\<Turnstile> characteristic_formula P =\n  (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "assume \"P =\\<cdot> Q\""], ["proof (state)\nthis:\n  P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "moreover"], ["proof (state)\nthis:\n  P =\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "have \"P \\<Turnstile> characteristic_formula P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile> characteristic_formula P", "using distinguishing_formula_distinguishes is_distinguishing_formula_def valid_characteristic_formula"], ["proof (prove)\nusing this:\n  \\<not> ?P =\\<cdot> ?Q \\<Longrightarrow>\n  distinguishing_formula ?P ?Q distinguishes ?P from ?Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n  ?P'9 \\<Turnstile> characteristic_formula P =\n  (\\<forall>x\\<in>{distinguishing_formula P Q |Q. \\<not> P =\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> characteristic_formula P", "by auto"], ["proof (state)\nthis:\n  P \\<Turnstile> characteristic_formula P\n\ngoal (1 subgoal):\n 1. P =\\<cdot> Q \\<Longrightarrow> Q \\<Turnstile> characteristic_formula P", "ultimately"], ["proof (chain)\npicking this:\n  P =\\<cdot> Q\n  P \\<Turnstile> characteristic_formula P", "show \"Q \\<Turnstile> characteristic_formula P\""], ["proof (prove)\nusing this:\n  P =\\<cdot> Q\n  P \\<Turnstile> characteristic_formula P\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P", "using logically_equivalent_def"], ["proof (prove)\nusing this:\n  P =\\<cdot> Q\n  P \\<Turnstile> characteristic_formula P\n  ?P =\\<cdot> ?Q \\<equiv> \\<forall>x. ?P \\<Turnstile> x = ?Q \\<Turnstile> x\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P", "by blast"], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_formula P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_formula P = (P =\\<cdot> Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_formula_is_characteristic:\n    \"Q \\<Turnstile> characteristic_formula P \\<longleftrightarrow> P \\<sim>\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = P \\<sim>\\<cdot> Q", "using characteristic_formula_is_characteristic'"], ["proof (prove)\nusing this:\n  ?Q \\<Turnstile> characteristic_formula ?P = (?P =\\<cdot> ?Q)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_formula P = P \\<sim>\\<cdot> Q", "by (meson bisimilarity_implies_equivalence equivalence_implies_bisimilarity)"], ["", "subsection \\<open>Expressive completeness\\<close>"], ["", "text \\<open>Every finitely supported set of states that is closed under bisimulation can be described by\n    a formula; namely, by a disjunction of characteristic formulas.\\<close>"], ["", "theorem expressive_completeness:\n    assumes \"finite (supp S)\"\n    and \"\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<sim>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\"\n    shows \"P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) \\<longleftrightarrow> P \\<in> S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "let ?B = \"characteristic_formula ` S\""], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "have \"?B \\<subseteq> characteristic_formula ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. characteristic_formula ` S \\<subseteq> range characteristic_formula", "by auto"], ["proof (state)\nthis:\n  characteristic_formula ` S \\<subseteq> range characteristic_formula\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "then"], ["proof (chain)\npicking this:\n  characteristic_formula ` S \\<subseteq> range characteristic_formula", "have \"|?B| \\<le>o |UNIV :: 'state set|\""], ["proof (prove)\nusing this:\n  characteristic_formula ` S \\<subseteq> range characteristic_formula\n\ngoal (1 subgoal):\n 1. |characteristic_formula ` S| \\<le>o |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |characteristic_formula ` S| \\<le>o |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "also"], ["proof (state)\nthis:\n  |characteristic_formula ` S| \\<le>o |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "have \"|UNIV :: 'state set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_state)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "finally"], ["proof (chain)\npicking this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|", "have card_B: \"|?B| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\nusing this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |characteristic_formula ` S| <o natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "have \"eqvt image\" and \"eqvt characteristic_formula\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt (`) &&& eqvt characteristic_formula", "by (simp add: eqvtI)+"], ["proof (state)\nthis:\n  eqvt (`)\n  eqvt characteristic_formula\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "then"], ["proof (chain)\npicking this:\n  eqvt (`)\n  eqvt characteristic_formula", "have \"supp ?B \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  eqvt (`)\n  eqvt characteristic_formula\n\ngoal (1 subgoal):\n 1. supp (characteristic_formula ` S) \\<subseteq> supp S", "using supp_fun_eqvt supp_fun_app supp_fun_app_eqvt"], ["proof (prove)\nusing this:\n  eqvt (`)\n  eqvt characteristic_formula\n  eqvt ?f \\<Longrightarrow> supp ?f = {}\n  supp (?f ?x) \\<subseteq> supp ?f \\<union> supp ?x\n  eqvt ?f \\<Longrightarrow> supp (?f ?x) \\<subseteq> supp ?x\n\ngoal (1 subgoal):\n 1. supp (characteristic_formula ` S) \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (characteristic_formula ` S) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "with card_B"], ["proof (chain)\npicking this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_formula ` S) \\<subseteq> supp S", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_formula ` S) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_formula ` S) \\<subseteq> supp S\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "with \\<open>finite (supp S)\\<close>"], ["proof (chain)\npicking this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (characteristic_formula ` S)))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_formula ` S)) \\<subseteq> supp S\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (characteristic_formula ` S)))", "by blast"], ["proof (state)\nthis:\n  finite (supp (Abs_bset (characteristic_formula ` S)))\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "with card_B"], ["proof (chain)\npicking this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n  finite (supp (Abs_bset (characteristic_formula ` S)))", "have \"P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) \\<longleftrightarrow> (\\<exists>x\\<in>?B. P \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |characteristic_formula ` S| <o natLeq +c |UNIV|\n  finite (supp (Abs_bset (characteristic_formula ` S)))\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (\\<exists>x\\<in>characteristic_formula ` S. P \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_formula ` S. P \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "with \\<open>\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<sim>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>?P \\<in> S; ?P \\<sim>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_formula ` S. P \\<Turnstile> x)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?P \\<in> S; ?P \\<sim>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_formula ` S. P \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "using characteristic_formula_is_characteristic characteristic_formula_is_characteristic' logically_equivalent_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?P \\<in> S; ?P \\<sim>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_formula ` S. P \\<Turnstile> x)\n  ?Q \\<Turnstile> characteristic_formula ?P = ?P \\<sim>\\<cdot> ?Q\n  ?Q \\<Turnstile> characteristic_formula ?P = (?P =\\<cdot> ?Q)\n  ?P =\\<cdot> ?Q \\<equiv> \\<forall>x. ?P \\<Turnstile> x = ?Q \\<Turnstile> x\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) =\n    (P \\<in> S)", "by fastforce"], ["proof (state)\nthis:\n  P \\<Turnstile> Disj (Abs_bset (characteristic_formula ` S)) = (P \\<in> S)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}