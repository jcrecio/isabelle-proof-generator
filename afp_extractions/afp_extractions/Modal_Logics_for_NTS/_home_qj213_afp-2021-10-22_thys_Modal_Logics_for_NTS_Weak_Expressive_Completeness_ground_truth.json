{"file_name": "/home/qj213/afp-2021-10-22/thys/Modal_Logics_for_NTS/Weak_Expressive_Completeness.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Modal_Logics_for_NTS", "problem_names": ["lemma distinguishing_weak_formula_card_aux:\n    \"|{-p \\<bullet> (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True}| <o natLeq +c |UNIV :: 'idx set|\"", "lemma distinguishing_weak_formula_supp_aux:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"supp (Abs_bset {-p \\<bullet> (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True} :: _ set['idx]) \\<subseteq> supp P\"", "lemma distinguishing_weak_formula_eqvt [simp]:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"p \\<bullet> distinguishing_weak_formula P Q = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\"", "lemma supp_distinguishing_weak_formula:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"supp (distinguishing_weak_formula P Q) \\<subseteq> supp P\"", "lemma distinguishing_weak_formula_distinguishes:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"(distinguishing_weak_formula P Q) distinguishes P from Q\"", "lemma distinguishing_weak_formula_is_weak:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"weak_formula (distinguishing_weak_formula P Q)\"", "lemma characteristic_weak_formula_card_aux:\n    \"|{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}| <o natLeq +c |UNIV :: 'idx set|\"", "lemma characteristic_weak_formula_supp_aux:\n    shows \"supp (Abs_bset {distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)} :: _ set['idx]) \\<subseteq> supp P\"", "lemma characteristic_weak_formula_eqvt (*[eqvt]*) [simp]:\n    \"p \\<bullet> characteristic_weak_formula P = characteristic_weak_formula (p \\<bullet> P)\"", "lemma characteristic_weak_formula_eqvt_raw [simp]:\n    \"p \\<bullet> characteristic_weak_formula = characteristic_weak_formula\"", "lemma characteristic_weak_formula_is_weak:\n    \"weak_formula (characteristic_weak_formula P)\"", "lemma characteristic_weak_formula_is_characteristic':\n    \"Q \\<Turnstile> characteristic_weak_formula P \\<longleftrightarrow> P \\<equiv>\\<cdot> Q\"", "lemma characteristic_weak_formula_is_characteristic:\n    \"Q \\<Turnstile> characteristic_weak_formula P \\<longleftrightarrow> P \\<approx>\\<cdot> Q\"", "theorem weak_expressive_completeness:\n    assumes \"finite (supp S)\"\n    and \"\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<approx>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\"\n    shows \"P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) \\<longleftrightarrow> P \\<in> S\"\n    and \"weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))\""], "translations": [["", "lemma distinguishing_weak_formula_card_aux:\n    \"|{-p \\<bullet> (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True}| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"?B \\<subseteq> (\\<lambda>p. -p \\<bullet> ?some p) ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {- p \\<bullet> (SOME x.\n                       weak_formula x \\<and>\n                       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n     p. True}\n    \\<subseteq> range\n                 (\\<lambda>p.\n                     - p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))", "by auto"], ["proof (state)\nthis:\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "then"], ["proof (chain)\npicking this:\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))", "have \"|?B| \\<le>o |UNIV :: perm set|\""], ["proof (prove)\nusing this:\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  \\<subseteq> range\n               (\\<lambda>p.\n                   - p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)))\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| \\<le>o\n    |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: perm set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_perm)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "finally"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}| <o\n    natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma distinguishing_weak_formula_supp_aux:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"supp (Abs_bset {-p \\<bullet> (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))|p. True} :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"\\<not> (p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "by (metis weakly_logically_equivalent_eqvt permute_minus_cancel(2))"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "have \"supp (?some p) \\<subseteq> supp (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. supp\n     (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n    \\<subseteq> supp (p \\<bullet> P)", "using distinguished_bounded_support"], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n  \\<lbrakk>weak_formula ?x; ?x distinguishes ?P from ?Q;\n   \\<And>y.\n      \\<lbrakk>weak_formula y; supp y \\<subseteq> supp ?P;\n       y distinguishes ?P from ?Q\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. supp\n     (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n    \\<subseteq> supp (p \\<bullet> P)", "by (metis (mono_tags, lifting) weakly_equivalent_iff_not_distinguished someI_ex)"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n  \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "note supp_some = this"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "{"], ["proof (state)\nthis:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}", "obtain p where \"x = -p \\<bullet> ?some p\""], ["proof (prove)\nusing this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        x =\n        - p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "with supp_some"], ["proof (chain)\npicking this:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "have \"supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\""], ["proof (prove)\nusing this:\n  supp\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n       x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  \\<subseteq> supp (?p9 \\<bullet> P)\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)", "by simp"], ["proof (state)\nthis:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)", "have \"supp x \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  supp (p \\<bullet> x) \\<subseteq> supp (p \\<bullet> P)\n\ngoal (1 subgoal):\n 1. supp x \\<subseteq> supp P", "by (metis (full_types) permute_boolE subset_eqvt supp_eqvt)"], ["proof (state)\nthis:\n  supp x \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "note \"*\" = this"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "have supp_B: \"supp ?B \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}\n    \\<subseteq> supp P", "by (rule set_bounded_supp, fact finite_supp, cut_tac \"*\", blast)"], ["proof (state)\nthis:\n  supp\n   {- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "from supp_B and distinguishing_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  supp\n   {- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n    p. True}\n  \\<subseteq> supp P\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by blast"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinguishing_weak_formula_eqvt [simp]:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"p \\<bullet> distinguishing_weak_formula P Q = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?B = \"{-p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "with distinguishing_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "have *: \"p \\<bullet> Conj (Abs_bset ?B) = Conj (Abs_bset (p \\<bullet> ?B))\""], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {- p \\<bullet> (SOME x.\nweak_formula x \\<and>\nsupp x \\<subseteq> supp (p \\<bullet> P) \\<and>\nx distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                    p. True}) =\n    Conj\n     (Abs_bset\n       (p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}))", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?some' = \"\\<lambda>p'. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and> x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "let ?B' = \"{-p' \\<bullet> ?some' p'|p'. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "have \"p \\<bullet> ?B = ?B'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True} =\n    {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "fix px"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "assume \"px \\<in> p \\<bullet> ?B\""], ["proof (state)\nthis:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    weak_formula x \\<and>\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    weak_formula x \\<and>\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}", "obtain x where 1: \"px = p \\<bullet> x\" and 2: \"x \\<in> ?B\""], ["proof (prove)\nusing this:\n  px \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n    weak_formula x \\<and>\n    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                        p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>px = p \\<bullet> x;\n         x \\<in> {- p \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) image_iff permute_set_eq_image)"], ["proof (state)\nthis:\n  px = p \\<bullet> x\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}", "obtain p' where 3: \"x = -p' \\<bullet> ?some p'\""], ["proof (prove)\nusing this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        x =\n        - p' \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                           x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "from 1 and 3"], ["proof (chain)\npicking this:\n  px = p \\<bullet> x\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))", "have \"px = -(p' - p) \\<bullet> ?some' (p' - p)\""], ["proof (prove)\nusing this:\n  px = p \\<bullet> x\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p' \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> P) from (p' \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. px =\n    - (p' -\n       p) \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp\n                                     ((p' -\n p) \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes ((p' -\n    p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))", "by simp"], ["proof (state)\nthis:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))", "have \"px \\<in> ?B'\""], ["proof (prove)\nusing this:\n  px =\n  - (p' -\n     p) \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp\n                                   ((p' - p) \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes ((p' -\n  p) \\<bullet> p \\<bullet> P) from ((p' - p) \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. px \\<in> {- p' \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp\n        (p' \\<bullet> p \\<bullet> P) \\<and>\n                                 x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n              p'. True}", "by blast"], ["proof (state)\nthis:\n  px \\<in> {- p' \\<bullet> (SOME x.\n                               weak_formula x \\<and>\n                               supp x\n                               \\<subseteq> supp\n      (p' \\<bullet> p \\<bullet> P) \\<and>\n                               x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n            p'. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "}"], ["proof (state)\nthis:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}\n 2. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}", "show \"p \\<bullet> ?B \\<subseteq> ?B'\""], ["proof (prove)\nusing this:\n  ?px9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True} \\<Longrightarrow>\n  ?px9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> {- p \\<bullet> (SOME x.\n                                   weak_formula x \\<and>\n                                   supp x\n                                   \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                 p. True}\n    \\<subseteq> {- p' \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           (p' \\<bullet> p \\<bullet> P) \\<and>\n                                    x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n                 p'. True}", "by blast"], ["proof (state)\nthis:\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True}\n  \\<subseteq> {- p' \\<bullet> (SOME x.\n                                  weak_formula x \\<and>\n                                  supp x\n                                  \\<subseteq> supp\n         (p' \\<bullet> p \\<bullet> P) \\<and>\n                                  x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n               p'. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "assume \"x \\<in> ?B'\""], ["proof (state)\nthis:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              weak_formula x \\<and>\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              weak_formula x \\<and>\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}", "obtain p' where \"x = -p' \\<bullet> ?some' p'\""], ["proof (prove)\nusing this:\n  x \\<in> {- p' \\<bullet> (SOME x.\n                              weak_formula x \\<and>\n                              supp x\n                              \\<subseteq> supp\n     (p' \\<bullet> p \\<bullet> P) \\<and>\n                              x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n           p'. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p'.\n        x =\n        - p' \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x\n                           \\<subseteq> supp\n  (p' \\<bullet> p \\<bullet> P) \\<and>\n                           x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))", "have \"x = p \\<bullet> -(p' + p) \\<bullet> ?some (p' + p)\""], ["proof (prove)\nusing this:\n  x =\n  - p' \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x\n                     \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                     x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. x =\n    p \\<bullet> - (p' +\n                   p) \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp\n           ((p' + p) \\<bullet> P) \\<and>\n                                    x distinguishes ((p' +\n                p) \\<bullet> P) from ((p' + p) \\<bullet> Q))", "by (simp add: add.inverse_distrib_swap)"], ["proof (state)\nthis:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  weak_formula x \\<and>\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  weak_formula x \\<and>\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))", "have \"x \\<in> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  weak_formula x \\<and>\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n     weak_formula x \\<and>\n     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                         p. True}", "using mem_permute_iff"], ["proof (prove)\nusing this:\n  x =\n  p \\<bullet> - (p' +\n                 p) \\<bullet> (SOME x.\n                                  weak_formula x \\<and>\n                                  supp x\n                                  \\<subseteq> supp\n         ((p' + p) \\<bullet> P) \\<and>\n                                  x distinguishes ((p' +\n              p) \\<bullet> P) from ((p' + p) \\<bullet> Q))\n  (?p \\<bullet> ?x \\<in> ?p \\<bullet> ?X) = (?x \\<in> ?X)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n     weak_formula x \\<and>\n     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                         p. True}", "by blast"], ["proof (state)\nthis:\n  x \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n   weak_formula x \\<and>\n   supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n   x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                       p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "then"], ["proof (chain)\npicking this:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}", "show \"?B' \\<subseteq> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  ?x9\n  \\<in> {- p' \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x\n                            \\<subseteq> supp\n   (p' \\<bullet> p \\<bullet> P) \\<and>\n                            x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n         p'. True} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}\n\ngoal (1 subgoal):\n 1. {- p' \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x\n                        \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                        x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n     p'. True}\n    \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                             p. True}", "by blast"], ["proof (state)\nthis:\n  {- p' \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n  \\<subseteq> p \\<bullet> {- p \\<bullet> (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                           p. True}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "with \"*\""], ["proof (chain)\npicking this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> distinguishing_weak_formula P Q =\n    distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "unfolding distinguishing_weak_formula_def"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {- p \\<bullet> (SOME x.\n                                    weak_formula x \\<and>\n                                    supp x\n                                    \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                  p. True}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}))\n  p \\<bullet> {- p \\<bullet> (SOME x.\n                                 weak_formula x \\<and>\n                                 supp x\n                                 \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                 x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n               p. True} =\n  {- p' \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x\n                      \\<subseteq> supp (p' \\<bullet> p \\<bullet> P) \\<and>\n                      x distinguishes (p' \\<bullet> p \\<bullet> P) from (p' \\<bullet> p \\<bullet> Q)) |\n   p'. True}\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {- p \\<bullet> (SOME x.\nweak_formula x \\<and>\nsupp x \\<subseteq> supp (p \\<bullet> P) \\<and>\nx distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                    p. True}) =\n    Conj\n     (Abs_bset\n       {- pa \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x\n                           \\<subseteq> supp\n  (pa \\<bullet> p \\<bullet> P) \\<and>\n                           x distinguishes (pa \\<bullet> p \\<bullet> P) from (pa \\<bullet> p \\<bullet> Q)) |\n        pa. True})", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> distinguishing_weak_formula P Q =\n  distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma supp_distinguishing_weak_formula:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"supp (distinguishing_weak_formula P Q) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "let ?B = \"{- p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "moreover"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "from this"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "ultimately"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "show ?thesis"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp (distinguishing_weak_formula P Q) \\<subseteq> supp P", "unfolding distinguishing_weak_formula_def"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. supp\n     (Conj\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))\n    \\<subseteq> supp P", "by simp"], ["proof (state)\nthis:\n  supp (distinguishing_weak_formula P Q) \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinguishing_weak_formula_distinguishes:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"(distinguishing_weak_formula P Q) distinguishes P from Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "let ?B = \"{- p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"\\<not> (p \\<bullet> P) \\<equiv>\\<cdot> (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "by (metis permute_minus_cancel(2) weakly_logically_equivalent_eqvt)"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "then"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "have \"(?some p) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. (SOME x.\n        weak_formula x \\<and>\n        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)", "by (metis (mono_tags, lifting) distinguished_bounded_support weakly_equivalent_iff_not_distinguished someI_ex)"], ["proof (state)\nthis:\n  (SOME x.\n      weak_formula x \\<and>\n      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) distinguishes (p \\<bullet> P) from (p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  (SOME x.\n      weak_formula x \\<and>\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "note some_distinguishes = this"], ["proof (state)\nthis:\n  (SOME x.\n      weak_formula x \\<and>\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "{"], ["proof (state)\nthis:\n  (SOME x.\n      weak_formula x \\<and>\n      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)) distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "with distinguishing_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))", "have \"P' \\<Turnstile> distinguishing_weak_formula P Q \\<longleftrightarrow> (\\<forall>x\\<in>?B. P' \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile> distinguishing_weak_formula P Q =\n    (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}.\n        P' \\<Turnstile> x)", "unfolding distinguishing_weak_formula_def"], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile>\n    Conj\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}) =\n    (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n weak_formula x \\<and>\n supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                     p. True}.\n        P' \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P' \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      P' \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "note valid_distinguishing_formula = this"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "{"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "fix p"], ["proof (state)\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "have \"P \\<Turnstile> -p \\<bullet> ?some p\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile>\n    - p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                      x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "by (metis (mono_tags) is_distinguishing_formula_def permute_minus_cancel(2) some_distinguishes valid_eqvt)"], ["proof (state)\nthis:\n  P \\<Turnstile>\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "}"], ["proof (state)\nthis:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "then"], ["proof (chain)\npicking this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))", "have \"P \\<Turnstile> distinguishing_weak_formula P Q\""], ["proof (prove)\nusing this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> distinguishing_weak_formula P Q", "using valid_distinguishing_formula"], ["proof (prove)\nusing this:\n  P \\<Turnstile>\n  - ?p9 \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (?p9 \\<bullet> P) \\<and>\n                      x distinguishes (?p9 \\<bullet> P) from (?p9 \\<bullet> Q))\n  ?P'9 \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> distinguishing_weak_formula P Q", "by blast"], ["proof (state)\nthis:\n  P \\<Turnstile> distinguishing_weak_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "moreover"], ["proof (state)\nthis:\n  P \\<Turnstile> distinguishing_weak_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "have \"\\<not> Q \\<Turnstile> distinguishing_weak_formula P Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q", "using valid_distinguishing_formula"], ["proof (prove)\nusing this:\n  ?P'9 \\<Turnstile> distinguishing_weak_formula P Q =\n  (\\<forall>x\\<in>{- p \\<bullet> (SOME x.\n                                     weak_formula x \\<and>\n                                     supp x\n                                     \\<subseteq> supp (p \\<bullet> P) \\<and>\n                                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n                   p. True}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q", "by (metis (mono_tags, lifting) is_distinguishing_formula_def mem_Collect_eq permute_minus_cancel(1) some_distinguishes valid_eqvt)"], ["proof (state)\nthis:\n  \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "ultimately"], ["proof (chain)\npicking this:\n  P \\<Turnstile> distinguishing_weak_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q", "show \"(distinguishing_weak_formula P Q) distinguishes P from Q\""], ["proof (prove)\nusing this:\n  P \\<Turnstile> distinguishing_weak_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "using is_distinguishing_formula_def"], ["proof (prove)\nusing this:\n  P \\<Turnstile> distinguishing_weak_formula P Q\n  \\<not> Q \\<Turnstile> distinguishing_weak_formula P Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n\ngoal (1 subgoal):\n 1. distinguishing_weak_formula P Q distinguishes P from Q", "by blast"], ["proof (state)\nthis:\n  distinguishing_weak_formula P Q distinguishes P from Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinguishing_weak_formula_is_weak:\n    assumes \"\\<not> (P \\<equiv>\\<cdot> Q)\"\n    shows \"weak_formula (distinguishing_weak_formula P Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "let ?some = \"\\<lambda>p. (\\<some>x. weak_formula x \\<and> supp x \\<subseteq> supp (p \\<bullet> P) \\<and> x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\""], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "let ?B = \"{- p \\<bullet> ?some p|p. True}\""], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True})\n    \\<subseteq> supp P", "by (rule distinguishing_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "moreover"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "have \"set_bset (Abs_bset ?B :: _ set['idx]) = ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_bset\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}) =\n    {- p \\<bullet> (SOME x.\n                       weak_formula x \\<and>\n                       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n     p. True}", "using distinguishing_weak_formula_card_aux Abs_bset_inverse'"], ["proof (prove)\nusing this:\n  |{- p \\<bullet> (SOME x.\n                      weak_formula x \\<and>\n                      supp x \\<subseteq> supp (p \\<bullet> ?P) \\<and>\n                      x distinguishes (p \\<bullet> ?P) from (p \\<bullet> ?Q)) |\n    p. True}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> set_bset (Abs_bset ?A) = ?A\n\ngoal (1 subgoal):\n 1. set_bset\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}) =\n    {- p \\<bullet> (SOME x.\n                       weak_formula x \\<and>\n                       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n     p. True}", "by simp"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "moreover"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "{"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "then"], ["proof (chain)\npicking this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}", "obtain p where \"x = -p \\<bullet> ?some p\""], ["proof (prove)\nusing this:\n  x \\<in> {- p \\<bullet> (SOME x.\n                             weak_formula x \\<and>\n                             supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                             x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n           p. True}\n\ngoal (1 subgoal):\n 1. (\\<And>p.\n        x =\n        - p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "moreover"], ["proof (state)\nthis:\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "from assms"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"\\<not> (p \\<bullet> P) \\<equiv>\\<cdot> (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "by (metis permute_minus_cancel(2) weakly_logically_equivalent_eqvt)"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "then"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "have \"weak_formula (?some p)\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. weak_formula\n     (SOME x.\n         weak_formula x \\<and>\n         supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n         x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "by (metis (mono_tags, lifting) distinguished_bounded_support weakly_equivalent_iff_not_distinguished someI_ex)"], ["proof (state)\nthis:\n  weak_formula\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "ultimately"], ["proof (chain)\npicking this:\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n  weak_formula\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))", "have \"weak_formula x\""], ["proof (prove)\nusing this:\n  x =\n  - p \\<bullet> (SOME x.\n                    weak_formula x \\<and>\n                    supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                    x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n  weak_formula\n   (SOME x.\n       weak_formula x \\<and>\n       supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n       x distinguishes (p \\<bullet> P) from (p \\<bullet> Q))\n\ngoal (1 subgoal):\n 1. weak_formula x", "by simp"], ["proof (state)\nthis:\n  weak_formula x\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "ultimately"], ["proof (chain)\npicking this:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  weak_formula ?x9", "show ?thesis"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (distinguishing_weak_formula P Q)", "unfolding distinguishing_weak_formula_def"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula\n     (Conj\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "using wf_Conj"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {- p \\<bullet> (SOME x.\n                          weak_formula x \\<and>\n                          supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                          x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n        p. True}))\n  set_bset\n   (Abs_bset\n     {- p \\<bullet> (SOME x.\n                        weak_formula x \\<and>\n                        supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                        x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n      p. True}) =\n  {- p \\<bullet> (SOME x.\n                     weak_formula x \\<and>\n                     supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                     x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n   p. True}\n  ?x9\n  \\<in> {- p \\<bullet> (SOME x.\n                           weak_formula x \\<and>\n                           supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                           x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n         p. True} \\<Longrightarrow>\n  weak_formula ?x9\n  \\<lbrakk>finite (supp ?xset);\n   \\<And>x. x \\<in> set_bset ?xset \\<Longrightarrow> weak_formula x\\<rbrakk>\n  \\<Longrightarrow> weak_formula (Conj ?xset)\n\ngoal (1 subgoal):\n 1. weak_formula\n     (Conj\n       (Abs_bset\n         {- p \\<bullet> (SOME x.\n                            weak_formula x \\<and>\n                            supp x \\<subseteq> supp (p \\<bullet> P) \\<and>\n                            x distinguishes (p \\<bullet> P) from (p \\<bullet> Q)) |\n          p. True}))", "by blast"], ["proof (state)\nthis:\n  weak_formula (distinguishing_weak_formula P Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Characteristic weak formulas\\<close>"], ["", "text \\<open>A \\emph{characteristic weak formula} for a state~$P$ is valid for (exactly) those states\n    that are weakly bisimilar to~$P$.\\<close>"], ["", "definition characteristic_weak_formula :: \"'state \\<Rightarrow> ('idx, 'pred, 'act) formula\" where\n    \"characteristic_weak_formula P \\<equiv> Conj (Abs_bset {distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)})\"\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma characteristic_weak_formula_card_aux:\n    \"|{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "let ?B = \"{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"?B \\<subseteq> (distinguishing_weak_formula P) ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> range (distinguishing_weak_formula P)", "by auto"], ["proof (state)\nthis:\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> range (distinguishing_weak_formula P)\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "then"], ["proof (chain)\npicking this:\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> range (distinguishing_weak_formula P)", "have \"|?B| \\<le>o |UNIV :: 'state set|\""], ["proof (prove)\nusing this:\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> range (distinguishing_weak_formula P)\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q.\n      \\<not> P \\<equiv>\\<cdot> Q}| \\<le>o\n    |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| \\<le>o\n  |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'state set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_state)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "finally"], ["proof (chain)\npicking this:\n  |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n    natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |{distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n\ngoal:\nNo subgoals!", "qed\n\n  \\<comment> \\<open>just an auxiliary lemma that will be useful further below\\<close>"], ["", "lemma characteristic_weak_formula_supp_aux:\n    shows \"supp (Abs_bset {distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)} :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "let ?B = \"{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "then"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}", "obtain Q where \"x = distinguishing_weak_formula P Q\" and \"\\<not> (P \\<equiv>\\<cdot> Q)\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_weak_formula P Q;\n         \\<not> P \\<equiv>\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "with supp_distinguishing_weak_formula"], ["proof (chain)\npicking this:\n  \\<not> ?P \\<equiv>\\<cdot> ?Q \\<Longrightarrow>\n  supp (distinguishing_weak_formula ?P ?Q) \\<subseteq> supp ?P\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"supp x \\<subseteq> supp P\""], ["proof (prove)\nusing this:\n  \\<not> ?P \\<equiv>\\<cdot> ?Q \\<Longrightarrow>\n  supp (distinguishing_weak_formula ?P ?Q) \\<subseteq> supp ?P\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. supp x \\<subseteq> supp P", "by metis"], ["proof (state)\nthis:\n  supp x \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "note \"*\" = this"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  supp ?x9 \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "have supp_B: \"supp ?B \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> supp P", "by (rule set_bounded_supp, fact finite_supp, cut_tac \"*\", blast)"], ["proof (state)\nthis:\n  supp {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "from supp_B and characteristic_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  supp {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|", "show ?thesis"], ["proof (prove)\nusing this:\n  supp {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  supp {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> supp P\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "by blast"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_weak_formula_eqvt (*[eqvt]*) [simp]:\n    \"p \\<bullet> characteristic_weak_formula P = characteristic_weak_formula (p \\<bullet> P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "let ?B = \"{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "by (fact characteristic_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "with characteristic_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "have *: \"p \\<bullet> Conj (Abs_bset ?B) = Conj (Abs_bset (p \\<bullet> ?B))\""], ["proof (prove)\nusing this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {distinguishing_weak_formula P Q |Q.\n                    \\<not> P \\<equiv>\\<cdot> Q}) =\n    Conj\n     (Abs_bset\n       (p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}))", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_weak_formula P Q |Q.\n                  \\<not> P \\<equiv>\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "let ?B' = \"{distinguishing_weak_formula (p \\<bullet> P) Q|Q. \\<not> ((p \\<bullet> P) \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "have \"p \\<bullet> ?B = ?B'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q} =\n    {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "{"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "fix px"], ["proof (state)\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "assume \"px \\<in> p \\<bullet> ?B\""], ["proof (state)\nthis:\n  px \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                        \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  px \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                        \\<not> P \\<equiv>\\<cdot> Q}", "obtain x where 1: \"px = p \\<bullet> x\" and 2: \"x \\<in> ?B\""], ["proof (prove)\nusing this:\n  px \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                        \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>px = p \\<bullet> x;\n         x \\<in> {distinguishing_weak_formula P Q |Q.\n                  \\<not> P \\<equiv>\\<cdot> Q}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis (no_types, lifting) image_iff permute_set_eq_image)"], ["proof (state)\nthis:\n  px = p \\<bullet> x\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "from 2"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}", "obtain Q where 3: \"x = distinguishing_weak_formula P Q\" and 4: \"\\<not> (P \\<equiv>\\<cdot> Q)\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_weak_formula P Q;\n         \\<not> P \\<equiv>\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "with 1"], ["proof (chain)\npicking this:\n  px = p \\<bullet> x\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  px = p \\<bullet> x\n  x = distinguishing_weak_formula P Q\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "moreover"], ["proof (state)\nthis:\n  px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "from 4"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> Q", "have \"\\<not> (p \\<bullet> P) \\<equiv>\\<cdot> (p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "by (metis weakly_logically_equivalent_eqvt permute_minus_cancel(2))"], ["proof (state)\nthis:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "ultimately"], ["proof (chain)\npicking this:\n  px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q", "have \"px \\<in> ?B'\""], ["proof (prove)\nusing this:\n  px = distinguishing_weak_formula (p \\<bullet> P) (p \\<bullet> Q)\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. px \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n              \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  px \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n            \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "}"], ["proof (state)\nthis:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (2 subgoals):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n 2. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "show \"p \\<bullet> ?B \\<subseteq> ?B'\""], ["proof (prove)\nusing this:\n  ?px9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?px9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                 \\<not> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n                 \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  p \\<bullet> {distinguishing_weak_formula P Q |Q.\n               \\<not> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n               \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "assume \"x \\<in> ?B'\""], ["proof (state)\nthis:\n  x \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "obtain Q where 1: \"x = distinguishing_weak_formula (p \\<bullet> P) Q\" and 2: \"\\<not> (p \\<bullet> P) \\<equiv>\\<cdot> Q\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n           \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>x = distinguishing_weak_formula (p \\<bullet> P) Q;\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  x = distinguishing_weak_formula (p \\<bullet> P) Q\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "from 2"], ["proof (chain)\npicking this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q", "have \"\\<not> P \\<equiv>\\<cdot> (-p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q", "by (metis weakly_logically_equivalent_eqvt permute_minus_cancel(1))"], ["proof (state)\nthis:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "moreover"], ["proof (state)\nthis:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "from this and 1"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n  x = distinguishing_weak_formula (p \\<bullet> P) Q", "have \"x = p \\<bullet> distinguishing_weak_formula P (-p \\<bullet> Q)\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n  x = distinguishing_weak_formula (p \\<bullet> P) Q\n\ngoal (1 subgoal):\n 1. x = p \\<bullet> distinguishing_weak_formula P (- p \\<bullet> Q)", "by simp"], ["proof (state)\nthis:\n  x = p \\<bullet> distinguishing_weak_formula P (- p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "ultimately"], ["proof (chain)\npicking this:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_weak_formula P (- p \\<bullet> Q)", "have \"x \\<in> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_weak_formula P (- p \\<bullet> Q)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                         \\<not> P \\<equiv>\\<cdot> Q}", "using mem_permute_iff"], ["proof (prove)\nusing this:\n  \\<not> P \\<equiv>\\<cdot> - p \\<bullet> Q\n  x = p \\<bullet> distinguishing_weak_formula P (- p \\<bullet> Q)\n  (?p \\<bullet> ?x \\<in> ?p \\<bullet> ?X) = (?x \\<in> ?X)\n\ngoal (1 subgoal):\n 1. x \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                         \\<not> P \\<equiv>\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  x \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                       \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "then"], ["proof (chain)\npicking this:\n  ?x9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}", "show \"?B' \\<subseteq> p \\<bullet> ?B\""], ["proof (prove)\nusing this:\n  ?x9\n  \\<in> {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n         \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  ?x9\n  \\<in> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n     \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n    \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                             \\<not> P \\<equiv>\\<cdot> Q}", "by blast"], ["proof (state)\nthis:\n  {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n  \\<subseteq> p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                           \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<bullet> {distinguishing_weak_formula P Q |Q.\n               \\<not> P \\<equiv>\\<cdot> Q} =\n  {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "with \"*\""], ["proof (chain)\npicking this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_weak_formula P Q |Q.\n                  \\<not> P \\<equiv>\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}))\n  p \\<bullet> {distinguishing_weak_formula P Q |Q.\n               \\<not> P \\<equiv>\\<cdot> Q} =\n  {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}", "show ?thesis"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_weak_formula P Q |Q.\n                  \\<not> P \\<equiv>\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}))\n  p \\<bullet> {distinguishing_weak_formula P Q |Q.\n               \\<not> P \\<equiv>\\<cdot> Q} =\n  {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula P =\n    characteristic_weak_formula (p \\<bullet> P)", "unfolding characteristic_weak_formula_def"], ["proof (prove)\nusing this:\n  p \\<bullet> Conj\n               (Abs_bset\n                 {distinguishing_weak_formula P Q |Q.\n                  \\<not> P \\<equiv>\\<cdot> Q}) =\n  Conj\n   (Abs_bset\n     (p \\<bullet> {distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}))\n  p \\<bullet> {distinguishing_weak_formula P Q |Q.\n               \\<not> P \\<equiv>\\<cdot> Q} =\n  {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n   \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. p \\<bullet> Conj\n                 (Abs_bset\n                   {distinguishing_weak_formula P Q |Q.\n                    \\<not> P \\<equiv>\\<cdot> Q}) =\n    Conj\n     (Abs_bset\n       {distinguishing_weak_formula (p \\<bullet> P) Q |Q.\n        \\<not> p \\<bullet> P \\<equiv>\\<cdot> Q})", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> characteristic_weak_formula P =\n  characteristic_weak_formula (p \\<bullet> P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_weak_formula_eqvt_raw [simp]:\n    \"p \\<bullet> characteristic_weak_formula = characteristic_weak_formula\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> characteristic_weak_formula = characteristic_weak_formula", "by (simp add: permute_fun_def)"], ["", "lemma characteristic_weak_formula_is_weak:\n    \"weak_formula (characteristic_weak_formula P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "let ?B = \"{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "by (fact characteristic_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "moreover"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "have \"set_bset (Abs_bset ?B :: _ set['idx]) = ?B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set_bset\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n    {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}", "using characteristic_weak_formula_card_aux Abs_bset_inverse'"], ["proof (prove)\nusing this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> set_bset (Abs_bset ?A) = ?A\n\ngoal (1 subgoal):\n 1. set_bset\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n    {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}", "by simp"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "moreover"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "{"], ["proof (state)\nthis:\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "assume \"x \\<in> ?B\""], ["proof (state)\nthis:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "then"], ["proof (chain)\npicking this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}", "have \"weak_formula x\""], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n\ngoal (1 subgoal):\n 1. weak_formula x", "using distinguishing_weak_formula_is_weak"], ["proof (prove)\nusing this:\n  x \\<in> {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  \\<not> ?P \\<equiv>\\<cdot> ?Q \\<Longrightarrow>\n  weak_formula (distinguishing_weak_formula ?P ?Q)\n\ngoal (1 subgoal):\n 1. weak_formula x", "by blast"], ["proof (state)\nthis:\n  weak_formula x\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "}"], ["proof (state)\nthis:\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "ultimately"], ["proof (chain)\npicking this:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  weak_formula ?x9", "show ?thesis"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (characteristic_weak_formula P)", "unfolding characteristic_weak_formula_def"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula\n     (Conj\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "using wf_Conj"], ["proof (prove)\nusing this:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n  set_bset\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n  {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}\n  ?x9\n  \\<in> {distinguishing_weak_formula P Q |Q.\n         \\<not> P \\<equiv>\\<cdot> Q} \\<Longrightarrow>\n  weak_formula ?x9\n  \\<lbrakk>finite (supp ?xset);\n   \\<And>x. x \\<in> set_bset ?xset \\<Longrightarrow> weak_formula x\\<rbrakk>\n  \\<Longrightarrow> weak_formula (Conj ?xset)\n\ngoal (1 subgoal):\n 1. weak_formula\n     (Conj\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "by presburger"], ["proof (state)\nthis:\n  weak_formula (characteristic_weak_formula P)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_weak_formula_is_characteristic':\n    \"Q \\<Turnstile> characteristic_weak_formula P \\<longleftrightarrow> P \\<equiv>\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "let ?B = \"{distinguishing_weak_formula P Q|Q. \\<not> (P \\<equiv>\\<cdot> Q)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n    \\<subseteq> supp P", "by (fact characteristic_weak_formula_supp_aux)"], ["proof (state)\nthis:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "then"], ["proof (chain)\npicking this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  supp\n   (Abs_bset\n     {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q})\n  \\<subseteq> supp P\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite\n     (supp\n       (Abs_bset\n         {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "by blast"], ["proof (state)\nthis:\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "with characteristic_weak_formula_card_aux"], ["proof (chain)\npicking this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))", "have \"P' \\<Turnstile> characteristic_weak_formula P \\<longleftrightarrow> (\\<forall>x\\<in>?B. P' \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile> characteristic_weak_formula P =\n    (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}.\n        P' \\<Turnstile> x)", "unfolding characteristic_weak_formula_def"], ["proof (prove)\nusing this:\n  |{distinguishing_weak_formula ?P Q |Q. \\<not> ?P \\<equiv>\\<cdot> Q}| <o\n  natLeq +c |UNIV|\n  finite\n   (supp\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}))\n\ngoal (1 subgoal):\n 1. P' \\<Turnstile>\n    Conj\n     (Abs_bset\n       {distinguishing_weak_formula P Q |Q. \\<not> P \\<equiv>\\<cdot> Q}) =\n    (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                     \\<not> P \\<equiv>\\<cdot> Q}.\n        P' \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P' \\<Turnstile> characteristic_weak_formula P =\n  (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}.\n      P' \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "}"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> characteristic_weak_formula P =\n  (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "note valid_characteristic_formula = this"], ["proof (state)\nthis:\n  ?P'9 \\<Turnstile> characteristic_weak_formula P =\n  (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. Q \\<Turnstile> characteristic_weak_formula P \\<Longrightarrow>\n    P \\<equiv>\\<cdot> Q\n 2. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "assume *: \"Q \\<Turnstile> characteristic_weak_formula P\""], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_weak_formula P\n\ngoal (2 subgoals):\n 1. Q \\<Turnstile> characteristic_weak_formula P \\<Longrightarrow>\n    P \\<equiv>\\<cdot> Q\n 2. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "show \"P \\<equiv>\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q", "proof (rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> P \\<equiv>\\<cdot> Q \\<Longrightarrow> False", "assume \"\\<not> (P \\<equiv>\\<cdot> Q)\""], ["proof (state)\nthis:\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. \\<not> P \\<equiv>\\<cdot> Q \\<Longrightarrow> False", "with \"*\""], ["proof (chain)\npicking this:\n  Q \\<Turnstile> characteristic_weak_formula P\n  \\<not> P \\<equiv>\\<cdot> Q", "show False"], ["proof (prove)\nusing this:\n  Q \\<Turnstile> characteristic_weak_formula P\n  \\<not> P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. False", "using distinguishing_weak_formula_distinguishes is_distinguishing_formula_def valid_characteristic_formula"], ["proof (prove)\nusing this:\n  Q \\<Turnstile> characteristic_weak_formula P\n  \\<not> P \\<equiv>\\<cdot> Q\n  \\<not> ?P \\<equiv>\\<cdot> ?Q \\<Longrightarrow>\n  distinguishing_weak_formula ?P ?Q distinguishes ?P from ?Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n  ?P'9 \\<Turnstile> characteristic_weak_formula P =\n  (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "assume \"P \\<equiv>\\<cdot> Q\""], ["proof (state)\nthis:\n  P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "moreover"], ["proof (state)\nthis:\n  P \\<equiv>\\<cdot> Q\n\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "have \"P \\<Turnstile> characteristic_weak_formula P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile> characteristic_weak_formula P", "using distinguishing_weak_formula_distinguishes is_distinguishing_formula_def valid_characteristic_formula"], ["proof (prove)\nusing this:\n  \\<not> ?P \\<equiv>\\<cdot> ?Q \\<Longrightarrow>\n  distinguishing_weak_formula ?P ?Q distinguishes ?P from ?Q\n  ?x distinguishes ?P from ?Q \\<equiv>\n  ?P \\<Turnstile> ?x \\<and> \\<not> ?Q \\<Turnstile> ?x\n  ?P'9 \\<Turnstile> characteristic_weak_formula P =\n  (\\<forall>x\\<in>{distinguishing_weak_formula P Q |Q.\n                   \\<not> P \\<equiv>\\<cdot> Q}.\n      ?P'9 \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> characteristic_weak_formula P", "by auto"], ["proof (state)\nthis:\n  P \\<Turnstile> characteristic_weak_formula P\n\ngoal (1 subgoal):\n 1. P \\<equiv>\\<cdot> Q \\<Longrightarrow>\n    Q \\<Turnstile> characteristic_weak_formula P", "ultimately"], ["proof (chain)\npicking this:\n  P \\<equiv>\\<cdot> Q\n  P \\<Turnstile> characteristic_weak_formula P", "show \"Q \\<Turnstile> characteristic_weak_formula P\""], ["proof (prove)\nusing this:\n  P \\<equiv>\\<cdot> Q\n  P \\<Turnstile> characteristic_weak_formula P\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P", "using weakly_logically_equivalent_def characteristic_weak_formula_is_weak"], ["proof (prove)\nusing this:\n  P \\<equiv>\\<cdot> Q\n  P \\<Turnstile> characteristic_weak_formula P\n  ?P \\<equiv>\\<cdot> ?Q \\<equiv>\n  \\<forall>x.\n     weak_formula x \\<longrightarrow> ?P \\<Turnstile> x = ?Q \\<Turnstile> x\n  weak_formula (characteristic_weak_formula ?P)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P", "by blast"], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_weak_formula P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Q \\<Turnstile> characteristic_weak_formula P = (P \\<equiv>\\<cdot> Q)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma characteristic_weak_formula_is_characteristic:\n    \"Q \\<Turnstile> characteristic_weak_formula P \\<longleftrightarrow> P \\<approx>\\<cdot> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = P \\<approx>\\<cdot> Q", "using characteristic_weak_formula_is_characteristic'"], ["proof (prove)\nusing this:\n  ?Q \\<Turnstile> characteristic_weak_formula ?P = (?P \\<equiv>\\<cdot> ?Q)\n\ngoal (1 subgoal):\n 1. Q \\<Turnstile> characteristic_weak_formula P = P \\<approx>\\<cdot> Q", "by (meson weak_bisimilarity_implies_weak_equivalence weak_equivalence_implies_weak_bisimilarity)"], ["", "subsection \\<open>Weak expressive completeness\\<close>"], ["", "text \\<open>Every finitely supported set of states that is closed under weak bisimulation can be\n    described by a weak formula; namely, by a disjunction of characteristic weak formulas.\\<close>"], ["", "theorem weak_expressive_completeness:\n    assumes \"finite (supp S)\"\n    and \"\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<approx>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\"\n    shows \"P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) \\<longleftrightarrow> P \\<in> S\"\n    and \"weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S) &&&\n    weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "proof -"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "let ?B = \"characteristic_weak_formula ` S\""], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"?B \\<subseteq> characteristic_weak_formula ` UNIV\""], ["proof (prove)\ngoal (1 subgoal):\n 1. characteristic_weak_formula ` S\n    \\<subseteq> range characteristic_weak_formula", "by auto"], ["proof (state)\nthis:\n  characteristic_weak_formula ` S\n  \\<subseteq> range characteristic_weak_formula\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "then"], ["proof (chain)\npicking this:\n  characteristic_weak_formula ` S\n  \\<subseteq> range characteristic_weak_formula", "have \"|?B| \\<le>o |UNIV :: 'state set|\""], ["proof (prove)\nusing this:\n  characteristic_weak_formula ` S\n  \\<subseteq> range characteristic_weak_formula\n\ngoal (1 subgoal):\n 1. |characteristic_weak_formula ` S| \\<le>o |UNIV|", "by (rule surj_imp_ordLeq)"], ["proof (state)\nthis:\n  |characteristic_weak_formula ` S| \\<le>o |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "also"], ["proof (state)\nthis:\n  |characteristic_weak_formula ` S| \\<le>o |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"|UNIV :: 'state set| <o |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| <o |UNIV|", "by (metis card_idx_state)"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "also"], ["proof (state)\nthis:\n  |UNIV| <o |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"|UNIV :: 'idx set| \\<le>o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |UNIV| \\<le>o natLeq +c |UNIV|", "by (metis Cnotzero_UNIV ordLeq_csum2)"], ["proof (state)\nthis:\n  |UNIV| \\<le>o natLeq +c |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "finally"], ["proof (chain)\npicking this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "have card_B: \"|?B| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"eqvt image\" and \"eqvt characteristic_weak_formula\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt (`) &&& eqvt characteristic_weak_formula", "by (simp add: eqvtI)+"], ["proof (state)\nthis:\n  eqvt (`)\n  eqvt characteristic_weak_formula\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "then"], ["proof (chain)\npicking this:\n  eqvt (`)\n  eqvt characteristic_weak_formula", "have supp_B: \"supp ?B \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  eqvt (`)\n  eqvt characteristic_weak_formula\n\ngoal (1 subgoal):\n 1. supp (characteristic_weak_formula ` S) \\<subseteq> supp S", "using supp_fun_eqvt supp_fun_app supp_fun_app_eqvt"], ["proof (prove)\nusing this:\n  eqvt (`)\n  eqvt characteristic_weak_formula\n  eqvt ?f \\<Longrightarrow> supp ?f = {}\n  supp (?f ?x) \\<subseteq> supp ?f \\<union> supp ?x\n  eqvt ?f \\<Longrightarrow> supp (?f ?x) \\<subseteq> supp ?x\n\ngoal (1 subgoal):\n 1. supp (characteristic_weak_formula ` S) \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with card_B"], ["proof (chain)\npicking this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S", "have \"supp (Abs_bset ?B :: _ set['idx]) \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with \\<open>finite (supp S)\\<close>"], ["proof (chain)\npicking this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S", "have \"finite (supp (Abs_bset ?B :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (characteristic_weak_formula ` S)))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (characteristic_weak_formula ` S)) \\<subseteq> supp S\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (characteristic_weak_formula ` S)))", "by blast"], ["proof (state)\nthis:\n  finite (supp (Abs_bset (characteristic_weak_formula ` S)))\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with card_B"], ["proof (chain)\npicking this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  finite (supp (Abs_bset (characteristic_weak_formula ` S)))", "have \"P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) \\<longleftrightarrow> (\\<exists>x\\<in>?B. P \\<Turnstile> x)\""], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  finite (supp (Abs_bset (characteristic_weak_formula ` S)))\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (\\<exists>x\\<in>characteristic_weak_formula ` S. P \\<Turnstile> x)", "by simp"], ["proof (state)\nthis:\n  P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_weak_formula ` S. P \\<Turnstile> x)\n\ngoal (2 subgoals):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)\n 2. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with \\<open>\\<And>P Q. P \\<in> S \\<Longrightarrow> P \\<approx>\\<cdot> Q \\<Longrightarrow> Q \\<in> S\\<close>"], ["proof (chain)\npicking this:\n  \\<lbrakk>?P \\<in> S; ?P \\<approx>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_weak_formula ` S. P \\<Turnstile> x)", "show \"P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) \\<longleftrightarrow> P \\<in> S\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?P \\<in> S; ?P \\<approx>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_weak_formula ` S. P \\<Turnstile> x)\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)", "using characteristic_weak_formula_is_characteristic characteristic_weak_formula_is_characteristic' weakly_logically_equivalent_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?P \\<in> S; ?P \\<approx>\\<cdot> ?Q\\<rbrakk>\n  \\<Longrightarrow> ?Q \\<in> S\n  P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n  (\\<exists>x\\<in>characteristic_weak_formula ` S. P \\<Turnstile> x)\n  ?Q \\<Turnstile> characteristic_weak_formula ?P = ?P \\<approx>\\<cdot> ?Q\n  ?Q \\<Turnstile> characteristic_weak_formula ?P = (?P \\<equiv>\\<cdot> ?Q)\n  ?P \\<equiv>\\<cdot> ?Q \\<equiv>\n  \\<forall>x.\n     weak_formula x \\<longrightarrow> ?P \\<Turnstile> x = ?Q \\<Turnstile> x\n\ngoal (1 subgoal):\n 1. P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n    (P \\<in> S)", "by fastforce\n\n    \\<comment> \\<open>it remains to show that the disjunction is a weak formula\\<close>"], ["proof (state)\nthis:\n  P \\<Turnstile> Disj (Abs_bset (characteristic_weak_formula ` S)) =\n  (P \\<in> S)\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"eqvt Formula.Not\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt Formula.Not", "by (simp add: eqvtI)"], ["proof (state)\nthis:\n  eqvt Formula.Not\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with supp_B and \\<open>eqvt image\\<close>"], ["proof (chain)\npicking this:\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n  eqvt (`)\n  eqvt Formula.Not", "have supp_Not_B: \"supp (Formula.Not ` ?B) \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n  eqvt (`)\n  eqvt Formula.Not\n\ngoal (1 subgoal):\n 1. supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S", "using supp_fun_eqvt supp_fun_app supp_fun_app_eqvt"], ["proof (prove)\nusing this:\n  supp (characteristic_weak_formula ` S) \\<subseteq> supp S\n  eqvt (`)\n  eqvt Formula.Not\n  eqvt ?f \\<Longrightarrow> supp ?f = {}\n  supp (?f ?x) \\<subseteq> supp ?f \\<union> supp ?x\n  eqvt ?f \\<Longrightarrow> supp (?f ?x) \\<subseteq> supp ?x\n\ngoal (1 subgoal):\n 1. supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"|Formula.Not ` ?B| \\<le>o |?B|\""], ["proof (prove)\ngoal (1 subgoal):\n 1. |Formula.Not ` characteristic_weak_formula ` S| \\<le>o\n    |characteristic_weak_formula ` S|", "by simp"], ["proof (state)\nthis:\n  |Formula.Not ` characteristic_weak_formula ` S| \\<le>o\n  |characteristic_weak_formula ` S|\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "also"], ["proof (state)\nthis:\n  |Formula.Not ` characteristic_weak_formula ` S| \\<le>o\n  |characteristic_weak_formula ` S|\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "note card_B"], ["proof (state)\nthis:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "finally"], ["proof (chain)\npicking this:\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "have card_not_B: \"|Formula.Not ` ?B| <o natLeq +c |UNIV :: 'idx set|\""], ["proof (prove)\nusing this:\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "."], ["proof (state)\nthis:\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with supp_Not_B"], ["proof (chain)\npicking this:\n  supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "have \"supp (Abs_bset (Formula.Not ` ?B) :: _ set['idx]) \\<subseteq> supp S\""], ["proof (prove)\nusing this:\n  supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n    \\<subseteq> supp S", "using supp_Abs_bset"], ["proof (prove)\nusing this:\n  supp (Formula.Not ` characteristic_weak_formula ` S) \\<subseteq> supp S\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  |?A| <o natLeq +c |UNIV| \\<Longrightarrow> supp (Abs_bset ?A) = supp ?A\n\ngoal (1 subgoal):\n 1. supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n    \\<subseteq> supp S", "by blast"], ["proof (state)\nthis:\n  supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n  \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "with \\<open>finite (supp S)\\<close>"], ["proof (chain)\npicking this:\n  finite (supp S)\n  supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n  \\<subseteq> supp S", "have \"finite (supp (Abs_bset (Formula.Not ` ?B) :: _ set['idx]))\""], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n  \\<subseteq> supp S\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))", "using finite_supp rev_finite_subset"], ["proof (prove)\nusing this:\n  finite (supp S)\n  supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S))\n  \\<subseteq> supp S\n  finite (supp ?x)\n  \\<lbrakk>finite ?B; ?A \\<subseteq> ?B\\<rbrakk> \\<Longrightarrow> finite ?A\n\ngoal (1 subgoal):\n 1. finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))", "by blast"], ["proof (state)\nthis:\n  finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "moreover"], ["proof (state)\nthis:\n  finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "have \"\\<And>x. x \\<in> Formula.Not ` ?B \\<Longrightarrow> weak_formula x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Formula.Not `\n               characteristic_weak_formula ` S \\<Longrightarrow>\n       weak_formula x", "using characteristic_weak_formula_is_weak wf_Not"], ["proof (prove)\nusing this:\n  weak_formula (characteristic_weak_formula ?P)\n  weak_formula ?x \\<Longrightarrow> weak_formula (Formula.Not ?x)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> Formula.Not `\n               characteristic_weak_formula ` S \\<Longrightarrow>\n       weak_formula x", "by auto"], ["proof (state)\nthis:\n  ?x9 \\<in> Formula.Not ` characteristic_weak_formula ` S \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "moreover"], ["proof (state)\nthis:\n  ?x9 \\<in> Formula.Not ` characteristic_weak_formula ` S \\<Longrightarrow>\n  weak_formula ?x9\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "from card_B"], ["proof (chain)\npicking this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "have *: \"map_bset Formula.Not (Abs_bset ?B :: _ set['idx]) = (Abs_bset (Formula.Not ` ?B) :: _ set['idx])\""], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n    Abs_bset (Formula.Not ` characteristic_weak_formula ` S)", "using map_bset.abs_eq[unfolded eq_onp_def]"], ["proof (prove)\nusing this:\n  |characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n  |?x| <o natLeq +c |UNIV| \\<and> ?x = ?x \\<Longrightarrow>\n  map_bset ?xa (Abs_bset ?x) = Abs_bset (?xa ` ?x)\n\ngoal (1 subgoal):\n 1. map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n    Abs_bset (Formula.Not ` characteristic_weak_formula ` S)", "by blast"], ["proof (state)\nthis:\n  map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n  Abs_bset (Formula.Not ` characteristic_weak_formula ` S)\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "moreover"], ["proof (state)\nthis:\n  map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n  Abs_bset (Formula.Not ` characteristic_weak_formula ` S)\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "from card_not_B"], ["proof (chain)\npicking this:\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|", "have \"set_bset (Abs_bset (Formula.Not ` ?B) :: _ set['idx]) = Formula.Not ` ?B\""], ["proof (prove)\nusing this:\n  |Formula.Not ` characteristic_weak_formula ` S| <o natLeq +c |UNIV|\n\ngoal (1 subgoal):\n 1. set_bset (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)) =\n    Formula.Not ` characteristic_weak_formula ` S", "by simp"], ["proof (state)\nthis:\n  set_bset (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)) =\n  Formula.Not ` characteristic_weak_formula ` S\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "ultimately"], ["proof (chain)\npicking this:\n  finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))\n  ?x9 \\<in> Formula.Not ` characteristic_weak_formula ` S \\<Longrightarrow>\n  weak_formula ?x9\n  map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n  Abs_bset (Formula.Not ` characteristic_weak_formula ` S)\n  set_bset (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)) =\n  Formula.Not ` characteristic_weak_formula ` S", "show \"weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))\""], ["proof (prove)\nusing this:\n  finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))\n  ?x9 \\<in> Formula.Not ` characteristic_weak_formula ` S \\<Longrightarrow>\n  weak_formula ?x9\n  map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n  Abs_bset (Formula.Not ` characteristic_weak_formula ` S)\n  set_bset (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)) =\n  Formula.Not ` characteristic_weak_formula ` S\n\ngoal (1 subgoal):\n 1. weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))", "unfolding Disj_def"], ["proof (prove)\nusing this:\n  finite (supp (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)))\n  ?x9 \\<in> Formula.Not ` characteristic_weak_formula ` S \\<Longrightarrow>\n  weak_formula ?x9\n  map_bset Formula.Not (Abs_bset (characteristic_weak_formula ` S)) =\n  Abs_bset (Formula.Not ` characteristic_weak_formula ` S)\n  set_bset (Abs_bset (Formula.Not ` characteristic_weak_formula ` S)) =\n  Formula.Not ` characteristic_weak_formula ` S\n\ngoal (1 subgoal):\n 1. weak_formula\n     (Formula.Not\n       (Conj\n         (map_bset Formula.Not\n           (Abs_bset (characteristic_weak_formula ` S)))))", "by (metis wf_Conj wf_Not)"], ["proof (state)\nthis:\n  weak_formula (Disj (Abs_bset (characteristic_weak_formula ` S)))\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}