{"file_name": "/home/qj213/afp-2021-10-22/thys/Liouville_Numbers/Liouville_Numbers.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Liouville_Numbers", "problem_names": ["lemma (in liouville) irrational: \"x \\<notin> \\<rat>\"", "lemma liouville_irrational_algebraic:\n  fixes x :: real\n  assumes irrationsl: \"x \\<notin> \\<rat>\" and \"algebraic x\"\n  obtains c :: real and n :: nat\n    where \"c > 0\" and \"\\<And>(p::int) (q::int). q > 0 \\<Longrightarrow> abs (x - p / q) > c / of_int q ^ n\"", "lemma (in liouville) transcendental: \"\\<not>algebraic x\"", "lemma standard_liouville_summable:\n  fixes p :: \"nat \\<Rightarrow> int\" and q :: int\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\"\n  shows   \"summable (\\<lambda>k. p k / of_int q ^ fact (Suc k))\"", "lemma standard_liouville_sums:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\"\n  shows   \"(\\<lambda>k. p k / of_int q ^ fact (Suc k)) sums standard_liouville p q\"", "lemma standard_liouville_is_liouville:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\" \"frequently (\\<lambda>n. p n \\<noteq> 0) sequentially\"\n  defines \"b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\"\n  defines \"a \\<equiv> \\<lambda>n. (\\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k)))\"\n  shows   \"liouville (standard_liouville p q) a b\"", "theorem transcendental_standard_liouville:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\" \"frequently (\\<lambda>k. p k \\<noteq> 0) sequentially\"\n  shows   \"\\<not>algebraic (standard_liouville p q)\""], "translations": [["", "lemma (in liouville) irrational: \"x \\<notin> \\<rat>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> \\<rat>", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "assume \"x \\<in> \\<rat>\""], ["proof (state)\nthis:\n  x \\<in> \\<rat>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  x \\<in> \\<rat>", "obtain c d :: int where d: \"x = of_int c / of_int d\" \"d > 0\""], ["proof (prove)\nusing this:\n  x \\<in> \\<rat>\n\ngoal (1 subgoal):\n 1. (\\<And>c d.\n        \\<lbrakk>x = real_of_int c / real_of_int d; 0 < d\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (elim Rats_cases') simp"], ["proof (state)\nthis:\n  x = real_of_int c / real_of_int d\n  0 < d\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "define n where \"n = Suc (nat \\<lceil>log 2 d\\<rceil>)\""], ["proof (state)\nthis:\n  n = Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "note q_gt_1 = denom_gt_1[of n]"], ["proof (state)\nthis:\n  1 < q n\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "have neq: \"c * q n \\<noteq> d * p n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c * q n \\<noteq> d * p n", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. c * q n = d * p n \\<Longrightarrow> False", "assume \"c * q n = d * p n\""], ["proof (state)\nthis:\n  c * q n = d * p n\n\ngoal (1 subgoal):\n 1. c * q n = d * p n \\<Longrightarrow> False", "hence \"of_int (c * q n) = of_int (d * p n)\""], ["proof (prove)\nusing this:\n  c * q n = d * p n\n\ngoal (1 subgoal):\n 1. of_int (c * q n) = of_int (d * p n)", "by (simp only: )"], ["proof (state)\nthis:\n  of_int (c * q n) = of_int (d * p n)\n\ngoal (1 subgoal):\n 1. c * q n = d * p n \\<Longrightarrow> False", "with approx_int_pos[of n] d q_gt_1"], ["proof (chain)\npicking this:\n  0 < \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n  x = real_of_int c / real_of_int d\n  0 < d\n  1 < q n\n  of_int (c * q n) = of_int (d * p n)", "show False"], ["proof (prove)\nusing this:\n  0 < \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n  x = real_of_int c / real_of_int d\n  0 < d\n  1 < q n\n  of_int (c * q n) = of_int (d * p n)\n\ngoal (1 subgoal):\n 1. False", "by (auto simp: field_simps)"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  c * q n \\<noteq> d * p n\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "hence abs_pos: \"0 < abs (c * q n - d * p n)\""], ["proof (prove)\nusing this:\n  c * q n \\<noteq> d * p n\n\ngoal (1 subgoal):\n 1. 0 < \\<bar>c * q n - d * p n\\<bar>", "by simp"], ["proof (state)\nthis:\n  0 < \\<bar>c * q n - d * p n\\<bar>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "from q_gt_1 d"], ["proof (chain)\npicking this:\n  1 < q n\n  x = real_of_int c / real_of_int d\n  0 < d", "have \"of_int d = 2 powr log 2 d\""], ["proof (prove)\nusing this:\n  1 < q n\n  x = real_of_int c / real_of_int d\n  0 < d\n\ngoal (1 subgoal):\n 1. real_of_int d = 2 powr log 2 (real_of_int d)", "by (subst powr_log_cancel) simp_all"], ["proof (state)\nthis:\n  real_of_int d = 2 powr log 2 (real_of_int d)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  real_of_int d = 2 powr log 2 (real_of_int d)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "from d"], ["proof (chain)\npicking this:\n  x = real_of_int c / real_of_int d\n  0 < d", "have \"log 2 (of_int d) \\<ge> log 2 1\""], ["proof (prove)\nusing this:\n  x = real_of_int c / real_of_int d\n  0 < d\n\ngoal (1 subgoal):\n 1. log 2 1 \\<le> log 2 (real_of_int d)", "by (subst log_le_cancel_iff) simp_all"], ["proof (state)\nthis:\n  log 2 1 \\<le> log 2 (real_of_int d)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "hence \"2 powr log 2 d \\<le> 2 powr of_nat (nat \\<lceil>log 2 d\\<rceil>)\""], ["proof (prove)\nusing this:\n  log 2 1 \\<le> log 2 (real_of_int d)\n\ngoal (1 subgoal):\n 1. 2 powr log 2 (real_of_int d)\n    \\<le> 2 powr real (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)", "by (intro powr_mono) simp_all"], ["proof (state)\nthis:\n  2 powr log 2 (real_of_int d)\n  \\<le> 2 powr real (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  2 powr log 2 (real_of_int d)\n  \\<le> 2 powr real (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "have \"\\<dots> = of_int (2 ^ nat \\<lceil>log 2 d\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr real (nat \\<lceil>log 2 (real_of_int d)\\<rceil>) =\n    real_of_int (2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>)", "by (subst powr_realpow) simp_all"], ["proof (state)\nthis:\n  2 powr real (nat \\<lceil>log 2 (real_of_int d)\\<rceil>) =\n  real_of_int (2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  real_of_int d\n  \\<le> real_of_int (2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>)", "have \"d \\<le> 2 ^ nat \\<lceil>log 2 (of_int d)\\<rceil>\""], ["proof (prove)\nusing this:\n  real_of_int d\n  \\<le> real_of_int (2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. d \\<le> 2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>", "by (subst (asm) of_int_le_iff)"], ["proof (state)\nthis:\n  d \\<le> 2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  d \\<le> 2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "have \"\\<dots> * q n \\<le> q n ^ Suc (nat \\<lceil>log 2 (of_int d)\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil> * q n\n    \\<le> q n ^ Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)", "by (subst power_Suc, subst mult.commute, intro mult_left_mono power_mono, \n        insert q_gt_1) simp_all"], ["proof (state)\nthis:\n  2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil> * q n\n  \\<le> q n ^ Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  2 ^ nat \\<lceil>log 2 (real_of_int d)\\<rceil> * q n\n  \\<le> q n ^ Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "from q_gt_1"], ["proof (chain)\npicking this:\n  1 < q n", "have \"\\<dots> = q n ^ n\""], ["proof (prove)\nusing this:\n  1 < q n\n\ngoal (1 subgoal):\n 1. q n ^ Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>) = q n ^ n", "by (simp add: n_def)"], ["proof (state)\nthis:\n  q n ^ Suc (nat \\<lceil>log 2 (real_of_int d)\\<rceil>) = q n ^ n\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> x * q n \\<le> y * q n) \\<Longrightarrow>\n  d * q n \\<le> q n ^ n", "have \"1 / of_int (q n ^ n) \\<le> 1 / real_of_int (d * q n)\""], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> x * q n \\<le> y * q n) \\<Longrightarrow>\n  d * q n \\<le> q n ^ n\n\ngoal (1 subgoal):\n 1. 1 / real_of_int (q n ^ n) \\<le> 1 / real_of_int (d * q n)", "using q_gt_1 d"], ["proof (prove)\nusing this:\n  (\\<And>x y.\n      x \\<le> y \\<Longrightarrow> x * q n \\<le> y * q n) \\<Longrightarrow>\n  d * q n \\<le> q n ^ n\n  1 < q n\n  x = real_of_int c / real_of_int d\n  0 < d\n\ngoal (1 subgoal):\n 1. 1 / real_of_int (q n ^ n) \\<le> 1 / real_of_int (d * q n)", "by (intro divide_left_mono Rings.mult_pos_pos of_int_pos, subst of_int_le_iff) simp_all"], ["proof (state)\nthis:\n  1 / real_of_int (q n ^ n) \\<le> 1 / real_of_int (d * q n)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / real_of_int (q n ^ n) \\<le> 1 / real_of_int (d * q n)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "have \"\\<dots> \\<le> of_int (abs (c * q n - d * p n)) / real_of_int (d * q n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real_of_int (d * q n)\n    \\<le> real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n)", "using q_gt_1 d abs_pos"], ["proof (prove)\nusing this:\n  1 < q n\n  x = real_of_int c / real_of_int d\n  0 < d\n  0 < \\<bar>c * q n - d * p n\\<bar>\n\ngoal (1 subgoal):\n 1. 1 / real_of_int (d * q n)\n    \\<le> real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n)", "by (intro divide_right_mono) (linarith, simp)"], ["proof (state)\nthis:\n  1 / real_of_int (d * q n)\n  \\<le> real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / real_of_int (d * q n)\n  \\<le> real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n)\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "have \"\\<dots> = abs (x - of_int (p n) / of_int (q n))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n) =\n    \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>", "using q_gt_1 d(2)"], ["proof (prove)\nusing this:\n  1 < q n\n  0 < d\n\ngoal (1 subgoal):\n 1. real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n) =\n    \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>", "by (simp_all add: divide_simps d(1) mult_ac)"], ["proof (state)\nthis:\n  real_of_int \\<bar>c * q n - d * p n\\<bar> / real_of_int (d * q n) =\n  \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<rat> \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  1 / real_of_int (q n ^ n)\n  \\<le> \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>", "show False"], ["proof (prove)\nusing this:\n  1 / real_of_int (q n ^ n)\n  \\<le> \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n\ngoal (1 subgoal):\n 1. False", "using approx_int[of n]"], ["proof (prove)\nusing this:\n  1 / real_of_int (q n ^ n)\n  \\<le> \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n  \\<bar>x - real_of_int (p n) / real_of_int (q n)\\<bar>\n  < 1 / real_of_int (q n) ^ n\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Next, any irrational algebraic number cannot be approximated with rational \n  numbers in the Liouville sense.\n\\<close>"], ["", "lemma liouville_irrational_algebraic:\n  fixes x :: real\n  assumes irrationsl: \"x \\<notin> \\<rat>\" and \"algebraic x\"\n  obtains c :: real and n :: nat\n    where \"c > 0\" and \"\\<And>(p::int) (q::int). q > 0 \\<Longrightarrow> abs (x - p / q) > c / of_int q ^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from \\<open>algebraic x\\<close>"], ["proof (chain)\npicking this:\n  algebraic x", "guess p"], ["proof (prove)\nusing this:\n  algebraic x\n\ngoal (1 subgoal):\n 1. thesis", "by (elim algebraicE)"], ["proof (state)\nthis:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "note p = this"], ["proof (state)\nthis:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define n where \"n = degree p\"\n\n  \\<comment> \\<open>The derivative of @{term p} is bounded within @{term \"{x-1..x+1}\"}.\\<close>"], ["proof (state)\nthis:\n  n = degree p\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?f = \"\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define M where \"M = (SUP t\\<in>{x-1..x+1}. ?f t)\""], ["proof (state)\nthis:\n  M = (SUP t\\<in>{x - 1..x + 1}. \\<bar>poly (pderiv p) t\\<bar>)\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define roots where \"roots = {x. poly p x = 0} - {x}\""], ["proof (state)\nthis:\n  roots = {x. poly p x = 0} - {x}\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define A_set where \"A_set = {1, 1/M} \\<union> {abs (x' - x) |x'. x' \\<in> roots}\""], ["proof (state)\nthis:\n  A_set = {1, 1 / M} \\<union> {\\<bar>x' - x\\<bar> |x'. x' \\<in> roots}\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define A' where \"A' = Min A_set\""], ["proof (state)\nthis:\n  A' = Min A_set\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "define A  where \"A = A' / 2\"\n  \\<comment> \\<open>We define @{term A} to be a positive real number that is less than @{term 1}, \n      @{term \"1/M\"} and any distance from @{term x} to another root of @{term p}.\\<close>\n\n  \\<comment> \\<open>Properties of @{term M}, our upper bound for the derivative of @{term p}:\\<close>"], ["proof (state)\nthis:\n  A = A' / 2\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<exists>s\\<in>{x-1..x+1}. \\<forall>y\\<in>{x-1..x+1}. ?f s \\<ge> ?f y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>s\\<in>{x - 1..x + 1}.\n       \\<forall>y\\<in>{x - 1..x + 1}.\n          \\<bar>poly (pderiv p) y\\<bar> \\<le> \\<bar>poly (pderiv p) s\\<bar>", "by (intro continuous_attains_sup) (auto intro!: continuous_intros)"], ["proof (state)\nthis:\n  \\<exists>s\\<in>{x - 1..x + 1}.\n     \\<forall>y\\<in>{x - 1..x + 1}.\n        \\<bar>poly (pderiv p) y\\<bar> \\<le> \\<bar>poly (pderiv p) s\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence bdd: \"bdd_above (?f ` {x-1..x+1})\""], ["proof (prove)\nusing this:\n  \\<exists>s\\<in>{x - 1..x + 1}.\n     \\<forall>y\\<in>{x - 1..x + 1}.\n        \\<bar>poly (pderiv p) y\\<bar> \\<le> \\<bar>poly (pderiv p) s\\<bar>\n\ngoal (1 subgoal):\n 1. bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})", "by auto"], ["proof (state)\nthis:\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have M_pos: \"M > 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 < M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. 0 < M", "from p"], ["proof (chain)\npicking this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0", "have \"pderiv p \\<noteq> 0\""], ["proof (prove)\nusing this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n\ngoal (1 subgoal):\n 1. pderiv p \\<noteq> 0", "by (auto dest!: pderiv_iszero)"], ["proof (state)\nthis:\n  pderiv p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < M", "hence \"finite {x. poly (pderiv p) x = 0}\""], ["proof (prove)\nusing this:\n  pderiv p \\<noteq> 0\n\ngoal (1 subgoal):\n 1. finite {x. poly (pderiv p) x = 0}", "using poly_roots_finite"], ["proof (prove)\nusing this:\n  pderiv p \\<noteq> 0\n  ?p \\<noteq> 0 \\<Longrightarrow> finite {x. poly ?p x = (0::?'a)}\n\ngoal (1 subgoal):\n 1. finite {x. poly (pderiv p) x = 0}", "by blast"], ["proof (state)\nthis:\n  finite {x. poly (pderiv p) x = 0}\n\ngoal (1 subgoal):\n 1. 0 < M", "moreover"], ["proof (state)\nthis:\n  finite {x. poly (pderiv p) x = 0}\n\ngoal (1 subgoal):\n 1. 0 < M", "have \"\\<not>finite {x-1..x+1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. infinite {x - 1..x + 1}", "by (simp add: infinite_Icc)"], ["proof (state)\nthis:\n  infinite {x - 1..x + 1}\n\ngoal (1 subgoal):\n 1. 0 < M", "ultimately"], ["proof (chain)\npicking this:\n  finite {x. poly (pderiv p) x = 0}\n  infinite {x - 1..x + 1}", "have \"\\<not>finite ({x-1..x+1} - {x. poly (pderiv p) x = 0})\""], ["proof (prove)\nusing this:\n  finite {x. poly (pderiv p) x = 0}\n  infinite {x - 1..x + 1}\n\ngoal (1 subgoal):\n 1. infinite ({x - 1..x + 1} - {x. poly (pderiv p) x = 0})", "by simp"], ["proof (state)\nthis:\n  infinite ({x - 1..x + 1} - {x. poly (pderiv p) x = 0})\n\ngoal (1 subgoal):\n 1. 0 < M", "hence \"{x-1..x+1} - {x. poly (pderiv p) x = 0} \\<noteq> {}\""], ["proof (prove)\nusing this:\n  infinite ({x - 1..x + 1} - {x. poly (pderiv p) x = 0})\n\ngoal (1 subgoal):\n 1. {x - 1..x + 1} - {x. poly (pderiv p) x = 0} \\<noteq> {}", "by (intro notI) simp"], ["proof (state)\nthis:\n  {x - 1..x + 1} - {x. poly (pderiv p) x = 0} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. 0 < M", "then"], ["proof (chain)\npicking this:\n  {x - 1..x + 1} - {x. poly (pderiv p) x = 0} \\<noteq> {}", "obtain t where t: \"t \\<in> {x-1..x+1}\" and \"poly (pderiv p) t \\<noteq> 0\""], ["proof (prove)\nusing this:\n  {x - 1..x + 1} - {x. poly (pderiv p) x = 0} \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>t.\n        \\<lbrakk>t \\<in> {x - 1..x + 1};\n         poly (pderiv p) t \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  t \\<in> {x - 1..x + 1}\n  poly (pderiv p) t \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < M", "hence \"0 < ?f t\""], ["proof (prove)\nusing this:\n  t \\<in> {x - 1..x + 1}\n  poly (pderiv p) t \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 < \\<bar>poly (pderiv p) t\\<bar>", "by simp"], ["proof (state)\nthis:\n  0 < \\<bar>poly (pderiv p) t\\<bar>\n\ngoal (1 subgoal):\n 1. 0 < M", "also"], ["proof (state)\nthis:\n  0 < \\<bar>poly (pderiv p) t\\<bar>\n\ngoal (1 subgoal):\n 1. 0 < M", "from t and bdd"], ["proof (chain)\npicking this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})", "have \"\\<dots> \\<le> M\""], ["proof (prove)\nusing this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})\n\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar> \\<le> M", "unfolding M_def"], ["proof (prove)\nusing this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})\n\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar>\n    \\<le> (SUP t\\<in>{x - 1..x + 1}. \\<bar>poly (pderiv p) t\\<bar>)", "by (rule cSUP_upper)"], ["proof (state)\nthis:\n  \\<bar>poly (pderiv p) t\\<bar> \\<le> M\n\ngoal (1 subgoal):\n 1. 0 < M", "finally"], ["proof (chain)\npicking this:\n  0 < M", "show \"M > 0\""], ["proof (prove)\nusing this:\n  0 < M\n\ngoal (1 subgoal):\n 1. 0 < M", "."], ["proof (state)\nthis:\n  0 < M\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  0 < M\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have M_sup: \"?f t \\<le> M\" if \"t \\<in> {x-1..x+1}\" for t"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar> \\<le> M", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar> \\<le> M", "from that and bdd"], ["proof (chain)\npicking this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})", "show \"?f t \\<le> M\""], ["proof (prove)\nusing this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})\n\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar> \\<le> M", "unfolding M_def"], ["proof (prove)\nusing this:\n  t \\<in> {x - 1..x + 1}\n  bdd_above ((\\<lambda>t. \\<bar>poly (pderiv p) t\\<bar>) ` {x - 1..x + 1})\n\ngoal (1 subgoal):\n 1. \\<bar>poly (pderiv p) t\\<bar>\n    \\<le> (SUP t\\<in>{x - 1..x + 1}. \\<bar>poly (pderiv p) t\\<bar>)", "by (rule cSUP_upper)"], ["proof (state)\nthis:\n  \\<bar>poly (pderiv p) t\\<bar> \\<le> M\n\ngoal:\nNo subgoals!", "qed\n\n\n  \\<comment> \\<open>Properties of @{term A}:\\<close>"], ["proof (state)\nthis:\n  ?t \\<in> {x - 1..x + 1} \\<Longrightarrow>\n  \\<bar>poly (pderiv p) ?t\\<bar> \\<le> M\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from p poly_roots_finite[of p]"], ["proof (chain)\npicking this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  p \\<noteq> 0 \\<Longrightarrow> finite {x. poly p x = 0}", "have \"finite A_set\""], ["proof (prove)\nusing this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  p \\<noteq> 0 \\<Longrightarrow> finite {x. poly p x = 0}\n\ngoal (1 subgoal):\n 1. finite A_set", "unfolding A_set_def roots_def"], ["proof (prove)\nusing this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  p \\<noteq> 0 \\<Longrightarrow> finite {x. poly p x = 0}\n\ngoal (1 subgoal):\n 1. finite\n     ({1, 1 / M} \\<union>\n      {\\<bar>x' - x\\<bar> |x'. x' \\<in> {x. poly p x = 0} - {x}})", "by simp"], ["proof (state)\nthis:\n  finite A_set\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"x \\<notin> roots\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> roots", "unfolding roots_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<notin> {x. poly p x = 0} - {x}", "by auto"], ["proof (state)\nthis:\n  x \\<notin> roots\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence \"A' > 0\""], ["proof (prove)\nusing this:\n  x \\<notin> roots\n\ngoal (1 subgoal):\n 1. 0 < A'", "using Min_gr_iff[OF \\<open>finite A_set\\<close>, folded A'_def, of 0]"], ["proof (prove)\nusing this:\n  x \\<notin> roots\n  A_set \\<noteq> {} \\<Longrightarrow>\n  (0 < A') = (\\<forall>a\\<in>A_set. 0 < a)\n\ngoal (1 subgoal):\n 1. 0 < A'", "by (auto simp: A_set_def M_pos)"], ["proof (state)\nthis:\n  0 < A'\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence A_pos: \"A > 0\""], ["proof (prove)\nusing this:\n  0 < A'\n\ngoal (1 subgoal):\n 1. 0 < A", "by (simp add: A_def)"], ["proof (state)\nthis:\n  0 < A\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from \\<open>A' > 0\\<close>"], ["proof (chain)\npicking this:\n  0 < A'", "have \"A < A'\""], ["proof (prove)\nusing this:\n  0 < A'\n\ngoal (1 subgoal):\n 1. A < A'", "by (simp add: A_def)"], ["proof (state)\nthis:\n  A < A'\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  A < A'\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from Min_le[OF \\<open>finite A_set\\<close>, folded A'_def]"], ["proof (chain)\npicking this:\n  ?x \\<in> A_set \\<Longrightarrow> A' \\<le> ?x", "have \"A' \\<le> 1\" \"A' \\<le> 1/M\" \"\\<And>x'. x' \\<noteq> x \\<Longrightarrow> poly p x' = 0 \\<Longrightarrow> A' \\<le> abs (x' - x)\""], ["proof (prove)\nusing this:\n  ?x \\<in> A_set \\<Longrightarrow> A' \\<le> ?x\n\ngoal (1 subgoal):\n 1. A' \\<le> 1 &&&\n    A' \\<le> 1 / M &&&\n    (\\<And>x'.\n        \\<lbrakk>x' \\<noteq> x; poly p x' = 0\\<rbrakk>\n        \\<Longrightarrow> A' \\<le> \\<bar>x' - x\\<bar>)", "unfolding A_set_def roots_def"], ["proof (prove)\nusing this:\n  ?x \\<in> {1, 1 / M} \\<union>\n           {\\<bar>x' - x\\<bar> |x'.\n            x' \\<in> {x. poly p x = 0} - {x}} \\<Longrightarrow>\n  A' \\<le> ?x\n\ngoal (1 subgoal):\n 1. A' \\<le> 1 &&&\n    A' \\<le> 1 / M &&&\n    (\\<And>x'.\n        \\<lbrakk>x' \\<noteq> x; poly p x' = 0\\<rbrakk>\n        \\<Longrightarrow> A' \\<le> \\<bar>x' - x\\<bar>)", "by auto"], ["proof (state)\nthis:\n  A' \\<le> 1\n  A' \\<le> 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A' \\<le> \\<bar>?x' - x\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  A < A'\n  A' \\<le> 1\n  A' \\<le> 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A' \\<le> \\<bar>?x' - x\\<bar>", "have A_less: \"A < 1\" \"A < 1/M\" \"\\<And>x'. x' \\<noteq> x \\<Longrightarrow> poly p x' = 0 \\<Longrightarrow> A < abs (x' - x)\""], ["proof (prove)\nusing this:\n  A < A'\n  A' \\<le> 1\n  A' \\<le> 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A' \\<le> \\<bar>?x' - x\\<bar>\n\ngoal (1 subgoal):\n 1. A < 1 &&&\n    A < 1 / M &&&\n    (\\<And>x'.\n        \\<lbrakk>x' \\<noteq> x; poly p x' = 0\\<rbrakk>\n        \\<Longrightarrow> A < \\<bar>x' - x\\<bar>)", "by fastforce+\n\n\n  \\<comment> \\<open>Finally: no rational number can approximate @{term x} ``well enough''.\\<close>"], ["proof (state)\nthis:\n  A < 1\n  A < 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A < \\<bar>?x' - x\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<forall>(a::int) (b :: int). b > 0 \\<longrightarrow> \\<bar>x - of_int a / of_int b\\<bar> > A / of_int b ^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>a b.\n       0 < b \\<longrightarrow>\n       A / real_of_int b ^ n < \\<bar>x - real_of_int a / real_of_int b\\<bar>", "proof (intro allI impI, rule ccontr)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "fix a b :: int"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "assume b: \"b > 0\" and \"\\<not>(A / of_int b ^ n < \\<bar>x - of_int a / of_int b\\<bar>)\""], ["proof (state)\nthis:\n  0 < b\n  \\<not> A / real_of_int b ^ n\n         < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "hence ab: \"abs (x - of_int a / of_int b) \\<le> A / of_int b ^ n\""], ["proof (prove)\nusing this:\n  0 < b\n  \\<not> A / real_of_int b ^ n\n         < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>x - real_of_int a / real_of_int b\\<bar>\n    \\<le> A / real_of_int b ^ n", "by simp"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from A_pos b"], ["proof (chain)\npicking this:\n  0 < A\n  0 < b", "have \"A / of_int b ^ n \\<le> A / 1\""], ["proof (prove)\nusing this:\n  0 < A\n  0 < b\n\ngoal (1 subgoal):\n 1. A / real_of_int b ^ n \\<le> A / 1", "by (intro divide_left_mono) simp_all"], ["proof (state)\nthis:\n  A / real_of_int b ^ n \\<le> A / 1\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / 1", "have ab': \"abs (x - a / b) \\<le> A\""], ["proof (prove)\nusing this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / 1\n\ngoal (1 subgoal):\n 1. \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A", "by simp"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<dots> \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<le> 1", "using A_less"], ["proof (prove)\nusing this:\n  A < 1\n  A < 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A < \\<bar>?x' - x\\<bar>\n\ngoal (1 subgoal):\n 1. A \\<le> 1", "by simp"], ["proof (state)\nthis:\n  A \\<le> 1\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> 1", "have ab'': \"a / b \\<in> {x-1..x+1}\""], ["proof (prove)\nusing this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> 1\n\ngoal (1 subgoal):\n 1. real_of_int a / real_of_int b \\<in> {x - 1..x + 1}", "by auto"], ["proof (state)\nthis:\n  real_of_int a / real_of_int b \\<in> {x - 1..x + 1}\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "have no_root: \"poly p (a / b) \\<noteq> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) \\<noteq> 0", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) = 0 \\<Longrightarrow> False", "assume \"poly p (a / b) = 0\""], ["proof (state)\nthis:\n  poly p (real_of_int a / real_of_int b) = 0\n\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) = 0 \\<Longrightarrow> False", "moreover"], ["proof (state)\nthis:\n  poly p (real_of_int a / real_of_int b) = 0\n\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) = 0 \\<Longrightarrow> False", "from \\<open>x \\<notin> \\<rat>\\<close>"], ["proof (chain)\npicking this:\n  x \\<notin> \\<rat>", "have \"x \\<noteq> a / b\""], ["proof (prove)\nusing this:\n  x \\<notin> \\<rat>\n\ngoal (1 subgoal):\n 1. x \\<noteq> real_of_int a / real_of_int b", "by auto"], ["proof (state)\nthis:\n  x \\<noteq> real_of_int a / real_of_int b\n\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) = 0 \\<Longrightarrow> False", "ultimately"], ["proof (chain)\npicking this:\n  poly p (real_of_int a / real_of_int b) = 0\n  x \\<noteq> real_of_int a / real_of_int b", "have \"A < abs (a / b - x)\""], ["proof (prove)\nusing this:\n  poly p (real_of_int a / real_of_int b) = 0\n  x \\<noteq> real_of_int a / real_of_int b\n\ngoal (1 subgoal):\n 1. A < \\<bar>real_of_int a / real_of_int b - x\\<bar>", "using A_less(3)"], ["proof (prove)\nusing this:\n  poly p (real_of_int a / real_of_int b) = 0\n  x \\<noteq> real_of_int a / real_of_int b\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A < \\<bar>?x' - x\\<bar>\n\ngoal (1 subgoal):\n 1. A < \\<bar>real_of_int a / real_of_int b - x\\<bar>", "by simp"], ["proof (state)\nthis:\n  A < \\<bar>real_of_int a / real_of_int b - x\\<bar>\n\ngoal (1 subgoal):\n 1. poly p (real_of_int a / real_of_int b) = 0 \\<Longrightarrow> False", "with ab'"], ["proof (chain)\npicking this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A\n  A < \\<bar>real_of_int a / real_of_int b - x\\<bar>", "show False"], ["proof (prove)\nusing this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A\n  A < \\<bar>real_of_int a / real_of_int b - x\\<bar>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<exists>x0\\<in>{x-1..x+1}. poly p (a / b) - poly p x = (a / b - x) * poly (pderiv p) x0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x0\\<in>{x - 1..x + 1}.\n       poly p (real_of_int a / real_of_int b) - poly p x =\n       (real_of_int a / real_of_int b - x) * poly (pderiv p) x0", "using ab''"], ["proof (prove)\nusing this:\n  real_of_int a / real_of_int b \\<in> {x - 1..x + 1}\n\ngoal (1 subgoal):\n 1. \\<exists>x0\\<in>{x - 1..x + 1}.\n       poly p (real_of_int a / real_of_int b) - poly p x =\n       (real_of_int a / real_of_int b - x) * poly (pderiv p) x0", "by (intro poly_MVT') (auto simp: min_def max_def)"], ["proof (state)\nthis:\n  \\<exists>x0\\<in>{x - 1..x + 1}.\n     poly p (real_of_int a / real_of_int b) - poly p x =\n     (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "with p"], ["proof (chain)\npicking this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  \\<exists>x0\\<in>{x - 1..x + 1}.\n     poly p (real_of_int a / real_of_int b) - poly p x =\n     (real_of_int a / real_of_int b - x) * poly (pderiv p) x0", "obtain x0 :: real where x0:\n        \"x0 \\<in> {x-1..x+1}\" \"poly p (a / b) = (a / b - x) * poly (pderiv p) x0\""], ["proof (prove)\nusing this:\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  \\<exists>x0\\<in>{x - 1..x + 1}.\n     poly p (real_of_int a / real_of_int b) - poly p x =\n     (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\n\ngoal (1 subgoal):\n 1. (\\<And>x0.\n        \\<lbrakk>x0 \\<in> {x - 1..x + 1};\n         poly p (real_of_int a / real_of_int b) =\n         (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x0 \\<in> {x - 1..x + 1}\n  poly p (real_of_int a / real_of_int b) =\n  (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from x0(2) no_root"], ["proof (chain)\npicking this:\n  poly p (real_of_int a / real_of_int b) =\n  (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0", "have deriv_pos: \"poly (pderiv p) x0 \\<noteq> 0\""], ["proof (prove)\nusing this:\n  poly p (real_of_int a / real_of_int b) =\n  (real_of_int a / real_of_int b - x) * poly (pderiv p) x0\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. poly (pderiv p) x0 \\<noteq> 0", "by auto"], ["proof (state)\nthis:\n  poly (pderiv p) x0 \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from b p no_root"], ["proof (chain)\npicking this:\n  0 < b\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0", "have p_ab: \"abs (poly p (a / b)) \\<ge> 1 / of_int b ^ n\""], ["proof (prove)\nusing this:\n  0 < b\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 / real_of_int b ^ n\n    \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar>", "unfolding n_def"], ["proof (prove)\nusing this:\n  0 < b\n  coeff p ?i \\<in> \\<int>\n  p \\<noteq> 0\n  poly p x = 0\n  poly p (real_of_int a / real_of_int b) \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 1 / real_of_int b ^ degree p\n    \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar>", "by (intro int_poly_rat_no_root_ge)"], ["proof (state)\nthis:\n  1 / real_of_int b ^ n\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "note ab"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from A_less b"], ["proof (chain)\npicking this:\n  A < 1\n  A < 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A < \\<bar>?x' - x\\<bar>\n  0 < b", "have \"A / of_int b ^ n < (1/M) / of_int b ^ n\""], ["proof (prove)\nusing this:\n  A < 1\n  A < 1 / M\n  \\<lbrakk>?x' \\<noteq> x; poly p ?x' = 0\\<rbrakk>\n  \\<Longrightarrow> A < \\<bar>?x' - x\\<bar>\n  0 < b\n\ngoal (1 subgoal):\n 1. A / real_of_int b ^ n < 1 / M / real_of_int b ^ n", "by (intro divide_strict_right_mono) simp_all"], ["proof (state)\nthis:\n  A / real_of_int b ^ n < 1 / M / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  A / real_of_int b ^ n < 1 / M / real_of_int b ^ n\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<dots> = (1 / b ^ n) / M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / M / real_of_int b ^ n = 1 / real_of_int (b ^ n) / M", "by simp"], ["proof (state)\nthis:\n  1 / M / real_of_int b ^ n = 1 / real_of_int (b ^ n) / M\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / M / real_of_int b ^ n = 1 / real_of_int (b ^ n) / M\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from M_pos ab p_ab"], ["proof (chain)\npicking this:\n  0 < M\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n  1 / real_of_int b ^ n\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar>", "have \"\\<dots> \\<le> abs (poly p (a / b)) / M\""], ["proof (prove)\nusing this:\n  0 < M\n  \\<bar>x - real_of_int a / real_of_int b\\<bar> \\<le> A / real_of_int b ^ n\n  1 / real_of_int b ^ n\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar>\n\ngoal (1 subgoal):\n 1. 1 / real_of_int (b ^ n) / M\n    \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M", "by (intro divide_right_mono) simp_all"], ["proof (state)\nthis:\n  1 / real_of_int (b ^ n) / M\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / real_of_int (b ^ n) / M\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "from deriv_pos M_pos x0(1)"], ["proof (chain)\npicking this:\n  poly (pderiv p) x0 \\<noteq> 0\n  0 < M\n  x0 \\<in> {x - 1..x + 1}", "have \"\\<dots> \\<le> abs (poly p (a / b)) / abs (poly (pderiv p) x0)\""], ["proof (prove)\nusing this:\n  poly (pderiv p) x0 \\<noteq> 0\n  0 < M\n  x0 \\<in> {x - 1..x + 1}\n\ngoal (1 subgoal):\n 1. \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M\n    \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> /\n          \\<bar>poly (pderiv p) x0\\<bar>", "by (intro divide_left_mono M_sup) simp_all"], ["proof (state)\nthis:\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> /\n        \\<bar>poly (pderiv p) x0\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> / M\n  \\<le> \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> /\n        \\<bar>poly (pderiv p) x0\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "have \"\\<bar>poly p (a / b)\\<bar> = \\<bar>a / b - x\\<bar> * \\<bar>poly (pderiv p) x0\\<bar>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> =\n    \\<bar>real_of_int a / real_of_int b - x\\<bar> *\n    \\<bar>poly (pderiv p) x0\\<bar>", "by (subst x0(2)) (simp add: abs_mult)"], ["proof (state)\nthis:\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> =\n  \\<bar>real_of_int a / real_of_int b - x\\<bar> *\n  \\<bar>poly (pderiv p) x0\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "with deriv_pos"], ["proof (chain)\npicking this:\n  poly (pderiv p) x0 \\<noteq> 0\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> =\n  \\<bar>real_of_int a / real_of_int b - x\\<bar> *\n  \\<bar>poly (pderiv p) x0\\<bar>", "have \"\\<bar>poly p (a / b)\\<bar> / \\<bar>poly (pderiv p) x0\\<bar> = \\<bar>x - a / b\\<bar>\""], ["proof (prove)\nusing this:\n  poly (pderiv p) x0 \\<noteq> 0\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> =\n  \\<bar>real_of_int a / real_of_int b - x\\<bar> *\n  \\<bar>poly (pderiv p) x0\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> /\n    \\<bar>poly (pderiv p) x0\\<bar> =\n    \\<bar>x - real_of_int a / real_of_int b\\<bar>", "by (subst nonzero_divide_eq_eq) simp_all"], ["proof (state)\nthis:\n  \\<bar>poly p (real_of_int a / real_of_int b)\\<bar> /\n  \\<bar>poly (pderiv p) x0\\<bar> =\n  \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>0 < b;\n        \\<not> A / real_of_int b ^ n\n               < \\<bar>x - real_of_int a / real_of_int b\\<bar>\\<rbrakk>\n       \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar>\n  < \\<bar>x - real_of_int a / real_of_int b\\<bar>", "show False"], ["proof (prove)\nusing this:\n  \\<bar>x - real_of_int a / real_of_int b\\<bar>\n  < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<forall>a b.\n     0 < b \\<longrightarrow>\n     A / real_of_int b ^ n < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. (\\<And>c n.\n        \\<lbrakk>0 < c;\n         \\<And>p q.\n            0 < q \\<Longrightarrow>\n            c / real_of_int q ^ n\n            < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with A_pos"], ["proof (chain)\npicking this:\n  0 < A\n  \\<forall>a b.\n     0 < b \\<longrightarrow>\n     A / real_of_int b ^ n < \\<bar>x - real_of_int a / real_of_int b\\<bar>", "show ?thesis"], ["proof (prove)\nusing this:\n  0 < A\n  \\<forall>a b.\n     0 < b \\<longrightarrow>\n     A / real_of_int b ^ n < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n\ngoal (1 subgoal):\n 1. thesis", "using that[of A n]"], ["proof (prove)\nusing this:\n  0 < A\n  \\<forall>a b.\n     0 < b \\<longrightarrow>\n     A / real_of_int b ^ n < \\<bar>x - real_of_int a / real_of_int b\\<bar>\n  \\<lbrakk>0 < A;\n   \\<And>p q.\n      0 < q \\<Longrightarrow>\n      A / real_of_int q ^ n\n      < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n  \\<Longrightarrow> thesis\n\ngoal (1 subgoal):\n 1. thesis", "by blast"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Since Liouville numbers are irrational, but can be approximated well by rational \n  numbers in the Liouville sense, they must be transcendental.\n\\<close>"], ["", "lemma (in liouville) transcendental: \"\\<not>algebraic x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> algebraic x", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "assume \"algebraic x\""], ["proof (state)\nthis:\n  algebraic x\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "from liouville_irrational_algebraic[OF irrational this]"], ["proof (chain)\npicking this:\n  (\\<And>c n.\n      \\<lbrakk>0 < c;\n       \\<And>p q.\n          0 < q \\<Longrightarrow>\n          c / real_of_int q ^ n\n          < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis", "guess c n"], ["proof (prove)\nusing this:\n  (\\<And>c n.\n      \\<lbrakk>0 < c;\n       \\<And>p q.\n          0 < q \\<Longrightarrow>\n          c / real_of_int q ^ n\n          < \\<bar>x - real_of_int p / real_of_int q\\<bar>\\<rbrakk>\n      \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. thesis", "."], ["proof (state)\nthis:\n  0 < c\n  0 < ?q \\<Longrightarrow>\n  c / real_of_int ?q ^ n < \\<bar>x - real_of_int ?p / real_of_int ?q\\<bar>\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "note cn = this"], ["proof (state)\nthis:\n  0 < c\n  0 < ?q \\<Longrightarrow>\n  c / real_of_int ?q ^ n < \\<bar>x - real_of_int ?p / real_of_int ?q\\<bar>\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "define r where \"r = nat \\<lceil>log 2 (1 / c)\\<rceil>\""], ["proof (state)\nthis:\n  r = nat \\<lceil>log 2 (1 / c)\\<rceil>\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "define m where \"m = n + r\""], ["proof (state)\nthis:\n  m = n + r\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "from cn(1)"], ["proof (chain)\npicking this:\n  0 < c", "have \"(1/c) = 2 powr log 2 (1/c)\""], ["proof (prove)\nusing this:\n  0 < c\n\ngoal (1 subgoal):\n 1. 1 / c = 2 powr log 2 (1 / c)", "by (subst powr_log_cancel) simp_all"], ["proof (state)\nthis:\n  1 / c = 2 powr log 2 (1 / c)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / c = 2 powr log 2 (1 / c)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "have \"log 2 (1/c) \\<le> of_nat (nat \\<lceil>log 2 (1/c)\\<rceil>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. log 2 (1 / c) \\<le> real (nat \\<lceil>log 2 (1 / c)\\<rceil>)", "by linarith"], ["proof (state)\nthis:\n  log 2 (1 / c) \\<le> real (nat \\<lceil>log 2 (1 / c)\\<rceil>)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "hence \"2 powr log 2 (1/c) \\<le> 2 powr \\<dots>\""], ["proof (prove)\nusing this:\n  log 2 (1 / c) \\<le> real (nat \\<lceil>log 2 (1 / c)\\<rceil>)\n\ngoal (1 subgoal):\n 1. 2 powr log 2 (1 / c)\n    \\<le> 2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>)", "by (intro powr_mono) simp_all"], ["proof (state)\nthis:\n  2 powr log 2 (1 / c) \\<le> 2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  2 powr log 2 (1 / c) \\<le> 2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "have \"\\<dots> = 2 ^ r\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>) = 2 ^ r", "unfolding r_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>) =\n    2 ^ nat \\<lceil>log 2 (1 / c)\\<rceil>", "by (simp add: powr_realpow)"], ["proof (state)\nthis:\n  2 powr real (nat \\<lceil>log 2 (1 / c)\\<rceil>) = 2 ^ r\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  1 / c \\<le> 2 ^ r", "have \"1 / (2^r) \\<le> c\""], ["proof (prove)\nusing this:\n  1 / c \\<le> 2 ^ r\n\ngoal (1 subgoal):\n 1. 1 / 2 ^ r \\<le> c", "using cn(1)"], ["proof (prove)\nusing this:\n  1 / c \\<le> 2 ^ r\n  0 < c\n\ngoal (1 subgoal):\n 1. 1 / 2 ^ r \\<le> c", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  1 / 2 ^ r \\<le> c\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "have \"abs (x - p m / q m) < 1 / of_int (q m) ^ m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n    < 1 / real_of_int (q m) ^ m", "by (rule approx_int)"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  < 1 / real_of_int (q m) ^ m\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  < 1 / real_of_int (q m) ^ m\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "have \"\\<dots> = (1 / of_int (q m) ^ r) * (1 / real_of_int (q m) ^ n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real_of_int (q m) ^ m =\n    1 / real_of_int (q m) ^ r * (1 / real_of_int (q m) ^ n)", "by (simp add: m_def power_add)"], ["proof (state)\nthis:\n  1 / real_of_int (q m) ^ m =\n  1 / real_of_int (q m) ^ r * (1 / real_of_int (q m) ^ n)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / real_of_int (q m) ^ m =\n  1 / real_of_int (q m) ^ r * (1 / real_of_int (q m) ^ n)\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "from denom_gt_1[of m]"], ["proof (chain)\npicking this:\n  1 < q m", "have \"1 / real_of_int (q m) ^ r \\<le> 1 / 2 ^ r\""], ["proof (prove)\nusing this:\n  1 < q m\n\ngoal (1 subgoal):\n 1. 1 / real_of_int (q m) ^ r \\<le> 1 / 2 ^ r", "by (intro divide_left_mono power_mono) simp_all"], ["proof (state)\nthis:\n  1 / real_of_int (q m) ^ r \\<le> 1 / 2 ^ r\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "also"], ["proof (state)\nthis:\n  1 / real_of_int (q m) ^ r \\<le> 1 / 2 ^ r\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "have \"\\<dots> \\<le> c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / 2 ^ r \\<le> c", "by fact"], ["proof (state)\nthis:\n  1 / 2 ^ r \\<le> c\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x * (1 / real_of_int (q m) ^ n)\n              \\<le> y * (1 / real_of_int (q m) ^ n);\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x * (1 / real_of_int (q m) ^ n)\n      \\<le> y * (1 / real_of_int (q m) ^ n)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n                    < c * (1 / real_of_int (q m) ^ n)", "have \"abs (x - p m / q m) < c / of_int (q m) ^ n\""], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x * (1 / real_of_int (q m) ^ n)\n              \\<le> y * (1 / real_of_int (q m) ^ n);\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x * (1 / real_of_int (q m) ^ n)\n      \\<le> y * (1 / real_of_int (q m) ^ n)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n                    < c * (1 / real_of_int (q m) ^ n)\n\ngoal (1 subgoal):\n 1. \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n    < c / real_of_int (q m) ^ n", "using denom_gt_1[of m]"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<And>x y.\n              x \\<le> y \\<Longrightarrow>\n              x * (1 / real_of_int (q m) ^ n)\n              \\<le> y * (1 / real_of_int (q m) ^ n);\n   \\<And>x y.\n      x \\<le> y \\<Longrightarrow>\n      x * (1 / real_of_int (q m) ^ n)\n      \\<le> y * (1 / real_of_int (q m) ^ n)\\<rbrakk>\n  \\<Longrightarrow> \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n                    < c * (1 / real_of_int (q m) ^ n)\n  1 < q m\n\ngoal (1 subgoal):\n 1. \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n    < c / real_of_int (q m) ^ n", "by - (simp_all add: divide_right_mono)"], ["proof (state)\nthis:\n  \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  < c / real_of_int (q m) ^ n\n\ngoal (1 subgoal):\n 1. algebraic x \\<Longrightarrow> False", "with cn(2)[of \"q m\" \"p m\"] denom_gt_1[of m]"], ["proof (chain)\npicking this:\n  0 < q m \\<Longrightarrow>\n  c / real_of_int (q m) ^ n\n  < \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  1 < q m\n  \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  < c / real_of_int (q m) ^ n", "show False"], ["proof (prove)\nusing this:\n  0 < q m \\<Longrightarrow>\n  c / real_of_int (q m) ^ n\n  < \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  1 < q m\n  \\<bar>x - real_of_int (p m) / real_of_int (q m)\\<bar>\n  < c / real_of_int (q m) ^ n\n\ngoal (1 subgoal):\n 1. False", "by simp"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection \\<open>Standard construction for Liouville numbers\\<close>"], ["", "text \\<open>\n  We now define the standard construction for Liouville numbers.\n\\<close>"], ["", "definition standard_liouville :: \"(nat \\<Rightarrow> int) \\<Rightarrow> int \\<Rightarrow> real\" where\n  \"standard_liouville p q = (\\<Sum>k. p k / of_int q ^ fact (Suc k))\""], ["", "lemma standard_liouville_summable:\n  fixes p :: \"nat \\<Rightarrow> int\" and q :: int\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\"\n  shows   \"summable (\\<lambda>k. p k / of_int q ^ fact (Suc k))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. summable (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k))", "proof (rule summable_comparison_test')"], ["proof (state)\ngoal (2 subgoals):\n 1. summable ?g\n 2. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n)) \\<le> ?g n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "show \"summable (\\<lambda>n. (1 / q) ^ n)\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. summable ((^) (1 / real_of_int q))", "by (intro summable_geometric) simp_all"], ["proof (state)\nthis:\n  summable ((^) (1 / real_of_int q))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "fix n :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}", "have \"p n \\<in> {0..<q}\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n\ngoal (1 subgoal):\n 1. p n \\<in> {0..<q}", "by blast"], ["proof (state)\nthis:\n  p n \\<in> {0..<q}\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "with assms(1)"], ["proof (chain)\npicking this:\n  1 < q\n  p n \\<in> {0..<q}", "have \"norm (p n / of_int q ^ fact (Suc n)) \\<le> \n                        q / of_int q ^ (fact (Suc n))\""], ["proof (prove)\nusing this:\n  1 < q\n  p n \\<in> {0..<q}\n\ngoal (1 subgoal):\n 1. norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n    \\<le> real_of_int q / real_of_int q ^ fact (Suc n)", "by (auto simp: field_simps)"], ["proof (state)\nthis:\n  norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n  \\<le> real_of_int q / real_of_int q ^ fact (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "also"], ["proof (state)\nthis:\n  norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n  \\<le> real_of_int q / real_of_int q ^ fact (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"\\<dots> = 1 / of_int q ^ (fact (Suc n) - 1)\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. real_of_int q / real_of_int q ^ fact (Suc n) =\n    1 / real_of_int q ^ (fact (Suc n) - 1)", "by (subst power_diff) (auto simp del: fact_Suc)"], ["proof (state)\nthis:\n  real_of_int q / real_of_int q ^ fact (Suc n) =\n  1 / real_of_int q ^ (fact (Suc n) - 1)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "also"], ["proof (state)\nthis:\n  real_of_int q / real_of_int q ^ fact (Suc n) =\n  1 / real_of_int q ^ (fact (Suc n) - 1)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "have \"Suc n \\<le> fact (Suc n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Suc n \\<le> fact (Suc n)", "by (rule fact_ge_self)"], ["proof (state)\nthis:\n  Suc n \\<le> fact (Suc n)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "with assms(1)"], ["proof (chain)\npicking this:\n  1 < q\n  Suc n \\<le> fact (Suc n)", "have \"1 / real_of_int q ^ (fact (Suc n) - 1) \\<le> 1 / of_int q ^ n\""], ["proof (prove)\nusing this:\n  1 < q\n  Suc n \\<le> fact (Suc n)\n\ngoal (1 subgoal):\n 1. 1 / real_of_int q ^ (fact (Suc n) - 1) \\<le> 1 / real_of_int q ^ n", "by (intro divide_left_mono power_increasing)\n       (auto simp del: fact_Suc simp add: algebra_simps)"], ["proof (state)\nthis:\n  1 / real_of_int q ^ (fact (Suc n) - 1) \\<le> 1 / real_of_int q ^ n\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       ?N \\<le> n \\<Longrightarrow>\n       norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n       \\<le> (1 / real_of_int q) ^ n", "finally"], ["proof (chain)\npicking this:\n  norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n  \\<le> 1 / real_of_int q ^ n", "show \"norm (p n / of_int q ^ fact (Suc n)) \\<le> (1 / q) ^ n\""], ["proof (prove)\nusing this:\n  norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n  \\<le> 1 / real_of_int q ^ n\n\ngoal (1 subgoal):\n 1. norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n    \\<le> (1 / real_of_int q) ^ n", "by (simp add: power_divide)"], ["proof (state)\nthis:\n  norm (real_of_int (p n) / real_of_int q ^ fact (Suc n))\n  \\<le> (1 / real_of_int q) ^ n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma standard_liouville_sums:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\"\n  shows   \"(\\<lambda>k. p k / of_int q ^ fact (Suc k)) sums standard_liouville p q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k)) sums\n    standard_liouville p q", "using standard_liouville_summable[OF assms]"], ["proof (prove)\nusing this:\n  summable (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k))\n\ngoal (1 subgoal):\n 1. (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k)) sums\n    standard_liouville p q", "unfolding standard_liouville_def"], ["proof (prove)\nusing this:\n  summable (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k))\n\ngoal (1 subgoal):\n 1. (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k)) sums\n    (\\<Sum>k. real_of_int (p k) / real_of_int q ^ fact (Suc k))", "by (simp add: summable_sums)"], ["", "text \\<open>\n  Now we prove that the standard construction indeed yields Liouville numbers.\n\\<close>"], ["", "lemma standard_liouville_is_liouville:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\" \"frequently (\\<lambda>n. p n \\<noteq> 0) sequentially\"\n  defines \"b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\"\n  defines \"a \\<equiv> \\<lambda>n. (\\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k)))\"\n  shows   \"liouville (standard_liouville p q) a b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. liouville (standard_liouville p q) a b", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n. 1 < b n\n 3. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "fix n :: nat"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n. 1 < b n\n 3. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"1 < q ^ 1\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. 1 < q ^ 1", "by simp"], ["proof (state)\nthis:\n  1 < q ^ 1\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n. 1 < b n\n 3. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  1 < q ^ 1\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n. 1 < b n\n 3. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"\\<dots> \\<le> b n\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. q ^ 1 \\<le> b n", "unfolding b_def"], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. q ^ 1 \\<le> q ^ fact (Suc n)", "by (intro power_increasing) (simp_all del: fact_Suc)"], ["proof (state)\nthis:\n  q ^ 1 \\<le> b n\n\ngoal (3 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n. 1 < b n\n 3. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "finally"], ["proof (chain)\npicking this:\n  1 < b n", "show \"b n > 1\""], ["proof (prove)\nusing this:\n  1 < b n\n\ngoal (1 subgoal):\n 1. 1 < b n", "."], ["proof (state)\nthis:\n  1 < b n\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "note summable = standard_liouville_summable[OF assms(1,2)]"], ["proof (state)\nthis:\n  summable (\\<lambda>k. real_of_int (p k) / real_of_int q ^ fact (Suc k))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "let ?S = \"\\<Sum>k. p (k + n + 1) / of_int q ^ (fact (Suc (k + n + 1)))\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "let ?C = \"(q - 1) / of_int q ^ (fact (n+2))\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"a n / b n = (\\<Sum>k\\<le>n. p k * (of_int q ^ (fact (n+1) - fact (k+1)) / of_int q ^ (fact (n+1))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int (a n) / real_of_int (b n) =\n    (\\<Sum>k\\<le>n.\n        real_of_int (p k) *\n        (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n         real_of_int q ^ fact (n + 1)))", "by (simp add: a_def b_def sum_divide_distrib of_int_sum)"], ["proof (state)\nthis:\n  real_of_int (a n) / real_of_int (b n) =\n  (\\<Sum>k\\<le>n.\n      real_of_int (p k) *\n      (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n       real_of_int q ^ fact (n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  real_of_int (a n) / real_of_int (b n) =\n  (\\<Sum>k\\<le>n.\n      real_of_int (p k) *\n      (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n       real_of_int q ^ fact (n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"\\<dots> = (\\<Sum>k\\<le>n. p k / of_int q ^ (fact (Suc k)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k\\<le>n.\n        real_of_int (p k) *\n        (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n         real_of_int q ^ fact (n + 1))) =\n    (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k))", "by (intro sum.cong refl, subst inverse_divide [symmetric], subst power_diff [symmetric])\n       (insert assms(1), simp_all add: divide_simps fact_mono_nat del: fact_Suc)"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n.\n      real_of_int (p k) *\n      (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n       real_of_int q ^ fact (n + 1))) =\n  (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  (\\<Sum>k\\<le>n.\n      real_of_int (p k) *\n      (real_of_int q ^ (fact (n + 1) - fact (k + 1)) /\n       real_of_int q ^ fact (n + 1))) =\n  (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"standard_liouville p q - \\<dots> = ?S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. standard_liouville p q -\n    (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k)) =\n    (\\<Sum>k.\n        real_of_int (p (k + n + 1)) /\n        real_of_int q ^ fact (Suc (k + n + 1)))", "unfolding standard_liouville_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k. real_of_int (p k) / real_of_int q ^ fact (Suc k)) -\n    (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k)) =\n    (\\<Sum>k.\n        real_of_int (p (k + n + 1)) /\n        real_of_int q ^ fact (Suc (k + n + 1)))", "by (subst diff_eq_eq) (intro suminf_split_initial_segment' summable)"], ["proof (state)\nthis:\n  standard_liouville p q -\n  (\\<Sum>k\\<le>n. real_of_int (p k) / real_of_int q ^ fact (Suc k)) =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "finally"], ["proof (chain)\npicking this:\n  standard_liouville p q - real_of_int (a n) / real_of_int (b n) =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))", "have \"abs (standard_liouville p q - a n / b n) = abs ?S\""], ["proof (prove)\nusing this:\n  standard_liouville p q - real_of_int (a n) / real_of_int (b n) =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (1 subgoal):\n 1. \\<bar>standard_liouville p q -\n          real_of_int (a n) / real_of_int (b n)\\<bar> =\n    \\<bar>\\<Sum>k.\n             real_of_int (p (k + n + 1)) /\n             real_of_int q ^ fact (Suc (k + n + 1))\\<bar>", "by (simp only: )"], ["proof (state)\nthis:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  \\<bar>\\<Sum>k.\n           real_of_int (p (k + n + 1)) /\n           real_of_int q ^ fact (Suc (k + n + 1))\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "moreover"], ["proof (state)\nthis:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  \\<bar>\\<Sum>k.\n           real_of_int (p (k + n + 1)) /\n           real_of_int q ^ fact (Suc (k + n + 1))\\<bar>\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))", "have \"?S \\<ge> 0\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>k.\n                real_of_int (p (k + n + 1)) /\n                real_of_int q ^ fact (Suc (k + n + 1)))", "by (intro suminf_nonneg allI divide_nonneg_pos summable_ignore_initial_segment summable) force+"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>k.\n              real_of_int (p (k + n + 1)) /\n              real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "ultimately"], ["proof (chain)\npicking this:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  \\<bar>\\<Sum>k.\n           real_of_int (p (k + n + 1)) /\n           real_of_int q ^ fact (Suc (k + n + 1))\\<bar>\n  0 \\<le> (\\<Sum>k.\n              real_of_int (p (k + n + 1)) /\n              real_of_int q ^ fact (Suc (k + n + 1)))", "have eq: \"abs (standard_liouville p q - a n / b n) = ?S\""], ["proof (prove)\nusing this:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  \\<bar>\\<Sum>k.\n           real_of_int (p (k + n + 1)) /\n           real_of_int q ^ fact (Suc (k + n + 1))\\<bar>\n  0 \\<le> (\\<Sum>k.\n              real_of_int (p (k + n + 1)) /\n              real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (1 subgoal):\n 1. \\<bar>standard_liouville p q -\n          real_of_int (a n) / real_of_int (b n)\\<bar> =\n    (\\<Sum>k.\n        real_of_int (p (k + n + 1)) /\n        real_of_int q ^ fact (Suc (k + n + 1)))", "by simp"], ["proof (state)\nthis:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"?S \\<le> (\\<Sum>k. ?C * (1 / q) ^ k)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>k.\n        real_of_int (p (k + n + 1)) /\n        real_of_int q ^ fact (Suc (k + n + 1)))\n    \\<le> (\\<Sum>k.\n              real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n              (1 / real_of_int q) ^ k)", "proof (intro suminf_le allI summable_ignore_initial_segment summable)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na\n 2. summable\n     (\\<lambda>k.\n         real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n         (1 / real_of_int q) ^ k)", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))", "show \"summable (\\<lambda>k. ?C * (1 / q) ^ k)\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n\ngoal (1 subgoal):\n 1. summable\n     (\\<lambda>k.\n         real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n         (1 / real_of_int q) ^ k)", "by (intro summable_mult summable_geometric) simp_all"], ["proof (state)\nthis:\n  summable\n   (\\<lambda>k.\n       real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n       (1 / real_of_int q) ^ k)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "fix k :: nat"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))", "have \"p (k + n + 1) \\<le> q - 1\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n\ngoal (1 subgoal):\n 1. p (k + n + 1) \\<le> q - 1", "by force"], ["proof (state)\nthis:\n  p (k + n + 1) \\<le> q - 1\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "with \\<open>q > 1\\<close>"], ["proof (chain)\npicking this:\n  1 < q\n  p (k + n + 1) \\<le> q - 1", "have \"p (k + n + 1) / of_int q ^ fact (Suc (k + n + 1)) \\<le> \n                         (q - 1) / of_int q ^ (fact (Suc (k + n + 1)))\""], ["proof (prove)\nusing this:\n  1 < q\n  p (k + n + 1) \\<le> q - 1\n\ngoal (1 subgoal):\n 1. real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n    \\<le> real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))", "by (intro divide_right_mono) (simp_all del: fact_Suc)"], ["proof (state)\nthis:\n  real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "also"], ["proof (state)\nthis:\n  real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "from \\<open>q > 1\\<close>"], ["proof (chain)\npicking this:\n  1 < q", "have \"\\<dots> \\<le> (q - 1) / of_int q ^ (fact (n+2) + k)\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n    \\<le> real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k)", "using fact_ineq[of \"n+2\" k]"], ["proof (prove)\nusing this:\n  1 < q\n  1 \\<le> n + 2 \\<Longrightarrow> fact (n + 2) + k \\<le> fact (n + 2 + k)\n\ngoal (1 subgoal):\n 1. real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n    \\<le> real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k)", "by (intro divide_left_mono power_increasing) (simp_all add: add_ac)"], ["proof (state)\nthis:\n  real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "also"], ["proof (state)\nthis:\n  real_of_int (q - 1) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k)\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "have \"\\<dots> = ?C * (1 / q) ^ k\""], ["proof (prove)\ngoal (1 subgoal):\n 1. real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k) =\n    real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n    (1 / real_of_int q) ^ k", "by (simp add: field_simps power_add del: fact_Suc)"], ["proof (state)\nthis:\n  real_of_int (q - 1) / real_of_int q ^ (fact (n + 2) + k) =\n  real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n  (1 / real_of_int q) ^ k\n\ngoal (1 subgoal):\n 1. \\<And>na.\n       real_of_int (p (na + n + 1)) /\n       real_of_int q ^ fact (Suc (na + n + 1))\n       \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n             (1 / real_of_int q) ^ na", "finally"], ["proof (chain)\npicking this:\n  real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n        (1 / real_of_int q) ^ k", "show \"p (k + n + 1) / of_int q ^ fact (Suc (k + n + 1)) \\<le> \\<dots>\""], ["proof (prove)\nusing this:\n  real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n        (1 / real_of_int q) ^ k\n\ngoal (1 subgoal):\n 1. real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n    \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n          (1 / real_of_int q) ^ k", "."], ["proof (state)\nthis:\n  real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1))\n  \\<le> real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n        (1 / real_of_int q) ^ k\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n  \\<le> (\\<Sum>k.\n            real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n            (1 / real_of_int q) ^ k)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n  \\<le> (\\<Sum>k.\n            real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n            (1 / real_of_int q) ^ k)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))", "have \"\\<dots> = ?C * (\\<Sum>k. (1 / q) ^ k)\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k.\n        real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n        (1 / real_of_int q) ^ k) =\n    real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n    (\\<Sum>k. (1 / real_of_int q) ^ k)", "by (intro suminf_mult summable_geometric) simp_all"], ["proof (state)\nthis:\n  (\\<Sum>k.\n      real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n      (1 / real_of_int q) ^ k) =\n  real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n  (\\<Sum>k. (1 / real_of_int q) ^ k)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  (\\<Sum>k.\n      real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n      (1 / real_of_int q) ^ k) =\n  real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n  (\\<Sum>k. (1 / real_of_int q) ^ k)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))", "have \"(\\<Sum>k. (1 / q) ^ k) = 1 / (1 - 1 / q)\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n\ngoal (1 subgoal):\n 1. (\\<Sum>k. (1 / real_of_int q) ^ k) = 1 / (1 - 1 / real_of_int q)", "by (intro suminf_geometric) simp_all"], ["proof (state)\nthis:\n  (\\<Sum>k. (1 / real_of_int q) ^ k) = 1 / (1 - 1 / real_of_int q)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  (\\<Sum>k. (1 / real_of_int q) ^ k) = 1 / (1 - 1 / real_of_int q)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"?C * \\<dots> = of_int q ^ 1 / of_int q ^ fact (n + 2)\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n    (1 / (1 - 1 / real_of_int q)) =\n    real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)", "by (simp add: field_simps)"], ["proof (state)\nthis:\n  real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n  (1 / (1 - 1 / real_of_int q)) =\n  real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  real_of_int (q - 1) / real_of_int q ^ fact (n + 2) *\n  (1 / (1 - 1 / real_of_int q)) =\n  real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"\\<dots> \\<le> of_int q ^ fact (n + 1) / of_int q ^ fact (n + 2)\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)\n    \\<le> real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2)", "by (intro divide_right_mono power_increasing) (simp_all add: field_simps del: fact_Suc)"], ["proof (state)\nthis:\n  real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)\n  \\<le> real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  real_of_int q ^ 1 / real_of_int q ^ fact (n + 2)\n  \\<le> real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"\\<dots> = 1 / (of_int q ^ (fact (n + 2) - fact (n + 1)))\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2) =\n    1 / real_of_int q ^ (fact (n + 2) - fact (n + 1))", "by (subst power_diff) simp_all"], ["proof (state)\nthis:\n  real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2) =\n  1 / real_of_int q ^ (fact (n + 2) - fact (n + 1))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  real_of_int q ^ fact (n + 1) / real_of_int q ^ fact (n + 2) =\n  1 / real_of_int q ^ (fact (n + 2) - fact (n + 1))\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"fact (n + 2) - fact (n + 1) = (n + 1) * fact (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fact (n + 2) - fact (n + 1) = (n + 1) * fact (n + 1)", "by (simp add: algebra_simps)"], ["proof (state)\nthis:\n  fact (n + 2) - fact (n + 1) = (n + 1) * fact (n + 1)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  fact (n + 2) - fact (n + 1) = (n + 1) * fact (n + 1)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "from assms(1)"], ["proof (chain)\npicking this:\n  1 < q", "have \"1 / (of_int q ^ \\<dots>) < 1 / (real_of_int q ^ (fact (n + 1) * n))\""], ["proof (prove)\nusing this:\n  1 < q\n\ngoal (1 subgoal):\n 1. 1 / real_of_int q ^ ((n + 1) * fact (n + 1))\n    < 1 / real_of_int q ^ (fact (n + 1) * n)", "by (intro divide_strict_left_mono power_increasing mult_right_mono) simp_all"], ["proof (state)\nthis:\n  1 / real_of_int q ^ ((n + 1) * fact (n + 1))\n  < 1 / real_of_int q ^ (fact (n + 1) * n)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "also"], ["proof (state)\nthis:\n  1 / real_of_int q ^ ((n + 1) * fact (n + 1))\n  < 1 / real_of_int q ^ (fact (n + 1) * n)\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "have \"\\<dots> = 1 / of_int (b n) ^ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 1 / real_of_int q ^ (fact (n + 1) * n) = 1 / real_of_int (b n) ^ n", "by (simp add: power_mult b_def power_divide del: fact_Suc)"], ["proof (state)\nthis:\n  1 / real_of_int q ^ (fact (n + 1) * n) = 1 / real_of_int (b n) ^ n\n\ngoal (2 subgoals):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>\n 2. \\<And>n.\n       \\<bar>standard_liouville p q -\n             real_of_int (a n) / real_of_int (b n)\\<bar>\n       < 1 / real_of_int (b n) ^ n", "finally"], ["proof (chain)\npicking this:\n  \\<bar>standard_liouville p q - real_of_int (a n) / real_of_int (b n)\\<bar>\n  < 1 / real_of_int (b n) ^ n", "show \"\\<bar>standard_liouville p q - a n / b n\\<bar> < 1 / of_int (b n) ^ n\""], ["proof (prove)\nusing this:\n  \\<bar>standard_liouville p q - real_of_int (a n) / real_of_int (b n)\\<bar>\n  < 1 / real_of_int (b n) ^ n\n\ngoal (1 subgoal):\n 1. \\<bar>standard_liouville p q -\n          real_of_int (a n) / real_of_int (b n)\\<bar>\n    < 1 / real_of_int (b n) ^ n", "."], ["proof (state)\nthis:\n  \\<bar>standard_liouville p q - real_of_int (a n) / real_of_int (b n)\\<bar>\n  < 1 / real_of_int (b n) ^ n\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "from assms(3)"], ["proof (chain)\npicking this:\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0", "obtain k where k: \"k \\<ge> n + 1\" \"p k \\<noteq> 0\""], ["proof (prove)\nusing this:\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>n + 1 \\<le> k; p k \\<noteq> 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: frequently_def eventually_at_top_linorder)"], ["proof (state)\nthis:\n  n + 1 \\<le> k\n  p k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "define k' where \"k' = k - n - 1\""], ["proof (state)\nthis:\n  k' = k - n - 1\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "from assms k"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n  n + 1 \\<le> k\n  p k \\<noteq> 0", "have \"p k \\<ge> 0\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n  n + 1 \\<le> k\n  p k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. 0 \\<le> p k", "by force"], ["proof (state)\nthis:\n  0 \\<le> p k\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "with k assms"], ["proof (chain)\npicking this:\n  n + 1 \\<le> k\n  p k \\<noteq> 0\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n  0 \\<le> p k", "have k': \"p (k' + n + 1) > 0\""], ["proof (prove)\nusing this:\n  n + 1 \\<le> k\n  p k \\<noteq> 0\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n  0 \\<le> p k\n\ngoal (1 subgoal):\n 1. 0 < p (k' + n + 1)", "unfolding k'_def"], ["proof (prove)\nusing this:\n  n + 1 \\<le> k\n  p k \\<noteq> 0\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F n in sequentially. p n \\<noteq> 0\n  b \\<equiv> \\<lambda>n. q ^ fact (Suc n)\n  a \\<equiv>\n  \\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k))\n  0 \\<le> p k\n\ngoal (1 subgoal):\n 1. 0 < p (k - n - 1 + n + 1)", "by force"], ["proof (state)\nthis:\n  0 < p (k' + n + 1)\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "with assms(1,2)"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  0 < p (k' + n + 1)", "have \"?S > 0\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  0 < p (k' + n + 1)\n\ngoal (1 subgoal):\n 1. 0 < (\\<Sum>k.\n            real_of_int (p (k + n + 1)) /\n            real_of_int q ^ fact (Suc (k + n + 1)))", "by (intro suminf_pos2[of _ k'] summable_ignore_initial_segment summable) \n       (force intro!: divide_pos_pos divide_nonneg_pos)+"], ["proof (state)\nthis:\n  0 < (\\<Sum>k.\n          real_of_int (p (k + n + 1)) /\n          real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       0 < \\<bar>standard_liouville p q -\n                 real_of_int (a n) / real_of_int (b n)\\<bar>", "with eq"], ["proof (chain)\npicking this:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n  0 < (\\<Sum>k.\n          real_of_int (p (k + n + 1)) /\n          real_of_int q ^ fact (Suc (k + n + 1)))", "show \"\\<bar>standard_liouville p q - a n / b n\\<bar> > 0\""], ["proof (prove)\nusing this:\n  \\<bar>standard_liouville p q -\n        real_of_int (a n) / real_of_int (b n)\\<bar> =\n  (\\<Sum>k.\n      real_of_int (p (k + n + 1)) / real_of_int q ^ fact (Suc (k + n + 1)))\n  0 < (\\<Sum>k.\n          real_of_int (p (k + n + 1)) /\n          real_of_int q ^ fact (Suc (k + n + 1)))\n\ngoal (1 subgoal):\n 1. 0 < \\<bar>standard_liouville p q -\n              real_of_int (a n) / real_of_int (b n)\\<bar>", "by (simp only: )"], ["proof (state)\nthis:\n  0 < \\<bar>standard_liouville p q -\n            real_of_int (a n) / real_of_int (b n)\\<bar>\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  We can now show our main result: any standard Liouville number is transcendental.\n\\<close>"], ["", "theorem transcendental_standard_liouville:\n  assumes \"q > 1\" \"range p \\<subseteq> {0..<q}\" \"frequently (\\<lambda>k. p k \\<noteq> 0) sequentially\"\n  shows   \"\\<not>algebraic (standard_liouville p q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> algebraic (standard_liouville p q)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> algebraic (standard_liouville p q)", "from assms"], ["proof (chain)\npicking this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F k in sequentially. p k \\<noteq> 0", "interpret \n    liouville \"standard_liouville p q\" \n              \"\\<lambda>n. (\\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k)))\" \n              \"\\<lambda>n. q ^ fact (Suc n)\""], ["proof (prove)\nusing this:\n  1 < q\n  range p \\<subseteq> {0..<q}\n  \\<exists>\\<^sub>F k in sequentially. p k \\<noteq> 0\n\ngoal (1 subgoal):\n 1. liouville (standard_liouville p q)\n     (\\<lambda>n. \\<Sum>k\\<le>n. p k * q ^ (fact (Suc n) - fact (Suc k)))\n     (\\<lambda>n. q ^ fact (Suc n))", "by (rule standard_liouville_is_liouville)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> algebraic (standard_liouville p q)", "from transcendental"], ["proof (chain)\npicking this:\n  \\<not> algebraic (standard_liouville p q)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<not> algebraic (standard_liouville p q)\n\ngoal (1 subgoal):\n 1. \\<not> algebraic (standard_liouville p q)", "."], ["proof (state)\nthis:\n  \\<not> algebraic (standard_liouville p q)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  In particular: The the standard construction for constant sequences, such as the\n  ``classic'' Liouville constant $\\sum_{n=1}^\\infty 10^{-n!} = 0.11000100\\ldots$,\n  are transcendental. \n\n  This shows that Liouville numbers exists and therefore gives a concrete and \n  elementary proof that transcendental numbers exist.\n\\<close>"], ["", "corollary transcendental_standard_standard_liouville:\n  \"a \\<in> {0<..<b} \\<Longrightarrow> \\<not>algebraic (standard_liouville (\\<lambda>_. int a) (int b))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<in> {0<..<b} \\<Longrightarrow>\n    \\<not> algebraic (standard_liouville (\\<lambda>_. int a) (int b))", "by (intro transcendental_standard_liouville) auto"], ["", "corollary transcendental_liouville_constant:\n  \"\\<not>algebraic (standard_liouville (\\<lambda>_. 1) 10)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> algebraic (standard_liouville (\\<lambda>_. 1) 10)", "by (intro transcendental_standard_liouville) auto"], ["", "end"]]}