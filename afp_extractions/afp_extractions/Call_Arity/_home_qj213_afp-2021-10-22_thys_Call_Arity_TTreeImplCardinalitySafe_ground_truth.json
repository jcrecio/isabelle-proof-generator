{"file_name": "/home/qj213/afp-2021-10-22/thys/Call_Arity/TTreeImplCardinalitySafe.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Call_Arity", "problem_names": ["lemma pathsCard_paths_nxt:  \"pathsCard (paths (nxt f x)) \\<sqsubseteq> record_call x\\<cdot>(pathsCard (paths f))\"", "lemma pathsCards_none: \"pathsCard (paths t) x = none \\<Longrightarrow> x \\<notin> carrier t\"", "lemma const_on_edom_disj: \"const_on f S empty \\<longleftrightarrow> edom f \\<inter> S = {}\"", "lemma carrier_Fstack: \"carrier (Fstack as S) \\<subseteq> fv S\"", "lemma carrier_FBinds: \"carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<subseteq> fv \\<Gamma>\"", "lemma cHeap_simp: \"(cHeap \\<Gamma> e)\\<cdot>a = pathsCard (paths (Theap \\<Gamma> e\\<cdot>a))\""], "translations": [["", "lemma pathsCard_paths_nxt:  \"pathsCard (paths (nxt f x)) \\<sqsubseteq> record_call x\\<cdot>(pathsCard (paths f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard (paths (nxt f x)) \\<sqsubseteq>\n    record_call x\\<cdot>(pathsCard (paths f))", "apply transfer"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f x.\n       [] \\<in> f \\<and> downset f \\<Longrightarrow>\n       pathsCard (insert [] {xs |xs. x # xs \\<in> f}) \\<sqsubseteq>\n       record_call x\\<cdot>(pathsCard f)", "apply (rule pathsCard_below)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f x p.\n       \\<lbrakk>[] \\<in> f \\<and> downset f;\n        p \\<in> insert [] {xs |xs. x # xs \\<in> f}\\<rbrakk>\n       \\<Longrightarrow> pathCard p \\<sqsubseteq>\n                         record_call x\\<cdot>(pathsCard f)", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f x p.\n       \\<lbrakk>[] \\<in> f; downset f; x # p \\<in> f\\<rbrakk>\n       \\<Longrightarrow> pathCard p \\<sqsubseteq>\n                         record_call x\\<cdot>(pathsCard f)", "apply (erule below_trans[OF _ monofun_cfun_arg[OF paths_Card_above], rotated])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f x p.\n       \\<lbrakk>downset f; x # p \\<in> f\\<rbrakk>\n       \\<Longrightarrow> pathCard p \\<sqsubseteq>\n                         record_call x\\<cdot>(pathCard [])", "back"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>f x p.\n       \\<lbrakk>[] \\<in> f; downset f\\<rbrakk>\n       \\<Longrightarrow> pathCard p \\<sqsubseteq>\n                         record_call x\\<cdot>(pathCard (x # p))", "apply (auto intro: fun_belowI simp add: record_call_simp two_pred_two_add_once)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma pathsCards_none: \"pathsCard (paths t) x = none \\<Longrightarrow> x \\<notin> carrier t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard (paths t) x = none \\<Longrightarrow> x \\<notin> carrier t", "by transfer (auto dest: pathCards_noneD)"], ["", "lemma const_on_edom_disj: \"const_on f S empty \\<longleftrightarrow> edom f \\<inter> S = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. const_on f S TTree.empty = (edom f \\<inter> S = {})", "by (auto simp add: empty_is_bottom edom_def)"], ["", "context TTreeAnalysisCarrier\nbegin"], ["", "lemma carrier_Fstack: \"carrier (Fstack as S) \\<subseteq> fv S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. carrier (Fstack as S) \\<subseteq> fv S", "by (induction S rule: Fstack.induct)\n       (auto simp add: empty_is_bottom[symmetric] carrier_Fexp dest!: subsetD[OF Aexp_edom])"], ["", "lemma carrier_FBinds: \"carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<subseteq> fv \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<subseteq> fv \\<Gamma>", "apply (simp add: Texp.AnalBinds_lookup)"], ["proof (prove)\ngoal (1 subgoal):\n 1. carrier\n     (case map_of \\<Gamma> x of None \\<Rightarrow> \\<bottom>\n      | Some e \\<Rightarrow> fup\\<cdot>(Texp e)\\<cdot>(ae x))\n    \\<subseteq> fv \\<Gamma>", "apply (auto split: option.split simp add: empty_is_bottom[symmetric] )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x2 xa u'.\n       \\<lbrakk>map_of \\<Gamma> x = Some x2; ae x = up\\<cdot>u';\n        xa \\<in> carrier (Texp x2\\<cdot>u')\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> fv \\<Gamma>", "apply (case_tac \"ae x\")"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x2 xa u'.\n       \\<lbrakk>map_of \\<Gamma> x = Some x2; ae x = up\\<cdot>u';\n        xa \\<in> carrier (Texp x2\\<cdot>u'); ae x = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> fv \\<Gamma>\n 2. \\<And>x2 xa u' xaa.\n       \\<lbrakk>map_of \\<Gamma> x = Some x2; ae x = up\\<cdot>u';\n        xa \\<in> carrier (Texp x2\\<cdot>u'); ae x = up\\<cdot>xaa\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> fv \\<Gamma>", "apply (auto simp add: empty_is_bottom[symmetric] carrier_Fexp dest!: subsetD[OF Aexp_edom])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x2 xa u'.\n       \\<lbrakk>map_of \\<Gamma> x = Some x2; ae x = up\\<cdot>u';\n        xa \\<in> fv x2\\<rbrakk>\n       \\<Longrightarrow> xa \\<in> fv \\<Gamma>", "by (metis (poly_guards_query) contra_subsetD domA_from_set map_of_fv_subset map_of_SomeD option.sel)"], ["", "end"], ["", "context TTreeAnalysisSafe\nbegin"], ["", "sublocale CardinalityPrognosisShape prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisShape prognosis", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> ae ae' as u e S.\n       ae f|` domA \\<Gamma> = ae' f|` domA \\<Gamma> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae' as u (\\<Gamma>, e, S)\n 2. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 3. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 4. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 5. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 6. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix \\<Gamma> :: heap and ae ae' :: AEnv and u e S as"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> ae ae' as u e S.\n       ae f|` domA \\<Gamma> = ae' f|` domA \\<Gamma> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae' as u (\\<Gamma>, e, S)\n 2. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 3. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 4. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 5. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 6. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "assume \"ae f|` domA \\<Gamma> = ae' f|` domA \\<Gamma>\""], ["proof (state)\nthis:\n  ae f|` domA \\<Gamma> = ae' f|` domA \\<Gamma>\n\ngoal (6 subgoals):\n 1. \\<And>\\<Gamma> ae ae' as u e S.\n       ae f|` domA \\<Gamma> = ae' f|` domA \\<Gamma> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae' as u (\\<Gamma>, e, S)\n 2. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 3. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 4. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 5. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 6. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "from Texp.AnalBinds_cong[OF this]"], ["proof (chain)\npicking this:\n  FBinds \\<Gamma>\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae'", "show \"prognosis ae as u (\\<Gamma>, e, S) = prognosis ae' as u (\\<Gamma>, e, S)\""], ["proof (prove)\nusing this:\n  FBinds \\<Gamma>\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae'\n\ngoal (1 subgoal):\n 1. prognosis ae as u (\\<Gamma>, e, S) = prognosis ae' as u (\\<Gamma>, e, S)", "by simp"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) = prognosis ae' as u (\\<Gamma>, e, S)\n\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 3. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 4. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 5. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 3. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 4. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 5. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix ae as a \\<Gamma> e S"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as a \\<Gamma> e S.\n       const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n 3. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 4. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 5. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "show \"const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\""], ["proof (prove)\ngoal (1 subgoal):\n 1. const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "assume \"x \\<in> ap S\""], ["proof (state)\nthis:\n  x \\<in> ap S\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "hence \"[x,x] \\<in> paths (Fstack as S)\""], ["proof (prove)\nusing this:\n  x \\<in> ap S\n\ngoal (1 subgoal):\n 1. [x, x] \\<in> paths (Fstack as S)", "by (induction S rule: Fstack.induct)\n           (auto 4 4 intro: subsetD[OF both_contains_arg1] subsetD[OF both_contains_arg2] paths_Cons_nxt)"], ["proof (state)\nthis:\n  [x, x] \\<in> paths (Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "hence \"[x,x] \\<in> paths (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\nusing this:\n  [x, x] \\<in> paths (Fstack as S)\n\ngoal (1 subgoal):\n 1. [x, x] \\<in> paths (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)", "by (rule subsetD[OF both_contains_arg2])"], ["proof (state)\nthis:\n  [x, x] \\<in> paths (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "hence \"[x,x] \\<in> paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))\""], ["proof (prove)\nusing this:\n  [x, x] \\<in> paths (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. [x, x]\n    \\<in> paths\n           (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n             (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))", "by (rule subsetD[OF substitute_contains_arg])"], ["proof (state)\nthis:\n  [x, x]\n  \\<in> paths\n         (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n           (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "hence \"pathCard [x,x] x \\<sqsubseteq> pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) x\""], ["proof (prove)\nusing this:\n  [x, x]\n  \\<in> paths\n         (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n           (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))\n\ngoal (1 subgoal):\n 1. pathCard [x, x] x \\<sqsubseteq>\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n     x", "by (metis fun_belowD paths_Card_above)"], ["proof (state)\nthis:\n  pathCard [x, x] x \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n   x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "also"], ["proof (state)\nthis:\n  pathCard [x, x] x \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n   x\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "have \"pathCard [x,x] x = many\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathCard [x, x] x = many", "by (auto simp add: pathCard_def)"], ["proof (state)\nthis:\n  pathCard [x, x] x = many\n\ngoal (1 subgoal):\n 1. \\<And>y.\n       y \\<in> ap S \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) y = many", "finally"], ["proof (chain)\npicking this:\n  many \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n   x", "show \"prognosis ae as a (\\<Gamma>, e, S) x = many\""], ["proof (prove)\nusing this:\n  many \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n   x\n\ngoal (1 subgoal):\n 1. prognosis ae as a (\\<Gamma>, e, S) x = many", "by (auto intro: below_antisym)"], ["proof (state)\nthis:\n  prognosis ae as a (\\<Gamma>, e, S) x = many\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  const_on (prognosis ae as a (\\<Gamma>, e, S)) (ap S) many\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 3. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 4. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 3. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 4. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix \\<Gamma> \\<Delta> :: heap and e :: exp and ae :: AEnv and as u S"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 3. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 4. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "assume \"map_of \\<Gamma> = map_of \\<Delta>\""], ["proof (state)\nthis:\n  map_of \\<Gamma> = map_of \\<Delta>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 3. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 4. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "hence \"FBinds \\<Gamma> = FBinds \\<Delta>\" and \"thunks \\<Gamma> = thunks \\<Delta>\""], ["proof (prove)\nusing this:\n  map_of \\<Gamma> = map_of \\<Delta>\n\ngoal (1 subgoal):\n 1. FBinds \\<Gamma> = FBinds \\<Delta> &&& thunks \\<Gamma> = thunks \\<Delta>", "by (auto intro!: cfun_eqI  thunks_cong simp add: Texp.AnalBinds_lookup)"], ["proof (state)\nthis:\n  FBinds \\<Gamma> = FBinds \\<Delta>\n  thunks \\<Gamma> = thunks \\<Delta>\n\ngoal (4 subgoals):\n 1. \\<And>\\<Gamma> \\<Delta> ae as u e S.\n       map_of \\<Gamma> = map_of \\<Delta> \\<Longrightarrow>\n       prognosis ae as u (\\<Gamma>, e, S) =\n       prognosis ae as u (\\<Delta>, e, S)\n 2. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 3. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 4. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "thus \"prognosis ae as u (\\<Gamma>, e, S) = prognosis ae as u (\\<Delta>, e, S)\""], ["proof (prove)\nusing this:\n  FBinds \\<Gamma> = FBinds \\<Delta>\n  thunks \\<Gamma> = thunks \\<Delta>\n\ngoal (1 subgoal):\n 1. prognosis ae as u (\\<Gamma>, e, S) = prognosis ae as u (\\<Delta>, e, S)", "by simp"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) = prognosis ae as u (\\<Delta>, e, S)\n\ngoal (3 subgoals):\n 1. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 2. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 3. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 2. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 3. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix \\<Gamma> :: heap and e :: exp and ae :: AEnv and as u S x"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>ae as u \\<Gamma> e S x.\n       prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as u (\\<Gamma>, e, Upd x # S)\n 2. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 3. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "show \"prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq> prognosis ae as u (\\<Gamma>, e, Upd x # S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n    prognosis ae as u (\\<Gamma>, e, Upd x # S)", "by simp"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n  prognosis ae as u (\\<Gamma>, e, Upd x # S)\n\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix \\<Gamma> :: heap and e :: exp and ae :: AEnv and as a S x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "assume \"ae x = \\<bottom>\""], ["proof (state)\nthis:\n  ae x = \\<bottom>\n\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "hence \"FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\""], ["proof (prove)\nusing this:\n  ae x = \\<bottom>\n\ngoal (1 subgoal):\n 1. FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae", "by (rule Texp.AnalBinds_delete_bot)"], ["proof (state)\nthis:\n  FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\n\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "moreover"], ["proof (state)\nthis:\n  FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\n\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "hence \"((FBinds \\<Gamma>\\<cdot>ae) x) = \\<bottom>\""], ["proof (prove)\nusing this:\n  FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\n\ngoal (1 subgoal):\n 1. (FBinds \\<Gamma>\\<cdot>ae) x = \\<bottom>", "by (metis Texp.AnalBinds_delete_lookup)"], ["proof (state)\nthis:\n  (FBinds \\<Gamma>\\<cdot>ae) x = \\<bottom>\n\ngoal (2 subgoals):\n 1. \\<And>ae x as a \\<Gamma> e S.\n       ae x = \\<bottom> \\<Longrightarrow>\n       prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n       prognosis ae as a (delete x \\<Gamma>, e, S)\n 2. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "ultimately"], ["proof (chain)\npicking this:\n  FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\n  (FBinds \\<Gamma>\\<cdot>ae) x = \\<bottom>", "show \"prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq> prognosis ae as a (delete x \\<Gamma>, e, S)\""], ["proof (prove)\nusing this:\n  FBinds (delete x \\<Gamma>)\\<cdot>ae = FBinds \\<Gamma>\\<cdot>ae\n  (FBinds \\<Gamma>\\<cdot>ae) x = \\<bottom>\n\ngoal (1 subgoal):\n 1. prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n    prognosis ae as a (delete x \\<Gamma>, e, S)", "by (simp add: substitute_T_delete empty_is_bottom)"], ["proof (state)\nthis:\n  prognosis ae as a (\\<Gamma>, e, S) \\<sqsubseteq>\n  prognosis ae as a (delete x \\<Gamma>, e, S)\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "fix ae as a \\<Gamma> x S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"once \\<sqsubseteq> (pathCard [x]) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. once \\<sqsubseteq> pathCard [x] x", "by (simp add: two_add_simp)"], ["proof (state)\nthis:\n  once \\<sqsubseteq> pathCard [x] x\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  once \\<sqsubseteq> pathCard [x] x\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"pathCard [x] \\<sqsubseteq> pathsCard ({[],[x]})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathCard [x] \\<sqsubseteq> pathsCard {[], [x]}", "by (rule paths_Card_above) simp"], ["proof (state)\nthis:\n  pathCard [x] \\<sqsubseteq> pathsCard {[], [x]}\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  pathCard [x] \\<sqsubseteq> pathsCard {[], [x]}\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"\\<dots> = pathsCard (paths (single x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard {[], [x]} = pathsCard (paths (single x))", "by simp"], ["proof (state)\nthis:\n  pathsCard {[], [x]} = pathsCard (paths (single x))\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  pathsCard {[], [x]} = pathsCard (paths (single x))\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"single x \\<sqsubseteq> (Texp (Var x)\\<cdot>a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. single x \\<sqsubseteq> Texp (Var x)\\<cdot>a", "by (rule Texp_Var)"], ["proof (state)\nthis:\n  single x \\<sqsubseteq> Texp (Var x)\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  single x \\<sqsubseteq> Texp (Var x)\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"\\<dots> \\<sqsubseteq> Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp (Var x)\\<cdot>a \\<sqsubseteq>\n    Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S", "by (rule both_above_arg1)"], ["proof (state)\nthis:\n  Texp (Var x)\\<cdot>a \\<sqsubseteq>\n  Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  Texp (Var x)\\<cdot>a \\<sqsubseteq>\n  Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"\\<dots> \\<sqsubseteq> substitute  (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S \\<sqsubseteq>\n    substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n     (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)", "by (rule substitute_above_arg)"], ["proof (state)\nthis:\n  Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "also"], ["proof (state)\nthis:\n  Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "have \"pathsCard (paths \\<dots>) x = prognosis ae as a (\\<Gamma>, Var x, S) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n     x =\n    prognosis ae as a (\\<Gamma>, Var x, S) x", "by simp"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n   x =\n  prognosis ae as a (\\<Gamma>, Var x, S) x\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> x S.\n       once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont (\\<lambda>a. a x); cont (\\<lambda>a. pathsCard (paths a) x);\n   cont (\\<lambda>a. pathsCard (paths a) x);\n   cont (\\<lambda>a. pathsCard (paths a) x)\\<rbrakk>\n  \\<Longrightarrow> once \\<sqsubseteq>\n                    prognosis ae as a (\\<Gamma>, Var x, S) x", "show \"once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont (\\<lambda>a. a x); cont (\\<lambda>a. pathsCard (paths a) x);\n   cont (\\<lambda>a. pathsCard (paths a) x);\n   cont (\\<lambda>a. pathsCard (paths a) x)\\<rbrakk>\n  \\<Longrightarrow> once \\<sqsubseteq>\n                    prognosis ae as a (\\<Gamma>, Var x, S) x\n\ngoal (1 subgoal):\n 1. once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x", "by this (rule cont2cont_fun, intro cont2cont)+"], ["proof (state)\nthis:\n  once \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Var x, S) x\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisApp prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisApp prognosis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e x S.\n       prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, App e x, S)", "fix ae as a \\<Gamma> e x S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e x S.\n       prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, App e x, S)", "have \"Texp e\\<cdot>(inc\\<cdot>a)  \\<otimes>\\<otimes> many_calls x \\<otimes>\\<otimes> Fstack as S = many_calls x  \\<otimes>\\<otimes> (Texp e)\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes> Fstack as S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n    many_calls x \\<otimes>\\<otimes>\n    Fstack as S =\n    many_calls x \\<otimes>\\<otimes>\n    Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S", "by (metis both_assoc both_comm)"], ["proof (state)\nthis:\n  Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n  many_calls x \\<otimes>\\<otimes>\n  Fstack as S =\n  many_calls x \\<otimes>\\<otimes>\n  Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e x S.\n       prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, App e x, S)", "thus \"prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq> prognosis ae as a (\\<Gamma>, App e x, S)\""], ["proof (prove)\nusing this:\n  Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n  many_calls x \\<otimes>\\<otimes>\n  Fstack as S =\n  many_calls x \\<otimes>\\<otimes>\n  Texp e\\<cdot>(inc\\<cdot>a) \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq>\n    prognosis ae as a (\\<Gamma>, App e x, S)", "by simp (intro pathsCard_mono' paths_mono substitute_mono2' both_mono1' Texp_App)"], ["proof (state)\nthis:\n  prognosis ae as (inc\\<cdot>a) (\\<Gamma>, e, Arg x # S) \\<sqsubseteq>\n  prognosis ae as a (\\<Gamma>, App e x, S)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisLam prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisLam prognosis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e y x S.\n       prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "fix ae as a \\<Gamma> e y x S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e y x S.\n       prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "have \"Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq> many_calls x  \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq>\n    many_calls x \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a", "by (rule below_trans[OF Texp_subst both_mono2'[OF Texp_Lam]])"], ["proof (state)\nthis:\n  Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq>\n  many_calls x \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e y x S.\n       prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "moreover"], ["proof (state)\nthis:\n  Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq>\n  many_calls x \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e y x S.\n       prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "have \"Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes> many_calls x \\<otimes>\\<otimes> Fstack as S = many_calls x  \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes> Fstack as S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n    many_calls x \\<otimes>\\<otimes>\n    Fstack as S =\n    many_calls x \\<otimes>\\<otimes>\n    Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n    Fstack as S", "by (metis both_assoc both_comm)"], ["proof (state)\nthis:\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  many_calls x \\<otimes>\\<otimes>\n  Fstack as S =\n  many_calls x \\<otimes>\\<otimes>\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e y x S.\n       prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "ultimately"], ["proof (chain)\npicking this:\n  Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq>\n  many_calls x \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  many_calls x \\<otimes>\\<otimes>\n  Fstack as S =\n  many_calls x \\<otimes>\\<otimes>\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  Fstack as S", "show \"prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq> prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)\""], ["proof (prove)\nusing this:\n  Texp e[y::=x]\\<cdot>(pred\\<cdot>a) \\<sqsubseteq>\n  many_calls x \\<otimes>\\<otimes> Texp (Lam [y]. e)\\<cdot>a\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  many_calls x \\<otimes>\\<otimes>\n  Fstack as S =\n  many_calls x \\<otimes>\\<otimes>\n  Texp (Lam [y]. e)\\<cdot>a \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n    prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)", "by simp (intro pathsCard_mono' paths_mono substitute_mono2' both_mono1')"], ["proof (state)\nthis:\n  prognosis ae as (pred\\<cdot>a) (\\<Gamma>, e[y::=x], S) \\<sqsubseteq>\n  prognosis ae as a (\\<Gamma>, Lam [y]. e, Arg x # S)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisVar prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisVar prognosis", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "fix \\<Gamma> :: heap and e :: exp and x :: var and ae :: AEnv and as u a S"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"map_of \\<Gamma> x = Some e\""], ["proof (state)\nthis:\n  map_of \\<Gamma> x = Some e\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"ae x = up\\<cdot>u\""], ["proof (state)\nthis:\n  ae x = up\\<cdot>u\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"isVal e\""], ["proof (state)\nthis:\n  isVal e\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence \"x \\<notin> thunks \\<Gamma>\""], ["proof (prove)\nusing this:\n  isVal e\n\ngoal (1 subgoal):\n 1. x \\<notin> thunks \\<Gamma>", "using \\<open>map_of \\<Gamma> x = Some e\\<close>"], ["proof (prove)\nusing this:\n  isVal e\n  map_of \\<Gamma> x = Some e\n\ngoal (1 subgoal):\n 1. x \\<notin> thunks \\<Gamma>", "by (metis thunksE)"], ["proof (state)\nthis:\n  x \\<notin> thunks \\<Gamma>\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence [simp]: \"f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x = FBinds \\<Gamma>\\<cdot>ae\""], ["proof (prove)\nusing this:\n  x \\<notin> thunks \\<Gamma>\n\ngoal (1 subgoal):\n 1. f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x =\n    FBinds \\<Gamma>\\<cdot>ae", "by (auto simp add: f_nxt_def)"], ["proof (state)\nthis:\n  f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x =\n  FBinds \\<Gamma>\\<cdot>ae\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"prognosis ae as u (\\<Gamma>, e, S) = pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prognosis ae as u (\\<Gamma>, e, S) =\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))", "by simp"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (nxt (single x) x \\<otimes>\\<otimes> Texp e\\<cdot>u  \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u \\<otimes>\\<otimes>\n          Fstack as S)))", "by simp"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) ((nxt (single x) x \\<otimes>\\<otimes> Fstack as S) \\<otimes>\\<otimes> Texp e\\<cdot>u )))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u \\<otimes>\\<otimes>\n          Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n          Texp e\\<cdot>u)))", "by (metis both_assoc both_comm)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes> Texp e\\<cdot>u)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) \\<sqsubseteq>\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u)))", "by (intro pathsCard_mono' paths_mono substitute_mono2' both_mono1'  nxt_both_left) simp"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (single x \\<otimes>\\<otimes> Fstack as S)) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) =\n    pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x))", "using \\<open>map_of \\<Gamma> x = Some e\\<close> \\<open>ae x = up\\<cdot>u\\<close>"], ["proof (prove)\nusing this:\n  map_of \\<Gamma> x = Some e\n  ae x = up\\<cdot>u\n\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) =\n    pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x))", "by (simp add: Texp.AnalBinds_lookup)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) =\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) =\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> record_call x \\<cdot>(pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (single x \\<otimes>\\<otimes> Fstack as S))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x)) \\<sqsubseteq>\n    record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (single x \\<otimes>\\<otimes> Fstack as S))))", "by (rule pathsCard_paths_nxt)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x)) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x)) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> record_call x \\<cdot>(pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) ((Texp (Var x)\\<cdot>a) \\<otimes>\\<otimes> Fstack as S))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n    record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))", "by (intro monofun_cfun_arg pathsCard_mono' paths_mono substitute_mono2' both_mono1' Texp_Var)"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = record_call x \\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))) =\n    record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))", "by simp"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))) =\n  record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (3 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 3. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                    record_call x\\<cdot>\n                    (prognosis ae as a (\\<Gamma>, Var x, S))", "show \"prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq> record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n                    record_call x\\<cdot>\n                    (prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (1 subgoal):\n 1. prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n    record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))", "by this simp_all"], ["proof (state)\nthis:\n  prognosis ae as u (\\<Gamma>, e, S) \\<sqsubseteq>\n  record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "fix \\<Gamma> :: heap and e :: exp and x :: var and ae :: AEnv and as u a S"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"map_of \\<Gamma> x = Some e\""], ["proof (state)\nthis:\n  map_of \\<Gamma> x = Some e\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"ae x = up\\<cdot>u\""], ["proof (state)\nthis:\n  ae x = up\\<cdot>u\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"\\<not> isVal e\""], ["proof (state)\nthis:\n  \\<not> isVal e\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence \"x \\<in> thunks \\<Gamma>\""], ["proof (prove)\nusing this:\n  \\<not> isVal e\n\ngoal (1 subgoal):\n 1. x \\<in> thunks \\<Gamma>", "using \\<open>map_of \\<Gamma> x = Some e\\<close>"], ["proof (prove)\nusing this:\n  \\<not> isVal e\n  map_of \\<Gamma> x = Some e\n\ngoal (1 subgoal):\n 1. x \\<in> thunks \\<Gamma>", "by (metis thunksI)"], ["proof (state)\nthis:\n  x \\<in> thunks \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence [simp]: \"f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x = FBinds (delete x \\<Gamma>)\\<cdot>ae\""], ["proof (prove)\nusing this:\n  x \\<in> thunks \\<Gamma>\n\ngoal (1 subgoal):\n 1. f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x =\n    FBinds (delete x \\<Gamma>)\\<cdot>ae", "by (auto simp add: f_nxt_def Texp.AnalBinds_delete_to_fun_upd empty_is_bottom)"], ["proof (state)\nthis:\n  f_nxt (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) x =\n  FBinds (delete x \\<Gamma>)\\<cdot>ae\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) = pathsCard (paths (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks (delete x \\<Gamma>)) (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) =\n    pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n         (thunks (delete x \\<Gamma>))\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))", "by simp"], ["proof (state)\nthis:\n  prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n       (thunks (delete x \\<Gamma>))\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n       (thunks (delete x \\<Gamma>))\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>) (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n         (thunks (delete x \\<Gamma>))\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))", "by (rule arg_cong[OF substitute_cong_T]) (auto simp add: empty_is_bottom)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n       (thunks (delete x \\<Gamma>))\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae)\n       (thunks (delete x \\<Gamma>))\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>) (nxt (single x) x \\<otimes>\\<otimes> Texp e\\<cdot>u  \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u \\<otimes>\\<otimes>\n          Fstack as S)))", "by simp"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>u \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>) ((nxt (single x) x \\<otimes>\\<otimes> Fstack as S) \\<otimes>\\<otimes> Texp e\\<cdot>u )))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u \\<otimes>\\<otimes>\n          Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n          Texp e\\<cdot>u)))", "by (metis both_assoc both_comm)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u \\<otimes>\\<otimes>\n        Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> pathsCard (paths (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>) (nxt (single x \\<otimes>\\<otimes> Fstack as S) x  \\<otimes>\\<otimes> Texp e\\<cdot>u)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) \\<sqsubseteq>\n    pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u)))", "by (intro pathsCard_mono' paths_mono substitute_mono2' both_mono1'  nxt_both_left) simp"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x) x \\<otimes>\\<otimes> Fstack as S \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u)))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = pathsCard (paths (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (single x \\<otimes>\\<otimes> Fstack as S)) x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) =\n    pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x))", "using \\<open>map_of \\<Gamma> x = Some e\\<close> \\<open>ae x = up\\<cdot>u\\<close>"], ["proof (prove)\nusing this:\n  map_of \\<Gamma> x = Some e\n  ae x = up\\<cdot>u\n\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n         (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n          Texp e\\<cdot>u))) =\n    pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x))", "by (simp add: Texp.AnalBinds_lookup)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) =\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds (delete x \\<Gamma>)\\<cdot>ae) (thunks \\<Gamma>)\n       (nxt (single x \\<otimes>\\<otimes> Fstack as S) x \\<otimes>\\<otimes>\n        Texp e\\<cdot>u))) =\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> record_call x \\<cdot>(pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (single x \\<otimes>\\<otimes> Fstack as S))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n              (single x \\<otimes>\\<otimes> Fstack as S))\n         x)) \\<sqsubseteq>\n    record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (single x \\<otimes>\\<otimes> Fstack as S))))", "by (rule pathsCard_paths_nxt)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x)) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (nxt (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n            (single x \\<otimes>\\<otimes> Fstack as S))\n       x)) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> \\<sqsubseteq> record_call x \\<cdot>(pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) ((Texp (Var x)\\<cdot>a) \\<otimes>\\<otimes> Fstack as S))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n    record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))", "by (intro monofun_cfun_arg pathsCard_mono' paths_mono substitute_mono2' both_mono1' Texp_Var)"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (single x \\<otimes>\\<otimes> Fstack as S)))) \\<sqsubseteq>\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = record_call x \\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. record_call x\\<cdot>\n    (pathsCard\n      (paths\n        (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n          (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))) =\n    record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))", "by simp"], ["proof (state)\nthis:\n  record_call x\\<cdot>\n  (pathsCard\n    (paths\n      (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n        (Texp (Var x)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))) =\n  record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (2 subgoals):\n 1. \\<And>\\<Gamma> x e ae u as S a.\n       \\<lbrakk>map_of \\<Gamma> x = Some e; ae x = up\\<cdot>u;\n        \\<not> isVal e\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as u\n                          (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                         record_call x\\<cdot>\n                         (prognosis ae as a (\\<Gamma>, Var x, S))\n 2. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> prognosis ae as u\n                     (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                    record_call x\\<cdot>\n                    (prognosis ae as a (\\<Gamma>, Var x, S))", "show \"prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq> record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> prognosis ae as u\n                     (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n                    record_call x\\<cdot>\n                    (prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (1 subgoal):\n 1. prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n    record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))", "by this simp_all"], ["proof (state)\nthis:\n  prognosis ae as u (delete x \\<Gamma>, e, Upd x # S) \\<sqsubseteq>\n  record_call x\\<cdot>(prognosis ae as a (\\<Gamma>, Var x, S))\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "fix \\<Gamma> :: heap and e :: exp and ae :: AEnv and  x :: var and as S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume \"isVal e\""], ["proof (state)\nthis:\n  isVal e\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence \"repeatable (Texp e\\<cdot>0)\""], ["proof (prove)\nusing this:\n  isVal e\n\ngoal (1 subgoal):\n 1. repeatable (Texp e\\<cdot>0)", "by (rule Fun_repeatable)"], ["proof (state)\nthis:\n  repeatable (Texp e\\<cdot>0)\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "assume [simp]: \"x \\<notin> domA \\<Gamma>\""], ["proof (state)\nthis:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have [simp]: \"thunks ((x, e) # \\<Gamma>) = thunks \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. thunks ((x, e) # \\<Gamma>) = thunks \\<Gamma>", "using \\<open>isVal e\\<close>"], ["proof (prove)\nusing this:\n  isVal e\n\ngoal (1 subgoal):\n 1. thunks ((x, e) # \\<Gamma>) = thunks \\<Gamma>", "by (auto simp add: thunks_Cons dest: subsetD[OF thunks_domA])"], ["proof (state)\nthis:\n  thunks ((x, e) # \\<Gamma>) = thunks \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"fup\\<cdot>(Texp e)\\<cdot>(ae x) \\<sqsubseteq> Texp e\\<cdot>0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fup\\<cdot>(Texp e)\\<cdot>(ae x) \\<sqsubseteq> Texp e\\<cdot>0", "by (metis fup2 monofun_cfun_arg up_zero_top)"], ["proof (state)\nthis:\n  fup\\<cdot>(Texp e)\\<cdot>(ae x) \\<sqsubseteq> Texp e\\<cdot>0\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "hence \"substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x))) (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq> substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0)) (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\nusing this:\n  fup\\<cdot>(Texp e)\\<cdot>(ae x) \\<sqsubseteq> Texp e\\<cdot>0\n\ngoal (1 subgoal):\n 1. substitute\n     ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x)))\n     (thunks \\<Gamma>)\n     (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq>\n    substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n     (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)", "by (intro substitute_mono1' fun_upd_mono below_refl monofun_cfun_arg)"], ["proof (state)\nthis:\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x)))\n   (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq>\n  substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x)))\n   (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq>\n  substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"\\<dots> = substitute (((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))(x := empty)) (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n     (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) =\n    substitute\n     ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty))\n     (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)", "using \\<open>repeatable (Texp e\\<cdot>0)\\<close>"], ["proof (prove)\nusing this:\n  repeatable (Texp e\\<cdot>0)\n\ngoal (1 subgoal):\n 1. substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n     (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) =\n    substitute\n     ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty))\n     (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)", "by (rule substitute_remove_anyways, simp)"], ["proof (state)\nthis:\n  substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) =\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "also"], ["proof (state)\nthis:\n  substitute ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) =\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty))\n   (thunks \\<Gamma>) (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "have \"((FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0))(x := empty) = FBinds \\<Gamma>\\<cdot>ae\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty) =\n    FBinds \\<Gamma>\\<cdot>ae", "by (simp add: fun_upd_idem Texp.AnalBinds_not_there empty_is_bottom)"], ["proof (state)\nthis:\n  (FBinds \\<Gamma>\\<cdot>ae)(x := Texp e\\<cdot>0, x := TTree.empty) =\n  FBinds \\<Gamma>\\<cdot>ae\n\ngoal (1 subgoal):\n 1. \\<And>e x \\<Gamma> ae as S.\n       \\<lbrakk>isVal e; x \\<notin> domA \\<Gamma>\\<rbrakk>\n       \\<Longrightarrow> prognosis ae as 0\n                          ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n                         prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "finally"], ["proof (chain)\npicking this:\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x)))\n   (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)", "show \"prognosis ae as 0 ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq> prognosis ae as 0 (\\<Gamma>, e, Upd x # S)\""], ["proof (prove)\nusing this:\n  substitute\n   ((FBinds \\<Gamma>\\<cdot>ae)(x := fup\\<cdot>(Texp e)\\<cdot>(ae x)))\n   (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp e\\<cdot>0 \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. prognosis ae as 0 ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n    prognosis ae as 0 (\\<Gamma>, e, Upd x # S)", "by (simp, intro pathsCard_mono' paths_mono)"], ["proof (state)\nthis:\n  prognosis ae as 0 ((x, e) # \\<Gamma>, e, S) \\<sqsubseteq>\n  prognosis ae as 0 (\\<Gamma>, e, Upd x # S)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisIfThenElse prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisIfThenElse prognosis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ae a as \\<Gamma> scrut e1 e2 S.\n       prognosis ae (a # as) 0\n        (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\n 2. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "fix ae as \\<Gamma> scrut e1 e2 S a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>ae a as \\<Gamma> scrut e1 e2 S.\n       prognosis ae (a # as) 0\n        (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\n 2. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "have \"Texp scrut\\<cdot>0 \\<otimes>\\<otimes> (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<sqsubseteq> Texp (scrut ? e1 : e2)\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n    (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<sqsubseteq>\n    Texp (scrut ? e1 : e2)\\<cdot>a", "by (rule Texp_IfThenElse)"], ["proof (state)\nthis:\n  Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n  (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<sqsubseteq>\n  Texp (scrut ? e1 : e2)\\<cdot>a\n\ngoal (2 subgoals):\n 1. \\<And>ae a as \\<Gamma> scrut e1 e2 S.\n       prognosis ae (a # as) 0\n        (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\n 2. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "hence \"substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp scrut\\<cdot>0 \\<otimes>\\<otimes> (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq> substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp (scrut ? e1 : e2)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\nusing this:\n  Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n  (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<sqsubseteq>\n  Texp (scrut ? e1 : e2)\\<cdot>a\n\ngoal (1 subgoal):\n 1. substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n     (Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n      (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n      Fstack as S) \\<sqsubseteq>\n    substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n     (Texp (scrut ? e1 : e2)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)", "by (rule substitute_mono2'[OF both_mono1'])"], ["proof (state)\nthis:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n    (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (scrut ? e1 : e2)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (2 subgoals):\n 1. \\<And>ae a as \\<Gamma> scrut e1 e2 S.\n       prognosis ae (a # as) 0\n        (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n       prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\n 2. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "thus \"prognosis ae (a#as) 0 (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq> prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\""], ["proof (prove)\nusing this:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp scrut\\<cdot>0 \\<otimes>\\<otimes>\n    (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (scrut ? e1 : e2)\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n\ngoal (1 subgoal):\n 1. prognosis ae (a # as) 0 (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n    prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)", "by (simp, intro pathsCard_mono' paths_mono)"], ["proof (state)\nthis:\n  prognosis ae (a # as) 0 (\\<Gamma>, scrut, Alts e1 e2 # S) \\<sqsubseteq>\n  prognosis ae as a (\\<Gamma>, scrut ? e1 : e2, S)\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "fix ae as a \\<Gamma> b e1 e2 S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "have \"Texp (if b then e1 else e2)\\<cdot>a \\<sqsubseteq> Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Texp (if b then e1 else e2)\\<cdot>a \\<sqsubseteq>\n    Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a", "by (auto simp add: either_above_arg1 either_above_arg2)"], ["proof (state)\nthis:\n  Texp (if b then e1 else e2)\\<cdot>a \\<sqsubseteq>\n  Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "hence \"substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp (if b then e1 else e2)\\<cdot>a \\<otimes>\\<otimes> Fstack as S) \\<sqsubseteq> substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (Texp (Bool b)\\<cdot>0 \\<otimes>\\<otimes> (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes> Fstack as S)\""], ["proof (prove)\nusing this:\n  Texp (if b then e1 else e2)\\<cdot>a \\<sqsubseteq>\n  Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a\n\ngoal (1 subgoal):\n 1. substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n     (Texp (if b then e1 else e2)\\<cdot>a \\<otimes>\\<otimes>\n      Fstack as S) \\<sqsubseteq>\n    substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n     (Texp (Bool b)\\<cdot>0 \\<otimes>\\<otimes>\n      (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n      Fstack as S)", "by (rule substitute_mono2'[OF both_mono1'[OF below_trans[OF _ both_above_arg2]]])"], ["proof (state)\nthis:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (if b then e1 else e2)\\<cdot>a \\<otimes>\\<otimes>\n    Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (Bool b)\\<cdot>0 \\<otimes>\\<otimes>\n    (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S)\n\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> b e1 e2 S.\n       prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n       prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "thus \"prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq> prognosis ae (a#as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)\""], ["proof (prove)\nusing this:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (if b then e1 else e2)\\<cdot>a \\<otimes>\\<otimes>\n    Fstack as S) \\<sqsubseteq>\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n   (Texp (Bool b)\\<cdot>0 \\<otimes>\\<otimes>\n    (Texp e1\\<cdot>a \\<oplus>\\<oplus> Texp e2\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S)\n\ngoal (1 subgoal):\n 1. prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n    prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)", "by (auto intro!: pathsCard_mono' paths_mono)"], ["proof (state)\nthis:\n  prognosis ae as a (\\<Gamma>, if b then e1 else e2, S) \\<sqsubseteq>\n  prognosis ae (a # as) 0 (\\<Gamma>, Bool b, Alts e1 e2 # S)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "context TTreeAnalysisCardinalityHeap\nbegin"], ["", "definition cHeap where\n    \"cHeap \\<Gamma> e = (\\<Lambda> a. pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)))\""], ["", "lemma cHeap_simp: \"(cHeap \\<Gamma> e)\\<cdot>a = pathsCard (paths (Theap \\<Gamma> e\\<cdot>a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. cHeap \\<Gamma> e\\<cdot>a = pathsCard (paths (Theap \\<Gamma> e\\<cdot>a))", "unfolding cHeap_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Lambda> a. pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)))\\<cdot>a =\n    pathsCard (paths (Theap \\<Gamma> e\\<cdot>a))", "by (rule beta_cfun) (intro cont2cont)"], ["", "sublocale CardinalityHeap cHeap"], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["", "sublocale CardinalityHeapSafe cHeap Aheap"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityHeapSafe cHeap Aheap", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "fix x \\<Gamma> e a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "assume \"x \\<in> thunks \\<Gamma>\""], ["proof (state)\nthis:\n  x \\<in> thunks \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "moreover"], ["proof (state)\nthis:\n  x \\<in> thunks \\<Gamma>\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "assume \"many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\""], ["proof (state)\nthis:\n  many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "hence \"many \\<sqsubseteq> pathsCard (paths (Theap \\<Gamma> e \\<cdot>a)) x\""], ["proof (prove)\nusing this:\n  many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\n\ngoal (1 subgoal):\n 1. many \\<sqsubseteq> pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)) x", "unfolding cHeap_def"], ["proof (prove)\nusing this:\n  many \\<sqsubseteq>\n  ((\\<Lambda> a. pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)))\\<cdot>a) x\n\ngoal (1 subgoal):\n 1. many \\<sqsubseteq> pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)) x", "by simp"], ["proof (state)\nthis:\n  many \\<sqsubseteq> pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)) x\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "hence \"\\<exists>p\\<in> (paths (Theap \\<Gamma> e\\<cdot>a)). \\<not> (one_call_in_path x p)\""], ["proof (prove)\nusing this:\n  many \\<sqsubseteq> pathsCard (paths (Theap \\<Gamma> e\\<cdot>a)) x\n\ngoal (1 subgoal):\n 1. \\<exists>p\\<in>paths (Theap \\<Gamma> e\\<cdot>a).\n       \\<not> one_call_in_path x p", "unfolding pathsCard_def"], ["proof (prove)\nusing this:\n  many \\<sqsubseteq>\n  (if Ball (paths (Theap \\<Gamma> e\\<cdot>a)) (no_call_in_path x) then none\n   else if Ball (paths (Theap \\<Gamma> e\\<cdot>a)) (one_call_in_path x)\n        then once else many)\n\ngoal (1 subgoal):\n 1. \\<exists>p\\<in>paths (Theap \\<Gamma> e\\<cdot>a).\n       \\<not> one_call_in_path x p", "by (auto split: if_splits)"], ["proof (state)\nthis:\n  \\<exists>p\\<in>paths (Theap \\<Gamma> e\\<cdot>a).\n     \\<not> one_call_in_path x p\n\ngoal (2 subgoals):\n 1. \\<And>x \\<Gamma> e a.\n       \\<lbrakk>x \\<in> thunks \\<Gamma>;\n        many \\<sqsubseteq> (cHeap \\<Gamma> e\\<cdot>a) x\\<rbrakk>\n       \\<Longrightarrow> (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n 2. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "ultimately"], ["proof (chain)\npicking this:\n  x \\<in> thunks \\<Gamma>\n  \\<exists>p\\<in>paths (Theap \\<Gamma> e\\<cdot>a).\n     \\<not> one_call_in_path x p", "show \"(Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\""], ["proof (prove)\nusing this:\n  x \\<in> thunks \\<Gamma>\n  \\<exists>p\\<in>paths (Theap \\<Gamma> e\\<cdot>a).\n     \\<not> one_call_in_path x p\n\ngoal (1 subgoal):\n 1. (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0", "by (metis Theap_thunk)"], ["proof (state)\nthis:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>0\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "fix \\<Gamma> e a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> e a.\n       edom (cHeap \\<Delta> e\\<cdot>a) = edom (Aheap \\<Delta> e\\<cdot>a)", "show \"edom (cHeap \\<Gamma> e\\<cdot>a) = edom (Aheap \\<Gamma> e\\<cdot>a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. edom (cHeap \\<Gamma> e\\<cdot>a) = edom (Aheap \\<Gamma> e\\<cdot>a)", "by (simp add: cHeap_def Union_paths_carrier carrier_Fheap)"], ["proof (state)\nthis:\n  edom (cHeap \\<Gamma> e\\<cdot>a) = edom (Aheap \\<Gamma> e\\<cdot>a)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisEdom prognosis"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisEdom prognosis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e S.\n       edom (prognosis ae as a (\\<Gamma>, e, S))\n       \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S", "fix ae as a \\<Gamma> e S"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ae as a \\<Gamma> e S.\n       edom (prognosis ae as a (\\<Gamma>, e, S))\n       \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S", "show \"edom (prognosis ae as a (\\<Gamma>, e, S)) \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. edom (prognosis ae as a (\\<Gamma>, e, S))\n    \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S", "apply (simp add: Union_paths_carrier)"], ["proof (prove)\ngoal (1 subgoal):\n 1. carrier\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))\n    \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S", "apply (rule carrier_substitute_below)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> fv \\<Gamma> \\<union> fv e \\<union> fv S \\<Longrightarrow>\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x)\n       \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S\n 2. carrier (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)\n    \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S", "apply (auto simp add: carrier_Fexp dest: subsetD[OF Aexp_edom] subsetD[OF carrier_Fstack] subsetD[OF ap_fv_subset] subsetD[OF carrier_FBinds])"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  edom (prognosis ae as a (\\<Gamma>, e, S))\n  \\<subseteq> fv \\<Gamma> \\<union> fv e \\<union> fv S\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisLet prognosis cHeap"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisLet prognosis cHeap Aheap", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "fix \\<Delta> \\<Gamma> :: heap and e :: exp and S :: stack and  ae :: AEnv and a :: Arity and as"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "assume \"atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\""], ["proof (state)\nthis:\n  atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "assume \"atom ` domA \\<Delta> \\<sharp>* S\""], ["proof (state)\nthis:\n  atom ` domA \\<Delta> \\<sharp>* S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "assume \"edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\""], ["proof (state)\nthis:\n  edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"domA \\<Delta> \\<inter> edom ae = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. domA \\<Delta> \\<inter> edom ae = {}", "using fresh_distinct[OF \\<open>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\\<close>] fresh_distinct_fv[OF \\<open>atom ` domA \\<Delta> \\<sharp>* S\\<close>] \n            \\<open>edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<close> ups_fv_subset[of S]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> domA \\<Gamma> = {}\n  domA \\<Delta> \\<inter> fv S = {}\n  edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\n  upds S \\<subseteq> fv S\n\ngoal (1 subgoal):\n 1. domA \\<Delta> \\<inter> edom ae = {}", "by auto"], ["proof (state)\nthis:\n  domA \\<Delta> \\<inter> edom ae = {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have const_on1:  \"\\<And> x. const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (carrier ((FBinds \\<Gamma>\\<cdot>ae) x)) empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n        (carrier ((FBinds \\<Gamma>\\<cdot>ae) x)) TTree.empty", "unfolding const_on_edom_disj"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x) =\n       {}", "using fresh_distinct_fv[OF \\<open>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\\<close>]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> fv \\<Gamma> = {}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x) =\n       {}", "by (auto dest!: subsetD[OF carrier_FBinds] subsetD[OF Texp.edom_AnalBinds])"], ["proof (state)\nthis:\n  const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (carrier ((FBinds \\<Gamma>\\<cdot>ae) ?x)) TTree.empty\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have const_on2:  \"const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (carrier (Fstack as S)) empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (carrier (Fstack as S)) TTree.empty", "unfolding const_on_edom_disj"], ["proof (prove)\ngoal (1 subgoal):\n 1. edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n    carrier (Fstack as S) =\n    {}", "using fresh_distinct_fv[OF \\<open>atom ` domA \\<Delta> \\<sharp>* S\\<close>]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> fv S = {}\n\ngoal (1 subgoal):\n 1. edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n    carrier (Fstack as S) =\n    {}", "by (auto dest!: subsetD[OF carrier_FBinds] subsetD[OF carrier_Fstack] subsetD[OF Texp.edom_AnalBinds] subsetD[OF ap_fv_subset ])"], ["proof (state)\nthis:\n  const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (carrier (Fstack as S)) TTree.empty\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have  const_on3: \"const_on (FBinds \\<Gamma>\\<cdot>ae) (- (- domA \\<Delta>)) TTree.empty\"\n      and const_on4: \"const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (domA \\<Gamma>) TTree.empty\""], ["proof (prove)\ngoal (1 subgoal):\n 1. const_on (FBinds \\<Gamma>\\<cdot>ae) (- (- domA \\<Delta>))\n     TTree.empty &&&\n    const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (domA \\<Gamma>) TTree.empty", "unfolding const_on_edom_disj"], ["proof (prove)\ngoal (1 subgoal):\n 1. edom (FBinds \\<Gamma>\\<cdot>ae) \\<inter> - (- domA \\<Delta>) = {} &&&\n    edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n    domA \\<Gamma> =\n    {}", "using fresh_distinct[OF \\<open>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\\<close>]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> domA \\<Gamma> = {}\n\ngoal (1 subgoal):\n 1. edom (FBinds \\<Gamma>\\<cdot>ae) \\<inter> - (- domA \\<Delta>) = {} &&&\n    edom (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) \\<inter>\n    domA \\<Gamma> =\n    {}", "by (auto dest!:  subsetD[OF Texp.edom_AnalBinds])"], ["proof (state)\nthis:\n  const_on (FBinds \\<Gamma>\\<cdot>ae) (- (- domA \\<Delta>)) TTree.empty\n  const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (domA \\<Gamma>) TTree.empty\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have disj1: \"\\<And> x. carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<inter> domA \\<Delta> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<inter> domA \\<Delta> = {}", "using fresh_distinct_fv[OF \\<open>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\\<close>]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> fv \\<Gamma> = {}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<inter> domA \\<Delta> = {}", "by (auto dest: subsetD[OF carrier_FBinds])"], ["proof (state)\nthis:\n  carrier ((FBinds \\<Gamma>\\<cdot>ae) ?x) \\<inter> domA \\<Delta> = {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "hence disj1': \"\\<And> x. carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<subseteq> - domA \\<Delta>\""], ["proof (prove)\nusing this:\n  carrier ((FBinds \\<Gamma>\\<cdot>ae) ?x) \\<inter> domA \\<Delta> = {}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       carrier ((FBinds \\<Gamma>\\<cdot>ae) x) \\<subseteq> - domA \\<Delta>", "by auto"], ["proof (state)\nthis:\n  carrier ((FBinds \\<Gamma>\\<cdot>ae) ?x) \\<subseteq> - domA \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have disj2: \"\\<And> x. carrier (Fstack as S) \\<inter> domA \\<Delta> = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x. carrier (Fstack as S) \\<inter> domA \\<Delta> = {}", "using fresh_distinct_fv[OF \\<open>atom ` domA \\<Delta> \\<sharp>* S\\<close>]"], ["proof (prove)\nusing this:\n  domA \\<Delta> \\<inter> fv S = {}\n\ngoal (1 subgoal):\n 1. \\<And>x. carrier (Fstack as S) \\<inter> domA \\<Delta> = {}", "by (auto dest!: subsetD[OF carrier_Fstack])"], ["proof (state)\nthis:\n  carrier (Fstack as S) \\<inter> domA \\<Delta> = {}\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "hence disj2': \"carrier (Fstack as S) \\<subseteq> - domA \\<Delta>\""], ["proof (prove)\nusing this:\n  carrier (Fstack as S) \\<inter> domA \\<Delta> = {}\n\ngoal (1 subgoal):\n 1. carrier (Fstack as S) \\<subseteq> - domA \\<Delta>", "by auto"], ["proof (state)\nthis:\n  carrier (Fstack as S) \\<subseteq> - domA \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "{"], ["proof (state)\nthis:\n  carrier (Fstack as S) \\<subseteq> - domA \\<Delta>\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"(FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>(ae \\<squnion> Aheap \\<Delta> e\\<cdot>a)) x = (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes> (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "proof (cases \"x \\<in> domA \\<Delta>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n 2. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "case True"], ["proof (state)\nthis:\n  x \\<in> domA \\<Delta>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n 2. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "have \"map_of \\<Gamma> x = None\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_of \\<Gamma> x = None", "using True fresh_distinct[OF \\<open>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>\\<close>]"], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Delta>\n  domA \\<Delta> \\<inter> domA \\<Gamma> = {}\n\ngoal (1 subgoal):\n 1. map_of \\<Gamma> x = None", "by (metis disjoint_iff_not_equal domA_def map_of_eq_None_iff)"], ["proof (state)\nthis:\n  map_of \\<Gamma> x = None\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n 2. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "moreover"], ["proof (state)\nthis:\n  map_of \\<Gamma> x = None\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n 2. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "have \"ae x = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ae x = \\<bottom>", "using True \\<open>domA \\<Delta> \\<inter> edom ae = {}\\<close>"], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Delta>\n  domA \\<Delta> \\<inter> edom ae = {}\n\ngoal (1 subgoal):\n 1. ae x = \\<bottom>", "by auto"], ["proof (state)\nthis:\n  ae x = \\<bottom>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n 2. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "ultimately"], ["proof (chain)\npicking this:\n  map_of \\<Gamma> x = None\n  ae x = \\<bottom>", "show ?thesis"], ["proof (prove)\nusing this:\n  map_of \\<Gamma> x = None\n  ae x = \\<bottom>\n\ngoal (1 subgoal):\n 1. (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "using True"], ["proof (prove)\nusing this:\n  map_of \\<Gamma> x = None\n  ae x = \\<bottom>\n  x \\<in> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "by (auto simp add: Texp.AnalBinds_lookup empty_is_bottom[symmetric] cong: option.case_cong)"], ["proof (state)\nthis:\n  (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n   (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n   x =\n  (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n  (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "case False"], ["proof (state)\nthis:\n  x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "have \"map_of \\<Delta> x = None\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map_of \\<Delta> x = None", "using False"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. map_of \\<Delta> x = None", "by (metis domA_def map_of_eq_None_iff)"], ["proof (state)\nthis:\n  map_of \\<Delta> x = None\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "moreover"], ["proof (state)\nthis:\n  map_of \\<Delta> x = None\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "have \"(Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>", "using False"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>", "using edom_Aheap"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Delta>\n  edom (Aheap ?\\<Gamma> ?e\\<cdot>?a) \\<subseteq> domA ?\\<Gamma>\n\ngoal (1 subgoal):\n 1. (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>", "by (metis contra_subsetD edomIff)"], ["proof (state)\nthis:\n  (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Delta> \\<Longrightarrow>\n    (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "ultimately"], ["proof (chain)\npicking this:\n  map_of \\<Delta> x = None\n  (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>", "show ?thesis"], ["proof (prove)\nusing this:\n  map_of \\<Delta> x = None\n  (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>\n\ngoal (1 subgoal):\n 1. (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "using False"], ["proof (prove)\nusing this:\n  map_of \\<Delta> x = None\n  (Aheap \\<Delta> e\\<cdot>a) x = \\<bottom>\n  x \\<notin> domA \\<Delta>\n\ngoal (1 subgoal):\n 1. (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n     (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n     x =\n    (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n    (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x", "by (auto simp add: Texp.AnalBinds_lookup empty_is_bottom[symmetric] cong: option.case_cong)"], ["proof (state)\nthis:\n  (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n   (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n   x =\n  (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n  (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n   (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n   x =\n  (FBinds \\<Gamma>\\<cdot>ae) x \\<otimes>\\<otimes>\n  (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "}"], ["proof (state)\nthis:\n  (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n   (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n   ?x3 =\n  (FBinds \\<Gamma>\\<cdot>ae) ?x3 \\<otimes>\\<otimes>\n  (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) ?x3\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "note FBinds = ext[OF this]"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n       (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n       (?x4 x)) =\n  (\\<lambda>x.\n      (FBinds \\<Gamma>\\<cdot>ae) (?x4 x) \\<otimes>\\<otimes>\n      (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (?x4 x))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "{"], ["proof (state)\nthis:\n  (\\<lambda>x.\n      (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n       (ae \\<squnion> Aheap \\<Delta> e\\<cdot>a))\n       (?x4 x)) =\n  (\\<lambda>x.\n      (FBinds \\<Gamma>\\<cdot>ae) (?x4 x) \\<otimes>\\<otimes>\n      (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (?x4 x))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"pathsCard (paths (substitute (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>(Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)) (thunks (\\<Delta> @ \\<Gamma>)) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S)))\n      = pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>)) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))  (thunks (\\<Delta> @ \\<Gamma>))  (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute\n         (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n          (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n         (thunks (\\<Delta> @ \\<Gamma>))\n         (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) =\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>))\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks (\\<Delta> @ \\<Gamma>))\n           (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))", "by (simp add: substitute_substitute[OF const_on1] FBinds)"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>))\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks (\\<Delta> @ \\<Gamma>))\n         (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>))\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks (\\<Delta> @ \\<Gamma>))\n         (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>)) = substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>)) =\n    substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)", "apply (rule substitute_cong_T)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (x \\<in> thunks (\\<Delta> @ \\<Gamma>)) =\n       (x \\<in> thunks \\<Gamma>) \\<or>\n       (FBinds \\<Gamma>\\<cdot>ae) x = TTree.empty", "using const_on3"], ["proof (prove)\nusing this:\n  const_on (FBinds \\<Gamma>\\<cdot>ae) (- (- domA \\<Delta>)) TTree.empty\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (x \\<in> thunks (\\<Delta> @ \\<Gamma>)) =\n       (x \\<in> thunks \\<Gamma>) \\<or>\n       (FBinds \\<Gamma>\\<cdot>ae) x = TTree.empty", "by (auto dest: subsetD[OF thunks_domA])"], ["proof (state)\nthis:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>)) =\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks (\\<Delta> @ \\<Gamma>)) =\n  substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks (\\<Delta> @ \\<Gamma>)) = substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks (\\<Delta> @ \\<Gamma>)) =\n    substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>)", "apply (rule substitute_cong_T)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (x \\<in> thunks (\\<Delta> @ \\<Gamma>)) =\n       (x \\<in> thunks \\<Delta>) \\<or>\n       (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x = TTree.empty", "using const_on4"], ["proof (prove)\nusing this:\n  const_on (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (domA \\<Gamma>) TTree.empty\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       (x \\<in> thunks (\\<Delta> @ \\<Gamma>)) =\n       (x \\<in> thunks \\<Delta>) \\<or>\n       (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) x = TTree.empty", "by (auto dest: subsetD[OF thunks_domA])"], ["proof (state)\nthis:\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks (\\<Delta> @ \\<Gamma>)) =\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks (\\<Delta> @ \\<Gamma>)) =\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S) = substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes> Fstack as S\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S) =\n    substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n    Fstack as S", "by (rule substitute_only_empty_both[OF const_on2])"], ["proof (state)\nthis:\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S) =\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>) (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S) =\n  substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n   (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n  Fstack as S\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "note calculation"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "}"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "note eq_imp_below[OF this]"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute\n       (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n        (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n       (thunks (\\<Delta> @ \\<Gamma>))\n       (Texp e\\<cdot>a \\<otimes>\\<otimes> Fstack as S))) \\<sqsubseteq>\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "note env_restr_split[where S = \"domA \\<Delta>\"]"], ["proof (state)\nthis:\n  ?m = ?m f|` domA \\<Delta> \\<squnion> ?m f|` (- domA \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  ?m = ?m f|` domA \\<Delta> \\<squnion> ?m f|` (- domA \\<Delta>)\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes> Fstack as S))) f|` domA \\<Delta> \n        = pathsCard (paths (ttree_restr (domA \\<Delta>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a))))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n          Fstack as S))) f|`\n    domA \\<Delta> =\n    pathsCard\n     (paths\n       (ttree_restr (domA \\<Delta>)\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks \\<Delta>) (Texp e\\<cdot>a))))", "by (simp add: filter_paths_conv_free_restr ttree_restr_both ttree_rest_substitute[OF disj1]  ttree_restr_is_empty[OF disj2])"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S))) f|`\n  domA \\<Delta> =\n  pathsCard\n   (paths\n     (ttree_restr (domA \\<Delta>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a))))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S))) f|`\n  domA \\<Delta> =\n  pathsCard\n   (paths\n     (ttree_restr (domA \\<Delta>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a))))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"ttree_restr (domA \\<Delta>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq> Theap \\<Delta> e\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ttree_restr (domA \\<Delta>)\n     (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n       (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq>\n    Theap \\<Delta> e\\<cdot>a", "by (rule Theap_substitute)"], ["proof (state)\nthis:\n  ttree_restr (domA \\<Delta>)\n   (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq>\n  Theap \\<Delta> e\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  ttree_restr (domA \\<Delta>)\n   (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq>\n  Theap \\<Delta> e\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes> Fstack as S))) f|` (- domA \\<Delta>) =\n          pathsCard (paths (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>) (ttree_restr (- domA \\<Delta>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a)) (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<otimes>\\<otimes> Fstack as S)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n          Fstack as S))) f|`\n    (- domA \\<Delta>) =\n    pathsCard\n     (paths\n       (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n         (ttree_restr (- domA \\<Delta>)\n           (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n             (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<otimes>\\<otimes>\n          Fstack as S)))", "by (simp add: filter_paths_conv_free_restr2 ttree_rest_substitute2[OF disj1' const_on3] ttree_restr_both  ttree_restr_noop[OF disj2'])"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S))) f|`\n  (- domA \\<Delta>) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (ttree_restr (- domA \\<Delta>)\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "also"], ["proof (state)\nthis:\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n         (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n        Fstack as S))) f|`\n  (- domA \\<Delta>) =\n  pathsCard\n   (paths\n     (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n       (ttree_restr (- domA \\<Delta>)\n         (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n           (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<otimes>\\<otimes>\n        Fstack as S)))\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "have \"ttree_restr (- domA \\<Delta>) (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))  (thunks \\<Delta>)  (Texp e\\<cdot>a)) \\<sqsubseteq> Texp (Terms.Let \\<Delta> e)\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ttree_restr (- domA \\<Delta>)\n     (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n       (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq>\n    Texp (Terms.Let \\<Delta> e)\\<cdot>a", "by (rule Texp_Let)"], ["proof (state)\nthis:\n  ttree_restr (- domA \\<Delta>)\n   (substitute (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n     (thunks \\<Delta>) (Texp e\\<cdot>a)) \\<sqsubseteq>\n  Texp (Terms.Let \\<Delta> e)\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>\\<Delta> \\<Gamma> S ae e a as.\n       \\<lbrakk>atom ` domA \\<Delta> \\<sharp>* \\<Gamma>;\n        atom ` domA \\<Delta> \\<sharp>* S;\n        edom ae \\<subseteq> domA \\<Gamma> \\<union> upds S\\<rbrakk>\n       \\<Longrightarrow> prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae)\n                          as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n                         cHeap \\<Delta> e\\<cdot>a \\<squnion>\n                         prognosis ae as a\n                          (\\<Gamma>, Terms.Let \\<Delta> e, S)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont\n            (\\<lambda>b.\n                pathsCard (paths b) \\<squnion>\n                pathsCard\n                 (paths\n                   (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n                     (substitute\n                       (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n                       (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n                      Fstack as S))) f|`\n                (- domA \\<Delta>));\n   cont\n    (\\<lambda>b.\n        pathsCard (paths (Theap \\<Delta> e\\<cdot>a)) \\<squnion>\n        pathsCard\n         (paths\n           (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n             (b \\<otimes>\\<otimes> Fstack as S))))\\<rbrakk>\n  \\<Longrightarrow> pathsCard\n                     (paths\n                       (substitute\n                         (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n                          (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n                         (thunks (\\<Delta> @ \\<Gamma>))\n                         (Texp e\\<cdot>a \\<otimes>\\<otimes>\n                          Fstack as S))) \\<sqsubseteq>\n                    pathsCard (paths (Theap \\<Delta> e\\<cdot>a)) \\<squnion>\n                    pathsCard\n                     (paths\n                       (substitute (FBinds \\<Gamma>\\<cdot>ae)\n                         (thunks \\<Gamma>)\n                         (Texp (Terms.Let \\<Delta> e)\\<cdot>\n                          a \\<otimes>\\<otimes>\n                          Fstack as S)))", "show \"prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae) as a (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq> cHeap \\<Delta> e\\<cdot>a \\<squnion> prognosis ae as a (\\<Gamma>, Terms.Let \\<Delta> e, S)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>cont\n            (\\<lambda>b.\n                pathsCard (paths b) \\<squnion>\n                pathsCard\n                 (paths\n                   (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n                     (substitute\n                       (FBinds \\<Delta>\\<cdot>(Aheap \\<Delta> e\\<cdot>a))\n                       (thunks \\<Delta>) (Texp e\\<cdot>a) \\<otimes>\\<otimes>\n                      Fstack as S))) f|`\n                (- domA \\<Delta>));\n   cont\n    (\\<lambda>b.\n        pathsCard (paths (Theap \\<Delta> e\\<cdot>a)) \\<squnion>\n        pathsCard\n         (paths\n           (substitute (FBinds \\<Gamma>\\<cdot>ae) (thunks \\<Gamma>)\n             (b \\<otimes>\\<otimes> Fstack as S))))\\<rbrakk>\n  \\<Longrightarrow> pathsCard\n                     (paths\n                       (substitute\n                         (FBinds (\\<Delta> @ \\<Gamma>)\\<cdot>\n                          (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae))\n                         (thunks (\\<Delta> @ \\<Gamma>))\n                         (Texp e\\<cdot>a \\<otimes>\\<otimes>\n                          Fstack as S))) \\<sqsubseteq>\n                    pathsCard (paths (Theap \\<Delta> e\\<cdot>a)) \\<squnion>\n                    pathsCard\n                     (paths\n                       (substitute (FBinds \\<Gamma>\\<cdot>ae)\n                         (thunks \\<Gamma>)\n                         (Texp (Terms.Let \\<Delta> e)\\<cdot>\n                          a \\<otimes>\\<otimes>\n                          Fstack as S)))\n\ngoal (1 subgoal):\n 1. prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae) as a\n     (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n    cHeap \\<Delta> e\\<cdot>a \\<squnion>\n    prognosis ae as a (\\<Gamma>, Terms.Let \\<Delta> e, S)", "by (simp add: cHeap_def del: fun_meet_simp)"], ["proof (state)\nthis:\n  prognosis (Aheap \\<Delta> e\\<cdot>a \\<squnion> ae) as a\n   (\\<Delta> @ \\<Gamma>, e, S) \\<sqsubseteq>\n  cHeap \\<Delta> e\\<cdot>a \\<squnion>\n  prognosis ae as a (\\<Gamma>, Terms.Let \\<Delta> e, S)\n\ngoal:\nNo subgoals!", "qed"], ["", "sublocale CardinalityPrognosisSafe prognosis cHeap Aheap Aexp"], ["proof (prove)\ngoal (1 subgoal):\n 1. CardinalityPrognosisSafe prognosis cHeap Aheap Aexp", ".."], ["", "end"], ["", "end"]]}