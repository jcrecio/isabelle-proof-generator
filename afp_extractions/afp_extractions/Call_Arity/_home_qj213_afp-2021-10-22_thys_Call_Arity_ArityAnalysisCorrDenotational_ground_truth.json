{"file_name": "/home/qj213/afp-2021-10-22/thys/Call_Arity/ArityAnalysisCorrDenotational.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Call_Arity", "problem_names": ["lemma [simp]: \"eq 0 v v' \\<longleftrightarrow> v = v'\"", "lemma eq_inc_simp:\n  \"eq (inc\\<cdot>n) v1 v2 \\<longleftrightarrow> (\\<forall> v . eq n (v1 \\<down>Fn v) (v2 \\<down>Fn v))\"", "lemma eq_FnI:\n  \"(\\<And> v. eq (pred\\<cdot>n) (f1\\<cdot>v) (f2\\<cdot>v)) \\<Longrightarrow> eq n (Fn\\<cdot>f1) (Fn\\<cdot>f2)\"", "lemma eq_refl[simp]: \"eq a v v\"", "lemma eq_trans[trans]: \"eq a v1 v2 \\<Longrightarrow> eq a v2 v3 \\<Longrightarrow> eq a v1 v3\"", "lemma eq_Fn: \"eq a v1 v2 \\<Longrightarrow> eq (pred\\<cdot>a) (v1 \\<down>Fn v) (v2 \\<down>Fn v)\"", "lemma eq_inc_same: \"eq a v1 v2 \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2\"", "lemma eq_mono: \"a \\<sqsubseteq> a' \\<Longrightarrow> eq a' v1 v2 \\<Longrightarrow> eq a v1 v2\"", "lemma eq_join[simp]: \"eq (a \\<squnion> a') v1 v2 \\<longleftrightarrow> eq a v1 v2 \\<and> eq a' v1 v2\"", "lemma eq_adm: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda> x. eq a (f x) (g x))\"", "lemma eq\\<rho>E: \"eq\\<rho> ae \\<rho>1 \\<rho>2 \\<Longrightarrow> ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)\"", "lemma eq\\<rho>_refl[simp]: \"eq\\<rho> ae \\<rho> \\<rho>\"", "lemma eq_esing_up[simp]: \"eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2 \\<longleftrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)\"", "lemma eq\\<rho>_mono:\n  assumes \"ae \\<sqsubseteq> ae'\"\n  assumes \"eq\\<rho> ae' \\<rho>1 \\<rho>2\"\n  shows \"eq\\<rho> ae \\<rho>1 \\<rho>2\"", "lemma eq\\<rho>_adm: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda> x. eq\\<rho> a (f x) (g x))\"", "lemma up_join_eq_up[simp]: \"up\\<cdot>(n::'a::Finite_Join_cpo) \\<squnion> up\\<cdot>n' = up\\<cdot>(n \\<squnion> n')\"", "lemma eq\\<rho>_join[simp]: \"eq\\<rho> (ae \\<squnion> ae') \\<rho>1 \\<rho>2 \\<longleftrightarrow> eq\\<rho> ae \\<rho>1 \\<rho>2 \\<and> eq\\<rho> ae' \\<rho>1 \\<rho>2\"", "lemma eq\\<rho>_override[simp]:\n  \"eq\\<rho> ae (\\<rho>1 ++\\<^bsub>S\\<^esub> \\<rho>2) (\\<rho>1' ++\\<^bsub>S\\<^esub>\\<rho>2') \\<longleftrightarrow> eq\\<rho> ae (\\<rho>1 f|` (- S)) (\\<rho>1' f|` (- S)) \\<and>  eq\\<rho> ae (\\<rho>2 f|` S) (\\<rho>2' f|` S)\"", "lemma Aexp_heap_below_Aheap:\n  assumes \"(Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\"\n  assumes \"map_of \\<Gamma> x = Some e'\"\n  shows \"Aexp e'\\<cdot>a' \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\"", "lemma Aexp_body_below_Aheap:\n  shows \"Aexp e\\<cdot>a \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\"", "lemma Aexp_correct: \"eq\\<rho> (Aexp e\\<cdot>a) \\<rho>1 \\<rho>2 \\<Longrightarrow> eq a (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>) (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\"", "lemma ESem_ignores_fresh[simp]: \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(fresh_var e := v)\\<^esub> = \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\"", "lemma eq_Aeta_expand: \"eq a (\\<lbrakk> Aeta_expand a e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\"", "lemma Arity_transformation_correct: \"eq a (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\""], "translations": [["", "lemma [simp]: \"eq 0 v v' \\<longleftrightarrow> v = v'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq 0 v v' = (v = v')", "by (auto elim: eq.cases intro: eq.intros)"], ["", "lemma eq_inc_simp:\n  \"eq (inc\\<cdot>n) v1 v2 \\<longleftrightarrow> (\\<forall> v . eq n (v1 \\<down>Fn v) (v2 \\<down>Fn v))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq (inc\\<cdot>n) v1 v2 =\n    (\\<forall>v. eq n (v1 \\<down>Fn v) (v2 \\<down>Fn v))", "by (auto elim: eq.cases intro: eq.intros)"], ["", "lemma eq_FnI:\n  \"(\\<And> v. eq (pred\\<cdot>n) (f1\\<cdot>v) (f2\\<cdot>v)) \\<Longrightarrow> eq n (Fn\\<cdot>f1) (Fn\\<cdot>f2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>v. eq (pred\\<cdot>n) (f1\\<cdot>v) (f2\\<cdot>v)) \\<Longrightarrow>\n    eq n (Fn\\<cdot>f1) (Fn\\<cdot>f2)", "by (induction n rule: Arity_ind) (auto intro: eq.intros cfun_eqI)"], ["", "lemma eq_refl[simp]: \"eq a v v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a v v", "by (induction a arbitrary: v rule: Arity_ind) (auto intro!: eq.intros)"], ["", "lemma eq_trans[trans]: \"eq a v1 v2 \\<Longrightarrow> eq a v2 v3 \\<Longrightarrow> eq a v1 v3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>eq a v1 v2; eq a v2 v3\\<rbrakk> \\<Longrightarrow> eq a v1 v3", "apply (induction a arbitrary: v1 v2 v3 rule: Arity_ind)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>v1 v2 v3.\n       \\<lbrakk>eq 0 v1 v2; eq 0 v2 v3\\<rbrakk> \\<Longrightarrow> eq 0 v1 v3\n 2. \\<And>n v1 v2 v3.\n       \\<lbrakk>\\<And>v1 v2 v3.\n                   \\<lbrakk>eq n v1 v2; eq n v2 v3\\<rbrakk>\n                   \\<Longrightarrow> eq n v1 v3;\n        eq (inc\\<cdot>n) v1 v2; eq (inc\\<cdot>n) v2 v3\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v3", "apply (auto elim!: eq.cases intro!: eq.intros)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v na v1a v1b v2b.\n       \\<lbrakk>\\<And>v1 v2 v3.\n                   \\<lbrakk>eq na v1 v2; eq na v2 v3\\<rbrakk>\n                   \\<Longrightarrow> eq na v1 v3;\n        \\<forall>v. eq na (v1a \\<down>Fn v) (v1b \\<down>Fn v);\n        \\<forall>v. eq na (v1b \\<down>Fn v) (v2b \\<down>Fn v)\\<rbrakk>\n       \\<Longrightarrow> eq na (v1a \\<down>Fn v) (v2b \\<down>Fn v)", "apply blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma eq_Fn: \"eq a v1 v2 \\<Longrightarrow> eq (pred\\<cdot>a) (v1 \\<down>Fn v) (v2 \\<down>Fn v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a v1 v2 \\<Longrightarrow>\n    eq (pred\\<cdot>a) (v1 \\<down>Fn v) (v2 \\<down>Fn v)", "apply (induction a  rule: Arity_ind[case_names 0 inc])"], ["proof (prove)\ngoal (2 subgoals):\n 1. eq 0 v1 v2 \\<Longrightarrow>\n    eq (pred\\<cdot>0) (v1 \\<down>Fn v) (v2 \\<down>Fn v)\n 2. \\<And>n.\n       \\<lbrakk>eq n v1 v2 \\<Longrightarrow>\n                eq (pred\\<cdot>n) (v1 \\<down>Fn v) (v2 \\<down>Fn v);\n        eq (inc\\<cdot>n) v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (pred\\<cdot>(inc\\<cdot>n)) (v1 \\<down>Fn v)\n                          (v2 \\<down>Fn v)", "apply (auto simp add: eq_inc_simp)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma eq_inc_same: \"eq a v1 v2 \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a v1 v2 \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "by (induction a  arbitrary: v1 v2 rule: Arity_ind[case_names 0 inc])  (auto simp add: eq_inc_simp)"], ["", "lemma eq_mono: \"a \\<sqsubseteq> a' \\<Longrightarrow> eq a' v1 v2 \\<Longrightarrow> eq a v1 v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq a v1 v2", "proof (induction a  rule: Arity_ind[case_names 0 inc])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>0 \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq 0 v1 v2\n 2. \\<And>n.\n       \\<lbrakk>\\<lbrakk>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n                \\<Longrightarrow> eq n v1 v2;\n        inc\\<cdot>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v2", "case 0"], ["proof (state)\nthis:\n  0 \\<sqsubseteq> a'\n  eq a' v1 v2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>0 \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq 0 v1 v2\n 2. \\<And>n.\n       \\<lbrakk>\\<lbrakk>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n                \\<Longrightarrow> eq n v1 v2;\n        inc\\<cdot>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v2", "thus ?case"], ["proof (prove)\nusing this:\n  0 \\<sqsubseteq> a'\n  eq a' v1 v2\n\ngoal (1 subgoal):\n 1. eq 0 v1 v2", "by auto"], ["proof (state)\nthis:\n  eq 0 v1 v2\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n                \\<Longrightarrow> eq n v1 v2;\n        inc\\<cdot>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n                \\<Longrightarrow> eq n v1 v2;\n        inc\\<cdot>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v2", "case (inc a)"], ["proof (state)\nthis:\n  \\<lbrakk>a \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n  \\<Longrightarrow> eq a v1 v2\n  inc\\<cdot>a \\<sqsubseteq> a'\n  eq a' v1 v2\n\ngoal (1 subgoal):\n 1. \\<And>n.\n       \\<lbrakk>\\<lbrakk>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n                \\<Longrightarrow> eq n v1 v2;\n        inc\\<cdot>n \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n       \\<Longrightarrow> eq (inc\\<cdot>n) v1 v2", "show \"eq (inc\\<cdot>a) v1 v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq (inc\\<cdot>a) v1 v2", "proof (cases \"inc\\<cdot>a = a'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. inc\\<cdot>a = a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2\n 2. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "case True"], ["proof (state)\nthis:\n  inc\\<cdot>a = a'\n\ngoal (2 subgoals):\n 1. inc\\<cdot>a = a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2\n 2. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "with inc"], ["proof (chain)\npicking this:\n  \\<lbrakk>a \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n  \\<Longrightarrow> eq a v1 v2\n  inc\\<cdot>a \\<sqsubseteq> a'\n  eq a' v1 v2\n  inc\\<cdot>a = a'", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>a \\<sqsubseteq> a'; eq a' v1 v2\\<rbrakk>\n  \\<Longrightarrow> eq a v1 v2\n  inc\\<cdot>a \\<sqsubseteq> a'\n  eq a' v1 v2\n  inc\\<cdot>a = a'\n\ngoal (1 subgoal):\n 1. eq (inc\\<cdot>a) v1 v2", "by simp"], ["proof (state)\nthis:\n  eq (inc\\<cdot>a) v1 v2\n\ngoal (1 subgoal):\n 1. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "case False"], ["proof (state)\nthis:\n  inc\\<cdot>a \\<noteq> a'\n\ngoal (1 subgoal):\n 1. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "with \\<open>inc\\<cdot>a \\<sqsubseteq> a'\\<close>"], ["proof (chain)\npicking this:\n  inc\\<cdot>a \\<sqsubseteq> a'\n  inc\\<cdot>a \\<noteq> a'", "have \"a \\<sqsubseteq> a'\""], ["proof (prove)\nusing this:\n  inc\\<cdot>a \\<sqsubseteq> a'\n  inc\\<cdot>a \\<noteq> a'\n\ngoal (1 subgoal):\n 1. a \\<sqsubseteq> a'", "by (simp add: inc_def)(transfer, simp)"], ["proof (state)\nthis:\n  a \\<sqsubseteq> a'\n\ngoal (1 subgoal):\n 1. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "from this inc.prems(2)"], ["proof (chain)\npicking this:\n  a \\<sqsubseteq> a'\n  eq a' v1 v2", "have \"eq a v1 v2\""], ["proof (prove)\nusing this:\n  a \\<sqsubseteq> a'\n  eq a' v1 v2\n\ngoal (1 subgoal):\n 1. eq a v1 v2", "by (rule inc.IH)"], ["proof (state)\nthis:\n  eq a v1 v2\n\ngoal (1 subgoal):\n 1. inc\\<cdot>a \\<noteq> a' \\<Longrightarrow> eq (inc\\<cdot>a) v1 v2", "thus ?thesis"], ["proof (prove)\nusing this:\n  eq a v1 v2\n\ngoal (1 subgoal):\n 1. eq (inc\\<cdot>a) v1 v2", "by (rule eq_inc_same)"], ["proof (state)\nthis:\n  eq (inc\\<cdot>a) v1 v2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq (inc\\<cdot>a) v1 v2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eq_join[simp]: \"eq (a \\<squnion> a') v1 v2 \\<longleftrightarrow> eq a v1 v2 \\<and> eq a' v1 v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq (a \\<squnion> a') v1 v2 = (eq a v1 v2 \\<and> eq a' v1 v2)", "using Arity_total[of a a']"], ["proof (prove)\nusing this:\n  a \\<sqsubseteq> a' \\<or> a' \\<sqsubseteq> a\n\ngoal (1 subgoal):\n 1. eq (a \\<squnion> a') v1 v2 = (eq a v1 v2 \\<and> eq a' v1 v2)", "apply (auto elim!: eq_mono[OF join_above1] eq_mono[OF join_above2])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<lbrakk>a \\<sqsubseteq> a'; eq a v1 v2; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq (a \\<squnion> a') v1 v2\n 2. \\<lbrakk>a' \\<sqsubseteq> a; eq a v1 v2; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq (a \\<squnion> a') v1 v2", "apply (metis join_self_below(2))"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a' \\<sqsubseteq> a; eq a v1 v2; eq a' v1 v2\\<rbrakk>\n    \\<Longrightarrow> eq (a \\<squnion> a') v1 v2", "apply (metis join_self_below(1))"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma eq_adm: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda> x. eq a (f x) (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>cont f; cont g\\<rbrakk>\n    \\<Longrightarrow> adm (\\<lambda>x. eq a (f x) (g x))", "proof (induction a arbitrary: f g rule: Arity_ind[case_names 0 inc])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq 0 (f x) (g x))\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>cont f; cont g\\<rbrakk>\n                   \\<Longrightarrow> adm (\\<lambda>x. eq n (f x) (g x));\n        cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq (inc\\<cdot>n) (f x) (g x))", "case 0"], ["proof (state)\nthis:\n  cont f\n  cont g\n\ngoal (2 subgoals):\n 1. \\<And>f g.\n       \\<lbrakk>cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq 0 (f x) (g x))\n 2. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>cont f; cont g\\<rbrakk>\n                   \\<Longrightarrow> adm (\\<lambda>x. eq n (f x) (g x));\n        cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq (inc\\<cdot>n) (f x) (g x))", "thus ?case"], ["proof (prove)\nusing this:\n  cont f\n  cont g\n\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. eq 0 (f x) (g x))", "by simp"], ["proof (state)\nthis:\n  adm (\\<lambda>x. eq 0 (f x) (g x))\n\ngoal (1 subgoal):\n 1. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>cont f; cont g\\<rbrakk>\n                   \\<Longrightarrow> adm (\\<lambda>x. eq n (f x) (g x));\n        cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq (inc\\<cdot>n) (f x) (g x))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>cont f; cont g\\<rbrakk>\n                   \\<Longrightarrow> adm (\\<lambda>x. eq n (f x) (g x));\n        cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq (inc\\<cdot>n) (f x) (g x))", "case inc"], ["proof (state)\nthis:\n  \\<lbrakk>cont ?f; cont ?g\\<rbrakk>\n  \\<Longrightarrow> adm (\\<lambda>x. eq n_ (?f x) (?g x))\n  cont f\n  cont g\n\ngoal (1 subgoal):\n 1. \\<And>n f g.\n       \\<lbrakk>\\<And>f g.\n                   \\<lbrakk>cont f; cont g\\<rbrakk>\n                   \\<Longrightarrow> adm (\\<lambda>x. eq n (f x) (g x));\n        cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> adm (\\<lambda>x. eq (inc\\<cdot>n) (f x) (g x))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. eq (inc\\<cdot>n_) (f x) (g x))", "apply (subst eq_inc_simp)"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>x. \\<forall>v. eq n_ (f x \\<down>Fn v) (g x \\<down>Fn v))", "apply (rule adm_all)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>v. adm (\\<lambda>x. eq n_ (f x \\<down>Fn v) (g x \\<down>Fn v))", "apply (rule inc)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>v. cont (\\<lambda>a. f a \\<down>Fn v)\n 2. \\<And>v. cont (\\<lambda>a. g a \\<down>Fn v)", "apply (intro cont2cont inc(2,3))+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  adm (\\<lambda>x. eq (inc\\<cdot>n_) (f x) (g x))\n\ngoal:\nNo subgoals!", "qed"], ["", "inductive eq\\<rho> :: \"AEnv \\<Rightarrow> (var \\<Rightarrow> Value) \\<Rightarrow> (var \\<Rightarrow> Value) \\<Rightarrow> bool\" where\n eq\\<rho>I: \"(\\<And> x a. ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)) \\<Longrightarrow> eq\\<rho> ae \\<rho>1 \\<rho>2\""], ["", "lemma eq\\<rho>E: \"eq\\<rho> ae \\<rho>1 \\<rho>2 \\<Longrightarrow> ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>eq\\<rho> ae \\<rho>1 \\<rho>2; ae x = up\\<cdot>a\\<rbrakk>\n    \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "by (auto simp add: eq\\<rho>.simps)"], ["", "lemma eq\\<rho>_refl[simp]: \"eq\\<rho> ae \\<rho> \\<rho>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> ae \\<rho> \\<rho>", "by (simp add: eq\\<rho>.simps)"], ["", "lemma eq_esing_up[simp]: \"eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2 \\<longleftrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2 =\n    eq a (\\<rho>1 x) (\\<rho>2 x)", "by (auto simp add: eq\\<rho>.simps)"], ["", "lemma eq\\<rho>_mono:\n  assumes \"ae \\<sqsubseteq> ae'\"\n  assumes \"eq\\<rho> ae' \\<rho>1 \\<rho>2\"\n  shows \"eq\\<rho> ae \\<rho>1 \\<rho>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> ae \\<rho>1 \\<rho>2", "proof (rule eq\\<rho>I)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "fix x a"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "assume \"ae x = up\\<cdot>a\""], ["proof (state)\nthis:\n  ae x = up\\<cdot>a\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "with \\<open>ae \\<sqsubseteq> ae'\\<close>"], ["proof (chain)\npicking this:\n  ae \\<sqsubseteq> ae'\n  ae x = up\\<cdot>a", "have \"up\\<cdot>a \\<sqsubseteq> ae' x\""], ["proof (prove)\nusing this:\n  ae \\<sqsubseteq> ae'\n  ae x = up\\<cdot>a\n\ngoal (1 subgoal):\n 1. up\\<cdot>a \\<sqsubseteq> ae' x", "by (metis fun_belowD)"], ["proof (state)\nthis:\n  up\\<cdot>a \\<sqsubseteq> ae' x\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "then"], ["proof (chain)\npicking this:\n  up\\<cdot>a \\<sqsubseteq> ae' x", "obtain a' where \"ae' x = up\\<cdot>a'\""], ["proof (prove)\nusing this:\n  up\\<cdot>a \\<sqsubseteq> ae' x\n\ngoal (1 subgoal):\n 1. (\\<And>a'.\n        ae' x = up\\<cdot>a' \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (metis Exh_Up below_antisym minimal)"], ["proof (state)\nthis:\n  ae' x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "with \\<open>eq\\<rho> ae' \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> ae' \\<rho>1 \\<rho>2\n  ae' x = up\\<cdot>a'", "have \"eq a' (\\<rho>1 x) (\\<rho>2 x)\""], ["proof (prove)\nusing this:\n  eq\\<rho> ae' \\<rho>1 \\<rho>2\n  ae' x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. eq a' (\\<rho>1 x) (\\<rho>2 x)", "by (auto simp add: eq\\<rho>.simps)"], ["proof (state)\nthis:\n  eq a' (\\<rho>1 x) (\\<rho>2 x)\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       ae x = up\\<cdot>a \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "with \\<open>up\\<cdot>a \\<sqsubseteq> ae' x\\<close> and \\<open>ae' x = up\\<cdot>a'\\<close>"], ["proof (chain)\npicking this:\n  up\\<cdot>a \\<sqsubseteq> ae' x\n  ae' x = up\\<cdot>a'\n  eq a' (\\<rho>1 x) (\\<rho>2 x)", "show \"eq a (\\<rho>1 x) (\\<rho>2 x)\""], ["proof (prove)\nusing this:\n  up\\<cdot>a \\<sqsubseteq> ae' x\n  ae' x = up\\<cdot>a'\n  eq a' (\\<rho>1 x) (\\<rho>2 x)\n\ngoal (1 subgoal):\n 1. eq a (\\<rho>1 x) (\\<rho>2 x)", "by (metis eq_mono up_below)"], ["proof (state)\nthis:\n  eq a (\\<rho>1 x) (\\<rho>2 x)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma eq\\<rho>_adm: \"cont f \\<Longrightarrow> cont g \\<Longrightarrow> adm (\\<lambda> x. eq\\<rho> a (f x) (g x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>cont f; cont g\\<rbrakk>\n    \\<Longrightarrow> adm (\\<lambda>x. eq\\<rho> a (f x) (g x))", "apply (simp add: eq\\<rho>.simps)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>cont f; cont g\\<rbrakk>\n    \\<Longrightarrow> adm (\\<lambda>x.\n                              \\<forall>xa xb.\n                                 a xa = up\\<cdot>xb \\<longrightarrow>\n                                 eq xb (f x xa) (g x xa))", "apply (intro adm_lemmas eq_adm)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x xa.\n       \\<lbrakk>cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> cont (\\<lambda>xa. f xa x)\n 2. \\<And>x xa.\n       \\<lbrakk>cont f; cont g\\<rbrakk>\n       \\<Longrightarrow> cont (\\<lambda>xa. g xa x)", "apply (erule cont2cont_fun)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma up_join_eq_up[simp]: \"up\\<cdot>(n::'a::Finite_Join_cpo) \\<squnion> up\\<cdot>n' = up\\<cdot>(n \\<squnion> n')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. up\\<cdot>n \\<squnion> up\\<cdot>n' = up\\<cdot>(n \\<squnion> n')", "apply (rule lub_is_join)"], ["proof (prove)\ngoal (1 subgoal):\n 1. {up\\<cdot>n, up\\<cdot>n'} <<| up\\<cdot>(n \\<squnion> n')", "apply (auto simp add: is_lub_def )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>u.\n       \\<lbrakk>up\\<cdot>n \\<sqsubseteq> u;\n        up\\<cdot>n' \\<sqsubseteq> u\\<rbrakk>\n       \\<Longrightarrow> up\\<cdot>(n \\<squnion> n') \\<sqsubseteq> u", "apply (case_tac u)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>u.\n       \\<lbrakk>up\\<cdot>n \\<sqsubseteq> u; up\\<cdot>n' \\<sqsubseteq> u;\n        u = \\<bottom>\\<rbrakk>\n       \\<Longrightarrow> up\\<cdot>(n \\<squnion> n') \\<sqsubseteq> u\n 2. \\<And>u x.\n       \\<lbrakk>up\\<cdot>n \\<sqsubseteq> u; up\\<cdot>n' \\<sqsubseteq> u;\n        u = up\\<cdot>x\\<rbrakk>\n       \\<Longrightarrow> up\\<cdot>(n \\<squnion> n') \\<sqsubseteq> u", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma eq\\<rho>_join[simp]: \"eq\\<rho> (ae \\<squnion> ae') \\<rho>1 \\<rho>2 \\<longleftrightarrow> eq\\<rho> ae \\<rho>1 \\<rho>2 \\<and> eq\\<rho> ae' \\<rho>1 \\<rho>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> (ae \\<squnion> ae') \\<rho>1 \\<rho>2 =\n    (eq\\<rho> ae \\<rho>1 \\<rho>2 \\<and> eq\\<rho> ae' \\<rho>1 \\<rho>2)", "apply (auto elim!: eq\\<rho>_mono[OF join_above1] eq\\<rho>_mono[OF join_above2])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>eq\\<rho> ae \\<rho>1 \\<rho>2;\n     eq\\<rho> ae' \\<rho>1 \\<rho>2\\<rbrakk>\n    \\<Longrightarrow> eq\\<rho> (ae \\<squnion> ae') \\<rho>1 \\<rho>2", "apply (auto intro!: eq\\<rho>I)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       \\<lbrakk>eq\\<rho> ae \\<rho>1 \\<rho>2; eq\\<rho> ae' \\<rho>1 \\<rho>2;\n        ae x \\<squnion> ae' x = up\\<cdot>a\\<rbrakk>\n       \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "apply (case_tac \"ae x\", auto elim: eq\\<rho>E)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x a xa.\n       \\<lbrakk>eq\\<rho> ae \\<rho>1 \\<rho>2; eq\\<rho> ae' \\<rho>1 \\<rho>2;\n        ae' x \\<squnion> up\\<cdot>xa = up\\<cdot>a;\n        ae x = up\\<cdot>xa\\<rbrakk>\n       \\<Longrightarrow> eq a (\\<rho>1 x) (\\<rho>2 x)", "apply (case_tac \"ae' x\", auto elim: eq\\<rho>E)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma eq\\<rho>_override[simp]:\n  \"eq\\<rho> ae (\\<rho>1 ++\\<^bsub>S\\<^esub> \\<rho>2) (\\<rho>1' ++\\<^bsub>S\\<^esub>\\<rho>2') \\<longleftrightarrow> eq\\<rho> ae (\\<rho>1 f|` (- S)) (\\<rho>1' f|` (- S)) \\<and>  eq\\<rho> ae (\\<rho>2 f|` S) (\\<rho>2' f|` S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> ae (\\<rho>1 ++\\<^bsub>S\\<^esub> \\<rho>2)\n     (\\<rho>1' ++\\<^bsub>S\\<^esub> \\<rho>2') =\n    (eq\\<rho> ae (\\<rho>1 f|` (- S)) (\\<rho>1' f|` (- S)) \\<and>\n     eq\\<rho> ae (\\<rho>2 f|` S) (\\<rho>2' f|` S))", "by (auto simp add: lookup_env_restr_eq eq\\<rho>.simps lookup_override_on_eq)"], ["", "lemma Aexp_heap_below_Aheap:\n  assumes \"(Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\"\n  assumes \"map_of \\<Gamma> x = Some e'\"\n  shows \"Aexp e'\\<cdot>a' \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "from assms(1)"], ["proof (chain)\npicking this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'", "have \"Aexp e'\\<cdot>a' = ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\""], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' = ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)", "by (simp del: join_comm fun_meet_simp)"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a'\\<^esub> e' = ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "also"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a'\\<^esub> e' = ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "have \"\\<dots> \\<sqsubseteq> ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n    ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)", "by (rule monofun_cfun_fun[OF ABind_below_ABinds[OF \\<open>map_of _ _ = _\\<close>]])"], ["proof (state)\nthis:\n  ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "also"], ["proof (state)\nthis:\n  ABind x e'\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "have \"\\<dots> \\<sqsubseteq> ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<squnion>  Aexp e\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n    ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> e", "by simp"], ["proof (state)\nthis:\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> e\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "also"], ["proof (state)\nthis:\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<sqsubseteq>\n  ABinds \\<Gamma>\\<cdot>(Aheap \\<Gamma> e\\<cdot>a) \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> e\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "note Aexp_Let"], ["proof (state)\nthis:\n  ABinds ?\\<Gamma>\\<cdot>(Aheap ?\\<Gamma> ?e\\<cdot>?a) \\<squnion>\n  \\<A>\\<^bsub>?a\\<^esub> ?e \\<sqsubseteq>\n  Aheap ?\\<Gamma> ?e\\<cdot>?a \\<squnion>\n  \\<A>\\<^bsub>?a\\<^esub> (Terms.Let ?\\<Gamma> ?e)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "finally"], ["proof (chain)\npicking this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n                    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n                    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>cont (\\<lambda>a. a); cont (\\<lambda>a. a)\\<rbrakk>\n  \\<Longrightarrow> \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n                    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n                    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "by this simp_all"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma Aexp_body_below_Aheap:\n  shows \"Aexp e\\<cdot>a \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a\\<^esub> e \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "by (rule below_trans[OF join_above2 Aexp_Let])"], ["", "lemma Aexp_correct: \"eq\\<rho> (Aexp e\\<cdot>a) \\<rho>1 \\<rho>2 \\<Longrightarrow> eq a (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>) (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e) \\<rho>1 \\<rho>2 \\<Longrightarrow>\n    eq a (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "proof(induction a e arbitrary: \\<rho>1 \\<rho>2 rule: transform.induct[case_names App Lam Var Let Bool IfThenElse])"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a x \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 6. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (Var a x)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1 \\<rho>2\n\ngoal (6 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a x \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 6. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from \\<open>eq\\<rho> (Aexp (Var x)\\<cdot>a) \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1 \\<rho>2", "have \"eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2", "by (rule eq\\<rho>_mono[OF Aexp_Var_singleton])"], ["proof (state)\nthis:\n  eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2\n\ngoal (6 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a x \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Var x)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 6. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "thus ?case"], ["proof (prove)\nusing this:\n  eq\\<rho> (esing x\\<cdot>(up\\<cdot>a)) \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq a (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (App a e x)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) ?\\<rho>1.0\n   ?\\<rho>2.0 \\<Longrightarrow>\n  eq (inc\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from \\<open>eq\\<rho> (Aexp (App e x)\\<cdot>a) \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2", "have \"eq\\<rho> (Aexp e\\<cdot>(inc\\<cdot>a) \\<squnion> esing x\\<cdot>(up\\<cdot>0)) \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e \\<squnion>\n      esing x\\<cdot>(up\\<cdot>0))\n     \\<rho>1 \\<rho>2", "by (rule eq\\<rho>_mono[OF Aexp_App])"], ["proof (state)\nthis:\n  eq\\<rho>\n   (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e \\<squnion> esing x\\<cdot>(up\\<cdot>0))\n   \\<rho>1 \\<rho>2\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "hence \"eq\\<rho> (Aexp e\\<cdot>(inc\\<cdot>a)) \\<rho>1 \\<rho>2\" and \"\\<rho>1 x = \\<rho>2 x\""], ["proof (prove)\nusing this:\n  eq\\<rho>\n   (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e \\<squnion> esing x\\<cdot>(up\\<cdot>0))\n   \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1 \\<rho>2 &&&\n    \\<rho>1 x = \\<rho>2 x", "by simp_all"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1 \\<rho>2\n  \\<rho>1 x = \\<rho>2 x\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>inc\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (inc\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (App e x)) \\<rho>1 \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> App e\nx \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from App(1)[OF this(1)] this(2)"], ["proof (chain)\npicking this:\n  eq (inc\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  \\<rho>1 x = \\<rho>2 x", "show ?case"], ["proof (prove)\nusing this:\n  eq (inc\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  \\<rho>1 x = \\<rho>2 x\n\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by (auto elim: eq.cases)"], ["proof (state)\nthis:\n  eq a (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (Lam a x e)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) ?\\<rho>1.0\n   ?\\<rho>2.0 \\<Longrightarrow>\n  eq (pred\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1 \\<rho>2\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from  \\<open>eq\\<rho> (Aexp (Lam [x]. e)\\<cdot>a) \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1 \\<rho>2", "have \"eq\\<rho> (env_delete x (Aexp e\\<cdot>(pred\\<cdot>a))) \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho> (env_delete x (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e)) \\<rho>1\n     \\<rho>2", "by (rule eq\\<rho>_mono[OF Aexp_Lam])"], ["proof (state)\nthis:\n  eq\\<rho> (env_delete x (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e)) \\<rho>1\n   \\<rho>2\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "hence \"\\<And> v. eq\\<rho> (Aexp e\\<cdot>(pred\\<cdot>a)) (\\<rho>1(x := v)) (\\<rho>2(x := v))\""], ["proof (prove)\nusing this:\n  eq\\<rho> (env_delete x (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e)) \\<rho>1\n   \\<rho>2\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) (\\<rho>1(x := v))\n        (\\<rho>2(x := v))", "by (auto intro!: eq\\<rho>I elim!: eq\\<rho>E)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) (\\<rho>1(x := ?v))\n   (\\<rho>2(x := ?v))\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>pred\\<cdot>a\\<^esub> e) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq (pred\\<cdot>a)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Lam [x]. e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from Lam(1)[OF this]"], ["proof (chain)\npicking this:\n  eq (pred\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1(x := ?v1)\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2(x := ?v1)\\<^esub>)", "show ?case"], ["proof (prove)\nusing this:\n  eq (pred\\<cdot>a) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1(x := ?v1)\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2(x := ?v1)\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by (auto intro: eq_FnI simp del: fun_upd_apply)"], ["proof (state)\nthis:\n  eq a (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (Bool b)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>b\\<^esub> (Bool b_)) \\<rho>1 \\<rho>2\n\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a b \\<rho>1 \\<rho>2.\n       eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Bool b)) \\<rho>1\n        \\<rho>2 \\<Longrightarrow>\n       eq a (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq b (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq b (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (IfThenElse a scrut e\\<^sub>1 e\\<^sub>2)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) ?\\<rho>1.0\n   ?\\<rho>2.0 \\<Longrightarrow>\n  eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>1) ?\\<rho>1.0\n   ?\\<rho>2.0 \\<Longrightarrow>\n  eq a (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>2) ?\\<rho>1.0\n   ?\\<rho>2.0 \\<Longrightarrow>\n  eq a (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e\\<^sub>1 : e\\<^sub>2)) \\<rho>1\n   \\<rho>2\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from \\<open>eq\\<rho> (Aexp (scrut ? e\\<^sub>1 : e\\<^sub>2)\\<cdot>a) \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e\\<^sub>1 : e\\<^sub>2)) \\<rho>1\n   \\<rho>2", "have \"eq\\<rho> (Aexp scrut\\<cdot>0 \\<squnion> Aexp e\\<^sub>1\\<cdot>a \\<squnion> Aexp e\\<^sub>2\\<cdot>a) \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e\\<^sub>1 : e\\<^sub>2)) \\<rho>1\n   \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (\\<A>\\<^bsub>0\\<^esub> scrut \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> e\\<^sub>1 \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> e\\<^sub>2)\n     \\<rho>1 \\<rho>2", "by (rule eq\\<rho>_mono[OF Aexp_IfThenElse])"], ["proof (state)\nthis:\n  eq\\<rho>\n   (\\<A>\\<^bsub>0\\<^esub> scrut \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> e\\<^sub>1 \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> e\\<^sub>2)\n   \\<rho>1 \\<rho>2\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "hence \"eq\\<rho> (Aexp scrut\\<cdot>0) \\<rho>1 \\<rho>2\"\n  and   \"eq\\<rho> (Aexp e\\<^sub>1\\<cdot>a) \\<rho>1 \\<rho>2\"\n  and   \"eq\\<rho> (Aexp e\\<^sub>2\\<cdot>a) \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  eq\\<rho>\n   (\\<A>\\<^bsub>0\\<^esub> scrut \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> e\\<^sub>1 \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> e\\<^sub>2)\n   \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1 \\<rho>2 &&&\n    eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>1) \\<rho>1 \\<rho>2 &&&\n    eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>2) \\<rho>1 \\<rho>2", "by simp_all"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1 \\<rho>2\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>1) \\<rho>1 \\<rho>2\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e\\<^sub>2) \\<rho>1 \\<rho>2\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>\\<rho>1 \\<rho>2.\n                   eq\\<rho> (\\<A>\\<^bsub>0\\<^esub> scrut) \\<rho>1\n                    \\<rho>2 \\<Longrightarrow>\n                   eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e1) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e2) \\<rho>1\n            \\<rho>2 \\<Longrightarrow>\n           eq a (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (scrut ? e1 : e2)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "from IfThenElse(1)[OF this(1)] IfThenElse(2)[OF this(2)] IfThenElse(3)[OF this(3)]"], ["proof (chain)\npicking this:\n  eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  eq a (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  eq a (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "show ?case"], ["proof (prove)\nusing this:\n  eq 0 (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  eq a (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n  eq a (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> (scrut ? e\\<^sub>1\n                 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> (scrut ? e\\<^sub>1\n                 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by (cases \"\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>\") auto"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> (scrut ? e\\<^sub>1\n               : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> (scrut ? e\\<^sub>1\n               : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "case (Let a \\<Gamma> e)"], ["proof (state)\nthis:\n  \\<lbrakk>(?x, ?ea) \\<in> set \\<Gamma>;\n   eq\\<rho> (\\<A>\\<^bsub>?aa\\<^esub> ?ea) ?\\<rho>1.0 ?\\<rho>2.0\\<rbrakk>\n  \\<Longrightarrow> eq ?aa\n                     (\\<lbrakk> ?ea \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n                     (\\<lbrakk> ?ea \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n   ?\\<rho>1.0 ?\\<rho>2.0 \\<Longrightarrow>\n  eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>1.0\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>2.0\\<^esub>)\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "have \"eq\\<rho> (Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)", "proof(induction rule: parallel_HSem_ind[case_names adm bottom step])"], ["proof (state)\ngoal (3 subgoals):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))\n 2. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 3. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case adm"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))\n 2. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 3. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))", "by (intro eq\\<rho>_adm cont2cont)"], ["proof (state)\nthis:\n  adm (\\<lambda>\\<rho>'.\n          eq\\<rho>\n           (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n            \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n           (fst \\<rho>') (snd \\<rho>'))\n\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case bottom"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>", "by simp"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<bottom> \\<bottom>\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case (step \\<rho>1' \\<rho>2')"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<rho>1' \\<rho>2'\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho>1 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho>2 ++\\<^bsub>domA\n                            \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     (\\<rho>1 ++\\<^bsub>domA\n                         \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n     (\\<rho>2 ++\\<^bsub>domA\n                         \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)", "proof (rule eq\\<rho>I)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<rho>1 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n          x)\n        ((\\<rho>2 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n          x)", "fix x a'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<rho>1 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n          x)\n        ((\\<rho>2 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n          x)", "assume ass: \"(Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a) x = up\\<cdot>a'\""], ["proof (state)\nthis:\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<rho>1 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n          x)\n        ((\\<rho>2 ++\\<^bsub>domA\n                             \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n          x)", "show \"eq a' ((\\<rho>1 ++\\<^bsub>domA \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>) x) ((\\<rho>2 ++\\<^bsub>domA \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "proof(cases \"x \\<in> domA \\<Gamma>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "case [simp]: True"], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> domA \\<Gamma>", "obtain e' where [simp]: \"map_of \\<Gamma> x = Some e'\""], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<And>e'.\n        map_of \\<Gamma> x = Some e' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis domA_map_of_Some_the)"], ["proof (state)\nthis:\n  map_of \\<Gamma> x = Some e'\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "have \"(Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'", "using ass"], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'", "by simp"], ["proof (state)\nthis:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "hence \"Aexp e'\\<cdot>a' \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\""], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "using \\<open>map_of _ _ = _\\<close>"], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n  map_of \\<Gamma> x = Some e'\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "by (rule Aexp_heap_below_Aheap)"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "hence \"eq\\<rho> (Aexp e'\\<cdot>a') \\<rho>1' \\<rho>2'\""], ["proof (prove)\nusing this:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1' \\<rho>2'", "using step(1)"], ["proof (prove)\nusing this:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<rho>1' \\<rho>2'\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1' \\<rho>2'", "by (rule eq\\<rho>_mono)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1' \\<rho>2'\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "hence \"eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>) (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1' \\<rho>2'\n\ngoal (1 subgoal):\n 1. eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n     (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)", "by (rule Let(1)[OF map_of_SomeD[OF \\<open>map_of _ _ = _\\<close>]])"], ["proof (state)\nthis:\n  eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "by (simp add: lookupEvalHeap')"], ["proof (state)\nthis:\n  eq a'\n   ((\\<rho>1 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n     x)\n   ((\\<rho>2 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n     x)\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "case [simp]: False"], ["proof (state)\nthis:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "with edom_Aheap"], ["proof (chain)\npicking this:\n  edom (Aheap ?\\<Gamma> ?e\\<cdot>?a) \\<subseteq> domA ?\\<Gamma>\n  x \\<notin> domA \\<Gamma>", "have \"x \\<notin> edom (Aheap \\<Gamma> e\\<cdot>a)\""], ["proof (prove)\nusing this:\n  edom (Aheap ?\\<Gamma> ?e\\<cdot>?a) \\<subseteq> domA ?\\<Gamma>\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. x \\<notin> edom (Aheap \\<Gamma> e\\<cdot>a)", "by blast"], ["proof (state)\nthis:\n  x \\<notin> edom (Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "hence \"(Aexp (Let \\<Gamma> e)\\<cdot>a) x = up\\<cdot>a'\""], ["proof (prove)\nusing this:\n  x \\<notin> edom (Aheap \\<Gamma> e\\<cdot>a)\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e) x = up\\<cdot>a'", "using ass"], ["proof (prove)\nusing this:\n  x \\<notin> edom (Aheap \\<Gamma> e\\<cdot>a)\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e) x = up\\<cdot>a'", "by (simp add: edomIff)"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e) x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "with \\<open>eq\\<rho> (Aexp (Let \\<Gamma> e)\\<cdot>a) \\<rho>1 \\<rho>2\\<close>"], ["proof (chain)\npicking this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1 \\<rho>2\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e) x = up\\<cdot>a'", "have \"eq a' (\\<rho>1 x) (\\<rho>2 x)\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1 \\<rho>2\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e) x = up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. eq a' (\\<rho>1 x) (\\<rho>2 x)", "by (auto elim: eq\\<rho>E)"], ["proof (state)\nthis:\n  eq a' (\\<rho>1 x) (\\<rho>2 x)\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  eq a' (\\<rho>1 x) (\\<rho>2 x)\n\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<rho>1 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n       x)\n     ((\\<rho>2 ++\\<^bsub>domA\n                          \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n       x)", "by simp"], ["proof (state)\nthis:\n  eq a'\n   ((\\<rho>1 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n     x)\n   ((\\<rho>2 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n     x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq a'\n   ((\\<rho>1 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n     x)\n   ((\\<rho>2 ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n     x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<rho>1 ++\\<^bsub>domA\n                       \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1'\\<^esub>)\n   (\\<rho>2 ++\\<^bsub>domA\n                       \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2'\\<^esub>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "hence \"eq\\<rho> (Aexp e\\<cdot>a) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\""], ["proof (prove)\nusing this:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1)\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)", "by (rule eq\\<rho>_mono[OF Aexp_body_below_Aheap])"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1)\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "hence \"eq a (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1\\<^esub>) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2\\<^esub>)\""], ["proof (prove)\nusing this:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1)\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2\\<^esub>)", "by (rule Let(2)[simplified])"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>1 \\<rho>2.\n       \\<lbrakk>\\<And>x ea aa \\<rho>1 \\<rho>2.\n                   \\<lbrakk>(x, ea) \\<in> set \\<Gamma>;\n                    eq\\<rho> (\\<A>\\<^bsub>aa\\<^esub> ea) \\<rho>1\n                     \\<rho>2\\<rbrakk>\n                   \\<Longrightarrow> eq aa\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n(\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        \\<And>\\<rho>1 \\<rho>2.\n           eq\\<rho>\n            (\\<A>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub> e)\n            \\<rho>1 \\<rho>2 \\<Longrightarrow>\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>);\n        eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)) \\<rho>1\n         \\<rho>2\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "thus ?case"], ["proof (prove)\nusing this:\n  eq a\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq a (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma ESem_ignores_fresh[simp]: \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(fresh_var e := v)\\<^esub> = \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>(fresh_var e := v)\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by (metis ESem_fresh_cong env_restr_fun_upd_other fresh_var_not_free)"], ["", "lemma eq_Aeta_expand: \"eq a (\\<lbrakk> Aeta_expand a e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) (\\<lbrakk>e\\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> Aeta_expand a e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "apply (induction a arbitrary: e \\<rho>  rule: Arity_ind[case_names 0 inc])"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>e \\<rho>.\n       eq 0 (\\<lbrakk> Aeta_expand 0 e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>n e \\<rho>.\n       (\\<And>e \\<rho>.\n           eq n (\\<lbrakk> Aeta_expand n e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq (inc\\<cdot>n)\n        (\\<lbrakk> Aeta_expand (inc\\<cdot>n)\n                    e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>n e \\<rho>.\n       (\\<And>e \\<rho>.\n           eq n (\\<lbrakk> Aeta_expand n e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq (inc\\<cdot>n)\n        (\\<lbrakk> Aeta_expand (inc\\<cdot>n)\n                    e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "apply (fastforce simp add: eq_inc_simp elim: eq_trans)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma Arity_transformation_correct: \"eq a (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "proof(induction a e arbitrary: \\<rho> rule: transform.induct[case_names App Lam Var Let Bool IfThenElse])"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a e x \\<rho>.\n       (\\<And>\\<rho>.\n           eq (inc\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a x \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Var x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 5. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 6. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case Var"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. \\<And>a e x \\<rho>.\n       (\\<And>\\<rho>.\n           eq (inc\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a x \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Var x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Var x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 5. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 6. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a_\n     (\\<lbrakk> \\<T>\\<^bsub>a_\\<^esub>\n                 (Var x_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> Var x_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq a_\n   (\\<lbrakk> \\<T>\\<^bsub>a_\\<^esub>\n               (Var x_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Var x_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>.\n       (\\<And>\\<rho>.\n           eq (inc\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>.\n       (\\<And>\\<rho>.\n           eq (inc\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case (App a e x)"], ["proof (state)\nthis:\n  eq (inc\\<cdot>a)\n   (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (5 subgoals):\n 1. \\<And>a e x \\<rho>.\n       (\\<And>\\<rho>.\n           eq (inc\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 5. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "from this[where \\<rho> =\\<rho> ]"], ["proof (chain)\npicking this:\n  eq (inc\\<cdot>a)\n   (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "show ?case"], ["proof (prove)\nusing this:\n  eq (inc\\<cdot>a)\n   (\\<lbrakk> \\<T>\\<^bsub>inc\\<cdot>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "by (auto elim: eq.cases)"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (App e x) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> App e x \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case (Lam x e)"], ["proof (state)\nthis:\n  eq (pred\\<cdot>x)\n   (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>x\\<^esub>\n               e_ \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e_ \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (4 subgoals):\n 1. \\<And>a x e \\<rho>.\n       (\\<And>\\<rho>.\n           eq (pred\\<cdot>a)\n            (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>a\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)) \\<Longrightarrow>\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Lam [x]. e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Lam [x]. e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 4. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "thus ?case"], ["proof (prove)\nusing this:\n  eq (pred\\<cdot>x)\n   (\\<lbrakk> \\<T>\\<^bsub>pred\\<cdot>x\\<^esub>\n               e_ \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e_ \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq x\n     (\\<lbrakk> \\<T>\\<^bsub>x\\<^esub>\n                 (Lam [e]. e_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> Lam [e]. e_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "by (auto intro: eq_FnI)"], ["proof (state)\nthis:\n  eq x\n   (\\<lbrakk> \\<T>\\<^bsub>x\\<^esub>\n               (Lam [e]. e_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Lam [e]. e_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case (Bool b)"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a b \\<rho>.\n       eq a\n        (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                    (Bool b) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n        (\\<lbrakk> Bool b \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 3. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq b\n     (\\<lbrakk> \\<T>\\<^bsub>b\\<^esub>\n                 (Bool b_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq b\n   (\\<lbrakk> \\<T>\\<^bsub>b\\<^esub>\n               (Bool b_) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Bool b_ \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case (IfThenElse a e e\\<^sub>1 e\\<^sub>2)"], ["proof (state)\nthis:\n  eq 0 (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (2 subgoals):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n 2. \\<And>a scrut e1 e2 \\<rho>.\n       \\<lbrakk>\\<And>\\<rho>.\n                   eq 0\n                    (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub>\n                                scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> scrut \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e1 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq a\n            (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                        e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e2 \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(scrut ? e1 : e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> (scrut ? e1\n: e2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "thus ?case"], ["proof (prove)\nusing this:\n  eq 0 (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e\\<^sub>1 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e\\<^sub>2 \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 (e ? e\\<^sub>1\n                  : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> (e ? e\\<^sub>1 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "by (cases \"\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\") auto"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (e ? e\\<^sub>1 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> (e ? e\\<^sub>1 : e\\<^sub>2) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "case (Let a \\<Gamma> e)"], ["proof (state)\nthis:\n  (?x, ?ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n  eq ?aa\n   (\\<lbrakk> \\<T>\\<^bsub>?aa\\<^esub> ?ea \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> ?ea \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n  eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n   (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n               e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "have \"eq a (\\<lbrakk> transform a (Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>) (\\<lbrakk> transform a e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n        (Aheap \\<Gamma> e\\<cdot>a)\n        (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n          \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n      (Aheap \\<Gamma> e\\<cdot>a)\n      (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n        \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n      (Aheap \\<Gamma> e\\<cdot>a)\n      (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n        \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "have \"eq a \\<dots> (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n        (Aheap \\<Gamma> e\\<cdot>a)\n        (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n          \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n       (Aheap \\<Gamma> e\\<cdot>a)\n       (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n         \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)", "using Let(2)"], ["proof (prove)\nusing this:\n  eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n   (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n               e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n        (Aheap \\<Gamma> e\\<cdot>a)\n        (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n          \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n       (Aheap \\<Gamma> e\\<cdot>a)\n       (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n         \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)", "by simp"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n      (Aheap \\<Gamma> e\\<cdot>a)\n      (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n        \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n     (Aheap \\<Gamma> e\\<cdot>a)\n     (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n       \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n      (Aheap \\<Gamma> e\\<cdot>a)\n      (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n        \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n     (Aheap \\<Gamma> e\\<cdot>a)\n     (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n       \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "have \"eq a \\<dots> (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n       (Aheap \\<Gamma> e\\<cdot>a)\n       (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n         \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n     (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)", "proof (rule Aexp_correct)"], ["proof (state)\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e)\n     (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                  \\<Gamma>)\\<rbrace>\\<rho>)\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)", "have \"eq\\<rho> (Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a) (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>)\\<rbrace>\\<rho>) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                  \\<Gamma>)\\<rbrace>\\<rho>)\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)", "proof(induction rule: parallel_HSem_ind[case_names adm bottom step])"], ["proof (state)\ngoal (3 subgoals):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))\n 2. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 3. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case adm"], ["proof (state)\nthis:\n  \n\ngoal (3 subgoals):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))\n 2. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 3. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "thus ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. adm (\\<lambda>\\<rho>'.\n            eq\\<rho>\n             (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n              \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n             (fst \\<rho>') (snd \\<rho>'))", "by (intro eq\\<rho>_adm cont2cont)"], ["proof (state)\nthis:\n  adm (\\<lambda>\\<rho>'.\n          eq\\<rho>\n           (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n            \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n           (fst \\<rho>') (snd \\<rho>'))\n\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case bottom"], ["proof (state)\nthis:\n  \n\ngoal (2 subgoals):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>\n 2. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     \\<bottom> \\<bottom>", "by simp"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<bottom> \\<bottom>\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "case (step \\<rho>1 \\<rho>2)"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "have \"eq\\<rho> (Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a) (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>) (\\<^bold>\\<lbrakk>\\<Gamma>\\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                         (map_transform transform_syn\n                           (Aheap \\<Gamma> e\\<cdot>a)\n                           \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "proof(rule eq\\<rho>I)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n          x)\n        ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n          x)", "fix x a'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n          x)\n        ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n          x)", "assume ass: \"(Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a) x = up\\<cdot>a'\""], ["proof (state)\nthis:\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. \\<And>x a.\n       (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n        \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        x =\n       up\\<cdot>a \\<Longrightarrow>\n       eq a\n        ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n          x)\n        ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n          x)", "show \"eq a' ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>) x) ((\\<^bold>\\<lbrakk>\\<Gamma>\\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "proof(cases \"x \\<in> domA \\<Gamma>\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "case [simp]: True"], ["proof (state)\nthis:\n  x \\<in> domA \\<Gamma>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "then"], ["proof (chain)\npicking this:\n  x \\<in> domA \\<Gamma>", "obtain e' where [simp]: \"map_of \\<Gamma> x = Some e'\""], ["proof (prove)\nusing this:\n  x \\<in> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. (\\<And>e'.\n        map_of \\<Gamma> x = Some e' \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis domA_map_of_Some_the)"], ["proof (state)\nthis:\n  map_of \\<Gamma> x = Some e'\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "from ass"], ["proof (chain)\npicking this:\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'", "have ass': \"(Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\""], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n   \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   x =\n  up\\<cdot>a'\n\ngoal (1 subgoal):\n 1. (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'", "by simp"], ["proof (state)\nthis:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "have \"(\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>) x =\n            \\<lbrakk>Aeta_expand a' (transform a' e')\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x =\n    \\<lbrakk> Aeta_expand a'\n               (\\<T>\\<^bsub>a'\\<^esub> e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>", "by (simp add: lookupEvalHeap' map_of_map_transform ass')"], ["proof (state)\nthis:\n  (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                      (map_transform transform_syn\n                        (Aheap \\<Gamma> e\\<cdot>a)\n                        \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   x =\n  \\<lbrakk> Aeta_expand a'\n             (\\<T>\\<^bsub>a'\\<^esub> e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "also"], ["proof (state)\nthis:\n  (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                      (map_transform transform_syn\n                        (Aheap \\<Gamma> e\\<cdot>a)\n                        \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   x =\n  \\<lbrakk> Aeta_expand a'\n             (\\<T>\\<^bsub>a'\\<^esub> e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "have \"eq a' \\<dots> (\\<lbrakk>transform a' e'\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a'\n     (\\<lbrakk> Aeta_expand a'\n                 (\\<T>\\<^bsub>a'\\<^esub>\n                   e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)", "by (rule eq_Aeta_expand)"], ["proof (state)\nthis:\n  eq a'\n   (\\<lbrakk> Aeta_expand a'\n               (\\<T>\\<^bsub>a'\\<^esub> e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "also"], ["proof (state)\nthis:\n  eq a'\n   (\\<lbrakk> Aeta_expand a'\n               (\\<T>\\<^bsub>a'\\<^esub> e') \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "have \"eq a' \\<dots> (\\<lbrakk>e'\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a'\n     (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)", "by (rule Let(1)[OF map_of_SomeD[OF \\<open>map_of _ _ = _\\<close>]])"], ["proof (state)\nthis:\n  eq a'\n   (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "also"], ["proof (state)\nthis:\n  eq a'\n   (\\<lbrakk> \\<T>\\<^bsub>a'\\<^esub> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "have \"eq a' \\<dots> (\\<lbrakk>e'\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "proof (rule Aexp_correct)"], ["proof (state)\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1 \\<rho>2", "from ass' \\<open>map_of _ _ = _\\<close>"], ["proof (chain)\npicking this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n  map_of \\<Gamma> x = Some e'", "have \"Aexp e'\\<cdot>a' \\<sqsubseteq> Aheap \\<Gamma> e\\<cdot>a \\<squnion> Aexp (Let \\<Gamma> e)\\<cdot>a\""], ["proof (prove)\nusing this:\n  (Aheap \\<Gamma> e\\<cdot>a) x = up\\<cdot>a'\n  map_of \\<Gamma> x = Some e'\n\ngoal (1 subgoal):\n 1. \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n    Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)", "by (rule Aexp_heap_below_Aheap)"], ["proof (state)\nthis:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1 \\<rho>2", "thus \"eq\\<rho> (Aexp e'\\<cdot>a') \\<rho>1 \\<rho>2\""], ["proof (prove)\nusing this:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1 \\<rho>2", "using step"], ["proof (prove)\nusing this:\n  \\<A>\\<^bsub>a'\\<^esub> e' \\<sqsubseteq>\n  Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n  \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e)\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   \\<rho>1 \\<rho>2\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1 \\<rho>2", "by (rule eq\\<rho>_mono)"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>a'\\<^esub> e') \\<rho>1 \\<rho>2\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "also"], ["proof (state)\nthis:\n  eq a' (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "have \"\\<dots> = (\\<^bold>\\<lbrakk>\\<Gamma>\\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub> =\n    (\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x", "by (simp add: lookupEvalHeap')"], ["proof (state)\nthis:\n  \\<lbrakk> e' \\<rbrakk>\\<^bsub>\\<rho>2\\<^esub> =\n  (\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x\n\ngoal (2 subgoals):\n 1. x \\<in> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)\n 2. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "finally"], ["proof (chain)\npicking this:\n  eq a'\n   ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x)\n   ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)", "show ?thesis"], ["proof (prove)\nusing this:\n  eq a'\n   ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x)\n   ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)\n\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "."], ["proof (state)\nthis:\n  eq a'\n   ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x)\n   ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "case False"], ["proof (state)\nthis:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. x \\<notin> domA \\<Gamma> \\<Longrightarrow>\n    eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "thus ?thesis"], ["proof (prove)\nusing this:\n  x \\<notin> domA \\<Gamma>\n\ngoal (1 subgoal):\n 1. eq a'\n     ((\\<^bold>\\<lbrakk> map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n       x)\n     ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n       x)", "by simp"], ["proof (state)\nthis:\n  eq a'\n   ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x)\n   ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq a'\n   ((\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     x)\n   ((\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>) x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                       (map_transform transform_syn\n                         (Aheap \\<Gamma> e\\<cdot>a)\n                         \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>y z.\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        y z \\<Longrightarrow>\n       eq\\<rho>\n        (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n         \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n        (\\<rho> ++\\<^bsub>domA\n                           (map_transform Aeta_expand\n                             (Aheap \\<Gamma> e\\<cdot>a)\n                             (map_transform transform_syn\n                               (Aheap \\<Gamma> e\\<cdot>a)\n                               \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                               Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                               (map_transform transform_syn\n                                 (Aheap \\<Gamma> e\\<cdot>a)\n                                 \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>y\\<^esub>)\n        (\\<rho> ++\\<^bsub>domA\n                           \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>z\\<^esub>)", "thus ?case"], ["proof (prove)\nusing this:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<^bold>\\<lbrakk> map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                       (map_transform transform_syn\n                         (Aheap \\<Gamma> e\\<cdot>a)\n                         \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq\\<rho>\n     (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n      \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n     (\\<rho> ++\\<^bsub>domA\n                        (map_transform Aeta_expand\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                            Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                            (map_transform transform_syn\n                              (Aheap \\<Gamma> e\\<cdot>a)\n                              \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n     (\\<rho> ++\\<^bsub>domA\n                        \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)", "by (simp add: env_restr_useless  order_trans[OF  edom_evalHeap_subset] del: fun_meet_simp eq\\<rho>_join)"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<rho> ++\\<^bsub>domA\n                      (map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                        (map_transform transform_syn\n                          (Aheap \\<Gamma> e\\<cdot>a)\n                          \\<Gamma>))\\<^esub> \\<^bold>\\<lbrakk> map_transform\n                          Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                          (map_transform transform_syn\n                            (Aheap \\<Gamma> e\\<cdot>a)\n                            \\<Gamma>) \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>1\\<^esub>)\n   (\\<rho> ++\\<^bsub>domA\n                      \\<Gamma>\\<^esub> \\<^bold>\\<lbrakk> \\<Gamma> \\<^bold>\\<rbrakk>\\<^bsub>\\<rho>2\\<^esub>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n              (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                \\<Gamma>)\\<rbrace>\\<rho>)\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e)\n     (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                  \\<Gamma>)\\<rbrace>\\<rho>)\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)", "thus \"eq\\<rho> (Aexp e\\<cdot>a) (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a) (map_transform transform (Aheap \\<Gamma> e\\<cdot>a) \\<Gamma>)\\<rbrace>\\<rho>) (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)\""], ["proof (prove)\nusing this:\n  eq\\<rho>\n   (Aheap \\<Gamma> e\\<cdot>a \\<squnion>\n    \\<A>\\<^bsub>a\\<^esub> (Terms.Let \\<Gamma> e))\n   (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n              (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                \\<Gamma>)\\<rbrace>\\<rho>)\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)\n\ngoal (1 subgoal):\n 1. eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e)\n     (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n                (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                  \\<Gamma>)\\<rbrace>\\<rho>)\n     (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)", "by (rule eq\\<rho>_mono[OF Aexp_body_below_Aheap])"], ["proof (state)\nthis:\n  eq\\<rho> (\\<A>\\<^bsub>a\\<^esub> e)\n   (\\<lbrace>map_transform Aeta_expand (Aheap \\<Gamma> e\\<cdot>a)\n              (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n                \\<Gamma>)\\<rbrace>\\<rho>)\n   (\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n     (Aheap \\<Gamma> e\\<cdot>a)\n     (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n       \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "also"], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>map_transform Aeta_expand\n     (Aheap \\<Gamma> e\\<cdot>a)\n     (map_transform transform_syn (Aheap \\<Gamma> e\\<cdot>a)\n       \\<Gamma>)\\<rbrace>\\<rho>\\<^esub>)\n   (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "have \"\\<dots> = \\<lbrakk> Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> =\n    \\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<lbrace>\\<Gamma>\\<rbrace>\\<rho>\\<^esub> =\n  \\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\n\ngoal (1 subgoal):\n 1. \\<And>a \\<Gamma> e \\<rho>.\n       \\<lbrakk>\\<And>x ea aa \\<rho>.\n                   (x, ea) \\<in> set \\<Gamma> \\<Longrightarrow>\n                   eq aa\n                    (\\<lbrakk> \\<T>\\<^bsub>aa\\<^esub>\n                                ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                    (\\<lbrakk> ea \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>);\n        \\<And>\\<rho>.\n           eq (fst (a, Aheap \\<Gamma> e\\<cdot>a))\n            (\\<lbrakk> \\<T>\\<^bsub>fst (a, Aheap \\<Gamma> e\\<cdot>a)\\<^esub>\n                        e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n            (\\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\\<rbrakk>\n       \\<Longrightarrow> eq a\n                          (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n(Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n                          (\\<lbrakk> Terms.Let \\<Gamma>\ne \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "finally"], ["proof (chain)\npicking this:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "show ?case"], ["proof (prove)\nusing this:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. eq a\n     (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n                 (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n     (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)", "."], ["proof (state)\nthis:\n  eq a\n   (\\<lbrakk> \\<T>\\<^bsub>a\\<^esub>\n               (Terms.Let \\<Gamma> e) \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n   (\\<lbrakk> Terms.Let \\<Gamma> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>)\n\ngoal:\nNo subgoals!", "qed"], ["", "corollary Arity_transformation_correct':\n  \"\\<lbrakk> \\<T>\\<^bsub>0\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> = \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk> \\<T>\\<^bsub>0\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "using Arity_transformation_correct[where a = 0]"], ["proof (prove)\nusing this:\n  eq 0 (\\<lbrakk> \\<T>\\<^bsub>0\\<^esub> ?e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n   (\\<lbrakk> ?e \\<rbrakk>\\<^bsub>?\\<rho>\\<^esub>)\n\ngoal (1 subgoal):\n 1. \\<lbrakk> \\<T>\\<^bsub>0\\<^esub> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub> =\n    \\<lbrakk> e \\<rbrakk>\\<^bsub>\\<rho>\\<^esub>", "by simp"], ["", "end"], ["", "end"]]}