{"file_name": "/home/qj213/afp-2021-10-22/thys/Linear_Inequalities/Missing_Matrix.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Linear_Inequalities", "problem_names": ["lemma orthogonalD': assumes \"orthogonal vs\"\n  and \"v \\<in> set vs\" and \"w \\<in> set vs\"\nshows \"(v \\<bullet> w = 0) = (v \\<noteq> w)\"", "lemma zero_mat_mult_vector[simp]: \"x \\<in> carrier_vec nc \\<Longrightarrow> 0\\<^sub>m nr nc *\\<^sub>v x = 0\\<^sub>v nr\"", "lemma add_diff_cancel_right_vec:\n  \"a \\<in> carrier_vec n \\<Longrightarrow> (b :: 'a :: cancel_ab_semigroup_add vec) \\<in> carrier_vec n \\<Longrightarrow>\n    (a + b) - b = a\"", "lemma elements_four_block_mat_id:\n  assumes c: \"A \\<in> carrier_mat nr1 nc1\" \"B \\<in> carrier_mat nr1 nc2\"\n    \"C \\<in> carrier_mat nr2 nc1\" \"D \\<in> carrier_mat nr2 nc2\"\n  shows\n    \"elements_mat (four_block_mat A B C D) =\n   elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union> elements_mat D\"\n    (is \"elements_mat ?four = ?X\")", "lemma elements_mat_append_rows: \"A \\<in> carrier_mat nr n \\<Longrightarrow> B \\<in> carrier_mat nr2 n \\<Longrightarrow>\n  elements_mat (A @\\<^sub>r B) = elements_mat A \\<union> elements_mat B\"", "lemma elements_mat_uminus[simp]: \"elements_mat (-A) = uminus ` elements_mat A\"", "lemma vec_set_uminus[simp]: \"vec_set (-A) = uminus ` vec_set A\"", "lemma carrier_append_cols[simp, intro]:\n  \"A \\<in> carrier_mat nr nc1 \\<Longrightarrow>\n   B \\<in> carrier_mat nr nc2 \\<Longrightarrow> (A @\\<^sub>c B) \\<in> carrier_mat nr (nc1 + nc2)\"", "lemma elements_mat_transpose_mat[simp]: \"elements_mat (A\\<^sup>T) = elements_mat A\"", "lemma elements_mat_append_cols: \"A \\<in> carrier_mat n nc \\<Longrightarrow> B \\<in> carrier_mat n nc1\n  \\<Longrightarrow> elements_mat (A @\\<^sub>c B) = elements_mat A \\<union> elements_mat B\"", "lemma vec_first_index:\n  assumes v: \"dim_vec v \\<ge> n\"\n    and i: \"i < n\"\n  shows \"(vec_first v n) $ i = v $ i\"", "lemma vec_last_index:\n  assumes v: \"v \\<in> carrier_vec (n + m)\"\n    and i: \"i < m\"\n  shows \"(vec_last v m) $ i = v $ (n + i)\"", "lemma vec_first_add:\n  assumes \"dim_vec x \\<ge> n\"\n    and \"dim_vec y \\<ge> n\"\n  shows\"vec_first (x + y) n = vec_first x n + vec_first y n\"", "lemma vec_first_zero[simp]: \"m \\<le> n \\<Longrightarrow> vec_first (0\\<^sub>v n) m = 0\\<^sub>v m\"", "lemma vec_first_smult:\n  \"\\<lbrakk> m \\<le> n; x \\<in> carrier_vec n \\<rbrakk> \\<Longrightarrow> vec_first (c \\<cdot>\\<^sub>v x) m = c \\<cdot>\\<^sub>v vec_first x m\"", "lemma elements_mat_mat_of_row[simp]: \"elements_mat (mat_of_row v) = vec_set v\"", "lemma vec_set_append_vec[simp]: \"vec_set (v @\\<^sub>v w) = vec_set v \\<union> vec_set w\"", "lemma vec_set_vNil[simp]: \"set\\<^sub>v vNil = {}\"", "lemma diff_smult_distrib_vec: \"((x :: 'a::ring) - y) \\<cdot>\\<^sub>v v = x \\<cdot>\\<^sub>v v - y \\<cdot>\\<^sub>v v\"", "lemma add_diff_eq_vec: fixes y :: \"'a :: group_add vec\"\n  shows \"y \\<in> carrier_vec n \\<Longrightarrow> x \\<in> carrier_vec n \\<Longrightarrow> z \\<in> carrier_vec n \\<Longrightarrow> y + (x - z) = y + x - z\"", "lemma elements_mat_mat_of_col[simp]: \"elements_mat (mat_of_col v) = vec_set v\"", "lemma mat_of_col_dim[simp]: \"dim_row (mat_of_col v) = dim_vec v\"\n  \"dim_col (mat_of_col v) = 1\"\n  \"mat_of_col v \\<in> carrier_mat (dim_vec v) 1\"", "lemma col_mat_of_col[simp]: \"col (mat_of_col v) 0 = v\"", "lemma mult_mat_of_col: \"A \\<in> carrier_mat nr nc \\<Longrightarrow> v \\<in> carrier_vec nc \\<Longrightarrow>\n                        A * mat_of_col v = mat_of_col (A *\\<^sub>v v)\"", "lemma mat_mult_append_cols: fixes A :: \"'a :: comm_semiring_0 mat\"\n  assumes A: \"A \\<in> carrier_mat nr nc1\"\n    and B: \"B \\<in> carrier_mat nr nc2\"\n    and v1: \"v1 \\<in> carrier_vec nc1\"\n    and v2: \"v2 \\<in> carrier_vec nc2\"\n  shows \"(A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) = A *\\<^sub>v v1 + B *\\<^sub>v v2\"", "lemma vec_first_append:\n  assumes \"v \\<in> carrier_vec n\"\n  shows \"vec_first (v @\\<^sub>v w) n = v\"", "lemma vec_le_iff_diff_le_0: fixes a :: \"'a :: ordered_ab_group_add vec\"\n  shows \"(a \\<le> b) = (a - b \\<le> 0\\<^sub>v (dim_vec a))\"", "lemma mat_row_first_carrier[simp]: \"mat_row_first A n \\<in> carrier_mat n (dim_col A)\"", "lemma mat_row_first_dim[simp]:\n  \"dim_row (mat_row_first A n) = n\"\n  \"dim_col (mat_row_first A n) = dim_col A\"", "lemma mat_row_last_carrier[simp]: \"mat_row_last A n \\<in> carrier_mat n (dim_col A)\"", "lemma mat_row_last_dim[simp]:\n  \"dim_row (mat_row_last A n) = n\"\n  \"dim_col (mat_row_last A n) = dim_col A\"", "lemma mat_row_first_nth[simp]: \"i < n \\<Longrightarrow> row (mat_row_first A n) i = row A i\"", "lemma append_rows_nth:\n  assumes \"A \\<in> carrier_mat nr1 nc\"\n    and \"B \\<in> carrier_mat nr2 nc\"\n  shows \"i < nr1 \\<Longrightarrow> row (A @\\<^sub>r B) i = row A i\"\n    and \"\\<lbrakk> i \\<ge> nr1; i < nr1 + nr2 \\<rbrakk> \\<Longrightarrow> row (A @\\<^sub>r B) i = row B (i - nr1)\"", "lemma mat_of_row_last_nth[simp]:\n  \"i < n \\<Longrightarrow> row (mat_row_last A n) i = row A (dim_row A - n + i)\"", "lemma mat_row_first_last_append:\n  assumes \"dim_row A = m + n\"\n  shows \"(mat_row_first A m) @\\<^sub>r (mat_row_last A n) = A\"", "lemma mat_col_first_carrier[simp]: \"mat_col_first A n \\<in> carrier_mat (dim_row A) n\"", "lemma mat_col_first_dim[simp]:\n  \"dim_row (mat_col_first A n) = dim_row A\"\n  \"dim_col (mat_col_first A n) = n\"", "lemma mat_col_last_carrier[simp]: \"mat_col_last A n \\<in> carrier_mat (dim_row A) n\"", "lemma mat_col_last_dim[simp]:\n  \"dim_row (mat_col_last A n) = dim_row A\"\n  \"dim_col (mat_col_last A n) = n\"", "lemma mat_col_first_nth[simp]:\n  \"\\<lbrakk> i < n; i < dim_col A \\<rbrakk> \\<Longrightarrow> col (mat_col_first A n) i = col A i\"", "lemma append_cols_nth:\n  assumes \"A \\<in> carrier_mat nr nc1\"\n    and \"B \\<in> carrier_mat nr nc2\"\n  shows \"i < nc1 \\<Longrightarrow> col (A @\\<^sub>c B) i = col A i\"\n    and \"\\<lbrakk> i \\<ge> nc1; i < nc1 + nc2 \\<rbrakk> \\<Longrightarrow> col (A @\\<^sub>c B) i = col B (i - nc1)\"", "lemma mat_of_col_last_nth[simp]:\n  \"\\<lbrakk> i < n; i < dim_col A \\<rbrakk> \\<Longrightarrow> col (mat_col_last A n) i = col A (dim_col A - n + i)\"", "lemma mat_col_first_last_append:\n  assumes \"dim_col A = m + n\"\n  shows \"(mat_col_first A m) @\\<^sub>c (mat_col_last A n) = A\"", "lemma mat_of_row_dim_row_1: \"(dim_row A = 1) = (A = mat_of_row (row A 0))\"", "lemma mat_of_col_dim_col_1: \"(dim_col A = 1) = (A = mat_of_col (col A 0))\"", "lemma vec_of_scal_dim[simp]:\n  \"dim_vec (vec_of_scal x) = 1\"\n  \"vec_of_scal x \\<in> carrier_vec 1\"", "lemma index_vec_of_scal[simp]: \"(vec_of_scal x) $ 0 = x\"", "lemma row_mat_of_col[simp]: \"i < dim_vec v \\<Longrightarrow> row (mat_of_col v) i = vec_of_scal (v $ i)\"", "lemma vec_of_scal_dim_1: \"(v \\<in> carrier_vec 1) = (v = vec_of_scal (v $ 0))\"", "lemma mult_mat_of_row_vec_of_scal: fixes x :: \"'a :: comm_ring_1\"\n  shows \"mat_of_col v *\\<^sub>v vec_of_scal x = x \\<cdot>\\<^sub>v v\"", "lemma smult_pos_vec[simp]: fixes l :: \"'a :: linordered_ring_strict\"\n  assumes l: \"l > 0\"\n  shows \"(l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\"", "lemma finite_elements_mat[simp]: \"finite (elements_mat A)\"", "lemma finite_vec_set[simp]: \"finite (vec_set A)\"", "lemma lesseq_vecI: assumes \"v \\<in> carrier_vec n\" \"w \\<in> carrier_vec n\"\n  \"\\<And> i. i < n \\<Longrightarrow> v $ i \\<le> w $ i\"\nshows \"v \\<le> w\"", "lemma lesseq_vecD: assumes \"w \\<in> carrier_vec n\"\n  and \"v \\<le> w\"\n  and \"i < n\"\nshows \"v $ i \\<le> w $ i\"", "lemma vec_add_mono: fixes a :: \"'a :: ordered_ab_semigroup_add vec\"\n  assumes dim: \"dim_vec b = dim_vec d\"\n    and ab: \"a \\<le> b\"\n    and cd: \"c \\<le> d\"\n  shows \"a + c \\<le> b + d\"", "lemma smult_nneg_npos_vec: fixes l :: \"'a :: ordered_semiring_0\"\n  assumes l: \"l \\<ge> 0\"\n    and v: \"v \\<le> 0\\<^sub>v n\"\n  shows \"l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n\"", "lemma smult_vec_nonneg_eq: fixes c :: \"'a :: field\" \n  shows \"c \\<noteq> 0 \\<Longrightarrow> (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)\"", "lemma distinct_smult_nonneg: fixes c :: \"'a :: field\"\n  assumes c: \"c \\<noteq> 0\"\n  shows \"distinct lC \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) lC)\"", "lemma exists_vec_append: \"(\\<exists> x \\<in> carrier_vec (n + m). P x) \\<longleftrightarrow> (\\<exists> x1 \\<in> carrier_vec n. \\<exists> x2 \\<in> carrier_vec m. P (x1 @\\<^sub>v x2))\""], "translations": [["", "lemma orthogonalD': assumes \"orthogonal vs\"\n  and \"v \\<in> set vs\" and \"w \\<in> set vs\"\nshows \"(v \\<bullet> w = 0) = (v \\<noteq> w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "from assms(2)"], ["proof (chain)\npicking this:\n  v \\<in> set vs", "obtain i where v: \"v = vs ! i\" and i: \"i < length vs\""], ["proof (prove)\nusing this:\n  v \\<in> set vs\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>v = vs ! i; i < length vs\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: set_conv_nth)"], ["proof (state)\nthis:\n  v = vs ! i\n  i < length vs\n\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "from assms(3)"], ["proof (chain)\npicking this:\n  w \\<in> set vs", "obtain j where w: \"w = vs ! j\" and j: \"j < length vs\""], ["proof (prove)\nusing this:\n  w \\<in> set vs\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        \\<lbrakk>w = vs ! j; j < length vs\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: set_conv_nth)"], ["proof (state)\nthis:\n  w = vs ! j\n  j < length vs\n\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "from orthogonalD[OF assms(1) i j, folded v w] orthogonalD[OF assms(1) i i, folded v v]"], ["proof (chain)\npicking this:\n  (v \\<bullet> w = (0::'a)) = (i \\<noteq> j)\n  (v \\<bullet> v = (0::'a)) = (i \\<noteq> i)", "show ?thesis"], ["proof (prove)\nusing this:\n  (v \\<bullet> w = (0::'a)) = (i \\<noteq> j)\n  (v \\<bullet> v = (0::'a)) = (i \\<noteq> i)\n\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "using v w"], ["proof (prove)\nusing this:\n  (v \\<bullet> w = (0::'a)) = (i \\<noteq> j)\n  (v \\<bullet> v = (0::'a)) = (i \\<noteq> i)\n  v = vs ! i\n  w = vs ! j\n\ngoal (1 subgoal):\n 1. (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)", "by auto"], ["proof (state)\nthis:\n  (v \\<bullet> w = (0::'a)) = (v \\<noteq> w)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma zero_mat_mult_vector[simp]: \"x \\<in> carrier_vec nc \\<Longrightarrow> 0\\<^sub>m nr nc *\\<^sub>v x = 0\\<^sub>v nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec nc \\<Longrightarrow>\n    0\\<^sub>m nr nc *\\<^sub>v x = 0\\<^sub>v nr", "by (intro eq_vecI, auto)"], ["", "lemma add_diff_cancel_right_vec:\n  \"a \\<in> carrier_vec n \\<Longrightarrow> (b :: 'a :: cancel_ab_semigroup_add vec) \\<in> carrier_vec n \\<Longrightarrow>\n    (a + b) - b = a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<in> carrier_vec n; b \\<in> carrier_vec n\\<rbrakk>\n    \\<Longrightarrow> a + b - b = a", "by (intro eq_vecI, auto)"], ["", "lemma elements_four_block_mat_id:\n  assumes c: \"A \\<in> carrier_mat nr1 nc1\" \"B \\<in> carrier_mat nr1 nc2\"\n    \"C \\<in> carrier_mat nr2 nc1\" \"D \\<in> carrier_mat nr2 nc2\"\n  shows\n    \"elements_mat (four_block_mat A B C D) =\n   elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union> elements_mat D\"\n    (is \"elements_mat ?four = ?X\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (four_block_mat A B C D) =\n    elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. elements_mat (four_block_mat A B C D)\n    \\<subseteq> elements_mat A \\<union> elements_mat B \\<union>\n                elements_mat C \\<union>\n                elements_mat D\n 2. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "show \"elements_mat ?four \\<subseteq> ?X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (four_block_mat A B C D)\n    \\<subseteq> elements_mat A \\<union> elements_mat B \\<union>\n                elements_mat C \\<union>\n                elements_mat D", "by (rule elements_four_block_mat[OF c])"], ["proof (state)\nthis:\n  elements_mat (four_block_mat A B C D)\n  \\<subseteq> elements_mat A \\<union> elements_mat B \\<union>\n              elements_mat C \\<union>\n              elements_mat D\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "have 4: \"?four \\<in> carrier_mat (nr1 + nr2) (nc1 + nc2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. four_block_mat A B C D \\<in> carrier_mat (nr1 + nr2) (nc1 + nc2)", "using c"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. four_block_mat A B C D \\<in> carrier_mat (nr1 + nr2) (nc1 + nc2)", "by auto"], ["proof (state)\nthis:\n  four_block_mat A B C D \\<in> carrier_mat (nr1 + nr2) (nc1 + nc2)\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "{"], ["proof (state)\nthis:\n  four_block_mat A B C D \\<in> carrier_mat (nr1 + nr2) (nc1 + nc2)\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "assume \"x \\<in> ?X\""], ["proof (state)\nthis:\n  x \\<in> elements_mat A \\<union> elements_mat B \\<union>\n          elements_mat C \\<union>\n          elements_mat D\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "then"], ["proof (chain)\npicking this:\n  x \\<in> elements_mat A \\<union> elements_mat B \\<union>\n          elements_mat C \\<union>\n          elements_mat D", "consider (A) \"x \\<in> elements_mat A\"\n      | (B) \"x \\<in> elements_mat B\"\n      | (C) \"x \\<in> elements_mat C\"\n      | (D) \"x \\<in> elements_mat D\""], ["proof (prove)\nusing this:\n  x \\<in> elements_mat A \\<union> elements_mat B \\<union>\n          elements_mat C \\<union>\n          elements_mat D\n\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> elements_mat A \\<Longrightarrow> thesis;\n     x \\<in> elements_mat B \\<Longrightarrow> thesis;\n     x \\<in> elements_mat C \\<Longrightarrow> thesis;\n     x \\<in> elements_mat D \\<Longrightarrow> thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<in> elements_mat A \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat B \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat C \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat D \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "hence \"x \\<in> elements_mat ?four\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<in> elements_mat A \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat B \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat C \\<Longrightarrow> ?thesis;\n   x \\<in> elements_mat D \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat (four_block_mat A B C D)", "proof (cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. x \\<in> elements_mat A \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 4. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "case A"], ["proof (state)\nthis:\n  x \\<in> elements_mat A\n\ngoal (4 subgoals):\n 1. x \\<in> elements_mat A \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 4. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matD[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>i j. i < dim_row A \\<and> j < dim_col A \\<and> x = A $$ (i, j)", "obtain i j\n        where *: \"i < nr1\" \"j < nc1\" and x: \"x = A $$ (i,j)\""], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row A \\<and> j < dim_col A \\<and> x = A $$ (i, j)\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr1; j < nc1; x = A $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using c"], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row A \\<and> j < dim_col A \\<and> x = A $$ (i, j)\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr1; j < nc1; x = A $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < nr1\n  j < nc1\n  x = A $$ (i, j)\n\ngoal (4 subgoals):\n 1. x \\<in> elements_mat A \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 4. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matI[OF 4, of i j x] * c"], ["proof (chain)\npicking this:\n  \\<lbrakk>i < nr1 + nr2; j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (i, j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>i < nr1 + nr2; j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (i, j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat (four_block_mat A B C D)", "unfolding x"], ["proof (prove)\nusing this:\n  \\<lbrakk>i < nr1 + nr2; j < nc1 + nc2;\n   A $$ (i, j) = four_block_mat A B C D $$ (i, j)\\<rbrakk>\n  \\<Longrightarrow> A $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. A $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)", "by auto"], ["proof (state)\nthis:\n  x \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (3 subgoals):\n 1. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "case B"], ["proof (state)\nthis:\n  x \\<in> elements_mat B\n\ngoal (3 subgoals):\n 1. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matD[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>i j. i < dim_row B \\<and> j < dim_col B \\<and> x = B $$ (i, j)", "obtain i j\n        where *: \"i < nr1\" \"j < nc2\" and x: \"x = B $$ (i,j)\""], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row B \\<and> j < dim_col B \\<and> x = B $$ (i, j)\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr1; j < nc2; x = B $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using c"], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row B \\<and> j < dim_col B \\<and> x = B $$ (i, j)\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr1; j < nc2; x = B $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < nr1\n  j < nc2\n  x = B $$ (i, j)\n\ngoal (3 subgoals):\n 1. x \\<in> elements_mat B \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 3. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matI[OF 4, of i \"nc1 + j\" x] * c"], ["proof (chain)\npicking this:\n  \\<lbrakk>i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat (four_block_mat A B C D)", "unfolding x"], ["proof (prove)\nusing this:\n  \\<lbrakk>i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   B $$ (i, j) = four_block_mat A B C D $$ (i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> B $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)\n  i < nr1\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. B $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)", "by auto"], ["proof (state)\nthis:\n  x \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (2 subgoals):\n 1. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "case C"], ["proof (state)\nthis:\n  x \\<in> elements_mat C\n\ngoal (2 subgoals):\n 1. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matD[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>i j. i < dim_row C \\<and> j < dim_col C \\<and> x = C $$ (i, j)", "obtain i j\n        where *: \"i < nr2\" \"j < nc1\" and x: \"x = C $$ (i,j)\""], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row C \\<and> j < dim_col C \\<and> x = C $$ (i, j)\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr2; j < nc1; x = C $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using c"], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row C \\<and> j < dim_col C \\<and> x = C $$ (i, j)\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr2; j < nc1; x = C $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < nr2\n  j < nc1\n  x = C $$ (i, j)\n\ngoal (2 subgoals):\n 1. x \\<in> elements_mat C \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)\n 2. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matI[OF 4, of \"nr1 + i\" j x] * c"], ["proof (chain)\npicking this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (nr1 + i, j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (nr1 + i, j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat (four_block_mat A B C D)", "unfolding x"], ["proof (prove)\nusing this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; j < nc1 + nc2;\n   C $$ (i, j) = four_block_mat A B C D $$ (nr1 + i, j)\\<rbrakk>\n  \\<Longrightarrow> C $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc1\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. C $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)", "by auto"], ["proof (state)\nthis:\n  x \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "case D"], ["proof (state)\nthis:\n  x \\<in> elements_mat D\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matD[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>i j. i < dim_row D \\<and> j < dim_col D \\<and> x = D $$ (i, j)", "obtain i j\n        where *: \"i < nr2\" \"j < nc2\" and x: \"x = D $$ (i,j)\""], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row D \\<and> j < dim_col D \\<and> x = D $$ (i, j)\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr2; j < nc2; x = D $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using c"], ["proof (prove)\nusing this:\n  \\<exists>i j. i < dim_row D \\<and> j < dim_col D \\<and> x = D $$ (i, j)\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. (\\<And>i j.\n        \\<lbrakk>i < nr2; j < nc2; x = D $$ (i, j)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < nr2\n  j < nc2\n  x = D $$ (i, j)\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat D \\<Longrightarrow>\n    x \\<in> elements_mat (four_block_mat A B C D)", "from elements_matI[OF 4, of \"nr1 + i\" \"nc1 + j\" x] * c"], ["proof (chain)\npicking this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (nr1 + i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   x = four_block_mat A B C D $$ (nr1 + i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> x \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. x \\<in> elements_mat (four_block_mat A B C D)", "unfolding x"], ["proof (prove)\nusing this:\n  \\<lbrakk>nr1 + i < nr1 + nr2; nc1 + j < nc1 + nc2;\n   D $$ (i, j) = four_block_mat A B C D $$ (nr1 + i, nc1 + j)\\<rbrakk>\n  \\<Longrightarrow> D $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)\n  i < nr2\n  j < nc2\n  A \\<in> carrier_mat nr1 nc1\n  B \\<in> carrier_mat nr1 nc2\n  C \\<in> carrier_mat nr2 nc1\n  D \\<in> carrier_mat nr2 nc2\n\ngoal (1 subgoal):\n 1. D $$ (i, j) \\<in> elements_mat (four_block_mat A B C D)", "by auto"], ["proof (state)\nthis:\n  x \\<in> elements_mat (four_block_mat A B C D)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "}"], ["proof (state)\nthis:\n  ?x2\n  \\<in> elements_mat A \\<union> elements_mat B \\<union>\n        elements_mat C \\<union>\n        elements_mat D \\<Longrightarrow>\n  ?x2 \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "thus \"elements_mat ?four \\<supseteq> ?X\""], ["proof (prove)\nusing this:\n  ?x2\n  \\<in> elements_mat A \\<union> elements_mat B \\<union>\n        elements_mat C \\<union>\n        elements_mat D \\<Longrightarrow>\n  ?x2 \\<in> elements_mat (four_block_mat A B C D)\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n    elements_mat D\n    \\<subseteq> elements_mat (four_block_mat A B C D)", "by blast"], ["proof (state)\nthis:\n  elements_mat A \\<union> elements_mat B \\<union> elements_mat C \\<union>\n  elements_mat D\n  \\<subseteq> elements_mat (four_block_mat A B C D)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma elements_mat_append_rows: \"A \\<in> carrier_mat nr n \\<Longrightarrow> B \\<in> carrier_mat nr2 n \\<Longrightarrow>\n  elements_mat (A @\\<^sub>r B) = elements_mat A \\<union> elements_mat B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat nr n; B \\<in> carrier_mat nr2 n\\<rbrakk>\n    \\<Longrightarrow> elements_mat (A @\\<^sub>r B) =\n                      elements_mat A \\<union> elements_mat B", "unfolding append_rows_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat nr n; B \\<in> carrier_mat nr2 n\\<rbrakk>\n    \\<Longrightarrow> elements_mat\n                       (four_block_mat A (0\\<^sub>m (dim_row A) 0) B\n                         (0\\<^sub>m (dim_row B) 0)) =\n                      elements_mat A \\<union> elements_mat B", "by (subst elements_four_block_mat_id, auto)"], ["", "lemma elements_mat_uminus[simp]: \"elements_mat (-A) = uminus ` elements_mat A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (- A) = uminus ` elements_mat A", "unfolding elements_mat_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (concat\n          (map (\\<lambda>i.\n                   map (\\<lambda>j. (- A) $$ (i, j)) [0..<dim_col (- A)])\n            [0..<dim_row (- A)])) =\n    uminus `\n    set (concat\n          (map (\\<lambda>i. map (\\<lambda>j. A $$ (i, j)) [0..<dim_col A])\n            [0..<dim_row A]))", "by auto"], ["", "lemma vec_set_uminus[simp]: \"vec_set (-A) = uminus ` vec_set A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set\\<^sub>v (- A) = uminus ` set\\<^sub>v A", "unfolding vec_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ($) (- A) ` {..<dim_vec (- A)} = uminus ` ($) A ` {..<dim_vec A}", "by auto"], ["", "definition append_cols :: \"'a :: zero mat \\<Rightarrow> 'a mat \\<Rightarrow> 'a mat\"  (infixr \"@\\<^sub>c\" 65) where\n  \"A @\\<^sub>c B = (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\""], ["", "lemma carrier_append_cols[simp, intro]:\n  \"A \\<in> carrier_mat nr nc1 \\<Longrightarrow>\n   B \\<in> carrier_mat nr nc2 \\<Longrightarrow> (A @\\<^sub>c B) \\<in> carrier_mat nr (nc1 + nc2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat nr nc1; B \\<in> carrier_mat nr nc2\\<rbrakk>\n    \\<Longrightarrow> A @\\<^sub>c B \\<in> carrier_mat nr (nc1 + nc2)", "unfolding append_cols_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat nr nc1; B \\<in> carrier_mat nr nc2\\<rbrakk>\n    \\<Longrightarrow> (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\n                      \\<in> carrier_mat nr (nc1 + nc2)", "by auto"], ["", "lemma elements_mat_transpose_mat[simp]: \"elements_mat (A\\<^sup>T) = elements_mat A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat A\\<^sup>T = elements_mat A", "unfolding elements_mat_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. set (concat\n          (map (\\<lambda>i.\n                   map (\\<lambda>j. A\\<^sup>T $$ (i, j))\n                    [0..<dim_col A\\<^sup>T])\n            [0..<dim_row A\\<^sup>T])) =\n    set (concat\n          (map (\\<lambda>i. map (\\<lambda>j. A $$ (i, j)) [0..<dim_col A])\n            [0..<dim_row A]))", "by auto"], ["", "lemma elements_mat_append_cols: \"A \\<in> carrier_mat n nc \\<Longrightarrow> B \\<in> carrier_mat n nc1\n  \\<Longrightarrow> elements_mat (A @\\<^sub>c B) = elements_mat A \\<union> elements_mat B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat n nc; B \\<in> carrier_mat n nc1\\<rbrakk>\n    \\<Longrightarrow> elements_mat (A @\\<^sub>c B) =\n                      elements_mat A \\<union> elements_mat B", "unfolding append_cols_def elements_mat_transpose_mat"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat n nc; B \\<in> carrier_mat n nc1\\<rbrakk>\n    \\<Longrightarrow> elements_mat (A\\<^sup>T @\\<^sub>r B\\<^sup>T) =\n                      elements_mat A \\<union> elements_mat B", "by (subst elements_mat_append_rows, auto)"], ["", "lemma vec_first_index:\n  assumes v: \"dim_vec v \\<ge> n\"\n    and i: \"i < n\"\n  shows \"(vec_first v n) $ i = v $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first v n $ i = v $ i", "unfolding vec_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec n (($) v) $ i = v $ i", "using assms"], ["proof (prove)\nusing this:\n  n \\<le> dim_vec v\n  i < n\n\ngoal (1 subgoal):\n 1. vec n (($) v) $ i = v $ i", "by simp"], ["", "lemma vec_last_index:\n  assumes v: \"v \\<in> carrier_vec (n + m)\"\n    and i: \"i < m\"\n  shows \"(vec_last v m) $ i = v $ (n + i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last v m $ i = v $ (n + i)", "unfolding vec_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec m (\\<lambda>i. v $ (dim_vec v - m + i)) $ i = v $ (n + i)", "using assms"], ["proof (prove)\nusing this:\n  v \\<in> carrier_vec (n + m)\n  i < m\n\ngoal (1 subgoal):\n 1. vec m (\\<lambda>i. v $ (dim_vec v - m + i)) $ i = v $ (n + i)", "by simp"], ["", "lemma vec_first_add:\n  assumes \"dim_vec x \\<ge> n\"\n    and \"dim_vec y \\<ge> n\"\n  shows\"vec_first (x + y) n = vec_first x n + vec_first y n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (x + y) n = vec_first x n + vec_first y n", "unfolding vec_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec n (($) (x + y)) = vec n (($) x) + vec n (($) y)", "using assms"], ["proof (prove)\nusing this:\n  n \\<le> dim_vec x\n  n \\<le> dim_vec y\n\ngoal (1 subgoal):\n 1. vec n (($) (x + y)) = vec n (($) x) + vec n (($) y)", "by auto"], ["", "lemma vec_first_zero[simp]: \"m \\<le> n \\<Longrightarrow> vec_first (0\\<^sub>v n) m = 0\\<^sub>v m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m \\<le> n \\<Longrightarrow> vec_first (0\\<^sub>v n) m = 0\\<^sub>v m", "unfolding vec_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. m \\<le> n \\<Longrightarrow> vec m (($) (0\\<^sub>v n)) = 0\\<^sub>v m", "by auto"], ["", "lemma vec_first_smult:\n  \"\\<lbrakk> m \\<le> n; x \\<in> carrier_vec n \\<rbrakk> \\<Longrightarrow> vec_first (c \\<cdot>\\<^sub>v x) m = c \\<cdot>\\<^sub>v vec_first x m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>m \\<le> n; x \\<in> carrier_vec n\\<rbrakk>\n    \\<Longrightarrow> vec_first (c \\<cdot>\\<^sub>v x) m =\n                      c \\<cdot>\\<^sub>v vec_first x m", "unfolding vec_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>m \\<le> n; x \\<in> carrier_vec n\\<rbrakk>\n    \\<Longrightarrow> vec m (($) (c \\<cdot>\\<^sub>v x)) =\n                      c \\<cdot>\\<^sub>v vec m (($) x)", "by auto"], ["", "lemma elements_mat_mat_of_row[simp]: \"elements_mat (mat_of_row v) = vec_set v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (mat_of_row v) = set\\<^sub>v v", "by (auto simp: mat_of_row_def elements_mat_def vec_set_def)"], ["", "lemma vec_set_append_vec[simp]: \"vec_set (v @\\<^sub>v w) = vec_set v \\<union> vec_set w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set\\<^sub>v (v @\\<^sub>v w) = set\\<^sub>v v \\<union> set\\<^sub>v w", "by (metis list_of_vec_append set_append set_list_of_vec)"], ["", "lemma vec_set_vNil[simp]: \"set\\<^sub>v vNil = {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set\\<^sub>v vNil = {}", "using set_list_of_vec"], ["proof (prove)\nusing this:\n  set (list_of_vec ?v) = set\\<^sub>v ?v\n\ngoal (1 subgoal):\n 1. set\\<^sub>v vNil = {}", "by force"], ["", "lemma diff_smult_distrib_vec: \"((x :: 'a::ring) - y) \\<cdot>\\<^sub>v v = x \\<cdot>\\<^sub>v v - y \\<cdot>\\<^sub>v v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x - y) \\<cdot>\\<^sub>v v = x \\<cdot>\\<^sub>v v - y \\<cdot>\\<^sub>v v", "unfolding smult_vec_def minus_vec_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec (dim_vec v) (\\<lambda>i. (x - y) * v $ i) =\n    vec (dim_vec (vec (dim_vec v) (\\<lambda>i. y * v $ i)))\n     (\\<lambda>i.\n         vec (dim_vec v) (\\<lambda>i. x * v $ i) $ i -\n         vec (dim_vec v) (\\<lambda>i. y * v $ i) $ i)", "by (rule eq_vecI, auto simp: left_diff_distrib)"], ["", "lemma add_diff_eq_vec: fixes y :: \"'a :: group_add vec\"\n  shows \"y \\<in> carrier_vec n \\<Longrightarrow> x \\<in> carrier_vec n \\<Longrightarrow> z \\<in> carrier_vec n \\<Longrightarrow> y + (x - z) = y + x - z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>y \\<in> carrier_vec n; x \\<in> carrier_vec n;\n     z \\<in> carrier_vec n\\<rbrakk>\n    \\<Longrightarrow> y + (x - z) = y + x - z", "by (intro eq_vecI, auto simp: add_diff_eq)"], ["", "definition \"mat_of_col v = (mat_of_row v)\\<^sup>T\""], ["", "lemma elements_mat_mat_of_col[simp]: \"elements_mat (mat_of_col v) = vec_set v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (mat_of_col v) = set\\<^sub>v v", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (mat_of_row v)\\<^sup>T = set\\<^sub>v v", "by auto"], ["", "lemma mat_of_col_dim[simp]: \"dim_row (mat_of_col v) = dim_vec v\"\n  \"dim_col (mat_of_col v) = 1\"\n  \"mat_of_col v \\<in> carrier_mat (dim_vec v) 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_of_col v) = dim_vec v &&&\n    dim_col (mat_of_col v) = 1 &&&\n    mat_of_col v \\<in> carrier_mat (dim_vec v) 1", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_of_row v)\\<^sup>T = dim_vec v &&&\n    dim_col (mat_of_row v)\\<^sup>T = 1 &&&\n    (mat_of_row v)\\<^sup>T \\<in> carrier_mat (dim_vec v) 1", "by auto"], ["", "lemma col_mat_of_col[simp]: \"col (mat_of_col v) 0 = v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. col (mat_of_col v) 0 = v", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. col (mat_of_row v)\\<^sup>T 0 = v", "by auto"], ["", "lemma mult_mat_of_col: \"A \\<in> carrier_mat nr nc \\<Longrightarrow> v \\<in> carrier_vec nc \\<Longrightarrow>\n                        A * mat_of_col v = mat_of_col (A *\\<^sub>v v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> carrier_mat nr nc; v \\<in> carrier_vec nc\\<rbrakk>\n    \\<Longrightarrow> A * mat_of_col v = mat_of_col (A *\\<^sub>v v)", "by (intro mat_col_eqI, auto)"], ["", "lemma mat_mult_append_cols: fixes A :: \"'a :: comm_semiring_0 mat\"\n  assumes A: \"A \\<in> carrier_mat nr nc1\"\n    and B: \"B \\<in> carrier_mat nr nc2\"\n    and v1: \"v1 \\<in> carrier_vec nc1\"\n    and v2: \"v2 \\<in> carrier_vec nc2\"\n  shows \"(A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) = A *\\<^sub>v v1 + B *\\<^sub>v v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"(A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) = (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0", "by auto"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n  (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n  (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots> = col ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2)) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0 =\n    col ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2)) 0", "by auto"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0 =\n  col ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) *\\<^sub>v col (mat_of_col (v1 @\\<^sub>v v2)) 0 =\n  col ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"(A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2) = ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2) =\n    ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T", "by auto"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2) =\n  ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2) =\n  ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T =\n             (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T * (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T =\n    (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n    (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T", "unfolding append_cols_def mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T *\n     (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T)\\<^sup>T =\n    (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n    (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T", "proof (rule transpose_mult, force, unfold transpose_carrier_mat, rule mat_of_row_carrier)"], ["proof (state)\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "have \"A\\<^sup>T \\<in> carrier_mat nc1 nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sup>T \\<in> carrier_mat nc1 nr", "using A"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc1\n\ngoal (1 subgoal):\n 1. A\\<^sup>T \\<in> carrier_mat nc1 nr", "by auto"], ["proof (state)\nthis:\n  A\\<^sup>T \\<in> carrier_mat nc1 nr\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "moreover"], ["proof (state)\nthis:\n  A\\<^sup>T \\<in> carrier_mat nc1 nr\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "have \"B\\<^sup>T \\<in> carrier_mat nc2 nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B\\<^sup>T \\<in> carrier_mat nc2 nr", "using B"], ["proof (prove)\nusing this:\n  B \\<in> carrier_mat nr nc2\n\ngoal (1 subgoal):\n 1. B\\<^sup>T \\<in> carrier_mat nc2 nr", "by auto"], ["proof (state)\nthis:\n  B\\<^sup>T \\<in> carrier_mat nc2 nr\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "ultimately"], ["proof (chain)\npicking this:\n  A\\<^sup>T \\<in> carrier_mat nc1 nr\n  B\\<^sup>T \\<in> carrier_mat nc2 nr", "have \"A\\<^sup>T @\\<^sub>r B\\<^sup>T \\<in> carrier_mat (nc1 + nc2) nr\""], ["proof (prove)\nusing this:\n  A\\<^sup>T \\<in> carrier_mat nc1 nr\n  B\\<^sup>T \\<in> carrier_mat nc2 nr\n\ngoal (1 subgoal):\n 1. A\\<^sup>T @\\<^sub>r B\\<^sup>T \\<in> carrier_mat (nc1 + nc2) nr", "by auto"], ["proof (state)\nthis:\n  A\\<^sup>T @\\<^sub>r B\\<^sup>T \\<in> carrier_mat (nc1 + nc2) nr\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "hence \"dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T) = nc1 + nc2\""], ["proof (prove)\nusing this:\n  A\\<^sup>T @\\<^sub>r B\\<^sup>T \\<in> carrier_mat (nc1 + nc2) nr\n\ngoal (1 subgoal):\n 1. dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T) = nc1 + nc2", "by auto"], ["proof (state)\nthis:\n  dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T) = nc1 + nc2\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "thus \"v1 @\\<^sub>v v2 \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))\""], ["proof (prove)\nusing this:\n  dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T) = nc1 + nc2\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "using v1 v2"], ["proof (prove)\nusing this:\n  dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T) = nc1 + nc2\n  v1 \\<in> carrier_vec nc1\n  v2 \\<in> carrier_vec nc2\n\ngoal (1 subgoal):\n 1. v1 @\\<^sub>v v2\n    \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))", "by auto"], ["proof (state)\nthis:\n  v1 @\\<^sub>v v2\n  \\<in> carrier_vec (dim_row (A\\<^sup>T @\\<^sub>r B\\<^sup>T))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T =\n  (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n  (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  ((A @\\<^sub>c B) * mat_of_col (v1 @\\<^sub>v v2))\\<^sup>T =\n  (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n  (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots> = (mat_of_row (v1 @\\<^sub>v v2)) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n    (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T =\n    mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T)", "by auto"], ["proof (state)\nthis:\n  (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n  (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T =\n  mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (mat_of_row (v1 @\\<^sub>v v2))\\<^sup>T\\<^sup>T *\n  (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\\<^sup>T\\<^sup>T =\n  mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T)\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots> = mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T) =\n    mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T", "using mat_of_row_mult_append_rows[OF v1 v2] A B"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A1.0 \\<in> carrier_mat nc1 ?nc;\n   ?A2.0 \\<in> carrier_mat nc2 ?nc\\<rbrakk>\n  \\<Longrightarrow> mat_of_row (v1 @\\<^sub>v v2) * (?A1.0 @\\<^sub>r ?A2.0) =\n                    mat_of_row v1 * ?A1.0 + mat_of_row v2 * ?A2.0\n  A \\<in> carrier_mat nr nc1\n  B \\<in> carrier_mat nr nc2\n\ngoal (1 subgoal):\n 1. mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T) =\n    mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T", "by auto"], ["proof (state)\nthis:\n  mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T) =\n  mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  mat_of_row (v1 @\\<^sub>v v2) * (A\\<^sup>T @\\<^sub>r B\\<^sup>T) =\n  mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots>\\<^sup>T = (mat_of_row v1 * A\\<^sup>T)\\<^sup>T + (mat_of_row v2 * B\\<^sup>T)\\<^sup>T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n    (mat_of_row v1 * A\\<^sup>T)\\<^sup>T +\n    (mat_of_row v2 * B\\<^sup>T)\\<^sup>T", "using transpose_add A B"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?nc;\n   ?B \\<in> carrier_mat ?nr ?nc\\<rbrakk>\n  \\<Longrightarrow> (?A + ?B)\\<^sup>T = ?A\\<^sup>T + ?B\\<^sup>T\n  A \\<in> carrier_mat nr nc1\n  B \\<in> carrier_mat nr nc2\n\ngoal (1 subgoal):\n 1. (mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n    (mat_of_row v1 * A\\<^sup>T)\\<^sup>T +\n    (mat_of_row v2 * B\\<^sup>T)\\<^sup>T", "by auto"], ["proof (state)\nthis:\n  (mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n  (mat_of_row v1 * A\\<^sup>T)\\<^sup>T + (mat_of_row v2 * B\\<^sup>T)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (mat_of_row v1 * A\\<^sup>T + mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n  (mat_of_row v1 * A\\<^sup>T)\\<^sup>T + (mat_of_row v2 * B\\<^sup>T)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"(mat_of_row v1 * A\\<^sup>T)\\<^sup>T = A\\<^sup>T\\<^sup>T * ((mat_of_row v1)\\<^sup>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_of_row v1 * A\\<^sup>T)\\<^sup>T =\n    A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T", "using transpose_mult A v1 transpose_carrier_mat mat_of_row_carrier(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?n; ?B \\<in> carrier_mat ?n ?nc\\<rbrakk>\n  \\<Longrightarrow> (?A * ?B)\\<^sup>T = ?B\\<^sup>T * ?A\\<^sup>T\n  A \\<in> carrier_mat nr nc1\n  v1 \\<in> carrier_vec nc1\n  (?A\\<^sup>T \\<in> carrier_mat ?nc ?nr) = (?A \\<in> carrier_mat ?nr ?nc)\n  ?y \\<in> carrier_vec ?n \\<Longrightarrow>\n  mat_of_row ?y \\<in> carrier_mat 1 ?n\n\ngoal (1 subgoal):\n 1. (mat_of_row v1 * A\\<^sup>T)\\<^sup>T =\n    A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T", "by metis"], ["proof (state)\nthis:\n  (mat_of_row v1 * A\\<^sup>T)\\<^sup>T =\n  A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (mat_of_row v1 * A\\<^sup>T)\\<^sup>T =\n  A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"(mat_of_row v2 * B\\<^sup>T)\\<^sup>T = B\\<^sup>T\\<^sup>T * ((mat_of_row v2)\\<^sup>T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n    B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T", "using transpose_mult B v2 transpose_carrier_mat mat_of_row_carrier(1)"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?n; ?B \\<in> carrier_mat ?n ?nc\\<rbrakk>\n  \\<Longrightarrow> (?A * ?B)\\<^sup>T = ?B\\<^sup>T * ?A\\<^sup>T\n  B \\<in> carrier_mat nr nc2\n  v2 \\<in> carrier_vec nc2\n  (?A\\<^sup>T \\<in> carrier_mat ?nc ?nr) = (?A \\<in> carrier_mat ?nr ?nc)\n  ?y \\<in> carrier_vec ?n \\<Longrightarrow>\n  mat_of_row ?y \\<in> carrier_mat 1 ?n\n\ngoal (1 subgoal):\n 1. (mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n    B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T", "by metis"], ["proof (state)\nthis:\n  (mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n  B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  (mat_of_row v2 * B\\<^sup>T)\\<^sup>T =\n  B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"A\\<^sup>T\\<^sup>T * ((mat_of_row v1)\\<^sup>T) + B\\<^sup>T\\<^sup>T * ((mat_of_row v2)\\<^sup>T) =\n             A * mat_of_col v1 + B * mat_of_col v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T +\n    B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T =\n    A * mat_of_col v1 + B * mat_of_col v2", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T +\n    B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T =\n    A * (mat_of_row v1)\\<^sup>T + B * (mat_of_row v2)\\<^sup>T", "by auto"], ["proof (state)\nthis:\n  A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T +\n  B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T =\n  A * mat_of_col v1 + B * mat_of_col v2\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  A\\<^sup>T\\<^sup>T * (mat_of_row v1)\\<^sup>T +\n  B\\<^sup>T\\<^sup>T * (mat_of_row v2)\\<^sup>T =\n  A * mat_of_col v1 + B * mat_of_col v2\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"col \\<dots> 0 = col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. col (A * mat_of_col v1 + B * mat_of_col v2) 0 =\n    col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0", "using assms"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc1\n  B \\<in> carrier_mat nr nc2\n  v1 \\<in> carrier_vec nc1\n  v2 \\<in> carrier_vec nc2\n\ngoal (1 subgoal):\n 1. col (A * mat_of_col v1 + B * mat_of_col v2) 0 =\n    col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0", "by auto"], ["proof (state)\nthis:\n  col (A * mat_of_col v1 + B * mat_of_col v2) 0 =\n  col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  col (A * mat_of_col v1 + B * mat_of_col v2) 0 =\n  col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots> = col (mat_of_col (A *\\<^sub>v v1)) 0 + col (mat_of_col (B *\\<^sub>v v2)) 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0 =\n    col (mat_of_col (A *\\<^sub>v v1)) 0 +\n    col (mat_of_col (B *\\<^sub>v v2)) 0", "using mult_mat_of_col assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?nc; ?v \\<in> carrier_vec ?nc\\<rbrakk>\n  \\<Longrightarrow> ?A * mat_of_col ?v = mat_of_col (?A *\\<^sub>v ?v)\n  A \\<in> carrier_mat nr nc1\n  B \\<in> carrier_mat nr nc2\n  v1 \\<in> carrier_vec nc1\n  v2 \\<in> carrier_vec nc2\n\ngoal (1 subgoal):\n 1. col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0 =\n    col (mat_of_col (A *\\<^sub>v v1)) 0 +\n    col (mat_of_col (B *\\<^sub>v v2)) 0", "by auto"], ["proof (state)\nthis:\n  col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0 =\n  col (mat_of_col (A *\\<^sub>v v1)) 0 + col (mat_of_col (B *\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "also"], ["proof (state)\nthis:\n  col (A * mat_of_col v1) 0 + col (B * mat_of_col v2) 0 =\n  col (mat_of_col (A *\\<^sub>v v1)) 0 + col (mat_of_col (B *\\<^sub>v v2)) 0\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "have \"\\<dots> = A *\\<^sub>v v1 + B *\\<^sub>v v2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. col (mat_of_col (A *\\<^sub>v v1)) 0 +\n    col (mat_of_col (B *\\<^sub>v v2)) 0 =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "by auto"], ["proof (state)\nthis:\n  col (mat_of_col (A *\\<^sub>v v1)) 0 +\n  col (mat_of_col (B *\\<^sub>v v2)) 0 =\n  A *\\<^sub>v v1 + B *\\<^sub>v v2\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "finally"], ["proof (chain)\npicking this:\n  (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n  A *\\<^sub>v v1 + B *\\<^sub>v v2", "show ?thesis"], ["proof (prove)\nusing this:\n  (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n  A *\\<^sub>v v1 + B *\\<^sub>v v2\n\ngoal (1 subgoal):\n 1. (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n    A *\\<^sub>v v1 + B *\\<^sub>v v2", "by auto"], ["proof (state)\nthis:\n  (A @\\<^sub>c B) *\\<^sub>v (v1 @\\<^sub>v v2) =\n  A *\\<^sub>v v1 + B *\\<^sub>v v2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vec_first_append:\n  assumes \"v \\<in> carrier_vec n\"\n  shows \"vec_first (v @\\<^sub>v w) n = v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (v @\\<^sub>v w) n = v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. vec_first (v @\\<^sub>v w) n = v", "have \"v @\\<^sub>v w = vec_first (v @\\<^sub>v w) n @\\<^sub>v vec_last (v @\\<^sub>v w) (dim_vec w)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v @\\<^sub>v w =\n    vec_first (v @\\<^sub>v w) n @\\<^sub>v\n    vec_last (v @\\<^sub>v w) (dim_vec w)", "using vec_first_last_append assms"], ["proof (prove)\nusing this:\n  ?v \\<in> carrier_vec (?n + ?m) \\<Longrightarrow>\n  vec_first ?v ?n @\\<^sub>v vec_last ?v ?m = ?v\n  v \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. v @\\<^sub>v w =\n    vec_first (v @\\<^sub>v w) n @\\<^sub>v\n    vec_last (v @\\<^sub>v w) (dim_vec w)", "by simp"], ["proof (state)\nthis:\n  v @\\<^sub>v w =\n  vec_first (v @\\<^sub>v w) n @\\<^sub>v vec_last (v @\\<^sub>v w) (dim_vec w)\n\ngoal (1 subgoal):\n 1. vec_first (v @\\<^sub>v w) n = v", "thus ?thesis"], ["proof (prove)\nusing this:\n  v @\\<^sub>v w =\n  vec_first (v @\\<^sub>v w) n @\\<^sub>v vec_last (v @\\<^sub>v w) (dim_vec w)\n\ngoal (1 subgoal):\n 1. vec_first (v @\\<^sub>v w) n = v", "using append_vec_eq[OF assms]"], ["proof (prove)\nusing this:\n  v @\\<^sub>v w =\n  vec_first (v @\\<^sub>v w) n @\\<^sub>v vec_last (v @\\<^sub>v w) (dim_vec w)\n  ?v' \\<in> carrier_vec n \\<Longrightarrow>\n  (v @\\<^sub>v ?w = ?v' @\\<^sub>v ?w') = (v = ?v' \\<and> ?w = ?w')\n\ngoal (1 subgoal):\n 1. vec_first (v @\\<^sub>v w) n = v", "by simp"], ["proof (state)\nthis:\n  vec_first (v @\\<^sub>v w) n = v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vec_le_iff_diff_le_0: fixes a :: \"'a :: ordered_ab_group_add vec\"\n  shows \"(a \\<le> b) = (a - b \\<le> 0\\<^sub>v (dim_vec a))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<le> b) = (a - b \\<le> 0\\<^sub>v (dim_vec a))", "unfolding less_eq_vec_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (dim_vec a = dim_vec b \\<and>\n     (\\<forall>i<dim_vec b. a $ i \\<le> b $ i)) =\n    (dim_vec (a - b) = dim_vec (0\\<^sub>v (dim_vec a)) \\<and>\n     (\\<forall>i<dim_vec (0\\<^sub>v (dim_vec a)).\n         (a - b) $ i \\<le> 0\\<^sub>v (dim_vec a) $ i))", "by auto"], ["", "definition \"mat_row_first A n \\<equiv> mat n (dim_col A) (\\<lambda> (i, j). A $$ (i, j))\""], ["", "definition \"mat_row_last A n \\<equiv> mat n (dim_col A) (\\<lambda> (i, j). A $$ (dim_row A - n + i, j))\""], ["", "lemma mat_row_first_carrier[simp]: \"mat_row_first A n \\<in> carrier_mat n (dim_col A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_row_first A n \\<in> carrier_mat n (dim_col A)", "unfolding mat_row_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mat n (dim_col A) (\\<lambda>(i, j). A $$ (i, j))\n    \\<in> carrier_mat n (dim_col A)", "by simp"], ["", "lemma mat_row_first_dim[simp]:\n  \"dim_row (mat_row_first A n) = n\"\n  \"dim_col (mat_row_first A n) = dim_col A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_row_first A n) = n &&&\n    dim_col (mat_row_first A n) = dim_col A", "unfolding mat_row_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat n (dim_col A) (\\<lambda>(i, j). A $$ (i, j))) = n &&&\n    dim_col (mat n (dim_col A) (\\<lambda>(i, j). A $$ (i, j))) = dim_col A", "by simp_all"], ["", "lemma mat_row_last_carrier[simp]: \"mat_row_last A n \\<in> carrier_mat n (dim_col A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_row_last A n \\<in> carrier_mat n (dim_col A)", "unfolding mat_row_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mat n (dim_col A) (\\<lambda>(i, j). A $$ (dim_row A - n + i, j))\n    \\<in> carrier_mat n (dim_col A)", "by simp"], ["", "lemma mat_row_last_dim[simp]:\n  \"dim_row (mat_row_last A n) = n\"\n  \"dim_col (mat_row_last A n) = dim_col A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_row_last A n) = n &&&\n    dim_col (mat_row_last A n) = dim_col A", "unfolding mat_row_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row\n     (mat n (dim_col A) (\\<lambda>(i, j). A $$ (dim_row A - n + i, j))) =\n    n &&&\n    dim_col\n     (mat n (dim_col A) (\\<lambda>(i, j). A $$ (dim_row A - n + i, j))) =\n    dim_col A", "by simp_all"], ["", "lemma mat_row_first_nth[simp]: \"i < n \\<Longrightarrow> row (mat_row_first A n) i = row A i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow> row (mat_row_first A n) i = row A i", "unfolding mat_row_first_def row_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow>\n    vec (dim_col (mat n (dim_col A) (\\<lambda>(i, j). A $$ (i, j))))\n     (\\<lambda>j.\n         mat n (dim_col A) (\\<lambda>(i, j). A $$ (i, j)) $$ (i, j)) =\n    vec (dim_col A) (\\<lambda>j. A $$ (i, j))", "by fastforce"], ["", "lemma append_rows_nth:\n  assumes \"A \\<in> carrier_mat nr1 nc\"\n    and \"B \\<in> carrier_mat nr2 nc\"\n  shows \"i < nr1 \\<Longrightarrow> row (A @\\<^sub>r B) i = row A i\"\n    and \"\\<lbrakk> i \\<ge> nr1; i < nr1 + nr2 \\<rbrakk> \\<Longrightarrow> row (A @\\<^sub>r B) i = row B (i - nr1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (i < nr1 \\<Longrightarrow> row (A @\\<^sub>r B) i = row A i) &&&\n    (\\<lbrakk>nr1 \\<le> i; i < nr1 + nr2\\<rbrakk>\n     \\<Longrightarrow> row (A @\\<^sub>r B) i = row B (i - nr1))", "unfolding append_rows_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (i < nr1 \\<Longrightarrow>\n     row (four_block_mat A (0\\<^sub>m (dim_row A) 0) B\n           (0\\<^sub>m (dim_row B) 0))\n      i =\n     row A i) &&&\n    (\\<lbrakk>nr1 \\<le> i; i < nr1 + nr2\\<rbrakk>\n     \\<Longrightarrow> row (four_block_mat A (0\\<^sub>m (dim_row A) 0) B\n                             (0\\<^sub>m (dim_row B) 0))\n                        i =\n                       row B (i - nr1))", "using row_four_block_mat assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr1.0 ?nc1.0;\n   ?B \\<in> carrier_mat ?nr1.0 ?nc2.0; ?C \\<in> carrier_mat ?nr2.0 ?nc1.0;\n   ?D \\<in> carrier_mat ?nr2.0 ?nc2.0; ?i < ?nr1.0\\<rbrakk>\n  \\<Longrightarrow> row (four_block_mat ?A ?B ?C ?D) ?i =\n                    row ?A ?i @\\<^sub>v row ?B ?i\n  \\<lbrakk>?A \\<in> carrier_mat ?nr1.0 ?nc1.0;\n   ?B \\<in> carrier_mat ?nr1.0 ?nc2.0; ?C \\<in> carrier_mat ?nr2.0 ?nc1.0;\n   ?D \\<in> carrier_mat ?nr2.0 ?nc2.0; \\<not> ?i < ?nr1.0;\n   ?i < ?nr1.0 + ?nr2.0\\<rbrakk>\n  \\<Longrightarrow> row (four_block_mat ?A ?B ?C ?D) ?i =\n                    row ?C (?i - ?nr1.0) @\\<^sub>v row ?D (?i - ?nr1.0)\n  A \\<in> carrier_mat nr1 nc\n  B \\<in> carrier_mat nr2 nc\n\ngoal (1 subgoal):\n 1. (i < nr1 \\<Longrightarrow>\n     row (four_block_mat A (0\\<^sub>m (dim_row A) 0) B\n           (0\\<^sub>m (dim_row B) 0))\n      i =\n     row A i) &&&\n    (\\<lbrakk>nr1 \\<le> i; i < nr1 + nr2\\<rbrakk>\n     \\<Longrightarrow> row (four_block_mat A (0\\<^sub>m (dim_row A) 0) B\n                             (0\\<^sub>m (dim_row B) 0))\n                        i =\n                       row B (i - nr1))", "by auto"], ["", "lemma mat_of_row_last_nth[simp]:\n  \"i < n \\<Longrightarrow> row (mat_row_last A n) i = row A (dim_row A - n + i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow>\n    row (mat_row_last A n) i = row A (dim_row A - n + i)", "unfolding mat_row_last_def row_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow>\n    vec (dim_col\n          (mat n (dim_col A)\n            (\\<lambda>(i, j). A $$ (dim_row A - n + i, j))))\n     (\\<lambda>j.\n         mat n (dim_col A) (\\<lambda>(i, j). A $$ (dim_row A - n + i, j)) $$\n         (i, j)) =\n    vec (dim_col A) (\\<lambda>j. A $$ (dim_row A - n + i, j))", "by auto"], ["", "lemma mat_row_first_last_append:\n  assumes \"dim_row A = m + n\"\n  shows \"(mat_row_first A m) @\\<^sub>r (mat_row_last A n) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_row_first A m @\\<^sub>r mat_row_last A n = A", "proof (rule eq_rowI)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>i.\n       i < dim_row A \\<Longrightarrow>\n       row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n 2. dim_row (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_row A\n 3. dim_col (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_col A", "show \"dim_row (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_row A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_row A", "unfolding append_rows_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row\n     (four_block_mat (mat_row_first A m)\n       (0\\<^sub>m (dim_row (mat_row_first A m)) 0) (mat_row_last A n)\n       (0\\<^sub>m (dim_row (mat_row_last A n)) 0)) =\n    dim_row A", "using assms"], ["proof (prove)\nusing this:\n  dim_row A = m + n\n\ngoal (1 subgoal):\n 1. dim_row\n     (four_block_mat (mat_row_first A m)\n       (0\\<^sub>m (dim_row (mat_row_first A m)) 0) (mat_row_last A n)\n       (0\\<^sub>m (dim_row (mat_row_last A n)) 0)) =\n    dim_row A", "by fastforce"], ["proof (state)\nthis:\n  dim_row (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_row A\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i < dim_row A \\<Longrightarrow>\n       row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n 2. dim_col (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_col A", "show \"dim_col (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_col A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_col A", "unfolding append_rows_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col\n     (four_block_mat (mat_row_first A m)\n       (0\\<^sub>m (dim_row (mat_row_first A m)) 0) (mat_row_last A n)\n       (0\\<^sub>m (dim_row (mat_row_last A n)) 0)) =\n    dim_col A", "by fastforce"], ["proof (state)\nthis:\n  dim_col (mat_row_first A m @\\<^sub>r mat_row_last A n) = dim_col A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < dim_row A \\<Longrightarrow>\n       row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < dim_row A \\<Longrightarrow>\n       row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "assume i: \"i < dim_row A\""], ["proof (state)\nthis:\n  i < dim_row A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < dim_row A \\<Longrightarrow>\n       row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "show \"row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n 2. \\<not> ?P \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "assume i: \"i < m\""], ["proof (state)\nthis:\n  i < m\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n 2. \\<not> ?P \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "thus ?thesis"], ["proof (prove)\nusing this:\n  i < m\n\ngoal (1 subgoal):\n 1. row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "using append_rows_nth(1)[OF mat_row_first_carrier[of A m]\n          mat_row_last_carrier[of A n] i]"], ["proof (prove)\nusing this:\n  i < m\n  row (mat_row_first A m @\\<^sub>r mat_row_last A n) i =\n  row (mat_row_first A m) i\n\ngoal (1 subgoal):\n 1. row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "by simp"], ["proof (state)\nthis:\n  row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n\ngoal (1 subgoal):\n 1. \\<not> i < m \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> i < m \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "assume i': \"\\<not> i < m\""], ["proof (state)\nthis:\n  \\<not> i < m\n\ngoal (1 subgoal):\n 1. \\<not> i < m \\<Longrightarrow>\n    row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> i < m\n\ngoal (1 subgoal):\n 1. row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "using append_rows_nth(2)[OF mat_row_first_carrier[of A m]\n          mat_row_last_carrier[of A n]] i assms"], ["proof (prove)\nusing this:\n  \\<not> i < m\n  \\<lbrakk>m \\<le> ?i; ?i < m + n\\<rbrakk>\n  \\<Longrightarrow> row (mat_row_first A m @\\<^sub>r mat_row_last A n) ?i =\n                    row (mat_row_last A n) (?i - m)\n  i < dim_row A\n  dim_row A = m + n\n\ngoal (1 subgoal):\n 1. row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i", "by simp"], ["proof (state)\nthis:\n  row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  row (mat_row_first A m @\\<^sub>r mat_row_last A n) i = row A i\n\ngoal:\nNo subgoals!", "qed"], ["", "definition \"mat_col_first A n \\<equiv> (mat_row_first A\\<^sup>T n)\\<^sup>T\""], ["", "definition \"mat_col_last A n \\<equiv> (mat_row_last A\\<^sup>T n)\\<^sup>T\""], ["", "lemma mat_col_first_carrier[simp]: \"mat_col_first A n \\<in> carrier_mat (dim_row A) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_col_first A n \\<in> carrier_mat (dim_row A) n", "unfolding mat_col_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_row_first A\\<^sup>T n)\\<^sup>T \\<in> carrier_mat (dim_row A) n", "by fastforce"], ["", "lemma mat_col_first_dim[simp]:\n  \"dim_row (mat_col_first A n) = dim_row A\"\n  \"dim_col (mat_col_first A n) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_col_first A n) = dim_row A &&&\n    dim_col (mat_col_first A n) = n", "unfolding mat_col_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_row_first A\\<^sup>T n)\\<^sup>T = dim_row A &&&\n    dim_col (mat_row_first A\\<^sup>T n)\\<^sup>T = n", "by simp_all"], ["", "lemma mat_col_last_carrier[simp]: \"mat_col_last A n \\<in> carrier_mat (dim_row A) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_col_last A n \\<in> carrier_mat (dim_row A) n", "unfolding mat_col_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_row_last A\\<^sup>T n)\\<^sup>T \\<in> carrier_mat (dim_row A) n", "by fastforce"], ["", "lemma mat_col_last_dim[simp]:\n  \"dim_row (mat_col_last A n) = dim_row A\"\n  \"dim_col (mat_col_last A n) = n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_col_last A n) = dim_row A &&&\n    dim_col (mat_col_last A n) = n", "unfolding mat_col_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row (mat_row_last A\\<^sup>T n)\\<^sup>T = dim_row A &&&\n    dim_col (mat_row_last A\\<^sup>T n)\\<^sup>T = n", "by simp_all"], ["", "lemma mat_col_first_nth[simp]:\n  \"\\<lbrakk> i < n; i < dim_col A \\<rbrakk> \\<Longrightarrow> col (mat_col_first A n) i = col A i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i < n; i < dim_col A\\<rbrakk>\n    \\<Longrightarrow> col (mat_col_first A n) i = col A i", "unfolding mat_col_first_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i < n; i < dim_col A\\<rbrakk>\n    \\<Longrightarrow> col (mat_row_first A\\<^sup>T n)\\<^sup>T i = col A i", "by force"], ["", "lemma append_cols_nth:\n  assumes \"A \\<in> carrier_mat nr nc1\"\n    and \"B \\<in> carrier_mat nr nc2\"\n  shows \"i < nc1 \\<Longrightarrow> col (A @\\<^sub>c B) i = col A i\"\n    and \"\\<lbrakk> i \\<ge> nc1; i < nc1 + nc2 \\<rbrakk> \\<Longrightarrow> col (A @\\<^sub>c B) i = col B (i - nc1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (i < nc1 \\<Longrightarrow> col (A @\\<^sub>c B) i = col A i) &&&\n    (\\<lbrakk>nc1 \\<le> i; i < nc1 + nc2\\<rbrakk>\n     \\<Longrightarrow> col (A @\\<^sub>c B) i = col B (i - nc1))", "unfolding append_cols_def append_rows_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (i < nc1 \\<Longrightarrow>\n     col (four_block_mat A\\<^sup>T (0\\<^sub>m (dim_row A\\<^sup>T) 0)\n           B\\<^sup>T (0\\<^sub>m (dim_row B\\<^sup>T) 0))\\<^sup>T\n      i =\n     col A i) &&&\n    (\\<lbrakk>nc1 \\<le> i; i < nc1 + nc2\\<rbrakk>\n     \\<Longrightarrow> col (four_block_mat A\\<^sup>T\n                             (0\\<^sub>m (dim_row A\\<^sup>T) 0) B\\<^sup>T\n                             (0\\<^sub>m (dim_row B\\<^sup>T) 0))\\<^sup>T\n                        i =\n                       col B (i - nc1))", "using row_four_block_mat assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>?A \\<in> carrier_mat ?nr1.0 ?nc1.0;\n   ?B \\<in> carrier_mat ?nr1.0 ?nc2.0; ?C \\<in> carrier_mat ?nr2.0 ?nc1.0;\n   ?D \\<in> carrier_mat ?nr2.0 ?nc2.0; ?i < ?nr1.0\\<rbrakk>\n  \\<Longrightarrow> row (four_block_mat ?A ?B ?C ?D) ?i =\n                    row ?A ?i @\\<^sub>v row ?B ?i\n  \\<lbrakk>?A \\<in> carrier_mat ?nr1.0 ?nc1.0;\n   ?B \\<in> carrier_mat ?nr1.0 ?nc2.0; ?C \\<in> carrier_mat ?nr2.0 ?nc1.0;\n   ?D \\<in> carrier_mat ?nr2.0 ?nc2.0; \\<not> ?i < ?nr1.0;\n   ?i < ?nr1.0 + ?nr2.0\\<rbrakk>\n  \\<Longrightarrow> row (four_block_mat ?A ?B ?C ?D) ?i =\n                    row ?C (?i - ?nr1.0) @\\<^sub>v row ?D (?i - ?nr1.0)\n  A \\<in> carrier_mat nr nc1\n  B \\<in> carrier_mat nr nc2\n\ngoal (1 subgoal):\n 1. (i < nc1 \\<Longrightarrow>\n     col (four_block_mat A\\<^sup>T (0\\<^sub>m (dim_row A\\<^sup>T) 0)\n           B\\<^sup>T (0\\<^sub>m (dim_row B\\<^sup>T) 0))\\<^sup>T\n      i =\n     col A i) &&&\n    (\\<lbrakk>nc1 \\<le> i; i < nc1 + nc2\\<rbrakk>\n     \\<Longrightarrow> col (four_block_mat A\\<^sup>T\n                             (0\\<^sub>m (dim_row A\\<^sup>T) 0) B\\<^sup>T\n                             (0\\<^sub>m (dim_row B\\<^sup>T) 0))\\<^sup>T\n                        i =\n                       col B (i - nc1))", "by auto"], ["", "lemma mat_of_col_last_nth[simp]:\n  \"\\<lbrakk> i < n; i < dim_col A \\<rbrakk> \\<Longrightarrow> col (mat_col_last A n) i = col A (dim_col A - n + i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i < n; i < dim_col A\\<rbrakk>\n    \\<Longrightarrow> col (mat_col_last A n) i = col A (dim_col A - n + i)", "unfolding mat_col_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>i < n; i < dim_col A\\<rbrakk>\n    \\<Longrightarrow> col (mat_row_last A\\<^sup>T n)\\<^sup>T i =\n                      col A (dim_col A - n + i)", "by auto"], ["", "lemma mat_col_first_last_append:\n  assumes \"dim_col A = m + n\"\n  shows \"(mat_col_first A m) @\\<^sub>c (mat_col_last A n) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_col_first A m @\\<^sub>c mat_col_last A n = A", "unfolding append_cols_def mat_col_first_def mat_col_last_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((mat_row_first A\\<^sup>T m)\\<^sup>T\\<^sup>T @\\<^sub>r\n     (mat_row_last A\\<^sup>T n)\\<^sup>T\\<^sup>T)\\<^sup>T =\n    A", "using mat_row_first_last_append[of \"A\\<^sup>T\"] assms"], ["proof (prove)\nusing this:\n  dim_row A\\<^sup>T = ?m + ?n \\<Longrightarrow>\n  mat_row_first A\\<^sup>T ?m @\\<^sub>r mat_row_last A\\<^sup>T ?n = A\\<^sup>T\n  dim_col A = m + n\n\ngoal (1 subgoal):\n 1. ((mat_row_first A\\<^sup>T m)\\<^sup>T\\<^sup>T @\\<^sub>r\n     (mat_row_last A\\<^sup>T n)\\<^sup>T\\<^sup>T)\\<^sup>T =\n    A", "by simp"], ["", "lemma mat_of_row_dim_row_1: \"(dim_row A = 1) = (A = mat_of_row (row A 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (dim_row A = 1) = (A = mat_of_row (row A 0))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. dim_row A = 1 \\<Longrightarrow> A = mat_of_row (row A 0)\n 2. A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1", "show \"dim_row A = 1 \\<Longrightarrow> A = mat_of_row (row A 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row A = 1 \\<Longrightarrow> A = mat_of_row (row A 0)", "by force"], ["proof (state)\nthis:\n  dim_row A = 1 \\<Longrightarrow> A = mat_of_row (row A 0)\n\ngoal (1 subgoal):\n 1. A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1", "show \"A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1", "using mat_of_row_dim(1)"], ["proof (prove)\nusing this:\n  dim_row (mat_of_row ?y) = 1\n\ngoal (1 subgoal):\n 1. A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1", "by metis"], ["proof (state)\nthis:\n  A = mat_of_row (row A 0) \\<Longrightarrow> dim_row A = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mat_of_col_dim_col_1: \"(dim_col A = 1) = (A = mat_of_col (col A 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (dim_col A = 1) = (A = mat_of_col (col A 0))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. dim_col A = 1 \\<Longrightarrow> A = mat_of_col (col A 0)\n 2. A = mat_of_col (col A 0) \\<Longrightarrow> dim_col A = 1", "show \"dim_col A = 1 \\<Longrightarrow> A = mat_of_col (col A 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col A = 1 \\<Longrightarrow> A = mat_of_col (col A 0)", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_col A = 1 \\<Longrightarrow> A = (mat_of_row (col A 0))\\<^sup>T", "by auto"], ["proof (state)\nthis:\n  dim_col A = 1 \\<Longrightarrow> A = mat_of_col (col A 0)\n\ngoal (1 subgoal):\n 1. A = mat_of_col (col A 0) \\<Longrightarrow> dim_col A = 1", "show \"A = mat_of_col (col A 0) \\<Longrightarrow> dim_col A = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A = mat_of_col (col A 0) \\<Longrightarrow> dim_col A = 1", "by (metis mat_of_col_dim(2))"], ["proof (state)\nthis:\n  A = mat_of_col (col A 0) \\<Longrightarrow> dim_col A = 1\n\ngoal:\nNo subgoals!", "qed"], ["", "definition vec_of_scal :: \"'a \\<Rightarrow> 'a vec\" where \"vec_of_scal x \\<equiv> vec 1 (\\<lambda> i. x)\""], ["", "lemma vec_of_scal_dim[simp]:\n  \"dim_vec (vec_of_scal x) = 1\"\n  \"vec_of_scal x \\<in> carrier_vec 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_vec (vec_of_scal x) = 1 &&& vec_of_scal x \\<in> carrier_vec 1", "unfolding vec_of_scal_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_vec (vec 1 (\\<lambda>i. x)) = 1 &&&\n    vec 1 (\\<lambda>i. x) \\<in> carrier_vec 1", "by auto"], ["", "lemma index_vec_of_scal[simp]: \"(vec_of_scal x) $ 0 = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_of_scal x $ 0 = x", "unfolding vec_of_scal_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec 1 (\\<lambda>i. x) $ 0 = x", "by auto"], ["", "lemma row_mat_of_col[simp]: \"i < dim_vec v \\<Longrightarrow> row (mat_of_col v) i = vec_of_scal (v $ i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < dim_vec v \\<Longrightarrow>\n    row (mat_of_col v) i = vec_of_scal (v $ i)", "unfolding mat_of_col_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. i < dim_vec v \\<Longrightarrow>\n    row (mat_of_row v)\\<^sup>T i = vec_of_scal (v $ i)", "by auto"], ["", "lemma vec_of_scal_dim_1: \"(v \\<in> carrier_vec 1) = (v = vec_of_scal (v $ 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (v \\<in> carrier_vec 1) = (v = vec_of_scal (v $ 0))", "by(standard, auto simp del: One_nat_def, metis vec_of_scal_dim(2))"], ["", "lemma mult_mat_of_row_vec_of_scal: fixes x :: \"'a :: comm_ring_1\"\n  shows \"mat_of_col v *\\<^sub>v vec_of_scal x = x \\<cdot>\\<^sub>v v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_col v *\\<^sub>v vec_of_scal x = x \\<cdot>\\<^sub>v v", "by (auto simp add: scalar_prod_def)"], ["", "lemma smult_pos_vec[simp]: fixes l :: \"'a :: linordered_ring_strict\"\n  assumes l: \"l > 0\"\n  shows \"(l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "proof (cases \"dim_vec v = n\")"], ["proof (state)\ngoal (2 subgoals):\n 1. dim_vec v = n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\n 2. dim_vec v \\<noteq> n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "case True"], ["proof (state)\nthis:\n  dim_vec v = n\n\ngoal (2 subgoals):\n 1. dim_vec v = n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\n 2. dim_vec v \\<noteq> n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "have \"i < n \\<Longrightarrow> ((l \\<cdot>\\<^sub>v v) $ i \\<le> 0) \\<longleftrightarrow> v $ i \\<le> 0\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow>\n    ((l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)) = (v $ i \\<le> (0::'a))", "using True\n      mult_le_cancel_left_pos[OF l, of _ 0]"], ["proof (prove)\nusing this:\n  dim_vec v = n\n  (l * ?a \\<le> l * (0::'a)) = (?a \\<le> (0::'a))\n\ngoal (1 subgoal):\n 1. i < n \\<Longrightarrow>\n    ((l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)) = (v $ i \\<le> (0::'a))", "by simp"], ["proof (state)\nthis:\n  ?i < n \\<Longrightarrow>\n  ((l \\<cdot>\\<^sub>v v) $ ?i \\<le> (0::'a)) = (v $ ?i \\<le> (0::'a))\n\ngoal (2 subgoals):\n 1. dim_vec v = n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\n 2. dim_vec v \\<noteq> n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?i < n \\<Longrightarrow>\n  ((l \\<cdot>\\<^sub>v v) $ ?i \\<le> (0::'a)) = (v $ ?i \\<le> (0::'a))\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "using True"], ["proof (prove)\nusing this:\n  ?i < n \\<Longrightarrow>\n  ((l \\<cdot>\\<^sub>v v) $ ?i \\<le> (0::'a)) = (v $ ?i \\<le> (0::'a))\n  dim_vec v = n\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  ?i < n \\<Longrightarrow>\n  ((l \\<cdot>\\<^sub>v v) $ ?i \\<le> (0::'a)) = (v $ ?i \\<le> (0::'a))\n  dim_vec v = n\n\ngoal (1 subgoal):\n 1. (dim_vec (l \\<cdot>\\<^sub>v v) = dim_vec (0\\<^sub>v n) \\<and>\n     (\\<forall>i<dim_vec (0\\<^sub>v n).\n         (l \\<cdot>\\<^sub>v v) $ i \\<le> 0\\<^sub>v n $ i)) =\n    (dim_vec v = dim_vec (0\\<^sub>v n) \\<and>\n     (\\<forall>i<dim_vec (0\\<^sub>v n). v $ i \\<le> 0\\<^sub>v n $ i))", "by auto"], ["proof (state)\nthis:\n  (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)\n\ngoal (1 subgoal):\n 1. dim_vec v \\<noteq> n \\<Longrightarrow>\n    (l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n) = (v \\<le> 0\\<^sub>v n)", "qed (auto simp: less_eq_vec_def)"], ["", "lemma finite_elements_mat[simp]: \"finite (elements_mat A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (elements_mat A)", "unfolding elements_mat_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     (set (concat\n            (map (\\<lambda>i. map (\\<lambda>j. A $$ (i, j)) [0..<dim_col A])\n              [0..<dim_row A])))", "by (rule finite_set)"], ["", "lemma finite_vec_set[simp]: \"finite (vec_set A)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (set\\<^sub>v A)", "unfolding vec_set_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (($) A ` {..<dim_vec A})", "by auto"], ["", "lemma lesseq_vecI: assumes \"v \\<in> carrier_vec n\" \"w \\<in> carrier_vec n\"\n  \"\\<And> i. i < n \\<Longrightarrow> v $ i \\<le> w $ i\"\nshows \"v \\<le> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v \\<le> w", "using assms"], ["proof (prove)\nusing this:\n  v \\<in> carrier_vec n\n  w \\<in> carrier_vec n\n  ?i < n \\<Longrightarrow> v $ ?i \\<le> w $ ?i\n\ngoal (1 subgoal):\n 1. v \\<le> w", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  v \\<in> carrier_vec n\n  w \\<in> carrier_vec n\n  ?i < n \\<Longrightarrow> v $ ?i \\<le> w $ ?i\n\ngoal (1 subgoal):\n 1. dim_vec v = dim_vec w \\<and> (\\<forall>i<dim_vec w. v $ i \\<le> w $ i)", "by auto"], ["", "lemma lesseq_vecD: assumes \"w \\<in> carrier_vec n\"\n  and \"v \\<le> w\"\n  and \"i < n\"\nshows \"v $ i \\<le> w $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. v $ i \\<le> w $ i", "using assms"], ["proof (prove)\nusing this:\n  w \\<in> carrier_vec n\n  v \\<le> w\n  i < n\n\ngoal (1 subgoal):\n 1. v $ i \\<le> w $ i", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  w \\<in> carrier_vec n\n  dim_vec v = dim_vec w \\<and> (\\<forall>i<dim_vec w. v $ i \\<le> w $ i)\n  i < n\n\ngoal (1 subgoal):\n 1. v $ i \\<le> w $ i", "by auto"], ["", "lemma vec_add_mono: fixes a :: \"'a :: ordered_ab_semigroup_add vec\"\n  assumes dim: \"dim_vec b = dim_vec d\"\n    and ab: \"a \\<le> b\"\n    and cd: \"c \\<le> d\"\n  shows \"a + c \\<le> b + d\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a + c \\<le> b + d", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a + c \\<le> b + d", "have \"\\<And> i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "assume id: \"i < dim_vec d\""], ["proof (state)\nthis:\n  i < dim_vec d\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have ic: \"i < dim_vec c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < dim_vec c", "using id cd"], ["proof (prove)\nusing this:\n  i < dim_vec d\n  c \\<le> d\n\ngoal (1 subgoal):\n 1. i < dim_vec c", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  i < dim_vec d\n  dim_vec c = dim_vec d \\<and> (\\<forall>i<dim_vec d. c $ i \\<le> d $ i)\n\ngoal (1 subgoal):\n 1. i < dim_vec c", "by auto"], ["proof (state)\nthis:\n  i < dim_vec c\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have ib: \"i < dim_vec b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < dim_vec b", "using id dim"], ["proof (prove)\nusing this:\n  i < dim_vec d\n  dim_vec b = dim_vec d\n\ngoal (1 subgoal):\n 1. i < dim_vec b", "by auto"], ["proof (state)\nthis:\n  i < dim_vec b\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have ia: \"i < dim_vec a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. i < dim_vec a", "using ib ab"], ["proof (prove)\nusing this:\n  i < dim_vec b\n  a \\<le> b\n\ngoal (1 subgoal):\n 1. i < dim_vec a", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  i < dim_vec b\n  dim_vec a = dim_vec b \\<and> (\\<forall>i<dim_vec b. a $ i \\<le> b $ i)\n\ngoal (1 subgoal):\n 1. i < dim_vec a", "by auto"], ["proof (state)\nthis:\n  i < dim_vec a\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have \"a $ i \\<le> b $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a $ i \\<le> b $ i", "using ab ia ib"], ["proof (prove)\nusing this:\n  a \\<le> b\n  i < dim_vec a\n  i < dim_vec b\n\ngoal (1 subgoal):\n 1. a $ i \\<le> b $ i", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  dim_vec a = dim_vec b \\<and> (\\<forall>i<dim_vec b. a $ i \\<le> b $ i)\n  i < dim_vec a\n  i < dim_vec b\n\ngoal (1 subgoal):\n 1. a $ i \\<le> b $ i", "by auto"], ["proof (state)\nthis:\n  a $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "moreover"], ["proof (state)\nthis:\n  a $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have \"c $ i \\<le> d $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c $ i \\<le> d $ i", "using cd ic id"], ["proof (prove)\nusing this:\n  c \\<le> d\n  i < dim_vec c\n  i < dim_vec d\n\ngoal (1 subgoal):\n 1. c $ i \\<le> d $ i", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  dim_vec c = dim_vec d \\<and> (\\<forall>i<dim_vec d. c $ i \\<le> d $ i)\n  i < dim_vec c\n  i < dim_vec d\n\ngoal (1 subgoal):\n 1. c $ i \\<le> d $ i", "by auto"], ["proof (state)\nthis:\n  c $ i \\<le> d $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "ultimately"], ["proof (chain)\npicking this:\n  a $ i \\<le> b $ i\n  c $ i \\<le> d $ i", "have abcdi: \"a $ i + c $ i \\<le> b $ i + d $ i\""], ["proof (prove)\nusing this:\n  a $ i \\<le> b $ i\n  c $ i \\<le> d $ i\n\ngoal (1 subgoal):\n 1. a $ i + c $ i \\<le> b $ i + d $ i", "using add_mono"], ["proof (prove)\nusing this:\n  a $ i \\<le> b $ i\n  c $ i \\<le> d $ i\n  \\<lbrakk>?a \\<le> ?b; ?c \\<le> ?d\\<rbrakk>\n  \\<Longrightarrow> ?a + ?c \\<le> ?b + ?d\n\ngoal (1 subgoal):\n 1. a $ i + c $ i \\<le> b $ i + d $ i", "by auto"], ["proof (state)\nthis:\n  a $ i + c $ i \\<le> b $ i + d $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have \"(a + c) $ i = a $ i + c $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a + c) $ i = a $ i + c $ i", "using index_add_vec(1) ic"], ["proof (prove)\nusing this:\n  ?i < dim_vec ?v\\<^sub>2 \\<Longrightarrow>\n  (?v\\<^sub>1 + ?v\\<^sub>2) $ ?i = ?v\\<^sub>1 $ ?i + ?v\\<^sub>2 $ ?i\n  i < dim_vec c\n\ngoal (1 subgoal):\n 1. (a + c) $ i = a $ i + c $ i", "by auto"], ["proof (state)\nthis:\n  (a + c) $ i = a $ i + c $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "also"], ["proof (state)\nthis:\n  (a + c) $ i = a $ i + c $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have \"\\<dots> \\<le> b $ i + d $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a $ i + c $ i \\<le> b $ i + d $ i", "using abcdi"], ["proof (prove)\nusing this:\n  a $ i + c $ i \\<le> b $ i + d $ i\n\ngoal (1 subgoal):\n 1. a $ i + c $ i \\<le> b $ i + d $ i", "by auto"], ["proof (state)\nthis:\n  a $ i + c $ i \\<le> b $ i + d $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "also"], ["proof (state)\nthis:\n  a $ i + c $ i \\<le> b $ i + d $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "have \"b $ i + d $ i = (b + d) $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b $ i + d $ i = (b + d) $ i", "using index_add_vec(1) id"], ["proof (prove)\nusing this:\n  ?i < dim_vec ?v\\<^sub>2 \\<Longrightarrow>\n  (?v\\<^sub>1 + ?v\\<^sub>2) $ ?i = ?v\\<^sub>1 $ ?i + ?v\\<^sub>2 $ ?i\n  i < dim_vec d\n\ngoal (1 subgoal):\n 1. b $ i + d $ i = (b + d) $ i", "by auto"], ["proof (state)\nthis:\n  b $ i + d $ i = (b + d) $ i\n\ngoal (1 subgoal):\n 1. \\<And>i. i < dim_vec d \\<Longrightarrow> (a + c) $ i \\<le> (b + d) $ i", "finally"], ["proof (chain)\npicking this:\n  (a + c) $ i \\<le> (b + d) $ i", "show \"(a + c) $ i \\<le> (b + d) $ i\""], ["proof (prove)\nusing this:\n  (a + c) $ i \\<le> (b + d) $ i\n\ngoal (1 subgoal):\n 1. (a + c) $ i \\<le> (b + d) $ i", "by auto"], ["proof (state)\nthis:\n  (a + c) $ i \\<le> (b + d) $ i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?i < dim_vec d \\<Longrightarrow> (a + c) $ ?i \\<le> (b + d) $ ?i\n\ngoal (1 subgoal):\n 1. a + c \\<le> b + d", "then"], ["proof (chain)\npicking this:\n  ?i < dim_vec d \\<Longrightarrow> (a + c) $ ?i \\<le> (b + d) $ ?i", "show \"a + c \\<le> b + d\""], ["proof (prove)\nusing this:\n  ?i < dim_vec d \\<Longrightarrow> (a + c) $ ?i \\<le> (b + d) $ ?i\n\ngoal (1 subgoal):\n 1. a + c \\<le> b + d", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  ?i < dim_vec d \\<Longrightarrow> (a + c) $ ?i \\<le> (b + d) $ ?i\n\ngoal (1 subgoal):\n 1. dim_vec (a + c) = dim_vec (b + d) \\<and>\n    (\\<forall>i<dim_vec (b + d). (a + c) $ i \\<le> (b + d) $ i)", "using dim index_add_vec(2) cd less_eq_vec_def"], ["proof (prove)\nusing this:\n  ?i < dim_vec d \\<Longrightarrow> (a + c) $ ?i \\<le> (b + d) $ ?i\n  dim_vec b = dim_vec d\n  dim_vec (?v\\<^sub>1 + ?v\\<^sub>2) = dim_vec ?v\\<^sub>2\n  c \\<le> d\n  (?v \\<le> ?w) =\n  (dim_vec ?v = dim_vec ?w \\<and>\n   (\\<forall>i<dim_vec ?w. ?v $ i \\<le> ?w $ i))\n\ngoal (1 subgoal):\n 1. dim_vec (a + c) = dim_vec (b + d) \\<and>\n    (\\<forall>i<dim_vec (b + d). (a + c) $ i \\<le> (b + d) $ i)", "by auto"], ["proof (state)\nthis:\n  a + c \\<le> b + d\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma smult_nneg_npos_vec: fixes l :: \"'a :: ordered_semiring_0\"\n  assumes l: \"l \\<ge> 0\"\n    and v: \"v \\<le> 0\\<^sub>v n\"\n  shows \"l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "assume i: \"i < n\""], ["proof (state)\nthis:\n  i < n\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "then"], ["proof (chain)\npicking this:\n  i < n", "have vi: \"v $ i \\<le> 0\""], ["proof (prove)\nusing this:\n  i < n\n\ngoal (1 subgoal):\n 1. v $ i \\<le> (0::'a)", "using v"], ["proof (prove)\nusing this:\n  i < n\n  v \\<le> 0\\<^sub>v n\n\ngoal (1 subgoal):\n 1. v $ i \\<le> (0::'a)", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  i < n\n  dim_vec v = dim_vec (0\\<^sub>v n) \\<and>\n  (\\<forall>i<dim_vec (0\\<^sub>v n). v $ i \\<le> 0\\<^sub>v n $ i)\n\ngoal (1 subgoal):\n 1. v $ i \\<le> (0::'a)", "by simp"], ["proof (state)\nthis:\n  v $ i \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "then"], ["proof (chain)\npicking this:\n  v $ i \\<le> (0::'a)", "have \"(l \\<cdot>\\<^sub>v v) $ i = l * v $ i\""], ["proof (prove)\nusing this:\n  v $ i \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v) $ i = l * v $ i", "using v i"], ["proof (prove)\nusing this:\n  v $ i \\<le> (0::'a)\n  v \\<le> 0\\<^sub>v n\n  i < n\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v) $ i = l * v $ i", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  v $ i \\<le> (0::'a)\n  dim_vec v = dim_vec (0\\<^sub>v n) \\<and>\n  (\\<forall>i<dim_vec (0\\<^sub>v n). v $ i \\<le> 0\\<^sub>v n $ i)\n  i < n\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v) $ i = l * v $ i", "by auto"], ["proof (state)\nthis:\n  (l \\<cdot>\\<^sub>v v) $ i = l * v $ i\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "also"], ["proof (state)\nthis:\n  (l \\<cdot>\\<^sub>v v) $ i = l * v $ i\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "have \"l * v $ i \\<le> 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. l * v $ i \\<le> (0::'a)", "by (rule mult_nonneg_nonpos[OF l vi])"], ["proof (state)\nthis:\n  l * v $ i \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "finally"], ["proof (chain)\npicking this:\n  (l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)", "have \"(l \\<cdot>\\<^sub>v v) $ i \\<le> 0\""], ["proof (prove)\nusing this:\n  (l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. (l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)", "by auto"], ["proof (state)\nthis:\n  (l \\<cdot>\\<^sub>v v) $ i \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "}"], ["proof (state)\nthis:\n  ?i2 < n \\<Longrightarrow> (l \\<cdot>\\<^sub>v v) $ ?i2 \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "then"], ["proof (chain)\npicking this:\n  ?i2 < n \\<Longrightarrow> (l \\<cdot>\\<^sub>v v) $ ?i2 \\<le> (0::'a)", "show ?thesis"], ["proof (prove)\nusing this:\n  ?i2 < n \\<Longrightarrow> (l \\<cdot>\\<^sub>v v) $ ?i2 \\<le> (0::'a)\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "using v"], ["proof (prove)\nusing this:\n  ?i2 < n \\<Longrightarrow> (l \\<cdot>\\<^sub>v v) $ ?i2 \\<le> (0::'a)\n  v \\<le> 0\\<^sub>v n\n\ngoal (1 subgoal):\n 1. l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  ?i2 < n \\<Longrightarrow> (l \\<cdot>\\<^sub>v v) $ ?i2 \\<le> (0::'a)\n  dim_vec v = dim_vec (0\\<^sub>v n) \\<and>\n  (\\<forall>i<dim_vec (0\\<^sub>v n). v $ i \\<le> 0\\<^sub>v n $ i)\n\ngoal (1 subgoal):\n 1. dim_vec (l \\<cdot>\\<^sub>v v) = dim_vec (0\\<^sub>v n) \\<and>\n    (\\<forall>i<dim_vec (0\\<^sub>v n).\n        (l \\<cdot>\\<^sub>v v) $ i \\<le> 0\\<^sub>v n $ i)", "by auto"], ["proof (state)\nthis:\n  l \\<cdot>\\<^sub>v v \\<le> 0\\<^sub>v n\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma smult_vec_nonneg_eq: fixes c :: \"'a :: field\" \n  shows \"c \\<noteq> 0 \\<Longrightarrow> (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c \\<noteq> (0::'a) \\<Longrightarrow>\n    (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c \\<noteq> (0::'a) \\<Longrightarrow>\n    (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)", "have \"c \\<noteq> 0 \\<Longrightarrow> c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y \\<Longrightarrow> x = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>c \\<noteq> (0::'a);\n     c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y\\<rbrakk>\n    \\<Longrightarrow> x = y", "by (metis smult_smult_assoc[of \"1 / c\" \"c\"] nonzero_divide_eq_eq one_smult_vec)"], ["proof (state)\nthis:\n  \\<lbrakk>c \\<noteq> (0::'a);\n   c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y\\<rbrakk>\n  \\<Longrightarrow> x = y\n\ngoal (1 subgoal):\n 1. c \\<noteq> (0::'a) \\<Longrightarrow>\n    (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)", "thus \"c \\<noteq> 0 \\<Longrightarrow> ?thesis\""], ["proof (prove)\nusing this:\n  \\<lbrakk>c \\<noteq> (0::'a);\n   c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y\\<rbrakk>\n  \\<Longrightarrow> x = y\n\ngoal (1 subgoal):\n 1. c \\<noteq> (0::'a) \\<Longrightarrow>\n    (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)", "by auto"], ["proof (state)\nthis:\n  c \\<noteq> (0::'a) \\<Longrightarrow>\n  (c \\<cdot>\\<^sub>v x = c \\<cdot>\\<^sub>v y) = (x = y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma distinct_smult_nonneg: fixes c :: \"'a :: field\"\n  assumes c: \"c \\<noteq> 0\"\n  shows \"distinct lC \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) lC)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. distinct lC \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) lC)", "proof (induction lC)"], ["proof (state)\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "case (Cons v lC)"], ["proof (state)\nthis:\n  distinct lC \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) lC)\n  distinct (v # lC)\n\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "from Cons.prems"], ["proof (chain)\npicking this:\n  distinct (v # lC)", "have \"v \\<notin> set lC\""], ["proof (prove)\nusing this:\n  distinct (v # lC)\n\ngoal (1 subgoal):\n 1. v \\<notin> set lC", "by fastforce"], ["proof (state)\nthis:\n  v \\<notin> set lC\n\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "hence \"c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\""], ["proof (prove)\nusing this:\n  v \\<notin> set lC\n\ngoal (1 subgoal):\n 1. c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)", "using smult_vec_nonneg_eq[OF c]"], ["proof (prove)\nusing this:\n  v \\<notin> set lC\n  (c \\<cdot>\\<^sub>v ?x = c \\<cdot>\\<^sub>v ?y) = (?x = ?y)\n\ngoal (1 subgoal):\n 1. c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)", "by fastforce"], ["proof (state)\nthis:\n  c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\n\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "moreover"], ["proof (state)\nthis:\n  c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\n\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "have \"map ((\\<cdot>\\<^sub>v) c) (v # lC) = c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC\""], ["proof (prove)\ngoal (1 subgoal):\n 1. map ((\\<cdot>\\<^sub>v) c) (v # lC) =\n    c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC", "by simp"], ["proof (state)\nthis:\n  map ((\\<cdot>\\<^sub>v) c) (v # lC) =\n  c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC\n\ngoal (2 subgoals):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])\n 2. \\<And>a lC.\n       \\<lbrakk>distinct lC \\<Longrightarrow>\n                distinct (map ((\\<cdot>\\<^sub>v) c) lC);\n        distinct (a # lC)\\<rbrakk>\n       \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) (a # lC))", "ultimately"], ["proof (chain)\npicking this:\n  c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\n  map ((\\<cdot>\\<^sub>v) c) (v # lC) =\n  c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC", "show ?case"], ["proof (prove)\nusing this:\n  c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\n  map ((\\<cdot>\\<^sub>v) c) (v # lC) =\n  c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC\n\ngoal (1 subgoal):\n 1. distinct (map ((\\<cdot>\\<^sub>v) c) (v # lC))", "using Cons.IH Cons.prems"], ["proof (prove)\nusing this:\n  c \\<cdot>\\<^sub>v v \\<notin> set (map ((\\<cdot>\\<^sub>v) c) lC)\n  map ((\\<cdot>\\<^sub>v) c) (v # lC) =\n  c \\<cdot>\\<^sub>v v # map ((\\<cdot>\\<^sub>v) c) lC\n  distinct lC \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) lC)\n  distinct (v # lC)\n\ngoal (1 subgoal):\n 1. distinct (map ((\\<cdot>\\<^sub>v) c) (v # lC))", "by simp"], ["proof (state)\nthis:\n  distinct (map ((\\<cdot>\\<^sub>v) c) (v # lC))\n\ngoal (1 subgoal):\n 1. distinct [] \\<Longrightarrow> distinct (map ((\\<cdot>\\<^sub>v) c) [])", "qed auto"], ["", "lemma exists_vec_append: \"(\\<exists> x \\<in> carrier_vec (n + m). P x) \\<longleftrightarrow> (\\<exists> x1 \\<in> carrier_vec n. \\<exists> x2 \\<in> carrier_vec m. P (x1 @\\<^sub>v x2))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec (n + m). P x) =\n    (\\<exists>x1\\<in>carrier_vec n.\n        \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "assume \"\\<exists>x \\<in> carrier_vec (n + m). P x\""], ["proof (state)\nthis:\n  \\<exists>x\\<in>carrier_vec (n + m). P x\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "from this"], ["proof (chain)\npicking this:\n  \\<exists>x\\<in>carrier_vec (n + m). P x", "obtain x where xcarr: \"x \\<in> carrier_vec (n+m)\" and Px: \"P x\""], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>carrier_vec (n + m). P x\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> carrier_vec (n + m); P x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec (n + m)\n  P x\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "have \"x = vec n (\\<lambda> i. x $ i) @\\<^sub>v vec m (\\<lambda> i. x $ (n + i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i))", "by (rule eq_vecI, insert xcarr, auto)"], ["proof (state)\nthis:\n  x = vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "hence \"P x = P (vec n (\\<lambda> i. x $ i) @\\<^sub>v vec m (\\<lambda> i. x $ (n + i)))\""], ["proof (prove)\nusing this:\n  x = vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i))\n\ngoal (1 subgoal):\n 1. P x = P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))", "by simp"], ["proof (state)\nthis:\n  P x = P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "also"], ["proof (state)\nthis:\n  P x = P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "have 1: \"\\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))", "using xcarr Px calculation"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec (n + m)\n  P x\n  P x = P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))\n\ngoal (1 subgoal):\n 1. P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))", "by blast"], ["proof (state)\nthis:\n  P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))\n\ngoal (2 subgoals):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x \\<Longrightarrow>\n    \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n 2. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "finally"], ["proof (chain)\npicking this:\n  P x", "show \"\\<exists>x1\\<in>carrier_vec n. \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\""], ["proof (prove)\nusing this:\n  P x\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)", "using 1 vec_carrier"], ["proof (prove)\nusing this:\n  P x\n  P (vec n (($) x) @\\<^sub>v vec m (\\<lambda>i. x $ (n + i)))\n  vec ?n ?f \\<in> carrier_vec ?n\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)", "by blast"], ["proof (state)\nthis:\n  \\<exists>x1\\<in>carrier_vec n.\n     \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "assume \"(\\<exists> x1 \\<in> carrier_vec n. \\<exists> x2 \\<in> carrier_vec m. P (x1 @\\<^sub>v x2))\""], ["proof (state)\nthis:\n  \\<exists>x1\\<in>carrier_vec n.\n     \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "from this"], ["proof (chain)\npicking this:\n  \\<exists>x1\\<in>carrier_vec n.\n     \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)", "obtain x1 x2 where x1: \"x1 \\<in> carrier_vec n\" \n    and x2: \"x2 \\<in> carrier_vec m\" and P12: \"P (x1 @\\<^sub>v x2)\""], ["proof (prove)\nusing this:\n  \\<exists>x1\\<in>carrier_vec n.\n     \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2)\n\ngoal (1 subgoal):\n 1. (\\<And>x1 x2.\n        \\<lbrakk>x1 \\<in> carrier_vec n; x2 \\<in> carrier_vec m;\n         P (x1 @\\<^sub>v x2)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x1 \\<in> carrier_vec n\n  x2 \\<in> carrier_vec m\n  P (x1 @\\<^sub>v x2)\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "define x where \"x = x1 @\\<^sub>v x2\""], ["proof (state)\nthis:\n  x = x1 @\\<^sub>v x2\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "have xcarr: \"x \\<in> carrier_vec (n+m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec (n + m)", "using x1 x2"], ["proof (prove)\nusing this:\n  x1 \\<in> carrier_vec n\n  x2 \\<in> carrier_vec m\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec (n + m)", "by (simp add: x_def)"], ["proof (state)\nthis:\n  x \\<in> carrier_vec (n + m)\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "have \"P x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P x", "using P12 xcarr"], ["proof (prove)\nusing this:\n  P (x1 @\\<^sub>v x2)\n  x \\<in> carrier_vec (n + m)\n\ngoal (1 subgoal):\n 1. P x", "using x_def"], ["proof (prove)\nusing this:\n  P (x1 @\\<^sub>v x2)\n  x \\<in> carrier_vec (n + m)\n  x = x1 @\\<^sub>v x2\n\ngoal (1 subgoal):\n 1. P x", "by blast"], ["proof (state)\nthis:\n  P x\n\ngoal (1 subgoal):\n 1. \\<exists>x1\\<in>carrier_vec n.\n       \\<exists>x2\\<in>carrier_vec m. P (x1 @\\<^sub>v x2) \\<Longrightarrow>\n    \\<exists>x\\<in>carrier_vec (n + m). P x", "then"], ["proof (chain)\npicking this:\n  P x", "show \"(\\<exists> x \\<in> carrier_vec (n + m). P x)\""], ["proof (prove)\nusing this:\n  P x\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x", "using xcarr"], ["proof (prove)\nusing this:\n  P x\n  x \\<in> carrier_vec (n + m)\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec (n + m). P x", "by auto"], ["proof (state)\nthis:\n  \\<exists>x\\<in>carrier_vec (n + m). P x\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}