{"file_name": "/home/qj213/afp-2021-10-22/thys/Linear_Inequalities/Decomposition_Theorem.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Linear_Inequalities", "problem_names": ["lemma polyhedra_are_convex:\n  assumes A: \"A \\<in> carrier_mat nr n\"\n    and b: \"b \\<in> carrier_vec nr\"\n    and P: \"P = polyhedron A b\"\n  shows \"convex P\"", "lemma vec_first_lincomb_list:\n  assumes Xs: \"set Xs \\<subseteq> carrier_vec n\"\n    and nm: \"m \\<le> n\"\n  shows \"vec_first (n.lincomb_list c Xs) m =\n       m.lincomb_list c (map (\\<lambda> v. vec_first v m) Xs)\"", "lemma convex_hull_next_dim:\n  assumes \"n = m + 1\"\n    and X: \"X \\<subseteq> carrier_vec n\"\n    and \"finite X\"\n    and Xm1: \"\\<forall> y \\<in> X. y $ m = 1\"\n    and y_dim: \"y \\<in> carrier_vec n\"\n    and y: \"y $ m = 1\"\n  shows \"(vec_first y m \\<in> m.convex_hull {vec_first y m | y. y \\<in> X}) = (y \\<in> n.cone X)\"", "lemma cone_next_dim:\n  assumes \"n = m + 1\"\n    and X: \"X \\<subseteq> carrier_vec n\"\n    and \"finite X\"\n    and Xm0: \"\\<forall> y \\<in> X. y $ m = 0\"\n    and y_dim: \"y \\<in> carrier_vec n\"\n    and y: \"y $ m = 0\"\n  shows \"(vec_first y m \\<in> m.cone {vec_first y m | y. y \\<in> X}) = (y \\<in> n.cone X)\"", "lemma decomposition_theorem_polyhedra_1:\n  assumes A: \"A \\<in> carrier_mat nr n\"\n    and b: \"b \\<in> carrier_vec nr\"\n    and P: \"P = polyhedron A b\"\n  shows \"\\<exists> Q X. X \\<subseteq> carrier_vec n \\<and> finite X \\<and>\n    Q \\<subseteq> carrier_vec n \\<and> finite Q \\<and>\n    P = convex_hull Q + cone X \\<and>\n    (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow> b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter> Bounded_vec (det_bound n (max 1 Bnd))\n    \\<and> Q \\<subseteq> Bounded_vec (det_bound n (max 1 Bnd)))\"", "lemma decomposition_theorem_polyhedra_2:\n  assumes Q: \"Q \\<subseteq> carrier_vec n\" and fin_Q: \"finite Q\"\n    and X: \"X \\<subseteq> carrier_vec n\" and fin_X: \"finite X\"\n    and P: \"P = convex_hull Q + cone X\"\n  shows \"\\<exists>A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\"", "lemma decomposition_theorem_polyhedra:\n  \"(\\<exists> A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b) \\<longleftrightarrow>\n   (\\<exists> Q X. Q \\<union> X \\<subseteq> carrier_vec n \\<and> finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X)\" (is \"?l = ?r\")", "lemma polytope_equiv_bounded_polyhedron:\n  \"polytope P \\<longleftrightarrow>\n  (\\<exists>A b nr bnd. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd)\""], "translations": [["", "lemma polyhedra_are_convex:\n  assumes A: \"A \\<in> carrier_mat nr n\"\n    and b: \"b \\<in> carrier_vec nr\"\n    and P: \"P = polyhedron A b\"\n  shows \"convex P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex P", "proof (intro convexI)"], ["proof (state)\ngoal (2 subgoals):\n 1. P \\<subseteq> carrier_vec n\n 2. \\<And>a x y.\n       \\<lbrakk>x \\<in> P; y \\<in> P; (0::'a) \\<le> a;\n        a \\<le> (1::'a)\\<rbrakk>\n       \\<Longrightarrow> a \\<cdot>\\<^sub>v x +\n                         ((1::'a) - a) \\<cdot>\\<^sub>v y\n                         \\<in> P", "show Pcarr: \"P \\<subseteq> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "using assms"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  P = polyhedron A b\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "unfolding polyhedron_def"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  P \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<And>a x y.\n       \\<lbrakk>x \\<in> P; y \\<in> P; (0::'a) \\<le> a;\n        a \\<le> (1::'a)\\<rbrakk>\n       \\<Longrightarrow> a \\<cdot>\\<^sub>v x +\n                         ((1::'a) - a) \\<cdot>\\<^sub>v y\n                         \\<in> P", "fix a :: 'a and x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a x y.\n       \\<lbrakk>x \\<in> P; y \\<in> P; (0::'a) \\<le> a;\n        a \\<le> (1::'a)\\<rbrakk>\n       \\<Longrightarrow> a \\<cdot>\\<^sub>v x +\n                         ((1::'a) - a) \\<cdot>\\<^sub>v y\n                         \\<in> P", "assume xy: \"x \\<in> P\" \"y \\<in> P\" and a: \"0 \\<le> a\" \"a \\<le> 1\""], ["proof (state)\nthis:\n  x \\<in> P\n  y \\<in> P\n  (0::'a) \\<le> a\n  a \\<le> (1::'a)\n\ngoal (1 subgoal):\n 1. \\<And>a x y.\n       \\<lbrakk>x \\<in> P; y \\<in> P; (0::'a) \\<le> a;\n        a \\<le> (1::'a)\\<rbrakk>\n       \\<Longrightarrow> a \\<cdot>\\<^sub>v x +\n                         ((1::'a) - a) \\<cdot>\\<^sub>v y\n                         \\<in> P", "from xy[unfolded P polyhedron_def]"], ["proof (chain)\npicking this:\n  x \\<in> {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n  y \\<in> {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}", "have x: \"x \\<in> carrier_vec n\" and y: \"y \\<in> carrier_vec n\" and le: \"A *\\<^sub>v x \\<le> b\" \"A *\\<^sub>v y \\<le> b\""], ["proof (prove)\nusing this:\n  x \\<in> {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n  y \\<in> {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n &&&\n    y \\<in> carrier_vec n &&&\n    A *\\<^sub>v x \\<le> b &&& A *\\<^sub>v y \\<le> b", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n  y \\<in> carrier_vec n\n  A *\\<^sub>v x \\<le> b\n  A *\\<^sub>v y \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>a x y.\n       \\<lbrakk>x \\<in> P; y \\<in> P; (0::'a) \\<le> a;\n        a \\<le> (1::'a)\\<rbrakk>\n       \\<Longrightarrow> a \\<cdot>\\<^sub>v x +\n                         ((1::'a) - a) \\<cdot>\\<^sub>v y\n                         \\<in> P", "show \"a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y \\<in> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> P", "unfolding P polyhedron_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}", "proof (intro CollectI conjI)"], ["proof (state)\ngoal (2 subgoals):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> carrier_vec n\n 2. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<le> b", "from x"], ["proof (chain)\npicking this:\n  x \\<in> carrier_vec n", "have ax: \"a \\<cdot>\\<^sub>v x \\<in> carrier_vec n\""], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. a \\<cdot>\\<^sub>v x \\<in> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  a \\<cdot>\\<^sub>v x \\<in> carrier_vec n\n\ngoal (2 subgoals):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> carrier_vec n\n 2. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<le> b", "from y"], ["proof (chain)\npicking this:\n  y \\<in> carrier_vec n", "have ay: \"(1 - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n\""], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n\n\ngoal (2 subgoals):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> carrier_vec n\n 2. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<le> b", "show \"a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> carrier_vec n", "using ax ay"], ["proof (prove)\nusing this:\n  a \\<cdot>\\<^sub>v x \\<in> carrier_vec n\n  ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y\n    \\<in> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<le> b", "show \"A *\\<^sub>v (a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y) \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<le> b", "proof (intro lesseq_vecI[OF _ b])"], ["proof (state)\ngoal (2 subgoals):\n 1. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<in> carrier_vec nr\n 2. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "show \"A *\\<^sub>v (a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y) \\<in> carrier_vec nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<in> carrier_vec nr", "using A x y"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr n\n  x \\<in> carrier_vec n\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n    \\<in> carrier_vec nr", "by auto"], ["proof (state)\nthis:\n  A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n  \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "assume i: \"i < nr\""], ["proof (state)\nthis:\n  i < nr\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "from lesseq_vecD[OF b le(1) i] lesseq_vecD[OF b le(2) i]"], ["proof (chain)\npicking this:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n  (A *\\<^sub>v y) $ i \\<le> b $ i", "have le: \"(A *\\<^sub>v x) $ i \\<le> b $ i\" \"(A *\\<^sub>v y) $ i \\<le> b $ i\""], ["proof (prove)\nusing this:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n  (A *\\<^sub>v y) $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. (A *\\<^sub>v x) $ i \\<le> b $ i &&& (A *\\<^sub>v y) $ i \\<le> b $ i", "by auto"], ["proof (state)\nthis:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n  (A *\\<^sub>v y) $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "have \"(A *\\<^sub>v (a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y)) $ i = a * (A *\\<^sub>v x) $ i + (1 - a) * (A *\\<^sub>v y) $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n    i =\n    a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i", "using A x y i"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr n\n  x \\<in> carrier_vec n\n  y \\<in> carrier_vec n\n  i < nr\n\ngoal (1 subgoal):\n 1. (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n    i =\n    a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i", "by (auto simp: scalar_prod_add_distrib[of _ n])"], ["proof (state)\nthis:\n  (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n  i =\n  a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "also"], ["proof (state)\nthis:\n  (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n  i =\n  a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "have \"\\<dots> \\<le> a * b $ i + (1 - a) * b $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i\n    \\<le> a * b $ i + ((1::'a) - a) * b $ i", "by (rule add_mono; rule mult_left_mono, insert le a, auto)"], ["proof (state)\nthis:\n  a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i\n  \\<le> a * b $ i + ((1::'a) - a) * b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "also"], ["proof (state)\nthis:\n  a * (A *\\<^sub>v x) $ i + ((1::'a) - a) * (A *\\<^sub>v y) $ i\n  \\<le> a * b $ i + ((1::'a) - a) * b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "have \"\\<dots> = b $ i\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a * b $ i + ((1::'a) - a) * b $ i = b $ i", "by (auto simp: field_simps)"], ["proof (state)\nthis:\n  a * b $ i + ((1::'a) - a) * b $ i = b $ i\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       i < nr \\<Longrightarrow>\n       (A *\\<^sub>v\n        (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n       i\n       \\<le> b $ i", "finally"], ["proof (chain)\npicking this:\n  (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $ i\n  \\<le> b $ i", "show \"(A *\\<^sub>v (a \\<cdot>\\<^sub>v x + (1 - a) \\<cdot>\\<^sub>v y)) $ i \\<le> b $ i\""], ["proof (prove)\nusing this:\n  (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $ i\n  \\<le> b $ i\n\ngoal (1 subgoal):\n 1. (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $\n    i\n    \\<le> b $ i", "."], ["proof (state)\nthis:\n  (A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)) $ i\n  \\<le> b $ i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  A *\\<^sub>v (a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y)\n  \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a \\<cdot>\\<^sub>v x + ((1::'a) - a) \\<cdot>\\<^sub>v y \\<in> P\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "locale gram_schmidt_m = n: gram_schmidt n f_ty + m: gram_schmidt m f_ty\n  for n m :: nat and f_ty\nbegin"], ["", "lemma vec_first_lincomb_list:\n  assumes Xs: \"set Xs \\<subseteq> carrier_vec n\"\n    and nm: \"m \\<le> n\"\n  shows \"vec_first (n.lincomb_list c Xs) m =\n       m.lincomb_list c (map (\\<lambda> v. vec_first v m) Xs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m =\n    m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs)", "using Xs"], ["proof (prove)\nusing this:\n  set Xs \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m =\n    m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs)", "proof (induction Xs arbitrary: c)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>c.\n       set [] \\<subseteq> carrier_vec n \\<Longrightarrow>\n       vec_first (n.lincomb_list c []) m =\n       m.lincomb_list c (map (\\<lambda>v. vec_first v m) [])\n 2. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "case Nil"], ["proof (state)\nthis:\n  set [] \\<subseteq> carrier_vec n\n\ngoal (2 subgoals):\n 1. \\<And>c.\n       set [] \\<subseteq> carrier_vec n \\<Longrightarrow>\n       vec_first (n.lincomb_list c []) m =\n       m.lincomb_list c (map (\\<lambda>v. vec_first v m) [])\n 2. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c []) m =\n    m.lincomb_list c (map (\\<lambda>v. vec_first v m) [])", "by (simp add: nm)"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c []) m =\n  m.lincomb_list c (map (\\<lambda>v. vec_first v m) [])\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "case (Cons x Xs)"], ["proof (state)\nthis:\n  set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  vec_first (n.lincomb_list ?c4 Xs) m =\n  m.lincomb_list ?c4 (map (\\<lambda>v. vec_first v m) Xs)\n  set (x # Xs) \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "from Cons.prems"], ["proof (chain)\npicking this:\n  set (x # Xs) \\<subseteq> carrier_vec n", "have x: \"x \\<in> carrier_vec n\" and Xs: \"set Xs \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  set (x # Xs) \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n &&& set Xs \\<subseteq> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n  set Xs \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "have \"vec_first (n.lincomb_list c (x # Xs)) m =\n          vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c (x # Xs)) m =\n    vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m", "by auto"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c (x # Xs)) m =\n  vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "also"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c (x # Xs)) m =\n  vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "have \"\\<dots> = vec_first (c 0 \\<cdot>\\<^sub>v x) m + vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs)\n     m =\n    vec_first (c 0 \\<cdot>\\<^sub>v x) m +\n    vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m", "using vec_first_add[of m \"c 0 \\<cdot>\\<^sub>v x\"] x n.lincomb_list_carrier[OF Xs, of \"c \\<circ> Suc\"] nm"], ["proof (prove)\nusing this:\n  \\<lbrakk>m \\<le> dim_vec (c 0 \\<cdot>\\<^sub>v x);\n   m \\<le> dim_vec ?y\\<rbrakk>\n  \\<Longrightarrow> vec_first (c 0 \\<cdot>\\<^sub>v x + ?y) m =\n                    vec_first (c 0 \\<cdot>\\<^sub>v x) m + vec_first ?y m\n  x \\<in> carrier_vec n\n  n.lincomb_list (c \\<circ> Suc) Xs \\<in> carrier_vec n\n  m \\<le> n\n\ngoal (1 subgoal):\n 1. vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs)\n     m =\n    vec_first (c 0 \\<cdot>\\<^sub>v x) m +\n    vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m", "by simp"], ["proof (state)\nthis:\n  vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m =\n  vec_first (c 0 \\<cdot>\\<^sub>v x) m +\n  vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "also"], ["proof (state)\nthis:\n  vec_first (c 0 \\<cdot>\\<^sub>v x + n.lincomb_list (c \\<circ> Suc) Xs) m =\n  vec_first (c 0 \\<cdot>\\<^sub>v x) m +\n  vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "have \"vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m", "using vec_first_smult[OF nm, of x \"c 0\"] Cons.prems"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n \\<Longrightarrow>\n  vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m\n  set (x # Xs) \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m", "by auto"], ["proof (state)\nthis:\n  vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "also"], ["proof (state)\nthis:\n  vec_first (c 0 \\<cdot>\\<^sub>v x) m = c 0 \\<cdot>\\<^sub>v vec_first x m\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "have \"vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m =\n               m.lincomb_list (c \\<circ> Suc) (map (\\<lambda> v. vec_first v m) Xs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m =\n    m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs)", "using Cons"], ["proof (prove)\nusing this:\n  set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  vec_first (n.lincomb_list ?c4 Xs) m =\n  m.lincomb_list ?c4 (map (\\<lambda>v. vec_first v m) Xs)\n  set (x # Xs) \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m =\n    m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs)", "by simp"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m =\n  m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs)\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "also"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list (c \\<circ> Suc) Xs) m =\n  m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs)\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "have \"c 0 \\<cdot>\\<^sub>v vec_first x m + \\<dots> =\n               m.lincomb_list c (map (\\<lambda> v. vec_first v m) (x # Xs))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c 0 \\<cdot>\\<^sub>v vec_first x m +\n    m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs) =\n    m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))", "by simp"], ["proof (state)\nthis:\n  c 0 \\<cdot>\\<^sub>v vec_first x m +\n  m.lincomb_list (c \\<circ> Suc) (map (\\<lambda>v. vec_first v m) Xs) =\n  m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))\n\ngoal (1 subgoal):\n 1. \\<And>a Xs c.\n       \\<lbrakk>\\<And>c.\n                   set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n                   vec_first (n.lincomb_list c Xs) m =\n                   m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs);\n        set (a # Xs) \\<subseteq> carrier_vec n\\<rbrakk>\n       \\<Longrightarrow> vec_first (n.lincomb_list c (a # Xs)) m =\n                         m.lincomb_list c\n                          (map (\\<lambda>v. vec_first v m) (a # Xs))", "finally"], ["proof (chain)\npicking this:\n  vec_first (n.lincomb_list c (x # Xs)) m =\n  m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))", "show ?case"], ["proof (prove)\nusing this:\n  vec_first (n.lincomb_list c (x # Xs)) m =\n  m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c (x # Xs)) m =\n    m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))", "by auto"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c (x # Xs)) m =\n  m.lincomb_list c (map (\\<lambda>v. vec_first v m) (x # Xs))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma convex_hull_next_dim:\n  assumes \"n = m + 1\"\n    and X: \"X \\<subseteq> carrier_vec n\"\n    and \"finite X\"\n    and Xm1: \"\\<forall> y \\<in> X. y $ m = 1\"\n    and y_dim: \"y \\<in> carrier_vec n\"\n    and y: \"y $ m = 1\"\n  shows \"(vec_first y m \\<in> m.convex_hull {vec_first y m | y. y \\<in> X}) = (y \\<in> n.cone X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "from \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X", "obtain Xs where Xs: \"X = set Xs\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using finite_list"], ["proof (prove)\nusing this:\n  finite X\n  finite ?A \\<Longrightarrow> \\<exists>xs. set xs = ?A\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  X = set Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "let ?Y = \"{vec_first y m | y. y \\<in> X}\""], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "let ?Ys = \"map (\\<lambda> y. vec_first y m) Xs\""], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have Ys: \"?Y = set ?Ys\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)", "using Xs"], ["proof (prove)\nusing this:\n  X = set Xs\n\ngoal (1 subgoal):\n 1. {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)", "by auto"], ["proof (state)\nthis:\n  {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "define x where \"x = vec_first y m\""], ["proof (state)\nthis:\n  x = vec_first y m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  x = vec_first y m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"y = vec_first y m @\\<^sub>v vec_last y 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_last y 1", "using \\<open>n = m + 1\\<close> vec_first_last_append y_dim"], ["proof (prove)\nusing this:\n  n = m + 1\n  ?v \\<in> carrier_vec (?n + ?m) \\<Longrightarrow>\n  vec_first ?v ?n @\\<^sub>v vec_last ?v ?m = ?v\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_last y 1", "by auto"], ["proof (state)\nthis:\n  y = vec_first y m @\\<^sub>v vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  y = vec_first y m @\\<^sub>v vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)", "using vec_of_scal_dim_1[of \"vec_last y 1\"]"], ["proof (prove)\nusing this:\n  (vec_last y 1 \\<in> carrier_vec 1) =\n  (vec_last y 1 = vec_of_scal (vec_last y 1 $ 0))\n\ngoal (1 subgoal):\n 1. vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)", "by simp"], ["proof (state)\nthis:\n  vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_last y 1 $ 0 = y $ m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last y 1 $ 0 = y $ m", "using y_dim \\<open>n = m + 1\\<close> vec_last_index[of y m 1 0]"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n  n = m + 1\n  \\<lbrakk>y \\<in> carrier_vec (m + 1); 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vec_last y 1 $ 0 = y $ (m + 0)\n\ngoal (1 subgoal):\n 1. vec_last y 1 $ 0 = y $ m", "by auto"], ["proof (state)\nthis:\n  vec_last y 1 $ 0 = y $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "finally"], ["proof (chain)\npicking this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)", "have \"y = x @\\<^sub>v vec_of_scal 1\""], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n\ngoal (1 subgoal):\n 1. y = x @\\<^sub>v vec_of_scal (1::'a)", "unfolding x_def"], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_of_scal (1::'a)", "using y"], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n  y $ m = (1::'a)\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_of_scal (1::'a)", "by simp"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "note xy = this"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "assume \"y \\<in> n.cone X\""], ["proof (state)\nthis:\n  y \\<in> n.cone X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "then"], ["proof (chain)\npicking this:\n  y \\<in> n.cone X", "obtain c where x: \"n.nonneg_lincomb c X y\""], ["proof (prove)\nusing this:\n  y \\<in> n.cone X\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        n.nonneg_lincomb c X y \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using n.cone_iff_finite_cone[OF X] \\<open>finite X\\<close>"], ["proof (prove)\nusing this:\n  y \\<in> n.cone X\n  finite X \\<Longrightarrow> n.cone X = n.finite_cone X\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        n.nonneg_lincomb c X y \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding n.finite_cone_def"], ["proof (prove)\nusing this:\n  y \\<in> n.cone X\n  finite X \\<Longrightarrow>\n  n.cone X =\n  {b. \\<exists>c. n.nonneg_lincomb c (if finite X then X else {}) b}\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        n.nonneg_lincomb c X y \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  n.nonneg_lincomb c X y\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"1 = y $ m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) = y $ m", "by (simp add: y)"], ["proof (state)\nthis:\n  (1::'a) = y $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  (1::'a) = y $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"y = n.lincomb c X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = n.lincomb c X", "using x"], ["proof (prove)\nusing this:\n  n.nonneg_lincomb c X y\n\ngoal (1 subgoal):\n 1. y = n.lincomb c X", "unfolding n.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  n.lincomb c X = y \\<and> c ` X \\<subseteq> Collect ((\\<le>) (0::'a))\n\ngoal (1 subgoal):\n 1. y = n.lincomb c X", "by simp"], ["proof (state)\nthis:\n  y = n.lincomb c X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  y = n.lincomb c X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> $ m = (\\<Sum>x\\<in>X. c x * x $ m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.lincomb c X $ m = (\\<Sum>x\\<in>X. c x * x $ m)", "using n.lincomb_index[OF _ X] \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  ?i < n \\<Longrightarrow>\n  n.lincomb ?a X $ ?i = (\\<Sum>x\\<in>X. ?a x * x $ ?i)\n  n = m + 1\n\ngoal (1 subgoal):\n 1. n.lincomb c X $ m = (\\<Sum>x\\<in>X. c x * x $ m)", "by simp"], ["proof (state)\nthis:\n  n.lincomb c X $ m = (\\<Sum>x\\<in>X. c x * x $ m)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  n.lincomb c X $ m = (\\<Sum>x\\<in>X. c x * x $ m)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> = sum c X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>x\\<in>X. c x * x $ m) = sum c X", "by (rule n.R.finsum_restrict, auto, rule restrict_ext, simp add: Xm1)"], ["proof (state)\nthis:\n  (\\<Sum>x\\<in>X. c x * x $ m) = sum c X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "finally"], ["proof (chain)\npicking this:\n  (1::'a) = sum c X", "have \"y \\<in> n.convex_hull X\""], ["proof (prove)\nusing this:\n  (1::'a) = sum c X\n\ngoal (1 subgoal):\n 1. y \\<in> n.convex_hull X", "unfolding n.convex_hull_def n.convex_lincomb_def"], ["proof (prove)\nusing this:\n  (1::'a) = sum c X\n\ngoal (1 subgoal):\n 1. y \\<in> {x. \\<exists>Ws c.\n                   finite Ws \\<and>\n                   Ws \\<subseteq> X \\<and>\n                   n.nonneg_lincomb c Ws x \\<and> sum c Ws = (1::'a)}", "using \\<open>finite X\\<close> x"], ["proof (prove)\nusing this:\n  (1::'a) = sum c X\n  finite X\n  n.nonneg_lincomb c X y\n\ngoal (1 subgoal):\n 1. y \\<in> {x. \\<exists>Ws c.\n                   finite Ws \\<and>\n                   Ws \\<subseteq> X \\<and>\n                   n.nonneg_lincomb c Ws x \\<and> sum c Ws = (1::'a)}", "by auto"], ["proof (state)\nthis:\n  y \\<in> n.convex_hull X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  y \\<in> n.cone X \\<Longrightarrow> y \\<in> n.convex_hull X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  y \\<in> n.cone X \\<Longrightarrow> y \\<in> n.convex_hull X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"n.convex_hull X \\<subseteq> n.cone X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.convex_hull X \\<subseteq> n.cone X", "unfolding n.convex_hull_def n.convex_lincomb_def n.finite_cone_def n.cone_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x. \\<exists>Ws c.\n           finite Ws \\<and>\n           Ws \\<subseteq> X \\<and>\n           n.nonneg_lincomb c Ws x \\<and> sum c Ws = (1::'a)}\n    \\<subseteq> {x. \\<exists>Ws.\n                       finite Ws \\<and>\n                       Ws \\<subseteq> X \\<and>\n                       x \\<in> {b. \\<exists>c.\nn.nonneg_lincomb c (if finite Ws then Ws else {}) b}}", "using \\<open>finite X\\<close>"], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. {x. \\<exists>Ws c.\n           finite Ws \\<and>\n           Ws \\<subseteq> X \\<and>\n           n.nonneg_lincomb c Ws x \\<and> sum c Ws = (1::'a)}\n    \\<subseteq> {x. \\<exists>Ws.\n                       finite Ws \\<and>\n                       Ws \\<subseteq> X \\<and>\n                       x \\<in> {b. \\<exists>c.\nn.nonneg_lincomb c (if finite Ws then Ws else {}) b}}", "by auto"], ["proof (state)\nthis:\n  n.convex_hull X \\<subseteq> n.cone X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  n.convex_hull X \\<subseteq> n.cone X\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"n.convex_hull X = n.convex_hull_list Xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.convex_hull X = n.convex_hull_list Xs", "by (rule n.finite_convex_hull_iff_convex_hull_list[OF X Xs])"], ["proof (state)\nthis:\n  n.convex_hull X = n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  n.convex_hull X = n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  n.convex_hull X = n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "assume \"y \\<in> n.convex_hull_list Xs\""], ["proof (state)\nthis:\n  y \\<in> n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "then"], ["proof (chain)\npicking this:\n  y \\<in> n.convex_hull_list Xs", "obtain c where c: \"n.lincomb_list c Xs = y\"\n      and c0: \"\\<forall> i < length Xs. c i \\<ge> 0\" and c1: \"sum c {0..<length Xs} = 1\""], ["proof (prove)\nusing this:\n  y \\<in> n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>n.lincomb_list c Xs = y;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i;\n         sum c {0..<length Xs} = (1::'a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding n.convex_hull_list_def n.convex_lincomb_list_def\n        n.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  y \\<in> {x. \\<exists>c.\n                 (n.lincomb_list c Xs = x \\<and>\n                  (\\<forall>i<length Xs. (0::'a) \\<le> c i)) \\<and>\n                 sum c {0..<length Xs} = (1::'a)}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>n.lincomb_list c Xs = y;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i;\n         sum c {0..<length Xs} = (1::'a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by fast"], ["proof (state)\nthis:\n  n.lincomb_list c Xs = y\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n  sum c {0..<length Xs} = (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"m.lincomb_list c ?Ys = vec_first y m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m", "using c vec_first_lincomb_list[of Xs c] X Xs \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n  \\<lbrakk>set Xs \\<subseteq> carrier_vec n; m \\<le> n\\<rbrakk>\n  \\<Longrightarrow> vec_first (n.lincomb_list c Xs) m =\n                    m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs)\n  X \\<subseteq> carrier_vec n\n  X = set Xs\n  n = m + 1\n\ngoal (1 subgoal):\n 1. m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m", "by simp"], ["proof (state)\nthis:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "hence \"x \\<in> m.convex_hull_list ?Ys\""], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m\n\ngoal (1 subgoal):\n 1. x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)", "unfolding m.convex_hull_list_def m.convex_lincomb_list_def\n        m.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m\n\ngoal (1 subgoal):\n 1. x \\<in> {x. \\<exists>c.\n                   (m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) =\n                    x \\<and>\n                    (\\<forall>i<length (map (\\<lambda>y. vec_first y m) Xs).\n                        (0::'a) \\<le> c i)) \\<and>\n                   sum c {0..<length (map (\\<lambda>y. vec_first y m) Xs)} =\n                   (1::'a)}", "using x_def c0 c1 x_def"], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m\n  x = vec_first y m\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n  sum c {0..<length Xs} = (1::'a)\n  x = vec_first y m\n\ngoal (1 subgoal):\n 1. x \\<in> {x. \\<exists>c.\n                   (m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) =\n                    x \\<and>\n                    (\\<forall>i<length (map (\\<lambda>y. vec_first y m) Xs).\n                        (0::'a) \\<le> c i)) \\<and>\n                   sum c {0..<length (map (\\<lambda>y. vec_first y m) Xs)} =\n                   (1::'a)}", "by auto"], ["proof (state)\nthis:\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "assume \"x \\<in> m.convex_hull_list ?Ys\""], ["proof (state)\nthis:\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "then"], ["proof (chain)\npicking this:\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)", "obtain c where x: \"m.lincomb_list c ?Ys = x\"\n      and c0: \"\\<forall> i < length Xs. c i \\<ge> 0\"\n      and c1: \"sum c {0..<length Xs} = 1\""], ["proof (prove)\nusing this:\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i;\n         sum c {0..<length Xs} = (1::'a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding m.convex_hull_list_def m.convex_lincomb_list_def\n        m.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  x \\<in> {x. \\<exists>c.\n                 (m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) =\n                  x \\<and>\n                  (\\<forall>i<length (map (\\<lambda>y. vec_first y m) Xs).\n                      (0::'a) \\<le> c i)) \\<and>\n                 sum c {0..<length (map (\\<lambda>y. vec_first y m) Xs)} =\n                 (1::'a)}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i;\n         sum c {0..<length Xs} = (1::'a)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n  sum c {0..<length Xs} = (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"n.lincomb_list c Xs $ m = (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs $ m = (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)", "using n.lincomb_list_index[of m Xs c] \\<open>n = m + 1\\<close> Xs X"], ["proof (prove)\nusing this:\n  \\<lbrakk>m < n; set Xs \\<subseteq> carrier_vec n\\<rbrakk>\n  \\<Longrightarrow> n.lincomb_list c Xs $ m =\n                    (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)\n  n = m + 1\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs $ m = (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)", "by fastforce"], ["proof (state)\nthis:\n  n.lincomb_list c Xs $ m = (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  n.lincomb_list c Xs $ m = (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> = sum c {0..<length Xs}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m) = sum c {0..<length Xs}", "apply(rule n.R.finsum_restrict, auto, rule restrict_ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>j.\n       j \\<in> {0..<length Xs} \\<Longrightarrow> c j * Xs ! j $ m = c j", "by (simp add: Xm1 Xs)"], ["proof (state)\nthis:\n  (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m) = sum c {0..<length Xs}\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m) = sum c {0..<length Xs}\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. sum c {0..<length Xs} = (1::'a)", "by (rule c1)"], ["proof (state)\nthis:\n  sum c {0..<length Xs} = (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "finally"], ["proof (chain)\npicking this:\n  n.lincomb_list c Xs $ m = (1::'a)", "have \"vec_last (n.lincomb_list c Xs) 1 $ 0 = 1\""], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs $ m = (1::'a)\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 $ 0 = (1::'a)", "using vec_of_scal_dim_1 vec_last_index[of \"n.lincomb_list c Xs\" m 1 0]\n        n.lincomb_list_carrier Xs X \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs $ m = (1::'a)\n  (?v \\<in> carrier_vec 1) = (?v = vec_of_scal (?v $ 0))\n  \\<lbrakk>n.lincomb_list c Xs \\<in> carrier_vec (m + 1); 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vec_last (n.lincomb_list c Xs) 1 $ 0 =\n                    n.lincomb_list c Xs $ (m + 0)\n  set ?vs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  n.lincomb_list ?c ?vs \\<in> carrier_vec n\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n  n = m + 1\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 $ 0 = (1::'a)", "by simp"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "hence \"vec_last (n.lincomb_list c Xs) 1 = vec_of_scal 1\""], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = (1::'a)\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)", "using vec_of_scal_dim_1"], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = (1::'a)\n  (?v \\<in> carrier_vec 1) = (?v = vec_of_scal (?v $ 0))\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)", "by auto"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_first (n.lincomb_list c Xs) m = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m = x", "using vec_first_lincomb_list \\<open>n = m + 1\\<close> Xs X x"], ["proof (prove)\nusing this:\n  \\<lbrakk>set ?Xs \\<subseteq> carrier_vec n; m \\<le> n\\<rbrakk>\n  \\<Longrightarrow> vec_first (n.lincomb_list ?c ?Xs) m =\n                    m.lincomb_list ?c (map (\\<lambda>v. vec_first v m) ?Xs)\n  n = m + 1\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m = x", "by auto"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c Xs) m = x\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c Xs) m = x\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"n.lincomb_list c Xs =\n                   vec_first (n.lincomb_list c Xs) m @\\<^sub>v vec_last (n.lincomb_list c Xs) 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs =\n    vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n    vec_last (n.lincomb_list c Xs) 1", "using vec_first_last_append Xs X n.lincomb_list_carrier \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  ?v \\<in> carrier_vec (?n + ?m) \\<Longrightarrow>\n  vec_first ?v ?n @\\<^sub>v vec_last ?v ?m = ?v\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n  set ?vs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  n.lincomb_list ?c ?vs \\<in> carrier_vec n\n  n = m + 1\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs =\n    vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n    vec_last (n.lincomb_list c Xs) 1", "by auto"], ["proof (state)\nthis:\n  n.lincomb_list c Xs =\n  vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n  vec_last (n.lincomb_list c Xs) 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "ultimately"], ["proof (chain)\npicking this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)\n  vec_first (n.lincomb_list c Xs) m = x\n  n.lincomb_list c Xs =\n  vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n  vec_last (n.lincomb_list c Xs) 1", "have \"n.lincomb_list c Xs = y\""], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)\n  vec_first (n.lincomb_list c Xs) m = x\n  n.lincomb_list c Xs =\n  vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n  vec_last (n.lincomb_list c Xs) 1\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs = y", "using xy"], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_of_scal (1::'a)\n  vec_first (n.lincomb_list c Xs) m = x\n  n.lincomb_list c Xs =\n  vec_first (n.lincomb_list c Xs) m @\\<^sub>v\n  vec_last (n.lincomb_list c Xs) 1\n  y = x @\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs = y", "by simp"], ["proof (state)\nthis:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "hence \"y \\<in> n.convex_hull_list Xs\""], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. y \\<in> n.convex_hull_list Xs", "unfolding n.convex_hull_list_def n.convex_lincomb_list_def\n        n.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. y \\<in> {x. \\<exists>c.\n                   (n.lincomb_list c Xs = x \\<and>\n                    (\\<forall>i<length Xs. (0::'a) \\<le> c i)) \\<and>\n                   sum c {0..<length Xs} = (1::'a)}", "using c0 c1"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n  sum c {0..<length Xs} = (1::'a)\n\ngoal (1 subgoal):\n 1. y \\<in> {x. \\<exists>c.\n                   (n.lincomb_list c Xs = x \\<and>\n                    (\\<forall>i<length Xs. (0::'a) \\<le> c i)) \\<and>\n                   sum c {0..<length Xs} = (1::'a)}", "by blast"], ["proof (state)\nthis:\n  y \\<in> n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  x \\<in> m.convex_hull_list\n           (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  x \\<in> m.convex_hull_list\n           (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.convex_hull_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"m.convex_hull ?Y = m.convex_hull_list ?Ys\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m.convex_hull {vec_first y m |y. y \\<in> X} =\n    m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)", "using m.finite_convex_hull_iff_convex_hull_list[OF _ Ys]"], ["proof (prove)\nusing this:\n  {vec_first y m |y. y \\<in> X} \\<subseteq> carrier_vec m \\<Longrightarrow>\n  m.convex_hull {vec_first y m |y. y \\<in> X} =\n  m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. m.convex_hull {vec_first y m |y. y \\<in> X} =\n    m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)", "by fastforce"], ["proof (state)\nthis:\n  m.convex_hull {vec_first y m |y. y \\<in> X} =\n  m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "ultimately"], ["proof (chain)\npicking this:\n  y \\<in> n.cone X \\<Longrightarrow> y \\<in> n.convex_hull X\n  n.convex_hull X \\<subseteq> n.cone X\n  n.convex_hull X = n.convex_hull_list Xs\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n  x \\<in> m.convex_hull_list\n           (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.convex_hull_list Xs\n  m.convex_hull {vec_first y m |y. y \\<in> X} =\n  m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<in> n.cone X \\<Longrightarrow> y \\<in> n.convex_hull X\n  n.convex_hull X \\<subseteq> n.cone X\n  n.convex_hull X = n.convex_hull_list Xs\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  x \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n  x \\<in> m.convex_hull_list\n           (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.convex_hull_list Xs\n  m.convex_hull {vec_first y m |y. y \\<in> X} =\n  m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "unfolding x_def"], ["proof (prove)\nusing this:\n  y \\<in> n.cone X \\<Longrightarrow> y \\<in> n.convex_hull X\n  n.convex_hull X \\<subseteq> n.cone X\n  n.convex_hull X = n.convex_hull_list Xs\n  y \\<in> n.convex_hull_list Xs \\<Longrightarrow>\n  vec_first y m\n  \\<in> m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n  vec_first y m\n  \\<in> m.convex_hull_list\n         (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.convex_hull_list Xs\n  m.convex_hull {vec_first y m |y. y \\<in> X} =\n  m.convex_hull_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "by blast"], ["proof (state)\nthis:\n  (vec_first y m \\<in> m.convex_hull {vec_first y m |y. y \\<in> X}) =\n  (y \\<in> n.cone X)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma cone_next_dim:\n  assumes \"n = m + 1\"\n    and X: \"X \\<subseteq> carrier_vec n\"\n    and \"finite X\"\n    and Xm0: \"\\<forall> y \\<in> X. y $ m = 0\"\n    and y_dim: \"y \\<in> carrier_vec n\"\n    and y: \"y $ m = 0\"\n  shows \"(vec_first y m \\<in> m.cone {vec_first y m | y. y \\<in> X}) = (y \\<in> n.cone X)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "from \\<open>finite X\\<close>"], ["proof (chain)\npicking this:\n  finite X", "obtain Xs where Xs: \"X = set Xs\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using finite_list"], ["proof (prove)\nusing this:\n  finite X\n  finite ?A \\<Longrightarrow> \\<exists>xs. set xs = ?A\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  X = set Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "let ?Y = \"{vec_first y m | y. y \\<in> X}\""], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "let ?Ys = \"map (\\<lambda> y. vec_first y m) Xs\""], ["proof (state)\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have Ys: \"?Y = set ?Ys\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)", "using Xs"], ["proof (prove)\nusing this:\n  X = set Xs\n\ngoal (1 subgoal):\n 1. {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)", "by auto"], ["proof (state)\nthis:\n  {vec_first y m |y. y \\<in> X} = set (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "define x where \"x = vec_first y m\""], ["proof (state)\nthis:\n  x = vec_first y m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  x = vec_first y m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"y = vec_first y m @\\<^sub>v vec_last y 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_last y 1", "using \\<open>n = m + 1\\<close> vec_first_last_append y_dim"], ["proof (prove)\nusing this:\n  n = m + 1\n  ?v \\<in> carrier_vec (?n + ?m) \\<Longrightarrow>\n  vec_first ?v ?n @\\<^sub>v vec_last ?v ?m = ?v\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_last y 1", "by auto"], ["proof (state)\nthis:\n  y = vec_first y m @\\<^sub>v vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  y = vec_first y m @\\<^sub>v vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)", "using vec_of_scal_dim_1[of \"vec_last y 1\"]"], ["proof (prove)\nusing this:\n  (vec_last y 1 \\<in> carrier_vec 1) =\n  (vec_last y 1 = vec_of_scal (vec_last y 1 $ 0))\n\ngoal (1 subgoal):\n 1. vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)", "by simp"], ["proof (state)\nthis:\n  vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  vec_last y 1 = vec_of_scal (vec_last y 1 $ 0)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_last y 1 $ 0 = y $ m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last y 1 $ 0 = y $ m", "using y_dim \\<open>n = m + 1\\<close> vec_last_index[of y m 1 0]"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n  n = m + 1\n  \\<lbrakk>y \\<in> carrier_vec (m + 1); 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vec_last y 1 $ 0 = y $ (m + 0)\n\ngoal (1 subgoal):\n 1. vec_last y 1 $ 0 = y $ m", "by auto"], ["proof (state)\nthis:\n  vec_last y 1 $ 0 = y $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "finally"], ["proof (chain)\npicking this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)", "have \"y = x @\\<^sub>v vec_of_scal 0\""], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n\ngoal (1 subgoal):\n 1. y = x @\\<^sub>v vec_of_scal (0::'a)", "unfolding x_def"], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_of_scal (0::'a)", "using y"], ["proof (prove)\nusing this:\n  y = vec_first y m @\\<^sub>v vec_of_scal (y $ m)\n  y $ m = (0::'a)\n\ngoal (1 subgoal):\n 1. y = vec_first y m @\\<^sub>v vec_of_scal (0::'a)", "by simp"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (0::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (0::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "note xy = this"], ["proof (state)\nthis:\n  y = x @\\<^sub>v vec_of_scal (0::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"n.cone X = n.cone_list Xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.cone X = n.cone_list Xs", "using n.cone_iff_finite_cone[OF X \\<open>finite X\\<close>] n.finite_cone_iff_cone_list[OF X Xs]"], ["proof (prove)\nusing this:\n  n.cone X = n.finite_cone X\n  n.finite_cone X = n.cone_list Xs\n\ngoal (1 subgoal):\n 1. n.cone X = n.cone_list Xs", "by simp"], ["proof (state)\nthis:\n  n.cone X = n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  n.cone X = n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  n.cone X = n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "assume \"y \\<in> n.cone_list Xs\""], ["proof (state)\nthis:\n  y \\<in> n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "then"], ["proof (chain)\npicking this:\n  y \\<in> n.cone_list Xs", "obtain c where y: \"n.lincomb_list c Xs = y\" and c: \"\\<forall> i < length Xs. c i \\<ge> 0\""], ["proof (prove)\nusing this:\n  y \\<in> n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>n.lincomb_list c Xs = y;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding n.cone_list_def n.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  y \\<in> {b. \\<exists>c.\n                 n.lincomb_list c Xs = b \\<and>\n                 (\\<forall>i<length Xs. (0::'a) \\<le> c i)}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>n.lincomb_list c Xs = y;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  n.lincomb_list c Xs = y\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "from y"], ["proof (chain)\npicking this:\n  n.lincomb_list c Xs = y", "have \"m.lincomb_list c ?Ys = x\""], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x", "unfolding x_def"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m", "using vec_first_lincomb_list Xs X \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n  \\<lbrakk>set ?Xs \\<subseteq> carrier_vec n; m \\<le> n\\<rbrakk>\n  \\<Longrightarrow> vec_first (n.lincomb_list ?c ?Xs) m =\n                    m.lincomb_list ?c (map (\\<lambda>v. vec_first v m) ?Xs)\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n  n = m + 1\n\ngoal (1 subgoal):\n 1. m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m", "by auto"], ["proof (state)\nthis:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "hence \"x \\<in> m.cone_list ?Ys\""], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n\ngoal (1 subgoal):\n 1. x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)", "using c"], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n\ngoal (1 subgoal):\n 1. x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)", "unfolding m.cone_list_def m.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n\ngoal (1 subgoal):\n 1. x \\<in> {b. \\<exists>c.\n                   m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) =\n                   b \\<and>\n                   (\\<forall>i<length (map (\\<lambda>y. vec_first y m) Xs).\n                       (0::'a) \\<le> c i)}", "by auto"], ["proof (state)\nthis:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "{"], ["proof (state)\nthis:\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "assume \"x \\<in> m.cone_list ?Ys\""], ["proof (state)\nthis:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "then"], ["proof (chain)\npicking this:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)", "obtain c where x: \"m.lincomb_list c ?Ys = x\" and c: \"\\<forall> i < length Xs. c i \\<ge> 0\""], ["proof (prove)\nusing this:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding m.cone_list_def m.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  x \\<in> {b. \\<exists>c.\n                 m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) =\n                 b \\<and>\n                 (\\<forall>i<length (map (\\<lambda>y. vec_first y m) Xs).\n                     (0::'a) \\<le> c i)}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x;\n         \\<forall>i<length Xs. (0::'a) \\<le> c i\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_last (n.lincomb_list c Xs) 1 $ 0 = n.lincomb_list c Xs $ m\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 $ 0 = n.lincomb_list c Xs $ m", "using \\<open>n = m + 1\\<close> n.lincomb_list_carrier X Xs vec_last_index[of _ m 1 0]"], ["proof (prove)\nusing this:\n  n = m + 1\n  set ?vs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  n.lincomb_list ?c ?vs \\<in> carrier_vec n\n  X \\<subseteq> carrier_vec n\n  X = set Xs\n  \\<lbrakk>?v \\<in> carrier_vec (m + 1); 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vec_last ?v 1 $ 0 = ?v $ (m + 0)\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 $ 0 = n.lincomb_list c Xs $ m", "by auto"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = n.lincomb_list c Xs $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = n.lincomb_list c Xs $ m\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs $ m = (0::'a)", "using n.lincomb_list_index[of m Xs c] Xs X \\<open>n = m + 1\\<close> Xm0"], ["proof (prove)\nusing this:\n  \\<lbrakk>m < n; set Xs \\<subseteq> carrier_vec n\\<rbrakk>\n  \\<Longrightarrow> n.lincomb_list c Xs $ m =\n                    (\\<Sum>j = 0..<length Xs. c j * Xs ! j $ m)\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n  n = m + 1\n  \\<forall>y\\<in>X. y $ m = (0::'a)\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs $ m = (0::'a)", "by simp"], ["proof (state)\nthis:\n  n.lincomb_list c Xs $ m = (0::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "also"], ["proof (state)\nthis:\n  n.lincomb_list c Xs $ m = (0::'a)\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"\\<dots> = vec_last y 1 $ 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (0::'a) = vec_last y 1 $ 0", "using y y_dim \\<open>n = m + 1\\<close> vec_last_index[of y m 1 0]"], ["proof (prove)\nusing this:\n  y $ m = (0::'a)\n  y \\<in> carrier_vec n\n  n = m + 1\n  \\<lbrakk>y \\<in> carrier_vec (m + 1); 0 < 1\\<rbrakk>\n  \\<Longrightarrow> vec_last y 1 $ 0 = y $ (m + 0)\n\ngoal (1 subgoal):\n 1. (0::'a) = vec_last y 1 $ 0", "by auto"], ["proof (state)\nthis:\n  (0::'a) = vec_last y 1 $ 0\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "finally"], ["proof (chain)\npicking this:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = vec_last y 1 $ 0", "have \"vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\""], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 $ 0 = vec_last y 1 $ 0\n\ngoal (1 subgoal):\n 1. vec_last (n.lincomb_list c Xs) 1 = vec_last y 1", "by fastforce"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"vec_first (n.lincomb_list c Xs) m = x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m = x", "using vec_first_lincomb_list[of Xs c] x X Xs \\<open>n = m + 1\\<close>"], ["proof (prove)\nusing this:\n  \\<lbrakk>set Xs \\<subseteq> carrier_vec n; m \\<le> n\\<rbrakk>\n  \\<Longrightarrow> vec_first (n.lincomb_list c Xs) m =\n                    m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs)\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = x\n  X \\<subseteq> carrier_vec n\n  X = set Xs\n  n = m + 1\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m = x", "unfolding x_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>set Xs \\<subseteq> carrier_vec n; m \\<le> n\\<rbrakk>\n  \\<Longrightarrow> vec_first (n.lincomb_list c Xs) m =\n                    m.lincomb_list c (map (\\<lambda>v. vec_first v m) Xs)\n  m.lincomb_list c (map (\\<lambda>y. vec_first y m) Xs) = vec_first y m\n  X \\<subseteq> carrier_vec n\n  X = set Xs\n  n = m + 1\n\ngoal (1 subgoal):\n 1. vec_first (n.lincomb_list c Xs) m = vec_first y m", "by simp"], ["proof (state)\nthis:\n  vec_first (n.lincomb_list c Xs) m = x\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "ultimately"], ["proof (chain)\npicking this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n  vec_first (n.lincomb_list c Xs) m = x", "have \"n.lincomb_list c Xs = y\""], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n  vec_first (n.lincomb_list c Xs) m = x\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs = y", "unfolding x_def"], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n  vec_first (n.lincomb_list c Xs) m = vec_first y m\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs = y", "using vec_first_last_append[of _ m 1] \\<open>n = m + 1\\<close> y_dim\n        n.lincomb_list_carrier[of Xs c] Xs X"], ["proof (prove)\nusing this:\n  vec_last (n.lincomb_list c Xs) 1 = vec_last y 1\n  vec_first (n.lincomb_list c Xs) m = vec_first y m\n  ?v \\<in> carrier_vec (m + 1) \\<Longrightarrow>\n  vec_first ?v m @\\<^sub>v vec_last ?v 1 = ?v\n  n = m + 1\n  y \\<in> carrier_vec n\n  set Xs \\<subseteq> carrier_vec n \\<Longrightarrow>\n  n.lincomb_list c Xs \\<in> carrier_vec n\n  X = set Xs\n  X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. n.lincomb_list c Xs = y", "by metis"], ["proof (state)\nthis:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "hence \"y \\<in> n.cone_list Xs\""], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. y \\<in> n.cone_list Xs", "unfolding n.cone_list_def n.nonneg_lincomb_list_def"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n\ngoal (1 subgoal):\n 1. y \\<in> {b. \\<exists>c.\n                   n.lincomb_list c Xs = b \\<and>\n                   (\\<forall>i<length Xs. (0::'a) \\<le> c i)}", "using c"], ["proof (prove)\nusing this:\n  n.lincomb_list c Xs = y\n  \\<forall>i<length Xs. (0::'a) \\<le> c i\n\ngoal (1 subgoal):\n 1. y \\<in> {b. \\<exists>c.\n                   n.lincomb_list c Xs = b \\<and>\n                   (\\<forall>i<length Xs. (0::'a) \\<le> c i)}", "by blast"], ["proof (state)\nthis:\n  y \\<in> n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "}"], ["proof (state)\nthis:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "moreover"], ["proof (state)\nthis:\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.cone_list Xs\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "have \"m.cone_list ?Ys = m.cone ?Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n    m.cone {vec_first y m |y. y \\<in> X}", "using m.finite_cone_iff_cone_list[OF _ Ys] m.cone_iff_finite_cone[of ?Y]\n      \\<open>finite X\\<close>"], ["proof (prove)\nusing this:\n  {vec_first y m |y. y \\<in> X} \\<subseteq> carrier_vec m \\<Longrightarrow>\n  m.finite_cone {vec_first y m |y. y \\<in> X} =\n  m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n  \\<lbrakk>{vec_first y m |y. y \\<in> X} \\<subseteq> carrier_vec m;\n   finite {vec_first y m |y. y \\<in> X}\\<rbrakk>\n  \\<Longrightarrow> m.cone {vec_first y m |y. y \\<in> X} =\n                    m.finite_cone {vec_first y m |y. y \\<in> X}\n  finite X\n\ngoal (1 subgoal):\n 1. m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n    m.cone {vec_first y m |y. y \\<in> X}", "by force"], ["proof (state)\nthis:\n  m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n  m.cone {vec_first y m |y. y \\<in> X}\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "ultimately"], ["proof (chain)\npicking this:\n  n.cone X = n.cone_list Xs\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.cone_list Xs\n  m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n  m.cone {vec_first y m |y. y \\<in> X}", "show ?thesis"], ["proof (prove)\nusing this:\n  n.cone X = n.cone_list Xs\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n  x \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.cone_list Xs\n  m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n  m.cone {vec_first y m |y. y \\<in> X}\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "unfolding x_def"], ["proof (prove)\nusing this:\n  n.cone X = n.cone_list Xs\n  y \\<in> n.cone_list Xs \\<Longrightarrow>\n  vec_first y m \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs)\n  vec_first y m\n  \\<in> m.cone_list (map (\\<lambda>y. vec_first y m) Xs) \\<Longrightarrow>\n  y \\<in> n.cone_list Xs\n  m.cone_list (map (\\<lambda>y. vec_first y m) Xs) =\n  m.cone {vec_first y m |y. y \\<in> X}\n\ngoal (1 subgoal):\n 1. (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n    (y \\<in> n.cone X)", "by blast"], ["proof (state)\nthis:\n  (vec_first y m \\<in> m.cone {vec_first y m |y. y \\<in> X}) =\n  (y \\<in> n.cone X)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "context gram_schmidt\nbegin"], ["", "lemma decomposition_theorem_polyhedra_1:\n  assumes A: \"A \\<in> carrier_mat nr n\"\n    and b: \"b \\<in> carrier_vec nr\"\n    and P: \"P = polyhedron A b\"\n  shows \"\\<exists> Q X. X \\<subseteq> carrier_vec n \\<and> finite X \\<and>\n    Q \\<subseteq> carrier_vec n \\<and> finite Q \\<and>\n    P = convex_hull Q + cone X \\<and>\n    (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow> b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter> Bounded_vec (det_bound n (max 1 Bnd))\n    \\<and> Q \\<subseteq> Bounded_vec (det_bound n (max 1 Bnd)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = convex_hull Q + cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = convex_hull Q + cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "interpret next_dim: gram_schmidt \"n + 1\" \"TYPE ('a)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = convex_hull Q + cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "interpret gram_schmidt_m \"n + 1\" n \"TYPE('a)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "from P[unfolded polyhedron_def]"], ["proof (chain)\npicking this:\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}", "have \"P \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  P \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have mcb: \"mat_of_col (-b) \\<in> carrier_mat nr 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_col (- b) \\<in> carrier_mat nr 1", "using b"], ["proof (prove)\nusing this:\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. mat_of_col (- b) \\<in> carrier_mat nr 1", "by auto"], ["proof (state)\nthis:\n  mat_of_col (- b) \\<in> carrier_mat nr 1\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "define M where \"M = (A @\\<^sub>c mat_of_col (-b)) @\\<^sub>r (0\\<^sub>m 1 n @\\<^sub>c -1\\<^sub>m 1)\""], ["proof (state)\nthis:\n  M =\n  (A @\\<^sub>c mat_of_col (- b)) @\\<^sub>r\n  0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have M_top: \"A @\\<^sub>c mat_of_col (- b) \\<in> carrier_mat nr (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A @\\<^sub>c mat_of_col (- b) \\<in> carrier_mat nr (n + 1)", "by (rule carrier_append_cols[OF A mcb])"], ["proof (state)\nthis:\n  A @\\<^sub>c mat_of_col (- b) \\<in> carrier_mat nr (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have M_bottom: \"(0\\<^sub>m 1 n @\\<^sub>c -1\\<^sub>m 1) \\<in> carrier_mat 1 (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1 \\<in> carrier_mat 1 (n + 1)", "by (rule carrier_append_cols, auto)"], ["proof (state)\nthis:\n  0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1 \\<in> carrier_mat 1 (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have M_dim: \"M \\<in> carrier_mat (nr + 1) (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. M \\<in> carrier_mat (nr + 1) (n + 1)", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c mat_of_col (- b)) @\\<^sub>r\n    0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1\n    \\<in> carrier_mat (nr + 1) (n + 1)", "by (rule carrier_append_rows[OF M_top M_bottom])"], ["proof (state)\nthis:\n  M \\<in> carrier_mat (nr + 1) (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "{"], ["proof (state)\nthis:\n  M \\<in> carrier_mat (nr + 1) (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "fix x :: \"'a vec\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "fix t"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "assume x: \"x \\<in> carrier_vec n\""], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have \"x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M =\n          (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and> t \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "let ?y = \"x @\\<^sub>v vec_of_scal t\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have y: \"?y \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal t \\<in> carrier_vec (n + 1)", "using x"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal t \\<in> carrier_vec (n + 1)", "by(simp del: One_nat_def)"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal t \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"?y \\<in> next_dim.polyhedral_cone M =\n            (M *\\<^sub>v ?y \\<le> 0\\<^sub>v (nr + 1))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t) \\<le> 0\\<^sub>v (nr + 1))", "unfolding next_dim.polyhedral_cone_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t\n     \\<in> {x \\<in> carrier_vec (n + 1).\n            M *\\<^sub>v x \\<le> 0\\<^sub>v (dim_row M)}) =\n    (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t) \\<le> 0\\<^sub>v (nr + 1))", "using y M_dim"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal t \\<in> carrier_vec (n + 1)\n  M \\<in> carrier_mat (nr + 1) (n + 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t\n     \\<in> {x \\<in> carrier_vec (n + 1).\n            M *\\<^sub>v x \\<le> 0\\<^sub>v (dim_row M)}) =\n    (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t) \\<le> 0\\<^sub>v (nr + 1))", "by auto"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t) \\<le> 0\\<^sub>v (nr + 1))\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t) \\<le> 0\\<^sub>v (nr + 1))\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"0\\<^sub>v (nr + 1) = 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>v (nr + 1) = 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1", "by auto"], ["proof (state)\nthis:\n  0\\<^sub>v (nr + 1) = 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  0\\<^sub>v (nr + 1) = 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"M *\\<^sub>v ?y \\<le> 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1 =\n                   ((A @\\<^sub>c mat_of_col (-b)) *\\<^sub>v ?y \\<le> 0\\<^sub>v nr \\<and>\n                   (0\\<^sub>m 1 n @\\<^sub>c -1\\<^sub>m 1) *\\<^sub>v ?y \\<le> 0\\<^sub>v 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1) =\n    ((A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v nr \\<and>\n     (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n     (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v 1)", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (((A @\\<^sub>c mat_of_col (- b)) @\\<^sub>r\n      0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n     (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1) =\n    ((A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v nr \\<and>\n     (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n     (x @\\<^sub>v vec_of_scal t)\n     \\<le> 0\\<^sub>v 1)", "by (intro append_rows_le[OF M_top M_bottom _ y], auto)"], ["proof (state)\nthis:\n  (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1) =\n  ((A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v nr \\<and>\n   (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n   (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  (M *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v 1) =\n  ((A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v nr \\<and>\n   (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n   (x @\\<^sub>v vec_of_scal t)\n   \\<le> 0\\<^sub>v 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"(A @\\<^sub>c mat_of_col(-b)) *\\<^sub>v ?y =\n                 A *\\<^sub>v x + mat_of_col(-b) *\\<^sub>v vec_of_scal t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t) =\n    A *\\<^sub>v x + mat_of_col (- b) *\\<^sub>v vec_of_scal t", "by (rule mat_mult_append_cols[OF A _ x],\n            auto simp add: b simp del: One_nat_def)"], ["proof (state)\nthis:\n  (A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t) =\n  A *\\<^sub>v x + mat_of_col (- b) *\\<^sub>v vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  (A @\\<^sub>c mat_of_col (- b)) *\\<^sub>v (x @\\<^sub>v vec_of_scal t) =\n  A *\\<^sub>v x + mat_of_col (- b) *\\<^sub>v vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"mat_of_col(-b) *\\<^sub>v vec_of_scal t = t \\<cdot>\\<^sub>v (-b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_col (- b) *\\<^sub>v vec_of_scal t = t \\<cdot>\\<^sub>v - b", "by(rule mult_mat_of_row_vec_of_scal)"], ["proof (state)\nthis:\n  mat_of_col (- b) *\\<^sub>v vec_of_scal t = t \\<cdot>\\<^sub>v - b\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  mat_of_col (- b) *\\<^sub>v vec_of_scal t = t \\<cdot>\\<^sub>v - b\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"A *\\<^sub>v x + t \\<cdot>\\<^sub>v (-b) = A *\\<^sub>v x - t \\<cdot>\\<^sub>v b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A *\\<^sub>v x + t \\<cdot>\\<^sub>v - b =\n    A *\\<^sub>v x - t \\<cdot>\\<^sub>v b", "by auto"], ["proof (state)\nthis:\n  A *\\<^sub>v x + t \\<cdot>\\<^sub>v - b =\n  A *\\<^sub>v x - t \\<cdot>\\<^sub>v b\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  A *\\<^sub>v x + t \\<cdot>\\<^sub>v - b =\n  A *\\<^sub>v x - t \\<cdot>\\<^sub>v b\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"(0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v (x @\\<^sub>v vec_of_scal t) =\n                 0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n    (x @\\<^sub>v vec_of_scal t) =\n    0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t", "by(rule mat_mult_append_cols, auto simp add: x simp del: One_nat_def)"], ["proof (state)\nthis:\n  (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n  (x @\\<^sub>v vec_of_scal t) =\n  0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1) *\\<^sub>v\n  (x @\\<^sub>v vec_of_scal t) =\n  0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"\\<dots> = - vec_of_scal t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t =\n    - vec_of_scal t", "using x"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. 0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t =\n    - vec_of_scal t", "by (auto simp del: One_nat_def)"], ["proof (state)\nthis:\n  0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t =\n  - vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "also"], ["proof (state)\nthis:\n  0\\<^sub>m 1 n *\\<^sub>v x + - 1\\<^sub>m 1 *\\<^sub>v vec_of_scal t =\n  - vec_of_scal t\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "have \"(\\<dots> \\<le> 0\\<^sub>v 1) = (t \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (- vec_of_scal t \\<le> 0\\<^sub>v 1) = ((0::'a) \\<le> t)", "unfolding less_eq_vec_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (dim_vec (- vec_of_scal t) = dim_vec (0\\<^sub>v 1) \\<and>\n     (\\<forall>i<dim_vec (0\\<^sub>v 1).\n         (- vec_of_scal t) $ i \\<le> 0\\<^sub>v 1 $ i)) =\n    ((0::'a) \\<le> t)", "by auto"], ["proof (state)\nthis:\n  (- vec_of_scal t \\<le> 0\\<^sub>v 1) = ((0::'a) \\<le> t)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "finally"], ["proof (chain)\npicking this:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> t)", "show \"(?y \\<in> next_dim.polyhedral_cone M) =\n                    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and> t \\<ge> 0)\""], ["proof (prove)\nusing this:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> t)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n    (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n     (0::'a) \\<le> t)", "by auto"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> t)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal t \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - t \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> t)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "}"], ["proof (state)\nthis:\n  ?x7 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x7 @\\<^sub>v vec_of_scal ?t7 \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v ?x7 - ?t7 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> ?t7)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "note M_cone_car = this"], ["proof (state)\nthis:\n  ?x7 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x7 @\\<^sub>v vec_of_scal ?t7 \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v ?x7 - ?t7 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> ?t7)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "from next_dim.farkas_minkowsky_weyl_theorem_2[OF M_dim, of \"max 1 Bnd\"]"], ["proof (chain)\npicking this:\n  \\<exists>X\\<subseteq>carrier_vec (n + 1).\n     finite X \\<and>\n     next_dim.polyhedral_cone M = next_dim.cone X \\<and>\n     (M \\<in> \\<int>\\<^sub>m \\<inter>\n              Bounded_mat (max (1::'a) Bnd) \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                    Bounded_vec\n                     (det_bound (n + 1 - 1)\n                       (max (1::'a) (max (1::'a) Bnd))))", "obtain X where X: \"next_dim.polyhedral_cone M = next_dim.cone X\" and\n    fin_X: \"finite X\" and X_carrier: \"X \\<subseteq> carrier_vec (n+1)\"\n    and Bnd: \"M \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat (max 1 Bnd) \\<Longrightarrow>\n          X \\<subseteq> \\<int>\\<^sub>v \\<inter> Bounded_vec (det_bound n (max 1 Bnd))\""], ["proof (prove)\nusing this:\n  \\<exists>X\\<subseteq>carrier_vec (n + 1).\n     finite X \\<and>\n     next_dim.polyhedral_cone M = next_dim.cone X \\<and>\n     (M \\<in> \\<int>\\<^sub>m \\<inter>\n              Bounded_mat (max (1::'a) Bnd) \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                    Bounded_vec\n                     (det_bound (n + 1 - 1)\n                       (max (1::'a) (max (1::'a) Bnd))))\n\ngoal (1 subgoal):\n 1. (\\<And>X.\n        \\<lbrakk>next_dim.polyhedral_cone M = next_dim.cone X; finite X;\n         X \\<subseteq> carrier_vec (n + 1);\n         M \\<in> \\<int>\\<^sub>m \\<inter>\n                 Bounded_mat (max (1::'a) Bnd) \\<Longrightarrow>\n         X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                       Bounded_vec (det_bound n (max (1::'a) Bnd))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  next_dim.polyhedral_cone M = next_dim.cone X\n  finite X\n  X \\<subseteq> carrier_vec (n + 1)\n  M \\<in> \\<int>\\<^sub>m \\<inter>\n          Bounded_mat (max (1::'a) Bnd) \\<Longrightarrow>\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "let ?f = \"\\<lambda> x. if x $ n = 0 then 1 else 1 / (x $ n)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "define Y where \"Y = {?f x \\<cdot>\\<^sub>v x | x. x \\<in> X}\""], ["proof (state)\nthis:\n  Y =\n  {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x |\n   x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have \"finite Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite Y", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n      x |\n      x. x \\<in> X}", "using fin_X"], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. finite\n     {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n      x |\n      x. x \\<in> X}", "by auto"], ["proof (state)\nthis:\n  finite Y\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have Y_carrier: \"Y \\<subseteq> carrier_vec (n+1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<subseteq> carrier_vec (n + 1)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n     x |\n     x. x \\<in> X}\n    \\<subseteq> carrier_vec (n + 1)", "using X_carrier"], ["proof (prove)\nusing this:\n  X \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n     x |\n     x. x \\<in> X}\n    \\<subseteq> carrier_vec (n + 1)", "by auto"], ["proof (state)\nthis:\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have \"?f ` X \\<subseteq> {y. y > 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) ` X\n    \\<subseteq> {y. (0::'a) < y}", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n               X \\<Longrightarrow>\n       x \\<in> {y. (0::'a) < y}", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n               X \\<Longrightarrow>\n       x \\<in> {y. (0::'a) < y}", "assume \"y \\<in> ?f ` X\""], ["proof (state)\nthis:\n  y \\<in> (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n          X\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n               X \\<Longrightarrow>\n       x \\<in> {y. (0::'a) < y}", "then"], ["proof (chain)\npicking this:\n  y \\<in> (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n          X", "obtain x where x: \"x \\<in> X\" and y: \"y = ?f x\""], ["proof (prove)\nusing this:\n  y \\<in> (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n          X\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> X;\n         y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> (\\<lambda>x.\n                   if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) `\n               X \\<Longrightarrow>\n       x \\<in> {y. (0::'a) < y}", "show \"y \\<in> {y. y > 0}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> {y. (0::'a) < y}", "proof cases"], ["proof (state)\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> y \\<in> {y. (0::'a) < y}\n 2. \\<not> ?P \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "assume \"x $ n = 0\""], ["proof (state)\nthis:\n  x $ n = (0::'a)\n\ngoal (2 subgoals):\n 1. ?P \\<Longrightarrow> y \\<in> {y. (0::'a) < y}\n 2. \\<not> ?P \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "thus \"y \\<in> {y. y > 0}\""], ["proof (prove)\nusing this:\n  x $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. y \\<in> {y. (0::'a) < y}", "using y"], ["proof (prove)\nusing this:\n  x $ n = (0::'a)\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n)\n\ngoal (1 subgoal):\n 1. y \\<in> {y. (0::'a) < y}", "by auto"], ["proof (state)\nthis:\n  y \\<in> {y. (0::'a) < y}\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "assume P: \"x $ n \\<noteq> 0\""], ["proof (state)\nthis:\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "have \"x = vec_first x n @\\<^sub>v vec_last x 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = vec_first x n @\\<^sub>v vec_last x 1", "using x X_carrier vec_first_last_append"], ["proof (prove)\nusing this:\n  x \\<in> X\n  X \\<subseteq> carrier_vec (n + 1)\n  ?v \\<in> carrier_vec (?n + ?m) \\<Longrightarrow>\n  vec_first ?v ?n @\\<^sub>v vec_last ?v ?m = ?v\n\ngoal (1 subgoal):\n 1. x = vec_first x n @\\<^sub>v vec_last x 1", "by auto"], ["proof (state)\nthis:\n  x = vec_first x n @\\<^sub>v vec_last x 1\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "also"], ["proof (state)\nthis:\n  x = vec_first x n @\\<^sub>v vec_last x 1\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "have \"vec_last x 1 = vec_of_scal (vec_last x 1 $ 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last x 1 = vec_of_scal (vec_last x 1 $ 0)", "by auto"], ["proof (state)\nthis:\n  vec_last x 1 = vec_of_scal (vec_last x 1 $ 0)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "also"], ["proof (state)\nthis:\n  vec_last x 1 = vec_of_scal (vec_last x 1 $ 0)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "have \"vec_last x 1 $ 0 = x $ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last x 1 $ 0 = x $ n", "using x X_carrier"], ["proof (prove)\nusing this:\n  x \\<in> X\n  X \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. vec_last x 1 $ 0 = x $ n", "unfolding vec_last_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  X \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. vec 1 (\\<lambda>i. x $ (dim_vec x - 1 + i)) $ 0 = x $ n", "by auto"], ["proof (state)\nthis:\n  vec_last x 1 $ 0 = x $ n\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "finally"], ["proof (chain)\npicking this:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)", "have \"x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\""], ["proof (prove)\nusing this:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n\ngoal (1 subgoal):\n 1. x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)", "by auto"], ["proof (state)\nthis:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "moreover"], ["proof (state)\nthis:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "have \"x \\<in> next_dim.polyhedral_cone M\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> next_dim.polyhedral_cone M", "using x X X_carrier next_dim.set_in_cone"], ["proof (prove)\nusing this:\n  x \\<in> X\n  next_dim.polyhedral_cone M = next_dim.cone X\n  X \\<subseteq> carrier_vec (n + 1)\n  ?Vs \\<subseteq> carrier_vec (n + 1) \\<Longrightarrow>\n  ?Vs \\<subseteq> next_dim.cone ?Vs\n\ngoal (1 subgoal):\n 1. x \\<in> next_dim.polyhedral_cone M", "by auto"], ["proof (state)\nthis:\n  x \\<in> next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "ultimately"], ["proof (chain)\npicking this:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n  x \\<in> next_dim.polyhedral_cone M", "have \"x $ n \\<ge> 0\""], ["proof (prove)\nusing this:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n  x \\<in> next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. (0::'a) \\<le> x $ n", "using M_cone_car vec_first_carrier"], ["proof (prove)\nusing this:\n  x = vec_first x n @\\<^sub>v vec_of_scal (x $ n)\n  x \\<in> next_dim.polyhedral_cone M\n  ?x7 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x7 @\\<^sub>v vec_of_scal ?t7 \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v ?x7 - ?t7 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> ?t7)\n  vec_first ?v ?n \\<in> carrier_vec ?n\n\ngoal (1 subgoal):\n 1. (0::'a) \\<le> x $ n", "by metis"], ["proof (state)\nthis:\n  (0::'a) \\<le> x $ n\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "hence \"x $ n > 0\""], ["proof (prove)\nusing this:\n  (0::'a) \\<le> x $ n\n\ngoal (1 subgoal):\n 1. (0::'a) < x $ n", "using P"], ["proof (prove)\nusing this:\n  (0::'a) \\<le> x $ n\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. (0::'a) < x $ n", "by auto"], ["proof (state)\nthis:\n  (0::'a) < x $ n\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a) \\<Longrightarrow> y \\<in> {y. (0::'a) < y}", "thus \"y \\<in> {y. y > 0}\""], ["proof (prove)\nusing this:\n  (0::'a) < x $ n\n\ngoal (1 subgoal):\n 1. y \\<in> {y. (0::'a) < y}", "using y"], ["proof (prove)\nusing this:\n  (0::'a) < x $ n\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n)\n\ngoal (1 subgoal):\n 1. y \\<in> {y. (0::'a) < y}", "by auto"], ["proof (state)\nthis:\n  y \\<in> {y. (0::'a) < y}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  y \\<in> {y. (0::'a) < y}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) ` X\n  \\<subseteq> {y. (0::'a) < y}\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "hence Y: \"next_dim.cone Y = next_dim.polyhedral_cone M\""], ["proof (prove)\nusing this:\n  (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) ` X\n  \\<subseteq> {y. (0::'a) < y}\n\ngoal (1 subgoal):\n 1. next_dim.cone Y = next_dim.polyhedral_cone M", "unfolding Y_def"], ["proof (prove)\nusing this:\n  (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) ` X\n  \\<subseteq> {y. (0::'a) < y}\n\ngoal (1 subgoal):\n 1. next_dim.cone\n     {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n      x |\n      x. x \\<in> X} =\n    next_dim.polyhedral_cone M", "using next_dim.cone_smult_basis[OF X_carrier] X"], ["proof (prove)\nusing this:\n  (\\<lambda>x. if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) ` X\n  \\<subseteq> {y. (0::'a) < y}\n  ?l ` X \\<subseteq> {x. (0::'a) < x} \\<Longrightarrow>\n  next_dim.cone {?l v \\<cdot>\\<^sub>v v |v. v \\<in> X} = next_dim.cone X\n  next_dim.polyhedral_cone M = next_dim.cone X\n\ngoal (1 subgoal):\n 1. next_dim.cone\n     {(if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n      x |\n      x. x \\<in> X} =\n    next_dim.polyhedral_cone M", "by auto"], ["proof (state)\nthis:\n  next_dim.cone Y = next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "define Y0 where \"Y0 = {v \\<in> Y. v $ n = 0}\""], ["proof (state)\nthis:\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "define Y1 where \"Y1 = Y - Y0\""], ["proof (state)\nthis:\n  Y1 = Y - Y0\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have Y0_carrier: \"Y0 \\<subseteq> carrier_vec (n + 1)\" and Y1_carrier: \"Y1 \\<subseteq> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y0 \\<subseteq> carrier_vec (n + 1) &&&\n    Y1 \\<subseteq> carrier_vec (n + 1)", "unfolding Y0_def Y1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {v \\<in> Y. v $ n = (0::'a)} \\<subseteq> carrier_vec (n + 1) &&&\n    Y - {v \\<in> Y. v $ n = (0::'a)} \\<subseteq> carrier_vec (n + 1)", "using Y_carrier"], ["proof (prove)\nusing this:\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. {v \\<in> Y. v $ n = (0::'a)} \\<subseteq> carrier_vec (n + 1) &&&\n    Y - {v \\<in> Y. v $ n = (0::'a)} \\<subseteq> carrier_vec (n + 1)", "by auto"], ["proof (state)\nthis:\n  Y0 \\<subseteq> carrier_vec (n + 1)\n  Y1 \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have \"finite Y0\" and \"finite Y1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite Y0 &&& finite Y1", "unfolding Y0_def Y1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {v \\<in> Y. v $ n = (0::'a)} &&&\n    finite (Y - {v \\<in> Y. v $ n = (0::'a)})", "using \\<open>finite Y\\<close>"], ["proof (prove)\nusing this:\n  finite Y\n\ngoal (1 subgoal):\n 1. finite {v \\<in> Y. v $ n = (0::'a)} &&&\n    finite (Y - {v \\<in> Y. v $ n = (0::'a)})", "by auto"], ["proof (state)\nthis:\n  finite Y0\n  finite Y1\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "have Y1: \"\\<And> y. y \\<in> Y1 \\<Longrightarrow> y $ n = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "assume y: \"y \\<in> Y1\""], ["proof (state)\nthis:\n  y \\<in> Y1\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "hence \"y \\<in> Y\""], ["proof (prove)\nusing this:\n  y \\<in> Y1\n\ngoal (1 subgoal):\n 1. y \\<in> Y", "unfolding Y1_def"], ["proof (prove)\nusing this:\n  y \\<in> Y - Y0\n\ngoal (1 subgoal):\n 1. y \\<in> Y", "by auto"], ["proof (state)\nthis:\n  y \\<in> Y\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "then"], ["proof (chain)\npicking this:\n  y \\<in> Y", "obtain x where \"x \\<in> X\" and x: \"y = ?f x \\<cdot>\\<^sub>v x\""], ["proof (prove)\nusing this:\n  y \\<in> Y\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> X;\n         y =\n         (if x $ n = (0::'a) then 1::'a\n          else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n         x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Y_def"], ["proof (prove)\nusing this:\n  y \\<in> {(if x $ n = (0::'a) then 1::'a\n            else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n           x |\n           x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>x \\<in> X;\n         y =\n         (if x $ n = (0::'a) then 1::'a\n          else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n         x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "then"], ["proof (chain)\npicking this:\n  x \\<in> X\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x", "have \"x $ n \\<noteq> 0\""], ["proof (prove)\nusing this:\n  x \\<in> X\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a)", "using x y Y1_def Y0_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n  y \\<in> Y1\n  Y1 = Y - Y0\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a)", "by auto"], ["proof (state)\nthis:\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "then"], ["proof (chain)\npicking this:\n  x $ n \\<noteq> (0::'a)", "have \"y = 1 / (x $ n) \\<cdot>\\<^sub>v x\""], ["proof (prove)\nusing this:\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. y = (1::'a) / x $ n \\<cdot>\\<^sub>v x", "using x"], ["proof (prove)\nusing this:\n  x $ n \\<noteq> (0::'a)\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n\ngoal (1 subgoal):\n 1. y = (1::'a) / x $ n \\<cdot>\\<^sub>v x", "by auto"], ["proof (state)\nthis:\n  y = (1::'a) / x $ n \\<cdot>\\<^sub>v x\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "then"], ["proof (chain)\npicking this:\n  y = (1::'a) / x $ n \\<cdot>\\<^sub>v x", "have \"y $ n = 1 / (x $ n) * x $ n\""], ["proof (prove)\nusing this:\n  y = (1::'a) / x $ n \\<cdot>\\<^sub>v x\n\ngoal (1 subgoal):\n 1. y $ n = (1::'a) / x $ n * x $ n", "using X_carrier \\<open>x \\<in> X\\<close>"], ["proof (prove)\nusing this:\n  y = (1::'a) / x $ n \\<cdot>\\<^sub>v x\n  X \\<subseteq> carrier_vec (n + 1)\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. y $ n = (1::'a) / x $ n * x $ n", "by auto"], ["proof (state)\nthis:\n  y $ n = (1::'a) / x $ n * x $ n\n\ngoal (1 subgoal):\n 1. \\<And>y. y \\<in> Y1 \\<Longrightarrow> y $ n = (1::'a)", "thus \"y $ n = 1\""], ["proof (prove)\nusing this:\n  y $ n = (1::'a) / x $ n * x $ n\n\ngoal (1 subgoal):\n 1. y $ n = (1::'a)", "using \\<open>x $ n \\<noteq> 0\\<close>"], ["proof (prove)\nusing this:\n  y $ n = (1::'a) / x $ n * x $ n\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. y $ n = (1::'a)", "by auto"], ["proof (state)\nthis:\n  y $ n = (1::'a)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?y6 \\<in> Y1 \\<Longrightarrow> ?y6 $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "let ?Z0 = \"{vec_first y n | y. y \\<in> Y0}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "let ?Z1 = \"{vec_first y n | y. y \\<in> Y1}\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       X \\<subseteq> carrier_vec n \\<and>\n       finite X \\<and>\n       Q \\<subseteq> carrier_vec n \\<and>\n       finite Q \\<and>\n       P = m.convex_hull Q + m.cone X \\<and>\n       (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n        b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n        X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                      Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n        Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))", "proof (intro exI conjI impI)"], ["proof (state)\ngoal (7 subgoals):\n 1. ?X1 \\<subseteq> carrier_vec n\n 2. finite ?X1\n 3. ?Q \\<subseteq> carrier_vec n\n 4. finite ?Q\n 5. P = m.convex_hull ?Q + m.cone ?X1\n 6. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> ?X1\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 7. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> ?Q \\<subseteq> Bounded_vec\n(det_bound n (max (1::'a) Bnd))", "show \"?Z0 \\<subseteq> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {vec_first y n |y. y \\<in> Y0} \\<subseteq> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  {vec_first y n |y. y \\<in> Y0} \\<subseteq> carrier_vec n\n\ngoal (6 subgoals):\n 1. finite {vec_first y n |y. y \\<in> Y0}\n 2. ?Q \\<subseteq> carrier_vec n\n 3. finite ?Q\n 4. P = m.convex_hull ?Q + m.cone {vec_first y n |y. y \\<in> Y0}\n 5. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 6. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> ?Q \\<subseteq> Bounded_vec\n(det_bound n (max (1::'a) Bnd))", "show \"?Z1 \\<subseteq> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {vec_first y n |y. y \\<in> Y1} \\<subseteq> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  {vec_first y n |y. y \\<in> Y1} \\<subseteq> carrier_vec n\n\ngoal (5 subgoals):\n 1. finite {vec_first y n |y. y \\<in> Y0}\n 2. finite {vec_first y n |y. y \\<in> Y1}\n 3. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}\n 4. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 5. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "show \"finite ?Z0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {vec_first y n |y. y \\<in> Y0}", "using \\<open>finite Y0\\<close>"], ["proof (prove)\nusing this:\n  finite Y0\n\ngoal (1 subgoal):\n 1. finite {vec_first y n |y. y \\<in> Y0}", "by auto"], ["proof (state)\nthis:\n  finite {vec_first y n |y. y \\<in> Y0}\n\ngoal (4 subgoals):\n 1. finite {vec_first y n |y. y \\<in> Y1}\n 2. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}\n 3. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 4. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "show \"finite ?Z1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {vec_first y n |y. y \\<in> Y1}", "using \\<open>finite Y1\\<close>"], ["proof (prove)\nusing this:\n  finite Y1\n\ngoal (1 subgoal):\n 1. finite {vec_first y n |y. y \\<in> Y1}", "by auto"], ["proof (state)\nthis:\n  finite {vec_first y n |y. y \\<in> Y1}\n\ngoal (3 subgoals):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 3. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "show \"P = convex_hull ?Z1 + cone ?Z0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "assume \"x \\<in> P\""], ["proof (state)\nthis:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence xn: \"x \\<in> carrier_vec n\" and \"A *\\<^sub>v x \\<le> b\""], ["proof (prove)\nusing this:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n &&& A *\\<^sub>v x \\<le> b", "using P"], ["proof (prove)\nusing this:\n  x \\<in> P\n  P = m.polyhedron A b\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n &&& A *\\<^sub>v x \\<le> b", "unfolding polyhedron_def"], ["proof (prove)\nusing this:\n  x \\<in> P\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n &&& A *\\<^sub>v x \\<le> b", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n  A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"A *\\<^sub>v x - 1 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr\""], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n  A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x - (1::'a) \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr", "using vec_le_iff_diff_le_0 A b carrier_vecD mult_mat_vec_carrier one_smult_vec"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n  A *\\<^sub>v x \\<le> b\n  (?a \\<le> ?b) = (?a - ?b \\<le> 0\\<^sub>v (dim_vec ?a))\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  ?v \\<in> carrier_vec ?n \\<Longrightarrow> dim_vec ?v = ?n\n  \\<lbrakk>?A \\<in> carrier_mat ?nr ?n; ?v \\<in> carrier_vec ?n\\<rbrakk>\n  \\<Longrightarrow> ?A *\\<^sub>v ?v \\<in> carrier_vec ?nr\n  (1::?'a) \\<cdot>\\<^sub>v ?v = ?v\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x - (1::'a) \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr", "by metis"], ["proof (state)\nthis:\n  A *\\<^sub>v x - (1::'a) \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.polyhedral_cone M\""], ["proof (prove)\nusing this:\n  A *\\<^sub>v x - (1::'a) \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone M", "using M_cone_car[OF xn]"], ["proof (prove)\nusing this:\n  A *\\<^sub>v x - (1::'a) \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr\n  (x @\\<^sub>v vec_of_scal ?t7 \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - ?t7 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> ?t7)\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone M", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone Y\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "using Y"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone M\n  next_dim.cone Y = next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.finite_cone Y\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.finite_cone Y", "using next_dim.cone_iff_finite_cone[OF Y_carrier \\<open>finite Y\\<close>]"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n  next_dim.cone Y = next_dim.finite_cone Y\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.finite_cone Y", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.finite_cone Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "then"], ["proof (chain)\npicking this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.finite_cone Y", "obtain c where c: \"next_dim.nonneg_lincomb c Y (x @\\<^sub>v vec_of_scal 1)\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.finite_cone Y\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        next_dim.nonneg_lincomb c Y\n         (x @\\<^sub>v vec_of_scal (1::'a)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "unfolding next_dim.finite_cone_def"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> {b. \\<exists>c.\n               next_dim.nonneg_lincomb c (if finite Y then Y else {}) b}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        next_dim.nonneg_lincomb c Y\n         (x @\\<^sub>v vec_of_scal (1::'a)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<open>finite Y\\<close>"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> {b. \\<exists>c.\n               next_dim.nonneg_lincomb c (if finite Y then Y else {}) b}\n  finite Y\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        next_dim.nonneg_lincomb c Y\n         (x @\\<^sub>v vec_of_scal (1::'a)) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  next_dim.nonneg_lincomb c Y (x @\\<^sub>v vec_of_scal (1::'a))\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "let ?y = \"next_dim.lincomb c Y1\""], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "let ?z = \"next_dim.lincomb c Y0\""], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have y_dim: \"?y \\<in> carrier_vec (n + 1)\" and z_dim: \"?z \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1) &&&\n    next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)", "unfolding next_dim.nonneg_lincomb_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1) &&&\n    next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)", "using Y0_carrier Y1_carrier next_dim.lincomb_closed"], ["proof (prove)\nusing this:\n  Y0 \\<subseteq> carrier_vec (n + 1)\n  Y1 \\<subseteq> carrier_vec (n + 1)\n  ?S \\<subseteq> carrier_vec (n + 1) \\<Longrightarrow>\n  next_dim.lincomb ?a ?S \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1) &&&\n    next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)", "by simp_all"], ["proof (state)\nthis:\n  next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1)\n  next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence yz_dim: \"?y + ?z \\<in> carrier_vec (n + 1)\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1)\n  next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 + next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"x @\\<^sub>v vec_of_scal 1 = next_dim.lincomb c Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) = next_dim.lincomb c Y", "using c"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y (x @\\<^sub>v vec_of_scal (1::'a))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) = next_dim.lincomb c Y", "unfolding next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y = x @\\<^sub>v vec_of_scal (1::'a) \\<and>\n  c ` Y \\<subseteq> Collect ((\\<le>) (0::'a))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) = next_dim.lincomb c Y", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) = next_dim.lincomb c Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "also"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) = next_dim.lincomb c Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"Y = Y1 \\<union> Y0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y = Y1 \\<union> Y0", "unfolding Y1_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. Y = Y - Y0 \\<union> Y0", "using Y0_def"], ["proof (prove)\nusing this:\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. Y = Y - Y0 \\<union> Y0", "by blast"], ["proof (state)\nthis:\n  Y = Y1 \\<union> Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "also"], ["proof (state)\nthis:\n  Y = Y1 \\<union> Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"next_dim.lincomb c (Y1 \\<union> Y0) = ?y + ?z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c (Y1 \\<union> Y0) =\n    next_dim.lincomb c Y1 + next_dim.lincomb c Y0", "using next_dim.lincomb_union2[of Y1 Y0]\n            \\<open>finite Y0\\<close> \\<open>finite Y\\<close> Y0_carrier Y_carrier"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (Y1 \\<union> Y0);\n   Y1 \\<union> Y0 \\<subseteq> carrier_vec (n + 1);\n   Y1 \\<inter> Y0 = {}\\<rbrakk>\n  \\<Longrightarrow> next_dim.lincomb ?a Y1 + next_dim.lincomb ?b Y0 =\n                    next_dim.lincomb\n                     (\\<lambda>v. if v \\<in> Y1 then ?a v else ?b v)\n                     (Y1 \\<union> Y0)\n  finite Y0\n  finite Y\n  Y0 \\<subseteq> carrier_vec (n + 1)\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c (Y1 \\<union> Y0) =\n    next_dim.lincomb c Y1 + next_dim.lincomb c Y0", "unfolding Y1_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>finite (Y - Y0 \\<union> Y0);\n   Y - Y0 \\<union> Y0 \\<subseteq> carrier_vec (n + 1);\n   (Y - Y0) \\<inter> Y0 = {}\\<rbrakk>\n  \\<Longrightarrow> next_dim.lincomb ?a (Y - Y0) + next_dim.lincomb ?b Y0 =\n                    next_dim.lincomb\n                     (\\<lambda>v. if v \\<in> Y - Y0 then ?a v else ?b v)\n                     (Y - Y0 \\<union> Y0)\n  finite Y0\n  finite Y\n  Y0 \\<subseteq> carrier_vec (n + 1)\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c (Y - Y0 \\<union> Y0) =\n    next_dim.lincomb c (Y - Y0) + next_dim.lincomb c Y0", "by fastforce"], ["proof (state)\nthis:\n  next_dim.lincomb c (Y1 \\<union> Y0) =\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "also"], ["proof (state)\nthis:\n  next_dim.lincomb c (Y1 \\<union> Y0) =\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"?y + ?z = vec_first (?y + ?z) n @\\<^sub>v vec_last (?y + ?z) 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 + next_dim.lincomb c Y0 =\n    vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n    vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1", "using vec_first_last_append[of \"?y + ?z\" n 1] add_carrier_vec yz_dim"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0\n  \\<in> carrier_vec (n + 1) \\<Longrightarrow>\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1 =\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0\n  \\<lbrakk>?v\\<^sub>1 \\<in> carrier_vec ?n;\n   ?v\\<^sub>2 \\<in> carrier_vec ?n\\<rbrakk>\n  \\<Longrightarrow> ?v\\<^sub>1 + ?v\\<^sub>2 \\<in> carrier_vec ?n\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 + next_dim.lincomb c Y0 =\n    vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n    vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1", "by simp"], ["proof (state)\nthis:\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0 =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "also"], ["proof (state)\nthis:\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0 =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"vec_last (?y + ?z) 1 = vec_of_scal ((?y + ?z) $ n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1 =\n    vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "using vec_of_scal_dim_1 vec_last_index[OF yz_dim, of 0]"], ["proof (prove)\nusing this:\n  (?v \\<in> carrier_vec 1) = (?v = vec_of_scal (?v $ 0))\n  0 < 1 \\<Longrightarrow>\n  vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1 $ 0 =\n  (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ (n + 0)\n\ngoal (1 subgoal):\n 1. vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1 =\n    vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "by auto"], ["proof (state)\nthis:\n  vec_last (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) 1 =\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "finally"], ["proof (chain)\npicking this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "have \"x @\\<^sub>v vec_of_scal 1 =\n                     vec_first (?y + ?z) n @\\<^sub>v vec_of_scal ((?y + ?z) $ n)\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n    vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x = vec_first (?y + ?z) n\" and\n          yz_last: \"vec_of_scal 1 = vec_of_scal ((?y + ?z) $ n)\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. x = vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n &&&\n    vec_of_scal (1::'a) =\n    vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "using append_vec_eq yz_dim xn"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n @\\<^sub>v\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n  \\<lbrakk>?v \\<in> carrier_vec ?n; ?v' \\<in> carrier_vec ?n\\<rbrakk>\n  \\<Longrightarrow> (?v @\\<^sub>v ?w = ?v' @\\<^sub>v ?w') =\n                    (?v = ?v' \\<and> ?w = ?w')\n  next_dim.lincomb c Y1 + next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x = vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n &&&\n    vec_of_scal (1::'a) =\n    vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)", "by auto"], ["proof (state)\nthis:\n  x = vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n\n  vec_of_scal (1::'a) =\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence xyz: \"x = vec_first ?y n + vec_first ?z n\""], ["proof (prove)\nusing this:\n  x = vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n\n  vec_of_scal (1::'a) =\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n\ngoal (1 subgoal):\n 1. x =\n    vec_first (next_dim.lincomb c Y1) n +\n    vec_first (next_dim.lincomb c Y0) n", "using vec_first_add[of n ?y ?z] y_dim z_dim"], ["proof (prove)\nusing this:\n  x = vec_first (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n\n  vec_of_scal (1::'a) =\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n  \\<lbrakk>n \\<le> dim_vec (next_dim.lincomb c Y1);\n   n \\<le> dim_vec (next_dim.lincomb c Y0)\\<rbrakk>\n  \\<Longrightarrow> vec_first\n                     (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) n =\n                    vec_first (next_dim.lincomb c Y1) n +\n                    vec_first (next_dim.lincomb c Y0) n\n  next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1)\n  next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. x =\n    vec_first (next_dim.lincomb c Y1) n +\n    vec_first (next_dim.lincomb c Y0) n", "by simp"], ["proof (state)\nthis:\n  x =\n  vec_first (next_dim.lincomb c Y1) n + vec_first (next_dim.lincomb c Y0) n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"1 = ((?y + ?z) $ n)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (1::'a) = (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n", "using yz_last index_vec_of_scal"], ["proof (prove)\nusing this:\n  vec_of_scal (1::'a) =\n  vec_of_scal ((next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n)\n  vec_of_scal ?x $ 0 = ?x\n\ngoal (1 subgoal):\n 1. (1::'a) = (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n", "by (metis (no_types, lifting))"], ["proof (state)\nthis:\n  (1::'a) = (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"1 = ?y $ n + ?z $ n\""], ["proof (prove)\nusing this:\n  (1::'a) = (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n\n\ngoal (1 subgoal):\n 1. (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n", "using y_dim z_dim"], ["proof (prove)\nusing this:\n  (1::'a) = (next_dim.lincomb c Y1 + next_dim.lincomb c Y0) $ n\n  next_dim.lincomb c Y1 \\<in> carrier_vec (n + 1)\n  next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n", "by auto"], ["proof (state)\nthis:\n  (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have zn0: \"?z $ n = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 $ n = (0::'a)", "using next_dim.lincomb_index[OF _ Y0_carrier] Y0_def"], ["proof (prove)\nusing this:\n  ?i < n + 1 \\<Longrightarrow>\n  next_dim.lincomb ?a Y0 $ ?i = (\\<Sum>x\\<in>Y0. ?a x * x $ ?i)\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 $ n = (0::'a)", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c Y0 $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "ultimately"], ["proof (chain)\npicking this:\n  (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n\n  next_dim.lincomb c Y0 $ n = (0::'a)", "have yn1: \"1 = ?y $ n\""], ["proof (prove)\nusing this:\n  (1::'a) = next_dim.lincomb c Y1 $ n + next_dim.lincomb c Y0 $ n\n  next_dim.lincomb c Y0 $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. (1::'a) = next_dim.lincomb c Y1 $ n", "by auto"], ["proof (state)\nthis:\n  (1::'a) = next_dim.lincomb c Y1 $ n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"next_dim.nonneg_lincomb c Y1 ?y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)", "using c Y1_def"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y (x @\\<^sub>v vec_of_scal (1::'a))\n  Y1 = Y - Y0\n\ngoal (1 subgoal):\n 1. next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)", "unfolding next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y = x @\\<^sub>v vec_of_scal (1::'a) \\<and>\n  c ` Y \\<subseteq> Collect ((\\<le>) (0::'a))\n  Y1 = Y - Y0\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 = next_dim.lincomb c Y1 \\<and>\n    c ` Y1 \\<subseteq> Collect ((\\<le>) (0::'a))", "by auto"], ["proof (state)\nthis:\n  next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"?y \\<in> next_dim.cone Y1\""], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> next_dim.cone Y1", "using next_dim.cone_iff_finite_cone[OF Y1_carrier] \\<open>finite Y1\\<close>"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)\n  finite Y1 \\<Longrightarrow> next_dim.cone Y1 = next_dim.finite_cone Y1\n  finite Y1\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> next_dim.cone Y1", "unfolding next_dim.finite_cone_def"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y1 (next_dim.lincomb c Y1)\n  finite Y1 \\<Longrightarrow>\n  next_dim.cone Y1 =\n  {b. \\<exists>c.\n         next_dim.nonneg_lincomb c (if finite Y1 then Y1 else {}) b}\n  finite Y1\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y1 \\<in> next_dim.cone Y1", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c Y1 \\<in> next_dim.cone Y1\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence y: \"vec_first ?y n \\<in> convex_hull ?Z1\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y1 \\<in> next_dim.cone Y1\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y1) n\n    \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}", "using convex_hull_next_dim[OF _ Y1_carrier \\<open>finite Y1\\<close> _ y_dim] Y1 yn1"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y1 \\<in> next_dim.cone Y1\n  \\<lbrakk>n + 1 = n + 1; \\<forall>y\\<in>Y1. y $ n = (1::'a);\n   next_dim.lincomb c Y1 $ n = (1::'a)\\<rbrakk>\n  \\<Longrightarrow> (vec_first (next_dim.lincomb c Y1) n\n                     \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}) =\n                    (next_dim.lincomb c Y1 \\<in> next_dim.cone Y1)\n  ?y6 \\<in> Y1 \\<Longrightarrow> ?y6 $ n = (1::'a)\n  (1::'a) = next_dim.lincomb c Y1 $ n\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y1) n\n    \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}", "by simp"], ["proof (state)\nthis:\n  vec_first (next_dim.lincomb c Y1) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"next_dim.nonneg_lincomb c Y0 ?z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)", "using c Y0_def"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y (x @\\<^sub>v vec_of_scal (1::'a))\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)", "unfolding next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y = x @\\<^sub>v vec_of_scal (1::'a) \\<and>\n  c ` Y \\<subseteq> Collect ((\\<le>) (0::'a))\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 = next_dim.lincomb c Y0 \\<and>\n    c ` Y0 \\<subseteq> Collect ((\\<le>) (0::'a))", "by blast"], ["proof (state)\nthis:\n  next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"?z \\<in> next_dim.cone Y0\""], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 \\<in> next_dim.cone Y0", "using \\<open>finite Y0\\<close> next_dim.cone_iff_finite_cone[OF Y0_carrier \\<open>finite Y0\\<close>]"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)\n  finite Y0\n  next_dim.cone Y0 = next_dim.finite_cone Y0\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 \\<in> next_dim.cone Y0", "unfolding next_dim.finite_cone_def"], ["proof (prove)\nusing this:\n  next_dim.nonneg_lincomb c Y0 (next_dim.lincomb c Y0)\n  finite Y0\n  next_dim.cone Y0 =\n  {b. \\<exists>c.\n         next_dim.nonneg_lincomb c (if finite Y0 then Y0 else {}) b}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y0 \\<in> next_dim.cone Y0", "by fastforce"], ["proof (state)\nthis:\n  next_dim.lincomb c Y0 \\<in> next_dim.cone Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence z: \"vec_first ?z n \\<in> cone ?Z0\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y0 \\<in> next_dim.cone Y0\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y0) n\n    \\<in> m.cone {vec_first y n |y. y \\<in> Y0}", "using cone_next_dim[OF _ Y0_carrier \\<open>finite Y0\\<close> _ _ zn0] Y0_def\n            next_dim.lincomb_closed[OF Y0_carrier]"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y0 \\<in> next_dim.cone Y0\n  \\<lbrakk>n + 1 = n + 1; \\<forall>y\\<in>Y0. y $ n = (0::'a);\n   next_dim.lincomb c Y0 \\<in> carrier_vec (n + 1)\\<rbrakk>\n  \\<Longrightarrow> (vec_first (next_dim.lincomb c Y0) n\n                     \\<in> m.cone {vec_first y n |y. y \\<in> Y0}) =\n                    (next_dim.lincomb c Y0 \\<in> next_dim.cone Y0)\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n  next_dim.lincomb ?a Y0 \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y0) n\n    \\<in> m.cone {vec_first y n |y. y \\<in> Y0}", "by blast"], ["proof (state)\nthis:\n  vec_first (next_dim.lincomb c Y0) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "from xyz y z"], ["proof (chain)\npicking this:\n  x =\n  vec_first (next_dim.lincomb c Y1) n + vec_first (next_dim.lincomb c Y0) n\n  vec_first (next_dim.lincomb c Y1) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  vec_first (next_dim.lincomb c Y0) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}", "have \"x \\<in> convex_hull ?Z1 + cone ?Z0\""], ["proof (prove)\nusing this:\n  x =\n  vec_first (next_dim.lincomb c Y1) n + vec_first (next_dim.lincomb c Y0) n\n  vec_first (next_dim.lincomb c Y1) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  vec_first (next_dim.lincomb c Y0) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. x \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n            m.cone {vec_first y n |y. y \\<in> Y0}", "by blast"], ["proof (state)\nthis:\n  x \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n          m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "}"], ["proof (state)\nthis:\n  ?x8 \\<in> P \\<Longrightarrow>\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  ?x8 \\<in> P \\<Longrightarrow>\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "{"], ["proof (state)\nthis:\n  ?x8 \\<in> P \\<Longrightarrow>\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "assume \"x \\<in> convex_hull ?Z1 + cone ?Z0\""], ["proof (state)\nthis:\n  x \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n          m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "then"], ["proof (chain)\npicking this:\n  x \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n          m.cone {vec_first y n |y. y \\<in> Y0}", "obtain y z where \"x = y + z\" and y: \"y \\<in> convex_hull ?Z1\"\n          and z: \"z \\<in> cone ?Z0\""], ["proof (prove)\nusing this:\n  x \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n          m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. (\\<And>y z.\n        \\<lbrakk>x = y + z;\n         y \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1};\n         z \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: set_plus_elim)"], ["proof (state)\nthis:\n  x = y + z\n  y \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  z \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have yn: \"y \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec n", "using y convex_hull_carrier[OF \\<open>?Z1 \\<subseteq> carrier_vec n\\<close>]"], ["proof (prove)\nusing this:\n  y \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  m.convex_hull {vec_first y n |y. y \\<in> Y1} \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec n", "by blast"], ["proof (state)\nthis:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"y @\\<^sub>v vec_of_scal 1 \\<in> carrier_vec (n + 1)\""], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "using vec_of_scal_dim(2)"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n  vec_of_scal ?x \\<in> carrier_vec 1\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "by fast"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"vec_first (y @\\<^sub>v vec_of_scal 1) n \\<in> convex_hull ?Z1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n    \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}", "using vec_first_append[OF yn] y"], ["proof (prove)\nusing this:\n  vec_first (y @\\<^sub>v ?w) n = y\n  y \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n\ngoal (1 subgoal):\n 1. vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n    \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}", "by auto"], ["proof (state)\nthis:\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"(y @\\<^sub>v vec_of_scal 1) $ n = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "using yn"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "by simp"], ["proof (state)\nthis:\n  (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "ultimately"], ["proof (chain)\npicking this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "have \"y @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone Y1\""], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y1", "using convex_hull_next_dim[OF _ Y1_carrier \\<open>finite Y1\\<close>] Y1"], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}\n  (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)\n  \\<lbrakk>n + 1 = n + 1; \\<forall>y\\<in>Y1. y $ n = (1::'a);\n   ?y \\<in> carrier_vec (n + 1); ?y $ n = (1::'a)\\<rbrakk>\n  \\<Longrightarrow> (vec_first ?y n\n                     \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1}) =\n                    (?y \\<in> next_dim.cone Y1)\n  ?y6 \\<in> Y1 \\<Longrightarrow> ?y6 $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y1", "by blast"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y1\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence y_cone: \"y @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone Y\""], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y1\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "using next_dim.cone_mono[of Y1 Y] Y1_def"], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y1\n  Y1 \\<subseteq> Y \\<Longrightarrow>\n  next_dim.cone Y1 \\<subseteq> next_dim.cone Y\n  Y1 = Y - Y0\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "by blast"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have zn: \"z \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<in> carrier_vec n", "using z cone_carrier[of ?Z0]"], ["proof (prove)\nusing this:\n  z \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n  {vec_first y n |y. y \\<in> Y0} \\<subseteq> carrier_vec n \\<Longrightarrow>\n  m.cone {vec_first y n |y. y \\<in> Y0} \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. z \\<in> carrier_vec n", "by fastforce"], ["proof (state)\nthis:\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"z @\\<^sub>v vec_of_scal 0 \\<in> carrier_vec (n + 1)\""], ["proof (prove)\nusing this:\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)", "using vec_of_scal_dim(2)"], ["proof (prove)\nusing this:\n  z \\<in> carrier_vec n\n  vec_of_scal ?x \\<in> carrier_vec 1\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)", "by fast"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"vec_first (z @\\<^sub>v vec_of_scal 0) n \\<in> cone ?Z0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n    \\<in> m.cone {vec_first y n |y. y \\<in> Y0}", "using vec_first_append[OF zn] z"], ["proof (prove)\nusing this:\n  vec_first (z @\\<^sub>v ?w) n = z\n  z \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n    \\<in> m.cone {vec_first y n |y. y \\<in> Y0}", "by auto"], ["proof (state)\nthis:\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "moreover"], ["proof (state)\nthis:\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"(z @\\<^sub>v vec_of_scal 0) $ n = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)", "using zn"], ["proof (prove)\nusing this:\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)", "by simp"], ["proof (state)\nthis:\n  (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "ultimately"], ["proof (chain)\npicking this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n  (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)", "have \"z @\\<^sub>v vec_of_scal 0 \\<in> next_dim.cone Y0\""], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n  (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y0", "using cone_next_dim[OF _ Y0_carrier \\<open>finite Y0\\<close>] Y0_def"], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n  \\<in> m.cone {vec_first y n |y. y \\<in> Y0}\n  (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)\n  \\<lbrakk>n + 1 = n + 1; \\<forall>y\\<in>Y0. y $ n = (0::'a);\n   ?y \\<in> carrier_vec (n + 1); ?y $ n = (0::'a)\\<rbrakk>\n  \\<Longrightarrow> (vec_first ?y n\n                     \\<in> m.cone {vec_first y n |y. y \\<in> Y0}) =\n                    (?y \\<in> next_dim.cone Y0)\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y0", "by blast"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y0\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence z_cone: \"z @\\<^sub>v vec_of_scal 0 \\<in> next_dim.cone Y\""], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y0\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y", "using Y0_def next_dim.cone_mono[of Y0 Y]"], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y0\n  Y0 = {v \\<in> Y. v $ n = (0::'a)}\n  Y0 \\<subseteq> Y \\<Longrightarrow>\n  next_dim.cone Y0 \\<subseteq> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y", "by blast"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have xn: \"x \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "using \\<open>x = y + z\\<close> yn zn"], ["proof (prove)\nusing this:\n  x = y + z\n  y \\<in> carrier_vec n\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "by blast"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "have \"x @\\<^sub>v vec_of_scal 1 = (y @\\<^sub>v vec_of_scal 1) + (z @\\<^sub>v vec_of_scal 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))", "using \\<open>x = y + z\\<close> append_vec_add[OF yn zn]"], ["proof (prove)\nusing this:\n  x = y + z\n  \\<lbrakk>?w \\<in> carrier_vec ?m; ?w' \\<in> carrier_vec ?m\\<rbrakk>\n  \\<Longrightarrow> y @\\<^sub>v ?w + (z @\\<^sub>v ?w') =\n                    (y + z) @\\<^sub>v ?w + ?w'\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))", "unfolding vec_of_scal_def"], ["proof (prove)\nusing this:\n  x = y + z\n  \\<lbrakk>?w \\<in> carrier_vec ?m; ?w' \\<in> carrier_vec ?m\\<rbrakk>\n  \\<Longrightarrow> y @\\<^sub>v ?w + (z @\\<^sub>v ?w') =\n                    (y + z) @\\<^sub>v ?w + ?w'\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec 1 (\\<lambda>i. 1::'a) =\n    y @\\<^sub>v vec 1 (\\<lambda>i. 1::'a) +\n    (z @\\<^sub>v vec 1 (\\<lambda>i. 0::'a))", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone Y\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "using next_dim.cone_elem_sum[OF Y_carrier y_cone z_cone]"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n  \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "by simp"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr", "using M_cone_car[OF xn] Y"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n  (x @\\<^sub>v vec_of_scal ?t7 \\<in> next_dim.polyhedral_cone M) =\n  (A *\\<^sub>v x - ?t7 \\<cdot>\\<^sub>v b \\<le> 0\\<^sub>v nr \\<and>\n   (0::'a) \\<le> ?t7)\n  next_dim.cone Y = next_dim.polyhedral_cone M\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr", "by simp"], ["proof (state)\nthis:\n  A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"A *\\<^sub>v x \\<le> b\""], ["proof (prove)\nusing this:\n  A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x \\<le> b", "using vec_le_iff_diff_le_0[of \"A *\\<^sub>v x\" b]\n            dim_mult_mat_vec[of A x] A"], ["proof (prove)\nusing this:\n  A *\\<^sub>v x - b \\<le> 0\\<^sub>v nr\n  (A *\\<^sub>v x \\<le> b) =\n  (A *\\<^sub>v x - b \\<le> 0\\<^sub>v (dim_vec (A *\\<^sub>v x)))\n  dim_vec (A *\\<^sub>v x) = dim_row A\n  A \\<in> carrier_mat nr n\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x \\<le> b", "by simp"], ["proof (state)\nthis:\n  A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "hence \"x \\<in> P\""], ["proof (prove)\nusing this:\n  A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. x \\<in> P", "using P xn"], ["proof (prove)\nusing this:\n  A *\\<^sub>v x \\<le> b\n  P = m.polyhedron A b\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x \\<in> P", "unfolding polyhedron_def"], ["proof (prove)\nusing this:\n  A *\\<^sub>v x \\<le> b\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x \\<in> P", "by blast"], ["proof (state)\nthis:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "}"], ["proof (state)\nthis:\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0} \\<Longrightarrow>\n  ?x8 \\<in> P\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "ultimately"], ["proof (chain)\npicking this:\n  ?x8 \\<in> P \\<Longrightarrow>\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0}\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0} \\<Longrightarrow>\n  ?x8 \\<in> P", "show \"P = convex_hull ?Z1 + cone ?Z0\""], ["proof (prove)\nusing this:\n  ?x8 \\<in> P \\<Longrightarrow>\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0}\n  ?x8\n  \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n        m.cone {vec_first y n |y. y \\<in> Y0} \\<Longrightarrow>\n  ?x8 \\<in> P\n\ngoal (1 subgoal):\n 1. P =\n    m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n    m.cone {vec_first y n |y. y \\<in> Y0}", "by blast"], ["proof (state)\nthis:\n  P =\n  m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n  m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P =\n  m.convex_hull {vec_first y n |y. y \\<in> Y1} +\n  m.cone {vec_first y n |y. y \\<in> Y0}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "let ?Bnd = \"det_bound n (max 1 Bnd)\""], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "assume \"A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd\"\n      \"b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\""], ["proof (state)\nthis:\n  A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd\n  b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence *: \"A \\<in> \\<int>\\<^sub>m\" \"A \\<in> Bounded_mat Bnd\" \"b \\<in> \\<int>\\<^sub>v\" \"b \\<in> Bounded_vec Bnd\""], ["proof (prove)\nusing this:\n  A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd\n  b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\n\ngoal (1 subgoal):\n 1. (A \\<in> \\<int>\\<^sub>m &&& A \\<in> Bounded_mat Bnd) &&&\n    b \\<in> \\<int>\\<^sub>v &&& b \\<in> Bounded_vec Bnd", "by auto"], ["proof (state)\nthis:\n  A \\<in> \\<int>\\<^sub>m\n  A \\<in> Bounded_mat Bnd\n  b \\<in> \\<int>\\<^sub>v\n  b \\<in> Bounded_vec Bnd\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"elements_mat M \\<subseteq> elements_mat A \\<union> vec_set (-b) \\<union> {0,-1}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat M\n    \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n                {0::'a, - (1::'a)}", "unfolding M_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat\n     ((A @\\<^sub>c mat_of_col (- b)) @\\<^sub>r\n      0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1)\n    \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n                {0::'a, - (1::'a)}", "unfolding elements_mat_append_rows[OF M_top M_bottom]"], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat (A @\\<^sub>c mat_of_col (- b)) \\<union>\n    elements_mat (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1)\n    \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n                {0::'a, - (1::'a)}", "unfolding elements_mat_append_cols[OF A mcb]"], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat A \\<union> elements_mat (mat_of_col (- b)) \\<union>\n    elements_mat (0\\<^sub>m 1 n @\\<^sub>c - 1\\<^sub>m 1)\n    \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n                {0::'a, - (1::'a)}", "by (subst elements_mat_append_cols, auto)"], ["proof (state)\nthis:\n  elements_mat M\n  \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n              {0::'a, - (1::'a)}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "also"], ["proof (state)\nthis:\n  elements_mat M\n  \\<subseteq> elements_mat A \\<union> set\\<^sub>v (- b) \\<union>\n              {0::'a, - (1::'a)}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"\\<dots> \\<subseteq> \\<int> \\<inter> ({x. abs x \\<le> Bnd} \\<union> {0,-1})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. elements_mat A \\<union> set\\<^sub>v (- b) \\<union> {0::'a, - (1::'a)}\n    \\<subseteq> \\<int> \\<inter>\n                ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})", "using *[unfolded Bounded_mat_elements_mat Ints_mat_elements_mat\n          Bounded_vec_vec_set Ints_vec_vec_set]"], ["proof (prove)\nusing this:\n  elements_mat A \\<subseteq> \\<int>\n  \\<forall>x\\<in>elements_mat A. \\<bar>x\\<bar> \\<le> Bnd\n  set\\<^sub>v b \\<subseteq> \\<int>\n  \\<forall>x\\<in>set\\<^sub>v b. \\<bar>x\\<bar> \\<le> Bnd\n\ngoal (1 subgoal):\n 1. elements_mat A \\<union> set\\<^sub>v (- b) \\<union> {0::'a, - (1::'a)}\n    \\<subseteq> \\<int> \\<inter>\n                ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})", "by auto"], ["proof (state)\nthis:\n  elements_mat A \\<union> set\\<^sub>v (- b) \\<union> {0::'a, - (1::'a)}\n  \\<subseteq> \\<int> \\<inter>\n              ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "also"], ["proof (state)\nthis:\n  elements_mat A \\<union> set\\<^sub>v (- b) \\<union> {0::'a, - (1::'a)}\n  \\<subseteq> \\<int> \\<inter>\n              ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"\\<dots> \\<subseteq> \\<int> \\<inter> ({x. abs x \\<le> max 1 Bnd})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<int> \\<inter>\n    ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})\n    \\<subseteq> \\<int> \\<inter> {x. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd}", "by auto"], ["proof (state)\nthis:\n  \\<int> \\<inter> ({x. \\<bar>x\\<bar> \\<le> Bnd} \\<union> {0::'a, - (1::'a)})\n  \\<subseteq> \\<int> \\<inter> {x. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd}\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "finally"], ["proof (chain)\npicking this:\n  elements_mat M\n  \\<subseteq> \\<int> \\<inter> {x. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd}", "have \"M \\<in> \\<int>\\<^sub>m\" \"M \\<in> Bounded_mat (max 1 Bnd)\""], ["proof (prove)\nusing this:\n  elements_mat M\n  \\<subseteq> \\<int> \\<inter> {x. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd}\n\ngoal (1 subgoal):\n 1. M \\<in> \\<int>\\<^sub>m &&& M \\<in> Bounded_mat (max (1::'a) Bnd)", "unfolding Bounded_mat_elements_mat Ints_mat_elements_mat"], ["proof (prove)\nusing this:\n  elements_mat M\n  \\<subseteq> \\<int> \\<inter> {x. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd}\n\ngoal (1 subgoal):\n 1. elements_mat M \\<subseteq> \\<int> &&&\n    \\<forall>x\\<in>elements_mat M. \\<bar>x\\<bar> \\<le> max (1::'a) Bnd", "by auto"], ["proof (state)\nthis:\n  M \\<in> \\<int>\\<^sub>m\n  M \\<in> Bounded_mat (max (1::'a) Bnd)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence \"M \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat (max 1 Bnd)\""], ["proof (prove)\nusing this:\n  M \\<in> \\<int>\\<^sub>m\n  M \\<in> Bounded_mat (max (1::'a) Bnd)\n\ngoal (1 subgoal):\n 1. M \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat (max (1::'a) Bnd)", "by blast"], ["proof (state)\nthis:\n  M \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat (max (1::'a) Bnd)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from Bnd[OF this]"], ["proof (chain)\npicking this:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))", "have XBnd: \"X \\<subseteq> \\<int>\\<^sub>v \\<inter> Bounded_vec ?Bnd\""], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (1 subgoal):\n 1. X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                  Bounded_vec (det_bound n (max (1::'a) Bnd))", "."], ["proof (state)\nthis:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "{"], ["proof (state)\nthis:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "fix y"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "assume y: \"y \\<in> Y\""], ["proof (state)\nthis:\n  y \\<in> Y\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "then"], ["proof (chain)\npicking this:\n  y \\<in> Y", "obtain x where y: \"y = ?f x \\<cdot>\\<^sub>v x\" and xX: \"x \\<in> X\""], ["proof (prove)\nusing this:\n  y \\<in> Y\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>y =\n                 (if x $ n = (0::'a) then 1::'a\n                  else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n                 x;\n         x \\<in> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Y_def"], ["proof (prove)\nusing this:\n  y \\<in> {(if x $ n = (0::'a) then 1::'a\n            else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n           x |\n           x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        \\<lbrakk>y =\n                 (if x $ n = (0::'a) then 1::'a\n                  else (1::'a) / x $ n) \\<cdot>\\<^sub>v\n                 x;\n         x \\<in> X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n  x \\<in> X\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "with \\<open>X \\<subseteq> carrier_vec (n+1)\\<close>"], ["proof (chain)\npicking this:\n  X \\<subseteq> carrier_vec (n + 1)\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n  x \\<in> X", "have x: \"x \\<in> carrier_vec (n+1)\""], ["proof (prove)\nusing this:\n  X \\<subseteq> carrier_vec (n + 1)\n  y = (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec (n + 1)", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec (n + 1)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from XBnd xX"], ["proof (chain)\npicking this:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n  x \\<in> X", "have xI: \"x \\<in> \\<int>\\<^sub>v\" and xB: \"x \\<in> Bounded_vec ?Bnd\""], ["proof (prove)\nusing this:\n  X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x \\<in> \\<int>\\<^sub>v &&&\n    x \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))", "by auto"], ["proof (state)\nthis:\n  x \\<in> \\<int>\\<^sub>v\n  x \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "{"], ["proof (state)\nthis:\n  x \\<in> \\<int>\\<^sub>v\n  x \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "assume \"y $ n = 0\""], ["proof (state)\nthis:\n  y $ n = (0::'a)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence \"y = x\""], ["proof (prove)\nusing this:\n  y $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. y = x", "unfolding y"], ["proof (prove)\nusing this:\n  ((if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x) $\n  n =\n  (0::'a)\n\ngoal (1 subgoal):\n 1. (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x =\n    x", "using x"], ["proof (prove)\nusing this:\n  ((if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x) $\n  n =\n  (0::'a)\n  x \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x =\n    x", "by auto"], ["proof (state)\nthis:\n  y = x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence \"y \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec ?Bnd\""], ["proof (prove)\nusing this:\n  y = x\n\ngoal (1 subgoal):\n 1. y \\<in> \\<int>\\<^sub>v \\<inter>\n            Bounded_vec (det_bound n (max (1::'a) Bnd))", "using xI xB"], ["proof (prove)\nusing this:\n  y = x\n  x \\<in> \\<int>\\<^sub>v\n  x \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (1 subgoal):\n 1. y \\<in> \\<int>\\<^sub>v \\<inter>\n            Bounded_vec (det_bound n (max (1::'a) Bnd))", "by auto"], ["proof (state)\nthis:\n  y \\<in> \\<int>\\<^sub>v \\<inter>\n          Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "}"], ["proof (state)\nthis:\n  y $ n = (0::'a) \\<Longrightarrow>\n  y \\<in> \\<int>\\<^sub>v \\<inter>\n          Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "note y0 = this"], ["proof (state)\nthis:\n  y $ n = (0::'a) \\<Longrightarrow>\n  y \\<in> \\<int>\\<^sub>v \\<inter>\n          Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "{"], ["proof (state)\nthis:\n  y $ n = (0::'a) \\<Longrightarrow>\n  y \\<in> \\<int>\\<^sub>v \\<inter>\n          Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "assume \"y $ n \\<noteq> 0\""], ["proof (state)\nthis:\n  y $ n \\<noteq> (0::'a)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence x0: \"x $ n \\<noteq> 0\""], ["proof (prove)\nusing this:\n  y $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a)", "using x"], ["proof (prove)\nusing this:\n  y $ n \\<noteq> (0::'a)\n  x \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a)", "unfolding y"], ["proof (prove)\nusing this:\n  ((if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x) $\n  n \\<noteq>\n  (0::'a)\n  x \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. x $ n \\<noteq> (0::'a)", "by auto"], ["proof (state)\nthis:\n  x $ n \\<noteq> (0::'a)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from x xI"], ["proof (chain)\npicking this:\n  x \\<in> carrier_vec (n + 1)\n  x \\<in> \\<int>\\<^sub>v", "have \"x $ n \\<in> \\<int>\""], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec (n + 1)\n  x \\<in> \\<int>\\<^sub>v\n\ngoal (1 subgoal):\n 1. x $ n \\<in> \\<int>", "unfolding Ints_vec_def"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec (n + 1)\n  x \\<in> {x. \\<forall>i<dim_vec x. x $ i \\<in> \\<int>}\n\ngoal (1 subgoal):\n 1. x $ n \\<in> \\<int>", "by auto"], ["proof (state)\nthis:\n  x $ n \\<in> \\<int>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "with x0"], ["proof (chain)\npicking this:\n  x $ n \\<noteq> (0::'a)\n  x $ n \\<in> \\<int>", "have \"abs (x $ n) \\<ge> 1\""], ["proof (prove)\nusing this:\n  x $ n \\<noteq> (0::'a)\n  x $ n \\<in> \\<int>\n\ngoal (1 subgoal):\n 1. (1::'a) \\<le> \\<bar>x $ n\\<bar>", "by (meson Ints_nonzero_abs_ge1)"], ["proof (state)\nthis:\n  (1::'a) \\<le> \\<bar>x $ n\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "hence abs: \"abs (1 / (x $ n)) \\<le> 1\""], ["proof (prove)\nusing this:\n  (1::'a) \\<le> \\<bar>x $ n\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>(1::'a) / x $ n\\<bar> \\<le> (1::'a)", "by simp"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n\\<bar> \\<le> (1::'a)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "{"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n\\<bar> \\<le> (1::'a)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "fix a"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"abs ((1 / (x $ n)) * a) = abs (1 / (x $ n)) * abs a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(1::'a) / x $ n * a\\<bar> =\n    \\<bar>(1::'a) / x $ n\\<bar> * \\<bar>a\\<bar>", "by simp"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n * a\\<bar> =\n  \\<bar>(1::'a) / x $ n\\<bar> * \\<bar>a\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "also"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n * a\\<bar> =\n  \\<bar>(1::'a) / x $ n\\<bar> * \\<bar>a\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"\\<dots> \\<le> 1 * abs a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<bar>(1::'a) / x $ n\\<bar> * \\<bar>a\\<bar>\n    \\<le> (1::'a) * \\<bar>a\\<bar>", "by (rule mult_right_mono[OF abs], auto)"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n\\<bar> * \\<bar>a\\<bar> \\<le> (1::'a) * \\<bar>a\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "finally"], ["proof (chain)\npicking this:\n  \\<bar>(1::'a) / x $ n * a\\<bar> \\<le> (1::'a) * \\<bar>a\\<bar>", "have \"abs ((1 / (x $ n)) * a) \\<le> abs a\""], ["proof (prove)\nusing this:\n  \\<bar>(1::'a) / x $ n * a\\<bar> \\<le> (1::'a) * \\<bar>a\\<bar>\n\ngoal (1 subgoal):\n 1. \\<bar>(1::'a) / x $ n * a\\<bar> \\<le> \\<bar>a\\<bar>", "by auto"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n * a\\<bar> \\<le> \\<bar>a\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "}"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n * ?a8\\<bar> \\<le> \\<bar>?a8\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "note abs = this"], ["proof (state)\nthis:\n  \\<bar>(1::'a) / x $ n * ?a8\\<bar> \\<le> \\<bar>?a8\\<bar>\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from x0"], ["proof (chain)\npicking this:\n  x $ n \\<noteq> (0::'a)", "have y: \"y = (1 / (x $ n)) \\<cdot>\\<^sub>v x\""], ["proof (prove)\nusing this:\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. y = (1::'a) / x $ n \\<cdot>\\<^sub>v x", "unfolding y"], ["proof (prove)\nusing this:\n  x $ n \\<noteq> (0::'a)\n\ngoal (1 subgoal):\n 1. (if x $ n = (0::'a) then 1::'a else (1::'a) / x $ n) \\<cdot>\\<^sub>v x =\n    (1::'a) / x $ n \\<cdot>\\<^sub>v x", "by auto"], ["proof (state)\nthis:\n  y = (1::'a) / x $ n \\<cdot>\\<^sub>v x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have vy: \"vec_set y = (\\<lambda> a. (1 / (x $ n)) * a) ` vec_set x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. set\\<^sub>v y = (*) ((1::'a) / x $ n) ` set\\<^sub>v x", "unfolding y"], ["proof (prove)\ngoal (1 subgoal):\n 1. set\\<^sub>v ((1::'a) / x $ n \\<cdot>\\<^sub>v x) =\n    (*) ((1::'a) / x $ n) ` set\\<^sub>v x", "by (auto simp: vec_set_def)"], ["proof (state)\nthis:\n  set\\<^sub>v y = (*) ((1::'a) / x $ n) ` set\\<^sub>v x\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "have \"y \\<in> Bounded_vec ?Bnd\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))", "using xB abs"], ["proof (prove)\nusing this:\n  x \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n  \\<bar>(1::'a) / x $ n * ?a8\\<bar> \\<le> \\<bar>?a8\\<bar>\n\ngoal (1 subgoal):\n 1. y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))", "unfolding Bounded_vec_vec_set vy"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>set\\<^sub>v x.\n     \\<bar>x\\<bar> \\<le> det_bound n (max (1::'a) Bnd)\n  \\<bar>(1::'a) / x $ n * ?a8\\<bar> \\<le> \\<bar>?a8\\<bar>\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>(*) ((1::'a) / x $ n) ` set\\<^sub>v x.\n       \\<bar>x\\<bar> \\<le> det_bound n (max (1::'a) Bnd)", "by (smt imageE max.absorb2 max.bounded_iff)"], ["proof (state)\nthis:\n  y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "}"], ["proof (state)\nthis:\n  y $ n \\<noteq> (0::'a) \\<Longrightarrow>\n  y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "note yn0 = this"], ["proof (state)\nthis:\n  y $ n \\<noteq> (0::'a) \\<Longrightarrow>\n  y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "note y0 yn0"], ["proof (state)\nthis:\n  y $ n = (0::'a) \\<Longrightarrow>\n  y \\<in> \\<int>\\<^sub>v \\<inter>\n          Bounded_vec (det_bound n (max (1::'a) Bnd))\n  y $ n \\<noteq> (0::'a) \\<Longrightarrow>\n  y \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n = (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8\n                    \\<in> \\<int>\\<^sub>v \\<inter>\n                          Bounded_vec (det_bound n (max (1::'a) Bnd))\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n \\<noteq> (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8 \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "note BndY = this"], ["proof (state)\nthis:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n = (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8\n                    \\<in> \\<int>\\<^sub>v \\<inter>\n                          Bounded_vec (det_bound n (max (1::'a) Bnd))\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n \\<noteq> (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8 \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from \\<open>Y \\<subseteq> carrier_vec (n+1)\\<close>"], ["proof (chain)\npicking this:\n  Y \\<subseteq> carrier_vec (n + 1)", "have setvY: \"y \\<in> Y \\<Longrightarrow> set\\<^sub>v (vec_first y n) \\<subseteq> set\\<^sub>v y\" for y"], ["proof (prove)\nusing this:\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. y \\<in> Y \\<Longrightarrow>\n    set\\<^sub>v (vec_first y n) \\<subseteq> set\\<^sub>v y", "unfolding vec_first_def vec_set_def"], ["proof (prove)\nusing this:\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. y \\<in> Y \\<Longrightarrow>\n    ($) (vec n (($) y)) ` {..<dim_vec (vec n (($) y))}\n    \\<subseteq> ($) y ` {..<dim_vec y}", "by auto"], ["proof (state)\nthis:\n  ?y6 \\<in> Y \\<Longrightarrow>\n  set\\<^sub>v (vec_first ?y6 n) \\<subseteq> set\\<^sub>v ?y6\n\ngoal (2 subgoals):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y0}\n                      \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                                  Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))\n 2. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from BndY(1) setvY"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n = (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8\n                    \\<in> \\<int>\\<^sub>v \\<inter>\n                          Bounded_vec (det_bound n (max (1::'a) Bnd))\n  ?y6 \\<in> Y \\<Longrightarrow>\n  set\\<^sub>v (vec_first ?y6 n) \\<subseteq> set\\<^sub>v ?y6", "show \"?Z0 \\<subseteq> \\<int>\\<^sub>v \\<inter> Bounded_vec (det_bound n (max 1 Bnd))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n = (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8\n                    \\<in> \\<int>\\<^sub>v \\<inter>\n                          Bounded_vec (det_bound n (max (1::'a) Bnd))\n  ?y6 \\<in> Y \\<Longrightarrow>\n  set\\<^sub>v (vec_first ?y6 n) \\<subseteq> set\\<^sub>v ?y6\n\ngoal (1 subgoal):\n 1. {vec_first y n |y. y \\<in> Y0}\n    \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                Bounded_vec (det_bound n (max (1::'a) Bnd))", "by (force simp: Bounded_vec_vec_set Ints_vec_vec_set Y0_def)"], ["proof (state)\nthis:\n  {vec_first y n |y. y \\<in> Y0}\n  \\<subseteq> \\<int>\\<^sub>v \\<inter>\n              Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal (1 subgoal):\n 1. \\<lbrakk>A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd;\n     b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd\\<rbrakk>\n    \\<Longrightarrow> {vec_first y n |y. y \\<in> Y1}\n                      \\<subseteq> Bounded_vec\n                                   (det_bound n (max (1::'a) Bnd))", "from BndY(2) setvY"], ["proof (chain)\npicking this:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n \\<noteq> (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8 \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n  ?y6 \\<in> Y \\<Longrightarrow>\n  set\\<^sub>v (vec_first ?y6 n) \\<subseteq> set\\<^sub>v ?y6", "show \"?Z1 \\<subseteq> Bounded_vec (det_bound n (max 1 Bnd))\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?y8 \\<in> Y; ?y8 $ n \\<noteq> (0::'a)\\<rbrakk>\n  \\<Longrightarrow> ?y8 \\<in> Bounded_vec (det_bound n (max (1::'a) Bnd))\n  ?y6 \\<in> Y \\<Longrightarrow>\n  set\\<^sub>v (vec_first ?y6 n) \\<subseteq> set\\<^sub>v ?y6\n\ngoal (1 subgoal):\n 1. {vec_first y n |y. y \\<in> Y1}\n    \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd))", "by (force simp: Bounded_vec_vec_set Ints_vec_vec_set Y0_def Y1_def)"], ["proof (state)\nthis:\n  {vec_first y n |y. y \\<in> Y1}\n  \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>Q X.\n     X \\<subseteq> carrier_vec n \\<and>\n     finite X \\<and>\n     Q \\<subseteq> carrier_vec n \\<and>\n     finite Q \\<and>\n     P = m.convex_hull Q + m.cone X \\<and>\n     (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat Bnd \\<longrightarrow>\n      b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec Bnd \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                    Bounded_vec (det_bound n (max (1::'a) Bnd)) \\<and>\n      Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) Bnd)))\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decomposition_theorem_polyhedra_2:\n  assumes Q: \"Q \\<subseteq> carrier_vec n\" and fin_Q: \"finite Q\"\n    and X: \"X \\<subseteq> carrier_vec n\" and fin_X: \"finite X\"\n    and P: \"P = convex_hull Q + cone X\"\n  shows \"\\<exists>A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "interpret next_dim: gram_schmidt \"n + 1\" \"TYPE ('a)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "interpret gram_schmidt_m \"n + 1\" n \"TYPE('a)\""], ["proof (prove)\ngoal:\nNo subgoals!", "."], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "from fin_Q"], ["proof (chain)\npicking this:\n  finite Q", "obtain Qs where Qs: \"Q = set Qs\""], ["proof (prove)\nusing this:\n  finite Q\n\ngoal (1 subgoal):\n 1. (\\<And>Qs. Q = set Qs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using finite_list"], ["proof (prove)\nusing this:\n  finite Q\n  finite ?A \\<Longrightarrow> \\<exists>xs. set xs = ?A\n\ngoal (1 subgoal):\n 1. (\\<And>Qs. Q = set Qs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  Q = set Qs\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "from fin_X"], ["proof (chain)\npicking this:\n  finite X", "obtain Xs where Xs: \"X = set Xs\""], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "using finite_list"], ["proof (prove)\nusing this:\n  finite X\n  finite ?A \\<Longrightarrow> \\<exists>xs. set xs = ?A\n\ngoal (1 subgoal):\n 1. (\\<And>Xs. X = set Xs \\<Longrightarrow> thesis) \\<Longrightarrow> thesis", "by auto"], ["proof (state)\nthis:\n  X = set Xs\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "define Y where \"Y = {x @\\<^sub>v vec_of_scal 1 | x. x \\<in> Q}\""], ["proof (state)\nthis:\n  Y = {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "define Z where \"Z = {x @\\<^sub>v vec_of_scal 0 | x. x \\<in> X}\""], ["proof (state)\nthis:\n  Z = {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have fin_Y: \"finite Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite Y", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}", "using fin_Q"], ["proof (prove)\nusing this:\n  finite Q\n\ngoal (1 subgoal):\n 1. finite {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}", "by simp"], ["proof (state)\nthis:\n  finite Y\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have fin_Z: \"finite Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite Z", "unfolding Z_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}", "using fin_X"], ["proof (prove)\nusing this:\n  finite X\n\ngoal (1 subgoal):\n 1. finite {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}", "by simp"], ["proof (state)\nthis:\n  finite Z\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Y_dim: \"Y \\<subseteq> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<subseteq> carrier_vec (n + 1)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}\n    \\<subseteq> carrier_vec (n + 1)", "using Q append_carrier_vec[OF _ vec_of_scal_dim(2)[of 1]]"], ["proof (prove)\nusing this:\n  Q \\<subseteq> carrier_vec n\n  ?v \\<in> carrier_vec ?n1.0 \\<Longrightarrow>\n  ?v @\\<^sub>v vec_of_scal (1::?'b5) \\<in> carrier_vec (?n1.0 + 1)\n\ngoal (1 subgoal):\n 1. {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}\n    \\<subseteq> carrier_vec (n + 1)", "by blast"], ["proof (state)\nthis:\n  Y \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Z_dim: \"Z \\<subseteq> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Z \\<subseteq> carrier_vec (n + 1)", "unfolding Z_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}\n    \\<subseteq> carrier_vec (n + 1)", "using X append_carrier_vec[OF _ vec_of_scal_dim(2)[of 0]]"], ["proof (prove)\nusing this:\n  X \\<subseteq> carrier_vec n\n  ?v \\<in> carrier_vec ?n1.0 \\<Longrightarrow>\n  ?v @\\<^sub>v vec_of_scal (0::?'b5) \\<in> carrier_vec (?n1.0 + 1)\n\ngoal (1 subgoal):\n 1. {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}\n    \\<subseteq> carrier_vec (n + 1)", "by blast"], ["proof (state)\nthis:\n  Z \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Y_car: \"Q = {vec_first x n | x. x \\<in> Y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q = {vec_first x n |x. x \\<in> Y}", "proof (intro equalityI subsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Q \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Y}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Q \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Y}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "assume x: \"x \\<in> Q\""], ["proof (state)\nthis:\n  x \\<in> Q\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Q \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Y}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> Y\""], ["proof (prove)\nusing this:\n  x \\<in> Q\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> Y", "unfolding Y_def"], ["proof (prove)\nusing this:\n  x \\<in> Q\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a)\n    \\<in> {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}", "by blast"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> Y\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> Q \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Y}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "thus \"x \\<in> {vec_first x n | x. x \\<in> Y}\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> Y\n\ngoal (1 subgoal):\n 1. x \\<in> {vec_first x n |x. x \\<in> Y}", "using Q vec_first_append[of x n \"vec_of_scal 1\"] x"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> Y\n  Q \\<subseteq> carrier_vec n\n  x \\<in> carrier_vec n \\<Longrightarrow>\n  vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n = x\n  x \\<in> Q\n\ngoal (1 subgoal):\n 1. x \\<in> {vec_first x n |x. x \\<in> Y}", "by force"], ["proof (state)\nthis:\n  x \\<in> {vec_first x n |x. x \\<in> Y}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "assume \"x \\<in> {vec_first x n | x. x \\<in> Y}\""], ["proof (state)\nthis:\n  x \\<in> {vec_first x n |x. x \\<in> Y}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "then"], ["proof (chain)\npicking this:\n  x \\<in> {vec_first x n |x. x \\<in> Y}", "obtain y where \"y \\<in> Q\" and \"x = vec_first (y @\\<^sub>v vec_of_scal 1) n\""], ["proof (prove)\nusing this:\n  x \\<in> {vec_first x n |x. x \\<in> Y}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>y \\<in> Q;\n         x = vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Y_def"], ["proof (prove)\nusing this:\n  x \\<in> {vec_first x n |x.\n           x \\<in> {x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>y \\<in> Q;\n         x = vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  y \\<in> Q\n  x = vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Y} \\<Longrightarrow> x \\<in> Q", "thus \"x \\<in> Q\""], ["proof (prove)\nusing this:\n  y \\<in> Q\n  x = vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n\ngoal (1 subgoal):\n 1. x \\<in> Q", "using Q vec_first_append[of y]"], ["proof (prove)\nusing this:\n  y \\<in> Q\n  x = vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n  Q \\<subseteq> carrier_vec n\n  y \\<in> carrier_vec ?n \\<Longrightarrow> vec_first (y @\\<^sub>v ?w) ?n = y\n\ngoal (1 subgoal):\n 1. x \\<in> Q", "by auto"], ["proof (state)\nthis:\n  x \\<in> Q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Q = {vec_first x n |x. x \\<in> Y}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Z_car: \"X = {vec_first x n | x. x \\<in> Z}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. X = {vec_first x n |x. x \\<in> Z}", "proof (intro equalityI subsetI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Z}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Z}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "assume x: \"x \\<in> X\""], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Z}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "hence \"x @\\<^sub>v vec_of_scal 0 \\<in> Z\""], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (0::'a) \\<in> Z", "unfolding Z_def"], ["proof (prove)\nusing this:\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (0::'a)\n    \\<in> {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}", "by blast"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (0::'a) \\<in> Z\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> X \\<Longrightarrow> x \\<in> {vec_first x n |x. x \\<in> Z}\n 2. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "thus \"x \\<in> {vec_first x n | x. x \\<in> Z}\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (0::'a) \\<in> Z\n\ngoal (1 subgoal):\n 1. x \\<in> {vec_first x n |x. x \\<in> Z}", "using X vec_first_append[of x n \"vec_of_scal 0\"] x"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (0::'a) \\<in> Z\n  X \\<subseteq> carrier_vec n\n  x \\<in> carrier_vec n \\<Longrightarrow>\n  vec_first (x @\\<^sub>v vec_of_scal (0::'a)) n = x\n  x \\<in> X\n\ngoal (1 subgoal):\n 1. x \\<in> {vec_first x n |x. x \\<in> Z}", "by force"], ["proof (state)\nthis:\n  x \\<in> {vec_first x n |x. x \\<in> Z}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "assume \"x \\<in> {vec_first x n | x. x \\<in> Z}\""], ["proof (state)\nthis:\n  x \\<in> {vec_first x n |x. x \\<in> Z}\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "then"], ["proof (chain)\npicking this:\n  x \\<in> {vec_first x n |x. x \\<in> Z}", "obtain y where \"y \\<in> X\" and \"x = vec_first (y @\\<^sub>v vec_of_scal 0) n\""], ["proof (prove)\nusing this:\n  x \\<in> {vec_first x n |x. x \\<in> Z}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>y \\<in> X;\n         x = vec_first (y @\\<^sub>v vec_of_scal (0::'a)) n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Z_def"], ["proof (prove)\nusing this:\n  x \\<in> {vec_first x n |x.\n           x \\<in> {x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}}\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        \\<lbrakk>y \\<in> X;\n         x = vec_first (y @\\<^sub>v vec_of_scal (0::'a)) n\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  y \\<in> X\n  x = vec_first (y @\\<^sub>v vec_of_scal (0::'a)) n\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> {vec_first x n |x. x \\<in> Z} \\<Longrightarrow> x \\<in> X", "thus \"x \\<in> X\""], ["proof (prove)\nusing this:\n  y \\<in> X\n  x = vec_first (y @\\<^sub>v vec_of_scal (0::'a)) n\n\ngoal (1 subgoal):\n 1. x \\<in> X", "using X vec_first_append[of y]"], ["proof (prove)\nusing this:\n  y \\<in> X\n  x = vec_first (y @\\<^sub>v vec_of_scal (0::'a)) n\n  X \\<subseteq> carrier_vec n\n  y \\<in> carrier_vec ?n \\<Longrightarrow> vec_first (y @\\<^sub>v ?w) ?n = y\n\ngoal (1 subgoal):\n 1. x \\<in> X", "by auto"], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  X = {vec_first x n |x. x \\<in> Z}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Y_last: \"\\<forall> x \\<in> Y. x $ n = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>Y. x $ n = (1::'a)", "unfolding Y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}.\n       x $ n = (1::'a)", "using Q"], ["proof (prove)\nusing this:\n  Q \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x @\\<^sub>v vec_of_scal (1::'a) |x. x \\<in> Q}.\n       x $ n = (1::'a)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>Y. x $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have Z_last: \"\\<forall> x \\<in> Z. x $ n = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>Z. x $ n = (0::'a)", "unfolding Z_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}.\n       x $ n = (0::'a)", "using X"], ["proof (prove)\nusing this:\n  X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<forall>x\\<in>{x @\\<^sub>v vec_of_scal (0::'a) |x. x \\<in> X}.\n       x $ n = (0::'a)", "by auto"], ["proof (state)\nthis:\n  \\<forall>x\\<in>Z. x $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"finite (Y \\<union> Z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (Y \\<union> Z)", "using fin_Y fin_Z"], ["proof (prove)\nusing this:\n  finite Y\n  finite Z\n\ngoal (1 subgoal):\n 1. finite (Y \\<union> Z)", "by blast"], ["proof (state)\nthis:\n  finite (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "moreover"], ["proof (state)\nthis:\n  finite (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"Y \\<union> Z \\<subseteq> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<union> Z \\<subseteq> carrier_vec (n + 1)", "using Y_dim Z_dim"], ["proof (prove)\nusing this:\n  Y \\<subseteq> carrier_vec (n + 1)\n  Z \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. Y \\<union> Z \\<subseteq> carrier_vec (n + 1)", "by blast"], ["proof (state)\nthis:\n  Y \\<union> Z \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "ultimately"], ["proof (chain)\npicking this:\n  finite (Y \\<union> Z)\n  Y \\<union> Z \\<subseteq> carrier_vec (n + 1)", "obtain B nr\n    where B: \"next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone B\"\n      and B_carrier: \"B \\<in> carrier_mat nr (n + 1)\""], ["proof (prove)\nusing this:\n  finite (Y \\<union> Z)\n  Y \\<union> Z \\<subseteq> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. (\\<And>B nr.\n        \\<lbrakk>next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone B;\n         B \\<in> carrier_mat nr (n + 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using next_dim.farkas_minkowsky_weyl_theorem[of \"next_dim.cone (Y \\<union> Z)\"]"], ["proof (prove)\nusing this:\n  finite (Y \\<union> Z)\n  Y \\<union> Z \\<subseteq> carrier_vec (n + 1)\n  (\\<exists>X\\<subseteq>carrier_vec (n + 1).\n      finite X \\<and> next_dim.cone (Y \\<union> Z) = next_dim.cone X) =\n  (\\<exists>A nr.\n      A \\<in> carrier_mat nr (n + 1) \\<and>\n      next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone A)\n\ngoal (1 subgoal):\n 1. (\\<And>B nr.\n        \\<lbrakk>next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone B;\n         B \\<in> carrier_mat nr (n + 1)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone B\n  B \\<in> carrier_mat nr (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "define A where \"A = mat_col_first B n\""], ["proof (state)\nthis:\n  A = mat_col_first B n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "define b where \"b = col B n\""], ["proof (state)\nthis:\n  b = col B n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have B_blocks: \"B = A @\\<^sub>c mat_of_col b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B = A @\\<^sub>c mat_of_col b", "unfolding A_def b_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. B = mat_col_first B n @\\<^sub>c mat_of_col (col B n)", "using mat_col_first_last_append[of B n 1] B_carrier\n      mat_of_col_dim_col_1[of \"mat_col_last B 1\"]"], ["proof (prove)\nusing this:\n  dim_col B = n + 1 \\<Longrightarrow>\n  mat_col_first B n @\\<^sub>c mat_col_last B 1 = B\n  B \\<in> carrier_mat nr (n + 1)\n  (dim_col (mat_col_last B 1) = 1) =\n  (mat_col_last B 1 = mat_of_col (col (mat_col_last B 1) 0))\n\ngoal (1 subgoal):\n 1. B = mat_col_first B n @\\<^sub>c mat_of_col (col B n)", "by auto"], ["proof (state)\nthis:\n  B = A @\\<^sub>c mat_of_col b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have A_carrier: \"A \\<in> carrier_mat nr n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A \\<in> carrier_mat nr n", "unfolding A_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_col_first B n \\<in> carrier_mat nr n", "using B_carrier"], ["proof (prove)\nusing this:\n  B \\<in> carrier_mat nr (n + 1)\n\ngoal (1 subgoal):\n 1. mat_col_first B n \\<in> carrier_mat nr n", "by force"], ["proof (state)\nthis:\n  A \\<in> carrier_mat nr n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have b_carrier: \"b \\<in> carrier_vec nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b \\<in> carrier_vec nr", "unfolding b_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. col B n \\<in> carrier_vec nr", "using B_carrier"], ["proof (prove)\nusing this:\n  B \\<in> carrier_mat nr (n + 1)\n\ngoal (1 subgoal):\n 1. col B n \\<in> carrier_vec nr", "by force"], ["proof (state)\nthis:\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "{"], ["proof (state)\nthis:\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "assume \"x \\<in> P\""], ["proof (state)\nthis:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "then"], ["proof (chain)\npicking this:\n  x \\<in> P", "obtain y z where x: \"x = y + z\" and y: \"y \\<in> convex_hull Q\" and z: \"z \\<in> cone X\""], ["proof (prove)\nusing this:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. (\\<And>y z.\n        \\<lbrakk>x = y + z; y \\<in> m.convex_hull Q;\n         z \\<in> m.cone X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using P"], ["proof (prove)\nusing this:\n  x \\<in> P\n  P = m.convex_hull Q + m.cone X\n\ngoal (1 subgoal):\n 1. (\\<And>y z.\n        \\<lbrakk>x = y + z; y \\<in> m.convex_hull Q;\n         z \\<in> m.cone X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto elim: set_plus_elim)"], ["proof (state)\nthis:\n  x = y + z\n  y \\<in> m.convex_hull Q\n  z \\<in> m.cone X\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have yn: \"y \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec n", "using y convex_hull_carrier[OF Q]"], ["proof (prove)\nusing this:\n  y \\<in> m.convex_hull Q\n  m.convex_hull Q \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec n", "by blast"], ["proof (state)\nthis:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "moreover"], ["proof (state)\nthis:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have zn: \"z \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<in> carrier_vec n", "using z cone_carrier[OF X]"], ["proof (prove)\nusing this:\n  z \\<in> m.cone X\n  m.cone X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. z \\<in> carrier_vec n", "by blast"], ["proof (state)\nthis:\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "ultimately"], ["proof (chain)\npicking this:\n  y \\<in> carrier_vec n\n  z \\<in> carrier_vec n", "have xn: \"x \\<in> carrier_vec n\""], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "using x"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n  z \\<in> carrier_vec n\n  x = y + z\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "by blast"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have yn1: \"y @\\<^sub>v vec_of_scal 1 \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "using append_carrier_vec[OF yn] vec_of_scal_dim"], ["proof (prove)\nusing this:\n  ?w \\<in> carrier_vec ?n2.0 \\<Longrightarrow>\n  y @\\<^sub>v ?w \\<in> carrier_vec (n + ?n2.0)\n  dim_vec (vec_of_scal ?x) = 1\n  vec_of_scal ?x \\<in> carrier_vec 1\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "by fast"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have y_last: \"(y @\\<^sub>v vec_of_scal 1) $ n = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "using yn"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "by force"], ["proof (state)\nthis:\n  (y @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"vec_first (y @\\<^sub>v vec_of_scal 1) n = y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n = y", "using vec_first_append[OF yn]"], ["proof (prove)\nusing this:\n  vec_first (y @\\<^sub>v ?w) n = y\n\ngoal (1 subgoal):\n 1. vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n = y", "by simp"], ["proof (state)\nthis:\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n = y\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence \"y @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone Y\""], ["proof (prove)\nusing this:\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n = y\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "using convex_hull_next_dim[OF _ Y_dim fin_Y Y_last yn1 y_last] Y_car y"], ["proof (prove)\nusing this:\n  vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n = y\n  n + 1 = n + 1 \\<Longrightarrow>\n  (vec_first (y @\\<^sub>v vec_of_scal (1::'a)) n\n   \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y}) =\n  (y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y)\n  Q = {vec_first x n |x. x \\<in> Y}\n  y \\<in> m.convex_hull Q\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y", "by argo"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence y_cone: \"y @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone (Y \\<union> Z)\""], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)", "using next_dim.cone_mono[of Y \"Y \\<union> Z\"]"], ["proof (prove)\nusing this:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone Y\n  Y \\<subseteq> Y \\<union> Z \\<Longrightarrow>\n  next_dim.cone Y \\<subseteq> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)", "by blast"], ["proof (state)\nthis:\n  y @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have zn1: \"z @\\<^sub>v vec_of_scal 0 \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)", "using append_carrier_vec[OF zn] vec_of_scal_dim"], ["proof (prove)\nusing this:\n  ?w \\<in> carrier_vec ?n2.0 \\<Longrightarrow>\n  z @\\<^sub>v ?w \\<in> carrier_vec (n + ?n2.0)\n  dim_vec (vec_of_scal ?x) = 1\n  vec_of_scal ?x \\<in> carrier_vec 1\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)", "by fast"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have z_last: \"(z @\\<^sub>v vec_of_scal 0) $ n = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)", "using zn"], ["proof (prove)\nusing this:\n  z \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)", "by force"], ["proof (state)\nthis:\n  (z @\\<^sub>v vec_of_scal (0::'a)) $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"vec_first (z @\\<^sub>v vec_of_scal 0) n = z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n = z", "using vec_first_append[OF zn]"], ["proof (prove)\nusing this:\n  vec_first (z @\\<^sub>v ?w) n = z\n\ngoal (1 subgoal):\n 1. vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n = z", "by simp"], ["proof (state)\nthis:\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n = z\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence \"z @\\<^sub>v vec_of_scal 0 \\<in> next_dim.cone Z\""], ["proof (prove)\nusing this:\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n = z\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z", "using cone_next_dim[OF _ Z_dim fin_Z Z_last zn1 z_last] Z_car z"], ["proof (prove)\nusing this:\n  vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n = z\n  n + 1 = n + 1 \\<Longrightarrow>\n  (vec_first (z @\\<^sub>v vec_of_scal (0::'a)) n\n   \\<in> m.cone {vec_first y n |y. y \\<in> Z}) =\n  (z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z)\n  X = {vec_first x n |x. x \\<in> Z}\n  z \\<in> m.cone X\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z", "by argo"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence z_cone: \"z @\\<^sub>v vec_of_scal 0 \\<in> next_dim.cone (Y \\<union> Z)\""], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone (Y \\<union> Z)", "using next_dim.cone_mono[of Z \"Y \\<union> Z\"]"], ["proof (prove)\nusing this:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone Z\n  Z \\<subseteq> Y \\<union> Z \\<Longrightarrow>\n  next_dim.cone Z \\<subseteq> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone (Y \\<union> Z)", "by blast"], ["proof (state)\nthis:\n  z @\\<^sub>v vec_of_scal (0::'a) \\<in> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "from \\<open>x = y + z\\<close>"], ["proof (chain)\npicking this:\n  x = y + z", "have \"x @\\<^sub>v vec_of_scal 1 = (y @\\<^sub>v vec_of_scal 1) + (z @\\<^sub>v vec_of_scal 0)\""], ["proof (prove)\nusing this:\n  x = y + z\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))", "using append_vec_add[OF yn zn] vec_of_scal_dim_1"], ["proof (prove)\nusing this:\n  x = y + z\n  \\<lbrakk>?w \\<in> carrier_vec ?m; ?w' \\<in> carrier_vec ?m\\<rbrakk>\n  \\<Longrightarrow> y @\\<^sub>v ?w + (z @\\<^sub>v ?w') =\n                    (y + z) @\\<^sub>v ?w + ?w'\n  (?v \\<in> carrier_vec 1) = (?v = vec_of_scal (?v $ 0))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))", "unfolding vec_of_scal_def"], ["proof (prove)\nusing this:\n  x = y + z\n  \\<lbrakk>?w \\<in> carrier_vec ?m; ?w' \\<in> carrier_vec ?m\\<rbrakk>\n  \\<Longrightarrow> y @\\<^sub>v ?w + (z @\\<^sub>v ?w') =\n                    (y + z) @\\<^sub>v ?w + ?w'\n  (?v \\<in> carrier_vec 1) = (?v = vec 1 (\\<lambda>i. ?v $ 0))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec 1 (\\<lambda>i. 1::'a) =\n    y @\\<^sub>v vec 1 (\\<lambda>i. 1::'a) +\n    (z @\\<^sub>v vec 1 (\\<lambda>i. 0::'a))", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone (Y \\<union> Z) \\<and> x \\<in> carrier_vec n\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a)\n    \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n    x \\<in> carrier_vec n", "using next_dim.cone_elem_sum[OF _ y_cone z_cone] Y_dim Z_dim xn"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n  Y \\<union> Z \\<subseteq> carrier_vec (n + 1) \\<Longrightarrow>\n  y @\\<^sub>v vec_of_scal (1::'a) + (z @\\<^sub>v vec_of_scal (0::'a))\n  \\<in> next_dim.cone (Y \\<union> Z)\n  Y \\<subseteq> carrier_vec (n + 1)\n  Z \\<subseteq> carrier_vec (n + 1)\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a)\n    \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n    x \\<in> carrier_vec n", "by auto"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "}"], ["proof (state)\nthis:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "moreover"], ["proof (state)\nthis:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "{"], ["proof (state)\nthis:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "assume \"x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.cone (Y \\<union> Z)\""], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "then"], ["proof (chain)\npicking this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)", "obtain c where x: \"next_dim.lincomb c (Y \\<union> Z) = x @\\<^sub>v vec_of_scal 1\"\n      and c: \"c ` (Y \\<union> Z) \\<subseteq> {t. t \\<ge> 0}\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>next_dim.lincomb c (Y \\<union> Z) =\n                 x @\\<^sub>v vec_of_scal (1::'a);\n         c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using next_dim.cone_iff_finite_cone Y_dim Z_dim fin_Y fin_Z"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)\n  \\<lbrakk>?A \\<subseteq> carrier_vec (n + 1); finite ?A\\<rbrakk>\n  \\<Longrightarrow> next_dim.cone ?A = next_dim.finite_cone ?A\n  Y \\<subseteq> carrier_vec (n + 1)\n  Z \\<subseteq> carrier_vec (n + 1)\n  finite Y\n  finite Z\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>next_dim.lincomb c (Y \\<union> Z) =\n                 x @\\<^sub>v vec_of_scal (1::'a);\n         c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding next_dim.finite_cone_def next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.cone (Y \\<union> Z)\n  \\<lbrakk>?A \\<subseteq> carrier_vec (n + 1); finite ?A\\<rbrakk>\n  \\<Longrightarrow> next_dim.cone ?A =\n                    {b. \\<exists>c.\n                           next_dim.lincomb c\n                            (if finite ?A then ?A else {}) =\n                           b \\<and>\n                           c ` (if finite ?A then ?A else {})\n                           \\<subseteq> Collect ((\\<le>) (0::'a))}\n  Y \\<subseteq> carrier_vec (n + 1)\n  Z \\<subseteq> carrier_vec (n + 1)\n  finite Y\n  finite Z\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>next_dim.lincomb c (Y \\<union> Z) =\n                 x @\\<^sub>v vec_of_scal (1::'a);\n         c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c (Y \\<union> Z) = x @\\<^sub>v vec_of_scal (1::'a)\n  c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "let ?y = \"next_dim.lincomb c Y\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "let ?z = \"next_dim.lincomb c Z\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have xyz: \"x @\\<^sub>v vec_of_scal 1 = ?y + ?z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    next_dim.lincomb c Y + next_dim.lincomb c Z", "using x next_dim.lincomb_union[OF Y_dim Z_dim _ fin_Y fin_Z] Y_last Z_last"], ["proof (prove)\nusing this:\n  next_dim.lincomb c (Y \\<union> Z) = x @\\<^sub>v vec_of_scal (1::'a)\n  \\<lbrakk>Y \\<inter> Z = {};\n   ?a \\<in> Y \\<union> Z \\<rightarrow> UNIV\\<rbrakk>\n  \\<Longrightarrow> next_dim.lincomb ?a (Y \\<union> Z) =\n                    next_dim.lincomb ?a Y + next_dim.lincomb ?a Z\n  \\<forall>x\\<in>Y. x $ n = (1::'a)\n  \\<forall>x\\<in>Z. x $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) =\n    next_dim.lincomb c Y + next_dim.lincomb c Z", "by fastforce"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  next_dim.lincomb c Y + next_dim.lincomb c Z\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have y_dim: \"?y \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y \\<in> carrier_vec (n + 1)", "using next_dim.lincomb_closed[OF Y_dim]"], ["proof (prove)\nusing this:\n  next_dim.lincomb ?a Y \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y \\<in> carrier_vec (n + 1)", "by blast"], ["proof (state)\nthis:\n  next_dim.lincomb c Y \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have z_dim: \"?z \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z \\<in> carrier_vec (n + 1)", "using next_dim.lincomb_closed[OF Z_dim]"], ["proof (prove)\nusing this:\n  next_dim.lincomb ?a Z \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z \\<in> carrier_vec (n + 1)", "by blast"], ["proof (state)\nthis:\n  next_dim.lincomb c Z \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"x @\\<^sub>v vec_of_scal 1 \\<in> carrier_vec (n + 1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "using xyz add_carrier_vec[OF y_dim z_dim]"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  next_dim.lincomb c Y + next_dim.lincomb c Z\n  next_dim.lincomb c Y + next_dim.lincomb c Z \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. x @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)", "by argo"], ["proof (state)\nthis:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence x_dim: \"x \\<in> carrier_vec n\""], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "using carrier_dim_vec[of x n] carrier_dim_vec[of _ \"n + 1\"]"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) \\<in> carrier_vec (n + 1)\n  (x \\<in> carrier_vec n) = (dim_vec x = n)\n  (?v \\<in> carrier_vec (n + 1)) = (dim_vec ?v = n + 1)\n\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec n", "by force"], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have z_last: \"?z $ n = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z $ n = (0::'a)", "using Z_last next_dim.lincomb_index[OF _ Z_dim, of n]"], ["proof (prove)\nusing this:\n  \\<forall>x\\<in>Z. x $ n = (0::'a)\n  n < n + 1 \\<Longrightarrow>\n  next_dim.lincomb ?a Z $ n = (\\<Sum>x\\<in>Z. ?a x * x $ n)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z $ n = (0::'a)", "by force"], ["proof (state)\nthis:\n  next_dim.lincomb c Z $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"?y $ n + ?z $ n = (x @\\<^sub>v vec_of_scal 1) $ n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n =\n    (x @\\<^sub>v vec_of_scal (1::'a)) $ n", "using xyz index_add_vec(1) z_dim"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  next_dim.lincomb c Y + next_dim.lincomb c Z\n  ?i < dim_vec ?v\\<^sub>2 \\<Longrightarrow>\n  (?v\\<^sub>1 + ?v\\<^sub>2) $ ?i = ?v\\<^sub>1 $ ?i + ?v\\<^sub>2 $ ?i\n  next_dim.lincomb c Z \\<in> carrier_vec (n + 1)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n =\n    (x @\\<^sub>v vec_of_scal (1::'a)) $ n", "by simp"], ["proof (state)\nthis:\n  next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n =\n  (x @\\<^sub>v vec_of_scal (1::'a)) $ n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n =\n  (x @\\<^sub>v vec_of_scal (1::'a)) $ n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"\\<dots> = 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "using x_dim"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)", "by auto"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal (1::'a)) $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "finally"], ["proof (chain)\npicking this:\n  next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n = (1::'a)", "have y_last: \"?y $ n = 1\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y $ n = (1::'a)", "using z_last"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y $ n + next_dim.lincomb c Z $ n = (1::'a)\n  next_dim.lincomb c Z $ n = (0::'a)\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y $ n = (1::'a)", "by algebra"], ["proof (state)\nthis:\n  next_dim.lincomb c Y $ n = (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"?y \\<in> next_dim.cone Y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y \\<in> next_dim.cone Y", "using next_dim.cone_iff_finite_cone[OF Y_dim] fin_Y c"], ["proof (prove)\nusing this:\n  finite Y \\<Longrightarrow> next_dim.cone Y = next_dim.finite_cone Y\n  finite Y\n  c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y \\<in> next_dim.cone Y", "unfolding next_dim.finite_cone_def next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  finite Y \\<Longrightarrow>\n  next_dim.cone Y =\n  {b. \\<exists>c.\n         next_dim.lincomb c (if finite Y then Y else {}) = b \\<and>\n         c ` (if finite Y then Y else {})\n         \\<subseteq> Collect ((\\<le>) (0::'a))}\n  finite Y\n  c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Y \\<in> next_dim.cone Y", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c Y \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence y_cone: \"vec_first ?y n \\<in> convex_hull Q\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y \\<in> next_dim.cone Y\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y) n \\<in> m.convex_hull Q", "using convex_hull_next_dim[OF _ Y_dim fin_Y Y_last y_dim y_last] Y_car"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Y \\<in> next_dim.cone Y\n  n + 1 = n + 1 \\<Longrightarrow>\n  (vec_first (next_dim.lincomb c Y) n\n   \\<in> m.convex_hull {vec_first y n |y. y \\<in> Y}) =\n  (next_dim.lincomb c Y \\<in> next_dim.cone Y)\n  Q = {vec_first x n |x. x \\<in> Y}\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Y) n \\<in> m.convex_hull Q", "by blast"], ["proof (state)\nthis:\n  vec_first (next_dim.lincomb c Y) n \\<in> m.convex_hull Q\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"?z \\<in> next_dim.cone Z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z \\<in> next_dim.cone Z", "using next_dim.cone_iff_finite_cone[OF Z_dim] fin_Z c"], ["proof (prove)\nusing this:\n  finite Z \\<Longrightarrow> next_dim.cone Z = next_dim.finite_cone Z\n  finite Z\n  c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z \\<in> next_dim.cone Z", "unfolding next_dim.finite_cone_def next_dim.nonneg_lincomb_def"], ["proof (prove)\nusing this:\n  finite Z \\<Longrightarrow>\n  next_dim.cone Z =\n  {b. \\<exists>c.\n         next_dim.lincomb c (if finite Z then Z else {}) = b \\<and>\n         c ` (if finite Z then Z else {})\n         \\<subseteq> Collect ((\\<le>) (0::'a))}\n  finite Z\n  c ` (Y \\<union> Z) \\<subseteq> {t. (0::'a) \\<le> t}\n\ngoal (1 subgoal):\n 1. next_dim.lincomb c Z \\<in> next_dim.cone Z", "by auto"], ["proof (state)\nthis:\n  next_dim.lincomb c Z \\<in> next_dim.cone Z\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence z_cone: \"vec_first ?z n \\<in> cone X\""], ["proof (prove)\nusing this:\n  next_dim.lincomb c Z \\<in> next_dim.cone Z\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Z) n \\<in> m.cone X", "using cone_next_dim[OF _ Z_dim fin_Z Z_last z_dim z_last] Z_car"], ["proof (prove)\nusing this:\n  next_dim.lincomb c Z \\<in> next_dim.cone Z\n  n + 1 = n + 1 \\<Longrightarrow>\n  (vec_first (next_dim.lincomb c Z) n\n   \\<in> m.cone {vec_first y n |y. y \\<in> Z}) =\n  (next_dim.lincomb c Z \\<in> next_dim.cone Z)\n  X = {vec_first x n |x. x \\<in> Z}\n\ngoal (1 subgoal):\n 1. vec_first (next_dim.lincomb c Z) n \\<in> m.cone X", "by blast"], ["proof (state)\nthis:\n  vec_first (next_dim.lincomb c Z) n \\<in> m.cone X\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"x = vec_first (x @\\<^sub>v vec_of_scal 1) n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x = vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n", "using vec_first_append[OF x_dim]"], ["proof (prove)\nusing this:\n  vec_first (x @\\<^sub>v ?w) n = x\n\ngoal (1 subgoal):\n 1. x = vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n", "by simp"], ["proof (state)\nthis:\n  x = vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  x = vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"\\<dots> = vec_first ?y n + vec_first ?z n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n =\n    vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n", "using xyz vec_first_add[of n ?y ?z] y_dim z_dim carrier_dim_vec"], ["proof (prove)\nusing this:\n  x @\\<^sub>v vec_of_scal (1::'a) =\n  next_dim.lincomb c Y + next_dim.lincomb c Z\n  \\<lbrakk>n \\<le> dim_vec (next_dim.lincomb c Y);\n   n \\<le> dim_vec (next_dim.lincomb c Z)\\<rbrakk>\n  \\<Longrightarrow> vec_first (next_dim.lincomb c Y + next_dim.lincomb c Z)\n                     n =\n                    vec_first (next_dim.lincomb c Y) n +\n                    vec_first (next_dim.lincomb c Z) n\n  next_dim.lincomb c Y \\<in> carrier_vec (n + 1)\n  next_dim.lincomb c Z \\<in> carrier_vec (n + 1)\n  (?v \\<in> carrier_vec ?n) = (dim_vec ?v = ?n)\n\ngoal (1 subgoal):\n 1. vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n =\n    vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n", "by auto"], ["proof (state)\nthis:\n  vec_first (x @\\<^sub>v vec_of_scal (1::'a)) n =\n  vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "finally"], ["proof (chain)\npicking this:\n  x =\n  vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n", "have \"x \\<in> P\""], ["proof (prove)\nusing this:\n  x =\n  vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n\n\ngoal (1 subgoal):\n 1. x \\<in> P", "using y_cone z_cone P"], ["proof (prove)\nusing this:\n  x =\n  vec_first (next_dim.lincomb c Y) n + vec_first (next_dim.lincomb c Z) n\n  vec_first (next_dim.lincomb c Y) n \\<in> m.convex_hull Q\n  vec_first (next_dim.lincomb c Z) n \\<in> m.cone X\n  P = m.convex_hull Q + m.cone X\n\ngoal (1 subgoal):\n 1. x \\<in> P", "by blast"], ["proof (state)\nthis:\n  x \\<in> P\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "}"], ["proof (state)\nthis:\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "moreover"], ["proof (state)\nthis:\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "{"], ["proof (state)\nthis:\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "fix x :: \"'a vec\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "assume xn: \"x \\<in> carrier_vec n\""], ["proof (state)\nthis:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "hence \"(x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.polyhedral_cone B) =\n          (B *\\<^sub>v (x @\\<^sub>v vec_of_scal 1) \\<le> 0\\<^sub>v nr)\""], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n    (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)", "unfolding next_dim.polyhedral_cone_def"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a)\n     \\<in> {x \\<in> carrier_vec (n + 1).\n            B *\\<^sub>v x \\<le> 0\\<^sub>v (dim_row B)}) =\n    (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)", "using B_carrier"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n  B \\<in> carrier_mat nr (n + 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a)\n     \\<in> {x \\<in> carrier_vec (n + 1).\n            B *\\<^sub>v x \\<le> 0\\<^sub>v (dim_row B)}) =\n    (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)", "using append_carrier_vec[OF _ vec_of_scal_dim(2)[of 1]]"], ["proof (prove)\nusing this:\n  x \\<in> carrier_vec n\n  B \\<in> carrier_mat nr (n + 1)\n  ?v \\<in> carrier_vec ?n1.0 \\<Longrightarrow>\n  ?v @\\<^sub>v vec_of_scal (1::?'b5) \\<in> carrier_vec (?n1.0 + 1)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a)\n     \\<in> {x \\<in> carrier_vec (n + 1).\n            B *\\<^sub>v x \\<le> 0\\<^sub>v (dim_row B)}) =\n    (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)", "by auto"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"\\<dots> = ((A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal 1) \\<le> 0\\<^sub>v nr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr) =\n    ((A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a))\n     \\<le> 0\\<^sub>v nr)", "using B_blocks"], ["proof (prove)\nusing this:\n  B = A @\\<^sub>c mat_of_col b\n\ngoal (1 subgoal):\n 1. (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr) =\n    ((A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a))\n     \\<le> 0\\<^sub>v nr)", "by blast"], ["proof (state)\nthis:\n  (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr) =\n  ((A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a))\n   \\<le> 0\\<^sub>v nr)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  (B *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) \\<le> 0\\<^sub>v nr) =\n  ((A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a))\n   \\<le> 0\\<^sub>v nr)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"(A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal 1) =\n               A *\\<^sub>v x + mat_of_col b *\\<^sub>v vec_of_scal 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) =\n    A *\\<^sub>v x + mat_of_col b *\\<^sub>v vec_of_scal (1::'a)", "by (rule mat_mult_append_cols, insert A_carrier b_carrier xn, auto simp del: One_nat_def)"], ["proof (state)\nthis:\n  (A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) =\n  A *\\<^sub>v x + mat_of_col b *\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  (A @\\<^sub>c mat_of_col b) *\\<^sub>v (x @\\<^sub>v vec_of_scal (1::'a)) =\n  A *\\<^sub>v x + mat_of_col b *\\<^sub>v vec_of_scal (1::'a)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"mat_of_col b *\\<^sub>v vec_of_scal 1 = b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_col b *\\<^sub>v vec_of_scal (1::'a) = b", "using mult_mat_of_row_vec_of_scal[of b 1]"], ["proof (prove)\nusing this:\n  mat_of_col b *\\<^sub>v vec_of_scal (1::'a) = (1::'a) \\<cdot>\\<^sub>v b\n\ngoal (1 subgoal):\n 1. mat_of_col b *\\<^sub>v vec_of_scal (1::'a) = b", "by simp"], ["proof (state)\nthis:\n  mat_of_col b *\\<^sub>v vec_of_scal (1::'a) = b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "also"], ["proof (state)\nthis:\n  mat_of_col b *\\<^sub>v vec_of_scal (1::'a) = b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"A *\\<^sub>v x + b = A *\\<^sub>v x - -b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A *\\<^sub>v x + b = A *\\<^sub>v x - - b", "by auto"], ["proof (state)\nthis:\n  A *\\<^sub>v x + b = A *\\<^sub>v x - - b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "finally"], ["proof (chain)\npicking this:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v x - - b \\<le> 0\\<^sub>v nr)", "have \"(x @\\<^sub>v vec_of_scal 1 \\<in> next_dim.polyhedral_cone B) = (A *\\<^sub>v x \\<le> -b)\""], ["proof (prove)\nusing this:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v x - - b \\<le> 0\\<^sub>v nr)\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n    (A *\\<^sub>v x \\<le> - b)", "using vec_le_iff_diff_le_0[of \"A *\\<^sub>v x\" \"-b\"] A_carrier"], ["proof (prove)\nusing this:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v x - - b \\<le> 0\\<^sub>v nr)\n  (A *\\<^sub>v x \\<le> - b) =\n  (A *\\<^sub>v x - - b \\<le> 0\\<^sub>v (dim_vec (A *\\<^sub>v x)))\n  A \\<in> carrier_mat nr n\n\ngoal (1 subgoal):\n 1. (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n    (A *\\<^sub>v x \\<le> - b)", "by simp"], ["proof (state)\nthis:\n  (x @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v x \\<le> - b)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "}"], ["proof (state)\nthis:\n  ?x6 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x6 @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v ?x6 \\<le> - b)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "ultimately"], ["proof (chain)\npicking this:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n  ?x6 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x6 @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v ?x6 \\<le> - b)", "have \"P = polyhedron A (-b)\""], ["proof (prove)\nusing this:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n  ?x6 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x6 @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v ?x6 \\<le> - b)\n\ngoal (1 subgoal):\n 1. P = m.polyhedron A (- b)", "unfolding polyhedron_def"], ["proof (prove)\nusing this:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n  ?x6 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x6 @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v ?x6 \\<le> - b)\n\ngoal (1 subgoal):\n 1. P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> - b}", "using B"], ["proof (prove)\nusing this:\n  ?x6 \\<in> P \\<Longrightarrow>\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<and>\n  ?x6 \\<in> carrier_vec n\n  ?x6 @\\<^sub>v vec_of_scal (1::'a)\n  \\<in> next_dim.cone (Y \\<union> Z) \\<Longrightarrow>\n  ?x6 \\<in> P\n  ?x6 \\<in> carrier_vec n \\<Longrightarrow>\n  (?x6 @\\<^sub>v vec_of_scal (1::'a) \\<in> next_dim.polyhedral_cone B) =\n  (A *\\<^sub>v ?x6 \\<le> - b)\n  next_dim.cone (Y \\<union> Z) = next_dim.polyhedral_cone B\n\ngoal (1 subgoal):\n 1. P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> - b}", "by blast"], ["proof (state)\nthis:\n  P = m.polyhedron A (- b)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "moreover"], ["proof (state)\nthis:\n  P = m.polyhedron A (- b)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "have \"-b \\<in> carrier_vec nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. - b \\<in> carrier_vec nr", "using b_carrier"], ["proof (prove)\nusing this:\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. - b \\<in> carrier_vec nr", "by simp"], ["proof (state)\nthis:\n  - b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "ultimately"], ["proof (chain)\npicking this:\n  P = m.polyhedron A (- b)\n  - b \\<in> carrier_vec nr", "show ?thesis"], ["proof (prove)\nusing this:\n  P = m.polyhedron A (- b)\n  - b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "using A_carrier"], ["proof (prove)\nusing this:\n  P = m.polyhedron A (- b)\n  - b \\<in> carrier_vec nr\n  A \\<in> carrier_mat nr n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b", "by blast"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = m.polyhedron A b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decomposition_theorem_polyhedra:\n  \"(\\<exists> A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b) \\<longleftrightarrow>\n   (\\<exists> Q X. Q \\<union> X \\<subseteq> carrier_vec n \\<and> finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X)\" (is \"?l = ?r\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>A b nr.\n        A \\<in> carrier_mat nr n \\<and>\n        b \\<in> carrier_vec nr \\<and> P = polyhedron A b) =\n    (\\<exists>Q X.\n        Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n        finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<Longrightarrow>\n    \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n 2. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "assume ?l"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (2 subgoals):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<Longrightarrow>\n    \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n 2. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "then"], ["proof (chain)\npicking this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "obtain A b nr where A: \"A \\<in> carrier_mat nr n\"\n    and b: \"b \\<in> carrier_vec nr\" and P: \"P = polyhedron A b\""], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (1 subgoal):\n 1. (\\<And>A nr b.\n        \\<lbrakk>A \\<in> carrier_mat nr n; b \\<in> carrier_vec nr;\n         P = polyhedron A b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  P = polyhedron A b\n\ngoal (2 subgoals):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<Longrightarrow>\n    \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n 2. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "from decomposition_theorem_polyhedra_1[OF this]"], ["proof (chain)\npicking this:\n  \\<exists>Q X.\n     X \\<subseteq> carrier_vec n \\<and>\n     finite X \\<and>\n     Q \\<subseteq> carrier_vec n \\<and>\n     finite Q \\<and>\n     P = convex_hull Q + cone X \\<and>\n     (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat ?Bnd \\<longrightarrow>\n      b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec ?Bnd \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                    Bounded_vec (det_bound n (max (1::'a) ?Bnd)) \\<and>\n      Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) ?Bnd)))", "obtain Q X\n    where *: \"X \\<subseteq> carrier_vec n\" \"finite X\" \"Q \\<subseteq> carrier_vec n\" \"finite Q\" \"P = convex_hull Q + cone X\""], ["proof (prove)\nusing this:\n  \\<exists>Q X.\n     X \\<subseteq> carrier_vec n \\<and>\n     finite X \\<and>\n     Q \\<subseteq> carrier_vec n \\<and>\n     finite Q \\<and>\n     P = convex_hull Q + cone X \\<and>\n     (A \\<in> \\<int>\\<^sub>m \\<inter> Bounded_mat ?Bnd \\<longrightarrow>\n      b \\<in> \\<int>\\<^sub>v \\<inter> Bounded_vec ?Bnd \\<longrightarrow>\n      X \\<subseteq> \\<int>\\<^sub>v \\<inter>\n                    Bounded_vec (det_bound n (max (1::'a) ?Bnd)) \\<and>\n      Q \\<subseteq> Bounded_vec (det_bound n (max (1::'a) ?Bnd)))\n\ngoal (1 subgoal):\n 1. (\\<And>X Q.\n        \\<lbrakk>X \\<subseteq> carrier_vec n; finite X;\n         Q \\<subseteq> carrier_vec n; finite Q;\n         P = convex_hull Q + cone X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by meson"], ["proof (state)\nthis:\n  X \\<subseteq> carrier_vec n\n  finite X\n  Q \\<subseteq> carrier_vec n\n  finite Q\n  P = convex_hull Q + cone X\n\ngoal (2 subgoals):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<Longrightarrow>\n    \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n 2. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "show ?r"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X", "by (rule exI[of _ Q], rule exI[of _ X], insert *, auto simp: polytope_def)"], ["proof (state)\nthis:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "assume ?r"], ["proof (state)\nthis:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "then"], ["proof (chain)\npicking this:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X", "obtain Q X where QX_carrier: \"Q \\<union> X \\<subseteq> carrier_vec n\"\n    and QX_fin: \"finite (Q \\<union> X)\"\n    and P: \"P = convex_hull Q + cone X\""], ["proof (prove)\nusing this:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. (\\<And>Q X.\n        \\<lbrakk>Q \\<union> X \\<subseteq> carrier_vec n;\n         finite (Q \\<union> X); P = convex_hull Q + cone X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  Q \\<union> X \\<subseteq> carrier_vec n\n  finite (Q \\<union> X)\n  P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "from QX_carrier"], ["proof (chain)\npicking this:\n  Q \\<union> X \\<subseteq> carrier_vec n", "have Q: \"Q \\<subseteq> carrier_vec n\" and X: \"X \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. Q \\<subseteq> carrier_vec n &&& X \\<subseteq> carrier_vec n", "by simp_all"], ["proof (state)\nthis:\n  Q \\<subseteq> carrier_vec n\n  X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "from QX_fin"], ["proof (chain)\npicking this:\n  finite (Q \\<union> X)", "have fin_Q: \"finite Q\" and fin_X: \"finite X\""], ["proof (prove)\nusing this:\n  finite (Q \\<union> X)\n\ngoal (1 subgoal):\n 1. finite Q &&& finite X", "by simp_all"], ["proof (state)\nthis:\n  finite Q\n  finite X\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and>\n       P = convex_hull Q + cone X \\<Longrightarrow>\n    \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "show ?l"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "using decomposition_theorem_polyhedra_2[OF Q fin_Q X fin_X P]"], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "by blast"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma polytope_equiv_bounded_polyhedron:\n  \"polytope P \\<longleftrightarrow>\n  (\\<exists>A b nr bnd. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. polytope P =\n    (\\<exists>A b nr bnd.\n        A \\<in> carrier_mat nr n \\<and>\n        b \\<in> carrier_vec nr \\<and>\n        P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "assume polyP: \"polytope P\""], ["proof (state)\nthis:\n  polytope P\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from this"], ["proof (chain)\npicking this:\n  polytope P", "obtain Q where Qcarr: \"Q \\<subseteq> carrier_vec n\" and finQ: \"finite Q\"\n    and PconvhQ: \"P = convex_hull Q\""], ["proof (prove)\nusing this:\n  polytope P\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>Q \\<subseteq> carrier_vec n; finite Q;\n         P = convex_hull Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding polytope_def"], ["proof (prove)\nusing this:\n  \\<exists>V\\<subseteq>carrier_vec n. finite V \\<and> P = convex_hull V\n\ngoal (1 subgoal):\n 1. (\\<And>Q.\n        \\<lbrakk>Q \\<subseteq> carrier_vec n; finite Q;\n         P = convex_hull Q\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Q \\<subseteq> carrier_vec n\n  finite Q\n  P = convex_hull Q\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "let ?X = \"{}\""], ["proof (state)\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "have \"convex_hull Q + {0\\<^sub>v n} = convex_hull Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. convex_hull Q + {0\\<^sub>v n} = convex_hull Q", "using Qcarr add_0_right_vecset[of \"convex_hull Q\"]"], ["proof (prove)\nusing this:\n  Q \\<subseteq> carrier_vec n\n  convex_hull Q \\<subseteq> carrier_vec ?n \\<Longrightarrow>\n  convex_hull Q + {0\\<^sub>v ?n} = convex_hull Q\n\ngoal (1 subgoal):\n 1. convex_hull Q + {0\\<^sub>v n} = convex_hull Q", "by (simp add: convex_hull_carrier)"], ["proof (state)\nthis:\n  convex_hull Q + {0\\<^sub>v n} = convex_hull Q\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence \"P = convex_hull Q + cone ?X\""], ["proof (prove)\nusing this:\n  convex_hull Q + {0\\<^sub>v n} = convex_hull Q\n\ngoal (1 subgoal):\n 1. P = convex_hull Q + cone {}", "using PconvhQ"], ["proof (prove)\nusing this:\n  convex_hull Q + {0\\<^sub>v n} = convex_hull Q\n  P = convex_hull Q\n\ngoal (1 subgoal):\n 1. P = convex_hull Q + cone {}", "by simp"], ["proof (state)\nthis:\n  P = convex_hull Q + cone {}\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence \"Q \\<union> ?X \\<subseteq> carrier_vec n \\<and> finite (Q \\<union> ?X) \\<and> P = convex_hull Q + cone ?X\""], ["proof (prove)\nusing this:\n  P = convex_hull Q + cone {}\n\ngoal (1 subgoal):\n 1. Q \\<union> {} \\<subseteq> carrier_vec n \\<and>\n    finite (Q \\<union> {}) \\<and> P = convex_hull Q + cone {}", "using Qcarr finQ PconvhQ"], ["proof (prove)\nusing this:\n  P = convex_hull Q + cone {}\n  Q \\<subseteq> carrier_vec n\n  finite Q\n  P = convex_hull Q\n\ngoal (1 subgoal):\n 1. Q \\<union> {} \\<subseteq> carrier_vec n \\<and>\n    finite (Q \\<union> {}) \\<and> P = convex_hull Q + cone {}", "by simp"], ["proof (state)\nthis:\n  Q \\<union> {} \\<subseteq> carrier_vec n \\<and>\n  finite (Q \\<union> {}) \\<and> P = convex_hull Q + cone {}\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence \"\\<exists> A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\""], ["proof (prove)\nusing this:\n  Q \\<union> {} \\<subseteq> carrier_vec n \\<and>\n  finite (Q \\<union> {}) \\<and> P = convex_hull Q + cone {}\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "using decomposition_theorem_polyhedra"], ["proof (prove)\nusing this:\n  Q \\<union> {} \\<subseteq> carrier_vec n \\<and>\n  finite (Q \\<union> {}) \\<and> P = convex_hull Q + cone {}\n  (\\<exists>A b nr.\n      A \\<in> carrier_mat nr n \\<and>\n      b \\<in> carrier_vec nr \\<and> ?P = polyhedron A b) =\n  (\\<exists>Q X.\n      Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n      finite (Q \\<union> X) \\<and> ?P = convex_hull Q + cone X)\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "by blast"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence Ppolyh: \"\\<exists>A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\""], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "by blast"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from finite_Bounded_vec_Max[OF Qcarr finQ]"], ["proof (chain)\npicking this:\n  Q \\<subseteq> Bounded_vec\n                 (Max {\\<bar>a $ i\\<bar> |a i. a \\<in> Q \\<and> i < n})", "obtain bnd where \"Q \\<subseteq> Bounded_vec bnd\""], ["proof (prove)\nusing this:\n  Q \\<subseteq> Bounded_vec\n                 (Max {\\<bar>a $ i\\<bar> |a i. a \\<in> Q \\<and> i < n})\n\ngoal (1 subgoal):\n 1. (\\<And>bnd.\n        Q \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Q \\<subseteq> Bounded_vec bnd\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence Pbnd: \"P \\<subseteq> Bounded_vec bnd\""], ["proof (prove)\nusing this:\n  Q \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. P \\<subseteq> Bounded_vec bnd", "using convex_hull_bound PconvhQ Qcarr"], ["proof (prove)\nusing this:\n  Q \\<subseteq> Bounded_vec bnd\n  \\<lbrakk>?X \\<subseteq> Bounded_vec ?Bnd;\n   ?X \\<subseteq> carrier_vec n\\<rbrakk>\n  \\<Longrightarrow> convex_hull ?X \\<subseteq> Bounded_vec ?Bnd\n  P = convex_hull Q\n  Q \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. P \\<subseteq> Bounded_vec bnd", "by auto"], ["proof (state)\nthis:\n  P \\<subseteq> Bounded_vec bnd\n\ngoal (2 subgoals):\n 1. polytope P \\<Longrightarrow>\n    \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n 2. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from Ppolyh Pbnd"], ["proof (chain)\npicking this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n  P \\<subseteq> Bounded_vec bnd", "show \"\\<exists>A b nr bnd. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr\n    \\<and> P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\""], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n  P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd", "by auto"], ["proof (state)\nthis:\n  \\<exists>A b nr bnd.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and>\n     P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "assume \"\\<exists>A b nr bnd. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n    \\<and> P \\<subseteq> Bounded_vec bnd\""], ["proof (state)\nthis:\n  \\<exists>A b nr bnd.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and>\n     P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from this"], ["proof (chain)\npicking this:\n  \\<exists>A b nr bnd.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and>\n     P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd", "obtain A b nr bnd where Adim: \"A \\<in> carrier_mat nr n\" and bdim: \"b \\<in> carrier_vec nr\"\n    and Ppolyh: \"P = polyhedron A b\" and Pbnd: \"P \\<subseteq> Bounded_vec bnd\""], ["proof (prove)\nusing this:\n  \\<exists>A b nr bnd.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and>\n     P = polyhedron A b \\<and> P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. (\\<And>A nr b bnd.\n        \\<lbrakk>A \\<in> carrier_mat nr n; b \\<in> carrier_vec nr;\n         P = polyhedron A b; P \\<subseteq> Bounded_vec bnd\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  P = polyhedron A b\n  P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "have \"\\<exists> A b nr. A \\<in> carrier_mat nr n \\<and> b \\<in> carrier_vec nr \\<and> P = polyhedron A b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "using Adim bdim Ppolyh"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr n\n  b \\<in> carrier_vec nr\n  P = polyhedron A b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and> P = polyhedron A b", "by blast"], ["proof (state)\nthis:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "hence \"\\<exists> Q X. Q \\<union> X \\<subseteq> carrier_vec n \\<and> finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\""], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X", "using decomposition_theorem_polyhedra"], ["proof (prove)\nusing this:\n  \\<exists>A b nr.\n     A \\<in> carrier_mat nr n \\<and>\n     b \\<in> carrier_vec nr \\<and> P = polyhedron A b\n  (\\<exists>A b nr.\n      A \\<in> carrier_mat nr n \\<and>\n      b \\<in> carrier_vec nr \\<and> ?P = polyhedron A b) =\n  (\\<exists>Q X.\n      Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n      finite (Q \\<union> X) \\<and> ?P = convex_hull Q + cone X)\n\ngoal (1 subgoal):\n 1. \\<exists>Q X.\n       Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n       finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X", "by simp"], ["proof (state)\nthis:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from this"], ["proof (chain)\npicking this:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X", "obtain Q X where QXcarr: \"Q \\<union> X \\<subseteq> carrier_vec n\"\n    and finQX: \"finite (Q \\<union> X)\" and Psum: \"P = convex_hull Q + cone X\""], ["proof (prove)\nusing this:\n  \\<exists>Q X.\n     Q \\<union> X \\<subseteq> carrier_vec n \\<and>\n     finite (Q \\<union> X) \\<and> P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. (\\<And>Q X.\n        \\<lbrakk>Q \\<union> X \\<subseteq> carrier_vec n;\n         finite (Q \\<union> X); P = convex_hull Q + cone X\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  Q \\<union> X \\<subseteq> carrier_vec n\n  finite (Q \\<union> X)\n  P = convex_hull Q + cone X\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from QXcarr"], ["proof (chain)\npicking this:\n  Q \\<union> X \\<subseteq> carrier_vec n", "have Qcarr: \"convex_hull Q \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. convex_hull Q \\<subseteq> carrier_vec n", "by (simp add: convex_hull_carrier)"], ["proof (state)\nthis:\n  convex_hull Q \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from QXcarr"], ["proof (chain)\npicking this:\n  Q \\<union> X \\<subseteq> carrier_vec n", "have Xcarr: \"cone X \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. cone X \\<subseteq> carrier_vec n", "by (simp add: gram_schmidt.cone_carrier)"], ["proof (state)\nthis:\n  cone X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "from Pbnd"], ["proof (chain)\npicking this:\n  P \\<subseteq> Bounded_vec bnd", "have Pcarr: \"P \\<subseteq> carrier_vec n\""], ["proof (prove)\nusing this:\n  P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "using Ppolyh"], ["proof (prove)\nusing this:\n  P \\<subseteq> Bounded_vec bnd\n  P = polyhedron A b\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "unfolding polyhedron_def"], ["proof (prove)\nusing this:\n  P \\<subseteq> Bounded_vec bnd\n  P = {x \\<in> carrier_vec n. A *\\<^sub>v x \\<le> b}\n\ngoal (1 subgoal):\n 1. P \\<subseteq> carrier_vec n", "by simp"], ["proof (state)\nthis:\n  P \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "have \"P = convex_hull Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P = convex_hull Q", "proof(cases \"Q = {}\")"], ["proof (state)\ngoal (2 subgoals):\n 1. Q = {} \\<Longrightarrow> P = convex_hull Q\n 2. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "case True"], ["proof (state)\nthis:\n  Q = {}\n\ngoal (2 subgoals):\n 1. Q = {} \\<Longrightarrow> P = convex_hull Q\n 2. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "then"], ["proof (chain)\npicking this:\n  Q = {}", "show \"P = convex_hull Q\""], ["proof (prove)\nusing this:\n  Q = {}\n\ngoal (1 subgoal):\n 1. P = convex_hull Q", "unfolding Psum"], ["proof (prove)\nusing this:\n  Q = {}\n\ngoal (1 subgoal):\n 1. convex_hull Q + cone X = convex_hull Q", "by (auto simp: set_plus_def)"], ["proof (state)\nthis:\n  P = convex_hull Q\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "case False"], ["proof (state)\nthis:\n  Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "hence convnotempty: \"convex_hull Q \\<noteq> {}\""], ["proof (prove)\nusing this:\n  Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. convex_hull Q \\<noteq> {}", "using QXcarr"], ["proof (prove)\nusing this:\n  Q \\<noteq> {}\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. convex_hull Q \\<noteq> {}", "by simp"], ["proof (state)\nthis:\n  convex_hull Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "have Pbndex: \"\\<exists>bnd. P \\<subseteq> Bounded_vec bnd\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>bnd. P \\<subseteq> Bounded_vec bnd", "using Pbnd"], ["proof (prove)\nusing this:\n  P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. \\<exists>bnd. P \\<subseteq> Bounded_vec bnd", "using QXcarr"], ["proof (prove)\nusing this:\n  P \\<subseteq> Bounded_vec bnd\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>bnd. P \\<subseteq> Bounded_vec bnd", "by auto"], ["proof (state)\nthis:\n  \\<exists>bnd. P \\<subseteq> Bounded_vec bnd\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "from False"], ["proof (chain)\npicking this:\n  Q \\<noteq> {}", "have \"(\\<exists> bndc. cone X \\<subseteq> Bounded_vec bndc)\""], ["proof (prove)\nusing this:\n  Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>bndc. cone X \\<subseteq> Bounded_vec bndc", "using bounded_vecset_sum[OF Qcarr Xcarr Psum Pbndex] False convnotempty"], ["proof (prove)\nusing this:\n  Q \\<noteq> {}\n  convex_hull Q \\<noteq> {} \\<Longrightarrow>\n  \\<exists>bndB. cone X \\<subseteq> Bounded_vec bndB\n  cone X \\<noteq> {} \\<Longrightarrow>\n  \\<exists>bndA. convex_hull Q \\<subseteq> Bounded_vec bndA\n  Q \\<noteq> {}\n  convex_hull Q \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>bndc. cone X \\<subseteq> Bounded_vec bndc", "by blast"], ["proof (state)\nthis:\n  \\<exists>bndc. cone X \\<subseteq> Bounded_vec bndc\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "hence \"cone X = {0\\<^sub>v n}\""], ["proof (prove)\nusing this:\n  \\<exists>bndc. cone X \\<subseteq> Bounded_vec bndc\n\ngoal (1 subgoal):\n 1. cone X = {0\\<^sub>v n}", "using bounded_cone_is_zero QXcarr"], ["proof (prove)\nusing this:\n  \\<exists>bndc. cone X \\<subseteq> Bounded_vec bndc\n  \\<lbrakk>?C \\<subseteq> carrier_vec n;\n   cone ?C \\<subseteq> Bounded_vec ?bnd\\<rbrakk>\n  \\<Longrightarrow> cone ?C = {0\\<^sub>v n}\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. cone X = {0\\<^sub>v n}", "by auto"], ["proof (state)\nthis:\n  cone X = {0\\<^sub>v n}\n\ngoal (1 subgoal):\n 1. Q \\<noteq> {} \\<Longrightarrow> P = convex_hull Q", "thus ?thesis"], ["proof (prove)\nusing this:\n  cone X = {0\\<^sub>v n}\n\ngoal (1 subgoal):\n 1. P = convex_hull Q", "unfolding Psum"], ["proof (prove)\nusing this:\n  cone X = {0\\<^sub>v n}\n\ngoal (1 subgoal):\n 1. convex_hull Q + cone X = convex_hull Q", "using Qcarr"], ["proof (prove)\nusing this:\n  cone X = {0\\<^sub>v n}\n  convex_hull Q \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. convex_hull Q + cone X = convex_hull Q", "by (auto simp: add_0_right_vecset)"], ["proof (state)\nthis:\n  P = convex_hull Q\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P = convex_hull Q\n\ngoal (1 subgoal):\n 1. \\<exists>A b nr bnd.\n       A \\<in> carrier_mat nr n \\<and>\n       b \\<in> carrier_vec nr \\<and>\n       P = polyhedron A b \\<and>\n       P \\<subseteq> Bounded_vec bnd \\<Longrightarrow>\n    polytope P", "thus \"polytope P\""], ["proof (prove)\nusing this:\n  P = convex_hull Q\n\ngoal (1 subgoal):\n 1. polytope P", "using finQX QXcarr"], ["proof (prove)\nusing this:\n  P = convex_hull Q\n  finite (Q \\<union> X)\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. polytope P", "unfolding polytope_def"], ["proof (prove)\nusing this:\n  P = convex_hull Q\n  finite (Q \\<union> X)\n  Q \\<union> X \\<subseteq> carrier_vec n\n\ngoal (1 subgoal):\n 1. \\<exists>V\\<subseteq>carrier_vec n. finite V \\<and> P = convex_hull V", "by auto"], ["proof (state)\nthis:\n  polytope P\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "end"]]}