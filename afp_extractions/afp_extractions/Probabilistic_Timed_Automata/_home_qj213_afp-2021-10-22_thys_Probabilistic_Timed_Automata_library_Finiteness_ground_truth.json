{"file_name": "/home/qj213/afp-2021-10-22/thys/Probabilistic_Timed_Automata/library/Finiteness.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Probabilistic_Timed_Automata", "problem_names": ["lemma inj_finite_single:\n  assumes \"inj f\"\n  shows \"finite {y. x = f y}\"", "lemmas inj_finite_single[finite]", "lemma inj_finite_single':\n  assumes \"inj f\"\n  shows \"finite {z. f z = x}\"", "lemma select_finite:\n  assumes \"finite S\"\n  shows \"finite (select f S)\"", "lemmas inj_finite_single'[finite]", "lemma\n  assumes \"finite A\"\n  shows \"finite {x. x \\<in> A \\<and> P x}\"", "lemma collect_pair_finite[finite]:\n  assumes \"finite {x. P x}\" \"finite {x. Q x}\"\n  shows \"finite {(x, y) . P x \\<and> Q y \\<and> R x y}\"", "lemma collect_pair_finite'[finite]:\n  assumes \"finite {(x, y). P x y}\"\n  shows \"finite {(x, y) . P x y \\<and> R x y}\"", "lemma collect_pair_finite''[finite]:\n  assumes \"finite {(x, y). P x \\<and> Q y}\"\n  shows \"finite {(x, y) . P x \\<and> Q y \\<and> R x y}\"", "lemma finite_imageI':\n  assumes \"finite {(x, y). P x y}\"\n  shows \"finite {f x y | x y. P x y}\"", "lemma\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {(x, y) | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}\"", "lemma finite_imageI'':\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}\"", "lemma\n  assumes \"inj f\" \"finite S\"\n  shows \"finite {y. \\<exists> x \\<in> S. x = f y}\"", "lemma\n  assumes \"inj f\" \"finite S\"\n  shows \"finite {y. \\<exists> x \\<in> S. f y = x}\"", "lemma\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\" (is \"finite ?S\")", "lemma\n  notes finite_imageI''[finite]\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\" (is \"finite ?S\")", "lemma\n  assumes \"finite A\" \"finite B\"\n  shows \"finite {(x, y) | x y. x \\<in> A \\<and> y \\<in> B \\<and> R y \\<and> S x}\"", "lemma\n  fixes P Q R :: \"'a \\<Rightarrow> bool\"\n  assumes \"finite {x. P x \\<and> R x}\"\n  shows \"finite {x. P x \\<and> Q x \\<and> R x}\"", "lemma R:\n  assumes \"finite A\" \"A = B\"\n  shows \"finite B\"", "lemma pairwise_finiteI:\n  assumes \"finite {b. \\<exists>a. P a b}\" (is \"finite ?B\")\n  assumes \"finite {a. \\<exists>b. P a b}\"\n  shows \"finite {(a,b). P a b}\" (is \"finite ?C\")", "lemma pairwise_finiteI3:\n  assumes \"finite {b. \\<exists>a c. P a b c}\"\n  assumes \"finite {a. \\<exists>b c. P a b c}\"\n  assumes \"finite {c. \\<exists>a b. P a b c}\"\n  shows \"finite {(a,b,c). P a b c}\" (is \"finite ?C\")", "lemma pairwise_finiteI4:\n  assumes \"finite {b. \\<exists>a c d. P a b c d}\"\n  assumes \"finite {a. \\<exists>b c d. P a b c d}\"\n  assumes \"finite {c. \\<exists>a b d. P a b c d}\"\n  assumes \"finite {d. \\<exists>a b c. P a b c d}\"\n  shows \"finite {(a,b,c,d). P a b c d}\" (is \"finite ?C\")", "lemma finite_ex_and1:\n  assumes \"finite {b. \\<exists>a. P a b}\" (is \"finite ?A\")\n  shows \"finite {b. \\<exists>a. P a b \\<and> Q a b}\" (is \"finite ?B\")", "lemma finite_ex_and2:\n  assumes \"finite {b. \\<exists>a. Q a b}\" (is \"finite ?A\")\n  shows \"finite {b. \\<exists>a. P a b \\<and> Q a b}\" (is \"finite ?B\")", "lemma finite_set_of_finite_funs2:\n  fixes A :: \"'a set\" \n    and B :: \"'b set\"\n    and C :: \"'c set\"\n    and d :: \"'c\" \n  assumes \"finite A\"\n    and \"finite B\"\n    and \"finite C\"\n  shows \"finite {f. \\<forall>x. \\<forall>y. (x \\<in> A \\<and> y \\<in> B \\<longrightarrow> f x y \\<in> C) \\<and> (x \\<notin> A \\<longrightarrow> f x y = d) \\<and> (y \\<notin> B \\<longrightarrow> f x y = d)}\"\n        (is \"finite ?S\")"], "translations": [["", "lemma inj_finite_single:\n  assumes \"inj f\"\n  shows \"finite {y. x = f y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {y. x = f y}", "using assms Collect_mem_eq Collect_mono_iff infinite_iff_countable_subset inj_eq not_finite_existsD\n      rangeI"], ["proof (prove)\nusing this:\n  inj f\n  {x. x \\<in> ?A} = ?A\n  (Collect ?P \\<subseteq> Collect ?Q) =\n  (\\<forall>x. ?P x \\<longrightarrow> ?Q x)\n  infinite ?S = (\\<exists>f. inj f \\<and> range f \\<subseteq> ?S)\n  inj ?f \\<Longrightarrow> (?f ?x = ?f ?y) = (?x = ?y)\n  infinite {a. ?P a} \\<Longrightarrow> \\<exists>a. ?P a\n  ?f ?x \\<in> range ?f\n\ngoal (1 subgoal):\n 1. finite {y. x = f y}", "by fastforce"], ["", "lemmas inj_finite_single[finite]"], ["", "text \\<open>It's hard to guess the right set\\<close>"], ["", "lemma inj_finite_single':\n  assumes \"inj f\"\n  shows \"finite {z. f z = x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {z. f z = x}", "apply (rule finite_subset[of _ \"{z. x = f z}\"])"], ["proof (prove)\ngoal (2 subgoals):\n 1. {z. f z = x} \\<subseteq> {z. x = f z}\n 2. finite {z. x = f z}", "apply blast"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {z. x = f z}", "using assms"], ["proof (prove)\nusing this:\n  inj f\n\ngoal (1 subgoal):\n 1. finite {z. x = f z}", "by finite"], ["", "(* Due to Lars Hupel *)"], ["", "definition select :: \"('a \\<rightharpoonup> 'b) \\<Rightarrow> 'a set \\<Rightarrow> 'b set\" where\n  \"select f S = {z | z. \\<exists>x \\<in> S. f x = Some z}\""], ["", "lemma select_finite:\n  assumes \"finite S\"\n  shows \"finite (select f S)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (select f S)", "using assms"], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. finite (select f S)", "unfolding select_def"], ["proof (prove)\nusing this:\n  finite S\n\ngoal (1 subgoal):\n 1. finite {z |z. \\<exists>x\\<in>S. f x = Some z}", "by finite"], ["", "lemmas inj_finite_single'[finite]"], ["", "subsection \\<open>Working Examples\\<close>"], ["", "lemma\n  assumes \"finite A\"\n  shows \"finite {x. x \\<in> A \\<and> P x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {x \\<in> A. P x}", "using assms"], ["proof (prove)\nusing this:\n  finite A\n\ngoal (1 subgoal):\n 1. finite {x \\<in> A. P x}", "by finite_search"], ["", "lemma collect_pair_finite[finite]:\n  assumes \"finite {x. P x}\" \"finite {x. Q x}\"\n  shows \"finite {(x, y) . P x \\<and> Q y \\<and> R x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(x, y). P x \\<and> Q y \\<and> R x y}", "using assms"], ["proof (prove)\nusing this:\n  finite {x. P x}\n  finite {x. Q x}\n\ngoal (1 subgoal):\n 1. finite {(x, y). P x \\<and> Q y \\<and> R x y}", "by - finite"], ["", "lemma collect_pair_finite'[finite]:\n  assumes \"finite {(x, y). P x y}\"\n  shows \"finite {(x, y) . P x y \\<and> R x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(x, y). P x y \\<and> R x y}", "using assms"], ["proof (prove)\nusing this:\n  finite {(x, y). P x y}\n\ngoal (1 subgoal):\n 1. finite {(x, y). P x y \\<and> R x y}", "by - finite"], ["", "text \\<open>This is what we actually need in this theory\\<close>"], ["", "lemma collect_pair_finite''[finite]:\n  assumes \"finite {(x, y). P x \\<and> Q y}\"\n  shows \"finite {(x, y) . P x \\<and> Q y \\<and> R x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(x, y). P x \\<and> Q y \\<and> R x y}", "using assms"], ["proof (prove)\nusing this:\n  finite {(x, y). P x \\<and> Q y}\n\ngoal (1 subgoal):\n 1. finite {(x, y). P x \\<and> Q y \\<and> R x y}", "by - finite"], ["", "lemma finite_imageI':\n  assumes \"finite {(x, y). P x y}\"\n  shows \"finite {f x y | x y. P x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {f x y |x y. P x y}", "using assms"], ["proof (prove)\nusing this:\n  finite {(x, y). P x y}\n\ngoal (1 subgoal):\n 1. finite {f x y |x y. P x y}", "by finite"], ["", "lemma\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {(x, y) | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(x, y) |x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}", "using assms"], ["proof (prove)\nusing this:\n  finite (A \\<times> B)\n\ngoal (1 subgoal):\n 1. finite {(x, y) |x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}", "by - finite"], ["", "lemma finite_imageI'':\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {f x y |x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}", "using assms"], ["proof (prove)\nusing this:\n  finite (A \\<times> B)\n\ngoal (1 subgoal):\n 1. finite {f x y |x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y}", "by - finite"], ["", "text \\<open>\\<open>finite_Collect\\<close> can also rewrite to \\<open>vimage\\<close>\\<close>"], ["", "lemma\n  assumes \"inj f\" \"finite S\"\n  shows \"finite {y. \\<exists> x \\<in> S. x = f y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {y. \\<exists>x\\<in>S. x = f y}", "using assms"], ["proof (prove)\nusing this:\n  inj f\n  finite S\n\ngoal (1 subgoal):\n 1. finite {y. \\<exists>x\\<in>S. x = f y}", "by - finite"], ["", "lemma\n  assumes \"inj f\" \"finite S\"\n  shows \"finite {y. \\<exists> x \\<in> S. f y = x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {y. \\<exists>x\\<in>S. f y = x}", "using assms"], ["proof (prove)\nusing this:\n  inj f\n  finite S\n\ngoal (1 subgoal):\n 1. finite {y. \\<exists>x\\<in>S. f y = x}", "by - finite"], ["", "text \\<open>Another counter-example\\<close>"], ["", "lemma\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\" (is \"finite ?S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "have \"?S = (\\<lambda> (x, y). f x y) ` {(x, y). x \\<in> A \\<and> y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f x y |x y.\n     x \\<in> A \\<and>\n     y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y} =\n    (\\<lambda>(x, y). f x y) `\n    {(x, y).\n     x \\<in> A \\<and>\n     y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "by auto"], ["proof (state)\nthis:\n  {f x y |x y.\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y} =\n  (\\<lambda>(x, y). f x y) `\n  {(x, y).\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\n\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "also"], ["proof (state)\nthis:\n  {f x y |x y.\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y} =\n  (\\<lambda>(x, y). f x y) `\n  {(x, y).\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\n\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "have \"finite \\<dots>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     ((\\<lambda>(x, y). f x y) `\n      {(x, y).\n       x \\<in> A \\<and>\n       y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y})", "using assms"], ["proof (prove)\nusing this:\n  finite (A \\<times> B)\n\ngoal (1 subgoal):\n 1. finite\n     ((\\<lambda>(x, y). f x y) `\n      {(x, y).\n       x \\<in> A \\<and>\n       y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y})", "by - finite"], ["proof (state)\nthis:\n  finite\n   ((\\<lambda>(x, y). f x y) `\n    {(x, y).\n     x \\<in> A \\<and>\n     y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y})\n\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "ultimately"], ["proof (chain)\npicking this:\n  {f x y |x y.\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y} =\n  (\\<lambda>(x, y). f x y) `\n  {(x, y).\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\n  finite\n   ((\\<lambda>(x, y). f x y) `\n    {(x, y).\n     x \\<in> A \\<and>\n     y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y})", "show ?thesis"], ["proof (prove)\nusing this:\n  {f x y |x y.\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y} =\n  (\\<lambda>(x, y). f x y) `\n  {(x, y).\n   x \\<in> A \\<and>\n   y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\n  finite\n   ((\\<lambda>(x, y). f x y) `\n    {(x, y).\n     x \\<in> A \\<and>\n     y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y})\n\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "by simp"], ["proof (state)\nthis:\n  finite\n   {f x y |x y.\n    x \\<in> A \\<and>\n    y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>\n  Easier proof. The problem for our method is that the simproc fails to turn ?S into the form used\n  in the proof above.\n  Note that the declaration of the \\<open>finite\\<close> attribute below is the only one that is \\<^emph>\\<open>necessary\\<close> in\n  this theory.\n\\<close>"], ["", "lemma\n  notes finite_imageI''[finite]\n  assumes \"finite (A \\<times> B)\"\n  shows \"finite {f x y | x y. x \\<in> A \\<and> y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}\" (is \"finite ?S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "using assms"], ["proof (prove)\nusing this:\n  finite (A \\<times> B)\n\ngoal (1 subgoal):\n 1. finite\n     {f x y |x y.\n      x \\<in> A \\<and>\n      y \\<in> B \\<and> R x y \\<and> Q x y \\<and> T x \\<and> TT y}", "by finite"], ["", "lemma\n  assumes \"finite A\" \"finite B\"\n  shows \"finite {(x, y) | x y. x \\<in> A \\<and> y \\<in> B \\<and> R y \\<and> S x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(x, y) |x y. x \\<in> A \\<and> y \\<in> B \\<and> R y \\<and> S x}", "using assms"], ["proof (prove)\nusing this:\n  finite A\n  finite B\n\ngoal (1 subgoal):\n 1. finite {(x, y) |x y. x \\<in> A \\<and> y \\<in> B \\<and> R y \\<and> S x}", "by - finite"], ["", "lemma\n  fixes P Q R :: \"'a \\<Rightarrow> bool\"\n  assumes \"finite {x. P x \\<and> R x}\"\n  shows \"finite {x. P x \\<and> Q x \\<and> R x}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {x. P x \\<and> Q x \\<and> R x}", "using assms"], ["proof (prove)\nusing this:\n  finite {x. P x \\<and> R x}\n\ngoal (1 subgoal):\n 1. finite {x. P x \\<and> Q x \\<and> R x}", "by - finite"], ["", "lemma R:\n  assumes \"finite A\" \"A = B\"\n  shows \"finite B\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite B", "using assms"], ["proof (prove)\nusing this:\n  finite A\n  A = B\n\ngoal (1 subgoal):\n 1. finite B", "by finite"], ["", "lemma pairwise_finiteI:\n  assumes \"finite {b. \\<exists>a. P a b}\" (is \"finite ?B\")\n  assumes \"finite {a. \\<exists>b. P a b}\"\n  shows \"finite {(a,b). P a b}\" (is \"finite ?C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(a, b). P a b}", "using assms"], ["proof (prove)\nusing this:\n  finite {b. \\<exists>a. P a b}\n  finite {a. \\<exists>b. P a b}\n\ngoal (1 subgoal):\n 1. finite {(a, b). P a b}", "by - finite"], ["", "lemma pairwise_finiteI3:\n  assumes \"finite {b. \\<exists>a c. P a b c}\"\n  assumes \"finite {a. \\<exists>b c. P a b c}\"\n  assumes \"finite {c. \\<exists>a b. P a b c}\"\n  shows \"finite {(a,b,c). P a b c}\" (is \"finite ?C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(a, b, c). P a b c}", "using assms"], ["proof (prove)\nusing this:\n  finite {b. \\<exists>a c. P a b c}\n  finite {a. \\<exists>b c. P a b c}\n  finite {c. \\<exists>a b. P a b c}\n\ngoal (1 subgoal):\n 1. finite {(a, b, c). P a b c}", "by - finite"], ["", "lemma pairwise_finiteI4:\n  assumes \"finite {b. \\<exists>a c d. P a b c d}\"\n  assumes \"finite {a. \\<exists>b c d. P a b c d}\"\n  assumes \"finite {c. \\<exists>a b d. P a b c d}\"\n  assumes \"finite {d. \\<exists>a b c. P a b c d}\"\n  shows \"finite {(a,b,c,d). P a b c d}\" (is \"finite ?C\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {(a, b, c, d). P a b c d}", "using assms"], ["proof (prove)\nusing this:\n  finite {b. \\<exists>a c d. P a b c d}\n  finite {a. \\<exists>b c d. P a b c d}\n  finite {c. \\<exists>a b d. P a b c d}\n  finite {d. \\<exists>a b c. P a b c d}\n\ngoal (1 subgoal):\n 1. finite {(a, b, c, d). P a b c d}", "by - finite"], ["", "lemma finite_ex_and1:\n  assumes \"finite {b. \\<exists>a. P a b}\" (is \"finite ?A\")\n  shows \"finite {b. \\<exists>a. P a b \\<and> Q a b}\" (is \"finite ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {b. \\<exists>a. P a b \\<and> Q a b}", "using assms"], ["proof (prove)\nusing this:\n  finite {b. \\<exists>a. P a b}\n\ngoal (1 subgoal):\n 1. finite {b. \\<exists>a. P a b \\<and> Q a b}", "by - finite"], ["", "lemma finite_ex_and2:\n  assumes \"finite {b. \\<exists>a. Q a b}\" (is \"finite ?A\")\n  shows \"finite {b. \\<exists>a. P a b \\<and> Q a b}\" (is \"finite ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {b. \\<exists>a. P a b \\<and> Q a b}", "using assms"], ["proof (prove)\nusing this:\n  finite {b. \\<exists>a. Q a b}\n\ngoal (1 subgoal):\n 1. finite {b. \\<exists>a. P a b \\<and> Q a b}", "by - finite"], ["", "text \\<open>\n  This is the only lemma where our methods cannot help us so far due to the fairly\n  complex argument that is used in the interactive proof.\n\\<close>"], ["", "lemma finite_set_of_finite_funs2:\n  fixes A :: \"'a set\" \n    and B :: \"'b set\"\n    and C :: \"'c set\"\n    and d :: \"'c\" \n  assumes \"finite A\"\n    and \"finite B\"\n    and \"finite C\"\n  shows \"finite {f. \\<forall>x. \\<forall>y. (x \\<in> A \\<and> y \\<in> B \\<longrightarrow> f x y \\<in> C) \\<and> (x \\<notin> A \\<longrightarrow> f x y = d) \\<and> (y \\<notin> B \\<longrightarrow> f x y = d)}\"\n        (is \"finite ?S\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "let ?R = \"{g. \\<forall>x. (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and> (x \\<notin> B \\<longrightarrow> g x = d)}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "let ?Q = \"{f. \\<forall>x. (x \\<in> A \\<longrightarrow> f x \\<in> ?R) \\<and> (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\""], ["proof (state)\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "from finite_set_of_finite_funs[OF assms(2,3)]"], ["proof (chain)\npicking this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> B \\<longrightarrow> f x \\<in> C) \\<and>\n          (x \\<notin> B \\<longrightarrow> f x = ?d)}", "have \"finite ?R\""], ["proof (prove)\nusing this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> B \\<longrightarrow> f x \\<in> C) \\<and>\n          (x \\<notin> B \\<longrightarrow> f x = ?d)}\n\ngoal (1 subgoal):\n 1. finite\n     {g. \\<forall>x.\n            (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n            (x \\<notin> B \\<longrightarrow> g x = d)}", "."], ["proof (state)\nthis:\n  finite\n   {g. \\<forall>x.\n          (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n          (x \\<notin> B \\<longrightarrow> g x = d)}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "from finite_set_of_finite_funs[OF assms(1) this, of \"\\<lambda> y. d\"]"], ["proof (chain)\npicking this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}", "have \"finite ?Q\""], ["proof (prove)\nusing this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x.\n            (x \\<in> A \\<longrightarrow>\n             f x\n             \\<in> {g. \\<forall>x.\n                          (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                          (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}", "."], ["proof (state)\nthis:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "moreover"], ["proof (state)\nthis:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "have \"?S = ?Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {f. \\<forall>x y.\n           (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n            f x y \\<in> C) \\<and>\n           (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n           (y \\<notin> B \\<longrightarrow> f x y = d)} =\n    {f. \\<forall>x.\n           (x \\<in> A \\<longrightarrow>\n            f x\n            \\<in> {g. \\<forall>x.\n                         (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                         (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n           (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}", "by auto (case_tac \"xa \\<in> A\", auto)"], ["proof (state)\nthis:\n  {f. \\<forall>x y.\n         (x \\<in> A \\<and> y \\<in> B \\<longrightarrow> f x y \\<in> C) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n         (y \\<notin> B \\<longrightarrow> f x y = d)} =\n  {f. \\<forall>x.\n         (x \\<in> A \\<longrightarrow>\n          f x\n          \\<in> {g. \\<forall>x.\n                       (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                       (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "ultimately"], ["proof (chain)\npicking this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n  {f. \\<forall>x y.\n         (x \\<in> A \\<and> y \\<in> B \\<longrightarrow> f x y \\<in> C) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n         (y \\<notin> B \\<longrightarrow> f x y = d)} =\n  {f. \\<forall>x.\n         (x \\<in> A \\<longrightarrow>\n          f x\n          \\<in> {g. \\<forall>x.\n                       (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                       (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}", "show ?thesis"], ["proof (prove)\nusing this:\n  finite\n   {f. \\<forall>x.\n          (x \\<in> A \\<longrightarrow>\n           f x\n           \\<in> {g. \\<forall>x.\n                        (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                        (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n  {f. \\<forall>x y.\n         (x \\<in> A \\<and> y \\<in> B \\<longrightarrow> f x y \\<in> C) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n         (y \\<notin> B \\<longrightarrow> f x y = d)} =\n  {f. \\<forall>x.\n         (x \\<in> A \\<longrightarrow>\n          f x\n          \\<in> {g. \\<forall>x.\n                       (x \\<in> B \\<longrightarrow> g x \\<in> C) \\<and>\n                       (x \\<notin> B \\<longrightarrow> g x = d)}) \\<and>\n         (x \\<notin> A \\<longrightarrow> f x = (\\<lambda>y. d))}\n\ngoal (1 subgoal):\n 1. finite\n     {f. \\<forall>x y.\n            (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n             f x y \\<in> C) \\<and>\n            (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n            (y \\<notin> B \\<longrightarrow> f x y = d)}", "by simp"], ["proof (state)\nthis:\n  finite\n   {f. \\<forall>x y.\n          (x \\<in> A \\<and> y \\<in> B \\<longrightarrow>\n           f x y \\<in> C) \\<and>\n          (x \\<notin> A \\<longrightarrow> f x y = d) \\<and>\n          (y \\<notin> B \\<longrightarrow> f x y = d)}\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}