{"file_name": "/home/qj213/afp-2021-10-22/thys/HyperCTL/Shallow.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/HyperCTL", "problem_names": ["lemma wfp:\n\"wfp AP' \\<pi> \\<longleftrightarrow>\n (\\<forall> i. fst (\\<pi> !! i) \\<in> S \\<and> snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! (Suc i)) \\<in> \\<delta> (fst (\\<pi> !! i))\n )\"\n(is \"?L \\<longleftrightarrow> (\\<forall> i. ?R i)\")", "lemma wfp_sdrop[simp]:\n\"wfp AP' \\<pi> \\<Longrightarrow> wfp AP' (sdrop i \\<pi>)\"", "lemmas main_op_defs =\nfls_def atom_def neg_def dis_def next_def until_def exi_def", "lemmas der_op_defs =\ntr_def con_def imp_def eq_def ev_def alw_def wuntil_def fall_def", "lemmas op_defs = main_op_defs der_op_defs", "lemma fls_elim[elim!]:\nassumes \"fls \\<pi>l\" shows \\<phi>", "lemma tr_intro[intro!, simp]: \"tr \\<pi>l\"", "lemma dis_introL[intro]:\nassumes \"\\<phi> \\<pi>l\" shows \"dis \\<phi> \\<psi> \\<pi>l\"", "lemma dis_introR[intro]:\nassumes \"\\<psi> \\<pi>l\" shows \"dis \\<phi> \\<psi> \\<pi>l\"", "lemma dis_elim[elim]:\nassumes \"dis \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\"\nshows \\<chi>", "lemma con_intro[intro!]:\nassumes \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l\" shows \"con \\<phi> \\<psi> \\<pi>l\"", "lemma con_elim[elim]:\nassumes \"con \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>", "lemma neg_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> False\"  shows \"neg \\<phi> \\<pi>l\"", "lemma neg_elim[elim]:\nassumes \"neg \\<phi> \\<pi>l\" and \"\\<phi> \\<pi>l\"  shows \\<chi>", "lemma imp_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\"  shows \"imp \\<phi> \\<psi> \\<pi>l\"", "lemma imp_elim[elim]:\nassumes \"imp \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>", "lemma imp_mp[elim]:\nassumes \"imp \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" shows \"\\<psi> \\<pi>l\"", "lemma eq_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\" shows \"eq \\<phi> \\<psi> \\<pi>l\"", "lemma eq_elimL[elim]:\nassumes \"eq \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>", "lemma eq_elimR[elim]:\nassumes \"eq \\<phi> \\<psi> \\<pi>l\" and \"\\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>", "lemma eq_equals: \"eq \\<phi> \\<psi> \\<pi>l \\<longleftrightarrow> \\<phi> \\<pi>l = \\<psi> \\<pi>l\"", "lemma exi_intro[intro]:\nassumes \"wfp AP' \\<pi>\"\nand \"\\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l)\"\nand \"\\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\"\nand \"F \\<pi> \\<pi>l\"\nshows \"exi F \\<pi>l\"", "lemma exi_elim[elim]:\nassumes \"exi F \\<pi>l\"\nand\n\"\\<And> \\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0; F \\<pi> \\<pi>l\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \\<chi>", "lemma fall_intro[intro]:\nassumes\n\"\\<And> \\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l) ; \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n       \\<Longrightarrow>  F \\<pi> \\<pi>l\"\nshows \"fall F \\<pi>l\"", "lemma fall_elim[elim]:\nassumes \"fall F \\<pi>l\"\nand\n\"(\\<And>\\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n        \\<Longrightarrow> F \\<pi> \\<pi>l)\n  \\<Longrightarrow> \\<chi>\"\nshows \\<chi>", "lemma next_intro[intro]:\nassumes \"\\<phi> (map stl \\<pi>l)\"  shows \"next \\<phi> \\<pi>l\"", "lemma next_elim[elim]:\nassumes \"next \\<phi> \\<pi>l\" and \"\\<phi> (map stl \\<pi>l) \\<Longrightarrow> \\<chi>\"  shows \\<chi>", "lemma until_introR[intro]:\nassumes \"\\<psi> \\<pi>l\" shows \"until \\<phi> \\<psi> \\<pi>l\"", "lemma until_introL[intro]:\nassumes \\<phi>: \"\\<phi> \\<pi>l\" and u: \"until \\<phi> \\<psi> (map stl \\<pi>l)\"\nshows \"until \\<phi> \\<psi> \\<pi>l\"", "lemma until_induct[induct pred: until, consumes 1, case_names Base Step]:\nassumes u: \"until \\<phi> \\<psi> \\<pi>l\"\nand b: \"\\<And> \\<pi>l. \\<psi> \\<pi>l \\<Longrightarrow> \\<chi> \\<pi>l\"\nand i: \"\\<And> \\<pi>l. \\<lbrakk>\\<phi> \\<pi>l; until \\<phi> \\<psi> (map stl \\<pi>l); \\<chi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi> \\<pi>l\"\nshows \"\\<chi> \\<pi>l\"", "lemma until_unfold:\n\"until \\<phi> \\<psi> \\<pi>l = (\\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l))\" (is \"?L = ?R\")", "lemma ev_introR[intro]:\nassumes \"\\<phi> \\<pi>l\" shows \"ev \\<phi> \\<pi>l\"", "lemma ev_introL[intro]:\nassumes \"ev \\<phi> (map stl \\<pi>l)\"  shows \"ev \\<phi> \\<pi>l\"", "lemma ev_induct[induct pred: ev, consumes 1, case_names Base Step]:\nassumes \"ev \\<phi> \\<pi>l\" and \"\\<And> \\<pi>l. \\<phi> \\<pi>l \\<Longrightarrow> \\<chi> \\<pi>l\"\nand \"\\<And> \\<pi>l. \\<lbrakk>ev \\<phi> (map stl \\<pi>l); \\<chi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi> \\<pi>l\"\nshows \"\\<chi> \\<pi>l\"", "lemma ev_unfold:\n\"ev \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<or> ev \\<phi> (map stl \\<pi>l))\"", "lemma ev: \"ev \\<phi> \\<pi>l \\<longleftrightarrow> (\\<exists> i. \\<phi> (map (sdrop i) \\<pi>l))\"", "lemma alw_coinduct[coinduct pred: alw, consumes 1, case_names Hyp]:\nassumes \"\\<chi> \\<pi>l\"\nand \"\\<And> \\<pi>l. \\<chi> \\<pi>l \\<Longrightarrow> alw \\<phi> \\<pi>l \\<or> (\\<phi> \\<pi>l \\<and> \\<chi> (map stl \\<pi>l))\"\nshows \"alw \\<phi> \\<pi>l\"", "lemma alw_elim[elim]:\nassumes \"alw \\<phi> \\<pi>l\"\nand \"\\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \"\\<chi>\"", "lemma alw_destL: \"alw \\<phi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\"", "lemma alw_destR: \"alw \\<phi> \\<pi>l \\<Longrightarrow> alw \\<phi> (map stl \\<pi>l)\"", "lemma alw_unfold:\n\"alw \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<and> alw \\<phi> (map stl \\<pi>l))\"", "lemma alw: \"alw \\<phi> \\<pi>l \\<longleftrightarrow> (\\<forall> i. \\<phi> (map (sdrop i) \\<pi>l))\"", "lemma sdrop_imp_alw:\nassumes \"\\<And> i. (\\<And>j. j \\<le> i \\<Longrightarrow> \\<phi> [sdrop j \\<pi>, sdrop j \\<pi>']) \\<Longrightarrow> \\<psi> [sdrop i \\<pi>, sdrop i \\<pi>']\"\nshows \"imp (alw \\<phi>) (alw \\<psi>) [\\<pi>, \\<pi>']\"", "lemma wuntil_coinduct[coinduct pred: wuntil, consumes 1, case_names Hyp]:\nassumes \\<chi>: \"\\<chi> \\<pi>l\"\nand 0: \"\\<And> \\<pi>l. \\<chi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l \\<or> (\\<phi> \\<pi>l \\<and> \\<chi> (map stl \\<pi>l))\"\nshows \"wuntil \\<phi> \\<psi> \\<pi>l\"", "lemma wuntil_elim[elim]:\nassumes w: \"wuntil \\<phi> \\<psi> \\<pi>l\"\nand 1: \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\"\nand 2: \"\\<lbrakk>\\<phi> \\<pi>l; wuntil \\<phi> \\<psi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \\<chi>", "lemma wuntil_unfold:\n\"wuntil \\<phi> \\<psi> \\<pi>l = (\\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l \\<and> wuntil \\<phi> \\<psi> (map stl \\<pi>l))\"", "lemma mcon_intro[intro!]:\nassumes \"\\<And> \\<phi>. \\<phi> \\<in> \\<phi>s \\<Longrightarrow> \\<phi> \\<pi>l\" shows \"scon \\<phi>s \\<pi>l\"", "lemma scon_elim[elim]:\nassumes \"scon \\<phi>s \\<pi>l\" and \"(\\<And> \\<phi>. \\<phi> \\<in> \\<phi>s \\<Longrightarrow> \\<phi> \\<pi>l) \\<Longrightarrow> \\<chi>\"\nshows \\<chi>", "lemma fall2_intro[intro]:\nassumes\n\"\\<And> \\<pi> \\<pi>'. \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n           \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l);\n           \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n           stateOf \\<pi>' = stateOf \\<pi>\n          \\<rbrakk>\n       \\<Longrightarrow>  F \\<pi> \\<pi>' \\<pi>l\"\nshows \"fall2 F \\<pi>l\"", "lemma fall2_elim[elim]:\nassumes \"fall2 F \\<pi>l\"\nand\n\"(\\<And>\\<pi> \\<pi>'. \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n           \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n           stateOf \\<pi>' = stateOf \\<pi>\n          \\<rbrakk>\n          \\<Longrightarrow> F \\<pi> \\<pi>' \\<pi>l)\n  \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], "translations": [["", "lemma wfp:\n\"wfp AP' \\<pi> \\<longleftrightarrow>\n (\\<forall> i. fst (\\<pi> !! i) \\<in> S \\<and> snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! (Suc i)) \\<in> \\<delta> (fst (\\<pi> !! i))\n )\"\n(is \"?L \\<longleftrightarrow> (\\<forall> i. ?R i)\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. wfp AP' \\<pi> =\n    (\\<forall>i.\n        fst (\\<pi> !! i) \\<in> S \\<and>\n        snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n        snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n        fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i)))", "proof (intro iffI allI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       wfp AP' \\<pi> \\<Longrightarrow>\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n 2. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       wfp AP' \\<pi> \\<Longrightarrow>\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n 2. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "assume ?L"], ["proof (state)\nthis:\n  wfp AP' \\<pi>\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       wfp AP' \\<pi> \\<Longrightarrow>\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n 2. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "thus \"?R i\""], ["proof (prove)\nusing this:\n  wfp AP' \\<pi>\n\ngoal (1 subgoal):\n 1. fst (\\<pi> !! i) \\<in> S \\<and>\n    snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n    snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n    fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))", "apply(induction i arbitrary: \\<pi>)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>\\<pi>.\n       wfp AP' \\<pi> \\<Longrightarrow>\n       fst (\\<pi> !! 0) \\<in> S \\<and>\n       snd (\\<pi> !! 0) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! 0) \\<inter> AP = L (fst (\\<pi> !! 0)) \\<and>\n       fst (\\<pi> !! Suc 0) \\<in> \\<delta> (fst (\\<pi> !! 0))\n 2. \\<And>i \\<pi>.\n       \\<lbrakk>\\<And>\\<pi>.\n                   wfp AP' \\<pi> \\<Longrightarrow>\n                   fst (\\<pi> !! i) \\<in> S \\<and>\n                   snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n                   snd (\\<pi> !! i) \\<inter> AP =\n                   L (fst (\\<pi> !! i)) \\<and>\n                   fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i));\n        wfp AP' \\<pi>\\<rbrakk>\n       \\<Longrightarrow> fst (\\<pi> !! Suc i) \\<in> S \\<and>\n                         snd (\\<pi> !! Suc i) \\<subseteq> AP' \\<and>\n                         snd (\\<pi> !! Suc i) \\<inter> AP =\n                         L (fst (\\<pi> !! Suc i)) \\<and>\n                         fst (\\<pi> !! Suc (Suc i))\n                         \\<in> \\<delta> (fst (\\<pi> !! Suc i))", "by (metis snth.simps fst_conv snd_conv stream.sel wfp.cases)+"], ["proof (state)\nthis:\n  fst (\\<pi> !! i) \\<in> S \\<and>\n  snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n  snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n  fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "assume R: \"\\<forall> i. ?R i\""], ["proof (state)\nthis:\n  \\<forall>i.\n     fst (\\<pi> !! i) \\<in> S \\<and>\n     snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n     snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n     fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n\ngoal (1 subgoal):\n 1. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    wfp AP' \\<pi>", "thus ?L"], ["proof (prove)\nusing this:\n  \\<forall>i.\n     fst (\\<pi> !! i) \\<in> S \\<and>\n     snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n     snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n     fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))\n\ngoal (1 subgoal):\n 1. wfp AP' \\<pi>", "apply (coinduct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<forall>i.\n          fst (x !! i) \\<in> S \\<and>\n          snd (x !! i) \\<subseteq> AP' \\<and>\n          snd (x !! i) \\<inter> AP = L (fst (x !! i)) \\<and>\n          fst (x !! Suc i) \\<in> \\<delta> (fst (x !! i)) \\<Longrightarrow>\n       \\<exists>s A \\<pi>.\n          x = (s, A) ## \\<pi> \\<and>\n          s \\<in> S \\<and>\n          A \\<subseteq> AP' \\<and>\n          A \\<inter> AP = L s \\<and>\n          stateOf \\<pi> \\<in> \\<delta> s \\<and>\n          ((\\<forall>i.\n               fst (\\<pi> !! i) \\<in> S \\<and>\n               snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n               snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n               fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))) \\<or>\n           wfp AP' \\<pi>)", "using s0 fst_conv snd_conv snth.simps stream.sel"], ["proof (prove)\nusing this:\n  s0 \\<in> S\n  fst (?x1.0, ?x2.0) = ?x1.0\n  snd (?x1.0, ?x2.0) = ?x2.0\n  ?s !! 0 = shd ?s\n  ?s !! Suc ?n = stl ?s !! ?n\n  shd (?x1.0 ## ?x2.0) = ?x1.0\n  stl (?x1.0 ## ?x2.0) = ?x2.0\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<forall>i.\n          fst (x !! i) \\<in> S \\<and>\n          snd (x !! i) \\<subseteq> AP' \\<and>\n          snd (x !! i) \\<inter> AP = L (fst (x !! i)) \\<and>\n          fst (x !! Suc i) \\<in> \\<delta> (fst (x !! i)) \\<Longrightarrow>\n       \\<exists>s A \\<pi>.\n          x = (s, A) ## \\<pi> \\<and>\n          s \\<in> S \\<and>\n          A \\<subseteq> AP' \\<and>\n          A \\<inter> AP = L s \\<and>\n          stateOf \\<pi> \\<in> \\<delta> s \\<and>\n          ((\\<forall>i.\n               fst (\\<pi> !! i) \\<in> S \\<and>\n               snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n               snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n               fst (\\<pi> !! Suc i) \\<in> \\<delta> (fst (\\<pi> !! i))) \\<or>\n           wfp AP' \\<pi>)", "by (metis inf_commute stream.collapse surj_pair)"], ["proof (state)\nthis:\n  wfp AP' \\<pi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wfp_sdrop[simp]:\n\"wfp AP' \\<pi> \\<Longrightarrow> wfp AP' (sdrop i \\<pi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wfp AP' \\<pi> \\<Longrightarrow> wfp AP' (sdrop i \\<pi>)", "unfolding wfp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>i.\n       fst (\\<pi> !! i) \\<in> S \\<and>\n       snd (\\<pi> !! i) \\<subseteq> AP' \\<and>\n       snd (\\<pi> !! i) \\<inter> AP = L (fst (\\<pi> !! i)) \\<and>\n       fst (\\<pi> !! Suc i)\n       \\<in> \\<delta> (fst (\\<pi> !! i)) \\<Longrightarrow>\n    \\<forall>ia.\n       fst (sdrop i \\<pi> !! ia) \\<in> S \\<and>\n       snd (sdrop i \\<pi> !! ia) \\<subseteq> AP' \\<and>\n       snd (sdrop i \\<pi> !! ia) \\<inter> AP =\n       L (fst (sdrop i \\<pi> !! ia)) \\<and>\n       fst (sdrop i \\<pi> !! Suc ia)\n       \\<in> \\<delta> (fst (sdrop i \\<pi> !! ia))", "by simp (metis sdrop_add sdrop_simps(1))"], ["", "(*<*)"], ["", "end"], ["", "(* context Kripke *)\n(*>*)"], ["", "text\\<open>end-of-context Kripke\\<close>"], ["", "subsection\\<open>Shallow representations of formulas\\<close>"], ["", "text\\<open>A shallow (representation of a) HyperCTL* formula will be a predicate on lists of paths.  \nThe atomic formulas (operator $\\textit{atom}$) are parameterized by atomic propositions (as customary in temporal logic), \nand additionally by a number indicating the position, in the list of paths, of the path to which the atomic proposition \nrefers -- for example, $\\textit{atom}\\;a\\;i$ holds for the list of paths $\\pi l$ just in case proposition $a$ holds \nat the first state of $\\pi l!i$, the $i$'th path in $\\pi l$.  The temporal operators $\\textit{next}$ and $\\textit{until}$ act on all the paths of the argument \nlist $\\pi l$ synchronously.  Finally, the existential quantifier refers to the existence of a path whose origin state is that of \nthe last path in $\\pi l$.  \n\nAs an example: $\\textit{exi}\\; (\\textit{exi}\\; (\\textit{until}\\; (\\textit{atom}\\;a\\;0)\\;(\\textit{atom}\\;b\\;1)))$ holds for the empty list \niff there exist two paths $\\rho_0$ and $\\rho_1$ such that, synchronously,  \n$a$ holds on $\\rho_0$ until $b$ holds on $\\rho_1$.  Another example will be the formula encoding Goguen-Meseguer noninterference.   \n\\<close>"], ["", "text\\<open>Shallow HyperCTL* formulas:\\<close>"], ["", "type_synonym ('state,'aprop) sfmla = \"('state,'aprop) path list \\<Rightarrow> bool\""], ["", "locale Shallow = Kripke S \"s0\" \\<delta> AP L\n  for S :: \"'state set\" and s0 :: 'state and \\<delta> :: \"'state \\<Rightarrow> 'state set\"\n  and AP :: \"'aprop set\" and L :: \"'state \\<Rightarrow> 'aprop set\"\n+\n  fixes AP' assumes AP_AP': \"AP \\<subseteq> AP'\"\nbegin"], ["", "text\\<open>Primitive operators\\<close>"], ["", "(* I include false as a primitive since otherwise I would have to assume nonemptyness of\n  the atomic propositions *)"], ["", "definition fls :: \"('state,'aprop) sfmla\" where\n\"fls \\<pi>l \\<equiv> False\""], ["", "definition atom :: \"'aprop \\<Rightarrow> nat \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"atom a i \\<pi>l \\<equiv> a \\<in> apropsOf (\\<pi>l!i)\""], ["", "definition neg :: \"('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"neg \\<phi> \\<pi>l \\<equiv> \\<not> \\<phi> \\<pi>l\""], ["", "definition dis :: \"('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"dis \\<phi> \\<psi> \\<pi>l \\<equiv> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l\""], ["", "definition \"next\" :: \"('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"next \\<phi> \\<pi>l \\<equiv> \\<phi> (map stl \\<pi>l)\""], ["", "definition until :: \"('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"until \\<phi> \\<psi> \\<pi>l \\<equiv>\n \\<exists> i. \\<psi> (map (sdrop i) \\<pi>l) \\<and> (\\<forall> j \\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l))\""], ["", "definition exii :: \"('state,'aprop) sfmla \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"exii \\<phi> \\<pi>l \\<equiv>\n \\<exists> \\<pi>. wfp AP' \\<pi> \\<and> stateOf \\<pi> = (if \\<pi>l \\<noteq> [] then stateOf (last \\<pi>l) else s0)\n      \\<and> \\<phi> (\\<pi>l @ [\\<pi>])\""], ["", "definition exi :: \"(('state,'aprop) path \\<Rightarrow> ('state,'aprop) sfmla) \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"exi F \\<pi>l \\<equiv>\n \\<exists> \\<pi>. wfp AP' \\<pi> \\<and> stateOf \\<pi> = (if \\<pi>l \\<noteq> [] then stateOf (last \\<pi>l) else s0)\n      \\<and> F \\<pi> \\<pi>l\""], ["", "text\\<open>Derived operators\\<close>"], ["", "definition \"tr \\<equiv> neg fls\""], ["", "definition \"con \\<phi> \\<psi> \\<equiv> neg (dis (neg \\<phi>) (neg \\<psi>))\""], ["", "definition \"imp \\<phi> \\<psi> \\<equiv> dis (neg \\<phi>) \\<psi>\""], ["", "definition \"eq \\<phi> \\<psi> \\<equiv> con (imp \\<phi> \\<psi>) (imp \\<psi> \\<phi>) \""], ["", "definition \"fall F \\<equiv> neg (exi (\\<lambda> \\<pi>. neg (F \\<pi>)))\""], ["", "definition \"ev \\<phi> \\<equiv> until tr \\<phi>\""], ["", "definition \"alw \\<phi> \\<equiv> neg (ev (neg \\<phi>))\""], ["", "definition \"wuntil \\<phi> \\<psi> \\<equiv> dis (until \\<phi> \\<psi>) (alw \\<phi>)\""], ["", "lemmas main_op_defs =\nfls_def atom_def neg_def dis_def next_def until_def exi_def"], ["", "lemmas der_op_defs =\ntr_def con_def imp_def eq_def ev_def alw_def wuntil_def fall_def"], ["", "lemmas op_defs = main_op_defs der_op_defs"], ["", "subsection\\<open>Reasoning rules\\<close>"], ["", "text\\<open>We provide introduction, elimination, unfolding and (co)induction rules\nfor the connectives and quantifiers.\\<close>"], ["", "text\\<open>Boolean operators\\<close>"], ["", "lemma fls_elim[elim!]:\nassumes \"fls \\<pi>l\" shows \\<phi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi>", "using assms"], ["proof (prove)\nusing this:\n  fls \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<phi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<phi>", "by auto"], ["", "lemma tr_intro[intro!, simp]: \"tr \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tr \\<pi>l", "unfolding op_defs"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<not> False", "by auto"], ["", "lemma dis_introL[intro]:\nassumes \"\\<phi> \\<pi>l\" shows \"dis \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dis \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. dis \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l", "by auto"], ["", "lemma dis_introR[intro]:\nassumes \"\\<psi> \\<pi>l\" shows \"dis \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dis \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. dis \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l", "by auto"], ["", "lemma dis_elim[elim]:\nassumes \"dis \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  dis \\<phi> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma con_intro[intro!]:\nassumes \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l\" shows \"con \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. con \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. con \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> (\\<not> \\<phi> \\<pi>l \\<or> \\<not> \\<psi> \\<pi>l)", "by auto"], ["", "lemma con_elim[elim]:\nassumes \"con \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  con \\<phi> \\<psi> \\<pi>l\n  \\<lbrakk>\\<phi> \\<pi>l; \\<psi> \\<pi>l\\<rbrakk> \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<not> \\<phi> \\<pi>l \\<or> \\<not> \\<psi> \\<pi>l)\n  \\<lbrakk>\\<phi> \\<pi>l; \\<psi> \\<pi>l\\<rbrakk> \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma neg_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> False\"  shows \"neg \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. neg \\<phi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. neg \\<phi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> False\n\ngoal (1 subgoal):\n 1. \\<not> \\<phi> \\<pi>l", "by auto"], ["", "lemma neg_elim[elim]:\nassumes \"neg \\<phi> \\<pi>l\" and \"\\<phi> \\<pi>l\"  shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  neg \\<phi> \\<pi>l\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> \\<phi> \\<pi>l\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma imp_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\"  shows \"imp \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. imp \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. imp \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l", "by auto"], ["", "lemma imp_elim[elim]:\nassumes \"imp \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  imp \\<phi> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma imp_mp[elim]:\nassumes \"imp \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" shows \"\\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  imp \\<phi> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<psi> \\<pi>l", "by auto"], ["", "lemma eq_intro[intro!]:\nassumes \"\\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\" shows \"eq \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. eq \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> (\\<not> (\\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l) \\<or>\n            \\<not> (\\<not> \\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l))", "by auto"], ["", "lemma eq_elimL[elim]:\nassumes \"eq \\<phi> \\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l\" and \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  eq \\<phi> \\<psi> \\<pi>l\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<not> (\\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l) \\<or>\n          \\<not> (\\<not> \\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l))\n  \\<phi> \\<pi>l\n  \\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma eq_elimR[elim]:\nassumes \"eq \\<phi> \\<psi> \\<pi>l\" and \"\\<psi> \\<pi>l\" and \"\\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\" shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  eq \\<phi> \\<psi> \\<pi>l\n  \\<psi> \\<pi>l\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<not> (\\<not> (\\<not> \\<phi> \\<pi>l \\<or> \\<psi> \\<pi>l) \\<or>\n          \\<not> (\\<not> \\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l))\n  \\<psi> \\<pi>l\n  \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma eq_equals: \"eq \\<phi> \\<psi> \\<pi>l \\<longleftrightarrow> \\<phi> \\<pi>l = \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eq \\<phi> \\<psi> \\<pi>l = (\\<phi> \\<pi>l = \\<psi> \\<pi>l)", "by (metis eq_elimL eq_elimR eq_intro)"], ["", "text\\<open>Quantifiers\\<close>"], ["", "lemma exi_intro[intro]:\nassumes \"wfp AP' \\<pi>\"\nand \"\\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l)\"\nand \"\\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\"\nand \"F \\<pi> \\<pi>l\"\nshows \"exi F \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. exi F \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  wfp AP' \\<pi>\n  \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l)\n  \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\n  F \\<pi> \\<pi>l\n\ngoal (1 subgoal):\n 1. exi F \\<pi>l", "unfolding exi_def"], ["proof (prove)\nusing this:\n  wfp AP' \\<pi>\n  \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l)\n  \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\n  F \\<pi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<exists>\\<pi>.\n       wfp AP' \\<pi> \\<and>\n       stateOf \\<pi> =\n       (if \\<pi>l \\<noteq> [] then stateOf (last \\<pi>l) else s0) \\<and>\n       F \\<pi> \\<pi>l", "by auto"], ["", "lemma exi_elim[elim]:\nassumes \"exi F \\<pi>l\"\nand\n\"\\<And> \\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0; F \\<pi> \\<pi>l\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  exi F \\<pi>l\n  \\<lbrakk>wfp AP' ?\\<pi>;\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0;\n   F ?\\<pi> \\<pi>l\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding exi_def"], ["proof (prove)\nusing this:\n  \\<exists>\\<pi>.\n     wfp AP' \\<pi> \\<and>\n     stateOf \\<pi> =\n     (if \\<pi>l \\<noteq> [] then stateOf (last \\<pi>l) else s0) \\<and>\n     F \\<pi> \\<pi>l\n  \\<lbrakk>wfp AP' ?\\<pi>;\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0;\n   F ?\\<pi> \\<pi>l\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma fall_intro[intro]:\nassumes\n\"\\<And> \\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l) ; \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n       \\<Longrightarrow>  F \\<pi> \\<pi>l\"\nshows \"fall F \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fall F \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>wfp AP' ?\\<pi>;\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0\\<rbrakk>\n  \\<Longrightarrow> F ?\\<pi> \\<pi>l\n\ngoal (1 subgoal):\n 1. fall F \\<pi>l", "unfolding fall_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>wfp AP' ?\\<pi>;\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0\\<rbrakk>\n  \\<Longrightarrow> F ?\\<pi> \\<pi>l\n\ngoal (1 subgoal):\n 1. neg (exi (\\<lambda>\\<pi>. neg (F \\<pi>))) \\<pi>l", "by (metis exi_def neg_def)"], ["", "lemma fall_elim[elim]:\nassumes \"fall F \\<pi>l\"\nand\n\"(\\<And>\\<pi>. \\<lbrakk>wfp AP' \\<pi>; \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n        \\<Longrightarrow> F \\<pi> \\<pi>l)\n  \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  fall F \\<pi>l\n  (\\<And>\\<pi>.\n      \\<lbrakk>wfp AP' \\<pi>;\n       \\<pi>l \\<noteq> [] \\<Longrightarrow>\n       stateOf \\<pi> = stateOf (last \\<pi>l);\n       \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n      \\<Longrightarrow> F \\<pi> \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding fall_def"], ["proof (prove)\nusing this:\n  neg (exi (\\<lambda>\\<pi>. neg (F \\<pi>))) \\<pi>l\n  (\\<And>\\<pi>.\n      \\<lbrakk>wfp AP' \\<pi>;\n       \\<pi>l \\<noteq> [] \\<Longrightarrow>\n       stateOf \\<pi> = stateOf (last \\<pi>l);\n       \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0\\<rbrakk>\n      \\<Longrightarrow> F \\<pi> \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by (metis exi_def neg_elim neg_intro)"], ["", "text\\<open>Temporal connectives\\<close>"], ["", "lemma next_intro[intro]:\nassumes \"\\<phi> (map stl \\<pi>l)\"  shows \"next \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. next \\<phi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. next \\<phi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<phi> (map stl \\<pi>l)", "by auto"], ["", "lemma next_elim[elim]:\nassumes \"next \\<phi> \\<pi>l\" and \"\\<phi> (map stl \\<pi>l) \\<Longrightarrow> \\<chi>\"  shows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  next \\<phi> \\<pi>l\n  \\<phi> (map stl \\<pi>l) \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<phi> (map stl \\<pi>l)\n  \\<phi> (map stl \\<pi>l) \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "lemma until_introR[intro]:\nassumes \"\\<psi> \\<pi>l\" shows \"until \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       \\<psi> (map (sdrop i) \\<pi>l) \\<and>\n       (\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l))", "by (auto intro: exI[of _ 0])"], ["", "lemma until_introL[intro]:\nassumes \\<phi>: \"\\<phi> \\<pi>l\" and u: \"until \\<phi> \\<psi> (map stl \\<pi>l)\"\nshows \"until \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "obtain i where \\<psi>: \"\\<psi> (map (sdrop (Suc i)) \\<pi>l)\" and 1: \"\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop (Suc j)) \\<pi>l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop (Suc i)) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}.\n            \\<phi> (map (sdrop (Suc j)) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using u"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop (Suc i)) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}.\n            \\<phi> (map (sdrop (Suc j)) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<exists>i.\n     \\<psi> (map (sdrop i) (map stl \\<pi>l)) \\<and>\n     (\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) (map stl \\<pi>l)))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop (Suc i)) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}.\n            \\<phi> (map (sdrop (Suc j)) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<psi> (map (sdrop (Suc i)) \\<pi>l)\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop (Suc j)) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "{"], ["proof (state)\nthis:\n  \\<psi> (map (sdrop (Suc i)) \\<pi>l)\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop (Suc j)) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "assume \"j \\<in> {0..<Suc i}\""], ["proof (state)\nthis:\n  j \\<in> {0..<Suc i}\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "hence \"\\<phi> (map (sdrop j) \\<pi>l)\""], ["proof (prove)\nusing this:\n  j \\<in> {0..<Suc i}\n\ngoal (1 subgoal):\n 1. \\<phi> (map (sdrop j) \\<pi>l)", "using 1 \\<phi>"], ["proof (prove)\nusing this:\n  j \\<in> {0..<Suc i}\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop (Suc j)) \\<pi>l)\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<phi> (map (sdrop j) \\<pi>l)", "by (cases j) auto"], ["proof (state)\nthis:\n  \\<phi> (map (sdrop j) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "}"], ["proof (state)\nthis:\n  ?j2 \\<in> {0..<Suc i} \\<Longrightarrow> \\<phi> (map (sdrop ?j2) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?j2 \\<in> {0..<Suc i} \\<Longrightarrow> \\<phi> (map (sdrop ?j2) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "using \\<psi>"], ["proof (prove)\nusing this:\n  ?j2 \\<in> {0..<Suc i} \\<Longrightarrow> \\<phi> (map (sdrop ?j2) \\<pi>l)\n  \\<psi> (map (sdrop (Suc i)) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  ?j2 \\<in> {0..<Suc i} \\<Longrightarrow> \\<phi> (map (sdrop ?j2) \\<pi>l)\n  \\<psi> (map (sdrop (Suc i)) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<exists>i.\n       \\<psi> (map (sdrop i) \\<pi>l) \\<and>\n       (\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l))", "by auto"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>The elimination rules for until and eventually are induction rules.\\<close>"], ["", "lemma until_induct[induct pred: until, consumes 1, case_names Base Step]:\nassumes u: \"until \\<phi> \\<psi> \\<pi>l\"\nand b: \"\\<And> \\<pi>l. \\<psi> \\<pi>l \\<Longrightarrow> \\<chi> \\<pi>l\"\nand i: \"\\<And> \\<pi>l. \\<lbrakk>\\<phi> \\<pi>l; until \\<phi> \\<psi> (map stl \\<pi>l); \\<chi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi> \\<pi>l\"\nshows \"\\<chi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "obtain i where \\<psi>: \"\\<psi> (map (sdrop i) \\<pi>l)\" and 1:  \"\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop i) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using u"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop i) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding until_def next_def"], ["proof (prove)\nusing this:\n  \\<exists>i.\n     \\<psi> (map (sdrop i) \\<pi>l) \\<and>\n     (\\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l))\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>\\<psi> (map (sdrop i) \\<pi>l);\n         \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  \\<psi> (map (sdrop i) \\<pi>l)\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "{"], ["proof (state)\nthis:\n  \\<psi> (map (sdrop i) \\<pi>l)\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "fix k"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "assume k: \"k \\<le> i\""], ["proof (state)\nthis:\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "hence \"until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and> \\<chi> (map (sdrop k) \\<pi>l)\""], ["proof (prove)\nusing this:\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n    \\<chi> (map (sdrop k) \\<pi>l)", "proof (induction \"i-k\" arbitrary: k)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>k.\n       \\<lbrakk>0 = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)\n 2. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "case 0"], ["proof (state)\nthis:\n  0 = i - k\n  k \\<le> i\n\ngoal (2 subgoals):\n 1. \\<And>k.\n       \\<lbrakk>0 = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)\n 2. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "hence \"k=i\""], ["proof (prove)\nusing this:\n  0 = i - k\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. k = i", "by auto"], ["proof (state)\nthis:\n  k = i\n\ngoal (2 subgoals):\n 1. \\<And>k.\n       \\<lbrakk>0 = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)\n 2. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "with b[OF \\<psi>] u \\<psi>"], ["proof (chain)\npicking this:\n  \\<chi> (map (sdrop i) \\<pi>l)\n  until \\<phi> \\<psi> \\<pi>l\n  \\<psi> (map (sdrop i) \\<pi>l)\n  k = i", "show ?case"], ["proof (prove)\nusing this:\n  \\<chi> (map (sdrop i) \\<pi>l)\n  until \\<phi> \\<psi> \\<pi>l\n  \\<psi> (map (sdrop i) \\<pi>l)\n  k = i\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n    \\<chi> (map (sdrop k) \\<pi>l)", "by (auto intro: until_introR)"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop k) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "case (Suc ii)"], ["proof (state)\nthis:\n  \\<lbrakk>ii = i - ?k; ?k \\<le> i\\<rbrakk>\n  \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop ?k) \\<pi>l) \\<and>\n                    \\<chi> (map (sdrop ?k) \\<pi>l)\n  Suc ii = i - k\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "let ?\\<pi>l' = \"map (sdrop k) \\<pi>l\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "have \"until \\<phi> \\<psi>  (map stl ?\\<pi>l') \\<and> \\<chi> (map stl ?\\<pi>l')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n    \\<chi> (map stl (map (sdrop k) \\<pi>l))", "using Suc"], ["proof (prove)\nusing this:\n  \\<lbrakk>ii = i - ?k; ?k \\<le> i\\<rbrakk>\n  \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop ?k) \\<pi>l) \\<and>\n                    \\<chi> (map (sdrop ?k) \\<pi>l)\n  Suc ii = i - k\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n    \\<chi> (map stl (map (sdrop k) \\<pi>l))", "by auto"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n  \\<chi> (map stl (map (sdrop k) \\<pi>l))\n\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "moreover"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n  \\<chi> (map stl (map (sdrop k) \\<pi>l))\n\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "have \"\\<phi> ?\\<pi>l'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> (map (sdrop k) \\<pi>l)", "using 1 Suc"], ["proof (prove)\nusing this:\n  \\<forall>j\\<in>{0..<i}. \\<phi> (map (sdrop j) \\<pi>l)\n  \\<lbrakk>ii = i - ?k; ?k \\<le> i\\<rbrakk>\n  \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop ?k) \\<pi>l) \\<and>\n                    \\<chi> (map (sdrop ?k) \\<pi>l)\n  Suc ii = i - k\n  k \\<le> i\n\ngoal (1 subgoal):\n 1. \\<phi> (map (sdrop k) \\<pi>l)", "by auto"], ["proof (state)\nthis:\n  \\<phi> (map (sdrop k) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<And>x k.\n       \\<lbrakk>\\<And>k.\n                   \\<lbrakk>x = i - k; k \\<le> i\\<rbrakk>\n                   \\<Longrightarrow> until \\<phi> \\<psi>\n(map (sdrop k) \\<pi>l) \\<and>\n                                     \\<chi> (map (sdrop k) \\<pi>l);\n        Suc x = i - k; k \\<le> i\\<rbrakk>\n       \\<Longrightarrow> until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n                         \\<chi> (map (sdrop k) \\<pi>l)", "ultimately"], ["proof (chain)\npicking this:\n  until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n  \\<chi> (map stl (map (sdrop k) \\<pi>l))\n  \\<phi> (map (sdrop k) \\<pi>l)", "show ?case"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n  \\<chi> (map stl (map (sdrop k) \\<pi>l))\n  \\<phi> (map (sdrop k) \\<pi>l)\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n    \\<chi> (map (sdrop k) \\<pi>l)", "using i"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> (map stl (map (sdrop k) \\<pi>l)) \\<and>\n  \\<chi> (map stl (map (sdrop k) \\<pi>l))\n  \\<phi> (map (sdrop k) \\<pi>l)\n  \\<lbrakk>\\<phi> ?\\<pi>l; until \\<phi> \\<psi> (map stl ?\\<pi>l);\n   \\<chi> (map stl ?\\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi> ?\\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n    \\<chi> (map (sdrop k) \\<pi>l)", "by auto"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop k) \\<pi>l)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> (map (sdrop k) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop k) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "}"], ["proof (state)\nthis:\n  ?k2 \\<le> i \\<Longrightarrow>\n  until \\<phi> \\<psi> (map (sdrop ?k2) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop ?k2) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "from this[of 0]"], ["proof (chain)\npicking this:\n  0 \\<le> i \\<Longrightarrow>\n  until \\<phi> \\<psi> (map (sdrop 0) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop 0) \\<pi>l)", "show ?thesis"], ["proof (prove)\nusing this:\n  0 \\<le> i \\<Longrightarrow>\n  until \\<phi> \\<psi> (map (sdrop 0) \\<pi>l) \\<and>\n  \\<chi> (map (sdrop 0) \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "by simp"], ["proof (state)\nthis:\n  \\<chi> \\<pi>l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma until_unfold:\n\"until \\<phi> \\<psi> \\<pi>l = (\\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l))\" (is \"?L = ?R\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l =\n    (\\<psi> \\<pi>l \\<or>\n     \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. until \\<phi> \\<psi> \\<pi>l \\<Longrightarrow>\n    \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l)\n 2. \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and>\n    until \\<phi> \\<psi> (map stl \\<pi>l) \\<Longrightarrow>\n    until \\<phi> \\<psi> \\<pi>l", "assume ?L"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal (2 subgoals):\n 1. until \\<phi> \\<psi> \\<pi>l \\<Longrightarrow>\n    \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l)\n 2. \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and>\n    until \\<phi> \\<psi> (map stl \\<pi>l) \\<Longrightarrow>\n    until \\<phi> \\<psi> \\<pi>l", "thus ?R"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l)", "by induct auto"], ["proof (state)\nthis:\n  \\<psi> \\<pi>l \\<or>\n  \\<phi> \\<pi>l \\<and> until \\<phi> \\<psi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<psi> \\<pi>l \\<or>\n    \\<phi> \\<pi>l \\<and>\n    until \\<phi> \\<psi> (map stl \\<pi>l) \\<Longrightarrow>\n    until \\<phi> \\<psi> \\<pi>l", "qed auto"], ["", "lemma ev_introR[intro]:\nassumes \"\\<phi> \\<pi>l\" shows \"ev \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l", "unfolding ev_def"], ["proof (prove)\nusing this:\n  \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until tr \\<phi> \\<pi>l", "by (auto intro: until_introR)"], ["", "lemma ev_introL[intro]:\nassumes \"ev \\<phi> (map stl \\<pi>l)\"  shows \"ev \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  ev \\<phi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l", "unfolding ev_def"], ["proof (prove)\nusing this:\n  until tr \\<phi> (map stl \\<pi>l)\n\ngoal (1 subgoal):\n 1. until tr \\<phi> \\<pi>l", "by (auto intro: until_introL)"], ["", "lemma ev_induct[induct pred: ev, consumes 1, case_names Base Step]:\nassumes \"ev \\<phi> \\<pi>l\" and \"\\<And> \\<pi>l. \\<phi> \\<pi>l \\<Longrightarrow> \\<chi> \\<pi>l\"\nand \"\\<And> \\<pi>l. \\<lbrakk>ev \\<phi> (map stl \\<pi>l); \\<chi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi> \\<pi>l\"\nshows \"\\<chi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  ev \\<phi> \\<pi>l\n  \\<phi> ?\\<pi>l \\<Longrightarrow> \\<chi> ?\\<pi>l\n  \\<lbrakk>ev \\<phi> (map stl ?\\<pi>l); \\<chi> (map stl ?\\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi> ?\\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "unfolding ev_def"], ["proof (prove)\nusing this:\n  until tr \\<phi> \\<pi>l\n  \\<phi> ?\\<pi>l \\<Longrightarrow> \\<chi> ?\\<pi>l\n  \\<lbrakk>until tr \\<phi> (map stl ?\\<pi>l);\n   \\<chi> (map stl ?\\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi> ?\\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi> \\<pi>l", "by induct (auto simp: assms)"], ["", "lemma ev_unfold:\n\"ev \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<or> ev \\<phi> (map stl \\<pi>l))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<or> ev \\<phi> (map stl \\<pi>l))", "unfolding ev_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. until tr \\<phi> \\<pi>l =\n    (\\<phi> \\<pi>l \\<or> until tr \\<phi> (map stl \\<pi>l))", "by (metis tr_intro until_unfold)"], ["", "lemma ev: \"ev \\<phi> \\<pi>l \\<longleftrightarrow> (\\<exists> i. \\<phi> (map (sdrop i) \\<pi>l))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ev \\<phi> \\<pi>l = (\\<exists>i. \\<phi> (map (sdrop i) \\<pi>l))", "unfolding ev_def until_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>i.\n        \\<phi> (map (sdrop i) \\<pi>l) \\<and>\n        (\\<forall>j\\<in>{0..<i}. tr (map (sdrop j) \\<pi>l))) =\n    (\\<exists>i. \\<phi> (map (sdrop i) \\<pi>l))", "by auto"], ["", "text\\<open>The introduction rules for always and weak until are coinduction rules.\\<close>"], ["", "lemma alw_coinduct[coinduct pred: alw, consumes 1, case_names Hyp]:\nassumes \"\\<chi> \\<pi>l\"\nand \"\\<And> \\<pi>l. \\<chi> \\<pi>l \\<Longrightarrow> alw \\<phi> \\<pi>l \\<or> (\\<phi> \\<pi>l \\<and> \\<chi> (map stl \\<pi>l))\"\nshows \"alw \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "assume \"ev (neg \\<phi>) \\<pi>l\""], ["proof (state)\nthis:\n  ev (neg \\<phi>) \\<pi>l\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "hence \"\\<not> \\<chi> \\<pi>l\""], ["proof (prove)\nusing this:\n  ev (neg \\<phi>) \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> \\<chi> \\<pi>l", "apply induct"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>\\<pi>l. neg \\<phi> \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n 2. \\<And>\\<pi>l.\n       \\<lbrakk>ev (neg \\<phi>) (map stl \\<pi>l);\n        \\<not> \\<chi> (map stl \\<pi>l)\\<rbrakk>\n       \\<Longrightarrow> \\<not> \\<chi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<chi> \\<pi>l\n  \\<chi> ?\\<pi>l \\<Longrightarrow>\n  alw \\<phi> ?\\<pi>l \\<or> \\<phi> ?\\<pi>l \\<and> \\<chi> (map stl ?\\<pi>l)\n\ngoal (2 subgoals):\n 1. \\<And>\\<pi>l. neg \\<phi> \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n 2. \\<And>\\<pi>l.\n       \\<lbrakk>ev (neg \\<phi>) (map stl \\<pi>l);\n        \\<not> \\<chi> (map stl \\<pi>l)\\<rbrakk>\n       \\<Longrightarrow> \\<not> \\<chi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<chi> \\<pi>l\n  \\<chi> ?\\<pi>l \\<Longrightarrow>\n  (\\<nexists>i.\n      \\<not> \\<phi> (map (sdrop i) ?\\<pi>l) \\<and>\n      (\\<forall>j\\<in>{0..<i}. \\<not> False)) \\<or>\n  \\<phi> ?\\<pi>l \\<and> \\<chi> (map stl ?\\<pi>l)\n\ngoal (2 subgoals):\n 1. \\<And>\\<pi>l.\n       \\<not> \\<phi> \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n 2. \\<And>\\<pi>l.\n       \\<lbrakk>\\<exists>i.\n                   \\<not> \\<phi> (map (sdrop i) (map stl \\<pi>l)) \\<and>\n                   (\\<forall>j\\<in>{0..<i}. \\<not> False);\n        \\<not> \\<chi> (map stl \\<pi>l)\\<rbrakk>\n       \\<Longrightarrow> \\<not> \\<chi> \\<pi>l", "by auto (metis assms alw_def ev_def neg_def until_introR)"], ["proof (state)\nthis:\n  \\<not> \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "}"], ["proof (state)\nthis:\n  ev (neg \\<phi>) \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "thus ?thesis"], ["proof (prove)\nusing this:\n  ev (neg \\<phi>) \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  ev (neg \\<phi>) \\<pi>l \\<Longrightarrow> \\<not> \\<chi> \\<pi>l\n  \\<chi> \\<pi>l\n  \\<chi> ?\\<pi>l \\<Longrightarrow>\n  alw \\<phi> ?\\<pi>l \\<or> \\<phi> ?\\<pi>l \\<and> \\<chi> (map stl ?\\<pi>l)\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "unfolding op_defs"], ["proof (prove)\nusing this:\n  \\<exists>i.\n     \\<not> \\<phi> (map (sdrop i) \\<pi>l) \\<and>\n     (\\<forall>j\\<in>{0..<i}. \\<not> False) \\<Longrightarrow>\n  \\<not> \\<chi> \\<pi>l\n  \\<chi> \\<pi>l\n  \\<chi> ?\\<pi>l \\<Longrightarrow>\n  (\\<nexists>i.\n      \\<not> \\<phi> (map (sdrop i) ?\\<pi>l) \\<and>\n      (\\<forall>j\\<in>{0..<i}. \\<not> False)) \\<or>\n  \\<phi> ?\\<pi>l \\<and> \\<chi> (map stl ?\\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<nexists>i.\n       \\<not> \\<phi> (map (sdrop i) \\<pi>l) \\<and>\n       (\\<forall>j\\<in>{0..<i}. \\<not> False)", "by auto"], ["proof (state)\nthis:\n  alw \\<phi> \\<pi>l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma alw_elim[elim]:\nassumes \"alw \\<phi> \\<pi>l\"\nand \"\\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \"\\<chi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  alw \\<phi> \\<pi>l\n  \\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding alw_def"], ["proof (prove)\nusing this:\n  neg (ev (neg \\<phi>)) \\<pi>l\n  \\<lbrakk>\\<phi> \\<pi>l; neg (ev (neg \\<phi>)) (map stl \\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by(auto elim: ev_introR simp: neg_def)"], ["", "lemma alw_destL: \"alw \\<phi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l \\<Longrightarrow> \\<phi> \\<pi>l", "by auto"], ["", "lemma alw_destR: \"alw \\<phi> \\<pi>l \\<Longrightarrow> alw \\<phi> (map stl \\<pi>l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l \\<Longrightarrow> alw \\<phi> (map stl \\<pi>l)", "by auto"], ["", "lemma alw_unfold:\n\"alw \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<and> alw \\<phi> (map stl \\<pi>l))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l = (\\<phi> \\<pi>l \\<and> alw \\<phi> (map stl \\<pi>l))", "by (metis alw_def ev_unfold neg_elim neg_intro)"], ["", "lemma alw: \"alw \\<phi> \\<pi>l \\<longleftrightarrow> (\\<forall> i. \\<phi> (map (sdrop i) \\<pi>l))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l = (\\<forall>i. \\<phi> (map (sdrop i) \\<pi>l))", "unfolding alw_def ev neg_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>i. \\<not> \\<phi> (map (sdrop i) \\<pi>l)) =\n    (\\<forall>i. \\<phi> (map (sdrop i) \\<pi>l))", "by simp"], ["", "lemma sdrop_imp_alw:\nassumes \"\\<And> i. (\\<And>j. j \\<le> i \\<Longrightarrow> \\<phi> [sdrop j \\<pi>, sdrop j \\<pi>']) \\<Longrightarrow> \\<psi> [sdrop i \\<pi>, sdrop i \\<pi>']\"\nshows \"imp (alw \\<phi>) (alw \\<psi>) [\\<pi>, \\<pi>']\""], ["proof (prove)\ngoal (1 subgoal):\n 1. imp (alw \\<phi>) (alw \\<psi>) [\\<pi>, \\<pi>']", "using assms"], ["proof (prove)\nusing this:\n  (\\<And>j.\n      j \\<le> ?i \\<Longrightarrow>\n      \\<phi> [sdrop j \\<pi>, sdrop j \\<pi>']) \\<Longrightarrow>\n  \\<psi> [sdrop ?i \\<pi>, sdrop ?i \\<pi>']\n\ngoal (1 subgoal):\n 1. imp (alw \\<phi>) (alw \\<psi>) [\\<pi>, \\<pi>']", "by(auto simp: alw)"], ["", "lemma wuntil_coinduct[coinduct pred: wuntil, consumes 1, case_names Hyp]:\nassumes \\<chi>: \"\\<chi> \\<pi>l\"\nand 0: \"\\<And> \\<pi>l. \\<chi> \\<pi>l \\<Longrightarrow> \\<psi> \\<pi>l \\<or> (\\<phi> \\<pi>l \\<and> \\<chi> (map stl \\<pi>l))\"\nshows \"wuntil \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "proof-"], ["proof (state)\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "assume \"\\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l\""], ["proof (state)\nthis:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "hence \"alw \\<phi> \\<pi>l\""], ["proof (prove)\nusing this:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. alw \\<phi> \\<pi>l", "apply coinduct"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>\\<pi>l.\n       \\<not> until \\<phi> \\<psi> \\<pi>l \\<and>\n       \\<chi> \\<pi>l \\<Longrightarrow>\n       alw \\<phi> \\<pi>l \\<or>\n       \\<phi> \\<pi>l \\<and>\n       \\<not> until \\<phi> \\<psi> (map stl \\<pi>l) \\<and>\n       \\<chi> (map stl \\<pi>l)", "using 0"], ["proof (prove)\nusing this:\n  \\<chi> ?\\<pi>l \\<Longrightarrow>\n  \\<psi> ?\\<pi>l \\<or> \\<phi> ?\\<pi>l \\<and> \\<chi> (map stl ?\\<pi>l)\n\ngoal (1 subgoal):\n 1. \\<And>\\<pi>l.\n       \\<not> until \\<phi> \\<psi> \\<pi>l \\<and>\n       \\<chi> \\<pi>l \\<Longrightarrow>\n       alw \\<phi> \\<pi>l \\<or>\n       \\<phi> \\<pi>l \\<and>\n       \\<not> until \\<phi> \\<psi> (map stl \\<pi>l) \\<and>\n       \\<chi> (map stl \\<pi>l)", "by (auto intro: until_introL until_introR)"], ["proof (state)\nthis:\n  alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "}"], ["proof (state)\nthis:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l \\<Longrightarrow>\n  alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l \\<Longrightarrow>\n  alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "using \\<chi>"], ["proof (prove)\nusing this:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l \\<Longrightarrow>\n  alw \\<phi> \\<pi>l\n  \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l", "unfolding wuntil_def dis_def"], ["proof (prove)\nusing this:\n  \\<not> until \\<phi> \\<psi> \\<pi>l \\<and> \\<chi> \\<pi>l \\<Longrightarrow>\n  alw \\<phi> \\<pi>l\n  \\<chi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l \\<or> alw \\<phi> \\<pi>l", "by auto"], ["proof (state)\nthis:\n  wuntil \\<phi> \\<psi> \\<pi>l\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wuntil_elim[elim]:\nassumes w: \"wuntil \\<phi> \\<psi> \\<pi>l\"\nand 1: \"\\<psi> \\<pi>l \\<Longrightarrow> \\<chi>\"\nand 2: \"\\<lbrakk>\\<phi> \\<pi>l; wuntil \\<phi> \\<psi> (map stl \\<pi>l)\\<rbrakk> \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "proof(cases \"alw \\<phi> \\<pi>l\")"], ["proof (state)\ngoal (2 subgoals):\n 1. alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n 2. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "case True"], ["proof (state)\nthis:\n  alw \\<phi> \\<pi>l\n\ngoal (2 subgoals):\n 1. alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>\n 2. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi>", "apply standard"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk>\n    \\<Longrightarrow> \\<chi>", "using 2"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<phi> \\<pi>l; wuntil \\<phi> \\<psi> (map stl \\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk>\n    \\<Longrightarrow> \\<chi>", "unfolding wuntil_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<phi> \\<pi>l;\n   dis (until \\<phi> \\<psi>) (alw \\<phi>) (map stl \\<pi>l)\\<rbrakk>\n  \\<Longrightarrow> \\<chi>\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<phi> \\<pi>l; alw \\<phi> (map stl \\<pi>l)\\<rbrakk>\n    \\<Longrightarrow> \\<chi>", "by auto"], ["proof (state)\nthis:\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "case False"], ["proof (state)\nthis:\n  \\<not> alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "hence \"until \\<phi> \\<psi> \\<pi>l\""], ["proof (prove)\nusing this:\n  \\<not> alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "using w"], ["proof (prove)\nusing this:\n  \\<not> alw \\<phi> \\<pi>l\n  wuntil \\<phi> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "unfolding wuntil_def dis_def"], ["proof (prove)\nusing this:\n  \\<not> alw \\<phi> \\<pi>l\n  until \\<phi> \\<psi> \\<pi>l \\<or> alw \\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. until \\<phi> \\<psi> \\<pi>l", "by auto"], ["proof (state)\nthis:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<not> alw \\<phi> \\<pi>l \\<Longrightarrow> \\<chi>", "thus ?thesis"], ["proof (prove)\nusing this:\n  until \\<phi> \\<psi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<chi>", "by (metis assms dis_introL until_unfold wuntil_def)"], ["proof (state)\nthis:\n  \\<chi>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma wuntil_unfold:\n\"wuntil \\<phi> \\<psi> \\<pi>l = (\\<psi> \\<pi>l \\<or> \\<phi> \\<pi>l \\<and> wuntil \\<phi> \\<psi> (map stl \\<pi>l))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. wuntil \\<phi> \\<psi> \\<pi>l =\n    (\\<psi> \\<pi>l \\<or>\n     \\<phi> \\<pi>l \\<and> wuntil \\<phi> \\<psi> (map stl \\<pi>l))", "by (metis alw_unfold dis_def until_unfold wuntil_def)"], ["", "subsection\\<open>More derived operators\\<close>"], ["", "text\\<open>The conjunction of an arbitrary set of formulas:\\<close>"], ["", "definition scon ::\n\"('state,'aprop) sfmla set \\<Rightarrow> ('state,'aprop) sfmla\" where\n\"scon \\<phi>s \\<pi>l \\<equiv> \\<forall> \\<phi> \\<in> \\<phi>s. \\<phi> \\<pi>l\""], ["", "lemma mcon_intro[intro!]:\nassumes \"\\<And> \\<phi>. \\<phi> \\<in> \\<phi>s \\<Longrightarrow> \\<phi> \\<pi>l\" shows \"scon \\<phi>s \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. scon \\<phi>s \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  ?\\<phi> \\<in> \\<phi>s \\<Longrightarrow> ?\\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. scon \\<phi>s \\<pi>l", "unfolding scon_def"], ["proof (prove)\nusing this:\n  ?\\<phi> \\<in> \\<phi>s \\<Longrightarrow> ?\\<phi> \\<pi>l\n\ngoal (1 subgoal):\n 1. \\<forall>\\<phi>\\<in>\\<phi>s. \\<phi> \\<pi>l", "by auto"], ["", "lemma scon_elim[elim]:\nassumes \"scon \\<phi>s \\<pi>l\" and \"(\\<And> \\<phi>. \\<phi> \\<in> \\<phi>s \\<Longrightarrow> \\<phi> \\<pi>l) \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  scon \\<phi>s \\<pi>l\n  (\\<And>\\<phi>.\n      \\<phi> \\<in> \\<phi>s \\<Longrightarrow>\n      \\<phi> \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding scon_def"], ["proof (prove)\nusing this:\n  \\<forall>\\<phi>\\<in>\\<phi>s. \\<phi> \\<pi>l\n  (\\<And>\\<phi>.\n      \\<phi> \\<in> \\<phi>s \\<Longrightarrow>\n      \\<phi> \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by auto"], ["", "text\\<open>Double-binding forall:\\<close>"], ["", "definition \"fall2 F \\<equiv> fall (\\<lambda> \\<pi>. fall (F \\<pi>))\""], ["", "lemma fall2_intro[intro]:\nassumes\n\"\\<And> \\<pi> \\<pi>'. \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n           \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l);\n           \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n           stateOf \\<pi>' = stateOf \\<pi>\n          \\<rbrakk>\n       \\<Longrightarrow>  F \\<pi> \\<pi>' \\<pi>l\"\nshows \"fall2 F \\<pi>l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fall2 F \\<pi>l", "using assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>wfp AP' ?\\<pi>; wfp AP' ?\\<pi>';\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0;\n   stateOf ?\\<pi>' = stateOf ?\\<pi>\\<rbrakk>\n  \\<Longrightarrow> F ?\\<pi> ?\\<pi>' \\<pi>l\n\ngoal (1 subgoal):\n 1. fall2 F \\<pi>l", "unfolding fall2_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>wfp AP' ?\\<pi>; wfp AP' ?\\<pi>';\n   \\<pi>l \\<noteq> [] \\<Longrightarrow>\n   stateOf ?\\<pi> = stateOf (last \\<pi>l);\n   \\<pi>l = [] \\<Longrightarrow> stateOf ?\\<pi> = s0;\n   stateOf ?\\<pi>' = stateOf ?\\<pi>\\<rbrakk>\n  \\<Longrightarrow> F ?\\<pi> ?\\<pi>' \\<pi>l\n\ngoal (1 subgoal):\n 1. fall (\\<lambda>\\<pi>. fall (F \\<pi>)) \\<pi>l", "by (auto intro!: fall_intro)"], ["", "lemma fall2_elim[elim]:\nassumes \"fall2 F \\<pi>l\"\nand\n\"(\\<And>\\<pi> \\<pi>'. \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n           \\<pi>l \\<noteq> [] \\<Longrightarrow> stateOf \\<pi> = stateOf (last \\<pi>l); \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n           stateOf \\<pi>' = stateOf \\<pi>\n          \\<rbrakk>\n          \\<Longrightarrow> F \\<pi> \\<pi>' \\<pi>l)\n  \\<Longrightarrow> \\<chi>\"\nshows \\<chi>"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<chi>", "using assms"], ["proof (prove)\nusing this:\n  fall2 F \\<pi>l\n  (\\<And>\\<pi> \\<pi>'.\n      \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n       \\<pi>l \\<noteq> [] \\<Longrightarrow>\n       stateOf \\<pi> = stateOf (last \\<pi>l);\n       \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n       stateOf \\<pi>' = stateOf \\<pi>\\<rbrakk>\n      \\<Longrightarrow> F \\<pi> \\<pi>' \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "unfolding fall2_def"], ["proof (prove)\nusing this:\n  fall (\\<lambda>\\<pi>. fall (F \\<pi>)) \\<pi>l\n  (\\<And>\\<pi> \\<pi>'.\n      \\<lbrakk>wfp AP' \\<pi>; wfp AP' \\<pi>';\n       \\<pi>l \\<noteq> [] \\<Longrightarrow>\n       stateOf \\<pi> = stateOf (last \\<pi>l);\n       \\<pi>l = [] \\<Longrightarrow> stateOf \\<pi> = s0;\n       stateOf \\<pi>' = stateOf \\<pi>\\<rbrakk>\n      \\<Longrightarrow> F \\<pi> \\<pi>' \\<pi>l) \\<Longrightarrow>\n  \\<chi>\n\ngoal (1 subgoal):\n 1. \\<chi>", "by (auto elim!: fall_elim) (metis fall_elim)"], ["", "(*<*)"], ["", "end"], ["", "(* context Shallow *)\n(*>*)"], ["", "text\\<open>end-of-context Shallow\\<close>"], ["", "(*<*)"], ["", "end"], ["", "(*>*)"]]}