{"file_name": "/home/qj213/afp-2021-10-22/thys/SenSocialChoice/May.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/SenSocialChoice", "problem_names": ["lemma anonymousI[intro]:\n  \"(\\<And>P f x y. \\<lbrakk> profile A Is P; bij_betw f Is Is;\n                  x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) = (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y))\n  \\<Longrightarrow> anonymous scf A Is\"", "lemma anonymousD:\n  \"\\<lbrakk> anonymous scf A Is; profile A Is P; bij_betw f Is Is; x \\<in> A; y \\<in> A \\<rbrakk>\n  \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) = (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y)\"", "lemma neutralI[intro]:\n  \"(\\<And>P P' x y z w.\n    \\<lbrakk> profile A Is P; profile A Is P'; {x,y,z,w} \\<subseteq> A;\n      \\<And>i. i \\<in> Is \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<preceq> w;\n      \\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(P' i)\\<^esub>\\<preceq> z \\<rbrakk>\n     \\<Longrightarrow> ((x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)))\n  \\<Longrightarrow> neutral scf A Is\"", "lemma neutralD:\n  \"\\<lbrakk> neutral scf A Is;\n     profile A Is P; profile A Is P'; {x,y,z,w} \\<subseteq> A;\n     \\<And>i. i \\<in> Is \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<preceq> w;\n     \\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(P' i)\\<^esub>\\<preceq> z \\<rbrakk>\n  \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)\"", "lemma neutral_iia: \"neutral scf A Is \\<Longrightarrow> iia scf A Is\"", "lemma positively_responsiveI[intro]:\n  assumes I: \"\\<And>P P' x y.\n    \\<lbrakk> profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n      \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n      \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n      \\<exists>k \\<in> Is. (x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y);\n      x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<rbrakk>\n     \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y\"\n  shows \"positively_responsive scf A Is\"", "lemma positively_responsiveD:\n  \"\\<lbrakk> positively_responsive scf A Is;\n     profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n     \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n     \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n     \\<exists>k \\<in> Is. (x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y);\n     x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y\"", "lemma MMD_l2r:\n  fixes A :: \"'a set\"\n    and Is :: \"'i set\"\n  assumes finiteIs: \"finite Is\"\n  shows \"SCF (MMD Is) A Is universal_domain\"\n    and \"anonymous (MMD Is) A Is\"\n    and \"neutral (MMD Is) A Is\"\n    and \"positively_responsive (MMD Is) A Is\"", "lemma swapAlts_in_set_iff: \"{a, b} \\<subseteq> A \\<Longrightarrow> swapAlts a b u \\<in> A \\<longleftrightarrow> u \\<in> A\"", "lemma swapAltsP_ab: \"a \\<^bsub>(P i)\\<^esub>\\<preceq> b \\<longleftrightarrow> b \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> a\" \"b \\<^bsub>(P i)\\<^esub>\\<preceq> a \\<longleftrightarrow> a \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> b\"", "lemma profile_swapAltsP:\n  assumes profileP: \"profile A Is P\"\n      and abA: \"{a,b} \\<subseteq> A\"\n  shows \"profile A Is (swapAltsP P a b)\"", "lemma profile_bij_profile:\n  assumes profileP: \"profile A Is P\"\n      and bijf: \"bij_betw f Is Is\"\n  shows \"profile A Is (P \\<circ> f)\"", "lemma anonymous_card:\n  assumes profileP: \"profile A Is P\"\n      and profileP': \"profile A Is P'\"\n      and xyA: \"hasw [x,y] A\"\n      and xytally: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = card { i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y }\"\n      and yxtally: \"card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x } = card { i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<preceq> y\"", "lemma anonymous_neutral_indifference:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<approx> y\"", "lemma positively_responsive_prefer_witness:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } > card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  obtains P' k\n    where \"profile A Is P'\"\n      and \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n      and \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y\"\n      and \"k \\<in> Is \\<and> x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P k)\\<^esub>\\<prec> y\"\n      and \"card { i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\"", "lemma positively_responsive_prefer:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } > card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<prec> y\"", "lemma MMD_r2l:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\"", "lemma single_vote_to_RPR_iff:\n  \"\\<lbrakk> a \\<in> A; x \\<in> A; a \\<noteq> x \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(single_vote_to_RPR A b)\\<^esub>\\<prec> x) \\<longleftrightarrow> (b = a)\"", "lemma plurality_rule_equiv:\n  \"plurality_rule A Is F = MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)\""], "translations": [["", "lemma anonymousI[intro]:\n  \"(\\<And>P f x y. \\<lbrakk> profile A Is P; bij_betw f Is Is;\n                  x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) = (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y))\n  \\<Longrightarrow> anonymous scf A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P f x y.\n        \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n         y \\<in> A\\<rbrakk>\n        \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                          (x \\<^bsub>(scf\n (P \\<circ> f))\\<^esub>\\<preceq> y)) \\<Longrightarrow>\n    anonymous scf A Is", "unfolding anonymous_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P f x y.\n        \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n         y \\<in> A\\<rbrakk>\n        \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                          (x \\<^bsub>(scf\n (P \\<circ> f))\\<^esub>\\<preceq> y)) \\<Longrightarrow>\n    \\<forall>P f x y.\n       profile A Is P \\<and>\n       bij_betw f Is Is \\<and> x \\<in> A \\<and> y \\<in> A \\<longrightarrow>\n       (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n       (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y)", "by simp"], ["", "lemma anonymousD:\n  \"\\<lbrakk> anonymous scf A Is; profile A Is P; bij_betw f Is Is; x \\<in> A; y \\<in> A \\<rbrakk>\n  \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) = (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>anonymous scf A Is; profile A Is P; bij_betw f Is Is;\n     x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                      (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y)", "unfolding anonymous_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>P f x y.\n                profile A Is P \\<and>\n                bij_betw f Is Is \\<and>\n                x \\<in> A \\<and> y \\<in> A \\<longrightarrow>\n                (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y);\n     profile A Is P; bij_betw f Is Is; x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                      (x \\<^bsub>(scf (P \\<circ> f))\\<^esub>\\<preceq> y)", "by simp"], ["", "text \\<open>Similarly, an SCF is \\emph{neutral} if it is insensitive to the\nidentity of the alternatives. This is Sen's characterisation\n\\cite[p72]{Sen:70a}.\\<close>"], ["", "definition neutral :: \"('a, 'i) SCF \\<Rightarrow> 'a set \\<Rightarrow> 'i set \\<Rightarrow> bool\" where\n  \"neutral scf A Is \\<equiv>\n    (\\<forall>P P' x y z w. profile A Is P \\<and> profile A Is P' \\<and> x \\<in> A \\<and> y \\<in> A \\<and> z \\<in> A \\<and> w \\<in> A\n      \\<and> (\\<forall>i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<preceq> w) \\<and> (\\<forall>i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\n   \\<longrightarrow> ((x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)))\""], ["", "lemma neutralI[intro]:\n  \"(\\<And>P P' x y z w.\n    \\<lbrakk> profile A Is P; profile A Is P'; {x,y,z,w} \\<subseteq> A;\n      \\<And>i. i \\<in> Is \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<preceq> w;\n      \\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(P' i)\\<^esub>\\<preceq> z \\<rbrakk>\n     \\<Longrightarrow> ((x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)))\n  \\<Longrightarrow> neutral scf A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P P' x y z w.\n        \\<lbrakk>profile A Is P; profile A Is P';\n         {x, y, z, w} \\<subseteq> A;\n         \\<And>i.\n            i \\<in> Is \\<Longrightarrow>\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n         \\<And>i.\n            i \\<in> Is \\<Longrightarrow>\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n            (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n        \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                          (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n                          (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n                          (w \\<^bsub>(scf\n P')\\<^esub>\\<preceq> z)) \\<Longrightarrow>\n    neutral scf A Is", "unfolding neutral_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P P' x y z w.\n        \\<lbrakk>profile A Is P; profile A Is P';\n         {x, y, z, w} \\<subseteq> A;\n         \\<And>i.\n            i \\<in> Is \\<Longrightarrow>\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n         \\<And>i.\n            i \\<in> Is \\<Longrightarrow>\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n            (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n        \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                          (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n                          (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n                          (w \\<^bsub>(scf\n P')\\<^esub>\\<preceq> z)) \\<Longrightarrow>\n    \\<forall>P P' x y z w.\n       profile A Is P \\<and>\n       profile A Is P' \\<and>\n       x \\<in> A \\<and>\n       y \\<in> A \\<and>\n       z \\<in> A \\<and>\n       w \\<in> A \\<and>\n       (\\<forall>i\\<in>Is.\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w)) \\<and>\n       (\\<forall>i\\<in>Is.\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)) \\<longrightarrow>\n       (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n       (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n       (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n       (w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)", "by simp"], ["", "lemma neutralD:\n  \"\\<lbrakk> neutral scf A Is;\n     profile A Is P; profile A Is P'; {x,y,z,w} \\<subseteq> A;\n     \\<And>i. i \\<in> Is \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<preceq> w;\n     \\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(P' i)\\<^esub>\\<preceq> z \\<rbrakk>\n  \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>neutral scf A Is; profile A Is P; profile A Is P';\n     {x, y, z, w} \\<subseteq> A;\n     \\<And>i.\n        i \\<in> Is \\<Longrightarrow>\n        (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n        (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n     \\<And>i.\n        i \\<in> Is \\<Longrightarrow>\n        (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n        (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n    \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                      (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n                      (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n                      (w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)", "unfolding neutral_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>P P' x y z w.\n                profile A Is P \\<and>\n                profile A Is P' \\<and>\n                x \\<in> A \\<and>\n                y \\<in> A \\<and>\n                z \\<in> A \\<and>\n                w \\<in> A \\<and>\n                (\\<forall>i\\<in>Is.\n                    (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n                    (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w)) \\<and>\n                (\\<forall>i\\<in>Is.\n                    (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n                    (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)) \\<longrightarrow>\n                (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n                (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n                (w \\<^bsub>(scf P')\\<^esub>\\<preceq> z);\n     profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n     \\<And>i.\n        i \\<in> Is \\<Longrightarrow>\n        (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n        (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n     \\<And>i.\n        i \\<in> Is \\<Longrightarrow>\n        (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n        (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n    \\<Longrightarrow> (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n                      (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n                      (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n                      (w \\<^bsub>(scf P')\\<^esub>\\<preceq> z)", "by simp"], ["", "text \\<open>Neutrality implies independence of irrelevant alternatives.\\<close>"], ["", "lemma neutral_iia: \"neutral scf A Is \\<Longrightarrow> iia scf A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. neutral scf A Is \\<Longrightarrow> iia scf A Is", "unfolding neutral_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>P P' x y z w.\n       profile A Is P \\<and>\n       profile A Is P' \\<and>\n       x \\<in> A \\<and>\n       y \\<in> A \\<and>\n       z \\<in> A \\<and>\n       w \\<in> A \\<and>\n       (\\<forall>i\\<in>Is.\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w)) \\<and>\n       (\\<forall>i\\<in>Is.\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)) \\<longrightarrow>\n       (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n       (z \\<^bsub>(scf P')\\<^esub>\\<preceq> w) \\<and>\n       (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n       (w \\<^bsub>(scf P')\\<^esub>\\<preceq> z) \\<Longrightarrow>\n    iia scf A Is", "by (rule, auto)"], ["", "text \\<open>\\emph{Positive responsiveness} is a bit like non-manipulability: if\none individual improves their opinion of $x$, then the result should shift\nin favour of $x$.\\<close>"], ["", "definition positively_responsive :: \"('a, 'i) SCF \\<Rightarrow> 'a set \\<Rightarrow> 'i set \\<Rightarrow> bool\" where\n  \"positively_responsive scf A Is \\<equiv>\n    (\\<forall>P P' x y. profile A Is P \\<and> profile A Is P' \\<and> x \\<in> A \\<and> y \\<in> A\n      \\<and> (\\<forall>i \\<in> Is. (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and> (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y))\n      \\<and> (\\<exists>k \\<in> Is. (x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y))\n      \\<longrightarrow> x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y)\""], ["", "lemma positively_responsiveI[intro]:\n  assumes I: \"\\<And>P P' x y.\n    \\<lbrakk> profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n      \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n      \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n      \\<exists>k \\<in> Is. (x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y);\n      x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<rbrakk>\n     \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y\"\n  shows \"positively_responsive scf A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positively_responsive scf A Is", "unfolding positively_responsive_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>P P' x y.\n       profile A Is P \\<and>\n       profile A Is P' \\<and>\n       x \\<in> A \\<and>\n       y \\<in> A \\<and>\n       (\\<forall>i\\<in>Is.\n           (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n            x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n           (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n            x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n       (\\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n       x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n       x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "by (blast intro: I)"], ["", "lemma positively_responsiveD:\n  \"\\<lbrakk> positively_responsive scf A Is;\n     profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n     \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n     \\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n     \\<exists>k \\<in> Is. (x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y);\n     x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>positively_responsive scf A Is; profile A Is P;\n     profile A Is P'; x \\<in> A; y \\<in> A;\n     \\<And>i.\n        \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n        \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n     \\<And>i.\n        \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n        \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n     \\<exists>k\\<in>Is.\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n     x \\<^bsub>(scf P)\\<^esub>\\<preceq> y\\<rbrakk>\n    \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "unfolding positively_responsive_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<forall>P P' x y.\n                profile A Is P \\<and>\n                profile A Is P' \\<and>\n                x \\<in> A \\<and>\n                y \\<in> A \\<and>\n                (\\<forall>i\\<in>Is.\n                    (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n                     x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n                    (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n                     x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n                (\\<exists>k\\<in>Is.\n                    x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n                    x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n                    y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n                    x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n                x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n                x \\<^bsub>(scf P')\\<^esub>\\<prec> y;\n     profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n     \\<And>i.\n        \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n        \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n     \\<And>i.\n        \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n        \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n     \\<exists>k\\<in>Is.\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n     x \\<^bsub>(scf P)\\<^esub>\\<preceq> y\\<rbrakk>\n    \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "apply clarsimp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>\\<forall>P P' x y.\n                   profile A Is P \\<and>\n                   profile A Is P' \\<and>\n                   x \\<in> A \\<and>\n                   y \\<in> A \\<and>\n                   (\\<forall>i\\<in>Is.\n                       (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n                        x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n                       (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n                        x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n                   (\\<exists>k\\<in>Is.\n                       x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n                       x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n                       y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n                       x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n                   x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n                   x \\<^bsub>(scf P')\\<^esub>\\<prec> y;\n        profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y; k \\<in> Is;\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "apply (erule allE[where x=P])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y; k \\<in> Is;\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        \\<forall>P' x y.\n           profile A Is P \\<and>\n           profile A Is P' \\<and>\n           x \\<in> A \\<and>\n           y \\<in> A \\<and>\n           (\\<forall>i\\<in>Is.\n               (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n               (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n           (\\<exists>k\\<in>Is.\n               x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n               y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n           x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n           x \\<^bsub>(scf P')\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "apply (erule allE[where x=P'])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y; k \\<in> Is;\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        \\<forall>x y.\n           profile A Is P \\<and>\n           profile A Is P' \\<and>\n           x \\<in> A \\<and>\n           y \\<in> A \\<and>\n           (\\<forall>i\\<in>Is.\n               (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n               (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n           (\\<exists>k\\<in>Is.\n               x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n               y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n           x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n           x \\<^bsub>(scf P')\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "apply (erule allE[where x=x])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y; k \\<in> Is;\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        \\<forall>y.\n           profile A Is P \\<and>\n           profile A Is P' \\<and>\n           x \\<in> A \\<and>\n           y \\<in> A \\<and>\n           (\\<forall>i\\<in>Is.\n               (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n               (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n                x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n           (\\<exists>k\\<in>Is.\n               x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n               y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n               x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n           x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n           x \\<^bsub>(scf P')\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "apply (erule allE[where x=y])"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>k.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y; k \\<in> Is;\n        x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n        y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n        x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        profile A Is P \\<and>\n        profile A Is P' \\<and>\n        x \\<in> A \\<and>\n        y \\<in> A \\<and>\n        (\\<forall>i\\<in>Is.\n            (x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<longrightarrow>\n             x \\<^bsub>(P' i)\\<^esub>\\<prec> y) \\<and>\n            (x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<longrightarrow>\n             x \\<^bsub>(P' i)\\<^esub>\\<preceq> y)) \\<and>\n        (\\<exists>k\\<in>Is.\n            x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n            x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n            y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P' k)\\<^esub>\\<preceq> y) \\<longrightarrow>\n        x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longrightarrow>\n        x \\<^bsub>(scf P')\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<prec> y", "by auto"], ["", "subsection\\<open>The Method of Majority Decision satisfies May's conditions\\<close>"], ["", "text \\<open>The \\emph{method of majority decision} (MMD) says that if the number\nof individuals who strictly prefer $x$ to $y$ is larger than or equal to\nthose who strictly prefer the converse, then $x\\ R\\ y$. Note that this\ndefinition only makes sense for a finite population.\\<close>"], ["", "definition MMD :: \"'i set \\<Rightarrow> ('a, 'i) SCF\" where\n  \"MMD Is P \\<equiv> { (x, y) . card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } \\<ge> card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x } }\""], ["", "text \\<open>The first part of May's Theorem establishes that the conditions are\nconsistent, by showing that they are satisfied by MMD.\\<close>"], ["", "lemma MMD_l2r:\n  fixes A :: \"'a set\"\n    and Is :: \"'i set\"\n  assumes finiteIs: \"finite Is\"\n  shows \"SCF (MMD Is) A Is universal_domain\"\n    and \"anonymous (MMD Is) A Is\"\n    and \"neutral (MMD Is) A Is\"\n    and \"positively_responsive (MMD Is) A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (SCF (MMD Is) A Is universal_domain &&& anonymous (MMD Is) A Is) &&&\n    neutral (MMD Is) A Is &&& positively_responsive (MMD Is) A Is", "proof -"], ["proof (state)\ngoal (4 subgoals):\n 1. SCF (MMD Is) A Is universal_domain\n 2. anonymous (MMD Is) A Is\n 3. neutral (MMD Is) A Is\n 4. positively_responsive (MMD Is) A Is", "show \"SCF (MMD Is) A Is universal_domain\""], ["proof (prove)\ngoal (1 subgoal):\n 1. SCF (MMD Is) A Is universal_domain", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P. universal_domain A Is P \\<Longrightarrow> complete A (MMD Is P)", "fix P"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P. universal_domain A Is P \\<Longrightarrow> complete A (MMD Is P)", "show \"complete A (MMD Is P)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complete A (MMD Is P)", "by (rule completeI, unfold MMD_def, simp, arith)"], ["proof (state)\nthis:\n  complete A (MMD Is P)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  SCF (MMD Is) A Is universal_domain\n\ngoal (3 subgoals):\n 1. anonymous (MMD Is) A Is\n 2. neutral (MMD Is) A Is\n 3. positively_responsive (MMD Is) A Is", "show \"anonymous (MMD Is) A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. anonymous (MMD Is) A Is", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P f x y.\n       \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (x \\<^bsub>(MMD Is\n(P \\<circ> f))\\<^esub>\\<preceq> y)", "fix P"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P f x y.\n       \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (x \\<^bsub>(MMD Is\n(P \\<circ> f))\\<^esub>\\<preceq> y)", "fix x y :: \"'a\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P f x y.\n       \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (x \\<^bsub>(MMD Is\n(P \\<circ> f))\\<^esub>\\<preceq> y)", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P f x y.\n       \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (x \\<^bsub>(MMD Is\n(P \\<circ> f))\\<^esub>\\<preceq> y)", "assume bijf: \"bij_betw f Is Is\""], ["proof (state)\nthis:\n  bij_betw f Is Is\n\ngoal (1 subgoal):\n 1. \\<And>P f x y.\n       \\<lbrakk>profile A Is P; bij_betw f Is Is; x \\<in> A;\n        y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (x \\<^bsub>(MMD Is\n(P \\<circ> f))\\<^esub>\\<preceq> y)", "show \"(x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) = (x \\<^bsub>(MMD Is (P \\<circ> f))\\<^esub>\\<preceq> y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is (P \\<circ> f))\\<^esub>\\<preceq> y)", "using card_compose_bij[OF bijf, where P=\"\\<lambda>i. x \\<^bsub>(P i)\\<^esub>\\<prec> y\"]\n            card_compose_bij[OF bijf, where P=\"\\<lambda>i. y \\<^bsub>(P i)\\<^esub>\\<prec> x\"]"], ["proof (prove)\nusing this:\n  card {a \\<in> Is. x \\<^bsub>(P (f a))\\<^esub>\\<prec> y} =\n  card {a \\<in> Is. x \\<^bsub>(P a)\\<^esub>\\<prec> y}\n  card {a \\<in> Is. y \\<^bsub>(P (f a))\\<^esub>\\<prec> x} =\n  card {a \\<in> Is. y \\<^bsub>(P a)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is (P \\<circ> f))\\<^esub>\\<preceq> y)", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  card {a \\<in> Is. x \\<^bsub>(P (f a))\\<^esub>\\<prec> y} =\n  card {a \\<in> Is. x \\<^bsub>(P a)\\<^esub>\\<prec> y}\n  card {a \\<in> Is. y \\<^bsub>(P (f a))\\<^esub>\\<prec> x} =\n  card {a \\<in> Is. y \\<^bsub>(P a)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>{(x, y).\n                card\n                 {i \\<in> Is. y \\<^bsub>((P \\<circ> f) i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>((P \\<circ> f)\n                                    i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(MMD Is (P \\<circ> f))\\<^esub>\\<preceq> y)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  anonymous (MMD Is) A Is\n\ngoal (2 subgoals):\n 1. neutral (MMD Is) A Is\n 2. positively_responsive (MMD Is) A Is", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. neutral (MMD Is) A Is\n 2. positively_responsive (MMD Is) A Is", "show \"neutral (MMD Is) A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. neutral (MMD Is) A Is", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "fix P P'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "fix x y z w"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "assume xyzwA: \"{x,y,z,w} \\<subseteq> A\""], ["proof (state)\nthis:\n  {x, y, z, w} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "assume xyzw: \"\\<And>i. i \\<in> Is \\<Longrightarrow> (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) = (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w)\"\n       and yxwz: \"\\<And>i. i \\<in> Is \\<Longrightarrow> (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) = (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\""], ["proof (state)\nthis:\n  ?i \\<in> Is \\<Longrightarrow>\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> w)\n  ?i \\<in> Is \\<Longrightarrow>\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> x) =\n  (w \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z)\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "from xyzwA xyzw yxwz"], ["proof (chain)\npicking this:\n  {x, y, z, w} \\<subseteq> A\n  ?i \\<in> Is \\<Longrightarrow>\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> w)\n  ?i \\<in> Is \\<Longrightarrow>\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> x) =\n  (w \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z)", "have \"{ i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = { i \\<in> Is. z \\<^bsub>(P' i)\\<^esub>\\<prec> w }\"\n     and \"{ i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x } = { i \\<in> Is. w \\<^bsub>(P' i)\\<^esub>\\<prec> z }\""], ["proof (prove)\nusing this:\n  {x, y, z, w} \\<subseteq> A\n  ?i \\<in> Is \\<Longrightarrow>\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> w)\n  ?i \\<in> Is \\<Longrightarrow>\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> x) =\n  (w \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z)\n\ngoal (1 subgoal):\n 1. {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is. z \\<^bsub>(P' i)\\<^esub>\\<prec> w} &&&\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    {i \\<in> Is. w \\<^bsub>(P' i)\\<^esub>\\<prec> z}", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  {x, y, z, w} \\<subseteq> A\n  ?i \\<in> Is \\<Longrightarrow>\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> w)\n  ?i \\<in> Is \\<Longrightarrow>\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> x) =\n  (w \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z)\n\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} =\n    {i \\<in> Is.\n     z \\<^bsub>(P' i)\\<^esub>\\<preceq> w \\<and> (w, z) \\<notin> P' i} &&&\n    {i \\<in> Is.\n     y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} =\n    {i \\<in> Is.\n     w \\<^bsub>(P' i)\\<^esub>\\<preceq> z \\<and> (z, w) \\<notin> P' i}", "by auto"], ["proof (state)\nthis:\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. z \\<^bsub>(P' i)\\<^esub>\\<prec> w}\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  {i \\<in> Is. w \\<^bsub>(P' i)\\<^esub>\\<prec> z}\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y z w.\n       \\<lbrakk>profile A Is P; profile A Is P'; {x, y, z, w} \\<subseteq> A;\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (x \\<^bsub>(P i)\\<^esub>\\<preceq> y) =\n           (z \\<^bsub>(P' i)\\<^esub>\\<preceq> w);\n        \\<And>i.\n           i \\<in> Is \\<Longrightarrow>\n           (y \\<^bsub>(P i)\\<^esub>\\<preceq> x) =\n           (w \\<^bsub>(P' i)\\<^esub>\\<preceq> z)\\<rbrakk>\n       \\<Longrightarrow> (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n                         (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n                         (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "thus \"(x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) = (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n          (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) = (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)\""], ["proof (prove)\nusing this:\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. z \\<^bsub>(P' i)\\<^esub>\\<prec> w}\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  {i \\<in> Is. w \\<^bsub>(P' i)\\<^esub>\\<prec> z}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n    (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n    (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n    (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. z \\<^bsub>(P' i)\\<^esub>\\<prec> w}\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  {i \\<in> Is. w \\<^bsub>(P' i)\\<^esub>\\<prec> z}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y) =\n    (z \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P' i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> w) \\<and>\n    (y \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> x) =\n    (w \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P' i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> z)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> w) \\<and>\n  (y \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> x) =\n  (w \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> z)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  neutral (MMD Is) A Is\n\ngoal (1 subgoal):\n 1. positively_responsive (MMD Is) A Is", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. positively_responsive (MMD Is) A Is", "show \"positively_responsive (MMD Is) A Is\""], ["proof (prove)\ngoal (1 subgoal):\n 1. positively_responsive (MMD Is) A Is", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "fix P P'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "assume profileP: \"profile A Is P\""], ["proof (state)\nthis:\n  profile A Is P\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "assume xyA: \"x \\<in> A\" \"y \\<in> A\""], ["proof (state)\nthis:\n  x \\<in> A\n  y \\<in> A\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "assume xPy: \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y\"\n       and xIy: \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y\"\n       and k: \"\\<exists>k\\<in>Is. x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or> y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\"\n       and xRSCFy: \"x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\""], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y\n  \\<exists>k\\<in>Is.\n     x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n     y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "from k"], ["proof (chain)\npicking this:\n  \\<exists>k\\<in>Is.\n     x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n     y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<preceq> y", "obtain k\n      where kIs: \"k \\<in> Is\"\n        and kcond: \"(x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P' k)\\<^esub>\\<prec> y) \\<or> (y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' k)\\<^esub>\\<preceq> y)\""], ["proof (prove)\nusing this:\n  \\<exists>k\\<in>Is.\n     x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n     y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<in> Is;\n         x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n         y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  k \\<in> Is\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "let ?xPy = \"{ i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y }\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "let ?xP'y = \"{ i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y }\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "let ?yPx = \"{ i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "let ?yP'x = \"{ i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "from profileP xyA xPy xIy"], ["proof (chain)\npicking this:\n  profile A Is P\n  x \\<in> A\n  y \\<in> A\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y", "have yP'xyPx: \"?yP'x \\<subseteq> ?yPx\""], ["proof (prove)\nusing this:\n  profile A Is P\n  x \\<in> A\n  y \\<in> A\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "unfolding strict_pref_def indifferent_pref_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  x \\<in> A\n  y \\<in> A\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P ?i\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y \\<and>\n                    (y, x) \\<notin> P' ?i\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y \\<and>\n   y \\<^bsub>(P ?i)\\<^esub>\\<preceq> x\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P' i}\n    \\<subseteq> {i \\<in> Is.\n                 y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n                 (x, y) \\<notin> P i}", "by (blast dest: rpr_complete)"], ["proof (state)\nthis:\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "with finiteIs"], ["proof (chain)\npicking this:\n  finite Is\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "have yP'xyPxC: \"card ?yP'x \\<le> card ?yPx\""], ["proof (prove)\nusing this:\n  finite Is\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by (blast intro: card_mono finite_subset)"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "from finiteIs xPy"], ["proof (chain)\npicking this:\n  finite Is\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y", "have xPyxP'yC: \"card ?xPy \\<le> card ?xP'y\""], ["proof (prove)\nusing this:\n  finite Is\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "by (blast intro: card_mono finite_subset)"], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. \\<And>P P' x y.\n       \\<lbrakk>profile A Is P; profile A Is P'; x \\<in> A; y \\<in> A;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           \\<lbrakk>i \\<in> Is; x \\<^bsub>(P i)\\<^esub>\\<approx> y\\<rbrakk>\n           \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<preceq> y;\n        \\<exists>k\\<in>Is.\n           x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n           y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n           x \\<^bsub>(P' k)\\<^esub>\\<preceq> y;\n        x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "show \"x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> y\n 2. (y, x) \\<notin> MMD Is P'", "from xRSCFy xPyxP'yC yP'xyPxC"], ["proof (chain)\npicking this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "show \"x \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> y\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> y", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>{(x, y).\n             card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n             \\<le> card\n                    {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. x \\<^bsub>{(x, y).\n               card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n               \\<le> card\n                      {i \\<in> Is.\n                       x \\<^bsub>(P' i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y", "by auto"], ["proof (state)\nthis:\n  x \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "assume xIky: \"x \\<^bsub>(P k)\\<^esub>\\<approx> y\" and xP'ky: \"x \\<^bsub>(P' k)\\<^esub>\\<prec> y\""], ["proof (state)\nthis:\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "have \"card ?xPy < card ?xP'y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "from xIky"], ["proof (chain)\npicking this:\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y", "have knP: \"k \\<notin> ?xPy\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. k \\<notin> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}", "unfolding indifferent_pref_def strict_pref_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>(P k)\\<^esub>\\<preceq> y \\<and>\n  y \\<^bsub>(P k)\\<^esub>\\<preceq> x\n\ngoal (1 subgoal):\n 1. k \\<notin> {i \\<in> Is.\n                x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n                (y, x) \\<notin> P i}", "by blast"], ["proof (state)\nthis:\n  k \\<notin> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "from kIs xP'ky"], ["proof (chain)\npicking this:\n  k \\<in> Is\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y", "have kP': \"k \\<in> ?xP'y\""], ["proof (prove)\nusing this:\n  k \\<in> Is\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. k \\<in> {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "by simp"], ["proof (state)\nthis:\n  k \\<in> {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "from finiteIs xPy knP kP'"], ["proof (chain)\npicking this:\n  finite Is\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  k \\<notin> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  k \\<in> {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "show ?thesis"], ["proof (prove)\nusing this:\n  finite Is\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  k \\<notin> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  k \\<in> {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "by (blast intro: psubset_card_mono finite_subset)"], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "with xRSCFy yP'xyPxC"], ["proof (chain)\npicking this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "have \"card ?yP'x < card ?xP'y\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>{(x, y).\n             card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n             \\<le> card\n                    {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<le> card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "by auto"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "{"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "assume yPkx: \"y \\<^bsub>(P k)\\<^esub>\\<prec> x\" and xR'ky: \"x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\""], ["proof (state)\nthis:\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "have \"card ?yP'x < card ?yPx\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "from kIs yPkx"], ["proof (chain)\npicking this:\n  k \\<in> Is\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x", "have kP: \"k \\<in> ?yPx\""], ["proof (prove)\nusing this:\n  k \\<in> Is\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. k \\<in> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by simp"], ["proof (state)\nthis:\n  k \\<in> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "from kIs xR'ky"], ["proof (chain)\npicking this:\n  k \\<in> Is\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y", "have knP': \"k \\<notin> ?yP'x\""], ["proof (prove)\nusing this:\n  k \\<in> Is\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. k \\<notin> {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  k \\<in> Is\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. k \\<notin> {i \\<in> Is.\n                y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and>\n                (x, y) \\<notin> P' i}", "by blast"], ["proof (state)\nthis:\n  k \\<notin> {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "from yP'xyPx kP knP'"], ["proof (chain)\npicking this:\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  k \\<in> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  k \\<notin> {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "have \"?yP'x \\<subset> ?yPx\""], ["proof (prove)\nusing this:\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  k \\<in> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  k \\<notin> {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    \\<subset> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subset> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "with finiteIs"], ["proof (chain)\npicking this:\n  finite Is\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subset> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "show ?thesis"], ["proof (prove)\nusing this:\n  finite Is\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<subset> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by (blast intro: psubset_card_mono finite_subset)"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "with xRSCFy xPyxP'yC"], ["proof (chain)\npicking this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "have \"card ?yP'x < card ?xP'y\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>{(x, y).\n             card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n             \\<le> card\n                    {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "by auto"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "}"], ["proof (state)\nthis:\n  \\<lbrakk>y \\<^bsub>(P k)\\<^esub>\\<prec> x;\n   x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>y \\<^bsub>(P k)\\<^esub>\\<prec> x;\n   x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "note kcond"], ["proof (state)\nthis:\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  \\<lbrakk>y \\<^bsub>(P k)\\<^esub>\\<prec> x;\n   x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y", "show \"\\<not>(y \\<^bsub>(MMD Is P')\\<^esub>\\<preceq> x)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  \\<lbrakk>y \\<^bsub>(P k)\\<^esub>\\<prec> x;\n   x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (y, x) \\<notin> MMD Is P'", "unfolding MMD_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>x \\<^bsub>(P k)\\<^esub>\\<approx> y;\n   x \\<^bsub>(P' k)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  \\<lbrakk>y \\<^bsub>(P k)\\<^esub>\\<prec> x;\n   x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\\<rbrakk>\n  \\<Longrightarrow> card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n                    < card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  x \\<^bsub>(P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<prec> y \\<or>\n  y \\<^bsub>(P k)\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (y, x)\n    \\<notin> {(x, y).\n              card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n              \\<le> card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}}", "by auto"], ["proof (state)\nthis:\n  (y, x) \\<notin> MMD Is P'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<^bsub>(MMD Is P')\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  positively_responsive (MMD Is) A Is\n\ngoal:\nNo subgoals!", "qed"], ["", "subsection\\<open>Everything satisfying May's conditions is the Method of Majority Decision\\<close>"], ["", "text\\<open>Now show that MMD is the only SCF that satisfies these conditions.\\<close>"], ["", "text \\<open>Firstly develop some theory about exchanging alternatives $x$ and\n$y$ in profile $P$.\\<close>"], ["", "definition swapAlts :: \"'a \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> 'a\" where\n  \"swapAlts a b u \\<equiv> if u = a then b else if u = b then a else u\""], ["", "lemma swapAlts_in_set_iff: \"{a, b} \\<subseteq> A \\<Longrightarrow> swapAlts a b u \\<in> A \\<longleftrightarrow> u \\<in> A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {a, b} \\<subseteq> A \\<Longrightarrow>\n    (swapAlts a b u \\<in> A) = (u \\<in> A)", "unfolding swapAlts_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {a, b} \\<subseteq> A \\<Longrightarrow>\n    ((if u = a then b else if u = b then a else u) \\<in> A) = (u \\<in> A)", "by (simp split: if_split)"], ["", "definition swapAltsP :: \"('a, 'i) Profile \\<Rightarrow> 'a \\<Rightarrow> 'a \\<Rightarrow> ('a, 'i) Profile\" where\n  \"swapAltsP P a b \\<equiv> (\\<lambda>i. { (u, v) . (swapAlts a b u, swapAlts a b v) \\<in> P i })\""], ["", "lemma swapAltsP_ab: \"a \\<^bsub>(P i)\\<^esub>\\<preceq> b \\<longleftrightarrow> b \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> a\" \"b \\<^bsub>(P i)\\<^esub>\\<preceq> a \\<longleftrightarrow> a \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (b \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> a) &&&\n    (b \\<^bsub>(P i)\\<^esub>\\<preceq> a) =\n    (a \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> b)", "unfolding swapAltsP_def swapAlts_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (b \\<^bsub>{(u, v).\n                (if u = a then b\n                 else if u = b then a\n                      else u) \\<^bsub>(P\n  i)\\<^esub>\\<preceq> (if v = a then b\n                       else if v = b then a else v)}\\<^esub>\\<preceq> a) &&&\n    (b \\<^bsub>(P i)\\<^esub>\\<preceq> a) =\n    (a \\<^bsub>{(u, v).\n                (if u = a then b\n                 else if u = b then a\n                      else u) \\<^bsub>(P\n  i)\\<^esub>\\<preceq> (if v = a then b\n                       else if v = b then a else v)}\\<^esub>\\<preceq> b)", "by simp_all"], ["", "lemma profile_swapAltsP:\n  assumes profileP: \"profile A Is P\"\n      and abA: \"{a,b} \\<subseteq> A\"\n  shows \"profile A Is (swapAltsP P a b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is (swapAltsP P a b)", "proof(rule profileI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> rpr A (swapAltsP P a b i)\n 2. Is \\<noteq> {}", "from profileP"], ["proof (chain)\npicking this:\n  profile A Is P", "show \"Is \\<noteq> {}\""], ["proof (prove)\nusing this:\n  profile A Is P\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "by (rule profile_non_empty)"], ["proof (state)\nthis:\n  Is \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> rpr A (swapAltsP P a b i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> rpr A (swapAltsP P a b i)", "fix i"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> rpr A (swapAltsP P a b i)", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> rpr A (swapAltsP P a b i)", "show \"rpr A (swapAltsP P a b i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A (swapAltsP P a b i)", "proof(rule rprI)"], ["proof (state)\ngoal (3 subgoals):\n 1. complete A (swapAltsP P a b i)\n 2. refl_on A (swapAltsP P a b i)\n 3. trans (swapAltsP P a b i)", "show \"refl_on A (swapAltsP P a b i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. refl_on A (swapAltsP P a b i)", "proof(rule refl_onI)"], ["proof (state)\ngoal (2 subgoals):\n 1. swapAltsP P a b i \\<subseteq> A \\<times> A\n 2. \\<And>x.\n       x \\<in> A \\<Longrightarrow>\n       x \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> x", "from profileP iIs abA"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A", "show \"swapAltsP P a b i \\<subseteq> A \\<times> A\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. swapAltsP P a b i \\<subseteq> A \\<times> A", "unfolding swapAltsP_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. {(u, v). swapAlts a b u \\<^bsub>(P i)\\<^esub>\\<preceq> swapAlts a b v}\n    \\<subseteq> A \\<times> A", "by (blast dest: swapAlts_in_set_iff)"], ["proof (state)\nthis:\n  swapAltsP P a b i \\<subseteq> A \\<times> A\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> A \\<Longrightarrow>\n       x \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> x", "from profileP iIs abA"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A", "show \"\\<And>x. x \\<in> A \\<Longrightarrow> x \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> x\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> A \\<Longrightarrow>\n       x \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> x", "unfolding swapAltsP_def swapAlts_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> A \\<Longrightarrow>\n       x \\<^bsub>{(u, v).\n                  (if u = a then b\n                   else if u = b then a\n                        else u) \\<^bsub>(P\n    i)\\<^esub>\\<preceq> (if v = a then b\n                         else if v = b then a else v)}\\<^esub>\\<preceq> x", "by auto"], ["proof (state)\nthis:\n  ?x \\<in> A \\<Longrightarrow>\n  ?x \\<^bsub>(swapAltsP P a b i)\\<^esub>\\<preceq> ?x\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  refl_on A (swapAltsP P a b i)\n\ngoal (2 subgoals):\n 1. complete A (swapAltsP P a b i)\n 2. trans (swapAltsP P a b i)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. complete A (swapAltsP P a b i)\n 2. trans (swapAltsP P a b i)", "from profileP iIs abA"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A", "show \"complete A (swapAltsP P a b i)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. complete A (swapAltsP P a b i)", "unfolding swapAltsP_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  {a, b} \\<subseteq> A\n\ngoal (1 subgoal):\n 1. complete A\n     {(u, v). swapAlts a b u \\<^bsub>(P i)\\<^esub>\\<preceq> swapAlts a b v}", "by - (rule completeI, simp, rule rpr_complete[where A=A],\n            auto iff: swapAlts_in_set_iff)"], ["proof (state)\nthis:\n  complete A (swapAltsP P a b i)\n\ngoal (1 subgoal):\n 1. trans (swapAltsP P a b i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. trans (swapAltsP P a b i)", "from profileP iIs"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is", "show \"trans (swapAltsP P a b i)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. trans (swapAltsP P a b i)", "unfolding swapAltsP_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. trans\n     {(u, v). swapAlts a b u \\<^bsub>(P i)\\<^esub>\\<preceq> swapAlts a b v}", "by (blast dest: rpr_le_trans intro: transI)"], ["proof (state)\nthis:\n  trans (swapAltsP P a b i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A (swapAltsP P a b i)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma profile_bij_profile:\n  assumes profileP: \"profile A Is P\"\n      and bijf: \"bij_betw f Is Is\"\n  shows \"profile A Is (P \\<circ> f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is (P \\<circ> f)", "using bij_betw_onto[OF bijf] profileP"], ["proof (prove)\nusing this:\n  f ` Is = Is\n  profile A Is P\n\ngoal (1 subgoal):\n 1. profile A Is (P \\<circ> f)", "by - (rule, auto dest: profile_non_empty)"], ["", "text\\<open>The locale keeps the conditions in scope for the next few\nlemmas. Note how weak the constraints on the sets of alternatives and\nindividuals are; clearly there needs to be at least two alternatives and two\nindividuals for conflict to occur, but it is pleasant that the proof\nuniformly handles the degenerate cases.\\<close>"], ["", "locale May =\n  fixes A :: \"'a set\"\n\n  fixes Is :: \"'i set\"\n  assumes finiteIs: \"finite Is\"\n\n  fixes scf :: \"('a, 'i) SCF\"\n  assumes SCF: \"SCF scf A Is universal_domain\"\n      and anonymous: \"anonymous scf A Is\"\n      and neutral: \"neutral scf A Is\"\n      and positively_responsive: \"positively_responsive scf A Is\"\nbegin"], ["", "text\\<open>Anonymity implies that, for any pair of alternatives, the social\nchoice rule can only depend on the number of individuals who express any\ngiven preference between them. Note we also need @{term \"iia\"}, implied by\nneutrality, to restrict attention to alternatives $x$ and $y$.\\<close>"], ["", "lemma anonymous_card:\n  assumes profileP: \"profile A Is P\"\n      and profileP': \"profile A Is P'\"\n      and xyA: \"hasw [x,y] A\"\n      and xytally: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = card { i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y }\"\n      and yxtally: \"card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x } = card { i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(scf P')\\<^esub>\\<preceq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "let ?xPy = \"{ i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y }\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "let ?xP'y = \"{ i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y }\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "let ?yPx = \"{ i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "let ?yP'x = \"{ i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\""], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "have disjPxy: \"(?xPy \\<union> ?yPx) - ?xPy = ?yPx\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n    {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "unfolding strict_pref_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} \\<union>\n    {i \\<in> Is.\n     y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} -\n    {i \\<in> Is.\n     x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} =\n    {i \\<in> Is.\n     y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i}", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "have disjP'xy: \"(?xP'y \\<union> ?yP'x) - ?xP'y = ?yP'x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n    {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "unfolding strict_pref_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(P' i)\\<^esub>\\<preceq> y \\<and>\n     (y, x) \\<notin> P' i} \\<union>\n    {i \\<in> Is.\n     y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P' i} -\n    {i \\<in> Is.\n     x \\<^bsub>(P' i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P' i} =\n    {i \\<in> Is.\n     y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P' i}", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from finiteIs xytally"], ["proof (chain)\npicking this:\n  finite Is\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}", "obtain f where bijf: \"bij_betw f ?xPy ?xP'y\""], ["proof (prove)\nusing this:\n  finite Is\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n         {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by - (drule card_eq_bij, auto)"], ["proof (state)\nthis:\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from finiteIs yxtally"], ["proof (chain)\npicking this:\n  finite Is\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "obtain g where bijg: \"bij_betw g ?yPx ?yP'x\""], ["proof (prove)\nusing this:\n  finite Is\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (\\<And>g.\n        bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n         {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by - (drule card_eq_bij, auto)"], ["proof (state)\nthis:\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from bijf bijg disjPxy disjP'xy"], ["proof (chain)\npicking this:\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "obtain h\n    where bijh: \"bij_betw h (?xPy \\<union> ?yPx) (?xP'y \\<union> ?yP'x)\"\n      and hf: \"\\<And>j. j \\<in> ?xPy \\<Longrightarrow> h j = f j\"\n      and hg: \"\\<And>j. j \\<in> (?xPy \\<union> ?yPx) - ?xPy \\<Longrightarrow> h j = g j\""], ["proof (prove)\nusing this:\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>bij_betw h\n                  ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n                  ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x});\n         \\<And>j.\n            j \\<in> {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n            h j = f j;\n         \\<And>j.\n            j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n                    {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n            h j = g j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using bij_combine[where f=f and g=g and A=\"?xPy\" and B =\"?xPy \\<union> ?yPx\" and C=\"?xP'y\" and D=\"?xP'y \\<union> ?yP'x\"]"], ["proof (prove)\nusing this:\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n  {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  \\<lbrakk>{i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n           \\<subseteq> {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                       {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x};\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n   \\<subseteq> {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n               {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x};\n   bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y};\n   bij_betw g\n    ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n     {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n     {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y})\n    ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n     {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x} -\n     {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y});\n   \\<And>h.\n      \\<lbrakk>bij_betw h\n                ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                 {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n                ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n                 {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x});\n       \\<And>xa.\n          xa \\<in> {i \\<in> Is.\n                    x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n          h xa = f xa;\n       \\<And>xa.\n          xa \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n                   {i \\<in> Is.\n                    x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n          h xa = g xa\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>h.\n        \\<lbrakk>bij_betw h\n                  ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n                  ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x});\n         \\<And>j.\n            j \\<in> {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n            h j = f j;\n         \\<And>j.\n            j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n                    {i \\<in> Is.\n                     x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n            h j = g j\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  bij_betw h\n   ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n   ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = f ?j\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n           {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = g ?j\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from bijh finiteIs"], ["proof (chain)\npicking this:\n  bij_betw h\n   ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n   ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n  finite Is", "obtain h' where bijh': \"bij_betw h' Is Is\"\n              and hh': \"\\<And>j. j \\<in> (?xPy \\<union> ?yPx) \\<Longrightarrow> h' j = h j\"\n              and hrest: \"\\<And>j. j \\<in> Is - (?xPy \\<union> ?yPx) \\<Longrightarrow> h' j \\<in> Is - (?xP'y \\<union> ?yP'x)\""], ["proof (prove)\nusing this:\n  bij_betw h\n   ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x})\n   ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n    {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n  finite Is\n\ngoal (1 subgoal):\n 1. (\\<And>h'.\n        \\<lbrakk>bij_betw h' Is Is;\n         \\<And>j.\n            j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                    {i \\<in> Is.\n                     y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n            h' j = h j;\n         \\<And>j.\n            j \\<in> Is -\n                    ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n                     {i \\<in> Is.\n                      y \\<^bsub>(P i)\\<^esub>\\<prec> x}) \\<Longrightarrow>\n            h' j\n            \\<in> Is -\n                  ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n                   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by - (drule bij_complete, auto)"], ["proof (state)\nthis:\n  bij_betw h' Is Is\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> Is -\n           ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n            {i \\<in> Is.\n             y \\<^bsub>(P i)\\<^esub>\\<prec> x}) \\<Longrightarrow>\n  h' ?j\n  \\<in> Is -\n        ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n         {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from neutral_iia[OF neutral]"], ["proof (chain)\npicking this:\n  iia scf A Is", "have \"x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(scf P)\\<^esub>\\<preceq> y\""], ["proof (prove)\nusing this:\n  iia scf A Is\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y)", "proof(rule iiaE)"], ["proof (state)\ngoal (6 subgoals):\n 1. {?x, ?y} \\<subseteq> A\n 2. x \\<in> {?x, ?y}\n 3. y \\<in> {?x, ?y}\n 4. \\<And>i a b.\n       \\<lbrakk>a \\<in> {?x, ?y}; b \\<in> {?x, ?y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 5. profile A Is (P' \\<circ> h')\n 6. profile A Is P", "from xyA"], ["proof (chain)\npicking this:\n  hasw [x, y] A", "show \"{x, y} \\<subseteq> A\""], ["proof (prove)\nusing this:\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. {x, y} \\<subseteq> A", "by simp"], ["proof (state)\nthis:\n  {x, y} \\<subseteq> A\n\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "fix i"], ["proof (state)\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "fix a b"], ["proof (state)\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "assume ab: \"a \\<in> {x, y}\" \"b \\<in> {x, y}\""], ["proof (state)\nthis:\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "from profileP iIs"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is", "have completePi: \"complete A (P i)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. complete A (P i)", "by (auto dest: rprD)"], ["proof (state)\nthis:\n  complete A (P i)\n\ngoal (5 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. \\<And>i a b.\n       \\<lbrakk>a \\<in> {x, y}; b \\<in> {x, y}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 4. profile A Is (P' \\<circ> h')\n 5. profile A Is P", "from completePi xyA"], ["proof (chain)\npicking this:\n  complete A (P i)\n  hasw [x, y] A", "show \"(a \\<^bsub>(P i)\\<^esub>\\<preceq> b) \\<longleftrightarrow> (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\""], ["proof (prove)\nusing this:\n  complete A (P i)\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "proof(cases rule: complete_exh)"], ["proof (state)\ngoal (3 subgoals):\n 1. x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 2. y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 3. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "case xPy"], ["proof (state)\nthis:\n  x \\<^bsub>(P i)\\<^esub>\\<prec> y\n\ngoal (3 subgoals):\n 1. x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 2. y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 3. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "with profileP profileP' xyA iIs ab hh' hf bijf"], ["proof (chain)\npicking this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = f ?j\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  x \\<^bsub>(P i)\\<^esub>\\<prec> y", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = f ?j\n  bij_betw f {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n   {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y}\n  x \\<^bsub>(P i)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "unfolding strict_pref_def bij_betw_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<union>\n           {i \\<in> Is.\n            y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n            (x, y) \\<notin> P i} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<Longrightarrow>\n  h ?j = f ?j\n  inj_on f\n   {i \\<in> Is.\n    x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} \\<and>\n  f `\n  {i \\<in> Is.\n   x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} =\n  {i \\<in> Is.\n   x \\<^bsub>(P' i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P' i}\n  x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "by (simp, blast)"], ["proof (state)\nthis:\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n\ngoal (2 subgoals):\n 1. y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 2. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 2. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "case yPx"], ["proof (state)\nthis:\n  y \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (2 subgoals):\n 1. y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n 2. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "with profileP profileP' xyA iIs ab hh' hg bijg"], ["proof (chain)\npicking this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n           {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = g ?j\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  y \\<^bsub>(P i)\\<^esub>\\<prec> x", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} -\n           {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n  h ?j = g ?j\n  bij_betw g {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n   {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n  y \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "unfolding strict_pref_def bij_betw_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  ?j \\<in> {i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<union>\n           {i \\<in> Is.\n            y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n            (x, y) \\<notin> P i} \\<Longrightarrow>\n  h' ?j = h ?j\n  ?j \\<in> {i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<union>\n           {i \\<in> Is.\n            y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} -\n           {i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<Longrightarrow>\n  h ?j = g ?j\n  inj_on g\n   {i \\<in> Is.\n    y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} \\<and>\n  g `\n  {i \\<in> Is.\n   y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} =\n  {i \\<in> Is.\n   y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P' i}\n  y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "by (simp, blast)"], ["proof (state)\nthis:\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "case xIy"], ["proof (state)\nthis:\n  x \\<^bsub>(P i)\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(P i)\\<^esub>\\<approx> y \\<Longrightarrow>\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "with profileP profileP' xyA iIs ab hrest[where j=i]"], ["proof (chain)\npicking this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  i \\<in> Is -\n          ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}) \\<Longrightarrow>\n  h' i\n  \\<in> Is -\n        ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n         {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n  x \\<^bsub>(P i)\\<^esub>\\<approx> y", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  i \\<in> Is -\n          ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<union>\n           {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}) \\<Longrightarrow>\n  h' i\n  \\<in> Is -\n        ({i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} \\<union>\n         {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x})\n  x \\<^bsub>(P i)\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "unfolding indifferent_pref_def strict_pref_def bij_betw_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  profile A Is P'\n  hasw [x, y] A\n  i \\<in> Is\n  a \\<in> {x, y}\n  b \\<in> {x, y}\n  i \\<in> Is -\n          ({i \\<in> Is.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n            (y, x) \\<notin> P i} \\<union>\n           {i \\<in> Is.\n            y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n            (x, y) \\<notin> P i}) \\<Longrightarrow>\n  h' i\n  \\<in> Is -\n        ({i \\<in> Is.\n          x \\<^bsub>(P' i)\\<^esub>\\<preceq> y \\<and>\n          (y, x) \\<notin> P' i} \\<union>\n         {i \\<in> Is.\n          y \\<^bsub>(P' i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P' i})\n  x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n  y \\<^bsub>(P i)\\<^esub>\\<preceq> x\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)", "by (simp, blast dest: rpr_complete)"], ["proof (state)\nthis:\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>((P' \\<circ> h') i)\\<^esub>\\<preceq> b)\n\ngoal (4 subgoals):\n 1. x \\<in> {x, y}\n 2. y \\<in> {x, y}\n 3. profile A Is (P' \\<circ> h')\n 4. profile A Is P", "qed (simp_all add: profileP profile_bij_profile[OF profileP' bijh'])"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "moreover"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "from anonymousD[OF anonymous profileP' bijh'] xyA"], ["proof (chain)\npicking this:\n  \\<lbrakk>?x \\<in> A; ?y \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (?x \\<^bsub>(scf P')\\<^esub>\\<preceq> ?y) =\n                    (?x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> ?y)\n  hasw [x, y] A", "have \"x \\<^bsub>(scf P')\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> A; ?y \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (?x \\<^bsub>(scf P')\\<^esub>\\<preceq> ?y) =\n                    (?x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> ?y)\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "ultimately"], ["proof (chain)\npicking this:\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y)\n  (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y)", "show ?thesis"], ["proof (prove)\nusing this:\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y)\n  (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (P' \\<circ> h'))\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf P')\\<^esub>\\<preceq> y)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>Using the previous result and neutrality, it must be the case that\nif the tallies are tied for alternatives $x$ and $y$ then the social choice\nfunction is indifferent between those two alternatives.\\<close>"], ["", "lemma anonymous_neutral_indifference:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<approx> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "proof -\n    \\<comment> \\<open>Neutrality insists the results for @{term \"P\"} are symmetrical to those for @{term \"swapAltsP P\"}.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "from xyA"], ["proof (chain)\npicking this:\n  hasw [x, y] A", "have symPP': \"(x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x)\n              \\<and> (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\""], ["proof (prove)\nusing this:\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x) \\<and>\n    (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n    (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)", "by - (rule neutralD[OF neutral profileP profile_swapAltsP[OF profileP]],\n          simp_all, (rule swapAltsP_ab)+)\n      \\<comment> \\<open>Anonymity and neutrality insist the results for @{term \"P\"} are identical to those for @{term \"swapAltsP P\"}.\\<close>"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x) \\<and>\n  (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "from xyA tallyP"], ["proof (chain)\npicking this:\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "have \"card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} = card { i \\<in> Is. x \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> y }\"\n                   and \"card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} = card { i \\<in> Is. y \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> x }\""], ["proof (prove)\nusing this:\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n    card {i \\<in> Is. x \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> y} &&&\n    card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card {i \\<in> Is. y \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> x}", "unfolding swapAltsP_def swapAlts_def strict_pref_def"], ["proof (prove)\nusing this:\n  hasw [x, y] A\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i}\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i} =\n    card\n     {i \\<in> Is.\n      x \\<^bsub>{(u, v).\n                 (if u = x then y\n                  else if u = y then x\n                       else u) \\<^bsub>(P\n   i)\\<^esub>\\<preceq> (if v = x then y\n                        else if v = y then x\n                             else v)}\\<^esub>\\<preceq> y \\<and>\n      (y, x)\n      \\<notin> {(u, v).\n                (if u = x then y\n                 else if u = y then x\n                      else u) \\<^bsub>(P\n  i)\\<^esub>\\<preceq> (if v = x then y else if v = y then x else v)}} &&&\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>{(u, v).\n                 (if u = x then y\n                  else if u = y then x\n                       else u) \\<^bsub>(P\n   i)\\<^esub>\\<preceq> (if v = x then y\n                        else if v = y then x\n                             else v)}\\<^esub>\\<preceq> x \\<and>\n      (x, y)\n      \\<notin> {(u, v).\n                (if u = x then y\n                 else if u = y then x\n                      else u) \\<^bsub>(P\n  i)\\<^esub>\\<preceq> (if v = x then y else if v = y then x else v)}}", "by simp_all"], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. x \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card {i \\<in> Is. y \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "with profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. x \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card {i \\<in> Is. y \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> x}", "have idPP': \"x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y\"\n                            and \"y \\<^bsub>(scf P)\\<^esub>\\<preceq> x \\<longleftrightarrow> y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x\""], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. x \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> y}\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card {i \\<in> Is. y \\<^bsub>(swapAltsP P x y i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y) &&&\n    (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n    (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x)", "by - (rule anonymous_card[OF profileP profile_swapAltsP], clarsimp+)+"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\n  (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n  (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "from xyA SCF_completeD[OF SCF] profileP symPP' idPP'"], ["proof (chain)\npicking this:\n  hasw [x, y] A\n  universal_domain A Is ?P \\<Longrightarrow> complete A (scf ?P)\n  profile A Is P\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x) \\<and>\n  (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)", "show \"x \\<^bsub>(scf P)\\<^esub>\\<approx> y\""], ["proof (prove)\nusing this:\n  hasw [x, y] A\n  universal_domain A Is ?P \\<Longrightarrow> complete A (scf ?P)\n  profile A Is P\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (y \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> x) \\<and>\n  (y \\<^bsub>(scf P)\\<^esub>\\<preceq> x) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(scf (swapAltsP P x y))\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<approx> y", "by (simp, blast)"], ["proof (state)\nthis:\n  x \\<^bsub>(scf P)\\<^esub>\\<approx> y\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Finally, if the tallies are not equal then the social choice function\nmust lean towards the one with the higher count due to positive\nresponsiveness.\\<close>"], ["", "lemma positively_responsive_prefer_witness:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } > card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  obtains P' k\n    where \"profile A Is P'\"\n      and \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n      and \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y\"\n      and \"k \\<in> Is \\<and> x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P k)\\<^esub>\\<prec> y\"\n      and \"card { i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from tallyP"], ["proof (chain)\npicking this:\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}", "obtain C\n    where tallyP': \"card ({ i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } - C) = card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n      and C: \"C \\<noteq> {}\" \"C \\<subseteq> Is\"\n      and CxPy: \"C \\<subseteq> { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y }\""], ["proof (prove)\nusing this:\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (\\<And>C.\n        \\<lbrakk>card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C) =\n                 card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x};\n         C \\<noteq> {}; C \\<subseteq> Is;\n         C \\<subseteq> {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by - (drule card_greater[OF finiteIs], auto)\n      \\<comment> \\<open>Add $(b, a)$ and close under transitivity.\\<close>"], ["proof (state)\nthis:\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C) =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?P' = \"\\<lambda>i. if i \\<in> C\n                   then P i \\<union> { (y, x) }\n                            \\<union> { (y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u }\n                            \\<union> { (u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y }\n                            \\<union> { (v, u) |u v. x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and> v \\<^bsub>(P i)\\<^esub>\\<preceq> y }\n                   else P i\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"profile A Is ?P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is\n     (\\<lambda>i.\n         if i \\<in> C\n         then P i \\<union> {(y, x)} \\<union>\n              {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n              {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n              {(v, u) |u v.\n               x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n               v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n         else P i)", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        (if i \\<in> C\n         then P i \\<union> {(y, x)} \\<union>\n              {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n              {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n              {(v, u) |u v.\n               x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n               v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n         else P i)\n 2. Is \\<noteq> {}", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        (if i \\<in> C\n         then P i \\<union> {(y, x)} \\<union>\n              {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n              {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n              {(v, u) |u v.\n               x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n               v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n         else P i)\n 2. Is \\<noteq> {}", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        (if i \\<in> C\n         then P i \\<union> {(y, x)} \\<union>\n              {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n              {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n              {(v, u) |u v.\n               x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n               v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n         else P i)\n 2. Is \\<noteq> {}", "show \"rpr A (?P' i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. complete A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)\n 2. refl_on A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)\n 3. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "from profileP iIs"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is", "show \"complete A (?P' i)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. complete A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "unfolding complete_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>A.\n       \\<forall>ya\\<in>A - {xa}.\n          xa \\<^bsub>(if i \\<in> C\n                      then P i \\<union> {(y, x)} \\<union>\n                           {(y, u) |u.\n                            x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                           {(u, x) |u.\n                            u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                           {(v, u) |u v.\n                            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                      else P i)\\<^esub>\\<preceq> ya \\<or>\n          ya \\<^bsub>(if i \\<in> C\n                      then P i \\<union> {(y, x)} \\<union>\n                           {(y, u) |u.\n                            x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                           {(u, x) |u.\n                            u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                           {(v, u) |u v.\n                            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                      else P i)\\<^esub>\\<preceq> xa", "by (simp, blast dest: rpr_complete)"], ["proof (state)\nthis:\n  complete A\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal (2 subgoals):\n 1. refl_on A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)\n 2. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "from profileP iIs xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  hasw [x, y] A", "show \"refl_on A (?P' i)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. refl_on A\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "by - (rule refl_onI, auto)"], ["proof (state)\nthis:\n  refl_on A\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal (1 subgoal):\n 1. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "show \"trans (?P' i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "proof(cases \"i \\<in> C\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<in> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)\n 2. i \\<notin> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "case False"], ["proof (state)\nthis:\n  i \\<notin> C\n\ngoal (2 subgoals):\n 1. i \\<in> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)\n 2. i \\<notin> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "with profileP iIs"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  i \\<notin> C", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  i \\<notin> C\n\ngoal (1 subgoal):\n 1. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "by (simp, blast dest: rpr_le_trans intro: transI)"], ["proof (state)\nthis:\n  trans\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal (1 subgoal):\n 1. i \\<in> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<in> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "case True"], ["proof (state)\nthis:\n  i \\<in> C\n\ngoal (1 subgoal):\n 1. i \\<in> C \\<Longrightarrow>\n    trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "with profileP iIs C CxPy xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  i \\<in> Is\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  hasw [x, y] A\n  i \\<in> C", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  hasw [x, y] A\n  i \\<in> C\n\ngoal (1 subgoal):\n 1. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  i \\<in> Is\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is.\n                 x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n                 (y, x) \\<notin> P i}\n  hasw [x, y] A\n  i \\<in> C\n\ngoal (1 subgoal):\n 1. trans\n     (if i \\<in> C\n      then P i \\<union> {(y, x)} \\<union>\n           {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n           {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n           {(v, u) |u v.\n            x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n            v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n      else P i)", "by - (rule transI, simp, blast dest: rpr_le_trans rpr_complete)"], ["proof (state)\nthis:\n  trans\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  trans\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   (if i \\<in> C\n    then P i \\<union> {(y, x)} \\<union>\n         {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n         {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n         {(v, u) |u v.\n          x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n          v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n    else P i)\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "from C"], ["proof (chain)\npicking this:\n  C \\<noteq> {}\n  C \\<subseteq> Is", "show \"Is \\<noteq> {}\""], ["proof (prove)\nusing this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "by blast"], ["proof (state)\nthis:\n  Is \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  profile A Is\n   (\\<lambda>i.\n       if i \\<in> C\n       then P i \\<union> {(y, x)} \\<union>\n            {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n            {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n            {(v, u) |u v.\n             x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n             v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n       else P i)\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  profile A Is\n   (\\<lambda>i.\n       if i \\<in> C\n       then P i \\<union> {(y, x)} \\<union>\n            {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n            {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n            {(v, u) |u v.\n             x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n             v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n       else P i)\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"\\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(?P' i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y", "unfolding strict_pref_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<preceq> y \\<and>\n        (y, x)\n        \\<notin> (if i \\<in> C\n                  then P i \\<union> {(y, x)} \\<union>\n                       {(y, u) |u.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                       {(u, x) |u.\n                        u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                       {(v, u) |u v.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                        v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                  else P i)\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n                         (y, x) \\<notin> P i", "by (simp split: if_split_asm)"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from profileP C xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  hasw [x, y] A", "have \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(?P' i)\\<^esub>\\<approx> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y\""], ["proof (prove)\nusing this:\n  profile A Is P\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<approx> y\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y", "unfolding indifferent_pref_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<preceq> y \\<and>\n        y \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<preceq> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y", "by (simp split: if_split_asm)"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from C CxPy"], ["proof (chain)\npicking this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}", "obtain k where kC: \"k \\<in> C\" and xPky: \"x \\<^bsub>(P k)\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  C \\<subseteq> {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (\\<And>k.\n        \\<lbrakk>k \\<in> C; x \\<^bsub>(P k)\\<^esub>\\<prec> y\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  k \\<in> C\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "hence \"x \\<^bsub>(?P' k)\\<^esub>\\<approx> y\""], ["proof (prove)\nusing this:\n  k \\<in> C\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(if k \\<in> C\n               then P k \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n               else P k)\\<^esub>\\<approx> y", "by auto"], ["proof (state)\nthis:\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "with C kC xPky"], ["proof (chain)\npicking this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  k \\<in> C\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y", "have \"k \\<in> Is \\<and> x \\<^bsub>(?P' k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P k)\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n  k \\<in> C\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. k \\<in> Is \\<and>\n    x \\<^bsub>(if k \\<in> C\n               then P k \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n               else P k)\\<^esub>\\<approx> y \\<and>\n    x \\<^bsub>(P k)\\<^esub>\\<prec> y", "by blast"], ["proof (state)\nthis:\n  k \\<in> Is \\<and>\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  k \\<in> Is \\<and>\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"card { i \\<in> Is. x \\<^bsub>(?P' i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(?P' i)\\<^esub>\\<prec> x }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "have \"{ i \\<in> Is. x \\<^bsub>(?P' i)\\<^esub>\\<prec> y } = { i \\<in> Is. x \\<^bsub>(?P' i)\\<^esub>\\<prec> y } - C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} -\n    C", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} -\n    C", "from C"], ["proof (chain)\npicking this:\n  C \\<noteq> {}\n  C \\<subseteq> Is", "have \"\\<And>i. \\<lbrakk> i \\<in> Is; x \\<^bsub>(?P' i)\\<^esub>\\<prec> y \\<rbrakk> \\<Longrightarrow> i \\<in> Is - C\""], ["proof (prove)\nusing this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> i \\<in> Is - C", "unfolding indifferent_pref_def strict_pref_def"], ["proof (prove)\nusing this:\n  C \\<noteq> {}\n  C \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        x \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<preceq> y \\<and>\n        (y, x)\n        \\<notin> (if i \\<in> C\n                  then P i \\<union> {(y, x)} \\<union>\n                       {(y, u) |u.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                       {(u, x) |u.\n                        u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                       {(v, u) |u v.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                        v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                  else P i)\\<rbrakk>\n       \\<Longrightarrow> i \\<in> Is - C", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> ?i \\<in> Is - C\n\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} -\n    C", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> ?i \\<in> Is - C\n\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} =\n    {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} -\n    C", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} -\n  C\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} -\n  C\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "also"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} -\n  C\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "have \"\\<dots> = { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } - C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     x \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> y} -\n    C =\n    {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C", "by auto"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} -\n  C =\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "finally"], ["proof (chain)\npicking this:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C", "have \"card { i \\<in> Is. x \\<^bsub>(?P' i)\\<^esub>\\<prec> y } = card ({ i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } - C)\""], ["proof (prove)\nusing this:\n  {i \\<in> Is.\n   x \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> y} =\n  {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C)", "by simp"], ["proof (state)\nthis:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C)\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "with tallyP'"], ["proof (chain)\npicking this:\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C) =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C)", "have \"card { i \\<in> Is. x \\<^bsub>(?P' i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (prove)\nusing this:\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C) =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card ({i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} - C)\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by simp"], ["proof (state)\nthis:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "also"], ["proof (state)\nthis:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "have \"\\<dots> = card { i \\<in> Is. y \\<^bsub>(?P' i)\\<^esub>\\<prec> x }\" (is \"card ?lhs = card ?rhs\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "from profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A", "have \"\\<And>i. \\<lbrakk> i \\<in> Is; y \\<^bsub>(?P' i)\\<^esub>\\<prec> x \\<rbrakk> \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        y \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<prec> x", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        y \\<^bsub>(if i \\<in> C\n                   then P i \\<union> {(y, x)} \\<union>\n                        {(y, u) |u.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                        {(u, x) |u.\n                         u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                        {(v, u) |u v.\n                         x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                         v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                   else P i)\\<^esub>\\<preceq> x \\<and>\n        (x, y)\n        \\<notin> (if i \\<in> C\n                  then P i \\<union> {(y, x)} \\<union>\n                       {(y, u) |u.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                       {(u, x) |u.\n                        u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                       {(v, u) |u v.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                        v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                  else P i)\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n                         (x, y) \\<notin> P i", "by (simp split: if_split_asm, blast dest: rpr_complete)"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is;\n   y \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> x\\<rbrakk>\n  \\<Longrightarrow> y \\<^bsub>(P ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "hence \"?rhs \\<subseteq> ?lhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?i \\<in> Is;\n   y \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> x\\<rbrakk>\n  \\<Longrightarrow> y \\<^bsub>(P ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. {i \\<in> Is.\n     y \\<^bsub>(if i \\<in> C\n                then P i \\<union> {(y, x)} \\<union>\n                     {(y, u) |u.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                     {(u, x) |u.\n                      u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                     {(v, u) |u v.\n                      x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                      v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                else P i)\\<^esub>\\<prec> x}\n    \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   y \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "moreover"], ["proof (state)\nthis:\n  {i \\<in> Is.\n   y \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "from profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A", "have \"\\<And>i. \\<lbrakk> i \\<in> Is; y \\<^bsub>(P i)\\<^esub>\\<prec> x \\<rbrakk> \\<Longrightarrow> y \\<^bsub>(?P' i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is; y \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(if i \\<in> C\n                                    then P i \\<union> {(y, x)} \\<union>\n   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n   {(v, u) |u v.\n    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                                    else P i)\\<^esub>\\<prec> x", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n\ngoal (1 subgoal):\n 1. \\<And>i.\n       \\<lbrakk>i \\<in> Is;\n        y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n        (x, y) \\<notin> P i\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(if i \\<in> C\n                                    then P i \\<union> {(y, x)} \\<union>\n   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n   {(v, u) |u v.\n    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                                    else P i)\\<^esub>\\<preceq> x \\<and>\n                         (x, y)\n                         \\<notin> (if i \\<in> C\n                                   then P i \\<union> {(y, x)} \\<union>\n  {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n  {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n  {(v, u) |u v.\n   x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n   v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                                   else P i)", "by simp"], ["proof (state)\nthis:\n  \\<lbrakk>?i \\<in> Is; y \\<^bsub>(P ?i)\\<^esub>\\<prec> x\\<rbrakk>\n  \\<Longrightarrow> y \\<^bsub>(if ?i \\<in> C\n                               then P ?i \\<union> {(y, x)} \\<union>\n                                    {(y, u) |u.\n                                     x \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> u} \\<union>\n                                    {(u, x) |u.\n                                     u \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> y} \\<union>\n                                    {(v, u) |u v.\n                                     x \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> u \\<and>\n                                     v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n                               else P ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "hence \"?lhs \\<subseteq> ?rhs\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?i \\<in> Is; y \\<^bsub>(P ?i)\\<^esub>\\<prec> x\\<rbrakk>\n  \\<Longrightarrow> y \\<^bsub>(if ?i \\<in> C\n                               then P ?i \\<union> {(y, x)} \\<union>\n                                    {(y, u) |u.\n                                     x \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> u} \\<union>\n                                    {(u, x) |u.\n                                     u \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> y} \\<union>\n                                    {(v, u) |u v.\n                                     x \\<^bsub>(P\n           ?i)\\<^esub>\\<preceq> u \\<and>\n                                     v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n                               else P ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n    \\<subseteq> {i \\<in> Is.\n                 y \\<^bsub>(if i \\<in> C\n                            then P i \\<union> {(y, x)} \\<union>\n                                 {(y, u) |u.\n                                  x \\<^bsub>(P\n        i)\\<^esub>\\<preceq> u} \\<union>\n                                 {(u, x) |u.\n                                  u \\<^bsub>(P\n        i)\\<^esub>\\<preceq> y} \\<union>\n                                 {(v, u) |u v.\n                                  x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                                  v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                            else P i)\\<^esub>\\<prec> x}", "by blast"], ["proof (state)\nthis:\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is.\n               y \\<^bsub>(if i \\<in> C\n                          then P i \\<union> {(y, x)} \\<union>\n                               {(y, u) |u.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                               {(u, x) |u.\n                                u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                               {(v, u) |u v.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                                v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                          else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "ultimately"], ["proof (chain)\npicking this:\n  {i \\<in> Is.\n   y \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is.\n               y \\<^bsub>(if i \\<in> C\n                          then P i \\<union> {(y, x)} \\<union>\n                               {(y, u) |u.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                               {(u, x) |u.\n                                u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                               {(v, u) |u v.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                                v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                          else P i)\\<^esub>\\<prec> x}", "show ?thesis"], ["proof (prove)\nusing this:\n  {i \\<in> Is.\n   y \\<^bsub>(if i \\<in> C\n              then P i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n              else P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<subseteq> {i \\<in> Is.\n               y \\<^bsub>(if i \\<in> C\n                          then P i \\<union> {(y, x)} \\<union>\n                               {(y, u) |u.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                               {(u, x) |u.\n                                u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                               {(v, u) |u v.\n                                x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                                v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                          else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "by simp"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "finally"], ["proof (chain)\npicking this:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}", "show ?thesis"], ["proof (prove)\nusing this:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card\n     {i \\<in> Is.\n      x \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> y} =\n    card\n     {i \\<in> Is.\n      y \\<^bsub>(if i \\<in> C\n                 then P i \\<union> {(y, x)} \\<union>\n                      {(y, u) |u.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                      {(u, x) |u.\n                       u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                      {(v, u) |u v.\n                       x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                       v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n                 else P i)\\<^esub>\\<prec> x}", "."], ["proof (state)\nthis:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  profile A Is\n   (\\<lambda>i.\n       if i \\<in> C\n       then P i \\<union> {(y, x)} \\<union>\n            {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n            {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n            {(v, u) |u v.\n             x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n             v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n       else P i)\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n  k \\<in> Is \\<and>\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}", "show thesis"], ["proof (prove)\nusing this:\n  profile A Is\n   (\\<lambda>i.\n       if i \\<in> C\n       then P i \\<union> {(y, x)} \\<union>\n            {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n            {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n            {(v, u) |u v.\n             x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n             v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n       else P i)\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is;\n   x \\<^bsub>(if ?i \\<in> C\n              then P ?i \\<union> {(y, x)} \\<union>\n                   {(y, u) |u. x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u} \\<union>\n                   {(u, x) |u. u \\<^bsub>(P ?i)\\<^esub>\\<preceq> y} \\<union>\n                   {(v, u) |u v.\n                    x \\<^bsub>(P ?i)\\<^esub>\\<preceq> u \\<and>\n                    v \\<^bsub>(P ?i)\\<^esub>\\<preceq> y}\n              else P ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n  k \\<in> Is \\<and>\n  x \\<^bsub>(if k \\<in> C\n             then P k \\<union> {(y, x)} \\<union>\n                  {(y, u) |u. x \\<^bsub>(P k)\\<^esub>\\<preceq> u} \\<union>\n                  {(u, x) |u. u \\<^bsub>(P k)\\<^esub>\\<preceq> y} \\<union>\n                  {(v, u) |u v.\n                   x \\<^bsub>(P k)\\<^esub>\\<preceq> u \\<and>\n                   v \\<^bsub>(P k)\\<^esub>\\<preceq> y}\n             else P k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> y} =\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(if i \\<in> C\n               then P i \\<union> {(y, x)} \\<union>\n                    {(y, u) |u. x \\<^bsub>(P i)\\<^esub>\\<preceq> u} \\<union>\n                    {(u, x) |u. u \\<^bsub>(P i)\\<^esub>\\<preceq> y} \\<union>\n                    {(v, u) |u v.\n                     x \\<^bsub>(P i)\\<^esub>\\<preceq> u \\<and>\n                     v \\<^bsub>(P i)\\<^esub>\\<preceq> y}\n               else P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. thesis", ".."], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma positively_responsive_prefer:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n      and tallyP: \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } > card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<prec> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<prec> y", "from assms"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}", "obtain P' k\n    where profileP': \"profile A Is P'\"\n      and F: \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n      and G: \"\\<And>i. \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk> \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y\"\n      and pivot: \"k \\<in> Is \\<and> x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and> x \\<^bsub>(P k)\\<^esub>\\<prec> y\"\n      and cardP': \"card { i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x }\""], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (\\<And>P' k.\n        \\<lbrakk>profile A Is P';\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is; x \\<^bsub>(P' i)\\<^esub>\\<prec> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<And>i.\n            \\<lbrakk>i \\<in> Is;\n             x \\<^bsub>(P' i)\\<^esub>\\<approx> y\\<rbrakk>\n            \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<preceq> y;\n         k \\<in> Is \\<and>\n         x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n         x \\<^bsub>(P k)\\<^esub>\\<prec> y;\n         card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n         card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by - (drule positively_responsive_prefer_witness, auto)"], ["proof (state)\nthis:\n  profile A Is P'\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n  k \\<in> Is \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<prec> y", "from profileP' xyA cardP'"], ["proof (chain)\npicking this:\n  profile A Is P'\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}", "have \"x \\<^bsub>(scf P')\\<^esub>\\<approx> y\""], ["proof (prove)\nusing this:\n  profile A Is P'\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P' i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P' i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P')\\<^esub>\\<approx> y", "by - (rule anonymous_neutral_indifference, auto)"], ["proof (state)\nthis:\n  x \\<^bsub>(scf P')\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<prec> y", "with xyA F G pivot"], ["proof (chain)\npicking this:\n  hasw [x, y] A\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n  k \\<in> Is \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  x \\<^bsub>(scf P')\\<^esub>\\<approx> y", "show ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y] A\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  \\<lbrakk>?i \\<in> Is; x \\<^bsub>(P' ?i)\\<^esub>\\<approx> y\\<rbrakk>\n  \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<preceq> y\n  k \\<in> Is \\<and>\n  x \\<^bsub>(P' k)\\<^esub>\\<approx> y \\<and>\n  x \\<^bsub>(P k)\\<^esub>\\<prec> y\n  x \\<^bsub>(scf P')\\<^esub>\\<approx> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(scf P)\\<^esub>\\<prec> y", "by - (rule positively_responsiveD[OF positively_responsive profileP' profileP], auto)"], ["proof (state)\nthis:\n  x \\<^bsub>(scf P)\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma MMD_r2l:\n  assumes profileP: \"profile A Is P\"\n      and xyA: \"hasw [x,y] A\"\n  shows \"x \\<^bsub>(scf P)\\<^esub>\\<preceq> y \\<longleftrightarrow> x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "proof(cases rule: linorder_cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. ?x < ?y \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 2. ?x = ?y \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 3. ?y < ?x \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "assume \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } = card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (3 subgoals):\n 1. ?x < ?y \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 2. ?x = ?y \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 3. ?y < ?x \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "with profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "using anonymous_neutral_indifference"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card {i \\<in> Is. ?x \\<^bsub>(?P i)\\<^esub>\\<prec> ?y} =\n   card {i \\<in> Is. ?y \\<^bsub>(?P i)\\<^esub>\\<prec> ?x}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<approx> ?y\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "unfolding indifferent_pref_def MMD_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} =\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card {i \\<in> Is. ?x \\<^bsub>(?P i)\\<^esub>\\<prec> ?y} =\n   card {i \\<in> Is. ?y \\<^bsub>(?P i)\\<^esub>\\<prec> ?x}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<preceq> ?y \\<and>\n                    ?y \\<^bsub>(scf ?P)\\<^esub>\\<preceq> ?x\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>{(x, y).\n                card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n\ngoal (2 subgoals):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 2. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 2. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "assume \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } > card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (state)\nthis:\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (2 subgoals):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n 2. card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n    < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "with profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "using positively_responsive_prefer"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  < card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card {i \\<in> Is. ?y \\<^bsub>(?P i)\\<^esub>\\<prec> ?x}\n   < card {i \\<in> Is. ?x \\<^bsub>(?P i)\\<^esub>\\<prec> ?y}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<prec> ?y\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "unfolding strict_pref_def MMD_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card\n   {i \\<in> Is.\n    y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i}\n  < card\n     {i \\<in> Is.\n      x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card\n    {i \\<in> Is.\n     ?y \\<^bsub>(?P i)\\<^esub>\\<preceq> ?x \\<and> (?x, ?y) \\<notin> ?P i}\n   < card\n      {i \\<in> Is.\n       ?x \\<^bsub>(?P i)\\<^esub>\\<preceq> ?y \\<and>\n       (?y, ?x) \\<notin> ?P i}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<preceq> ?y \\<and>\n                    (?y, ?x) \\<notin> scf ?P\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>{(x, y).\n                card\n                 {i \\<in> Is.\n                  y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n                  (x, y) \\<notin> P i}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n                        (y, x) \\<notin> P i}}\\<^esub>\\<preceq> y)", "by simp"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "assume \"card { i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y } < card { i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x }\""], ["proof (state)\nthis:\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n    < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x} \\<Longrightarrow>\n    (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "with profileP xyA"], ["proof (chain)\npicking this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "using positively_responsive_prefer"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card {i \\<in> Is. x \\<^bsub>(P i)\\<^esub>\\<prec> y}\n  < card {i \\<in> Is. y \\<^bsub>(P i)\\<^esub>\\<prec> x}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card {i \\<in> Is. ?y \\<^bsub>(?P i)\\<^esub>\\<prec> ?x}\n   < card {i \\<in> Is. ?x \\<^bsub>(?P i)\\<^esub>\\<prec> ?y}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<prec> ?y\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)", "unfolding strict_pref_def MMD_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  hasw [x, y] A\n  card\n   {i \\<in> Is.\n    x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, x) \\<notin> P i}\n  < card\n     {i \\<in> Is.\n      y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, y) \\<notin> P i}\n  \\<lbrakk>profile A Is ?P; hasw [?x, ?y] A;\n   card\n    {i \\<in> Is.\n     ?y \\<^bsub>(?P i)\\<^esub>\\<preceq> ?x \\<and> (?x, ?y) \\<notin> ?P i}\n   < card\n      {i \\<in> Is.\n       ?x \\<^bsub>(?P i)\\<^esub>\\<preceq> ?y \\<and>\n       (?y, ?x) \\<notin> ?P i}\\<rbrakk>\n  \\<Longrightarrow> ?x \\<^bsub>(scf ?P)\\<^esub>\\<preceq> ?y \\<and>\n                    (?y, ?x) \\<notin> scf ?P\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n    (x \\<^bsub>{(x, y).\n                card\n                 {i \\<in> Is.\n                  y \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and>\n                  (x, y) \\<notin> P i}\n                \\<le> card\n                       {i \\<in> Is.\n                        x \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and>\n                        (y, x) \\<notin> P i}}\\<^esub>\\<preceq> y)", "by clarsimp"], ["proof (state)\nthis:\n  (x \\<^bsub>(scf P)\\<^esub>\\<preceq> y) =\n  (x \\<^bsub>(MMD Is P)\\<^esub>\\<preceq> y)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "text\\<open>May's original paper \\cite{May:1952} goes on to show that the\nconditions are independent by exhibiting choice rules that differ from\n@{term \"MMD\"} and satisfy the conditions remaining after any particular one\nis removed. I leave this to future work.\n\nMay also wrote a later article \\cite{May:1953} where he shows that the\nconditions are completely independent, i.e. for every partition of the\nconditions into two sets, there is a voting rule that satisfies one and not\nthe other.\n\nThere are many later papers that characterise MMD with different sets of\nconditions.\n\n\\<close>"], ["", "subsection\\<open>The Plurality Rule\\<close>"], ["", "text\\<open>Goodin and List \\cite{GoodinList:2006} show that May's original\nresult can be generalised to characterise plurality voting. The following\nshows that this result is a short step from Sen's much earlier\ngeneralisation.\n\n\\emph{Plurality voting} is a choice function that returns the alternative\nthat receives the most votes, or the set of such alternatives in the case of\na tie. Profiles are restricted to those where each individual casts a vote\nin favour of a single alternative.\\<close>"], ["", "type_synonym ('a, 'i) SVProfile = \"'i \\<Rightarrow> 'a\""], ["", "definition svprofile :: \"'a set \\<Rightarrow> 'i set \\<Rightarrow> ('a, 'i) SVProfile \\<Rightarrow> bool\" where\n  \"svprofile A Is F \\<equiv> Is \\<noteq> {} \\<and> F ` Is \\<subseteq> A\""], ["", "definition plurality_rule :: \"'a set \\<Rightarrow> 'i set \\<Rightarrow> ('a, 'i) SVProfile \\<Rightarrow> 'a set\" where\n  \"plurality_rule A Is F\n     \\<equiv> { x \\<in> A . \\<forall>y \\<in> A. card { i \\<in> Is . F i = x } \\<ge> card { i \\<in> Is . F i = y } }\""], ["", "text\\<open>By translating single-vote profiles into RPRs in the obvious way, the\nchoice function arising from @{term \"MMD\"} coincides with traditional\nplurality voting.\\<close>"], ["", "definition MMD_plurality_rule :: \"'a set \\<Rightarrow> 'i set \\<Rightarrow> ('a, 'i) Profile \\<Rightarrow> 'a set\" where\n  \"MMD_plurality_rule A Is P \\<equiv> choiceSet A (MMD Is P)\""], ["", "definition single_vote_to_RPR :: \"'a set \\<Rightarrow> 'a \\<Rightarrow> 'a RPR\" where\n  \"single_vote_to_RPR A a \\<equiv> { (a, x) |x. x \\<in> A } \\<union> (A - {a}) \\<times> (A - {a})\""], ["", "lemma single_vote_to_RPR_iff:\n  \"\\<lbrakk> a \\<in> A; x \\<in> A; a \\<noteq> x \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(single_vote_to_RPR A b)\\<^esub>\\<prec> x) \\<longleftrightarrow> (b = a)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<in> A; x \\<in> A; a \\<noteq> x\\<rbrakk>\n    \\<Longrightarrow> (a \\<^bsub>(single_vote_to_RPR A\n                                   b)\\<^esub>\\<prec> x) =\n                      (b = a)", "unfolding single_vote_to_RPR_def strict_pref_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>a \\<in> A; x \\<in> A; a \\<noteq> x\\<rbrakk>\n    \\<Longrightarrow> (a \\<^bsub>({(b, x) |x. x \\<in> A} \\<union>\n                                  (A - {b}) \\<times>\n                                  (A - {b}))\\<^esub>\\<preceq> x \\<and>\n                       (x, a)\n                       \\<notin> {(b, x) |x. x \\<in> A} \\<union>\n                                (A - {b}) \\<times> (A - {b})) =\n                      (b = a)", "by auto"], ["", "lemma plurality_rule_equiv:\n  \"plurality_rule A Is F = MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "have \"\\<lbrakk> x \\<in> A; y \\<in> A \\<rbrakk> \\<Longrightarrow>\n      (card {i \\<in> Is. F i = y} \\<le> card {i \\<in> Is. F i = x}) =\n      (card {i \\<in> Is. y \\<^bsub>(single_vote_to_RPR A (F i))\\<^esub>\\<prec> x}\n        \\<le> card {i \\<in> Is. x \\<^bsub>(single_vote_to_RPR A (F i))\\<^esub>\\<prec> y})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n    \\<Longrightarrow> (card {i \\<in> Is. F i = y}\n                       \\<le> card {i \\<in> Is. F i = x}) =\n                      (card\n                        {i \\<in> Is.\n                         y \\<^bsub>(single_vote_to_RPR A\n                                     (F i))\\<^esub>\\<prec> x}\n                       \\<le> card\n                              {i \\<in> Is.\n                               x \\<^bsub>(single_vote_to_RPR A\n     (F i))\\<^esub>\\<prec> y})", "by (cases \"x=y\", auto iff: single_vote_to_RPR_iff)"], ["proof (state)\nthis:\n  \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (card {i \\<in> Is. F i = y}\n                     \\<le> card {i \\<in> Is. F i = x}) =\n                    (card\n                      {i \\<in> Is.\n                       y \\<^bsub>(single_vote_to_RPR A\n                                   (F i))\\<^esub>\\<prec> x}\n                     \\<le> card\n                            {i \\<in> Is.\n                             x \\<^bsub>(single_vote_to_RPR A\n   (F i))\\<^esub>\\<prec> y})\n\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>?x2 \\<in> A; ?y2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (card {i \\<in> Is. F i = ?y2}\n                     \\<le> card {i \\<in> Is. F i = ?x2}) =\n                    (card\n                      {i \\<in> Is.\n                       ?y2 \\<^bsub>(single_vote_to_RPR A\n                                     (F i))\\<^esub>\\<prec> ?x2}\n                     \\<le> card\n                            {i \\<in> Is.\n                             ?x2 \\<^bsub>(single_vote_to_RPR A\n     (F i))\\<^esub>\\<prec> ?y2})\n\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> A; ?y2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (card {i \\<in> Is. F i = ?y2}\n                     \\<le> card {i \\<in> Is. F i = ?x2}) =\n                    (card\n                      {i \\<in> Is.\n                       ?y2 \\<^bsub>(single_vote_to_RPR A\n                                     (F i))\\<^esub>\\<prec> ?x2}\n                     \\<le> card\n                            {i \\<in> Is.\n                             ?x2 \\<^bsub>(single_vote_to_RPR A\n     (F i))\\<^esub>\\<prec> ?y2})\n\ngoal (1 subgoal):\n 1. plurality_rule A Is F =\n    MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)", "unfolding plurality_rule_def MMD_plurality_rule_def choiceSet_def MMD_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x2 \\<in> A; ?y2 \\<in> A\\<rbrakk>\n  \\<Longrightarrow> (card {i \\<in> Is. F i = ?y2}\n                     \\<le> card {i \\<in> Is. F i = ?x2}) =\n                    (card\n                      {i \\<in> Is.\n                       ?y2 \\<^bsub>(single_vote_to_RPR A\n                                     (F i))\\<^esub>\\<prec> ?x2}\n                     \\<le> card\n                            {i \\<in> Is.\n                             ?x2 \\<^bsub>(single_vote_to_RPR A\n     (F i))\\<^esub>\\<prec> ?y2})\n\ngoal (1 subgoal):\n 1. {x \\<in> A.\n     \\<forall>y\\<in>A.\n        card {i \\<in> Is. F i = y} \\<le> card {i \\<in> Is. F i = x}} =\n    {x \\<in> A.\n     \\<forall>y\\<in>A.\n        x \\<^bsub>{(x, y).\n                   card\n                    {i \\<in> Is.\n                     y \\<^bsub>((single_vote_to_RPR A \\<circ> F)\n                                 i)\\<^esub>\\<prec> x}\n                   \\<le> card\n                          {i \\<in> Is.\n                           x \\<^bsub>((single_vote_to_RPR A \\<circ> F)\n i)\\<^esub>\\<prec> y}}\\<^esub>\\<preceq> y}", "by auto"], ["proof (state)\nthis:\n  plurality_rule A Is F =\n  MMD_plurality_rule A Is (single_vote_to_RPR A \\<circ> F)\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>Thus it is clear that Sen's generalisation of May's result applies to\nthis case as well.\n\nTheir paper goes on to show how strengthening the anonymity condition gives\nrise to a characterisation of approval voting that strictly generalises\nMay's original theorem. As this requires some rearrangement of the proof I\nleave it to future work.\\<close>"], ["", "(*<*)"], ["", "end"], ["", "(*>*)"]]}