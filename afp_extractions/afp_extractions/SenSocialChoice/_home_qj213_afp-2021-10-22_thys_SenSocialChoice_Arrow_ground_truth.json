{"file_name": "/home/qj213/afp-2021-10-22/thys/SenSocialChoice/Arrow.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/SenSocialChoice", "problem_names": ["lemma decisive1_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and profileP: \"profile A Is P\"\n      and jIs: \"j \\<in> Is\"\n  obtains P'\n  where \"profile A Is P'\"\n    and \"x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P' j)\\<^esub>\\<prec> z\"\n    and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and> ((x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (x \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))\"", "lemma decisive1:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} x z\"", "lemma decisive2_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and profileP: \"profile A Is P\"\n      and jIs: \"j \\<in> Is\"\n  obtains P'\n    where \"profile A Is P'\"\n      and \"z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' j)\\<^esub>\\<prec> y\"\n      and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> ((y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (y \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))\"", "lemma decisive2:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} z y\"", "lemma decisive3:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x z\"\n  shows \"decisive swf A Is {j} y z\"", "lemma decisive4:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} y z\"\n  shows \"decisive swf A Is {j} y x\"", "lemma decisive5:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} y x\"", "lemma decisive6:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} y x\"\n  shows \"decisive swf A Is {j} y z\" \"decisive swf A Is {j} z x\" \"decisive swf A Is {j} x y\"", "lemma decisive7:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} y z\" \"decisive swf A Is {j} z x\" \"decisive swf A Is {j} x y\"", "lemma j_decisive_xy:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n      and uv: \"hasw [u,v] {x,y,z}\"\n  shows \"decisive swf A Is {j} u v\"", "lemma j_decisive:\n  assumes has3A: \"has 3 A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and xyA: \"hasw [x,y] A\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n      and uv: \"hasw [u,v] A\"\n  shows \"decisive swf A Is {j} u v\"", "lemma sd_imp_dictator:\n  assumes has3A: \"has 3 A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and uv: \"hasw [u,v] A\"\n      and sd: \"semidecisive swf A Is {j} u v\"\n  shows \"dictator swf A Is j\"", "lemma sd_exists_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and Vs: \"Is = V1 \\<union> V2 \\<union> V3\n                \\<and> V1 \\<inter> V2 = {} \\<and> V1 \\<inter> V3 = {} \\<and> V2 \\<inter> V3 = {}\"\n      and Is: \"Is \\<noteq> {}\"\n  obtains P\n    where \"profile A Is P\"\n      and \"\\<forall>i \\<in> V1. x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P i)\\<^esub>\\<prec> z\"\n      and \"\\<forall>i \\<in> V2. z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n      and \"\\<forall>i \\<in> V3. y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and> z \\<^bsub>(P i)\\<^esub>\\<prec> x\"", "lemma sd_exists:\n  assumes has3A: \"has 3 A\"\n      and finiteIs: \"finite Is\"\n      and twoIs: \"has 2 Is\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n  shows \"\\<exists>j u v. hasw [u,v] A \\<and> semidecisive swf A Is {j} u v\"", "theorem ArrowGeneralPossibility:\n  assumes has3A: \"has 3 A\"\n      and finiteIs: \"finite Is\"\n      and has2Is: \"has 2 Is\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n  obtains j where \"dictator swf A Is j\""], "translations": [["", "lemma decisive1_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and profileP: \"profile A Is P\"\n      and jIs: \"j \\<in> Is\"\n  obtains P'\n  where \"profile A Is P'\"\n    and \"x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P' j)\\<^esub>\\<prec> z\"\n    and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and> ((x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (x \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P'2\n 2. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    x \\<^bsub>(?P'2 j)\\<^esub>\\<prec> y \\<and>\n    y \\<^bsub>(?P'2 j)\\<^esub>\\<prec> z\n 3. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n                    y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n                       (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> z \\<and>\n                         (x \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> z) =\n                         (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> x) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)", "let ?P' = \"\\<lambda>i. (if i = j then ({ (x, u) | u. u \\<in> A }\n                               \\<union> { (y, u) | u. u \\<in> A - {x} }\n                               \\<union> { (z, u) | u. u \\<in> A - {x,y} })\n                           else ({ (y, u) | u. u \\<in> A }\n                               \\<union> { (x, u) | u. u \\<in> A - {y,z} }\n                               \\<union> { (z, u) | u. u \\<in> A - {x,y} }\n                               \\<union> (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x,z)} else {})\n                               \\<union> (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z,x)} else {})))\n                      \\<union> (A - {x,y,z}) \\<times> (A - {x,y,z})\""], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P'2\n 2. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    x \\<^bsub>(?P'2 j)\\<^esub>\\<prec> y \\<and>\n    y \\<^bsub>(?P'2 j)\\<^esub>\\<prec> z\n 3. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n                    y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n                       (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> z \\<and>\n                         (x \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> z) =\n                         (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> x) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)", "show \"profile A Is ?P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is\n     (\\<lambda>i.\n         (if i = j\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A - {x}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n               (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A - {x}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n               (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A - {x}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n               (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A - {x}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n               (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "show \"rpr A (?P' i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof(cases \"i = j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "case True"], ["proof (state)\nthis:\n  i = j\n\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i = j", "show ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i = j\n\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by - (rule rprI, simp_all add: trans_def, blast+)"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "case False"], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "hence ij: \"i \\<noteq> j\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j", "."], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. complete A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. refl_on A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 3. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from iIs profileP"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  profile A Is P", "have \"complete A (P i)\""], ["proof (prove)\nusing this:\n  i \\<in> Is\n  profile A Is P\n\ngoal (1 subgoal):\n 1. complete A (P i)", "by (blast dest: rpr_complete)"], ["proof (state)\nthis:\n  complete A (P i)\n\ngoal (3 subgoals):\n 1. complete A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. refl_on A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 3. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with ij"], ["proof (chain)\npicking this:\n  i \\<noteq> j\n  complete A (P i)", "show \"complete A (?P' i)\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n  complete A (P i)\n\ngoal (1 subgoal):\n 1. complete A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (simp add: complete_def, blast)"], ["proof (state)\nthis:\n  complete A\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (2 subgoals):\n 1. refl_on A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from iIs profileP"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  profile A Is P", "have \"refl_on A (P i)\""], ["proof (prove)\nusing this:\n  i \\<in> Is\n  profile A Is P\n\ngoal (1 subgoal):\n 1. refl_on A (P i)", "by (auto simp add: rpr_def)"], ["proof (state)\nthis:\n  refl_on A (P i)\n\ngoal (2 subgoals):\n 1. refl_on A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with has3A ij"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i \\<noteq> j\n  refl_on A (P i)", "show \"refl_on A (?P' i)\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i \\<noteq> j\n  refl_on A (P i)\n\ngoal (1 subgoal):\n 1. refl_on A\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (simp, blast)"], ["proof (state)\nthis:\n  refl_on A\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from ij has3A"], ["proof (chain)\npicking this:\n  i \\<noteq> j\n  hasw [x, y, z] A", "show \"trans (?P' i)\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. trans\n     ((if i = j\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A - {x}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}}\n       else {(y, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n            (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (clarsimp simp add: trans_def)"], ["proof (state)\nthis:\n  trans\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A - {x}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}}\n     else {(y, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "from profileP"], ["proof (chain)\npicking this:\n  profile A Is P", "show \"Is \\<noteq> {}\""], ["proof (prove)\nusing this:\n  profile A Is P\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "by (rule profile_non_empty)"], ["proof (state)\nthis:\n  Is \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  profile A Is\n   (\\<lambda>i.\n       (if i = j\n        then {(x, u) |u. u \\<in> A} \\<union>\n             {(y, u) |u. u \\<in> A - {x}} \\<union>\n             {(z, u) |u. u \\<in> A - {x, y}}\n        else {(y, u) |u. u \\<in> A} \\<union>\n             {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n             {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n             (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n              else {}) \\<union>\n             (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n              else {})) \\<union>\n       (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (2 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    x \\<^bsub>((if j = j\n                then {(x, u) |u. u \\<in> A} \\<union>\n                     {(y, u) |u. u \\<in> A - {x}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}}\n                else {(y, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                     (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> y \\<and>\n    y \\<^bsub>((if j = j\n                then {(x, u) |u. u \\<in> A} \\<union>\n                     {(y, u) |u. u \\<in> A - {x}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}}\n                else {(y, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                     (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times> (A - {x, y, z}))\\<^esub>\\<prec> z\n 2. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y \\<and>\n                    y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n                       (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> y \\<^bsub>((if i = j\n                                     then {(x, u) |u. u \\<in> A} \\<union>\n    {(y, u) |u. u \\<in> A - {x}} \\<union>\n    {(z, u) |u. u \\<in> A - {x, y}}\n                                     else {(y, u) |u. u \\<in> A} \\<union>\n    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n    {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n    (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)} else {}) \\<union>\n    (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)} else {})) \\<union>\n                                    (A - {x, y, z}) \\<times>\n                                    (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>((if i = j\n                                     then {(x, u) |u. u \\<in> A} \\<union>\n    {(y, u) |u. u \\<in> A - {x}} \\<union>\n    {(z, u) |u. u \\<in> A - {x, y}}\n                                     else {(y, u) |u. u \\<in> A} \\<union>\n    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n    {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n    (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)} else {}) \\<union>\n    (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)} else {})) \\<union>\n                                    (A - {x, y, z}) \\<times>\n                                    (A - {x, y, z}))\\<^esub>\\<prec> z \\<and>\n                         (x \\<^bsub>((if i = j\nthen {(x, u) |u. u \\<in> A} \\<union> {(y, u) |u. u \\<in> A - {x}} \\<union>\n     {(z, u) |u. u \\<in> A - {x, y}}\nelse {(y, u) |u. u \\<in> A} \\<union>\n     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n     (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)} else {}) \\<union>\n     (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)} else {})) \\<union>\n                                     (A - {x, y, z}) \\<times>\n                                     (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n                         (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>((if i = j\nthen {(x, u) |u. u \\<in> A} \\<union> {(y, u) |u. u \\<in> A - {x}} \\<union>\n     {(z, u) |u. u \\<in> A - {x, y}}\nelse {(y, u) |u. u \\<in> A} \\<union>\n     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n     (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)} else {}) \\<union>\n     (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)} else {})) \\<union>\n                                     (A - {x, y, z}) \\<times>\n                                     (A - {x, y, z}))\\<^esub>\\<preceq> x) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)", "from has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show \"x \\<^bsub>(?P' j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(?P' j)\\<^esub>\\<prec> z\"\n   and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> y \\<^bsub>(?P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(?P' i)\\<^esub>\\<prec> z \\<and> ((x \\<^bsub>(?P' i)\\<^esub>\\<preceq> z) = (x \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(?P' i)\\<^esub>\\<preceq> x) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. x \\<^bsub>((if j = j\n                then {(x, u) |u. u \\<in> A} \\<union>\n                     {(y, u) |u. u \\<in> A - {x}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}}\n                else {(y, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                     (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> y \\<and>\n    y \\<^bsub>((if j = j\n                then {(x, u) |u. u \\<in> A} \\<union>\n                     {(y, u) |u. u \\<in> A - {x}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}}\n                else {(y, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                     (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> z &&&\n    (\\<And>i.\n        i \\<noteq> j \\<Longrightarrow>\n        y \\<^bsub>((if i = j\n                    then {(x, u) |u. u \\<in> A} \\<union>\n                         {(y, u) |u. u \\<in> A - {x}} \\<union>\n                         {(z, u) |u. u \\<in> A - {x, y}}\n                    else {(y, u) |u. u \\<in> A} \\<union>\n                         {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                         {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                         (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                          then {(x, z)} else {}) \\<union>\n                         (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                          then {(z, x)} else {})) \\<union>\n                   (A - {x, y, z}) \\<times>\n                   (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n        y \\<^bsub>((if i = j\n                    then {(x, u) |u. u \\<in> A} \\<union>\n                         {(y, u) |u. u \\<in> A - {x}} \\<union>\n                         {(z, u) |u. u \\<in> A - {x, y}}\n                    else {(y, u) |u. u \\<in> A} \\<union>\n                         {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                         {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                         (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                          then {(x, z)} else {}) \\<union>\n                         (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                          then {(z, x)} else {})) \\<union>\n                   (A - {x, y, z}) \\<times>\n                   (A - {x, y, z}))\\<^esub>\\<prec> z \\<and>\n        (x \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n        (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n        (z \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> x) =\n        (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. (x \\<^bsub>((if j = j\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A - {x}} \\<union>\n                      {(z, u) |u. u \\<in> A - {x, y}}\n                 else {(y, u) |u. u \\<in> A} \\<union>\n                      {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                      {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                      (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                       else {}) \\<union>\n                      (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                       else {})) \\<union>\n                (A - {x, y, z}) \\<times>\n                (A - {x, y, z}))\\<^esub>\\<preceq> y \\<and>\n     (y, x)\n     \\<notin> (if j = j\n               then {(x, u) |u. u \\<in> A} \\<union>\n                    {(y, u) |u. u \\<in> A - {x}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                    (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n    y \\<^bsub>((if j = j\n                then {(x, u) |u. u \\<in> A} \\<union>\n                     {(y, u) |u. u \\<in> A - {x}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}}\n                else {(y, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                     (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<preceq> z \\<and>\n    (z, y)\n    \\<notin> (if j = j\n              then {(x, u) |u. u \\<in> A} \\<union>\n                   {(y, u) |u. u \\<in> A - {x}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}}\n              else {(y, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                   (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times> (A - {x, y, z}) &&&\n    (\\<And>i.\n        i \\<noteq> j \\<Longrightarrow>\n        (y \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> x \\<and>\n         (x, y)\n         \\<notin> (if i = j\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A - {x}} \\<union>\n                        {(z, u) |u. u \\<in> A - {x, y}}\n                   else {(y, u) |u. u \\<in> A} \\<union>\n                        {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                        {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                        (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                         else {}) \\<union>\n                        (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                         else {})) \\<union>\n                  (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n        (y \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> z \\<and>\n         (z, y)\n         \\<notin> (if i = j\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A - {x}} \\<union>\n                        {(z, u) |u. u \\<in> A - {x, y}}\n                   else {(y, u) |u. u \\<in> A} \\<union>\n                        {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                        {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                        (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(x, z)}\n                         else {}) \\<union>\n                        (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x then {(z, x)}\n                         else {})) \\<union>\n                  (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n        (x \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n        (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n        (z \\<^bsub>((if i = j\n                     then {(x, u) |u. u \\<in> A} \\<union>\n                          {(y, u) |u. u \\<in> A - {x}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}}\n                     else {(y, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                          (if x \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(x, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> x\n                           then {(z, x)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> x) =\n        (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))", "by auto"], ["proof (state)\nthis:\n  x \\<^bsub>((if j = j\n              then {(x, u) |u. u \\<in> A} \\<union>\n                   {(y, u) |u. u \\<in> A - {x}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}}\n              else {(y, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                   (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> y \\<and>\n  y \\<^bsub>((if j = j\n              then {(x, u) |u. u \\<in> A} \\<union>\n                   {(y, u) |u. u \\<in> A - {x}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}}\n              else {(y, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                   (if x \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(x, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> x then {(z, x)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times> (A - {x, y, z}))\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<Longrightarrow>\n  y \\<^bsub>((if ?i = j\n              then {(x, u) |u. u \\<in> A} \\<union>\n                   {(y, u) |u. u \\<in> A - {x}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}}\n              else {(y, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                   (if x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(x, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x then {(z, x)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>((if ?i = j\n              then {(x, u) |u. u \\<in> A} \\<union>\n                   {(y, u) |u. u \\<in> A - {x}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}}\n              else {(y, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                   (if x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(x, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x then {(z, x)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>((if ?i = j\n               then {(x, u) |u. u \\<in> A} \\<union>\n                    {(y, u) |u. u \\<in> A - {x}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                    (if x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(x, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x then {(z, x)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times>\n              (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>((if ?i = j\n               then {(x, u) |u. u \\<in> A} \\<union>\n                    {(y, u) |u. u \\<in> A - {x}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    {(z, u) |u. u \\<in> A - {x, y}} \\<union>\n                    (if x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(x, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x then {(z, x)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times>\n              (A - {x, y, z}))\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The key lemma: in the presence of Arrow's assumptions, an individual\nwho is semi-decisive for $x$ and $y$ is actually decisive for $x$ over any\nother alternative $z$. (This is where the quantification becomes important.) \n\\<close>"], ["", "lemma decisive1:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} x z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x z", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {j} \\<subseteq> Is\n 2. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "from sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} x y", "show jIs: \"{j} \\<subseteq> Is\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. {j} \\<subseteq> Is", "by blast"], ["proof (state)\nthis:\n  {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "fix P"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "assume profileP: \"profile A Is P\"\n     and jxzP: \"\\<And>i. i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z\""], ["proof (state)\nthis:\n  profile A Is P\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "from has3A profileP jIs"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  profile A Is P\n  {j} \\<subseteq> Is", "obtain P'\n    where profileP': \"profile A Is P'\"\n      and jxyzP': \"x \\<^bsub>(P' j)\\<^esub>\\<prec> y\" \"y \\<^bsub>(P' j)\\<^esub>\\<prec> z\"\n      and ixyzP': \"\\<And>i. i \\<noteq> j \\<longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and> ((x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (x \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> x))\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  profile A Is P\n  {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P'; x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         y \\<^bsub>(P' j)\\<^esub>\\<prec> z;\n         \\<And>i.\n            i \\<noteq> j \\<longrightarrow>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> z \\<and>\n            (x \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (x \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> x) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> x)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by - (rule decisive1_witness, blast+)"], ["proof (state)\nthis:\n  profile A Is P'\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "from iia"], ["proof (chain)\npicking this:\n  iia swf A Is", "have \"\\<And>a b. \\<lbrakk> a \\<in> {x, z}; b \\<in> {x, z} \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) = (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)\""], ["proof (prove)\nusing this:\n  iia swf A Is\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)", "proof(rule iiaE)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> {?x a b, ?y a b} \\<subseteq> A\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {?x a b, ?y a b}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {?x a b, ?y a b}\n 4. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {?x a b, ?y a b};\n        ba \\<in> {?x a b, ?y a b}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 6. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "from has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show \"{x,z} \\<subseteq> A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. {x, z} \\<subseteq> A", "by simp"], ["proof (state)\nthis:\n  {x, z} \\<subseteq> A\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix i"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix a b"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume ab: \"a \\<in> {x, z}\" \"b \\<in> {x, z}\""], ["proof (state)\nthis:\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "show \"(a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) = (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "proof(cases \"i = j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<noteq> j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case False"], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<noteq> j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with ab iIs ixyzP' profileP profileP' has3A"], ["proof (chain)\npicking this:\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  i \\<noteq> j", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding profile_def"], ["proof (prove)\nusing this:\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  hasw [x, y, z] A\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case True"], ["proof (state)\nthis:\n  i = j\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "from profileP' jIs jxyzP'"], ["proof (chain)\npicking this:\n  profile A Is P'\n  {j} \\<subseteq> Is\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z", "have \"x \\<^bsub>(P' j)\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  profile A Is P'\n  {j} \\<subseteq> Is\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(P' j)\\<^esub>\\<prec> z", "by (auto dest: rpr_less_trans)"], ["proof (state)\nthis:\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with True ab iIs jxzP profileP profileP' has3A"], ["proof (chain)\npicking this:\n  i = j\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> z\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> z", "show ?thesis"], ["proof (prove)\nusing this:\n  i = j\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P ?i)\\<^esub>\\<prec> z\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding profile_def strict_pref_def"], ["proof (prove)\nusing this:\n  i = j\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow>\n  x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> P ?i\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  hasw [x, y, z] A\n  x \\<^bsub>(P' j)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> P' j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (4 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "qed (simp_all add: profileP profileP')"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "have \"x \\<^bsub>(swf P')\\<^esub>\\<prec> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "from profileP' sd jxyzP' ixyzP'"], ["proof (chain)\npicking this:\n  profile A Is P'\n  semidecisive swf A Is {j} x y\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)", "have \"x \\<^bsub>(swf P')\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  profile A Is P'\n  semidecisive swf A Is {j} x y\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> y", "by (simp add: semidecisive_def)"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "moreover"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "from jxyzP' ixyzP'"], ["proof (chain)\npicking this:\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)", "have \"\\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  y \\<^bsub>(P' j)\\<^esub>\\<prec> z\n  ?i \\<noteq> j \\<longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z \\<and>\n  (x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (x \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> x)\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> z", "by (case_tac \"i=j\", auto)"], ["proof (state)\nthis:\n  ?i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "with wp profileP' has3A"], ["proof (chain)\npicking this:\n  weak_pareto swf A Is universal_domain\n  profile A Is P'\n  hasw [x, y, z] A\n  ?i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z", "have \"y \\<^bsub>(swf P')\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  weak_pareto swf A Is universal_domain\n  profile A Is P'\n  hasw [x, y, z] A\n  ?i \\<in> Is \\<Longrightarrow> y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. y \\<^bsub>(swf P')\\<^esub>\\<prec> z", "by (auto dest: weak_paretoD)"], ["proof (state)\nthis:\n  y \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "moreover"], ["proof (state)\nthis:\n  y \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "note SWF_rpr[OF swf] profileP'"], ["proof (state)\nthis:\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "ultimately"], ["proof (chain)\npicking this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  y \\<^bsub>(swf P')\\<^esub>\\<prec> z\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'", "show \"x \\<^bsub>(swf P')\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  y \\<^bsub>(swf P')\\<^esub>\\<prec> z\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "unfolding universal_domain_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  y \\<^bsub>(swf P')\\<^esub>\\<prec> z\n  profile A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "by (blast dest: rpr_less_trans)"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           x \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "show \"x \\<^bsub>(swf P)\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  x \\<^bsub>(swf P')\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> swf P'\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> swf P", "by blast"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> z\n\ngoal:\nNo subgoals!", "qed"], ["", "text\\<open>The witness for the second lemma: special agent $j$ strictly prefers\n$z$ to $x$ to $y$, and everyone else strictly prefers $z$ to $x$ and $y$ to\n$x$. (In some sense the last part is upside-down with respect to the first\nwitness.)\\<close>"], ["", "lemma decisive2_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and profileP: \"profile A Is P\"\n      and jIs: \"j \\<in> Is\"\n  obtains P'\n    where \"profile A Is P'\"\n      and \"z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P' j)\\<^esub>\\<prec> y\"\n      and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> ((y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (y \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P'2\n 2. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    z \\<^bsub>(?P'2 j)\\<^esub>\\<prec> x \\<and>\n    x \\<^bsub>(?P'2 j)\\<^esub>\\<prec> y\n 3. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         (y \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> z) =\n                         (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)", "let ?P' = \"\\<lambda>i. (if i = j then ({ (z, u) | u. u \\<in> A }\n                               \\<union> { (x, u) | u. u \\<in> A - {z} }\n                               \\<union> { (y, u) | u. u \\<in> A - {x,z} })\n                           else ({ (z, u) | u. u \\<in> A - {y} }\n                               \\<union> { (y, u) | u. u \\<in> A - {z} }\n                               \\<union> { (x, u) | u. u \\<in> A - {y,z} }\n                               \\<union> (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y,z)} else {})\n                               \\<union> (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z,y)} else {})))\n                      \\<union> (A - {x,y,z}) \\<times> (A - {x,y,z})\""], ["proof (state)\ngoal (3 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P'2\n 2. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    z \\<^bsub>(?P'2 j)\\<^esub>\\<prec> x \\<and>\n    x \\<^bsub>(?P'2 j)\\<^esub>\\<prec> y\n 3. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>(?P'2 i)\\<^esub>\\<prec> x \\<and>\n                         (y \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> z) =\n                         (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>(?P'2 i)\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)", "show \"profile A Is ?P'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is\n     (\\<lambda>i.\n         (if i = j\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {z}} \\<union>\n               {(y, u) |u. u \\<in> A - {x, z}}\n          else {(z, u) |u. u \\<in> A - {y}} \\<union>\n               {(y, u) |u. u \\<in> A - {z}} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {z}} \\<union>\n               {(y, u) |u. u \\<in> A - {x, z}}\n          else {(z, u) |u. u \\<in> A - {y}} \\<union>\n               {(y, u) |u. u \\<in> A - {z}} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {z}} \\<union>\n               {(y, u) |u. u \\<in> A - {x, z}}\n          else {(z, u) |u. u \\<in> A - {y}} \\<union>\n               {(y, u) |u. u \\<in> A - {z}} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i = j\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A - {z}} \\<union>\n               {(y, u) |u. u \\<in> A - {x, z}}\n          else {(z, u) |u. u \\<in> A - {y}} \\<union>\n               {(y, u) |u. u \\<in> A - {z}} \\<union>\n               {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n               (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                else {}) \\<union>\n               (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                else {})) \\<union>\n         (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. Is \\<noteq> {}", "show \"rpr A (?P' i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof(cases \"i = j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "case True"], ["proof (state)\nthis:\n  i = j\n\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i = j", "show ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i = j\n\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by - (rule rprI, simp_all add: trans_def, blast+)"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "case False"], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "hence ij: \"i \\<noteq> j\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j", "."], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. i \\<noteq> j \\<Longrightarrow>\n    rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. complete A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. refl_on A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 3. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from iIs profileP"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  profile A Is P", "have \"complete A (P i)\""], ["proof (prove)\nusing this:\n  i \\<in> Is\n  profile A Is P\n\ngoal (1 subgoal):\n 1. complete A (P i)", "by (auto simp add: rpr_def)"], ["proof (state)\nthis:\n  complete A (P i)\n\ngoal (3 subgoals):\n 1. complete A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. refl_on A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 3. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with ij"], ["proof (chain)\npicking this:\n  i \\<noteq> j\n  complete A (P i)", "show \"complete A (?P' i)\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n  complete A (P i)\n\ngoal (1 subgoal):\n 1. complete A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (simp add: complete_def, blast)"], ["proof (state)\nthis:\n  complete A\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (2 subgoals):\n 1. refl_on A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from iIs profileP"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  profile A Is P", "have \"refl_on A (P i)\""], ["proof (prove)\nusing this:\n  i \\<in> Is\n  profile A Is P\n\ngoal (1 subgoal):\n 1. refl_on A (P i)", "by (auto simp add: rpr_def)"], ["proof (state)\nthis:\n  refl_on A (P i)\n\ngoal (2 subgoals):\n 1. refl_on A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))\n 2. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "with has3A ij"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i \\<noteq> j\n  refl_on A (P i)", "show \"refl_on A (?P' i)\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i \\<noteq> j\n  refl_on A (P i)\n\ngoal (1 subgoal):\n 1. refl_on A\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (simp, blast)"], ["proof (state)\nthis:\n  refl_on A\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "from ij has3A"], ["proof (chain)\npicking this:\n  i \\<noteq> j\n  hasw [x, y, z] A", "show \"trans (?P' i)\""], ["proof (prove)\nusing this:\n  i \\<noteq> j\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. trans\n     ((if i = j\n       then {(z, u) |u. u \\<in> A} \\<union>\n            {(x, u) |u. u \\<in> A - {z}} \\<union>\n            {(y, u) |u. u \\<in> A - {x, z}}\n       else {(z, u) |u. u \\<in> A - {y}} \\<union>\n            {(y, u) |u. u \\<in> A - {z}} \\<union>\n            {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n            (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n             else {}) \\<union>\n            (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n             else {})) \\<union>\n      (A - {x, y, z}) \\<times> (A - {x, y, z}))", "by (clarsimp simp add: trans_def)"], ["proof (state)\nthis:\n  trans\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   ((if i = j\n     then {(z, u) |u. u \\<in> A} \\<union>\n          {(x, u) |u. u \\<in> A - {z}} \\<union>\n          {(y, u) |u. u \\<in> A - {x, z}}\n     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n          {(y, u) |u. u \\<in> A - {z}} \\<union>\n          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n           else {}) \\<union>\n          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n           else {})) \\<union>\n    (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "show \"Is \\<noteq> {}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "by (rule profile_non_empty[OF profileP])"], ["proof (state)\nthis:\n  Is \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  profile A Is\n   (\\<lambda>i.\n       (if i = j\n        then {(z, u) |u. u \\<in> A} \\<union>\n             {(x, u) |u. u \\<in> A - {z}} \\<union>\n             {(y, u) |u. u \\<in> A - {x, z}}\n        else {(z, u) |u. u \\<in> A - {y}} \\<union>\n             {(y, u) |u. u \\<in> A - {z}} \\<union>\n             {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n             (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n              else {}) \\<union>\n             (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n              else {})) \\<union>\n       (A - {x, y, z}) \\<times> (A - {x, y, z}))\n\ngoal (2 subgoals):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P';\n         z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<Longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    z \\<^bsub>((if j = j\n                then {(z, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {z}} \\<union>\n                     {(y, u) |u. u \\<in> A - {x, z}}\n                else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                     {(y, u) |u. u \\<in> A - {z}} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n    x \\<^bsub>((if j = j\n                then {(z, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {z}} \\<union>\n                     {(y, u) |u. u \\<in> A - {x, z}}\n                else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                     {(y, u) |u. u \\<in> A - {z}} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times> (A - {x, y, z}))\\<^esub>\\<prec> y\n 2. \\<And>i.\n       \\<lbrakk>\\<And>P'.\n                   \\<lbrakk>profile A Is P';\n                    z \\<^bsub>(P' j)\\<^esub>\\<prec> x \\<and>\n                    x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n                    \\<And>i.\n                       i \\<noteq> j \\<Longrightarrow>\n                       z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n                       (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n                       (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                       (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n                       (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n                   \\<Longrightarrow> thesis;\n        i \\<noteq> j\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>((if i = j\n                                     then {(z, u) |u. u \\<in> A} \\<union>\n    {(x, u) |u. u \\<in> A - {z}} \\<union>\n    {(y, u) |u. u \\<in> A - {x, z}}\n                                     else {(z, u) |u.\n     u \\<in> A - {y}} \\<union>\n    {(y, u) |u. u \\<in> A - {z}} \\<union>\n    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n    (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)} else {}) \\<union>\n    (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)} else {})) \\<union>\n                                    (A - {x, y, z}) \\<times>\n                                    (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n                         y \\<^bsub>((if i = j\n                                     then {(z, u) |u. u \\<in> A} \\<union>\n    {(x, u) |u. u \\<in> A - {z}} \\<union>\n    {(y, u) |u. u \\<in> A - {x, z}}\n                                     else {(z, u) |u.\n     u \\<in> A - {y}} \\<union>\n    {(y, u) |u. u \\<in> A - {z}} \\<union>\n    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n    (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)} else {}) \\<union>\n    (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)} else {})) \\<union>\n                                    (A - {x, y, z}) \\<times>\n                                    (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n                         (y \\<^bsub>((if i = j\nthen {(z, u) |u. u \\<in> A} \\<union> {(x, u) |u. u \\<in> A - {z}} \\<union>\n     {(y, u) |u. u \\<in> A - {x, z}}\nelse {(z, u) |u. u \\<in> A - {y}} \\<union>\n     {(y, u) |u. u \\<in> A - {z}} \\<union>\n     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n     (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)} else {}) \\<union>\n     (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)} else {})) \\<union>\n                                     (A - {x, y, z}) \\<times>\n                                     (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n                         (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n                         (z \\<^bsub>((if i = j\nthen {(z, u) |u. u \\<in> A} \\<union> {(x, u) |u. u \\<in> A - {z}} \\<union>\n     {(y, u) |u. u \\<in> A - {x, z}}\nelse {(z, u) |u. u \\<in> A - {y}} \\<union>\n     {(y, u) |u. u \\<in> A - {z}} \\<union>\n     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n     (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)} else {}) \\<union>\n     (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)} else {})) \\<union>\n                                     (A - {x, y, z}) \\<times>\n                                     (A - {x, y, z}))\\<^esub>\\<preceq> y) =\n                         (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)", "from has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show \"z \\<^bsub>(?P' j)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(?P' j)\\<^esub>\\<prec> y\"\n   and \"\\<And>i. i \\<noteq> j \\<Longrightarrow> z \\<^bsub>(?P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(?P' i)\\<^esub>\\<prec> x \\<and> ((y \\<^bsub>(?P' i)\\<^esub>\\<preceq> z) = (y \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(?P' i)\\<^esub>\\<preceq> y) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. z \\<^bsub>((if j = j\n                then {(z, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {z}} \\<union>\n                     {(y, u) |u. u \\<in> A - {x, z}}\n                else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                     {(y, u) |u. u \\<in> A - {z}} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n    x \\<^bsub>((if j = j\n                then {(z, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {z}} \\<union>\n                     {(y, u) |u. u \\<in> A - {x, z}}\n                else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                     {(y, u) |u. u \\<in> A - {z}} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<prec> y &&&\n    (\\<And>i.\n        i \\<noteq> j \\<Longrightarrow>\n        z \\<^bsub>((if i = j\n                    then {(z, u) |u. u \\<in> A} \\<union>\n                         {(x, u) |u. u \\<in> A - {z}} \\<union>\n                         {(y, u) |u. u \\<in> A - {x, z}}\n                    else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                         {(y, u) |u. u \\<in> A - {z}} \\<union>\n                         {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                         (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                          then {(y, z)} else {}) \\<union>\n                         (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                          then {(z, y)} else {})) \\<union>\n                   (A - {x, y, z}) \\<times>\n                   (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n        y \\<^bsub>((if i = j\n                    then {(z, u) |u. u \\<in> A} \\<union>\n                         {(x, u) |u. u \\<in> A - {z}} \\<union>\n                         {(y, u) |u. u \\<in> A - {x, z}}\n                    else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                         {(y, u) |u. u \\<in> A - {z}} \\<union>\n                         {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                         (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                          then {(y, z)} else {}) \\<union>\n                         (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                          then {(z, y)} else {})) \\<union>\n                   (A - {x, y, z}) \\<times>\n                   (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n        (y \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n        (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n        (z \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> y) =\n        (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. (z \\<^bsub>((if j = j\n                 then {(z, u) |u. u \\<in> A} \\<union>\n                      {(x, u) |u. u \\<in> A - {z}} \\<union>\n                      {(y, u) |u. u \\<in> A - {x, z}}\n                 else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                      {(y, u) |u. u \\<in> A - {z}} \\<union>\n                      {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                      (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                       else {}) \\<union>\n                      (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                       else {})) \\<union>\n                (A - {x, y, z}) \\<times>\n                (A - {x, y, z}))\\<^esub>\\<preceq> x \\<and>\n     (x, z)\n     \\<notin> (if j = j\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {z}} \\<union>\n                    {(y, u) |u. u \\<in> A - {x, z}}\n               else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                    {(y, u) |u. u \\<in> A - {z}} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n    x \\<^bsub>((if j = j\n                then {(z, u) |u. u \\<in> A} \\<union>\n                     {(x, u) |u. u \\<in> A - {z}} \\<union>\n                     {(y, u) |u. u \\<in> A - {x, z}}\n                else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                     {(y, u) |u. u \\<in> A - {z}} \\<union>\n                     {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                     (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                      else {}) \\<union>\n                     (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                      else {})) \\<union>\n               (A - {x, y, z}) \\<times>\n               (A - {x, y, z}))\\<^esub>\\<preceq> y \\<and>\n    (y, x)\n    \\<notin> (if j = j\n              then {(z, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {z}} \\<union>\n                   {(y, u) |u. u \\<in> A - {x, z}}\n              else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                   {(y, u) |u. u \\<in> A - {z}} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times> (A - {x, y, z}) &&&\n    (\\<And>i.\n        i \\<noteq> j \\<Longrightarrow>\n        (z \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> x \\<and>\n         (x, z)\n         \\<notin> (if i = j\n                   then {(z, u) |u. u \\<in> A} \\<union>\n                        {(x, u) |u. u \\<in> A - {z}} \\<union>\n                        {(y, u) |u. u \\<in> A - {x, z}}\n                   else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                        {(y, u) |u. u \\<in> A - {z}} \\<union>\n                        {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                        (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                         else {}) \\<union>\n                        (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                         else {})) \\<union>\n                  (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n        (y \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> x \\<and>\n         (x, y)\n         \\<notin> (if i = j\n                   then {(z, u) |u. u \\<in> A} \\<union>\n                        {(x, u) |u. u \\<in> A - {z}} \\<union>\n                        {(y, u) |u. u \\<in> A - {x, z}}\n                   else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                        {(y, u) |u. u \\<in> A - {z}} \\<union>\n                        {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                        (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z then {(y, z)}\n                         else {}) \\<union>\n                        (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y then {(z, y)}\n                         else {})) \\<union>\n                  (A - {x, y, z}) \\<times> (A - {x, y, z})) \\<and>\n        (y \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n        (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n        (z \\<^bsub>((if i = j\n                     then {(z, u) |u. u \\<in> A} \\<union>\n                          {(x, u) |u. u \\<in> A - {z}} \\<union>\n                          {(y, u) |u. u \\<in> A - {x, z}}\n                     else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                          {(y, u) |u. u \\<in> A - {z}} \\<union>\n                          {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                          (if y \\<^bsub>(P i)\\<^esub>\\<preceq> z\n                           then {(y, z)} else {}) \\<union>\n                          (if z \\<^bsub>(P i)\\<^esub>\\<preceq> y\n                           then {(z, y)} else {})) \\<union>\n                    (A - {x, y, z}) \\<times>\n                    (A - {x, y, z}))\\<^esub>\\<preceq> y) =\n        (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))", "by auto"], ["proof (state)\nthis:\n  z \\<^bsub>((if j = j\n              then {(z, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {z}} \\<union>\n                   {(y, u) |u. u \\<in> A - {x, z}}\n              else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                   {(y, u) |u. u \\<in> A - {z}} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n  x \\<^bsub>((if j = j\n              then {(z, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {z}} \\<union>\n                   {(y, u) |u. u \\<in> A - {x, z}}\n              else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                   {(y, u) |u. u \\<in> A - {z}} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   (if y \\<^bsub>(P j)\\<^esub>\\<preceq> z then {(y, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P j)\\<^esub>\\<preceq> y then {(z, y)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times> (A - {x, y, z}))\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<Longrightarrow>\n  z \\<^bsub>((if ?i = j\n              then {(z, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {z}} \\<union>\n                   {(y, u) |u. u \\<in> A - {x, z}}\n              else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                   {(y, u) |u. u \\<in> A - {z}} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   (if y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(y, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y then {(z, y)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>((if ?i = j\n              then {(z, u) |u. u \\<in> A} \\<union>\n                   {(x, u) |u. u \\<in> A - {z}} \\<union>\n                   {(y, u) |u. u \\<in> A - {x, z}}\n              else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                   {(y, u) |u. u \\<in> A - {z}} \\<union>\n                   {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                   (if y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(y, z)}\n                    else {}) \\<union>\n                   (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y then {(z, y)}\n                    else {})) \\<union>\n             (A - {x, y, z}) \\<times>\n             (A - {x, y, z}))\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>((if ?i = j\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {z}} \\<union>\n                    {(y, u) |u. u \\<in> A - {x, z}}\n               else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                    {(y, u) |u. u \\<in> A - {z}} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    (if y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(y, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y then {(z, y)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times>\n              (A - {x, y, z}))\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>((if ?i = j\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A - {z}} \\<union>\n                    {(y, u) |u. u \\<in> A - {x, z}}\n               else {(z, u) |u. u \\<in> A - {y}} \\<union>\n                    {(y, u) |u. u \\<in> A - {z}} \\<union>\n                    {(x, u) |u. u \\<in> A - {y, z}} \\<union>\n                    (if y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z then {(y, z)}\n                     else {}) \\<union>\n                    (if z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y then {(z, y)}\n                     else {})) \\<union>\n              (A - {x, y, z}) \\<times>\n              (A - {x, y, z}))\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decisive2:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} z y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} z y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {j} \\<subseteq> Is\n 2. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} x y", "show jIs: \"{j} \\<subseteq> Is\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. {j} \\<subseteq> Is", "by blast"], ["proof (state)\nthis:\n  {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "fix P"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "assume profileP: \"profile A Is P\"\n     and jyzP: \"\\<And>i. i \\<in> {j} \\<Longrightarrow> z \\<^bsub>(P i)\\<^esub>\\<prec> y\""], ["proof (state)\nthis:\n  profile A Is P\n  ?i \\<in> {j} \\<Longrightarrow> z \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from has3A profileP jIs"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  profile A Is P\n  {j} \\<subseteq> Is", "obtain P'\n    where profileP': \"profile A Is P'\"\n      and jxyzP': \"z \\<^bsub>(P' j)\\<^esub>\\<prec> x\" \"x \\<^bsub>(P' j)\\<^esub>\\<prec> y\"\n      and ixyzP': \"\\<And>i. i \\<noteq> j \\<longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and> ((y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) = (y \\<^bsub>(P i)\\<^esub>\\<preceq> z)) \\<and> ((z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) = (z \\<^bsub>(P i)\\<^esub>\\<preceq> y))\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  profile A Is P\n  {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>profile A Is P'; z \\<^bsub>(P' j)\\<^esub>\\<prec> x;\n         x \\<^bsub>(P' j)\\<^esub>\\<prec> y;\n         \\<And>i.\n            i \\<noteq> j \\<longrightarrow>\n            z \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            y \\<^bsub>(P' i)\\<^esub>\\<prec> x \\<and>\n            (y \\<^bsub>(P' i)\\<^esub>\\<preceq> z) =\n            (y \\<^bsub>(P i)\\<^esub>\\<preceq> z) \\<and>\n            (z \\<^bsub>(P' i)\\<^esub>\\<preceq> y) =\n            (z \\<^bsub>(P i)\\<^esub>\\<preceq> y)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by - (rule decisive2_witness, blast+)"], ["proof (state)\nthis:\n  profile A Is P'\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from iia"], ["proof (chain)\npicking this:\n  iia swf A Is", "have \"\\<And>a b. \\<lbrakk> a \\<in> {y, z}; b \\<in> {y, z} \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) = (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)\""], ["proof (prove)\nusing this:\n  iia swf A Is\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)", "proof(rule iiaE)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> {?x a b, ?y a b} \\<subseteq> A\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {?x a b, ?y a b}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {?x a b, ?y a b}\n 4. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {?x a b, ?y a b};\n        ba \\<in> {?x a b, ?y a b}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 6. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "from has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show \"{y,z} \\<subseteq> A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. {y, z} \\<subseteq> A", "by simp"], ["proof (state)\nthis:\n  {y, z} \\<subseteq> A\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix i"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix a b"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume ab: \"a \\<in> {y, z}\" \"b \\<in> {y, z}\""], ["proof (state)\nthis:\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "show \"(a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) = (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "proof(cases \"i = j\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<noteq> j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case False"], ["proof (state)\nthis:\n  i \\<noteq> j\n\ngoal (2 subgoals):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<noteq> j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with ab iIs ixyzP' profileP profileP' has3A"], ["proof (chain)\npicking this:\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  i \\<noteq> j", "show ?thesis"], ["proof (prove)\nusing this:\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding profile_def"], ["proof (prove)\nusing this:\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  hasw [x, y, z] A\n  i \\<noteq> j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case True"], ["proof (state)\nthis:\n  i = j\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "from profileP' jIs jxyzP'"], ["proof (chain)\npicking this:\n  profile A Is P'\n  {j} \\<subseteq> Is\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y", "have \"z \\<^bsub>(P' j)\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  profile A Is P'\n  {j} \\<subseteq> Is\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(P' j)\\<^esub>\\<prec> y", "by (auto dest: rpr_less_trans)"], ["proof (state)\nthis:\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. i = j \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with True ab iIs jyzP profileP profileP' has3A"], ["proof (chain)\npicking this:\n  i = j\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow> z \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> y", "show ?thesis"], ["proof (prove)\nusing this:\n  i = j\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow> z \\<^bsub>(P ?i)\\<^esub>\\<prec> y\n  profile A Is P\n  profile A Is P'\n  hasw [x, y, z] A\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding profile_def strict_pref_def"], ["proof (prove)\nusing this:\n  i = j\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  i \\<in> Is\n  ?i \\<in> {j} \\<Longrightarrow>\n  z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> P ?i\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  hasw [x, y, z] A\n  z \\<^bsub>(P' j)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> P' j\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (4 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "qed (simp_all add: profileP profileP')"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "have \"z \\<^bsub>(swf P')\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "from profileP' sd jxyzP' ixyzP'"], ["proof (chain)\npicking this:\n  profile A Is P'\n  semidecisive swf A Is {j} x y\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)", "have \"x \\<^bsub>(swf P')\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  profile A Is P'\n  semidecisive swf A Is {j} x y\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> y", "by (simp add: semidecisive_def)"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "moreover"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "from jxyzP' ixyzP'"], ["proof (chain)\npicking this:\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)", "have \"\\<And>i. i \\<in> Is \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  z \\<^bsub>(P' j)\\<^esub>\\<prec> x\n  x \\<^bsub>(P' j)\\<^esub>\\<prec> y\n  ?i \\<noteq> j \\<longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> x \\<and>\n  (y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z) =\n  (y \\<^bsub>(P ?i)\\<^esub>\\<preceq> z) \\<and>\n  (z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y) =\n  (z \\<^bsub>(P ?i)\\<^esub>\\<preceq> y)\n\ngoal (1 subgoal):\n 1. \\<And>i. i \\<in> Is \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x", "by (case_tac \"i=j\", auto)"], ["proof (state)\nthis:\n  ?i \\<in> Is \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "with wp profileP' has3A"], ["proof (chain)\npicking this:\n  weak_pareto swf A Is universal_domain\n  profile A Is P'\n  hasw [x, y, z] A\n  ?i \\<in> Is \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x", "have \"z \\<^bsub>(swf P')\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  weak_pareto swf A Is universal_domain\n  profile A Is P'\n  hasw [x, y, z] A\n  ?i \\<in> Is \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> x", "by (auto dest: weak_paretoD)"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "moreover"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "note SWF_rpr[OF swf] profileP'"], ["proof (state)\nthis:\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "ultimately"], ["proof (chain)\npicking this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> x\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'", "show \"z \\<^bsub>(swf P')\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> x\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "unfolding universal_domain_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> y\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> x\n  profile A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n  profile A Is P'\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "by (blast dest: rpr_less_trans)"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "show \"z \\<^bsub>(swf P)\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n  z \\<^bsub>(swf P')\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> swf P'\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> swf P", "by blast"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P)\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The following results permute $x$, $y$ and $z$ to show how\ndecisiveness can be obtained from semi-decisiveness in all cases. Again,\nquite tedious.\\<close>"], ["", "lemma decisive3:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x z\"\n  shows \"decisive swf A Is {j} y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z", "using has3A decisive2[OF _ iia swf wp sd]"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  hasw [x, z, ?z] A \\<Longrightarrow> decisive swf A Is {j} ?z z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z", "by (simp, blast)"], ["", "lemma decisive4:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} y z\"\n  shows \"decisive swf A Is {j} y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "using has3A decisive1[OF _ iia swf wp sd]"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  hasw [y, z, ?z] A \\<Longrightarrow> decisive swf A Is {j} y ?z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "by (simp, blast)"], ["", "lemma decisive5:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} y x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "from sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} x y", "have \"decisive swf A Is {j} x z\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x z", "by (rule decisive1[OF has3A iia swf wp])"], ["proof (state)\nthis:\n  decisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "hence \"semidecisive swf A Is {j} x z\""], ["proof (prove)\nusing this:\n  decisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. semidecisive swf A Is {j} x z", "by (rule d_imp_sd)"], ["proof (state)\nthis:\n  semidecisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "hence \"decisive swf A Is {j} y z\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z", "by (rule decisive3[OF has3A iia swf wp])"], ["proof (state)\nthis:\n  decisive swf A Is {j} y z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "hence \"semidecisive swf A Is {j} y z\""], ["proof (prove)\nusing this:\n  decisive swf A Is {j} y z\n\ngoal (1 subgoal):\n 1. semidecisive swf A Is {j} y z", "by (rule d_imp_sd)"], ["proof (state)\nthis:\n  semidecisive swf A Is {j} y z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "thus \"decisive swf A Is {j} y x\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} y z\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "by (rule decisive4[OF has3A iia swf wp])"], ["proof (state)\nthis:\n  decisive swf A Is {j} y x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decisive6:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} y x\"\n  shows \"decisive swf A Is {j} y z\" \"decisive swf A Is {j} z x\" \"decisive swf A Is {j} x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z &&&\n    decisive swf A Is {j} z x &&& decisive swf A Is {j} x y", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. decisive swf A Is {j} y z\n 2. decisive swf A Is {j} z x\n 3. decisive swf A Is {j} x y", "from has3A"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "have has3A': \"hasw [y,x,z] A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. hasw [y, x, z] A", "by auto"], ["proof (state)\nthis:\n  hasw [y, x, z] A\n\ngoal (3 subgoals):\n 1. decisive swf A Is {j} y z\n 2. decisive swf A Is {j} z x\n 3. decisive swf A Is {j} x y", "show \"decisive swf A Is {j} y z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z", "by (rule decisive1[OF has3A' iia swf wp sd])"], ["proof (state)\nthis:\n  decisive swf A Is {j} y z\n\ngoal (2 subgoals):\n 1. decisive swf A Is {j} z x\n 2. decisive swf A Is {j} x y", "show \"decisive swf A Is {j} z x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} z x", "by (rule decisive2[OF has3A' iia swf wp sd])"], ["proof (state)\nthis:\n  decisive swf A Is {j} z x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x y", "show \"decisive swf A Is {j} x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x y", "by (rule decisive5[OF has3A' iia swf wp sd])"], ["proof (state)\nthis:\n  decisive swf A Is {j} x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma decisive7:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n  shows \"decisive swf A Is {j} y z\" \"decisive swf A Is {j} z x\" \"decisive swf A Is {j} x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z &&&\n    decisive swf A Is {j} z x &&& decisive swf A Is {j} x y", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. decisive swf A Is {j} y z\n 2. decisive swf A Is {j} z x\n 3. decisive swf A Is {j} x y", "from sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} x y", "have \"decisive swf A Is {j} y x\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y x", "by (rule decisive5[OF has3A iia swf wp])"], ["proof (state)\nthis:\n  decisive swf A Is {j} y x\n\ngoal (3 subgoals):\n 1. decisive swf A Is {j} y z\n 2. decisive swf A Is {j} z x\n 3. decisive swf A Is {j} x y", "hence \"semidecisive swf A Is {j} y x\""], ["proof (prove)\nusing this:\n  decisive swf A Is {j} y x\n\ngoal (1 subgoal):\n 1. semidecisive swf A Is {j} y x", "by (rule d_imp_sd)"], ["proof (state)\nthis:\n  semidecisive swf A Is {j} y x\n\ngoal (3 subgoals):\n 1. decisive swf A Is {j} y z\n 2. decisive swf A Is {j} z x\n 3. decisive swf A Is {j} x y", "thus \"decisive swf A Is {j} y z\" \"decisive swf A Is {j} z x\" \"decisive swf A Is {j} x y\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} y x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} y z &&&\n    decisive swf A Is {j} z x &&& decisive swf A Is {j} x y", "by (rule decisive6[OF has3A iia swf wp])+"], ["proof (state)\nthis:\n  decisive swf A Is {j} y z\n  decisive swf A Is {j} z x\n  decisive swf A Is {j} x y\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma j_decisive_xy:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n      and uv: \"hasw [u,v] {x,y,z}\"\n  shows \"decisive swf A Is {j} u v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "using uv decisive1[OF has3A iia swf wp sd]\n           decisive2[OF has3A iia swf wp sd]\n           decisive5[OF has3A iia swf wp sd]\n           decisive7[OF has3A iia swf wp sd]"], ["proof (prove)\nusing this:\n  hasw [u, v] {x, y, z}\n  decisive swf A Is {j} x z\n  decisive swf A Is {j} z y\n  decisive swf A Is {j} y x\n  decisive swf A Is {j} y z\n  decisive swf A Is {j} z x\n  decisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (simp, blast)"], ["", "lemma j_decisive:\n  assumes has3A: \"has 3 A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and xyA: \"hasw [x,y] A\"\n      and sd: \"semidecisive swf A Is {j} x y\"\n      and uv: \"hasw [u,v] A\"\n  shows \"decisive swf A Is {j} u v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "from has_extend_witness'[OF has3A xyA]"], ["proof (chain)\npicking this:\n  length [x, y] < 3 \\<Longrightarrow> \\<exists>xa. hasw [xa, x, y] A", "obtain z where xyzA: \"hasw [x,y,z] A\""], ["proof (prove)\nusing this:\n  length [x, y] < 3 \\<Longrightarrow> \\<exists>xa. hasw [xa, x, y] A\n\ngoal (1 subgoal):\n 1. (\\<And>z. hasw [x, y, z] A \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume ux: \"u = x\" and vy: \"v = y\""], ["proof (state)\nthis:\n  u = x\n  v = y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with xyzA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = x\n  v = y", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = x\n  v = y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy)"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v = y\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v = y\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v = y\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume ux: \"u = x\" and vNEy: \"v \\<noteq> y\""], ["proof (state)\nthis:\n  u = x\n  v \\<noteq> y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uv xyA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = x\n  v \\<noteq> y", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = x\n  v \\<noteq> y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by(auto intro: j_decisive_xy[of x y])"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v \\<noteq> y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v \\<noteq> y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u = x; v \\<noteq> y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume uy: \"u = y\" and vx: \"v = x\""], ["proof (state)\nthis:\n  u = y\n  v = x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with xyzA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = y\n  v = x", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = y\n  v = x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy)"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v = x\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v = x\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v = x\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume uy: \"u = y\" and vNEx: \"v \\<noteq> x\""], ["proof (state)\nthis:\n  u = y\n  v \\<noteq> x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uv xyA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = y\n  v \\<noteq> x", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u = y\n  v \\<noteq> x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy)"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v \\<noteq> x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v \\<noteq> x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u = y; v \\<noteq> x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume uNExy: \"u \\<notin> {x,y}\" and vx: \"v = x\""], ["proof (state)\nthis:\n  u \\<notin> {x, y}\n  v = x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uv xyA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v = x", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v = x\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy[of x y])"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume uNExy: \"u \\<notin> {x,y}\" and vy: \"v = y\""], ["proof (state)\nthis:\n  u \\<notin> {x, y}\n  v = y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uv xyA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v = y", "have ?thesis"], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v = y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy[of x y])"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "{"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v = y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "assume uNExy: \"u \\<notin> {x,y}\" and vNExy: \"v \\<notin> {x,y}\""], ["proof (state)\nthis:\n  u \\<notin> {x, y}\n  v \\<notin> {x, y}\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uv xyA iia swf wp sd"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v \\<notin> {x, y}", "have \"decisive swf A Is {j} x u\""], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x y\n  u \\<notin> {x, y}\n  v \\<notin> {x, y}\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x u", "by (auto intro: j_decisive_xy[where x=x and z=u])"], ["proof (state)\nthis:\n  decisive swf A Is {j} x u\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "hence sdxu: \"semidecisive swf A Is {j} x u\""], ["proof (prove)\nusing this:\n  decisive swf A Is {j} x u\n\ngoal (1 subgoal):\n 1. semidecisive swf A Is {j} x u", "by (rule d_imp_sd)"], ["proof (state)\nthis:\n  semidecisive swf A Is {j} x u\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "with uNExy vNExy uv xyA iia swf wp"], ["proof (chain)\npicking this:\n  u \\<notin> {x, y}\n  v \\<notin> {x, y}\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x u", "have ?thesis"], ["proof (prove)\nusing this:\n  u \\<notin> {x, y}\n  v \\<notin> {x, y}\n  hasw [u, v] A\n  hasw [x, y] A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  semidecisive swf A Is {j} x u\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by (auto intro: j_decisive_xy[of x])"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "}"], ["proof (state)\nthis:\n  \\<lbrakk>u \\<notin> {x, y}; v \\<notin> {x, y}\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>u = x; v = y\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = x; v \\<noteq> y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = y; v = x\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = y; v \\<noteq> x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v = x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v = y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v \\<notin> {x, y}\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>u = x; v = y\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = x; v \\<noteq> y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = y; v = x\\<rbrakk> \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u = y; v \\<noteq> x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v = x\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v = y\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n  \\<lbrakk>u \\<notin> {x, y}; v \\<notin> {x, y}\\<rbrakk>\n  \\<Longrightarrow> decisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} u v", "by blast"], ["proof (state)\nthis:\n  decisive swf A Is {j} u v\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>The first result: if $j$ is semidecisive for some alternatives $u$\nand $v$, then they are actually a dictator.\\<close>"], ["", "lemma sd_imp_dictator:\n  assumes has3A: \"has 3 A\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n      and uv: \"hasw [u,v] A\"\n      and sd: \"semidecisive swf A Is {j} u v\"\n  shows \"dictator swf A Is j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dictator swf A Is j", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. j \\<in> Is\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> decisive swf A Is {j} x y", "fix x y"], ["proof (state)\ngoal (2 subgoals):\n 1. j \\<in> Is\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> decisive swf A Is {j} x y", "assume x: \"x \\<in> A\" and y: \"y \\<in> A\""], ["proof (state)\nthis:\n  x \\<in> A\n  y \\<in> A\n\ngoal (2 subgoals):\n 1. j \\<in> Is\n 2. \\<And>x y.\n       \\<lbrakk>x \\<in> A; y \\<in> A\\<rbrakk>\n       \\<Longrightarrow> decisive swf A Is {j} x y", "show \"decisive swf A Is {j} x y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x y", "proof(cases \"x = y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> decisive swf A Is {j} x y\n 2. x \\<noteq> y \\<Longrightarrow> decisive swf A Is {j} x y", "case True"], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> decisive swf A Is {j} x y\n 2. x \\<noteq> y \\<Longrightarrow> decisive swf A Is {j} x y", "with sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} u v\n  x = y", "show \"decisive swf A Is {j} x y\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} u v\n  x = y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x y", "by (blast intro: d_refl)"], ["proof (state)\nthis:\n  decisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> decisive swf A Is {j} x y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> decisive swf A Is {j} x y", "case False"], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow> decisive swf A Is {j} x y", "with x y iia swf wp has3A uv sd"], ["proof (chain)\npicking this:\n  x \\<in> A\n  y \\<in> A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  has 3 A\n  hasw [u, v] A\n  semidecisive swf A Is {j} u v\n  x \\<noteq> y", "show \"decisive swf A Is {j} x y\""], ["proof (prove)\nusing this:\n  x \\<in> A\n  y \\<in> A\n  iia swf A Is\n  SWF swf A Is universal_domain\n  weak_pareto swf A Is universal_domain\n  has 3 A\n  hasw [u, v] A\n  semidecisive swf A Is {j} u v\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. decisive swf A Is {j} x y", "by (auto intro: j_decisive)"], ["proof (state)\nthis:\n  decisive swf A Is {j} x y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  decisive swf A Is {j} x y\n\ngoal (1 subgoal):\n 1. j \\<in> Is", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. j \\<in> Is", "from sd"], ["proof (chain)\npicking this:\n  semidecisive swf A Is {j} u v", "show \"j \\<in> Is\""], ["proof (prove)\nusing this:\n  semidecisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. j \\<in> Is", "by blast"], ["proof (state)\nthis:\n  j \\<in> Is\n\ngoal:\nNo subgoals!", "qed"], ["", "(* **************************************** *)"], ["", "subsection\\<open>The Existence of a Semi-decisive Individual\\<close>"], ["", "text\\<open>The second half of the proof establishes the existence of a\nsemi-decisive individual. The required witness is essentially an encoding of\nthe Condorcet pardox (aka \"the paradox of voting\" that shows we get tied up\nin knots if a certain agent didn't have dictatorial powers.\\<close>"], ["", "lemma sd_exists_witness:\n  assumes has3A: \"hasw [x,y,z] A\"\n      and Vs: \"Is = V1 \\<union> V2 \\<union> V3\n                \\<and> V1 \\<inter> V2 = {} \\<and> V1 \\<inter> V3 = {} \\<and> V2 \\<inter> V3 = {}\"\n      and Is: \"Is \\<noteq> {}\"\n  obtains P\n    where \"profile A Is P\"\n      and \"\\<forall>i \\<in> V1. x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P i)\\<^esub>\\<prec> z\"\n      and \"\\<forall>i \\<in> V2. z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n      and \"\\<forall>i \\<in> V3. y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and> z \\<^bsub>(P i)\\<^esub>\\<prec> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof"], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P2\n 2. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V1.\n       x \\<^bsub>(?P2 i)\\<^esub>\\<prec> y \\<and>\n       y \\<^bsub>(?P2 i)\\<^esub>\\<prec> z\n 3. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V2.\n       z \\<^bsub>(?P2 i)\\<^esub>\\<prec> x \\<and>\n       x \\<^bsub>(?P2 i)\\<^esub>\\<prec> y\n 4. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V3.\n       y \\<^bsub>(?P2 i)\\<^esub>\\<prec> z \\<and>\n       z \\<^bsub>(?P2 i)\\<^esub>\\<prec> x", "let ?P =\n    \"\\<lambda>i. (if i \\<in> V1 then  ({ (x, u) | u. u \\<in> A }\n                         \\<union> { (y, u) | u. u \\<in> A \\<and> u \\<noteq> x }\n                         \\<union> { (z, u) | u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y })\n                    else \n          if i \\<in> V2 then ({ (z, u) | u. u \\<in> A }\n                        \\<union> { (x, u) | u. u \\<in> A \\<and> u \\<noteq> z }\n                        \\<union> { (y, u) | u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z }) \n                   else  ({ (y, u) | u. u \\<in> A }\n                        \\<union> { (z, u) | u. u \\<in> A \\<and> u \\<noteq> y }\n                        \\<union> { (x, u) | u. u \\<in> A \\<and> u \\<noteq> y \\<and> u \\<noteq> z }))\n                      \\<union> { (u, v) | u v. u \\<in> A - {x,y,z} \\<and> v \\<in> A - {x,y,z}}\""], ["proof (state)\ngoal (4 subgoals):\n 1. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    profile A Is ?P2\n 2. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V1.\n       x \\<^bsub>(?P2 i)\\<^esub>\\<prec> y \\<and>\n       y \\<^bsub>(?P2 i)\\<^esub>\\<prec> z\n 3. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V2.\n       z \\<^bsub>(?P2 i)\\<^esub>\\<prec> x \\<and>\n       x \\<^bsub>(?P2 i)\\<^esub>\\<prec> y\n 4. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V3.\n       y \\<^bsub>(?P2 i)\\<^esub>\\<prec> z \\<and>\n       z \\<^bsub>(?P2 i)\\<^esub>\\<prec> x", "show \"profile A Is ?P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. profile A Is\n     (\\<lambda>i.\n         (if i \\<in> V1\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n               {(z, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n          else if i \\<in> V2\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                    {(y, u) |u.\n                     u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                    {(x, u) |u.\n                     u \\<in> A \\<and>\n                     u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n         {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i \\<in> V1\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n               {(z, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n          else if i \\<in> V2\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                    {(y, u) |u.\n                     u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                    {(x, u) |u.\n                     u \\<in> A \\<and>\n                     u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n         {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 2. Is \\<noteq> {}", "fix i"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i \\<in> V1\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n               {(z, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n          else if i \\<in> V2\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                    {(y, u) |u.\n                     u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                    {(x, u) |u.\n                     u \\<in> A \\<and>\n                     u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n         {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 2. Is \\<noteq> {}", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (2 subgoals):\n 1. \\<And>i.\n       i \\<in> Is \\<Longrightarrow>\n       rpr A\n        ((if i \\<in> V1\n          then {(x, u) |u. u \\<in> A} \\<union>\n               {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n               {(z, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n          else if i \\<in> V2\n               then {(z, u) |u. u \\<in> A} \\<union>\n                    {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                    {(y, u) |u.\n                     u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n               else {(y, u) |u. u \\<in> A} \\<union>\n                    {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                    {(x, u) |u.\n                     u \\<in> A \\<and>\n                     u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n         {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 2. Is \\<noteq> {}", "show \"rpr A (?P i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. rpr A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "proof"], ["proof (state)\ngoal (3 subgoals):\n 1. complete A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 2. refl_on A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 3. trans\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "show \"complete A (?P i)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. complete A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "by (simp add: complete_def, blast)"], ["proof (state)\nthis:\n  complete A\n   ((if i \\<in> V1\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n          {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n     else if i \\<in> V2\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n               {(y, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n               {(x, u) |u.\n                u \\<in> A \\<and> u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n    {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n\ngoal (2 subgoals):\n 1. refl_on A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n 2. trans\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "from has3A iIs"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i \\<in> Is", "show \"refl_on A (?P i)\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. refl_on A\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "by - (simp, blast)"], ["proof (state)\nthis:\n  refl_on A\n   ((if i \\<in> V1\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n          {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n     else if i \\<in> V2\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n               {(y, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n               {(x, u) |u.\n                u \\<in> A \\<and> u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n    {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n\ngoal (1 subgoal):\n 1. trans\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "from has3A iIs"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  i \\<in> Is", "show \"trans (?P i)\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  i \\<in> Is\n\ngoal (1 subgoal):\n 1. trans\n     ((if i \\<in> V1\n       then {(x, u) |u. u \\<in> A} \\<union>\n            {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n            {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n       else if i \\<in> V2\n            then {(z, u) |u. u \\<in> A} \\<union>\n                 {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                 {(y, u) |u.\n                  u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n            else {(y, u) |u. u \\<in> A} \\<union>\n                 {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                 {(x, u) |u.\n                  u \\<in> A \\<and>\n                  u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n      {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})", "by (clarsimp simp add: trans_def)"], ["proof (state)\nthis:\n  trans\n   ((if i \\<in> V1\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n          {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n     else if i \\<in> V2\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n               {(y, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n               {(x, u) |u.\n                u \\<in> A \\<and> u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n    {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  rpr A\n   ((if i \\<in> V1\n     then {(x, u) |u. u \\<in> A} \\<union>\n          {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n          {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n     else if i \\<in> V2\n          then {(z, u) |u. u \\<in> A} \\<union>\n               {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n               {(y, u) |u.\n                u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n          else {(y, u) |u. u \\<in> A} \\<union>\n               {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n               {(x, u) |u.\n                u \\<in> A \\<and> u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n    {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "from Is"], ["proof (chain)\npicking this:\n  Is \\<noteq> {}", "show \"Is \\<noteq> {}\""], ["proof (prove)\nusing this:\n  Is \\<noteq> {}\n\ngoal (1 subgoal):\n 1. Is \\<noteq> {}", "."], ["proof (state)\nthis:\n  Is \\<noteq> {}\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  profile A Is\n   (\\<lambda>i.\n       (if i \\<in> V1\n        then {(x, u) |u. u \\<in> A} \\<union>\n             {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n             {(z, u) |u. u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n        else if i \\<in> V2\n             then {(z, u) |u. u \\<in> A} \\<union>\n                  {(x, u) |u. u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                  {(y, u) |u.\n                   u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> z}\n             else {(y, u) |u. u \\<in> A} \\<union>\n                  {(z, u) |u. u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                  {(x, u) |u.\n                   u \\<in> A \\<and>\n                   u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n       {(u, v) |u v. u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}})\n\ngoal (3 subgoals):\n 1. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V1.\n       x \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y \\<and>\n       y \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z\n 2. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V2.\n       z \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x \\<and>\n       x \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y\n 3. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         \\<forall>i\\<in>V1.\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V2.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>V3.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    \\<forall>i\\<in>V3.\n       y \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z \\<and>\n       z \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x", "from has3A Vs"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A\n  Is = V1 \\<union> V2 \\<union> V3 \\<and>\n  V1 \\<inter> V2 = {} \\<and> V1 \\<inter> V3 = {} \\<and> V2 \\<inter> V3 = {}", "show \"\\<forall>i \\<in> V1. x \\<^bsub>(?P i)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(?P i)\\<^esub>\\<prec> z\"\n   and \"\\<forall>i \\<in> V2. z \\<^bsub>(?P i)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(?P i)\\<^esub>\\<prec> y\"\n   and \"\\<forall>i \\<in> V3. y \\<^bsub>(?P i)\\<^esub>\\<prec> z \\<and> z \\<^bsub>(?P i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  Is = V1 \\<union> V2 \\<union> V3 \\<and>\n  V1 \\<inter> V2 = {} \\<and> V1 \\<inter> V3 = {} \\<and> V2 \\<inter> V3 = {}\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>V1.\n       x \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y \\<and>\n       y \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z &&&\n    \\<forall>i\\<in>V2.\n       z \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x \\<and>\n       x \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y &&&\n    \\<forall>i\\<in>V3.\n       y \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z \\<and>\n       z \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n  Is = V1 \\<union> V2 \\<union> V3 \\<and>\n  V1 \\<inter> V2 = {} \\<and> V1 \\<inter> V3 = {} \\<and> V2 \\<inter> V3 = {}\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>V1.\n       (x \\<^bsub>((if i \\<in> V1\n                    then {(x, u) |u. u \\<in> A} \\<union>\n                         {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                         {(z, u) |u.\n                          u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                    else if i \\<in> V2\n                         then {(z, u) |u. u \\<in> A} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                              {(y, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> x \\<and> u \\<noteq> z}\n                         else {(y, u) |u. u \\<in> A} \\<union>\n                              {(z, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                   {(u, v) |u v.\n                    u \\<in> A - {x, y, z} \\<and>\n                    v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> y \\<and>\n        (y, x)\n        \\<notin> (if i \\<in> V1\n                  then {(x, u) |u. u \\<in> A} \\<union>\n                       {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                       {(z, u) |u.\n                        u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                  else if i \\<in> V2\n                       then {(z, u) |u. u \\<in> A} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                            {(y, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> x \\<and> u \\<noteq> z}\n                       else {(y, u) |u. u \\<in> A} \\<union>\n                            {(z, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                 {(u, v) |u v.\n                  u \\<in> A - {x, y, z} \\<and>\n                  v \\<in> A - {x, y, z}}) \\<and>\n       y \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> z \\<and>\n       (z, y)\n       \\<notin> (if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}} &&&\n    \\<forall>i\\<in>V2.\n       (z \\<^bsub>((if i \\<in> V1\n                    then {(x, u) |u. u \\<in> A} \\<union>\n                         {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                         {(z, u) |u.\n                          u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                    else if i \\<in> V2\n                         then {(z, u) |u. u \\<in> A} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                              {(y, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> x \\<and> u \\<noteq> z}\n                         else {(y, u) |u. u \\<in> A} \\<union>\n                              {(z, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                   {(u, v) |u v.\n                    u \\<in> A - {x, y, z} \\<and>\n                    v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> x \\<and>\n        (x, z)\n        \\<notin> (if i \\<in> V1\n                  then {(x, u) |u. u \\<in> A} \\<union>\n                       {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                       {(z, u) |u.\n                        u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                  else if i \\<in> V2\n                       then {(z, u) |u. u \\<in> A} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                            {(y, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> x \\<and> u \\<noteq> z}\n                       else {(y, u) |u. u \\<in> A} \\<union>\n                            {(z, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                 {(u, v) |u v.\n                  u \\<in> A - {x, y, z} \\<and>\n                  v \\<in> A - {x, y, z}}) \\<and>\n       x \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> y \\<and>\n       (y, x)\n       \\<notin> (if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}} &&&\n    \\<forall>i\\<in>V3.\n       (y \\<^bsub>((if i \\<in> V1\n                    then {(x, u) |u. u \\<in> A} \\<union>\n                         {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                         {(z, u) |u.\n                          u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                    else if i \\<in> V2\n                         then {(z, u) |u. u \\<in> A} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                              {(y, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> x \\<and> u \\<noteq> z}\n                         else {(y, u) |u. u \\<in> A} \\<union>\n                              {(z, u) |u.\n                               u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                              {(x, u) |u.\n                               u \\<in> A \\<and>\n                               u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                   {(u, v) |u v.\n                    u \\<in> A - {x, y, z} \\<and>\n                    v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> z \\<and>\n        (z, y)\n        \\<notin> (if i \\<in> V1\n                  then {(x, u) |u. u \\<in> A} \\<union>\n                       {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                       {(z, u) |u.\n                        u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                  else if i \\<in> V2\n                       then {(z, u) |u. u \\<in> A} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                            {(y, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> x \\<and> u \\<noteq> z}\n                       else {(y, u) |u. u \\<in> A} \\<union>\n                            {(z, u) |u.\n                             u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                            {(x, u) |u.\n                             u \\<in> A \\<and>\n                             u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                 {(u, v) |u v.\n                  u \\<in> A - {x, y, z} \\<and>\n                  v \\<in> A - {x, y, z}}) \\<and>\n       z \\<^bsub>((if i \\<in> V1\n                   then {(x, u) |u. u \\<in> A} \\<union>\n                        {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                        {(z, u) |u.\n                         u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                   else if i \\<in> V2\n                        then {(z, u) |u. u \\<in> A} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                             {(y, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> x \\<and> u \\<noteq> z}\n                        else {(y, u) |u. u \\<in> A} \\<union>\n                             {(z, u) |u.\n                              u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                             {(x, u) |u.\n                              u \\<in> A \\<and>\n                              u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                  {(u, v) |u v.\n                   u \\<in> A - {x, y, z} \\<and>\n                   v \\<in> A - {x, y, z}})\\<^esub>\\<preceq> x \\<and>\n       (x, z)\n       \\<notin> (if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and> v \\<in> A - {x, y, z}}", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>V1.\n     x \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y \\<and>\n     y \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z\n  \\<forall>i\\<in>V2.\n     z \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> y\n  \\<forall>i\\<in>V3.\n     y \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>((if i \\<in> V1\n                 then {(x, u) |u. u \\<in> A} \\<union>\n                      {(y, u) |u. u \\<in> A \\<and> u \\<noteq> x} \\<union>\n                      {(z, u) |u.\n                       u \\<in> A \\<and> u \\<noteq> x \\<and> u \\<noteq> y}\n                 else if i \\<in> V2\n                      then {(z, u) |u. u \\<in> A} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> z} \\<union>\n                           {(y, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> x \\<and> u \\<noteq> z}\n                      else {(y, u) |u. u \\<in> A} \\<union>\n                           {(z, u) |u.\n                            u \\<in> A \\<and> u \\<noteq> y} \\<union>\n                           {(x, u) |u.\n                            u \\<in> A \\<and>\n                            u \\<noteq> y \\<and> u \\<noteq> z}) \\<union>\n                {(u, v) |u v.\n                 u \\<in> A - {x, y, z} \\<and>\n                 v \\<in> A - {x, y, z}})\\<^esub>\\<prec> x\n\ngoal:\nNo subgoals!", "qed"], ["", "text \\<open>This proof is unfortunately long. Many of the statements rely on a\nlot of context, making it difficult to split it up.\\<close>"], ["", "lemma sd_exists:\n  assumes has3A: \"has 3 A\"\n      and finiteIs: \"finite Is\"\n      and twoIs: \"has 2 Is\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n  shows \"\\<exists>j u v. hasw [u,v] A \\<and> semidecisive swf A Is {j} u v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "let ?P = \"\\<lambda>S. S \\<subseteq> Is \\<and> S \\<noteq> {} \\<and> (\\<exists>u v. hasw [u,v] A \\<and> semidecisive swf A Is S u v)\""], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "obtain u v where uvA: \"hasw [u,v] A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>u v. hasw [u, v] A \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using has_witness_two[OF has3A]"], ["proof (prove)\nusing this:\n  2 \\<le> 3 \\<Longrightarrow> \\<exists>x y. hasw [x, y] A\n\ngoal (1 subgoal):\n 1. (\\<And>u v. hasw [u, v] A \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto\n      \\<comment> \\<open>The weak pareto requirement implies that the set of all\n      individuals is decisive between any given alternatives.\\<close>"], ["proof (state)\nthis:\n  hasw [u, v] A\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "hence \"decisive swf A Is Is u v\""], ["proof (prove)\nusing this:\n  hasw [u, v] A\n\ngoal (1 subgoal):\n 1. decisive swf A Is Is u v", "by - (rule, auto intro: weak_paretoD[OF wp])"], ["proof (state)\nthis:\n  decisive swf A Is Is u v\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "hence \"semidecisive swf A Is Is u v\""], ["proof (prove)\nusing this:\n  decisive swf A Is Is u v\n\ngoal (1 subgoal):\n 1. semidecisive swf A Is Is u v", "by (rule d_imp_sd)"], ["proof (state)\nthis:\n  semidecisive swf A Is Is u v\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "with uvA twoIs has_suc_notempty[where n=1] nat_2[symmetric]"], ["proof (chain)\npicking this:\n  hasw [u, v] A\n  has 2 Is\n  has (Suc 1) ?S \\<Longrightarrow> {} \\<noteq> ?S\n  Suc (Suc 0) = nat 2\n  semidecisive swf A Is Is u v", "have \"?P Is\""], ["proof (prove)\nusing this:\n  hasw [u, v] A\n  has 2 Is\n  has (Suc 1) ?S \\<Longrightarrow> {} \\<noteq> ?S\n  Suc (Suc 0) = nat 2\n  semidecisive swf A Is Is u v\n\ngoal (1 subgoal):\n 1. Is \\<subseteq> Is \\<and>\n    Is \\<noteq> {} \\<and>\n    (\\<exists>u v. hasw [u, v] A \\<and> semidecisive swf A Is Is u v)", "by auto\n      \\<comment> \\<open>Obtain a minimally-sized semi-decisive set.\\<close>"], ["proof (state)\nthis:\n  Is \\<subseteq> Is \\<and>\n  Is \\<noteq> {} \\<and>\n  (\\<exists>u v. hasw [u, v] A \\<and> semidecisive swf A Is Is u v)\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "from ex_has_least_nat[where P=\"?P\" and m=\"card\", OF this]"], ["proof (chain)\npicking this:\n  \\<exists>x.\n     (x \\<subseteq> Is \\<and>\n      x \\<noteq> {} \\<and>\n      (\\<exists>u v.\n          hasw [u, v] A \\<and> semidecisive swf A Is x u v)) \\<and>\n     (\\<forall>y.\n         y \\<subseteq> Is \\<and>\n         y \\<noteq> {} \\<and>\n         (\\<exists>u v.\n             hasw [u, v] A \\<and>\n             semidecisive swf A Is y u v) \\<longrightarrow>\n         card x \\<le> card y)", "obtain V x y where VIs: \"V \\<subseteq> Is\"\n    and Vnotempty: \"V \\<noteq> {}\"\n    and xyA: \"hasw [x,y] A\"\n    and Vsd: \"semidecisive swf A Is V x y\"\n    and Vmin: \"\\<And>V'. ?P V' \\<Longrightarrow> card V \\<le> card V'\""], ["proof (prove)\nusing this:\n  \\<exists>x.\n     (x \\<subseteq> Is \\<and>\n      x \\<noteq> {} \\<and>\n      (\\<exists>u v.\n          hasw [u, v] A \\<and> semidecisive swf A Is x u v)) \\<and>\n     (\\<forall>y.\n         y \\<subseteq> Is \\<and>\n         y \\<noteq> {} \\<and>\n         (\\<exists>u v.\n             hasw [u, v] A \\<and>\n             semidecisive swf A Is y u v) \\<longrightarrow>\n         card x \\<le> card y)\n\ngoal (1 subgoal):\n 1. (\\<And>V x y.\n        \\<lbrakk>V \\<subseteq> Is; V \\<noteq> {}; hasw [x, y] A;\n         semidecisive swf A Is V x y;\n         \\<And>V'.\n            V' \\<subseteq> Is \\<and>\n            V' \\<noteq> {} \\<and>\n            (\\<exists>u v.\n                hasw [u, v] A \\<and>\n                semidecisive swf A Is V' u v) \\<Longrightarrow>\n            card V \\<le> card V'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  V \\<subseteq> Is\n  V \\<noteq> {}\n  hasw [x, y] A\n  semidecisive swf A Is V x y\n  ?V' \\<subseteq> Is \\<and>\n  ?V' \\<noteq> {} \\<and>\n  (\\<exists>u v.\n      hasw [u, v] A \\<and> semidecisive swf A Is ?V' u v) \\<Longrightarrow>\n  card V \\<le> card ?V'\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "from VIs finiteIs"], ["proof (chain)\npicking this:\n  V \\<subseteq> Is\n  finite Is", "have Vfinite: \"finite V\""], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n  finite Is\n\ngoal (1 subgoal):\n 1. finite V", "by (rule finite_subset)\n      \\<comment> \\<open>Show that minimal set contains a single individual.\\<close>"], ["proof (state)\nthis:\n  finite V\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "from Vfinite Vnotempty"], ["proof (chain)\npicking this:\n  finite V\n  V \\<noteq> {}", "have \"\\<exists>j. V = {j}\""], ["proof (prove)\nusing this:\n  finite V\n  V \\<noteq> {}\n\ngoal (1 subgoal):\n 1. \\<exists>j. V = {j}", "proof(rule finite_set_singleton_contra)"], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "assume Vcard: \"1 < card V\""], ["proof (state)\nthis:\n  1 < card V\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "then"], ["proof (chain)\npicking this:\n  1 < card V", "obtain j where jV: \"{j} \\<subseteq> V\""], ["proof (prove)\nusing this:\n  1 < card V\n\ngoal (1 subgoal):\n 1. (\\<And>j. {j} \\<subseteq> V \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using has_extend_witness[where xs=\"[]\", OF card_has[where n=\"card V\"]]"], ["proof (prove)\nusing this:\n  1 < card V\n  \\<lbrakk>card ?S = card V; set [] \\<subseteq> ?S;\n   length [] < card V\\<rbrakk>\n  \\<Longrightarrow> set [] \\<subset> ?S\n\ngoal (1 subgoal):\n 1. (\\<And>j. {j} \\<subseteq> V \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto\n        \\<comment> \\<open>Split an individual from the \"minimal\" set.\\<close>"], ["proof (state)\nthis:\n  {j} \\<subseteq> V\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "let ?V1 = \"{j}\""], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "let ?V2 = \"V - ?V1\""], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "let ?V3 = \"Is - V\""], ["proof (state)\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "from jV card_Diff_singleton[OF Vfinite] Vcard"], ["proof (chain)\npicking this:\n  {j} \\<subseteq> V\n  ?x \\<in> V \\<Longrightarrow> card (V - {?x}) = card V - 1\n  1 < card V", "have V2card: \"card ?V2 > 0\" \"card ?V2 < card V\""], ["proof (prove)\nusing this:\n  {j} \\<subseteq> V\n  ?x \\<in> V \\<Longrightarrow> card (V - {?x}) = card V - 1\n  1 < card V\n\ngoal (1 subgoal):\n 1. 0 < card (V - {j}) &&& card (V - {j}) < card V", "by auto"], ["proof (state)\nthis:\n  0 < card (V - {j})\n  card (V - {j}) < card V\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "hence V2notempty: \"{} \\<noteq> ?V2\""], ["proof (prove)\nusing this:\n  0 < card (V - {j})\n  card (V - {j}) < card V\n\ngoal (1 subgoal):\n 1. {} \\<noteq> V - {j}", "by auto"], ["proof (state)\nthis:\n  {} \\<noteq> V - {j}\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "from jV VIs"], ["proof (chain)\npicking this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is", "have jV2V3: \"Is = ?V1 \\<union> ?V2 \\<union> ?V3 \\<and> ?V1 \\<inter> ?V2 = {} \\<and> ?V1 \\<inter> ?V3 = {} \\<and> ?V2 \\<inter> ?V3 = {}\""], ["proof (prove)\nusing this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. Is = {j} \\<union> (V - {j}) \\<union> (Is - V) \\<and>\n    {j} \\<inter> (V - {j}) = {} \\<and>\n    {j} \\<inter> (Is - V) = {} \\<and> (V - {j}) \\<inter> (Is - V) = {}", "by auto\n        \\<comment> \\<open>Show that that individual is semi-decisive for $x$ over $z$.\\<close>"], ["proof (state)\nthis:\n  Is = {j} \\<union> (V - {j}) \\<union> (Is - V) \\<and>\n  {j} \\<inter> (V - {j}) = {} \\<and>\n  {j} \\<inter> (Is - V) = {} \\<and> (V - {j}) \\<inter> (Is - V) = {}\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "from has_extend_witness'[OF has3A xyA]"], ["proof (chain)\npicking this:\n  length [x, y] < 3 \\<Longrightarrow> \\<exists>xa. hasw [xa, x, y] A", "obtain z where threeDist: \"hasw [x,y,z] A\""], ["proof (prove)\nusing this:\n  length [x, y] < 3 \\<Longrightarrow> \\<exists>xa. hasw [xa, x, y] A\n\ngoal (1 subgoal):\n 1. (\\<And>z. hasw [x, y, z] A \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "from sd_exists_witness[OF threeDist jV2V3] VIs Vnotempty"], ["proof (chain)\npicking this:\n  \\<lbrakk>Is \\<noteq> {};\n   \\<And>P.\n      \\<lbrakk>profile A Is P;\n       \\<forall>i\\<in>{j}.\n          x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n          y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n       \\<forall>i\\<in>V - {j}.\n          z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n          x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n       \\<forall>i\\<in>Is - V.\n          y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n          z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  V \\<subseteq> Is\n  V \\<noteq> {}", "obtain P where profileP: \"profile A Is P\"\n               and V1xyzP: \"x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\"\n               and V2xyzP: \"\\<forall>i \\<in> ?V2. z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and> x \\<^bsub>(P i)\\<^esub>\\<prec> y\"\n               and V3xyzP: \"\\<forall>i \\<in> ?V3. y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and> z \\<^bsub>(P i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  \\<lbrakk>Is \\<noteq> {};\n   \\<And>P.\n      \\<lbrakk>profile A Is P;\n       \\<forall>i\\<in>{j}.\n          x \\<^bsub>(P i)\\<^esub>\\<prec> y \\<and>\n          y \\<^bsub>(P i)\\<^esub>\\<prec> z;\n       \\<forall>i\\<in>V - {j}.\n          z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n          x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n       \\<forall>i\\<in>Is - V.\n          y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n          z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  V \\<subseteq> Is\n  V \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>P.\n        \\<lbrakk>profile A Is P;\n         x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and>\n         y \\<^bsub>(P j)\\<^esub>\\<prec> z;\n         \\<forall>i\\<in>V - {j}.\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n            x \\<^bsub>(P i)\\<^esub>\\<prec> y;\n         \\<forall>i\\<in>Is - V.\n            y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n            z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (simp, blast)"], ["proof (state)\nthis:\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "have xPz: \"x \\<^bsub>(swf P)\\<^esub>\\<prec> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "proof(rule rpr_less_le_trans[where y=\"y\"])"], ["proof (state)\ngoal (3 subgoals):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y\n 2. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z\n 3. rpr ?A (swf P)", "from profileP swf"], ["proof (chain)\npicking this:\n  profile A Is P\n  SWF swf A Is universal_domain", "show \"rpr A (swf P)\""], ["proof (prove)\nusing this:\n  profile A Is P\n  SWF swf A Is universal_domain\n\ngoal (1 subgoal):\n 1. rpr A (swf P)", "by auto"], ["proof (state)\nthis:\n  rpr A (swf P)\n\ngoal (2 subgoals):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y\n 2. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z", "next\n        \\<comment> \\<open>V2 is semi-decisive, and everyone else opposes their choice. Ergo they prevail.\\<close>"], ["proof (state)\ngoal (2 subgoals):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y\n 2. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z", "show \"x \\<^bsub>(swf P)\\<^esub>\\<prec> y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from profileP V3xyzP"], ["proof (chain)\npicking this:\n  profile A Is P\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x", "have \"\\<forall>i \\<in> ?V3. y \\<^bsub>(P i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  profile A Is P\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Is - V. y \\<^bsub>(P i)\\<^esub>\\<prec> x", "by (blast dest: rpr_less_trans)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>Is - V. y \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y", "with profileP V1xyzP V2xyzP Vsd"], ["proof (chain)\npicking this:\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  semidecisive swf A Is V x y\n  \\<forall>i\\<in>Is - V. y \\<^bsub>(P i)\\<^esub>\\<prec> x", "show ?thesis"], ["proof (prove)\nusing this:\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  semidecisive swf A Is V x y\n  \\<forall>i\\<in>Is - V. y \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y", "unfolding semidecisive_def"], ["proof (prove)\nusing this:\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  V \\<subseteq> Is \\<and>\n  (\\<forall>P.\n      profile A Is P \\<and>\n      (\\<forall>i\\<in>V. x \\<^bsub>(P i)\\<^esub>\\<prec> y) \\<and>\n      (\\<forall>i\\<in>Is - V.\n          y \\<^bsub>(P i)\\<^esub>\\<prec> x) \\<longrightarrow>\n      x \\<^bsub>(swf P)\\<^esub>\\<prec> y)\n  \\<forall>i\\<in>Is - V. y \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P)\\<^esub>\\<prec> y", "by auto"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> y\n\ngoal (1 subgoal):\n 1. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z", "next\n      \\<comment> \\<open>This result is unfortunately quite tortuous.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z", "from SWF_rpr[OF swf]"], ["proof (chain)\npicking this:\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)", "show \"y \\<^bsub>(swf P)\\<^esub>\\<preceq> z\""], ["proof (prove)\nusing this:\n  universal_domain A Is ?P \\<Longrightarrow> rpr A (swf ?P)\n\ngoal (1 subgoal):\n 1. y \\<^bsub>(swf P)\\<^esub>\\<preceq> z", "proof(rule rpr_less_not[OF _ _ notI])"], ["proof (state)\ngoal (3 subgoals):\n 1. universal_domain A Is P\n 2. hasw [z, y] A\n 3. z \\<^bsub>(swf P)\\<^esub>\\<prec> y \\<Longrightarrow> False", "from threeDist"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show \"hasw [z, y] A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. hasw [z, y] A", "by auto"], ["proof (state)\nthis:\n  hasw [z, y] A\n\ngoal (2 subgoals):\n 1. universal_domain A Is P\n 2. z \\<^bsub>(swf P)\\<^esub>\\<prec> y \\<Longrightarrow> False", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. universal_domain A Is P\n 2. z \\<^bsub>(swf P)\\<^esub>\\<prec> y \\<Longrightarrow> False", "assume zPy: \"z \\<^bsub>(swf P)\\<^esub>\\<prec> y\""], ["proof (state)\nthis:\n  z \\<^bsub>(swf P)\\<^esub>\\<prec> y\n\ngoal (2 subgoals):\n 1. universal_domain A Is P\n 2. z \\<^bsub>(swf P)\\<^esub>\\<prec> y \\<Longrightarrow> False", "have \"semidecisive swf A Is ?V2 z y\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semidecisive swf A Is (V - {j}) z y", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. V - {j} \\<subseteq> Is\n 2. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from VIs"], ["proof (chain)\npicking this:\n  V \\<subseteq> Is", "show \"V - {j} \\<subseteq> Is\""], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. V - {j} \\<subseteq> Is", "by blast"], ["proof (state)\nthis:\n  V - {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "assume profileP': \"profile A Is P'\"\n            and V2yz': \"\\<And>i. i \\<in> ?V2 \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> y\"\n            and nV2yz': \"\\<And>i. i \\<in> Is - ?V2 \\<Longrightarrow> y \\<^bsub>(P' i)\\<^esub>\\<prec> z\""], ["proof (state)\nthis:\n  profile A Is P'\n  ?i \\<in> V - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  ?i \\<in> Is - (V - {j}) \\<Longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "from iia"], ["proof (chain)\npicking this:\n  iia swf A Is", "have \"\\<And>a b. \\<lbrakk> a \\<in> {y, z}; b \\<in> {y, z} \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) = (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)\""], ["proof (prove)\nusing this:\n  iia swf A Is\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)", "proof(rule iiaE)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> {?x a b, ?y a b} \\<subseteq> A\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {?x a b, ?y a b}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {?x a b, ?y a b}\n 4. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {?x a b, ?y a b};\n        ba \\<in> {?x a b, ?y a b}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 6. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "from threeDist"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show yzA: \"{y,z} \\<subseteq> A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. {y, z} \\<subseteq> A", "by simp"], ["proof (state)\nthis:\n  {y, z} \\<subseteq> A\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix i"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix a b"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume ab: \"a \\<in> {y, z}\" \"b \\<in> {y, z}\""], ["proof (state)\nthis:\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "with VIs profileP V2xyzP"], ["proof (chain)\npicking this:\n  V \\<subseteq> Is\n  profile A Is P\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  a \\<in> {y, z}\n  b \\<in> {y, z}", "have V2yzP: \"\\<forall>i \\<in> ?V2. z \\<^bsub>(P i)\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n  profile A Is P\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>V - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> y", "by (blast dest: rpr_less_trans)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>V - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> y\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}; aa \\<in> {y, z};\n        ba \\<in> {y, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "show \"(a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) = (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "proof(cases \"i \\<in> ?V2\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<in> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case True"], ["proof (state)\nthis:\n  i \\<in> V - {j}\n\ngoal (2 subgoals):\n 1. i \\<in> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with VIs profileP profileP' ab V2yz' V2yzP threeDist"], ["proof (chain)\npicking this:\n  V \\<subseteq> Is\n  profile A Is P\n  profile A Is P'\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> V - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  \\<forall>i\\<in>V - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> y\n  hasw [x, y, z] A\n  i \\<in> V - {j}", "show ?thesis"], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n  profile A Is P\n  profile A Is P'\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> V - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> y\n  \\<forall>i\\<in>V - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> y\n  hasw [x, y, z] A\n  i \\<in> V - {j}\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding strict_pref_def profile_def"], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> V - {j} \\<Longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> P' ?i\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> P i\n  hasw [x, y, z] A\n  i \\<in> V - {j}\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (1 subgoal):\n 1. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case False"], ["proof (state)\nthis:\n  i \\<notin> V - {j}\n\ngoal (1 subgoal):\n 1. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "from V1xyzP V3xyzP"], ["proof (chain)\npicking this:\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x", "have \"\\<forall>i \\<in> Is - ?V2. y \\<^bsub>(P i)\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Is - (V - {j}). y \\<^bsub>(P i)\\<^esub>\\<prec> z", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>Is - (V - {j}). y \\<^bsub>(P i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. i \\<notin> V - {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with iIs False VIs jV profileP profileP' ab nV2yz' threeDist"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  i \\<notin> V - {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  profile A Is P\n  profile A Is P'\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> Is - (V - {j}) \\<Longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - (V - {j}). y \\<^bsub>(P i)\\<^esub>\\<prec> z", "show ?thesis"], ["proof (prove)\nusing this:\n  i \\<in> Is\n  i \\<notin> V - {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  profile A Is P\n  profile A Is P'\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> Is - (V - {j}) \\<Longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - (V - {j}). y \\<^bsub>(P i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding profile_def strict_pref_def"], ["proof (prove)\nusing this:\n  i \\<in> Is\n  i \\<notin> V - {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  a \\<in> {y, z}\n  b \\<in> {y, z}\n  ?i \\<in> Is - (V - {j}) \\<Longrightarrow>\n  y \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z \\<and> (z, y) \\<notin> P' ?i\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - (V - {j}).\n     y \\<^bsub>(P i)\\<^esub>\\<preceq> z \\<and> (z, y) \\<notin> P i\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (4 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {y, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {y, z}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {y, z}; b \\<in> {y, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "qed (simp_all add: profileP profileP')"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> V - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> y;\n        \\<And>i.\n           i \\<in> Is - (V - {j}) \\<Longrightarrow>\n           y \\<^bsub>(P i)\\<^esub>\\<prec> z\\<rbrakk>\n       \\<Longrightarrow> z \\<^bsub>(swf P)\\<^esub>\\<prec> y", "with zPy"], ["proof (chain)\npicking this:\n  z \\<^bsub>(swf P)\\<^esub>\\<prec> y\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)", "show \"z \\<^bsub>(swf P')\\<^esub>\\<prec> y\""], ["proof (prove)\nusing this:\n  z \\<^bsub>(swf P)\\<^esub>\\<prec> y\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<prec> y", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  z \\<^bsub>(swf P)\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> swf P\n  \\<lbrakk>?a \\<in> {y, z}; ?b \\<in> {y, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. z \\<^bsub>(swf P')\\<^esub>\\<preceq> y \\<and> (y, z) \\<notin> swf P'", "by blast"], ["proof (state)\nthis:\n  z \\<^bsub>(swf P')\\<^esub>\\<prec> y\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  semidecisive swf A Is (V - {j}) z y\n\ngoal (2 subgoals):\n 1. universal_domain A Is P\n 2. z \\<^bsub>(swf P)\\<^esub>\\<prec> y \\<Longrightarrow> False", "with VIs Vsd Vmin[where V'=\"?V2\"] V2card V2notempty threeDist"], ["proof (chain)\npicking this:\n  V \\<subseteq> Is\n  semidecisive swf A Is V x y\n  V - {j} \\<subseteq> Is \\<and>\n  V - {j} \\<noteq> {} \\<and>\n  (\\<exists>u v.\n      hasw [u, v] A \\<and>\n      semidecisive swf A Is (V - {j}) u v) \\<Longrightarrow>\n  card V \\<le> card (V - {j})\n  0 < card (V - {j})\n  card (V - {j}) < card V\n  {} \\<noteq> V - {j}\n  hasw [x, y, z] A\n  semidecisive swf A Is (V - {j}) z y", "show False"], ["proof (prove)\nusing this:\n  V \\<subseteq> Is\n  semidecisive swf A Is V x y\n  V - {j} \\<subseteq> Is \\<and>\n  V - {j} \\<noteq> {} \\<and>\n  (\\<exists>u v.\n      hasw [u, v] A \\<and>\n      semidecisive swf A Is (V - {j}) u v) \\<Longrightarrow>\n  card V \\<le> card (V - {j})\n  0 < card (V - {j})\n  card (V - {j}) < card V\n  {} \\<noteq> V - {j}\n  hasw [x, y, z] A\n  semidecisive swf A Is (V - {j}) z y\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. universal_domain A Is P", "qed (simp add: profileP threeDist)"], ["proof (state)\nthis:\n  y \\<^bsub>(swf P)\\<^esub>\\<preceq> z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "have \"semidecisive swf A Is ?V1 x z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. semidecisive swf A Is {j} x z", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. {j} \\<subseteq> Is\n 2. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "from jV VIs"], ["proof (chain)\npicking this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is", "show \"{j} \\<subseteq> Is\""], ["proof (prove)\nusing this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. {j} \\<subseteq> Is", "by blast"], ["proof (state)\nthis:\n  {j} \\<subseteq> Is\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "next\n      \\<comment> \\<open>Use @{term \"iia\"} to show the SWF must allow the individual to prevail.\\<close>"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "fix P'"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "assume profileP': \"profile A Is P'\"\n         and V1yz': \"\\<And>i. i \\<in> ?V1 \\<Longrightarrow> x \\<^bsub>(P' i)\\<^esub>\\<prec> z\"\n         and nV1yz': \"\\<And>i. i \\<in> Is - ?V1 \\<Longrightarrow> z \\<^bsub>(P' i)\\<^esub>\\<prec> x\""], ["proof (state)\nthis:\n  profile A Is P'\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n  ?i \\<in> Is - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "from iia"], ["proof (chain)\npicking this:\n  iia swf A Is", "have \"\\<And>a b. \\<lbrakk> a \\<in> {x, z}; b \\<in> {x, z} \\<rbrakk> \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) = (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)\""], ["proof (prove)\nusing this:\n  iia swf A Is\n\ngoal (1 subgoal):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> (a \\<^bsub>(swf P)\\<^esub>\\<preceq> b) =\n                         (a \\<^bsub>(swf P')\\<^esub>\\<preceq> b)", "proof(rule iiaE)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> {?x a b, ?y a b} \\<subseteq> A\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {?x a b, ?y a b}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {?x a b, ?y a b}\n 4. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {?x a b, ?y a b};\n        ba \\<in> {?x a b, ?y a b}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 6. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "from threeDist"], ["proof (chain)\npicking this:\n  hasw [x, y, z] A", "show xzA: \"{x,z} \\<subseteq> A\""], ["proof (prove)\nusing this:\n  hasw [x, y, z] A\n\ngoal (1 subgoal):\n 1. {x, z} \\<subseteq> A", "by simp"], ["proof (state)\nthis:\n  {x, z} \\<subseteq> A\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix i"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume iIs: \"i \\<in> Is\""], ["proof (state)\nthis:\n  i \\<in> Is\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "fix a b"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "assume ab: \"a \\<in> {x, z}\" \"b \\<in> {x, z}\""], ["proof (state)\nthis:\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n\ngoal (5 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b i aa ba.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}; aa \\<in> {x, z};\n        ba \\<in> {x, z}; i \\<in> Is\\<rbrakk>\n       \\<Longrightarrow> (aa \\<^bsub>(P' i)\\<^esub>\\<preceq> ba) =\n                         (aa \\<^bsub>(P i)\\<^esub>\\<preceq> ba)\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 5. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "show \"(a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) = (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "proof(cases \"i \\<in> ?V1\")"], ["proof (state)\ngoal (2 subgoals):\n 1. i \\<in> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case True"], ["proof (state)\nthis:\n  i \\<in> {j}\n\ngoal (2 subgoals):\n 1. i \\<in> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with jV VIs profileP V1xyzP"], ["proof (chain)\npicking this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  i \\<in> {j}", "have \"\\<forall>i \\<in> ?V1. x \\<^bsub>(P i)\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  profile A Is P\n  x \\<^bsub>(P j)\\<^esub>\\<prec> y \\<and> y \\<^bsub>(P j)\\<^esub>\\<prec> z\n  i \\<in> {j}\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>{j}. x \\<^bsub>(P i)\\<^esub>\\<prec> z", "by (blast dest: rpr_less_trans)"], ["proof (state)\nthis:\n  \\<forall>i\\<in>{j}. x \\<^bsub>(P i)\\<^esub>\\<prec> z\n\ngoal (2 subgoals):\n 1. i \\<in> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n 2. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with True jV VIs profileP profileP' ab V1yz' threeDist"], ["proof (chain)\npicking this:\n  i \\<in> {j}\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  profile A Is P\n  profile A Is P'\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n  hasw [x, y, z] A\n  \\<forall>i\\<in>{j}. x \\<^bsub>(P i)\\<^esub>\\<prec> z", "show ?thesis"], ["proof (prove)\nusing this:\n  i \\<in> {j}\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  profile A Is P\n  profile A Is P'\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P' ?i)\\<^esub>\\<prec> z\n  hasw [x, y, z] A\n  \\<forall>i\\<in>{j}. x \\<^bsub>(P i)\\<^esub>\\<prec> z\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding strict_pref_def profile_def"], ["proof (prove)\nusing this:\n  i \\<in> {j}\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> {j} \\<Longrightarrow>\n  x \\<^bsub>(P' ?i)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> P' ?i\n  hasw [x, y, z] A\n  \\<forall>i\\<in>{j}.\n     x \\<^bsub>(P i)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> P i\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (1 subgoal):\n 1. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "case False"], ["proof (state)\nthis:\n  i \\<notin> {j}\n\ngoal (1 subgoal):\n 1. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "from V2xyzP V3xyzP"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x", "have \"\\<forall>i \\<in> Is - ?V1. z \\<^bsub>(P i)\\<^esub>\\<prec> x\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>V - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x \\<and>\n     x \\<^bsub>(P i)\\<^esub>\\<prec> y\n  \\<forall>i\\<in>Is - V.\n     y \\<^bsub>(P i)\\<^esub>\\<prec> z \\<and>\n     z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. \\<forall>i\\<in>Is - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> x", "by auto"], ["proof (state)\nthis:\n  \\<forall>i\\<in>Is - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. i \\<notin> {j} \\<Longrightarrow>\n    (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "with iIs False VIs jV profileP profileP' ab nV1yz' threeDist"], ["proof (chain)\npicking this:\n  i \\<in> Is\n  i \\<notin> {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  profile A Is P\n  profile A Is P'\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> Is - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> x", "show ?thesis"], ["proof (prove)\nusing this:\n  i \\<in> Is\n  i \\<notin> {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  profile A Is P\n  profile A Is P'\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> Is - {j} \\<Longrightarrow> z \\<^bsub>(P' ?i)\\<^esub>\\<prec> x\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - {j}. z \\<^bsub>(P i)\\<^esub>\\<prec> x\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "unfolding strict_pref_def profile_def"], ["proof (prove)\nusing this:\n  i \\<in> Is\n  i \\<notin> {j}\n  V \\<subseteq> Is\n  {j} \\<subseteq> V\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P i))\n  Is \\<noteq> {} \\<and> (\\<forall>i\\<in>Is. rpr A (P' i))\n  a \\<in> {x, z}\n  b \\<in> {x, z}\n  ?i \\<in> Is - {j} \\<Longrightarrow>\n  z \\<^bsub>(P' ?i)\\<^esub>\\<preceq> x \\<and> (x, z) \\<notin> P' ?i\n  hasw [x, y, z] A\n  \\<forall>i\\<in>Is - {j}.\n     z \\<^bsub>(P i)\\<^esub>\\<preceq> x \\<and> (x, z) \\<notin> P i\n\ngoal (1 subgoal):\n 1. (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n    (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)", "by auto"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (a \\<^bsub>(P' i)\\<^esub>\\<preceq> b) =\n  (a \\<^bsub>(P i)\\<^esub>\\<preceq> b)\n\ngoal (4 subgoals):\n 1. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> a \\<in> {x, z}\n 2. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> b \\<in> {x, z}\n 3. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P\n 4. \\<And>a b.\n       \\<lbrakk>a \\<in> {x, z}; b \\<in> {x, z}\\<rbrakk>\n       \\<Longrightarrow> profile A Is P'", "qed (simp_all add: profileP profileP')"], ["proof (state)\nthis:\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       \\<lbrakk>profile A Is P;\n        \\<And>i.\n           i \\<in> {j} \\<Longrightarrow> x \\<^bsub>(P i)\\<^esub>\\<prec> z;\n        \\<And>i.\n           i \\<in> Is - {j} \\<Longrightarrow>\n           z \\<^bsub>(P i)\\<^esub>\\<prec> x\\<rbrakk>\n       \\<Longrightarrow> x \\<^bsub>(swf P)\\<^esub>\\<prec> z", "with xPz"], ["proof (chain)\npicking this:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> z\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)", "show \"x \\<^bsub>(swf P')\\<^esub>\\<prec> z\""], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P)\\<^esub>\\<prec> z\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<prec> z", "unfolding strict_pref_def"], ["proof (prove)\nusing this:\n  x \\<^bsub>(swf P)\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> swf P\n  \\<lbrakk>?a \\<in> {x, z}; ?b \\<in> {x, z}\\<rbrakk>\n  \\<Longrightarrow> (?a \\<^bsub>(swf P)\\<^esub>\\<preceq> ?b) =\n                    (?a \\<^bsub>(swf P')\\<^esub>\\<preceq> ?b)\n\ngoal (1 subgoal):\n 1. x \\<^bsub>(swf P')\\<^esub>\\<preceq> z \\<and> (z, x) \\<notin> swf P'", "by blast"], ["proof (state)\nthis:\n  x \\<^bsub>(swf P')\\<^esub>\\<prec> z\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  semidecisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. 1 < card V \\<Longrightarrow> False", "with jV VIs Vsd Vmin[where V'=\"?V1\"] V2card threeDist"], ["proof (chain)\npicking this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  semidecisive swf A Is V x y\n  {j} \\<subseteq> Is \\<and>\n  {j} \\<noteq> {} \\<and>\n  (\\<exists>u v.\n      hasw [u, v] A \\<and> semidecisive swf A Is {j} u v) \\<Longrightarrow>\n  card V \\<le> card {j}\n  0 < card (V - {j})\n  card (V - {j}) < card V\n  hasw [x, y, z] A\n  semidecisive swf A Is {j} x z", "show False"], ["proof (prove)\nusing this:\n  {j} \\<subseteq> V\n  V \\<subseteq> Is\n  semidecisive swf A Is V x y\n  {j} \\<subseteq> Is \\<and>\n  {j} \\<noteq> {} \\<and>\n  (\\<exists>u v.\n      hasw [u, v] A \\<and> semidecisive swf A Is {j} u v) \\<Longrightarrow>\n  card V \\<le> card {j}\n  0 < card (V - {j})\n  card (V - {j}) < card V\n  hasw [x, y, z] A\n  semidecisive swf A Is {j} x z\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>j. V = {j}\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "with xyA Vsd"], ["proof (chain)\npicking this:\n  hasw [x, y] A\n  semidecisive swf A Is V x y\n  \\<exists>j. V = {j}", "show ?thesis"], ["proof (prove)\nusing this:\n  hasw [x, y] A\n  semidecisive swf A Is V x y\n  \\<exists>j. V = {j}\n\ngoal (1 subgoal):\n 1. \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v", "by blast"], ["proof (state)\nthis:\n  \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v\n\ngoal:\nNo subgoals!", "qed"], ["", "(* **************************************** *)"], ["", "subsection\\<open>Arrow's General Possibility Theorem\\<close>"], ["", "text\\<open>\n\nFinally we conclude with the celebrated ``possibility'' result. Note that we\nassume the set of individuals is finite; \\cite{Routley:79} relaxes this with\nsome fancier set theory. Having an infinite set of alternatives doesn't\nmatter, though the result is a bit more plausible if we assume finiteness\n\\cite[p54]{Sen:70a}.\n\n\\<close>"], ["", "theorem ArrowGeneralPossibility:\n  assumes has3A: \"has 3 A\"\n      and finiteIs: \"finite Is\"\n      and has2Is: \"has 2 Is\"\n      and iia: \"iia swf A Is\"\n      and swf: \"SWF swf A Is universal_domain\"\n      and wp: \"weak_pareto swf A Is universal_domain\"\n  obtains j where \"dictator swf A Is j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>j.\n        dictator swf A Is j \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using sd_imp_dictator[OF has3A iia swf wp]\n        sd_exists[OF has3A finiteIs has2Is iia swf wp]"], ["proof (prove)\nusing this:\n  \\<lbrakk>hasw [?u, ?v] A; semidecisive swf A Is {?j} ?u ?v\\<rbrakk>\n  \\<Longrightarrow> dictator swf A Is ?j\n  \\<exists>j u v. hasw [u, v] A \\<and> semidecisive swf A Is {j} u v\n\ngoal (1 subgoal):\n 1. (\\<And>j.\n        dictator swf A Is j \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["", "(*<*)"], ["", "end"], ["", "(*>*)"]]}