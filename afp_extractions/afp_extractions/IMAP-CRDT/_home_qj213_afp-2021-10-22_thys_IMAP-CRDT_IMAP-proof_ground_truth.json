{"file_name": "/home/qj213/afp-2021-10-22/thys/IMAP-CRDT/IMAP-proof.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/IMAP-CRDT", "problem_names": ["lemma (in imap) concurrent_operations_commute:\n  assumes \"xs prefix of i\"\n  shows \"hb.concurrent_ops_commute (node_deliver_messages xs)\"", "theorem (in imap) convergence:\n  assumes \"set (node_deliver_messages xs) = set (node_deliver_messages ys)\"\n    and \"xs prefix of i\" \n    and \"ys prefix of j\"\n  shows \"apply_operations xs = apply_operations ys\""], "translations": [["", "lemma (in imap) concurrent_operations_commute:\n  assumes \"xs prefix of i\"\n  shows \"hb.concurrent_ops_commute (node_deliver_messages xs)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "fix a b x y"], ["proof (state)\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "assume \"(a, b) \\<in> set (node_deliver_messages xs)\"\n      \"(x, y) \\<in> set (node_deliver_messages xs)\"\n      \"hb.concurrent (a, b) (x, y)\""], ["proof (state)\nthis:\n  (a, b) \\<in> set (node_deliver_messages xs)\n  (x, y) \\<in> set (node_deliver_messages xs)\n  hb.concurrent (a, b) (x, y)\n\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "hence \"interp_msg (a, b) \\<rhd> interp_msg (x, y) = interp_msg (x, y) \\<rhd> interp_msg (a, b)\""], ["proof (prove)\nusing this:\n  (a, b) \\<in> set (node_deliver_messages xs)\n  (x, y) \\<in> set (node_deliver_messages xs)\n  hb.concurrent (a, b) (x, y)\n\ngoal (1 subgoal):\n 1. interp_msg (a, b) \\<rhd> interp_msg (x, y) =\n    interp_msg (x, y) \\<rhd> interp_msg (a, b)", "apply(unfold interp_msg_def, case_tac \"b\"; case_tac \"y\"; \n          simp add: create_create_commute delete_delete_commute append_append_commute \n          create_append_commute create_expunge_commute create_store_commute \n          expunge_expunge_commute hb.concurrent_def)"], ["proof (prove)\ngoal (15 subgoals):\n 1. \\<And>x11 x12 x21 x22.\n       \\<lbrakk>(a, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Create x11 x12) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Create x11 x12);\n        b = Create x11 x12; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle>\n 2. \\<And>x21 x22 x11 x12.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Create x11 x12) \\<and>\n        \\<not> hb (x, Create x11 x12) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Create x11 x12\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle> =\n                         \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 5. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 6. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 8. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 9. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x41 x42 x43 x31 x32.\n        \\<lbrakk>(a, Expunge x41 x42 x43)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n         \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n         b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Append x31 x32\\<rangle> =\n                          \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle>\nA total of 15 subgoals...", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (15 subgoals):\n 1. \\<And>x11 x12 x21 x22.\n       \\<lbrakk>(a, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Create x11 x12) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Create x11 x12);\n        b = Create x11 x12; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle>\n 2. \\<And>x21 x22 x11 x12.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Create x11 x12) \\<and>\n        \\<not> hb (x, Create x11 x12) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Create x11 x12\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle> =\n                         \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 5. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 6. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 8. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 9. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x41 x42 x43 x31 x32.\n        \\<lbrakk>(a, Expunge x41 x42 x43)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n         \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n         b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Append x31 x32\\<rangle> =\n                          \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle>\nA total of 15 subgoals...", "apply (metis (full_types) \n          create_id_valid create_delete_commute concurrent_create_delete_independent)"], ["proof (prove)\ngoal (14 subgoals):\n 1. \\<And>x21 x22 x11 x12.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Create x11 x12) \\<and>\n        \\<not> hb (x, Create x11 x12) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Create x11 x12\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle> =\n                         \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 5. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 8. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x41 x42 x43 x51 x52 x53.\n        \\<lbrakk>(a, Expunge x41 x42 x43)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n         \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n         b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle> =\n                          \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle>\nA total of 14 subgoals...", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (14 subgoals):\n 1. \\<And>x21 x22 x11 x12.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Create x11 x12) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Create x11 x12) \\<and>\n        \\<not> hb (x, Create x11 x12) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Create x11 x12\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Create x11 x12\\<rangle> =\n                         \\<langle>Create x11 x12\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 5. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 8. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x41 x42 x43 x51 x52 x53.\n        \\<lbrakk>(a, Expunge x41 x42 x43)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n         \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n         b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle> =\n                          \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle>\nA total of 14 subgoals...", "apply (metis (full_types) \n          create_id_valid create_delete_commute concurrent_create_delete_independent)"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x51 x52 x53 x21 x22.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n         \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Delete x21 x22\\<rangle> =\n                          \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 13 subgoals...", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (13 subgoals):\n 1. \\<And>x21 x22 x31 x32.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 4. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 7. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 10. \\<And>x51 x52 x53 x21 x22.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n         \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Delete x21 x22\\<rangle> =\n                          \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 13 subgoals...", "apply (metis \n          append_id_valid append_delete_ids_imply_messages_same \n          concurrent_append_delete_independent_technical delete_append_commute)"], ["proof (prove)\ngoal (12 subgoals):\n 1. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x31 x32.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n         \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Append x31 x32\\<rangle> =\n                          \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 12 subgoals...", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (12 subgoals):\n 1. \\<And>x21 x22 x41 x42 x43.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 3. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 6. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 9. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x31 x32.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n         \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Append x31 x32\\<rangle> =\n                          \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 12 subgoals...", "apply (metis \n          concurrent_expunge_delete_independent expunge_id_valid imap.delete_expunge_commute \n          imap_axioms)"], ["proof (prove)\ngoal (11 subgoals):\n 1. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x41 x42 x43.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n         \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle> =\n                          \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 11 subgoals...", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (11 subgoals):\n 1. \\<And>x21 x22 x51 x52 x53.\n       \\<lbrakk>(a, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Delete x21 x22) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Delete x21 x22);\n        b = Delete x21 x22; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle>\n 2. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 5. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 8. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x41 x42 x43.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n         \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Expunge x41 x42 x43\\<rangle> =\n                          \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>\nA total of 11 subgoals...", "apply (metis \n          concurrent_store_delete_independent delete_store_commute store_id_valid)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x51a x52a x53a.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n         \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Store x51a x52a x53a\\<rangle> =\n                          \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (10 subgoals):\n 1. \\<And>x31 x32 x21 x22.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Append x31 x32);\n        b = Append x31 x32; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 4. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 7. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 10. \\<And>x51 x52 x53 x51a x52a x53a.\n        \\<lbrakk>(a, Store x51 x52 x53)\n                 \\<in> set (node_deliver_messages xs);\n         (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n         \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n         \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n         b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n        \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                          \\<langle>Store x51a x52a x53a\\<rangle> =\n                          \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                          \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          append_id_valid append_delete_ids_imply_messages_same \n          concurrent_append_delete_independent_technical delete_append_commute)"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (9 subgoals):\n 1. \\<And>x31 x32 x41 x42 x43.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Append x31 x32);\n        b = Append x31 x32; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 3. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 6. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 9. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          append_id_valid expunge_id_valid append_expunge_ids_imply_messages_same \n          concurrent_append_expunge_independent_technical append_expunge_commute)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (8 subgoals):\n 1. \\<And>x31 x32 x51 x52 x53.\n       \\<lbrakk>(a, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Append x31 x32) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Append x31 x32);\n        b = Append x31 x32; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle>\n 2. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 5. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 8. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          append_id_valid append_store_commute concurrent_append_store_independent store_id_valid)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (7 subgoals):\n 1. \\<And>x41 x42 x43 x21 x22.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 4. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 7. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          concurrent_expunge_delete_independent expunge_id_valid delete_expunge_commute)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (6 subgoals):\n 1. \\<And>x41 x42 x43 x31 x32.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 3. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 6. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          append_expunge_commute append_id_valid concurrent_append_expunge_independent \n          expunge_id_valid)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (5 subgoals):\n 1. \\<And>x41 x42 x43 x51 x52 x53.\n       \\<lbrakk>(a, Expunge x41 x42 x43)\n                \\<in> set (node_deliver_messages xs);\n        (x, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Expunge x41 x42 x43) (x, Store x51 x52 x53) \\<and>\n        \\<not> hb (x, Store x51 x52 x53) (a, Expunge x41 x42 x43);\n        b = Expunge x41 x42 x43; y = Store x51 x52 x53\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle> =\n                         \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle>\n 2. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 5. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          expunge_id_valid expunge_store_commute imap.concurrent_store_expunge_independent \n          imap_axioms store_id_valid)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (4 subgoals):\n 1. \\<And>x51 x52 x53 x21 x22.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Delete x21 x22) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Delete x21 x22) \\<and>\n        \\<not> hb (x, Delete x21 x22) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Delete x21 x22\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Delete x21 x22\\<rangle> =\n                         \\<langle>Delete x21 x22\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 4. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          concurrent_store_delete_independent delete_store_commute store_id_valid)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (3 subgoals):\n 1. \\<And>x51 x52 x53 x31 x32.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Append x31 x32) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Append x31 x32) \\<and>\n        \\<not> hb (x, Append x31 x32) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Append x31 x32\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Append x31 x32\\<rangle> =\n                         \\<langle>Append x31 x32\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 3. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          append_id_valid append_store_commute imap.concurrent_append_store_independent imap_axioms \n          store_id_valid)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (2 subgoals):\n 1. \\<And>x51 x52 x53 x41 x42 x43.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Expunge x41 x42 x43) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Expunge x41 x42 x43) \\<and>\n        \\<not> hb (x, Expunge x41 x42 x43) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Expunge x41 x42 x43\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Expunge x41 x42 x43\\<rangle> =\n                         \\<langle>Expunge x41 x42 x43\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>\n 2. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "apply (metis \n          expunge_id_valid expunge_store_commute imap.concurrent_store_expunge_independent \n          imap_axioms store_id_valid)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "using assms prefix_contains_msg"], ["proof (prove)\nusing this:\n  xs prefix of i\n  \\<lbrakk>?es prefix of ?i;\n   ?m \\<in> set (node_deliver_messages ?es)\\<rbrakk>\n  \\<Longrightarrow> Deliver ?m \\<in> set ?es\n\ngoal (1 subgoal):\n 1. \\<And>x51 x52 x53 x51a x52a x53a.\n       \\<lbrakk>(a, Store x51 x52 x53) \\<in> set (node_deliver_messages xs);\n        (x, Store x51a x52a x53a) \\<in> set (node_deliver_messages xs);\n        \\<not> hb (a, Store x51 x52 x53) (x, Store x51a x52a x53a) \\<and>\n        \\<not> hb (x, Store x51a x52a x53a) (a, Store x51 x52 x53);\n        b = Store x51 x52 x53; y = Store x51a x52a x53a\\<rbrakk>\n       \\<Longrightarrow> \\<langle>Store x51 x52 x53\\<rangle> \\<rhd>\n                         \\<langle>Store x51a x52a x53a\\<rangle> =\n                         \\<langle>Store x51a x52a x53a\\<rangle> \\<rhd>\n                         \\<langle>Store x51 x52 x53\\<rangle>", "by (metis concurrent_store_store_independent store_id_valid \n          store_store_commute)"], ["proof (state)\nthis:\n  interp_msg (a, b) \\<rhd> interp_msg (x, y) =\n  interp_msg (x, y) \\<rhd> interp_msg (a, b)\n\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "}"], ["proof (state)\nthis:\n  \\<lbrakk>(?a5, ?b5) \\<in> set (node_deliver_messages xs);\n   (?x5, ?y5) \\<in> set (node_deliver_messages xs);\n   hb.concurrent (?a5, ?b5) (?x5, ?y5)\\<rbrakk>\n  \\<Longrightarrow> interp_msg (?a5, ?b5) \\<rhd> interp_msg (?x5, ?y5) =\n                    interp_msg (?x5, ?y5) \\<rhd> interp_msg (?a5, ?b5)\n\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>(?a5, ?b5) \\<in> set (node_deliver_messages xs);\n   (?x5, ?y5) \\<in> set (node_deliver_messages xs);\n   hb.concurrent (?a5, ?b5) (?x5, ?y5)\\<rbrakk>\n  \\<Longrightarrow> interp_msg (?a5, ?b5) \\<rhd> interp_msg (?x5, ?y5) =\n                    interp_msg (?x5, ?y5) \\<rhd> interp_msg (?a5, ?b5)\n\ngoal (1 subgoal):\n 1. hb.concurrent_ops_commute (node_deliver_messages xs)", "by(fastforce simp: hb.concurrent_ops_commute_def)"], ["proof (state)\nthis:\n  hb.concurrent_ops_commute (node_deliver_messages xs)\n\ngoal:\nNo subgoals!", "qed"], ["", "theorem (in imap) convergence:\n  assumes \"set (node_deliver_messages xs) = set (node_deliver_messages ys)\"\n    and \"xs prefix of i\" \n    and \"ys prefix of j\"\n  shows \"apply_operations xs = apply_operations ys\""], ["proof (prove)\ngoal (1 subgoal):\n 1. apply_operations xs = apply_operations ys", "using assms"], ["proof (prove)\nusing this:\n  set (node_deliver_messages xs) = set (node_deliver_messages ys)\n  xs prefix of i\n  ys prefix of j\n\ngoal (1 subgoal):\n 1. apply_operations xs = apply_operations ys", "by(auto simp add: apply_operations_def intro: hb.convergence_ext \n      concurrent_operations_commute node_deliver_messages_distinct hb_consistent_prefix)"], ["", "context imap begin"], ["", "sublocale sec: strong_eventual_consistency weak_hb hb interp_msg\n  \"\\<lambda>ops.\\<exists>xs i. xs prefix of i \\<and> node_deliver_messages xs = ops\" \"\\<lambda>x.({},{})\""], ["proof (prove)\ngoal (1 subgoal):\n 1. strong_eventual_consistency weak_hb hb interp_msg\n     (\\<lambda>ops.\n         \\<exists>xs i.\n            xs prefix of i \\<and> node_deliver_messages xs = ops)\n     (\\<lambda>x. ({}, {}))", "apply(standard; clarsimp simp add: hb_consistent_prefix node_deliver_messages_distinct\n      concurrent_operations_commute)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>xs a b state xsa x.\n       \\<lbrakk>hb.apply_operations xs (\\<lambda>x. ({}, {})) = Some state;\n        node_deliver_messages xsa = xs @ [(a, b)]; xsa prefix of x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y. interp_msg (a, b) state = Some y\n 2. \\<And>xs a b xsa x.\n       \\<lbrakk>node_deliver_messages xsa = xs @ [(a, b)];\n        xsa prefix of x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xsa.\n                            Ex ((prefix of) xsa) \\<and>\n                            node_deliver_messages xsa = xs", "apply(metis (no_types, lifting) apply_operations_def bind.bind_lunit not_None_eq\n      hb.apply_operations_Snoc kleisli_def apply_operations_never_fails interp_msg_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>xs a b xsa x.\n       \\<lbrakk>node_deliver_messages xsa = xs @ [(a, b)];\n        xsa prefix of x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xsa.\n                            Ex ((prefix of) xsa) \\<and>\n                            node_deliver_messages xsa = xs", "using drop_last_message"], ["proof (prove)\nusing this:\n  \\<lbrakk>?evts prefix of ?i;\n   node_deliver_messages ?evts = ?msgs @ [?last_msg]\\<rbrakk>\n  \\<Longrightarrow> \\<exists>pre.\n                       pre prefix of ?i \\<and>\n                       node_deliver_messages pre = ?msgs\n\ngoal (1 subgoal):\n 1. \\<And>xs a b xsa x.\n       \\<lbrakk>node_deliver_messages xsa = xs @ [(a, b)];\n        xsa prefix of x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>xsa.\n                            Ex ((prefix of) xsa) \\<and>\n                            node_deliver_messages xsa = xs", "apply blast"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "end"], ["", "end"]]}