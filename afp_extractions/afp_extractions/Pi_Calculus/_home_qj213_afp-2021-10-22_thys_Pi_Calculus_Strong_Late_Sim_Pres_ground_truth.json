{"file_name": "/home/qj213/afp-2021-10-22/thys/Pi_Calculus/Strong_Late_Sim_Pres.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Pi_Calculus", "problem_names": ["lemma tauPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"(P, Q) \\<in> Rel\"\n\n  shows \"\\<tau>.(P) \\<leadsto>[Rel] \\<tau>.(Q)\"", "lemma inputPres:\n  fixes P    :: pi\n  and   x    :: name\n  and   Q    :: pi\n  and   a    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"\\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel\"\n  and     Eqvt: \"eqvt Rel\"\n\n  shows \"a<x>.P \\<leadsto>[Rel] a<x>.Q\"", "lemma outputPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"(P, Q) \\<in> Rel\"\n\n  shows \"a{b}.P \\<leadsto>[Rel] a{b}.Q\"", "lemma matchPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"[a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q\"", "lemma mismatchPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"[a\\<noteq>b]P \\<leadsto>[Rel'] [a\\<noteq>b]Q\"", "lemma sumPres:\n  fixes P :: pi\n  and   Q :: pi\n  and   R :: pi\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Id \\<subseteq> Rel'\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R\"", "lemma parCompose:\n  fixes P     :: pi\n  and   Q     :: pi\n  and   R     :: pi\n  and   T     :: pi\n  and   Rel   :: \"(pi \\<times> pi) set\"\n  and   Rel'  :: \"(pi \\<times> pi) set\"\n  and   Rel'' :: \"(pi \\<times> pi) set\"\n  \n  assumes PSimQ:    \"P \\<leadsto>[Rel] Q\"\n  and     RSimT:    \"R \\<leadsto>[Rel'] T\"\n  and     PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     RRel'T:   \"(R, T) \\<in> Rel'\"\n  and     Par:      \"\\<And>P Q R T. \\<lbrakk>(P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> T) \\<in> Rel''\"\n  and     Res:      \"\\<And>P Q a. (P, Q) \\<in> Rel'' \\<Longrightarrow> (<\\<nu>a>P, <\\<nu>a>Q) \\<in> Rel''\"\n  and     EqvtRel:  \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n  and     EqvtRel'': \"eqvt Rel''\"\n\n  shows \"P \\<parallel> R \\<leadsto>[Rel''] Q \\<parallel> T\"", "lemma parPres:\n  fixes P   :: pi\n  and   Q   :: pi\n  and   R   :: pi\n  and   a   :: name\n  and   b   :: name\n  and   Rel :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n  \n  assumes PSimQ:    \"P \\<leadsto>[Rel] Q\"\n  and     PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     Par:      \"\\<And>P Q R. (P, Q) \\<in> Rel \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> R) \\<in> Rel'\"\n  and     Res:      \"\\<And>P Q a. (P, Q) \\<in> Rel' \\<Longrightarrow> (<\\<nu>a>P, <\\<nu>a>Q) \\<in> Rel'\"\n  and     EqvtRel:  \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n\n  shows \"P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R\"", "lemma resDerivative:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: subject\n  and   x    :: name\n  and   y    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n  \n  assumes Der: \"derivative P Q a x Rel\"\n  and     Rel: \"\\<And>(P::pi) (Q::pi) (x::name). (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\"\n  and     Eqv: \"eqvt Rel\"\n\n  shows \"derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'\"", "lemma resPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   x    :: name\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     ResRel: \"\\<And>(P::pi) (Q::pi) (x::name). (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\"\n  and     RelRel': \"Rel \\<subseteq> Rel'\"\n  and     EqvtRel: \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n\n  shows \"<\\<nu>x>P \\<leadsto>[Rel'] <\\<nu>x>Q\"", "lemma resChainI:\n  fixes P   :: pi\n  and   Q   :: pi\n  and   Rel :: \"(pi \\<times> pi) set\"\n  and   xs  :: \"name list\"\n\n  assumes PRelQ:   \"P \\<leadsto>[Rel] Q\"\n  and     eqvtRel: \"eqvt Rel\"\n  and     Res:     \"\\<And>P Q x. (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel\"\n\n  shows \"(resChain xs) P \\<leadsto>[Rel] (resChain xs) Q\"", "lemma bangPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n \n  assumes PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     Sim:      \"\\<And>P Q. (P, Q) \\<in> Rel \\<Longrightarrow> P \\<leadsto>[Rel] Q\"\n  and     eqvtRel:  \"eqvt Rel\"\n\n  shows \"!P \\<leadsto>[bangRel Rel] !Q\""], "translations": [["", "lemma tauPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"(P, Q) \\<in> Rel\"\n\n  shows \"\\<tau>.(P) \\<leadsto>[Rel] \\<tau>.(Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau>.P \\<leadsto>[Rel] \\<tau>.Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<tau>.P \\<leadsto>[Rel] \\<tau>.Q", "show \"\\<tau>.(P) \\<leadsto>[Rel] \\<tau>.(Q)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau>.P \\<leadsto>[Rel] \\<tau>.Q", "proof(induct rule: simCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>\\<tau>.Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> \\<tau>.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<tau>.P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel\n 2. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "case(Bound a x Q')"], ["proof (state)\nthis:\n  \\<tau>.Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> \\<tau>.P\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>\\<tau>.Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> \\<tau>.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<tau>.P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel\n 2. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "have \"\\<tau>.(Q) \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau>.Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<tau>.Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>\\<tau>.Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> \\<tau>.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<tau>.P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel\n 2. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "hence False"], ["proof (prove)\nusing this:\n  \\<tau>.Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>\\<tau>.Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> \\<tau>.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            \\<tau>.P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel\n 2. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<tau>.P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' a x Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<tau>.P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' a x Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "case(Free \\<alpha> Q')"], ["proof (state)\nthis:\n  \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "have \"\\<tau>.(Q) \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  \\<tau>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "proof(induct rule: tauCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = \\<tau>; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "case cTau"], ["proof (state)\nthis:\n  \\<alpha> = \\<tau>\n  Q = Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = \\<tau>; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "have \"\\<tau>.(P) \\<longmapsto> \\<tau> \\<prec> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P", "by(rule Late_Semantics.Tau)"], ["proof (state)\nthis:\n  \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = \\<tau>; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "with PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P", "show ?case"], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', Q) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<tau>.P \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', Q) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     \\<tau>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<tau>.P \\<leadsto>[Rel] \\<tau>.Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma inputPres:\n  fixes P    :: pi\n  and   x    :: name\n  and   Q    :: pi\n  and   a    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"\\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel\"\n  and     Eqvt: \"eqvt Rel\"\n\n  shows \"a<x>.P \\<leadsto>[Rel] a<x>.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a<x>.P \\<leadsto>[Rel] a<x>.Q", "using Eqvt"], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. a<x>.P \\<leadsto>[Rel] a<x>.Q", "proof(induct rule: simCasesCont[where C=\"(x, a, P, Q)\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa xa Q'.\n       \\<lbrakk>a<x>.Q \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q';\n        xa \\<sharp> a<x>.P; xa \\<sharp> a<x>.Q; xa \\<sharp> aa;\n        xa \\<sharp> (x, a, P, Q)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a<x>.P \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa xa Rel\n 2. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "case(Bound b y Q')"], ["proof (state)\nthis:\n  a<x>.Q \\<longmapsto> b\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n  y \\<sharp> a<x>.P\n  y \\<sharp> a<x>.Q\n  y \\<sharp> b\n  y \\<sharp> (x, a, P, Q)\n\ngoal (2 subgoals):\n 1. \\<And>aa xa Q'.\n       \\<lbrakk>a<x>.Q \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q';\n        xa \\<sharp> a<x>.P; xa \\<sharp> a<x>.Q; xa \\<sharp> aa;\n        xa \\<sharp> (x, a, P, Q)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a<x>.P \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa xa Rel\n 2. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "from \\<open>y \\<sharp> (x, a, P, Q)\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> (x, a, P, Q)", "have \"y \\<noteq> x\" \"y \\<noteq> a\" \"y \\<sharp> P\" \"y \\<sharp> Q\""], ["proof (prove)\nusing this:\n  y \\<sharp> (x, a, P, Q)\n\ngoal (1 subgoal):\n 1. (y \\<noteq> x &&& y \\<noteq> a) &&& y \\<sharp> P &&& y \\<sharp> Q", "by simp+"], ["proof (state)\nthis:\n  y \\<noteq> x\n  y \\<noteq> a\n  y \\<sharp> P\n  y \\<sharp> Q\n\ngoal (2 subgoals):\n 1. \\<And>aa xa Q'.\n       \\<lbrakk>a<x>.Q \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q';\n        xa \\<sharp> a<x>.P; xa \\<sharp> a<x>.Q; xa \\<sharp> aa;\n        xa \\<sharp> (x, a, P, Q)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a<x>.P \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa xa Rel\n 2. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "from \\<open>a<x>.Q \\<longmapsto>b\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\\<close> \\<open>y \\<noteq> a\\<close> \\<open>y \\<noteq> x\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  a<x>.Q \\<longmapsto> b\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n  y \\<noteq> a\n  y \\<noteq> x\n  y \\<sharp> Q", "show ?case"], ["proof (prove)\nusing this:\n  a<x>.Q \\<longmapsto> b\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n  y \\<noteq> a\n  y \\<noteq> x\n  y \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a<x>.P \\<longmapsto> b\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' b y Rel", "proof(induct rule: inputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "case cInput"], ["proof (state)\nthis:\n  b = InputS a\n  Q' = [(x, y)] \\<bullet> Q\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "have \"a<x>.P \\<longmapsto> a<x> \\<prec> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a<x>.P \\<longmapsto> a<x> \\<prec> P", "by(rule Input)"], ["proof (state)\nthis:\n  a<x>.P \\<longmapsto> a<x> \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "hence \"a<x>.P \\<longmapsto> a<y> \\<prec> ([(x, y)] \\<bullet> P)\""], ["proof (prove)\nusing this:\n  a<x>.P \\<longmapsto> a<x> \\<prec> P\n\ngoal (1 subgoal):\n 1. a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P", "using \\<open>y \\<sharp> P\\<close>"], ["proof (prove)\nusing this:\n  a<x>.P \\<longmapsto> a<x> \\<prec> P\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P", "by(simp add: alphaBoundResidual)"], ["proof (state)\nthis:\n  a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "moreover"], ["proof (state)\nthis:\n  a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "have \"derivative ([(x, y)] \\<bullet> P) ([(x, y)] \\<bullet> Q) (InputS a) y Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. derivative ([(x, y)] \\<bullet> P) ([(x, y)] \\<bullet> Q) (InputS a) y\n     Rel", "proof(auto simp add: derivative_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u])\n       \\<in> Rel", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u.\n       (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u])\n       \\<in> Rel", "show \"(([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "proof(cases \"y=u\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "assume \"y = u\""], ["proof (state)\nthis:\n  y = u\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  y = u\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "have \"([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel", "have \"(P[x::=x], Q[x::=x]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=x], Q[x::=x]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=x], Q[x::=x]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "hence \"(P, Q) \\<in> Rel\""], ["proof (prove)\nusing this:\n  (P[x::=x], Q[x::=x]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "with Eqvt"], ["proof (chain)\npicking this:\n  eqvt Rel\n  (P, Q) \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  eqvt Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "by(rule eqvtRelI)"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  y = u\n  ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  y = u\n  ([(y, x)] \\<bullet> P, [(y, x)] \\<bullet> Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "assume yinequ: \"y \\<noteq> u\""], ["proof (state)\nthis:\n  y \\<noteq> u\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "proof(cases \"x = u\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "assume \"x = u\""], ["proof (state)\nthis:\n  x = u\n\ngoal (2 subgoals):\n 1. x = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "moreover"], ["proof (state)\nthis:\n  x = u\n\ngoal (2 subgoals):\n 1. x = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "have \"(([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel", "have \"(P[x::=y], Q[x::=y]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=y], Q[x::=y]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=y], Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "with Eqvt"], ["proof (chain)\npicking this:\n  eqvt Rel\n  (P[x::=y], Q[x::=y]) \\<in> Rel", "have \"([(y, x)] \\<bullet> (P[x::=y]), [(y, x)] \\<bullet> (Q[x::=y])) \\<in> Rel\""], ["proof (prove)\nusing this:\n  eqvt Rel\n  (P[x::=y], Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P[x::=y], [(y, x)] \\<bullet> Q[x::=y]) \\<in> Rel", "by(rule eqvtRelI)"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> P[x::=y], [(y, x)] \\<bullet> Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "with \\<open>y \\<noteq> x\\<close>"], ["proof (chain)\npicking this:\n  y \\<noteq> x\n  ([(y, x)] \\<bullet> P[x::=y], [(y, x)] \\<bullet> Q[x::=y]) \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<noteq> x\n  ([(y, x)] \\<bullet> P[x::=y], [(y, x)] \\<bullet> Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "by(simp add: eqvt_subs name_calc)"], ["proof (state)\nthis:\n  (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. x = u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n 2. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "ultimately"], ["proof (chain)\npicking this:\n  x = u\n  (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  x = u\n  (([(y, x)] \\<bullet> P)[y::=x], ([(y, x)] \\<bullet> Q)[y::=x]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "assume xinequ: \"x \\<noteq> u\""], ["proof (state)\nthis:\n  x \\<noteq> u\n\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "hence \"(([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<noteq> u\n\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel", "have \"(P[x::=u], Q[x::=u]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>y. (P[x::=y], Q[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=u], Q[x::=u]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel", "with Eqvt"], ["proof (chain)\npicking this:\n  eqvt Rel\n  (P[x::=u], Q[x::=u]) \\<in> Rel", "have \"([(y, x)] \\<bullet> (P[x::=u]), [(y, x)] \\<bullet> (Q[x::=u])) \\<in> Rel\""], ["proof (prove)\nusing this:\n  eqvt Rel\n  (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, x)] \\<bullet> P[x::=u], [(y, x)] \\<bullet> Q[x::=u]) \\<in> Rel", "by(rule eqvtRelI)"], ["proof (state)\nthis:\n  ([(y, x)] \\<bullet> P[x::=u], [(y, x)] \\<bullet> Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel", "with \\<open>y \\<noteq> x\\<close>  xinequ yinequ"], ["proof (chain)\npicking this:\n  y \\<noteq> x\n  x \\<noteq> u\n  y \\<noteq> u\n  ([(y, x)] \\<bullet> P[x::=u], [(y, x)] \\<bullet> Q[x::=u]) \\<in> Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  y \\<noteq> x\n  x \\<noteq> u\n  y \\<noteq> u\n  ([(y, x)] \\<bullet> P[x::=u], [(y, x)] \\<bullet> Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel", "by(simp add: eqvt_subs name_calc)"], ["proof (state)\nthis:\n  (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. x \\<noteq> u \\<Longrightarrow>\n    (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "thus ?thesis"], ["proof (prove)\nusing this:\n  (([(y, x)] \\<bullet> P)[y::=u], ([(y, x)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel", "by simp"], ["proof (state)\nthis:\n  (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (([(x, y)] \\<bullet> P)[y::=u], ([(x, y)] \\<bullet> Q)[y::=u]) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  derivative ([(x, y)] \\<bullet> P) ([(x, y)] \\<bullet> Q) (InputS a) y Rel\n\ngoal (1 subgoal):\n 1. \\<lbrakk>b = InputS a; Q' = [(x, y)] \\<bullet> Q\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n                         derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y\n                          Rel", "ultimately"], ["proof (chain)\npicking this:\n  a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P\n  derivative ([(x, y)] \\<bullet> P) ([(x, y)] \\<bullet> Q) (InputS a) y Rel", "show ?case"], ["proof (prove)\nusing this:\n  a<x>.P \\<longmapsto> a<y> \\<prec> [(x, y)] \\<bullet> P\n  derivative ([(x, y)] \\<bullet> P) ([(x, y)] \\<bullet> Q) (InputS a) y Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n       derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     a<x>.P \\<longmapsto> a<y> \\<prec> P' \\<and>\n     derivative P' ([(x, y)] \\<bullet> Q) (InputS a) y Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     a<x>.P \\<longmapsto> b\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' b y Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "case(Free \\<alpha> Q')"], ["proof (state)\nthis:\n  a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "have \"a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "hence False"], ["proof (prove)\nusing this:\n  a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a<x>.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     a<x>.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma outputPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PRelQ: \"(P, Q) \\<in> Rel\"\n\n  shows \"a{b}.P \\<leadsto>[Rel] a{b}.Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a{b}.P \\<leadsto>[Rel] a{b}.Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. a{b}.P \\<leadsto>[Rel] a{b}.Q", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. a{b}.P \\<leadsto>[Rel] a{b}.Q", "proof(induct rule: simCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>a{b}.Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> a{b}.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a{b}.P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel\n 2. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "case(Bound c x Q')"], ["proof (state)\nthis:\n  a{b}.Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> a{b}.P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>a{b}.Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> a{b}.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a{b}.P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel\n 2. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "have \"a{b}.Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a{b}.Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  a{b}.Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>a{b}.Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> a{b}.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a{b}.P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel\n 2. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "hence False"], ["proof (prove)\nusing this:\n  a{b}.Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. False", "by auto"], ["proof (state)\nthis:\n  False\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>a{b}.Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> a{b}.P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            a{b}.P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel\n 2. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  False\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a{b}.P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' c x Rel", "by simp"], ["proof (state)\nthis:\n  \\<exists>P'.\n     a{b}.P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' c x Rel\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "case(Free \\<alpha> Q')"], ["proof (state)\nthis:\n  a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "have \"a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "thus ?case"], ["proof (prove)\nusing this:\n  a{b}.Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel", "proof(induct rule: outputCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = a[b]; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a{b}.P \\<longmapsto> a[b] \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "case cOutput"], ["proof (state)\nthis:\n  \\<alpha> = a[b]\n  Q = Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = a[b]; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a{b}.P \\<longmapsto> a[b] \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "have \"a{b}.P \\<longmapsto> a[b] \\<prec> P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. a{b}.P \\<longmapsto> a[b] \\<prec> P", "by(rule Late_Semantics.Output)"], ["proof (state)\nthis:\n  a{b}.P \\<longmapsto> a[b] \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<lbrakk>\\<alpha> = a[b]; Q = Q'\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         a{b}.P \\<longmapsto> a[b] \\<prec> P' \\<and>\n                         (P', Q) \\<in> Rel", "with PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  a{b}.P \\<longmapsto> a[b] \\<prec> P", "show ?case"], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  a{b}.P \\<longmapsto> a[b] \\<prec> P\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       a{b}.P \\<longmapsto> a[b] \\<prec> P' \\<and> (P', Q) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'. a{b}.P \\<longmapsto> a[b] \\<prec> P' \\<and> (P', Q) \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     a{b}.P \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  a{b}.P \\<leadsto>[Rel] a{b}.Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma matchPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"[a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. [a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q", "proof(induct rule: simCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<frown>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<frown>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<frown>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Bound c x Q')"], ["proof (state)\nthis:\n  [a\\<frown>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> [a\\<frown>b]P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<frown>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<frown>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<frown>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"x \\<sharp>  [a\\<frown>b]P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> [a\\<frown>b]P", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> [a\\<frown>b]P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<frown>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<frown>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<frown>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "hence xFreshP: \"x \\<sharp> P\""], ["proof (prove)\nusing this:\n  x \\<sharp> [a\\<frown>b]P\n\ngoal (1 subgoal):\n 1. x \\<sharp> P", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<frown>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<frown>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<frown>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"[a\\<frown>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<frown>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  [a\\<frown>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<frown>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<frown>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<frown>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  [a\\<frown>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<frown>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' c x Rel'", "proof(induct rule: matchCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "case cMatch"], ["proof (state)\nthis:\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  a = b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "have \"Q \\<longmapsto>c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "with PSimQ xFreshP"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  x \\<sharp> P\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto>c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\"\n                                     and Pderivative: \"derivative P' Q' c x Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  x \\<sharp> P\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n         derivative P' Q' c x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'", "have \"[a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'", "by(rule Late_Semantics.Match)"], ["proof (state)\nthis:\n  [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "moreover"], ["proof (state)\nthis:\n  [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "from Pderivative \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  derivative P' Q' c x Rel\n  Rel \\<subseteq> Rel'", "have \"derivative P' Q' c x Rel'\""], ["proof (prove)\nusing this:\n  derivative P' Q' c x Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. derivative P' Q' c x Rel'", "by(cases c) (auto simp add: derivative_def)"], ["proof (state)\nthis:\n  derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "ultimately"], ["proof (chain)\npicking this:\n  [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel'", "show ?case"], ["proof (prove)\nusing this:\n  [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' c x Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<frown>a]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' c x Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<frown>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Free \\<alpha> Q')"], ["proof (state)\nthis:\n  [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"[a\\<frown>b]Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  [a\\<frown>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q') \\<in> Rel'", "proof(induct rule: matchCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "case cMatch"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  a = b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "have \"Q \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "with PSimQ"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto> \\<alpha> \\<prec> P'\"\n                             and PRel: \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'", "have \"[a\\<frown>a]P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P'", "by(rule Late_Semantics.Match)"], ["proof (state)\nthis:\n  [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a = b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "with PRel \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<frown>a]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<frown>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  [a\\<frown>b]P \\<leadsto>[Rel'] [a\\<frown>b]Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma mismatchPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: name\n  and   b    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"[a\\<noteq>b]P \\<leadsto>[Rel'] [a\\<noteq>b]Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<noteq>b]P \\<leadsto>[Rel'] [a\\<noteq>b]Q", "proof(induct rule: simCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<noteq>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<noteq>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<noteq>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Bound c x Q')"], ["proof (state)\nthis:\n  [a\\<noteq>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> [a\\<noteq>b]P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<noteq>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<noteq>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<noteq>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"x \\<sharp> [a\\<noteq>b]P\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> [a\\<noteq>b]P", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> [a\\<noteq>b]P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<noteq>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<noteq>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<noteq>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "hence xFreshP: \"x \\<sharp> P\""], ["proof (prove)\nusing this:\n  x \\<sharp> [a\\<noteq>b]P\n\ngoal (1 subgoal):\n 1. x \\<sharp> P", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>aa y Q'.\n       \\<lbrakk>[a\\<noteq>b]Q \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> [a\\<noteq>b]P\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            [a\\<noteq>b]P \\<longmapsto> aa\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa y Rel'\n 2. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "from \\<open>[a\\<noteq>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  [a\\<noteq>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "show ?case"], ["proof (prove)\nusing this:\n  [a\\<noteq>b]Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' c x Rel'", "proof(induct rule: mismatchCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "case cMismatch"], ["proof (state)\nthis:\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  a \\<noteq> b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "have \"Q \\<longmapsto>c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "with PSimQ xFreshP"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  x \\<sharp> P\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto>c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\"\n                                   and Pderivative: \"derivative P' Q' c x Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  x \\<sharp> P\n  Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n         derivative P' Q' c x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "from PTrans \\<open>a \\<noteq> b\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  a \\<noteq> b", "have \"[a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  a \\<noteq> b\n\ngoal (1 subgoal):\n 1. [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'", "by(rule Late_Semantics.Mismatch)"], ["proof (state)\nthis:\n  [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "moreover"], ["proof (state)\nthis:\n  [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "from Pderivative \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  derivative P' Q' c x Rel\n  Rel \\<subseteq> Rel'", "have \"derivative P' Q' c x Rel'\""], ["proof (prove)\nusing this:\n  derivative P' Q' c x Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. derivative P' Q' c x Rel'", "by(cases c) (auto simp add: derivative_def)"], ["proof (state)\nthis:\n  derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n     a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' Q' c x Rel'", "ultimately"], ["proof (chain)\npicking this:\n  [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel'", "show ?case"], ["proof (prove)\nusing this:\n  [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' c x Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' c x Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<noteq>b]P \\<longmapsto> c\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' c x Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Free \\<alpha> Q')"], ["proof (state)\nthis:\n  [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"[a\\<noteq>b]Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  [a\\<noteq>b]Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q') \\<in> Rel'", "proof(induct rule: mismatchCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "case cMismatch"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  a \\<noteq> b\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "have \"Q \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "with PSimQ"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto> \\<alpha> \\<prec> P'\"\n                           and PRel: \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "from PTrans \\<open>a \\<noteq> b\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  a \\<noteq> b", "have \"[a\\<noteq>b]P \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  a \\<noteq> b\n\ngoal (1 subgoal):\n 1. [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P'", "by(rule Late_Semantics.Mismatch)"], ["proof (state)\nthis:\n  [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q'; a \\<noteq> b\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                         (P', Q') \\<in> Rel'", "with PRel \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n  [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     [a\\<noteq>b]P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma sumPres:\n  fixes P :: pi\n  and   Q :: pi\n  and   R :: pi\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     \"Id \\<subseteq> Rel'\"\n  and     \"Rel \\<subseteq> Rel'\"\n\n  shows \"P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R", "proof(induct rule: simCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>Q \\<oplus>\n                R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> P \\<oplus> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<oplus>\n                            R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel'\n 2. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Bound a x QR)"], ["proof (state)\nthis:\n  Q \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n  x \\<sharp> P \\<oplus> R\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>Q \\<oplus>\n                R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> P \\<oplus> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<oplus>\n                            R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel'\n 2. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"x \\<sharp> P \\<oplus> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<oplus> R", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> P \\<oplus> R\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>Q \\<oplus>\n                R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> P \\<oplus> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<oplus>\n                            R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel'\n 2. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<oplus> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>Q \\<oplus>\n                R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> P \\<oplus> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<oplus>\n                            R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel'\n 2. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"Q \\<oplus> R \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<oplus>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR", "by fact"], ["proof (state)\nthis:\n  Q \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (2 subgoals):\n 1. \\<And>a y Q'.\n       \\<lbrakk>Q \\<oplus>\n                R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        y \\<sharp> P \\<oplus> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<oplus>\n                            R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a y Rel'\n 2. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  Q \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "proof(induct rule: sumCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "case cSum1"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "have \"Q \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "with xFreshP PSimQ"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR", "obtain P' where PTrans: \"P \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\"\n                                     and Pderivative: \"derivative P' QR a x Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n         derivative P' QR a x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' QR a x Rel\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'", "have \"P \\<oplus> R \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (1 subgoal):\n 1. P \\<oplus>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'", "by(rule Late_Semantics.Sum1)"], ["proof (state)\nthis:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "moreover"], ["proof (state)\nthis:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "from Pderivative \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  derivative P' QR a x Rel\n  Rel \\<subseteq> Rel'", "have \"derivative P' QR a x Rel'\""], ["proof (prove)\nusing this:\n  derivative P' QR a x Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. derivative P' QR a x Rel'", "by(cases a) (auto simp add: derivative_def)"], ["proof (state)\nthis:\n  derivative P' QR a x Rel'\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'\n 2. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "ultimately"], ["proof (chain)\npicking this:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' QR a x Rel'", "show ?case"], ["proof (prove)\nusing this:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' QR a x Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' QR a x Rel'\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "case cSum2"], ["proof (state)\nthis:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "from \\<open>R \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\\<close>"], ["proof (chain)\npicking this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR", "have \"P \\<oplus> R \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. P \\<oplus>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR", "by(rule Sum2)"], ["proof (state)\nthis:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "using \\<open>Id \\<subseteq> Rel'\\<close>"], ["proof (prove)\nusing this:\n  P \\<oplus> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> QR\n  Id \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' QR a x Rel'", "by(blast intro: derivativeReflexive)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' QR a x Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' QR a x Rel'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "case(Free \\<alpha> QR)"], ["proof (state)\nthis:\n  Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "have \"Q \\<oplus> R \\<longmapsto>\\<alpha> \\<prec> QR\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR", "by fact"], ["proof (state)\nthis:\n  Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  Q \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "proof(induct rule: sumCases)"], ["proof (state)\ngoal (2 subgoals):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'\n 2. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "case cSum1"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'\n 2. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "have \"Q \\<longmapsto>\\<alpha> \\<prec> QR\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'\n 2. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "with PSimQ"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> QR", "obtain P' where PTrans: \"P \\<longmapsto>\\<alpha> \\<prec> P'\" and PRel: \"(P', QR) \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', QR) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', QR) \\<in> Rel\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'\n 2. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'", "have \"P \\<oplus> R \\<longmapsto>\\<alpha> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P'", "by(rule Late_Semantics.Sum1)"], ["proof (state)\nthis:\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (2 subgoals):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'\n 2. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "with PRel \\<open>Rel \\<subseteq> Rel'\\<close>"], ["proof (chain)\npicking this:\n  (P', QR) \\<in> Rel\n  Rel \\<subseteq> Rel'\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P'", "show ?case"], ["proof (prove)\nusing this:\n  (P', QR) \\<in> Rel\n  Rel \\<subseteq> Rel'\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', QR) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "case cSum2"], ["proof (state)\nthis:\n  R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "from \\<open>R \\<longmapsto>\\<alpha> \\<prec> QR\\<close>"], ["proof (chain)\npicking this:\n  R \\<longmapsto> \\<alpha> \\<prec> QR", "have \"P \\<oplus> R \\<longmapsto>\\<alpha> \\<prec> QR\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR", "by(rule Sum2)"], ["proof (state)\nthis:\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. R \\<longmapsto> \\<alpha> \\<prec> QR \\<Longrightarrow>\n    \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "thus ?case"], ["proof (prove)\nusing this:\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "using \\<open>Id \\<subseteq> Rel'\\<close>"], ["proof (prove)\nusing this:\n  P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> QR\n  Id \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QR) \\<in> Rel'", "by(blast intro: derivativeReflexive)"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', QR) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<oplus> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', QR) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P \\<oplus> R \\<leadsto>[Rel'] Q \\<oplus> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parCompose:\n  fixes P     :: pi\n  and   Q     :: pi\n  and   R     :: pi\n  and   T     :: pi\n  and   Rel   :: \"(pi \\<times> pi) set\"\n  and   Rel'  :: \"(pi \\<times> pi) set\"\n  and   Rel'' :: \"(pi \\<times> pi) set\"\n  \n  assumes PSimQ:    \"P \\<leadsto>[Rel] Q\"\n  and     RSimT:    \"R \\<leadsto>[Rel'] T\"\n  and     PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     RRel'T:   \"(R, T) \\<in> Rel'\"\n  and     Par:      \"\\<And>P Q R T. \\<lbrakk>(P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk> \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> T) \\<in> Rel''\"\n  and     Res:      \"\\<And>P Q a. (P, Q) \\<in> Rel'' \\<Longrightarrow> (<\\<nu>a>P, <\\<nu>a>Q) \\<in> Rel''\"\n  and     EqvtRel:  \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n  and     EqvtRel'': \"eqvt Rel''\"\n\n  shows \"P \\<parallel> R \\<leadsto>[Rel''] Q \\<parallel> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel''] Q \\<parallel> T", "using EqvtRel''"], ["proof (prove)\nusing this:\n  eqvt Rel''\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel''] Q \\<parallel> T", "proof(induct rule: simCasesCont[where C=\"()\"])"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a x Q'.\n       \\<lbrakk>Q \\<parallel>\n                T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n        x \\<sharp> P \\<parallel> R; x \\<sharp> Q \\<parallel> T;\n        x \\<sharp> a; x \\<sharp> ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x Rel''\n 2. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "case(Bound a x Q')"], ["proof (state)\nthis:\n  Q \\<parallel>\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> P \\<parallel> R\n  x \\<sharp> Q \\<parallel> T\n  x \\<sharp> a\n  x \\<sharp> ()\n\ngoal (2 subgoals):\n 1. \\<And>a x Q'.\n       \\<lbrakk>Q \\<parallel>\n                T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n        x \\<sharp> P \\<parallel> R; x \\<sharp> Q \\<parallel> T;\n        x \\<sharp> a; x \\<sharp> ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x Rel''\n 2. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "have \"x \\<sharp> P \\<parallel> R\" and \"x \\<sharp> Q \\<parallel> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> R &&& x \\<sharp> Q \\<parallel> T", "by fact+"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> R\n  x \\<sharp> Q \\<parallel> T\n\ngoal (2 subgoals):\n 1. \\<And>a x Q'.\n       \\<lbrakk>Q \\<parallel>\n                T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n        x \\<sharp> P \\<parallel> R; x \\<sharp> Q \\<parallel> T;\n        x \\<sharp> a; x \\<sharp> ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x Rel''\n 2. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\" and \"x \\<sharp> Q\" and \"x \\<sharp> T\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n  x \\<sharp> Q \\<parallel> T\n\ngoal (1 subgoal):\n 1. (x \\<sharp> P &&& x \\<sharp> R) &&& x \\<sharp> Q &&& x \\<sharp> T", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n  x \\<sharp> Q\n  x \\<sharp> T\n\ngoal (2 subgoals):\n 1. \\<And>a x Q'.\n       \\<lbrakk>Q \\<parallel>\n                T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n        x \\<sharp> P \\<parallel> R; x \\<sharp> Q \\<parallel> T;\n        x \\<sharp> a; x \\<sharp> ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x Rel''\n 2. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "have QTTrans: \"Q \\<parallel> T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<parallel>\n    T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<parallel>\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>a x Q'.\n       \\<lbrakk>Q \\<parallel>\n                T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q';\n        x \\<sharp> P \\<parallel> R; x \\<sharp> Q \\<parallel> T;\n        x \\<sharp> a; x \\<sharp> ()\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x Rel''\n 2. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "thus ?case"], ["proof (prove)\nusing this:\n  Q \\<parallel>\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' a x Rel''", "using \\<open>x \\<sharp> Q\\<close> \\<open>x \\<sharp> T\\<close>"], ["proof (prove)\nusing this:\n  Q \\<parallel>\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> Q\n  x \\<sharp> T\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' Q' a x Rel''", "proof(induct rule: parCasesB)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "case(cPar1 Q')"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "have QTrans: \"Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\" and xFreshT: \"x \\<sharp> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' &&&\n    x \\<sharp> T", "by fact+"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> T\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from xFreshP PSimQ QTrans"], ["proof (chain)\npicking this:\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "obtain P' where PTrans:\"P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\"\n                                          and Pderivative: \"derivative P' Q' a x Rel\""], ["proof (prove)\nusing this:\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n         derivative P' Q' a x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' a x Rel\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from PTrans xFreshR"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  x \\<sharp> R", "have \"P \\<parallel> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                          R", "by(rule Late_Semantics.Par1B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from Pderivative xFreshR xFreshT RRel'T"], ["proof (chain)\npicking this:\n  derivative P' Q' a x Rel\n  x \\<sharp> R\n  x \\<sharp> T\n  (R, T) \\<in> Rel'", "have \"derivative (P' \\<parallel> R) (Q' \\<parallel> T) a x Rel''\""], ["proof (prove)\nusing this:\n  derivative P' Q' a x Rel\n  x \\<sharp> R\n  x \\<sharp> T\n  (R, T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. derivative (P' \\<parallel> R) (Q' \\<parallel> T) a x Rel''", "by(cases a, auto intro: Par simp add: derivative_def forget)"], ["proof (state)\nthis:\n  derivative (P' \\<parallel> R) (Q' \\<parallel> T) a x Rel''\n\ngoal (2 subgoals):\n 1. \\<And>P'.\n       Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<Longrightarrow>\n       \\<exists>P'a.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'a \\<and>\n          derivative P'a (P' \\<parallel> T) a x Rel''\n 2. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R) (Q' \\<parallel> T) a x Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R) (Q' \\<parallel> T) a x Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (Q' \\<parallel> T) a x Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (Q' \\<parallel> T) a x Rel''\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "case(cPar2 T')"], ["proof (state)\nthis:\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "have TTrans: \"T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T'\" and xFreshQ: \"x \\<sharp> Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T' &&&\n    x \\<sharp> Q", "by fact+"], ["proof (state)\nthis:\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T'\n  x \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from xFreshR RSimT TTrans"], ["proof (chain)\npicking this:\n  x \\<sharp> R\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T'", "obtain R' where RTrans:\"R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\"\n                                          and Rderivative: \"derivative R' T' a x Rel'\""], ["proof (prove)\nusing this:\n  x \\<sharp> R\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> T'\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R';\n         derivative R' T' a x Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  derivative R' T' a x Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from RTrans xFreshP"], ["proof (chain)\npicking this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  x \\<sharp> P", "have ParTrans: \"P \\<parallel> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel> R'\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                          R'", "by(rule Late_Semantics.Par2B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "from Rderivative xFreshP xFreshQ PRelQ"], ["proof (chain)\npicking this:\n  derivative R' T' a x Rel'\n  x \\<sharp> P\n  x \\<sharp> Q\n  (P, Q) \\<in> Rel", "have \"derivative (P \\<parallel> R') (Q \\<parallel>  T') a x Rel''\""], ["proof (prove)\nusing this:\n  derivative R' T' a x Rel'\n  x \\<sharp> P\n  x \\<sharp> Q\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. derivative (P \\<parallel> R') (Q \\<parallel> T') a x Rel''", "by(cases a, auto intro: Par simp add: derivative_def forget)"], ["proof (state)\nthis:\n  derivative (P \\<parallel> R') (Q \\<parallel> T') a x Rel''\n\ngoal (1 subgoal):\n 1. \\<And>Q'.\n       T \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' (Q \\<parallel> Q') a x Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> T') a x Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> T') a x Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (Q \\<parallel> T') a x Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (Q \\<parallel> T') a x Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' Q' a x Rel''\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "case(Free \\<alpha> QT')"], ["proof (state)\nthis:\n  Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "have QTTrans: \"Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'", "by fact"], ["proof (state)\nthis:\n  Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'\n\ngoal (1 subgoal):\n 1. \\<And>\\<alpha> Q'.\n       Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> Q' \\<Longrightarrow>\n       \\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> Rel''", "thus ?case"], ["proof (prove)\nusing this:\n  Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QT') \\<in> Rel''", "using PSimQ RSimT PRelQ RRel'T"], ["proof (prove)\nusing this:\n  Q \\<parallel> T \\<longmapsto> \\<alpha> \\<prec> QT'\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', QT') \\<in> Rel''", "proof(induct rule: parCasesF[where C=\"(P, R)\"])"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cPar1 Q')"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have RRel'T: \"(R, T) \\<in> Rel'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (R, T) \\<in> Rel'", "by fact"], ["proof (state)\nthis:\n  (R, T) \\<in> Rel'\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have \"P \\<leadsto>[Rel] Q\" and \"Q \\<longmapsto> \\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q &&& Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact+"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto> \\<alpha> \\<prec> P'\" and PRel: \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'", "have Trans: \"P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R", "by(rule Late_Semantics.Par1F)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PRel RRel'T"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R, T) \\<in> Rel'", "have \"(P' \\<parallel> R, Q' \\<parallel> T) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (P' \\<parallel> R, Q' \\<parallel> T) \\<in> Rel''", "by(blast intro: Par)"], ["proof (state)\nthis:\n  (P' \\<parallel> R, Q' \\<parallel> T) \\<in> Rel''\n\ngoal (6 subgoals):\n 1. \\<And>P'.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> T) \\<in> Rel''\n 2. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 4. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 6. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (P' \\<parallel> R, Q' \\<parallel> T) \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (P' \\<parallel> R, Q' \\<parallel> T) \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> T) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q' \\<parallel> T) \\<in> Rel''\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cPar2 T')"], ["proof (state)\nthis:\n  T \\<longmapsto> \\<alpha> \\<prec> T'\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have PRelQ: \"(P, Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel", "by fact"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have \"R \\<leadsto>[Rel'] T\" and \"T \\<longmapsto> \\<alpha> \\<prec> T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<leadsto>[Rel'] T &&& T \\<longmapsto> \\<alpha> \\<prec> T'", "by fact+"], ["proof (state)\nthis:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> \\<alpha> \\<prec> T'\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> \\<alpha> \\<prec> T'", "obtain R' where RTrans: \"R \\<longmapsto> \\<alpha> \\<prec> R'\" and RRel: \"(R', T') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> \\<alpha> \\<prec> T'\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> \\<alpha> \\<prec> R';\n         (R', T') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  R \\<longmapsto> \\<alpha> \\<prec> R'\n  (R', T') \\<in> Rel'\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from RTrans"], ["proof (chain)\npicking this:\n  R \\<longmapsto> \\<alpha> \\<prec> R'", "have Trans: \"P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'", "by(rule Late_Semantics.Par2F)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PRelQ RRel"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  (R', T') \\<in> Rel'", "have \"(P \\<parallel> R', Q \\<parallel> T') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  (R', T') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (P \\<parallel> R', Q \\<parallel> T') \\<in> Rel''", "by(blast intro: Par)"], ["proof (state)\nthis:\n  (P \\<parallel> R', Q \\<parallel> T') \\<in> Rel''\n\ngoal (5 subgoals):\n 1. \\<And>Q'.\n       \\<lbrakk>T \\<longmapsto> \\<alpha> \\<prec> Q'; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 3. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 5. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  (P \\<parallel> R', Q \\<parallel> T') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  (P \\<parallel> R', Q \\<parallel> T') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> T') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q \\<parallel> T') \\<in> Rel''\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cComm1 Q' T' a b x)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  T \\<longmapsto> a[b] \\<prec> T'\n  x \\<sharp> Q\n  x \\<sharp> T\n  x \\<noteq> a\n  x \\<noteq> b\n  x \\<sharp> T'\n  x \\<sharp> (P, R)\n  \\<alpha> = \\<tau>\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>x \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> (P, R)", "have \"x \\<sharp> P\""], ["proof (prove)\nusing this:\n  x \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. x \\<sharp> P", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> P\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "with \\<open>P \\<leadsto>[Rel] Q\\<close> \\<open>Q \\<longmapsto> a<x> \\<prec> Q'\\<close> \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  x \\<sharp> P", "obtain P' where PTrans: \"P \\<longmapsto>a<x> \\<prec> P'\" \n                and Pderivative: \"derivative P' Q' (InputS a) x Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<x> \\<prec> P';\n         derivative P' Q' (InputS a) x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<x> \\<prec> P'\n  derivative P' Q' (InputS a) x Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from Pderivative"], ["proof (chain)\npicking this:\n  derivative P' Q' (InputS a) x Rel", "have PRel: \"(P'[x::=b], Q'[x::=b]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  derivative P' Q' (InputS a) x Rel\n\ngoal (1 subgoal):\n 1. (P'[x::=b], Q'[x::=b]) \\<in> Rel", "by(simp add: derivative_def)"], ["proof (state)\nthis:\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have \"R \\<leadsto>[Rel'] T\" and \"T \\<longmapsto> a[b] \\<prec> T'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<leadsto>[Rel'] T &&& T \\<longmapsto> a[b] \\<prec> T'", "by fact+"], ["proof (state)\nthis:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a[b] \\<prec> T'\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a[b] \\<prec> T'", "obtain R' where RTrans: \"R \\<longmapsto>a[b] \\<prec> R'\" and RRel: \"(R', T') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a[b] \\<prec> T'\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a[b] \\<prec> R';\n         (R', T') \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  R \\<longmapsto> a[b] \\<prec> R'\n  (R', T') \\<in> Rel'\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PTrans RTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a[b] \\<prec> R'", "have \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a[b] \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'", "by(rule Late_Semantics.Comm1)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PRel RRel"], ["proof (chain)\npicking this:\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n  (R', T') \\<in> Rel'", "have \"(P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> T') \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n  (R', T') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> T') \\<in> Rel''", "by(blast intro: Par)"], ["proof (state)\nthis:\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> T') \\<in> Rel''\n\ngoal (4 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a[b] \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> Q'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P'[x::=b] \\<parallel> Q') \\<in> Rel''\n 2. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 4. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> T') \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> T') \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> T') \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', Q'[x::=b] \\<parallel> T') \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cComm2 Q' T' a b x)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> Q\n  x \\<sharp> T\n  x \\<noteq> a\n  x \\<noteq> b\n  x \\<sharp> Q'\n  x \\<sharp> (P, R)\n  \\<alpha> = \\<tau>\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "have \"P \\<leadsto>[Rel] Q\" and \"Q \\<longmapsto>a[b] \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q &&& Q \\<longmapsto> a[b] \\<prec> Q'", "by fact+"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a[b] \\<prec> Q'\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "then"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a[b] \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto>a[b] \\<prec> P'\" and PRel: \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a[b] \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a[b] \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a[b] \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>x \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> (P, R)", "have \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. x \\<sharp> R", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> R\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "with \\<open>R \\<leadsto>[Rel'] T\\<close> \\<open>T \\<longmapsto>a<x> \\<prec> T'\\<close>"], ["proof (chain)\npicking this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> R", "obtain R' where RTrans: \"R \\<longmapsto>a<x> \\<prec> R'\"\n                and Rderivative: \"derivative R' T' (InputS a) x Rel'\""], ["proof (prove)\nusing this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<x> \\<prec> R';\n         derivative R' T' (InputS a) x Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  R \\<longmapsto> a<x> \\<prec> R'\n  derivative R' T' (InputS a) x Rel'\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from Rderivative"], ["proof (chain)\npicking this:\n  derivative R' T' (InputS a) x Rel'", "have RRel: \"(R'[x::=b], T'[x::=b]) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  derivative R' T' (InputS a) x Rel'\n\ngoal (1 subgoal):\n 1. (R'[x::=b], T'[x::=b]) \\<in> Rel'", "by(simp add: derivative_def)"], ["proof (state)\nthis:\n  (R'[x::=b], T'[x::=b]) \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PTrans RTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a[b] \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'", "have \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a[b] \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]", "by(rule Late_Semantics.Comm2)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PRel RRel"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R'[x::=b], T'[x::=b]) \\<in> Rel'", "have \"(P' \\<parallel> R'[x::=b], Q' \\<parallel> T'[x::=b]) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R'[x::=b], T'[x::=b]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (P' \\<parallel> R'[x::=b], Q' \\<parallel> T'[x::=b]) \\<in> Rel''", "by(blast intro: Par)"], ["proof (state)\nthis:\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> T'[x::=b]) \\<in> Rel''\n\ngoal (3 subgoals):\n 1. \\<And>P' Q' a b x.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> b; x \\<sharp> P'; x \\<sharp> (P, R);\n        \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q; R \\<leadsto>[Rel'] T;\n        (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, P' \\<parallel> Q'[x::=b]) \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 3. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> T'[x::=b]) \\<in> Rel''", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', Q' \\<parallel> T'[x::=b]) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> T'[x::=b]) \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> T'[x::=b]) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', Q' \\<parallel> T'[x::=b]) \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cClose1 Q' T' a x y)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  T \\<longmapsto> a<\\<nu>y> \\<prec> T'\n  x \\<sharp> Q\n  x \\<sharp> T\n  x \\<noteq> a\n  x \\<noteq> y\n  x \\<sharp> T'\n  y \\<sharp> Q\n  y \\<sharp> T\n  y \\<noteq> a\n  y \\<sharp> Q'\n  x \\<sharp> (P, R)\n  y \\<sharp> (P, R)\n  \\<alpha> = \\<tau>\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>x \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> (P, R)", "have \"x \\<sharp> P\""], ["proof (prove)\nusing this:\n  x \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. x \\<sharp> P", "by simp"], ["proof (state)\nthis:\n  x \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "with \\<open>P \\<leadsto>[Rel] Q\\<close> \\<open>Q \\<longmapsto>a<x> \\<prec> Q'\\<close>"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P", "obtain P' where PTrans: \"P \\<longmapsto>a<x> \\<prec> P'\"\n                and Pderivative: \"derivative P' Q' (InputS a) x Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<x> \\<prec> P';\n         derivative P' Q' (InputS a) x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<x> \\<prec> P'\n  derivative P' Q' (InputS a) x Rel\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from Pderivative"], ["proof (chain)\npicking this:\n  derivative P' Q' (InputS a) x Rel", "have PRel: \"(P'[x::=y], Q'[x::=y]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  derivative P' Q' (InputS a) x Rel\n\ngoal (1 subgoal):\n 1. (P'[x::=y], Q'[x::=y]) \\<in> Rel", "by(simp add: derivative_def)"], ["proof (state)\nthis:\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>y \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> (P, R)", "have \"y \\<sharp> R\" and \"y \\<sharp> P\""], ["proof (prove)\nusing this:\n  y \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. y \\<sharp> R &&& y \\<sharp> P", "by simp+"], ["proof (state)\nthis:\n  y \\<sharp> R\n  y \\<sharp> P\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>R \\<leadsto>[Rel'] T\\<close> \\<open>T \\<longmapsto>a<\\<nu>y> \\<prec> T'\\<close> \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<\\<nu>y> \\<prec> T'\n  y \\<sharp> R", "obtain R' where RTrans: \"R \\<longmapsto>a<\\<nu>y> \\<prec> R'\"\n                and Rderivative: \"derivative R' T' (BoundOutputS a) y Rel'\""], ["proof (prove)\nusing this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<\\<nu>y> \\<prec> T'\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<\\<nu>y> \\<prec> R';\n         derivative R' T' (BoundOutputS a) y Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  derivative R' T' (BoundOutputS a) y Rel'\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from Rderivative"], ["proof (chain)\npicking this:\n  derivative R' T' (BoundOutputS a) y Rel'", "have RRel: \"(R', T') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  derivative R' T' (BoundOutputS a) y Rel'\n\ngoal (1 subgoal):\n 1. (R', T') \\<in> Rel'", "by(simp add: derivative_def)"], ["proof (state)\nthis:\n  (R', T') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PTrans RTrans \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  y \\<sharp> P", "have Trans: \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')", "by(rule Late_Semantics.Close1)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PRel RRel"], ["proof (chain)\npicking this:\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n  (R', T') \\<in> Rel'", "have \"(<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> T')) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n  (R', T') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> T'))\n    \\<in> Rel''", "by(blast intro: Par Res)"], ["proof (state)\nthis:\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> T'))\n  \\<in> Rel''\n\ngoal (2 subgoals):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        T \\<longmapsto> a<\\<nu>y> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> Q'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> P'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P'[x::=y] \\<parallel> Q'))\n                            \\<in> Rel''\n 2. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> T'))\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> T'))\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> T')) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', <\\<nu>y>(Q'[x::=y] \\<parallel> T')) \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "case(cClose2 Q' T' a x y)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<\\<nu>y> \\<prec> Q'\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> Q\n  x \\<sharp> T\n  x \\<noteq> a\n  x \\<noteq> y\n  x \\<sharp> Q'\n  y \\<sharp> Q\n  y \\<sharp> T\n  y \\<noteq> a\n  y \\<sharp> T'\n  x \\<sharp> (P, R)\n  y \\<sharp> (P, R)\n  \\<alpha> = \\<tau>\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Rel'] T\n  (P, Q) \\<in> Rel\n  (R, T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>y \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> (P, R)", "have \"y \\<sharp> P\" and \"y \\<sharp> R\""], ["proof (prove)\nusing this:\n  y \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. y \\<sharp> P &&& y \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  y \\<sharp> P\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>P \\<leadsto>[Rel] Q\\<close> \\<open>Q \\<longmapsto>a<\\<nu>y> \\<prec> Q'\\<close> \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<\\<nu>y> \\<prec> Q'\n  y \\<sharp> P", "obtain P' where PTrans: \"P \\<longmapsto>a<\\<nu>y> \\<prec> P'\" and P'RelQ': \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a<\\<nu>y> \\<prec> Q'\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<\\<nu>y> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE simp add: derivative_def)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<\\<nu>y> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from \\<open>x \\<sharp> (P, R)\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> (P, R)", "have \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> (P, R)\n\ngoal (1 subgoal):\n 1. x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "with \\<open>R \\<leadsto>[Rel'] T\\<close> \\<open>T \\<longmapsto>a<x> \\<prec> T'\\<close>"], ["proof (chain)\npicking this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> R", "obtain R' where RTrans: \"R \\<longmapsto>a<x> \\<prec> R'\"\n                and R'Rel'T': \"(R'[x::=y], T'[x::=y]) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  R \\<leadsto>[Rel'] T\n  T \\<longmapsto> a<x> \\<prec> T'\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<x> \\<prec> R';\n         (R'[x::=y], T'[x::=y]) \\<in> Rel'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force dest: simE simp add: derivative_def)"], ["proof (state)\nthis:\n  R \\<longmapsto> a<x> \\<prec> R'\n  (R'[x::=y], T'[x::=y]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from PTrans RTrans \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<\\<nu>y> \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'\n  y \\<sharp> R", "have Trans: \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<\\<nu>y> \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])", "by(rule Close2)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "from P'RelQ' R'Rel'T'"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R'[x::=y], T'[x::=y]) \\<in> Rel'", "have \"(<\\<nu>y>(P' \\<parallel> R'[x::=y]), <\\<nu>y>(Q' \\<parallel> T'[x::=y])) \\<in> Rel''\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R'[x::=y], T'[x::=y]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>(P' \\<parallel> R'[x::=y]), <\\<nu>y>(Q' \\<parallel> T'[x::=y]))\n    \\<in> Rel''", "by(blast intro: Par Res)"], ["proof (state)\nthis:\n  (<\\<nu>y>(P' \\<parallel> R'[x::=y]), <\\<nu>y>(Q' \\<parallel> T'[x::=y]))\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<And>P' Q' a x y.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        T \\<longmapsto> a<x> \\<prec> Q'; x \\<sharp> Q; x \\<sharp> T;\n        x \\<noteq> a; x \\<noteq> y; x \\<sharp> P'; y \\<sharp> Q;\n        y \\<sharp> T; y \\<noteq> a; y \\<sharp> Q'; x \\<sharp> (P, R);\n        y \\<sharp> (P, R); \\<alpha> = \\<tau>; P \\<leadsto>[Rel] Q;\n        R \\<leadsto>[Rel'] T; (P, Q) \\<in> Rel; (R, T) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'a.\n                            P \\<parallel>\n                            R \\<longmapsto> \\<tau> \\<prec> P'a \\<and>\n                            (P'a, <\\<nu>y>(P' \\<parallel> Q'[x::=y]))\n                            \\<in> Rel''", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])\n  (<\\<nu>y>(P' \\<parallel> R'[x::=y]), <\\<nu>y>(Q' \\<parallel> T'[x::=y]))\n  \\<in> Rel''", "show ?case"], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel> R'[x::=y])\n  (<\\<nu>y>(P' \\<parallel> R'[x::=y]), <\\<nu>y>(Q' \\<parallel> T'[x::=y]))\n  \\<in> Rel''\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q' \\<parallel> T'[x::=y])) \\<in> Rel''", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', <\\<nu>y>(Q' \\<parallel> T'[x::=y])) \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', QT') \\<in> Rel''\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma parPres:\n  fixes P   :: pi\n  and   Q   :: pi\n  and   R   :: pi\n  and   a   :: name\n  and   b   :: name\n  and   Rel :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n  \n  assumes PSimQ:    \"P \\<leadsto>[Rel] Q\"\n  and     PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     Par:      \"\\<And>P Q R. (P, Q) \\<in> Rel \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> R) \\<in> Rel'\"\n  and     Res:      \"\\<And>P Q a. (P, Q) \\<in> Rel' \\<Longrightarrow> (<\\<nu>a>P, <\\<nu>a>Q) \\<in> Rel'\"\n  and     EqvtRel:  \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n\n  shows \"P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "note PSimQ"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "have RSimR: \"R \\<leadsto>[Id] R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. R \\<leadsto>[Id] R", "by(auto intro: reflexive)"], ["proof (state)\nthis:\n  R \\<leadsto>[Id] R\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  R \\<leadsto>[Id] R\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "note PRelQ"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "have \"(R, R) \\<in> Id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (R, R) \\<in> Id", "by auto"], ["proof (state)\nthis:\n  (R, R) \\<in> Id\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  (R, R) \\<in> Id\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "from Par"], ["proof (chain)\npicking this:\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow>\n  (?P \\<parallel> ?R, ?Q \\<parallel> ?R) \\<in> Rel'", "have \"\\<And>P Q R T. \\<lbrakk>(P, Q) \\<in> Rel; (R, T) \\<in> Id\\<rbrakk> \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> T) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow>\n  (?P \\<parallel> ?R, ?Q \\<parallel> ?R) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>P Q R T.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, T) \\<in> Id\\<rbrakk>\n       \\<Longrightarrow> (P \\<parallel> R, Q \\<parallel> T) \\<in> Rel'", "by auto"], ["proof (state)\nthis:\n  \\<lbrakk>(?P, ?Q) \\<in> Rel; (?R, ?T) \\<in> Id\\<rbrakk>\n  \\<Longrightarrow> (?P \\<parallel> ?R, ?Q \\<parallel> ?T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>(?P, ?Q) \\<in> Rel; (?R, ?T) \\<in> Id\\<rbrakk>\n  \\<Longrightarrow> (?P \\<parallel> ?R, ?Q \\<parallel> ?T) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "note Res \\<open>eqvt Rel\\<close>"], ["proof (state)\nthis:\n  (?P, ?Q) \\<in> Rel' \\<Longrightarrow>\n  (<\\<nu>?a>?P, <\\<nu>?a>?Q) \\<in> Rel'\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "moreover"], ["proof (state)\nthis:\n  (?P, ?Q) \\<in> Rel' \\<Longrightarrow>\n  (<\\<nu>?a>?P, <\\<nu>?a>?Q) \\<in> Rel'\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "have \"eqvt Id\""], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt Id", "by(auto simp add: eqvt_def)"], ["proof (state)\nthis:\n  eqvt Id\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "ultimately"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Id] R\n  (P, Q) \\<in> Rel\n  (R, R) \\<in> Id\n  \\<lbrakk>(?P, ?Q) \\<in> Rel; (?R, ?T) \\<in> Id\\<rbrakk>\n  \\<Longrightarrow> (?P \\<parallel> ?R, ?Q \\<parallel> ?T) \\<in> Rel'\n  (?P, ?Q) \\<in> Rel' \\<Longrightarrow>\n  (<\\<nu>?a>?P, <\\<nu>?a>?Q) \\<in> Rel'\n  eqvt Rel\n  eqvt Id", "show ?thesis"], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Id] R\n  (P, Q) \\<in> Rel\n  (R, R) \\<in> Id\n  \\<lbrakk>(?P, ?Q) \\<in> Rel; (?R, ?T) \\<in> Id\\<rbrakk>\n  \\<Longrightarrow> (?P \\<parallel> ?R, ?Q \\<parallel> ?T) \\<in> Rel'\n  (?P, ?Q) \\<in> Rel' \\<Longrightarrow>\n  (<\\<nu>?a>?P, <\\<nu>?a>?Q) \\<in> Rel'\n  eqvt Rel\n  eqvt Id\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "using EqvtRel'"], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  R \\<leadsto>[Id] R\n  (P, Q) \\<in> Rel\n  (R, R) \\<in> Id\n  \\<lbrakk>(?P, ?Q) \\<in> Rel; (?R, ?T) \\<in> Id\\<rbrakk>\n  \\<Longrightarrow> (?P \\<parallel> ?R, ?Q \\<parallel> ?T) \\<in> Rel'\n  (?P, ?Q) \\<in> Rel' \\<Longrightarrow>\n  (<\\<nu>?a>?P, <\\<nu>?a>?Q) \\<in> Rel'\n  eqvt Rel\n  eqvt Id\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R", "by(rule parCompose)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<leadsto>[Rel'] Q \\<parallel> R\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resDerivative:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   a    :: subject\n  and   x    :: name\n  and   y    :: name\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   Rel' :: \"(pi \\<times> pi) set\"\n  \n  assumes Der: \"derivative P Q a x Rel\"\n  and     Rel: \"\\<And>(P::pi) (Q::pi) (x::name). (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\"\n  and     Eqv: \"eqvt Rel\"\n\n  shows \"derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'", "from Der Rel"], ["proof (chain)\npicking this:\n  derivative P Q a x Rel\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  derivative P Q a x Rel\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'", "proof(cases a, auto simp add: derivative_def)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 u.\n       \\<lbrakk>\\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel; a = InputS x1;\n        \\<And>P Q x.\n           (P, Q) \\<in> Rel \\<Longrightarrow>\n           (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "fix u"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 u.\n       \\<lbrakk>\\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel; a = InputS x1;\n        \\<And>P Q x.\n           (P, Q) \\<in> Rel \\<Longrightarrow>\n           (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "assume A1: \"\\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel\""], ["proof (state)\nthis:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>x1 u.\n       \\<lbrakk>\\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel; a = InputS x1;\n        \\<And>P Q x.\n           (P, Q) \\<in> Rel \\<Longrightarrow>\n           (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\\<rbrakk>\n       \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "show \"((<\\<nu>y>P)[x::=u], (<\\<nu>y>Q)[x::=u]) \\<in> Rel'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "proof(cases \"x=y\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "assume xeqy: \"x=y\""], ["proof (state)\nthis:\n  x = y\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "from A1"], ["proof (chain)\npicking this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel", "have \"(P[x::=x], Q[x::=x]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=x], Q[x::=x]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=x], Q[x::=x]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "hence L1: \"(<\\<nu>y>P, <\\<nu>y>Q) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (P[x::=x], Q[x::=x]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P, <\\<nu>y>Q) \\<in> Rel'", "by(force intro: Rel)"], ["proof (state)\nthis:\n  (<\\<nu>y>P, <\\<nu>y>Q) \\<in> Rel'\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "have \"y \\<sharp> <\\<nu>y>P\" and \"y \\<sharp> <\\<nu>y>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<sharp> <\\<nu>y>P &&& y \\<sharp> <\\<nu>y>Q", "by(simp only: freshRes)+"], ["proof (state)\nthis:\n  y \\<sharp> <\\<nu>y>P\n  y \\<sharp> <\\<nu>y>Q\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "hence \"(<\\<nu>y>P)[y::=u] = <\\<nu>y>P\" and \"(<\\<nu>y>Q)[y::=u] = <\\<nu>y>Q\""], ["proof (prove)\nusing this:\n  y \\<sharp> <\\<nu>y>P\n  y \\<sharp> <\\<nu>y>Q\n\ngoal (1 subgoal):\n 1. <\\<nu>y>P[y::=u] = <\\<nu>y>P &&& <\\<nu>y>Q[y::=u] = <\\<nu>y>Q", "by(simp add: forget)+"], ["proof (state)\nthis:\n  <\\<nu>y>P[y::=u] = <\\<nu>y>P\n  <\\<nu>y>Q[y::=u] = <\\<nu>y>Q\n\ngoal (2 subgoals):\n 1. x = y \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "with L1 xeqy"], ["proof (chain)\npicking this:\n  (<\\<nu>y>P, <\\<nu>y>Q) \\<in> Rel'\n  x = y\n  <\\<nu>y>P[y::=u] = <\\<nu>y>P\n  <\\<nu>y>Q[y::=u] = <\\<nu>y>Q", "show ?thesis"], ["proof (prove)\nusing this:\n  (<\\<nu>y>P, <\\<nu>y>Q) \\<in> Rel'\n  x = y\n  <\\<nu>y>P[y::=u] = <\\<nu>y>P\n  <\\<nu>y>Q[y::=u] = <\\<nu>y>Q\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "by simp"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "assume xineqy: \"x\\<noteq>y\""], ["proof (state)\nthis:\n  x \\<noteq> y\n\ngoal (1 subgoal):\n 1. x \\<noteq> y \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "proof(cases \"y=u\")"], ["proof (state)\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "assume yequ: \"y=u\""], ["proof (state)\nthis:\n  y = u\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "have \"\\<exists>(c::name). c \\<sharp> (P, Q, x, y)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>c. c \\<sharp> (P, Q, x, y)", "by(blast intro: name_exists_fresh)"], ["proof (state)\nthis:\n  \\<exists>c. c \\<sharp> (P, Q, x, y)\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "then"], ["proof (chain)\npicking this:\n  \\<exists>c. c \\<sharp> (P, Q, x, y)", "obtain c where cFreshP: \"c \\<sharp> P\" and cFreshQ: \"c \\<sharp> Q\" and cineqx: \"c \\<noteq> x\" and cineqy: \"y \\<noteq> c\""], ["proof (prove)\nusing this:\n  \\<exists>c. c \\<sharp> (P, Q, x, y)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<sharp> P; c \\<sharp> Q; c \\<noteq> x;\n         y \\<noteq> c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(force simp add: fresh_prod name_fresh)"], ["proof (state)\nthis:\n  c \\<sharp> P\n  c \\<sharp> Q\n  c \\<noteq> x\n  y \\<noteq> c\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "from A1"], ["proof (chain)\npicking this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel", "have \"(P[x::=c], Q[x::=c]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=c], Q[x::=c]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=c], Q[x::=c]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "with Eqv"], ["proof (chain)\npicking this:\n  eqvt Rel\n  (P[x::=c], Q[x::=c]) \\<in> Rel", "have \"([(y, c)] \\<bullet> (P[x::=c]), [(y, c)] \\<bullet> (Q[x::=c])) \\<in> Rel\""], ["proof (prove)\nusing this:\n  eqvt Rel\n  (P[x::=c], Q[x::=c]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. ([(y, c)] \\<bullet> P[x::=c], [(y, c)] \\<bullet> Q[x::=c]) \\<in> Rel", "by(rule eqvtRelI)"], ["proof (state)\nthis:\n  ([(y, c)] \\<bullet> P[x::=c], [(y, c)] \\<bullet> Q[x::=c]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "with xineqy cineqx cineqy"], ["proof (chain)\npicking this:\n  x \\<noteq> y\n  c \\<noteq> x\n  y \\<noteq> c\n  ([(y, c)] \\<bullet> P[x::=c], [(y, c)] \\<bullet> Q[x::=c]) \\<in> Rel", "have \"(([(y, c)] \\<bullet> P)[x::=y], ([(y, c)] \\<bullet> Q)[x::=y]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  x \\<noteq> y\n  c \\<noteq> x\n  y \\<noteq> c\n  ([(y, c)] \\<bullet> P[x::=c], [(y, c)] \\<bullet> Q[x::=c]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (([(y, c)] \\<bullet> P)[x::=y], ([(y, c)] \\<bullet> Q)[x::=y]) \\<in> Rel", "by(simp add: eqvt_subs name_calc)"], ["proof (state)\nthis:\n  (([(y, c)] \\<bullet> P)[x::=y], ([(y, c)] \\<bullet> Q)[x::=y]) \\<in> Rel\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "hence \"(<\\<nu>c>(([(y, c)] \\<bullet> P)[x::=y]), <\\<nu>c>(([(y, c)] \\<bullet> Q)[x::=y])) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (([(y, c)] \\<bullet> P)[x::=y], ([(y, c)] \\<bullet> Q)[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n     <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n    \\<in> Rel'", "by(rule Rel)"], ["proof (state)\nthis:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "with cineqx cineqy"], ["proof (chain)\npicking this:\n  c \\<noteq> x\n  y \\<noteq> c\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'", "have \"((<\\<nu>c>(([(y, c)] \\<bullet> P)))[x::=y], (<\\<nu>c>(([(y, c)] \\<bullet> Q)))[x::=y])\\<in> Rel'\""], ["proof (prove)\nusing this:\n  c \\<noteq> x\n  y \\<noteq> c\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n     <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n    \\<in> Rel'", "by simp"], ["proof (state)\nthis:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "from cFreshP cFreshQ"], ["proof (chain)\npicking this:\n  c \\<sharp> P\n  c \\<sharp> Q", "have \"<\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P\" and \"<\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q\""], ["proof (prove)\nusing this:\n  c \\<sharp> P\n  c \\<sharp> Q\n\ngoal (1 subgoal):\n 1. <\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P &&&\n    <\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q", "by(simp add: alphaRes)+"], ["proof (state)\nthis:\n  <\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P\n  <\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q\n\ngoal (2 subgoals):\n 1. y = u \\<Longrightarrow> (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n 2. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n  <\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P\n  <\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q", "show ?thesis"], ["proof (prove)\nusing this:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n  <\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P\n  <\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "using yequ"], ["proof (prove)\nusing this:\n  (<\\<nu>c>([(y, c)] \\<bullet> P)[x::=y],\n   <\\<nu>c>([(y, c)] \\<bullet> Q)[x::=y])\n  \\<in> Rel'\n  <\\<nu>c>([(y, c)] \\<bullet> P) = <\\<nu>y>P\n  <\\<nu>c>([(y, c)] \\<bullet> Q) = <\\<nu>y>Q\n  y = u\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "by simp"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "assume yinequ: \"y \\<noteq> u\""], ["proof (state)\nthis:\n  y \\<noteq> u\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "from A1"], ["proof (chain)\npicking this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel", "have \"(P[x::=u], Q[x::=u]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  \\<forall>u. (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (P[x::=u], Q[x::=u]) \\<in> Rel", "by blast"], ["proof (state)\nthis:\n  (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "hence \"(<\\<nu>y>(P[x::=u]), <\\<nu>y>(Q[x::=u])) \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (P[x::=u], Q[x::=u]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "by(rule Rel)"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. y \\<noteq> u \\<Longrightarrow>\n    (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "with xineqy yinequ"], ["proof (chain)\npicking this:\n  x \\<noteq> y\n  y \\<noteq> u\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> y\n  y \\<noteq> u\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'", "by simp"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (<\\<nu>y>P[x::=u], <\\<nu>y>Q[x::=u]) \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  derivative (<\\<nu>y>P) (<\\<nu>y>Q) a x Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n  and   x    :: name\n  and   Rel' :: \"(pi \\<times> pi) set\"\n\n  assumes PSimQ: \"P \\<leadsto>[Rel] Q\"\n  and     ResRel: \"\\<And>(P::pi) (Q::pi) (x::name). (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel'\"\n  and     RelRel': \"Rel \\<subseteq> Rel'\"\n  and     EqvtRel: \"eqvt Rel\"\n  and     EqvtRel': \"eqvt Rel'\"\n\n  shows \"<\\<nu>x>P \\<leadsto>[Rel'] <\\<nu>x>Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. <\\<nu>x>P \\<leadsto>[Rel'] <\\<nu>x>Q", "using EqvtRel'"], ["proof (prove)\nusing this:\n  eqvt Rel'\n\ngoal (1 subgoal):\n 1. <\\<nu>x>P \\<leadsto>[Rel'] <\\<nu>x>Q", "proof(induct rule: resSimCases[of _ _ _ _ \"(P, x)\"])"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "case(BoundOutput Q' a)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a[x] \\<prec> Q'\n  a \\<noteq> x\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "have QTrans: \"Q \\<longmapsto>a[x] \\<prec> Q'\" and aineqx: \"a \\<noteq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a[x] \\<prec> Q' &&& a \\<noteq> x", "by fact+"], ["proof (state)\nthis:\n  Q \\<longmapsto> a[x] \\<prec> Q'\n  a \\<noteq> x\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from PSimQ QTrans"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a[x] \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto> a[x] \\<prec> P'\"\n                                and P'RelQ': \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  Q \\<longmapsto> a[x] \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a[x] \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a[x] \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from PTrans aineqx"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a[x] \\<prec> P'\n  a \\<noteq> x", "have \"<\\<nu>x>P \\<longmapsto>a<\\<nu>x> \\<prec> P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a[x] \\<prec> P'\n  a \\<noteq> x\n\ngoal (1 subgoal):\n 1. <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P'", "by(rule Late_Semantics.Open)"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from P'RelQ' RelRel'"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'", "have \"(P', Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  Rel \\<subseteq> Rel'\n\ngoal (1 subgoal):\n 1. (P', Q') \\<in> Rel'", "by force"], ["proof (state)\nthis:\n  (P', Q') \\<in> Rel'\n\ngoal (3 subgoals):\n 1. \\<And>Q' a.\n       \\<lbrakk>Q \\<longmapsto> a[x] \\<prec> Q'; a \\<noteq> x\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n                            (P', Q') \\<in> Rel'\n 2. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 3. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n  (P', Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n  (P', Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and>\n       (P', Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     <\\<nu>x>P \\<longmapsto> a<\\<nu>x> \\<prec> P' \\<and> (P', Q') \\<in> Rel'\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "case(BoundR Q' a y)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n  x \\<sharp> a\n  x \\<noteq> y\n  y \\<sharp> (P, x)\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "have QTrans: \"Q \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\" and xFresha: \"x \\<sharp> a\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q' &&&\n    x \\<sharp> a", "by fact+"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n  x \\<sharp> a\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "have \"y \\<sharp> (P, x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<sharp> (P, x)", "by fact"], ["proof (state)\nthis:\n  y \\<sharp> (P, x)\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "hence yFreshP: \"y \\<sharp> P\" and yineqx: \"y \\<noteq> x\""], ["proof (prove)\nusing this:\n  y \\<sharp> (P, x)\n\ngoal (1 subgoal):\n 1. y \\<sharp> P &&& y \\<noteq> x", "by(simp add: fresh_prod)+"], ["proof (state)\nthis:\n  y \\<sharp> P\n  y \\<noteq> x\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from PSimQ yFreshP QTrans"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q\n  y \\<sharp> P\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q'", "obtain P' where PTrans: \"P \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\"\n                                         and Pderivative: \"derivative P' Q' a y Rel\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n  y \\<sharp> P\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q'\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P';\n         derivative P' Q' a y Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  derivative P' Q' a y Rel\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from PTrans xFresha yineqx"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  x \\<sharp> a\n  y \\<noteq> x", "have ResTrans: \"<\\<nu>x>P \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  x \\<sharp> a\n  y \\<noteq> x\n\ngoal (1 subgoal):\n 1. <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'", "by(blast intro: Late_Semantics.ResB)"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from Pderivative ResRel EqvtRel"], ["proof (chain)\npicking this:\n  derivative P' Q' a y Rel\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel'\n  eqvt Rel", "have \"derivative (<\\<nu>x>P') (<\\<nu>x>Q') a y Rel'\""], ["proof (prove)\nusing this:\n  derivative P' Q' a y Rel\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel'\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. derivative (<\\<nu>x>P') (<\\<nu>x>Q') a y Rel'", "by(rule resDerivative)"], ["proof (state)\nthis:\n  derivative (<\\<nu>x>P') (<\\<nu>x>Q') a y Rel'\n\ngoal (2 subgoals):\n 1. \\<And>Q' a y.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> Q';\n        x \\<sharp> a; x \\<noteq> y; y \\<sharp> (P, x)\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' (<\\<nu>x>Q') a y Rel'\n 2. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'\n  derivative (<\\<nu>x>P') (<\\<nu>x>Q') a y Rel'", "show ?case"], ["proof (prove)\nusing this:\n  <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> <\\<nu>x>P'\n  derivative (<\\<nu>x>P') (<\\<nu>x>Q') a y Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (<\\<nu>x>Q') a y Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     <\\<nu>x>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (<\\<nu>x>Q') a y Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "case(FreeR Q' \\<alpha>)"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "have QTrans: \"Q \\<longmapsto> \\<alpha> \\<prec> Q'\" and xFreshAlpha: \"(x::name) \\<sharp> \\<alpha>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> Q' &&& x \\<sharp> \\<alpha>", "by fact+"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from QTrans PSimQ"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto> \\<alpha> \\<prec> P'\"\n                                and P'RelQ': \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from PTrans xFreshAlpha"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>", "have \"<\\<nu>x>P \\<longmapsto>\\<alpha> \\<prec> <\\<nu>x>P'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  x \\<sharp> \\<alpha>\n\ngoal (1 subgoal):\n 1. <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> <\\<nu>x>P'", "by(rule Late_Semantics.ResF)"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> <\\<nu>x>P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "moreover"], ["proof (state)\nthis:\n  <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> <\\<nu>x>P'\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "from P'RelQ'"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel", "have \"(<\\<nu>x>P', <\\<nu>x>Q') \\<in> Rel'\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>x>P', <\\<nu>x>Q') \\<in> Rel'", "by(rule ResRel)"], ["proof (state)\nthis:\n  (<\\<nu>x>P', <\\<nu>x>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<And>Q' \\<alpha>.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> Q';\n        x \\<sharp> \\<alpha>\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', <\\<nu>x>Q') \\<in> Rel'", "ultimately"], ["proof (chain)\npicking this:\n  <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> <\\<nu>x>P'\n  (<\\<nu>x>P', <\\<nu>x>Q') \\<in> Rel'", "show ?case"], ["proof (prove)\nusing this:\n  <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> <\\<nu>x>P'\n  (<\\<nu>x>P', <\\<nu>x>Q') \\<in> Rel'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', <\\<nu>x>Q') \\<in> Rel'", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     <\\<nu>x>P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', <\\<nu>x>Q') \\<in> Rel'\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma resChainI:\n  fixes P   :: pi\n  and   Q   :: pi\n  and   Rel :: \"(pi \\<times> pi) set\"\n  and   xs  :: \"name list\"\n\n  assumes PRelQ:   \"P \\<leadsto>[Rel] Q\"\n  and     eqvtRel: \"eqvt Rel\"\n  and     Res:     \"\\<And>P Q x. (P, Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>x>P, <\\<nu>x>Q) \\<in> Rel\"\n\n  shows \"(resChain xs) P \\<leadsto>[Rel] (resChain xs) Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. resChain xs P \\<leadsto>[Rel] resChain xs Q", "proof(induct xs)"], ["proof (state)\ngoal (2 subgoals):\n 1. resChain [] P \\<leadsto>[Rel] resChain [] Q\n 2. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "(* Base case *)"], ["proof (state)\ngoal (2 subgoals):\n 1. resChain [] P \\<leadsto>[Rel] resChain [] Q\n 2. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "from PRelQ"], ["proof (chain)\npicking this:\n  P \\<leadsto>[Rel] Q", "show \"resChain [] P \\<leadsto>[Rel] resChain [] Q\""], ["proof (prove)\nusing this:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. resChain [] P \\<leadsto>[Rel] resChain [] Q", "by simp"], ["proof (state)\nthis:\n  resChain [] P \\<leadsto>[Rel] resChain [] Q\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "(* Inductive step *)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "fix x xs"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "assume IH: \"(resChain xs P) \\<leadsto>[Rel] (resChain xs Q)\""], ["proof (state)\nthis:\n  resChain xs P \\<leadsto>[Rel] resChain xs Q\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "moreover"], ["proof (state)\nthis:\n  resChain xs P \\<leadsto>[Rel] resChain xs Q\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "note Res"], ["proof (state)\nthis:\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "moreover"], ["proof (state)\nthis:\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "have \"Rel \\<subseteq> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Rel \\<subseteq> Rel", "by simp"], ["proof (state)\nthis:\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "ultimately"], ["proof (chain)\npicking this:\n  resChain xs P \\<leadsto>[Rel] resChain xs Q\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel\n  Rel \\<subseteq> Rel", "have \"<\\<nu>x>(resChain xs P) \\<leadsto>[Rel] <\\<nu>x>(resChain xs Q)\""], ["proof (prove)\nusing this:\n  resChain xs P \\<leadsto>[Rel] resChain xs Q\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel\n  Rel \\<subseteq> Rel\n\ngoal (1 subgoal):\n 1. <\\<nu>x>resChain xs P \\<leadsto>[Rel] <\\<nu>x>resChain xs Q", "using eqvtRel"], ["proof (prove)\nusing this:\n  resChain xs P \\<leadsto>[Rel] resChain xs Q\n  (?P, ?Q) \\<in> Rel \\<Longrightarrow> (<\\<nu>?x>?P, <\\<nu>?x>?Q) \\<in> Rel\n  Rel \\<subseteq> Rel\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. <\\<nu>x>resChain xs P \\<leadsto>[Rel] <\\<nu>x>resChain xs Q", "by(rule_tac resPres)"], ["proof (state)\nthis:\n  <\\<nu>x>resChain xs P \\<leadsto>[Rel] <\\<nu>x>resChain xs Q\n\ngoal (1 subgoal):\n 1. \\<And>a xs.\n       resChain xs P \\<leadsto>[Rel] resChain xs Q \\<Longrightarrow>\n       resChain (a # xs) P \\<leadsto>[Rel] resChain (a # xs) Q", "thus \"resChain (x # xs) P \\<leadsto>[Rel] resChain (x # xs) Q\""], ["proof (prove)\nusing this:\n  <\\<nu>x>resChain xs P \\<leadsto>[Rel] <\\<nu>x>resChain xs Q\n\ngoal (1 subgoal):\n 1. resChain (x # xs) P \\<leadsto>[Rel] resChain (x # xs) Q", "by simp"], ["proof (state)\nthis:\n  resChain (x # xs) P \\<leadsto>[Rel] resChain (x # xs) Q\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma bangPres:\n  fixes P    :: pi\n  and   Q    :: pi\n  and   Rel  :: \"(pi \\<times> pi) set\"\n \n  assumes PRelQ:    \"(P, Q) \\<in> Rel\"\n  and     Sim:      \"\\<And>P Q. (P, Q) \\<in> Rel \\<Longrightarrow> P \\<leadsto>[Rel] Q\"\n  and     eqvtRel:  \"eqvt Rel\"\n\n  shows \"!P \\<leadsto>[bangRel Rel] !Q\""], ["proof (prove)\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "let ?Sim = \"\\<lambda>P Rs. (\\<forall>a x Q'. Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow> x \\<sharp> P \\<longrightarrow> (\\<exists>P'. P \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and> derivative P' Q' a x (bangRel Rel))) \\<and>\n                     (\\<forall>\\<alpha> Q'. Rs = \\<alpha> \\<prec> Q' \\<longrightarrow> (\\<exists>P'. P \\<longmapsto>\\<alpha> \\<prec> P' \\<and> (P', Q') \\<in> bangRel Rel))\""], ["proof (state)\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "from eqvtRel"], ["proof (chain)\npicking this:\n  eqvt Rel", "have EqvtBangRel: \"eqvt(bangRel Rel)\""], ["proof (prove)\nusing this:\n  eqvt Rel\n\ngoal (1 subgoal):\n 1. eqvt (bangRel Rel)", "by(rule eqvtBangRel)"], ["proof (state)\nthis:\n  eqvt (bangRel Rel)\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "{"], ["proof (state)\nthis:\n  eqvt (bangRel Rel)\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "fix Pa Rs"], ["proof (state)\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "assume \"!Q \\<longmapsto> Rs\" and \"(Pa, !Q) \\<in> bangRel Rel\""], ["proof (state)\nthis:\n  !Q \\<longmapsto> Rs\n  (Pa, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "hence \"?Sim Pa Rs\""], ["proof (prove)\nusing this:\n  !Q \\<longmapsto> Rs\n  (Pa, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'.\n        Rs =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n        x \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q' a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'.\n        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q') \\<in> bangRel Rel))", "using PRelQ"], ["proof (prove)\nusing this:\n  !Q \\<longmapsto> Rs\n  (Pa, !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'.\n        Rs =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n        x \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q' a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'.\n        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q') \\<in> bangRel Rel))", "proof(nominal_induct avoiding: Pa P rule: bangInduct)"], ["proof (state)\ngoal (9 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 9. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cPar1B a x Q' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> Q\n  x \\<sharp> Pa\n  x \\<sharp> P\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (9 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 9. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n\ngoal (9 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 9. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\" and \"x \\<sharp> Pa\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel &&& x \\<sharp> Pa", "by fact+"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (9 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 9. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus \"?Sim Pa (a\\<guillemotleft>x\\<guillemotright> \\<prec> (Q' \\<parallel> !Q))\""], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel", "by fact"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (R, !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have \"x \\<sharp> P \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> R", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel>\n                                   !Q =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject alpha')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "with QTrans xFreshP"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\" and P'RelQ': \"derivative P' Q' a x Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n         derivative P' Q' a x Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  derivative P' Q' a x Rel\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from PTrans xFreshR"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  x \\<sharp> R", "have \"P \\<parallel> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> (P' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P'\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                          R", "by(force intro: Late_Semantics.Par1B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from P'RelQ' PBRQ \\<open>x \\<sharp> Q\\<close> \\<open>x \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  derivative P' Q' a x Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> Q\n  x \\<sharp> R", "have \"derivative (P' \\<parallel> R) (Q' \\<parallel> !Q) a x (bangRel Rel)\""], ["proof (prove)\nusing this:\n  derivative P' Q' a x Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> Q\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. derivative (P' \\<parallel> R) (Q' \\<parallel> !Q) a x (bangRel Rel)", "by(cases a) (auto simp add: derivative_def forget intro: Rel.BRPar)"], ["proof (state)\nthis:\n  derivative (P' \\<parallel> R) (Q' \\<parallel> !Q) a x (bangRel Rel)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x \\<sharp> P; x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R) (Q' \\<parallel> !Q) a x (bangRel Rel)", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto>a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and> derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R) (Q' \\<parallel> !Q) a x (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (Q' \\<parallel> !Q) a x (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "assume \"(y::name) \\<sharp> Q'\" and \"y \\<sharp> P\" and \"y \\<sharp> R\" and \"y \\<sharp> Q\""], ["proof (state)\nthis:\n  y \\<sharp> Q'\n  y \\<sharp> P\n  y \\<sharp> R\n  y \\<sharp> Q\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from QTrans \\<open>y \\<sharp> Q'\\<close>"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  y \\<sharp> Q'", "have \"Q \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> ([(x, y)] \\<bullet> Q')\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  y \\<sharp> Q'\n\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                            y)] \\<bullet>\n                          Q'", "by(simp add: alphaBoundResidual)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                          y)] \\<bullet>\n                        Q'\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "moreover"], ["proof (state)\nthis:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                          y)] \\<bullet>\n                        Q'\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "ultimately"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                          y)] \\<bullet>\n                        Q'\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\" and P'RelQ': \"derivative P' ([(x, y)] \\<bullet> Q') a y Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                          y)] \\<bullet>\n                        Q'\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P';\n         derivative P' ([(x, y)] \\<bullet> Q') a y Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using \\<open>y \\<sharp> P\\<close>"], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x,\n                          y)] \\<bullet>\n                        Q'\n  P \\<leadsto>[Rel] Q\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P';\n         derivative P' ([(x, y)] \\<bullet> Q') a y Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  derivative P' ([(x, y)] \\<bullet> Q') a y Rel\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from PTrans \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  y \\<sharp> R", "have \"P \\<parallel> R \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> (P' \\<parallel> R)\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P'\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<parallel>\n                          R", "by(force intro: Late_Semantics.Par1B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "from P'RelQ' PBRQ \\<open>y \\<sharp> Q\\<close> \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  derivative P' ([(x, y)] \\<bullet> Q') a y Rel\n  (R, !Q) \\<in> bangRel Rel\n  y \\<sharp> Q\n  y \\<sharp> R", "have \"derivative (P' \\<parallel> R) (([(x, y)] \\<bullet> Q') \\<parallel> !Q) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  derivative P' ([(x, y)] \\<bullet> Q') a y Rel\n  (R, !Q) \\<in> bangRel Rel\n  y \\<sharp> Q\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. derivative (P' \\<parallel> R) (([(x, y)] \\<bullet> Q') \\<parallel> !Q) a\n     y (bangRel Rel)", "by(cases a) (auto simp add: derivative_def forget intro: Rel.BRPar)"], ["proof (state)\nthis:\n  derivative (P' \\<parallel> R) (([(x, y)] \\<bullet> Q') \\<parallel> !Q) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "with \\<open>x \\<sharp> Q\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> Q\n  y \\<sharp> Q\n  derivative (P' \\<parallel> R) (([(x, y)] \\<bullet> Q') \\<parallel> !Q) a y\n   (bangRel Rel)", "have \"derivative (P' \\<parallel> R) (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  x \\<sharp> Q\n  y \\<sharp> Q\n  derivative (P' \\<parallel> R) (([(x, y)] \\<bullet> Q') \\<parallel> !Q) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. derivative (P' \\<parallel> R)\n     (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n     (bangRel Rel)", "by(simp add: name_fresh_fresh name_swap)"], ["proof (state)\nthis:\n  derivative (P' \\<parallel> R)\n   (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>x \\<noteq> xa; xa \\<sharp> Q'; xa \\<sharp> Q; xa \\<sharp> P;\n        xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (([(xa, x)] \\<bullet> Q') \\<parallel>\n                              !([(xa, x)] \\<bullet> Q))\n                             a xa (bangRel Rel)", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R)\n   (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n   (bangRel Rel)", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto>a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and> derivative P' (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<parallel>\n                        R\n  derivative (P' \\<parallel> R)\n   (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n       derivative P'\n        (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n        (bangRel Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n     derivative P'\n      (([(y, x)] \\<bullet> Q') \\<parallel> !([(y, x)] \\<bullet> Q)) a y\n      (bangRel Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<parallel> !Q =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (8 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (8 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cPar1F \\<alpha> Q' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (8 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto>\\<alpha> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> \\<alpha> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n\ngoal (8 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (8 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>Q \\<longmapsto> \\<alpha> \\<prec> P';\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> P' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 8. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'a.\n        \\<alpha> \\<prec> Q' \\<parallel> !Q =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        x \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha>' Q'a.\n        \\<alpha> \\<prec> Q' \\<parallel> !Q =\n        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and BR: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q' \\<parallel> !Q =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'a.\n        \\<alpha> \\<prec> Q' \\<parallel> !Q =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        x \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha>' Q'a.\n        \\<alpha> \\<prec> Q' \\<parallel> !Q =\n        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "with QTrans"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto> \\<alpha> \\<prec> P'\" and RRel: \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> \\<alpha> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "from PTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'", "have \"P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> \\<alpha> \\<prec> P'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R", "by(rule Par1F)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "from RRel BR"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel", "have \"(P' \\<parallel> R, Q' \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (P' \\<parallel> R, Q' \\<parallel> !Q) \\<in> bangRel Rel", "by(rule Rel.BRPar)"], ["proof (state)\nthis:\n  (P' \\<parallel> R, Q' \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (P' \\<parallel> R, Q' \\<parallel> !Q) \\<in> bangRel Rel", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q' \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<parallel> R\n  (P' \\<parallel> R, Q' \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> !Q) \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q' \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q' \\<parallel> !Q =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q' \\<parallel> !Q =\n      \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q' \\<parallel> !Q =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q' \\<parallel> !Q =\n      \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (7 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cPar2B a x Q' Pa P)"], ["proof (state)\nthis:\n  !Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> Q\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n                        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                        xa \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'a.\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n                        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q'a) \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (7 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa (a\\<guillemotleft>x\\<guillemotright> \\<prec> Q')\""], ["proof (prove)\nusing this:\n  !Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'\n  x \\<sharp> Q\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n                        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                        xa \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'a.\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n                        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q'a) \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>aa xa Q'a.\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n           aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n           xa \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'a.\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n           \\<alpha> \\<prec> Q'a \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q'a) \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (7 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\" and \"x \\<sharp> Pa\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel &&& x \\<sharp> Pa", "by fact+"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (7 subgoals):\n 1. \\<And>a x P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P';\n        x \\<sharp> Q; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> P' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   P' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 7. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus \"?Sim Pa (a\\<guillemotleft>x\\<guillemotright> \\<prec> (Q \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have \"x \\<sharp> P \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> R", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>aa xa Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a aa xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel>\n                                   Q' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "from EqvtBangRel \\<open>x \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  eqvt (bangRel Rel)\n  x \\<sharp> Q", "show \"?Sim (P \\<parallel> R) (a\\<guillemotleft>x\\<guillemotright> \\<prec> (Q \\<parallel> Q'))\""], ["proof (prove)\nusing this:\n  eqvt (bangRel Rel)\n  x \\<sharp> Q\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject alpha' name_fresh_fresh)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from RBRQ"], ["proof (chain)\npicking this:\n  (R, !Q) \\<in> bangRel Rel", "have \"?Sim R (a\\<guillemotleft>x\\<guillemotright> \\<prec> Q')\""], ["proof (prove)\nusing this:\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> R \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "by(rule IH)"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "with xFreshR"], ["proof (chain)\npicking this:\n  x \\<sharp> R\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))", "obtain R' where RTrans: \"R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\" and R'BRQ': \"derivative R' Q' a x (bangRel Rel)\""], ["proof (prove)\nusing this:\n  x \\<sharp> R\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R';\n         derivative R' Q' a x (bangRel Rel)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto simp add: residual.inject)"], ["proof (state)\nthis:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  derivative R' Q' a x (bangRel Rel)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from RTrans xFreshP"], ["proof (chain)\npicking this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  x \\<sharp> P", "have \"P \\<parallel> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> (P \\<parallel> R')\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> R'\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                          R'", "by(auto intro: Par2B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from PRelQ R'BRQ' \\<open>x \\<sharp> Q\\<close> \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  derivative R' Q' a x (bangRel Rel)\n  x \\<sharp> Q\n  x \\<sharp> P", "have \"derivative (P \\<parallel> R') (Q \\<parallel> Q') a x (bangRel Rel)\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  derivative R' Q' a x (bangRel Rel)\n  x \\<sharp> Q\n  x \\<sharp> P\n\ngoal (1 subgoal):\n 1. derivative (P \\<parallel> R') (Q \\<parallel> Q') a x (bangRel Rel)", "by(cases a) (auto simp add: derivative_def forget intro: Rel.BRPar)"], ["proof (state)\nthis:\n  derivative (P \\<parallel> R') (Q \\<parallel> Q') a x (bangRel Rel)\n\ngoal (2 subgoals):\n 1. \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<sharp> P;\n     x \\<sharp> R\\<rbrakk>\n    \\<Longrightarrow> \\<exists>P'.\n                         P \\<parallel>\n                         R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                         derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n 2. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> Q') a x (bangRel Rel)", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and> derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> Q') a x (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (Q \\<parallel> Q') a x (bangRel Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (Q \\<parallel> Q') a x (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "fix y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "assume \"(y::name) \\<sharp> Q\" and \"y \\<sharp> Q'\" and \"y \\<sharp> P\" and \"y \\<sharp> R\""], ["proof (state)\nthis:\n  y \\<sharp> Q\n  y \\<sharp> Q'\n  y \\<sharp> P\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from RBRQ"], ["proof (chain)\npicking this:\n  (R, !Q) \\<in> bangRel Rel", "have \"?Sim R (a\\<guillemotleft>x\\<guillemotright> \\<prec> Q')\""], ["proof (prove)\nusing this:\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> R \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "by(rule IH)"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "with \\<open>y \\<sharp> Q'\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> Q'\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))", "have \"?Sim R (a\\<guillemotleft>y\\<guillemotright> \\<prec> ([(x, y)] \\<bullet> Q'))\""], ["proof (prove)\nusing this:\n  y \\<sharp> Q'\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. (\\<forall>aa xa Q'a.\n        a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> R \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "by(simp add: alphaBoundResidual)"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "with \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  y \\<sharp> R\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))", "obtain R' where RTrans: \"R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> R'\" and R'BRQ': \"derivative R' ([(x, y)] \\<bullet> Q') a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  y \\<sharp> R\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> R \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>y\\<guillemotright> \\<prec> [(x, y)] \\<bullet> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> R';\n         derivative R' ([(x, y)] \\<bullet> Q') a y (bangRel Rel)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(auto simp add: residual.inject)"], ["proof (state)\nthis:\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> R'\n  derivative R' ([(x, y)] \\<bullet> Q') a y (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from RTrans \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> R'\n  y \\<sharp> P", "have \"P \\<parallel> R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> (P \\<parallel> R')\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> R'\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P \\<parallel>\n                          R'", "by(auto intro: Par2B)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "from PRelQ R'BRQ' \\<open>y \\<sharp> P\\<close> \\<open>y \\<sharp> Q\\<close>"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  derivative R' ([(x, y)] \\<bullet> Q') a y (bangRel Rel)\n  y \\<sharp> P\n  y \\<sharp> Q", "have \"derivative (P \\<parallel> R') (Q \\<parallel> ([(x, y)] \\<bullet> Q')) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  derivative R' ([(x, y)] \\<bullet> Q') a y (bangRel Rel)\n  y \\<sharp> P\n  y \\<sharp> Q\n\ngoal (1 subgoal):\n 1. derivative (P \\<parallel> R') (Q \\<parallel> ([(x, y)] \\<bullet> Q')) a\n     y (bangRel Rel)", "by(cases a) (auto simp add: derivative_def forget intro: Rel.BRPar)"], ["proof (state)\nthis:\n  derivative (P \\<parallel> R') (Q \\<parallel> ([(x, y)] \\<bullet> Q')) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "hence \"derivative (P \\<parallel> R') (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  derivative (P \\<parallel> R') (Q \\<parallel> ([(x, y)] \\<bullet> Q')) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. derivative (P \\<parallel> R') (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a\n     y (bangRel Rel)", "by(simp add: name_swap)"], ["proof (state)\nthis:\n  derivative (P \\<parallel> R') (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<And>xa.\n       \\<lbrakk>eqvt (bangRel Rel); x \\<sharp> Q; x \\<noteq> xa;\n        xa \\<sharp> Q; xa \\<sharp> Q'; xa \\<sharp> P; xa \\<sharp> R\\<rbrakk>\n       \\<Longrightarrow> \\<exists>P'.\n                            P \\<parallel>\n                            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P'\n                             (Q \\<parallel> ([(xa, x)] \\<bullet> Q')) a xa\n                             (bangRel Rel)", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y\n   (bangRel Rel)", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and> derivative P' (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y (bangRel Rel)\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P \\<parallel>\n                        R'\n  derivative (P \\<parallel> R') (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y\n   (bangRel Rel)\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel>\n       R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n       derivative P' (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y\n        (bangRel Rel)", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel>\n     R \\<longmapsto> a\\<guillemotleft>y\\<guillemotright> \\<prec> P' \\<and>\n     derivative P' (Q \\<parallel> ([(y, x)] \\<bullet> Q')) a y (bangRel Rel)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>aa xa Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q \\<parallel> Q' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (6 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cPar2F \\<alpha> Q' Pa P)"], ["proof (state)\nthis:\n  !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'a.\n                        \\<alpha> \\<prec> Q' =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q'a a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha>' Q'a.\n                        \\<alpha> \\<prec> Q' =\n                        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                            (P', Q'a) \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (6 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa (\\<alpha> \\<prec> Q')\""], ["proof (prove)\nusing this:\n  !Q \\<longmapsto> \\<alpha> \\<prec> Q'\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'a.\n                        \\<alpha> \\<prec> Q' =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q'a a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha>' Q'a.\n                        \\<alpha> \\<prec> Q' =\n                        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                            (P', Q'a) \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>a x Q'a.\n           \\<alpha> \\<prec> Q' =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n           x \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q'a a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha>' Q'a.\n           \\<alpha> \\<prec> Q' = \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n               (P', Q'a) \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q' =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q' = \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (6 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (6 subgoals):\n 1. \\<And>\\<alpha> P' Pa P.\n       \\<lbrakk>!Q \\<longmapsto> \\<alpha> \\<prec> P';\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha>' Q'.\n                                 \\<alpha> \\<prec> P' =\n                                 \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'.\n                             \\<alpha> \\<prec> Q \\<parallel> P' =\n                             \\<alpha>' \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 6. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'a.\n        \\<alpha> \\<prec> Q \\<parallel> Q' =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        x \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha>' Q'a.\n        \\<alpha> \\<prec> Q \\<parallel> Q' =\n        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             x \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a x\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha>' Q'a.\n                             \\<alpha> \\<prec> Q \\<parallel> Q' =\n                             \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'a.\n        \\<alpha> \\<prec> Q \\<parallel> Q' =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        x \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha>' Q'a.\n        \\<alpha> \\<prec> Q \\<parallel> Q' =\n        \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "from RBRQ IH"], ["proof (chain)\npicking this:\n  (R, !Q) \\<in> bangRel Rel\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q' =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q' = \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))", "have \"\\<exists>R'. R \\<longmapsto> \\<alpha> \\<prec> R' \\<and> (R', Q') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (R, !Q) \\<in> bangRel Rel\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q' =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q' = \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       R \\<longmapsto> \\<alpha> \\<prec> R' \\<and> (R', Q') \\<in> bangRel Rel", "by(metis simE)"], ["proof (state)\nthis:\n  \\<exists>R'.\n     R \\<longmapsto> \\<alpha> \\<prec> R' \\<and> (R', Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "then"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     R \\<longmapsto> \\<alpha> \\<prec> R' \\<and> (R', Q') \\<in> bangRel Rel", "obtain R' where RTrans: \"R \\<longmapsto> \\<alpha> \\<prec> R'\" and R'RelQ': \"(R', Q') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     R \\<longmapsto> \\<alpha> \\<prec> R' \\<and> (R', Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> \\<alpha> \\<prec> R';\n         (R', Q') \\<in> bangRel Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R \\<longmapsto> \\<alpha> \\<prec> R'\n  (R', Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "from RTrans"], ["proof (chain)\npicking this:\n  R \\<longmapsto> \\<alpha> \\<prec> R'", "have \"P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\""], ["proof (prove)\nusing this:\n  R \\<longmapsto> \\<alpha> \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'", "by(rule Par2F)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "from PRelQ R'RelQ'"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  (R', Q') \\<in> bangRel Rel", "have \"(P \\<parallel> R', Q \\<parallel> Q') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  (R', Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (P \\<parallel> R', Q \\<parallel> Q') \\<in> bangRel Rel", "by(rule Rel.BRPar)"], ["proof (state)\nthis:\n  (P \\<parallel> R', Q \\<parallel> Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  (P \\<parallel> R', Q \\<parallel> Q') \\<in> bangRel Rel", "show \" \\<exists>P'. P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and> (P', Q \\<parallel> Q') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P \\<parallel> R'\n  (P \\<parallel> R', Q \\<parallel> Q') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n       (P', Q \\<parallel> Q') \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n     (P', Q \\<parallel> Q') \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q \\<parallel> Q' =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q \\<parallel> Q' =\n      \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'a.\n      \\<alpha> \\<prec> Q \\<parallel> Q' =\n      a\\<guillemotleft>x\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      x \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha>' Q'a.\n      \\<alpha> \\<prec> Q \\<parallel> Q' =\n      \\<alpha>' \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha>' \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cComm1 a x Q' b Q'' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  !Q \\<longmapsto> a[b] \\<prec> Q''\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a[b] \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a[b] \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa (a[b] \\<prec> Q'')\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  !Q \\<longmapsto> a[b] \\<prec> Q''\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a[b] \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a[b] \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>aa x Q'.\n           a[b] \\<prec> Q'' =\n           aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' aa x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           a[b] \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a[b] \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a[b] \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto>a<x> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a<x> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (5 subgoals):\n 1. \\<And>a x P' b P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a[b] \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>ba bb.\n           \\<lbrakk>(ba, !Q) \\<in> bangRel Rel; (bb, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a[b] \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> ba \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a[b] \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     ba \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P'[x::=b] \\<parallel> P'' =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 5. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "using \\<open>x \\<sharp> Pa\\<close>"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "from \\<open>x \\<sharp> P \\<parallel> R\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P \\<parallel> R", "have \"x \\<sharp> P\" and \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "with QTrans \\<open>x \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto> a<x> \\<prec> P'\" and P'RelQ': \"(P'[x::=b], Q'[x::=b]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<x> \\<prec> P';\n         (P'[x::=b], Q'[x::=b]) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(drule_tac simE) (auto simp add: derivative_def)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<x> \\<prec> P'\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "from IH RBRQ"], ["proof (chain)\npicking this:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a[b] \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a[b] \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (R, !Q) \\<in> bangRel Rel", "have RTrans: \"\\<exists>R'. R \\<longmapsto> a[b] \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a[b] \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a[b] \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       R \\<longmapsto> a[b] \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel", "by(auto simp add: derivative_def)"], ["proof (state)\nthis:\n  \\<exists>R'.\n     R \\<longmapsto> a[b] \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "then"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     R \\<longmapsto> a[b] \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel", "obtain R' where RTrans: \"R \\<longmapsto> a[b] \\<prec> R'\" and R'RelQ'': \"(R', Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     R \\<longmapsto> a[b] \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a[b] \\<prec> R';\n         (R', Q'') \\<in> bangRel Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R \\<longmapsto> a[b] \\<prec> R'\n  (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "from PTrans RTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a[b] \\<prec> R'", "have \"P \\<parallel> R \\<longmapsto>\\<tau> \\<prec> P'[x::=b] \\<parallel> R'\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a[b] \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'", "by(rule Comm1)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "from P'RelQ' R'RelQ''"], ["proof (chain)\npicking this:\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n  (R', Q'') \\<in> bangRel Rel", "have \"(P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P'[x::=b], Q'[x::=b]) \\<in> Rel\n  (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "by(rule Rel.BRPar)"], ["proof (state)\nthis:\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P'[x::=b] \\<parallel> R'\n  (P'[x::=b] \\<parallel> R', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', Q'[x::=b] \\<parallel> Q'') \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> Q'[x::=b] \\<parallel> Q'' =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cComm2 a b Q' x Q'' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n  !Q \\<longmapsto> a<x> \\<prec> Q''\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa xa Q'.\n                        a<x> \\<prec> Q'' =\n                        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        xa \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa xa (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<x> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa (a<x> \\<prec> Q'')\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n  !Q \\<longmapsto> a<x> \\<prec> Q''\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa xa Q'.\n                        a<x> \\<prec> Q'' =\n                        aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        xa \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa xa (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<x> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>aa xa Q'.\n           a<x> \\<prec> Q'' =\n           aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           xa \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' aa xa (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           a<x> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa xa Q'.\n      a<x> \\<prec> Q'' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      xa \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<x> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto> a[b] \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a[b] \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (4 subgoals):\n 1. \\<And>a b P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a[b] \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; x \\<sharp> Pa; x \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> P' \\<parallel> P''[x::=b] =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 4. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "using \\<open>x \\<sharp> Pa\\<close>"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "from \\<open>x \\<sharp> P \\<parallel> R\\<close>"], ["proof (chain)\npicking this:\n  x \\<sharp> P \\<parallel> R", "have \"x \\<sharp> P\" and \"x \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "with QTrans"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto> a[b] \\<prec> P'\" and P'RelQ': \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a[b] \\<prec> Q'\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a[b] \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(blast dest: simE)"], ["proof (state)\nthis:\n  P \\<longmapsto> a[b] \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "from IH RBRQ \\<open>x \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa xa Q'.\n      a<x> \\<prec> Q'' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      xa \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<x> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> R", "have RTrans: \"\\<exists>R'. R \\<longmapsto> a<x> \\<prec> R' \\<and> (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa xa Q'.\n      a<x> \\<prec> Q'' =\n      aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      xa \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<x> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       R \\<longmapsto> a<x> \\<prec> R' \\<and>\n       (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel", "by(fastforce simp add: derivative_def residual.inject)"], ["proof (state)\nthis:\n  \\<exists>R'.\n     R \\<longmapsto> a<x> \\<prec> R' \\<and>\n     (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "then"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     R \\<longmapsto> a<x> \\<prec> R' \\<and>\n     (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel", "obtain R' where RTrans: \"R \\<longmapsto> a<x> \\<prec> R'\" and R'RelQ'': \"(R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     R \\<longmapsto> a<x> \\<prec> R' \\<and>\n     (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<x> \\<prec> R';\n         (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R \\<longmapsto> a<x> \\<prec> R'\n  (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "from PTrans RTrans"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a[b] \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'", "have \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a[b] \\<prec> P'\n  R \\<longmapsto> a<x> \\<prec> R'\n\ngoal (1 subgoal):\n 1. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]", "by(rule Comm2)"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "from P'RelQ' R'RelQ''"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel", "have \"(P' \\<parallel> R'[x::=b], Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R'[x::=b], Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (P' \\<parallel> R'[x::=b], Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "by(rule Rel.BRPar)"], ["proof (state)\nthis:\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', Q' \\<parallel> (Q''[x::=b])) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<parallel> R'[x::=b]\n  (P' \\<parallel> R'[x::=b], Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', Q' \\<parallel> Q''[x::=b]) \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> Q' \\<parallel> Q''[x::=b] =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cClose1 a x Q' y Q'' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  !Q \\<longmapsto> a<\\<nu>y> \\<prec> Q''\n  y \\<sharp> Q\n  x \\<sharp> Pa\n  x \\<sharp> P\n  y \\<sharp> Pa\n  y \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a<\\<nu>y> \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<\\<nu>y> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<longrightarrow> ?Sim Pa (a<\\<nu>y> \\<prec> Q'')\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  !Q \\<longmapsto> a<\\<nu>y> \\<prec> Q''\n  y \\<sharp> Q\n  x \\<sharp> Pa\n  x \\<sharp> P\n  y \\<sharp> Pa\n  y \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a<\\<nu>y> \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<\\<nu>y> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<longrightarrow>\n       (\\<forall>aa x Q'.\n           a<\\<nu>y> \\<prec> Q'' =\n           aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' aa x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           a<\\<nu>y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<longrightarrow>\n  (\\<forall>aa x Q'.\n      a<\\<nu>y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<\\<nu>y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto> a<x> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a<x> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "moreover"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have xFreshPa: \"x \\<sharp> Pa\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> Pa", "by fact"], ["proof (state)\nthis:\n  x \\<sharp> Pa\n\ngoal (3 subgoals):\n 1. \\<And>a x P' y P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<x> \\<prec> P';\n        !Q \\<longmapsto> a<\\<nu>y> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa x Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<\\<nu>y> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel>\n               P'') =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 3. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "ultimately"], ["proof (chain)\npicking this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa", "show ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "using \\<open>y \\<sharp> Pa\\<close>"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n  y \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have \"x \\<sharp> P \\<parallel> R\" and \"y \\<sharp> P \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> R &&& y \\<sharp> P \\<parallel> R", "by fact+"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\" and \"y \\<sharp> R\" and \"y \\<sharp> P\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. (x \\<sharp> P &&& x \\<sharp> R) &&& y \\<sharp> R &&& y \\<sharp> P", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n  y \\<sharp> R\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel>\n               Q'') =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "with QTrans xFreshP"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto>a<x> \\<prec> P'\" and P'RelQ': \"(P'[x::=y], Q'[x::=y]) \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<x> \\<prec> P';\n         (P'[x::=y], Q'[x::=y]) \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: simE simp add: derivative_def)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<x> \\<prec> P'\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "from RBRQ \\<open>y \\<sharp> R\\<close> IH"], ["proof (chain)\npicking this:\n  (R, !Q) \\<in> bangRel Rel\n  y \\<sharp> R\n  (?Pa, !Q) \\<in> bangRel Rel \\<longrightarrow>\n  (\\<forall>aa x Q'.\n      a<\\<nu>y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<\\<nu>y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))", "have \"\\<exists>R'. R \\<longmapsto>a<\\<nu>y> \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (R, !Q) \\<in> bangRel Rel\n  y \\<sharp> R\n  (?Pa, !Q) \\<in> bangRel Rel \\<longrightarrow>\n  (\\<forall>aa x Q'.\n      a<\\<nu>y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<\\<nu>y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       R \\<longmapsto> a<\\<nu>y> \\<prec> R' \\<and>\n       (R', Q'') \\<in> bangRel Rel", "by(auto simp add: residual.inject derivative_def)"], ["proof (state)\nthis:\n  \\<exists>R'.\n     R \\<longmapsto> a<\\<nu>y> \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "then"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     R \\<longmapsto> a<\\<nu>y> \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel", "obtain R' where RTrans: \"R \\<longmapsto>a<\\<nu>y> \\<prec> R'\" and R'RelQ'': \"(R', Q'') \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     R \\<longmapsto> a<\\<nu>y> \\<prec> R' \\<and> (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<\\<nu>y> \\<prec> R';\n         (R', Q'') \\<in> bangRel Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "from PTrans RTrans \\<open>y \\<sharp> P\\<close>"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  y \\<sharp> P", "have \"P \\<parallel> R \\<longmapsto>\\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<x> \\<prec> P'\n  R \\<longmapsto> a<\\<nu>y> \\<prec> R'\n  y \\<sharp> P\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')", "by(rule Close1)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "from P'RelQ' R'RelQ''"], ["proof (chain)\npicking this:\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n  (R', Q'') \\<in> bangRel Rel", "have \"(<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P'[x::=y], Q'[x::=y]) \\<in> Rel\n  (R', Q'') \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>y>(P'[x::=y] \\<parallel> R'),\n     <\\<nu>y>(Q'[x::=y] \\<parallel> Q''))\n    \\<in> bangRel Rel", "by(force intro: Rel.BRPar BRRes)"], ["proof (state)\nthis:\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> Q''))\n  \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> Q''))\n  \\<in> bangRel Rel", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>y>(P'[x::=y] \\<parallel> R')\n  (<\\<nu>y>(P'[x::=y] \\<parallel> R'), <\\<nu>y>(Q'[x::=y] \\<parallel> Q''))\n  \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', <\\<nu>y>(Q'[x::=y] \\<parallel> Q'')) \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> <\\<nu>y>(Q'[x::=y] \\<parallel> Q'') =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cClose2 a x Q' y Q'' Pa P)"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\n  !Q \\<longmapsto> a<y> \\<prec> Q''\n  x \\<sharp> Q\n  y \\<sharp> Pa\n  y \\<sharp> P\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a<y> \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<y> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa (a<y> \\<prec> Q'')\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\n  !Q \\<longmapsto> a<y> \\<prec> Q''\n  x \\<sharp> Q\n  y \\<sharp> Pa\n  y \\<sharp> P\n  x \\<sharp> Pa\n  x \\<sharp> P\n  \\<lbrakk>(?b, !Q) \\<in> bangRel Rel; (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>aa x Q'.\n                        a<y> \\<prec> Q'' =\n                        aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' aa x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        a<y> \\<prec> Q'' =\n                        \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>aa x Q'.\n           a<y> \\<prec> Q'' =\n           aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' aa x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           a<y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a<y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have QTrans: \"Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'", "by fact"], ["proof (state)\nthis:\n  Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\n\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\" and \"x \\<sharp> Pa\" and \"y \\<sharp> Pa\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel &&&\n    x \\<sharp> Pa &&& y \\<sharp> Pa", "by fact+"], ["proof (state)\nthis:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n  y \\<sharp> Pa\n\ngoal (2 subgoals):\n 1. \\<And>a y P' x P'' Pa P.\n       \\<lbrakk>Q \\<longmapsto> a<\\<nu>y> \\<prec> P';\n        !Q \\<longmapsto> a<x> \\<prec> P''; y \\<sharp> Q; x \\<sharp> Pa;\n        x \\<sharp> P; y \\<sharp> Pa; y \\<sharp> P;\n        \\<And>b ba.\n           \\<lbrakk>(b, !Q) \\<in> bangRel Rel; (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>aa xa Q'.\n                                 a<x> \\<prec> P'' =\n                                 aa\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 xa \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> aa\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' aa xa\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 a<x> \\<prec> P'' =\n                                 \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             xa \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             \\<tau> \\<prec> <\\<nu>y>(P' \\<parallel>\n               P''[x::=y]) =\n                             \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))\n 2. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel\n  x \\<sharp> Pa\n  y \\<sharp> Pa\n\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(induct rule: BRParCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "case(BRPar P R)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\" and RBRQ: \"(R, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel &&& (R, !Q) \\<in> bangRel Rel", "by fact+"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n  (R, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "have \"x \\<sharp> P \\<parallel> R\" and \"y \\<sharp> P \\<parallel> R\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<sharp> P \\<parallel> R &&& y \\<sharp> P \\<parallel> R", "by fact+"], ["proof (state)\nthis:\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "hence xFreshP: \"x \\<sharp> P\" and xFreshR: \"x \\<sharp> R\" and \"y \\<sharp> R\""], ["proof (prove)\nusing this:\n  x \\<sharp> P \\<parallel> R\n  y \\<sharp> P \\<parallel> R\n\ngoal (1 subgoal):\n 1. x \\<sharp> P &&& x \\<sharp> R &&& y \\<sharp> R", "by simp+"], ["proof (state)\nthis:\n  x \\<sharp> P\n  x \\<sharp> R\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<And>P R.\n       \\<lbrakk>(P, Q) \\<in> Rel; (R, !Q) \\<in> bangRel Rel;\n        x \\<sharp> P \\<parallel> R; y \\<sharp> P \\<parallel> R\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a xa Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n                             xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q'a a xa\n                                  (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'a.\n                             \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel>\n               Q''[y::=x]) =\n                             \\<alpha> \\<prec> Q'a \\<longrightarrow>\n                             (\\<exists>P'.\n                                 P \\<parallel>\n                                 R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q'a) \\<in> bangRel Rel))", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>a xa Q'a.\n        \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n        a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n        xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q'a a xa (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'a.\n        \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n        \\<alpha> \\<prec> Q'a \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q'a) \\<in> bangRel Rel))", "proof(auto simp add: residual.inject)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"P \\<leadsto>[Rel] Q\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. P \\<leadsto>[Rel] Q", "by(rule Sim)"], ["proof (state)\nthis:\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "with QTrans xFreshP"], ["proof (chain)\npicking this:\n  Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q", "obtain P' where PTrans: \"P \\<longmapsto>a<\\<nu>x> \\<prec> P'\" and P'RelQ': \"(P', Q') \\<in> Rel\""], ["proof (prove)\nusing this:\n  Q \\<longmapsto> a<\\<nu>x> \\<prec> Q'\n  x \\<sharp> P\n  P \\<leadsto>[Rel] Q\n\ngoal (1 subgoal):\n 1. (\\<And>P'.\n        \\<lbrakk>P \\<longmapsto> a<\\<nu>x> \\<prec> P';\n         (P', Q') \\<in> Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by(fastforce dest: simE simp add: derivative_def)"], ["proof (state)\nthis:\n  P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n  (P', Q') \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "from RBRQ IH \\<open>y \\<sharp> R\\<close>"], ["proof (chain)\npicking this:\n  (R, !Q) \\<in> bangRel Rel\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a<y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  y \\<sharp> R", "have \"\\<exists>R'.  R \\<longmapsto>a<y> \\<prec> R' \\<and> (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (R, !Q) \\<in> bangRel Rel\n  (?Pa, !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>aa x Q'.\n      a<y> \\<prec> Q'' =\n      aa\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> aa\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' aa x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      a<y> \\<prec> Q'' = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  y \\<sharp> R\n\ngoal (1 subgoal):\n 1. \\<exists>R'.\n       R \\<longmapsto> a<y> \\<prec> R' \\<and>\n       (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel", "by(fastforce simp add: derivative_def residual.inject)"], ["proof (state)\nthis:\n  \\<exists>R'.\n     R \\<longmapsto> a<y> \\<prec> R' \\<and>\n     (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "then"], ["proof (chain)\npicking this:\n  \\<exists>R'.\n     R \\<longmapsto> a<y> \\<prec> R' \\<and>\n     (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel", "obtain R' where RTrans: \"R \\<longmapsto>a<y> \\<prec> R'\" and R'RelQ'': \"(R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  \\<exists>R'.\n     R \\<longmapsto> a<y> \\<prec> R' \\<and>\n     (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<And>R'.\n        \\<lbrakk>R \\<longmapsto> a<y> \\<prec> R';\n         (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  R \\<longmapsto> a<y> \\<prec> R'\n  (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "from PTrans RTrans xFreshR"], ["proof (chain)\npicking this:\n  P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n  R \\<longmapsto> a<y> \\<prec> R'\n  x \\<sharp> R", "have \"P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])\""], ["proof (prove)\nusing this:\n  P \\<longmapsto> a<\\<nu>x> \\<prec> P'\n  R \\<longmapsto> a<y> \\<prec> R'\n  x \\<sharp> R\n\ngoal (1 subgoal):\n 1. P \\<parallel>\n    R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])", "by(rule Close2)"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "moreover"], ["proof (state)\nthis:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "from P'RelQ' R'RelQ''"], ["proof (chain)\npicking this:\n  (P', Q') \\<in> Rel\n  (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel", "have \"(<\\<nu>x>(P' \\<parallel> R'[y::=x]), <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P', Q') \\<in> Rel\n  (R'[y::=x], Q''[y::=x]) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (<\\<nu>x>(P' \\<parallel> R'[y::=x]),\n     <\\<nu>x>(Q' \\<parallel> Q''[y::=x]))\n    \\<in> bangRel Rel", "by(force intro: Rel.BRPar BRRes)"], ["proof (state)\nthis:\n  (<\\<nu>x>(P' \\<parallel> R'[y::=x]), <\\<nu>x>(Q' \\<parallel> Q''[y::=x]))\n  \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "ultimately"], ["proof (chain)\npicking this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])\n  (<\\<nu>x>(P' \\<parallel> R'[y::=x]), <\\<nu>x>(Q' \\<parallel> Q''[y::=x]))\n  \\<in> bangRel Rel", "show \"\\<exists>P'. P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and> (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  P \\<parallel>\n  R \\<longmapsto> \\<tau> \\<prec> <\\<nu>x>(P' \\<parallel> R'[y::=x])\n  (<\\<nu>x>(P' \\<parallel> R'[y::=x]), <\\<nu>x>(Q' \\<parallel> Q''[y::=x]))\n  \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<exists>P'.\n       P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n       (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel", "by blast"], ["proof (state)\nthis:\n  \\<exists>P'.\n     P \\<parallel> R \\<longmapsto> \\<tau> \\<prec> P' \\<and>\n     (P', <\\<nu>x>(Q' \\<parallel> Q''[y::=x])) \\<in> bangRel Rel\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> P \\<parallel> R \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          R \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> R \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a xa Q'a.\n      \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n      a\\<guillemotleft>xa\\<guillemotright> \\<prec> Q'a \\<longrightarrow>\n      xa \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>xa\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q'a a xa (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'a.\n      \\<tau> \\<prec> <\\<nu>x>(Q' \\<parallel> Q''[y::=x]) =\n      \\<alpha> \\<prec> Q'a \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q'a) \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "case(cBang Rs Pa P)"], ["proof (state)\nthis:\n  Q \\<parallel> !Q \\<longmapsto> Rs\n  \\<lbrakk>(?b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n   (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        Rs =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "hence IH: \"\\<And>Pa. (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel \\<Longrightarrow> ?Sim Pa Rs\""], ["proof (prove)\nusing this:\n  Q \\<parallel> !Q \\<longmapsto> Rs\n  \\<lbrakk>(?b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n   (?ba, Q) \\<in> Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        Rs =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?b \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (Pa, !Q) \\<in> bangRel Rel\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>Pa.\n       (Pa, Q \\<parallel> !Q) \\<in> bangRel Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> Pa \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (?Pa, Q \\<parallel> !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "have \"(Pa, !Q) \\<in> bangRel Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (Pa, !Q) \\<in> bangRel Rel", "by fact"], ["proof (state)\nthis:\n  (Pa, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>Rs Pa P.\n       \\<lbrakk>Q \\<parallel> !Q \\<longmapsto> Rs;\n        \\<And>b ba.\n           \\<lbrakk>(b, Q \\<parallel> !Q) \\<in> bangRel Rel;\n            (ba, Q) \\<in> Rel\\<rbrakk>\n           \\<Longrightarrow> (\\<forall>a x Q'.\n                                 Rs =\n                                 a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                                 x \\<sharp> b \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                     derivative P' Q' a x\n(bangRel Rel))) \\<and>\n                             (\\<forall>\\<alpha> Q'.\n                                 Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                                 (\\<exists>P'.\n                                     b \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                     (P', Q') \\<in> bangRel Rel));\n        (Pa, !Q) \\<in> bangRel Rel; (P, Q) \\<in> Rel\\<rbrakk>\n       \\<Longrightarrow> (\\<forall>a x Q'.\n                             Rs =\n                             a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                             x \\<sharp> Pa \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                                 derivative P' Q' a x (bangRel Rel))) \\<and>\n                         (\\<forall>\\<alpha> Q'.\n                             Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                             (\\<exists>P'.\n                                 Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                                 (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (Pa, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'.\n        Rs =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n        x \\<sharp> Pa \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q' a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'.\n        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n        (\\<exists>P'.\n            Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q') \\<in> bangRel Rel))", "proof(induct rule: BRBangCases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "case(BRBang P)"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "have PRelQ: \"(P, Q) \\<in> Rel\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (P, Q) \\<in> Rel", "by fact"], ["proof (state)\nthis:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "hence \"(!P, !Q) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (!P, !Q) \\<in> bangRel Rel", "by(rule Rel.BRBang)"], ["proof (state)\nthis:\n  (!P, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "with PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel\n  (!P, !Q) \\<in> bangRel Rel", "have \"(P \\<parallel> !P, Q \\<parallel> !Q) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n  (!P, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (P \\<parallel> !P, Q \\<parallel> !Q) \\<in> bangRel Rel", "by(rule BRPar)"], ["proof (state)\nthis:\n  (P \\<parallel> !P, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "with IH"], ["proof (chain)\npicking this:\n  (?Pa, Q \\<parallel> !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (P \\<parallel> !P, Q \\<parallel> !Q) \\<in> bangRel Rel", "have \"?Sim (P \\<parallel> !P) Rs\""], ["proof (prove)\nusing this:\n  (?Pa, Q \\<parallel> !Q) \\<in> bangRel Rel \\<Longrightarrow>\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> ?Pa \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          ?Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n  (P \\<parallel> !P, Q \\<parallel> !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'.\n        Rs =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n        x \\<sharp> P \\<parallel> !P \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel>\n            !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q' a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'.\n        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n        (\\<exists>P'.\n            P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q') \\<in> bangRel Rel))", "by simp"], ["proof (state)\nthis:\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> P \\<parallel> !P \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. \\<And>P.\n       (P, Q) \\<in> Rel \\<Longrightarrow>\n       (\\<forall>a x Q'.\n           Rs =\n           a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n           x \\<sharp> !P \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n               derivative P' Q' a x (bangRel Rel))) \\<and>\n       (\\<forall>\\<alpha> Q'.\n           Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n           (\\<exists>P'.\n               !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n               (P', Q') \\<in> bangRel Rel))", "thus ?case"], ["proof (prove)\nusing this:\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> P \\<parallel> !P \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel>\n          !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          P \\<parallel> !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. (\\<forall>a x Q'.\n        Rs =\n        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n        x \\<sharp> !P \\<longrightarrow>\n        (\\<exists>P'.\n            !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n            derivative P' Q' a x (bangRel Rel))) \\<and>\n    (\\<forall>\\<alpha> Q'.\n        Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n        (\\<exists>P'.\n            !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n            (P', Q') \\<in> bangRel Rel))", "by(force intro: Bang)"], ["proof (state)\nthis:\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> !P \\<longrightarrow>\n      (\\<exists>P'.\n          !P \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          !P \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>a x Q'.\n      Rs = a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n      x \\<sharp> Pa \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n          derivative P' Q' a x (bangRel Rel))) \\<and>\n  (\\<forall>\\<alpha> Q'.\n      Rs = \\<alpha> \\<prec> Q' \\<longrightarrow>\n      (\\<exists>P'.\n          Pa \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n          (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "}"], ["proof (state)\nthis:\n  \\<lbrakk>!Q \\<longmapsto> ?Rs2; (?Pa2, !Q) \\<in> bangRel Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        ?Rs2 =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?Pa2 \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        ?Rs2 = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "moreover"], ["proof (state)\nthis:\n  \\<lbrakk>!Q \\<longmapsto> ?Rs2; (?Pa2, !Q) \\<in> bangRel Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        ?Rs2 =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?Pa2 \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        ?Rs2 = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "from PRelQ"], ["proof (chain)\npicking this:\n  (P, Q) \\<in> Rel", "have \"(!P, !Q) \\<in> bangRel Rel\""], ["proof (prove)\nusing this:\n  (P, Q) \\<in> Rel\n\ngoal (1 subgoal):\n 1. (!P, !Q) \\<in> bangRel Rel", "by(rule BRBang)"], ["proof (state)\nthis:\n  (!P, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrakk>!Q \\<longmapsto> ?Rs2; (?Pa2, !Q) \\<in> bangRel Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        ?Rs2 =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?Pa2 \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        ?Rs2 = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (!P, !Q) \\<in> bangRel Rel", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>!Q \\<longmapsto> ?Rs2; (?Pa2, !Q) \\<in> bangRel Rel\\<rbrakk>\n  \\<Longrightarrow> (\\<forall>a x Q'.\n                        ?Rs2 =\n                        a\\<guillemotleft>x\\<guillemotright> \\<prec> Q' \\<longrightarrow>\n                        x \\<sharp> ?Pa2 \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> a\\<guillemotleft>x\\<guillemotright> \\<prec> P' \\<and>\n                            derivative P' Q' a x (bangRel Rel))) \\<and>\n                    (\\<forall>\\<alpha> Q'.\n                        ?Rs2 = \\<alpha> \\<prec> Q' \\<longrightarrow>\n                        (\\<exists>P'.\n                            ?Pa2 \\<longmapsto> \\<alpha> \\<prec> P' \\<and>\n                            (P', Q') \\<in> bangRel Rel))\n  (!P, !Q) \\<in> bangRel Rel\n\ngoal (1 subgoal):\n 1. !P \\<leadsto>[bangRel Rel] !Q", "by(auto simp add: simulation_def)"], ["proof (state)\nthis:\n  !P \\<leadsto>[bangRel Rel] !Q\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}