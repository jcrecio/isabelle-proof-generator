{"file_name": "/home/qj213/afp-2021-10-22/thys/MiniSail/IVSubst.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/MiniSail", "problem_names": ["lemma subst_v_flip_eq_one:\n  fixes z1::x and z2::x and x1::x and x2::x  \n  assumes \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\" \n    and \"atom x1 \\<sharp> (z1,z2,c1,c2)\"\n  shows \"(c1[z1::=[x1]\\<^sup>v]\\<^sub>v) = (c2[z2::=[x1]\\<^sup>v]\\<^sub>v)\"", "lemma subst_v_flip_eq_two:\n  fixes z1::x and z2::x and x1::x and x2::x \n  assumes \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\" \n  shows \"(c1[z1::=b]\\<^sub>v) = (c2[z2::=b]\\<^sub>v)\"", "lemma subst_v_flip_eq_three:\n  assumes \"[[atom z1]]lst. c1 = [[atom z1']]lst. c1'\"  and \"atom x \\<sharp> c1\" and \"atom x' \\<sharp> (x,z1,z1', c1, c1')\"\n  shows   \"(x \\<leftrightarrow> x') \\<bullet> (c1[z1::=[x]\\<^sup>v]\\<^sub>v) =  c1'[z1'::=[x']\\<^sup>v]\\<^sub>v\"", "lemma fresh_subst_vv_if [simp]:\n  \"j \\<sharp> t[i::=x]\\<^sub>v\\<^sub>v  = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\"", "lemma forget_subst_vv [simp]: \"atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v\\<^sub>v = tm\"", "lemma subst_vv_id [simp]: \"tm[a::=V_var a]\\<^sub>v\\<^sub>v  = tm\"", "lemma subst_vv_commute [simp]:\n  \"atom j \\<sharp> tm \\<Longrightarrow> tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v = tm[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>v\\<^sub>v \"", "lemma subst_vv_commute_full [simp]:\n  \"atom j \\<sharp> t \\<Longrightarrow> atom i \\<sharp> u \\<Longrightarrow> i \\<noteq> j \\<Longrightarrow> tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v = tm[j::=u]\\<^sub>v\\<^sub>v[i::=t]\\<^sub>v\\<^sub>v\"", "lemma subst_vv_var_flip[simp]:\n  fixes v::v\n  assumes \"atom y \\<sharp> v\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> v = v [x::=V_var y]\\<^sub>v\\<^sub>v\"", "lemma size_subst_ev [simp]: \"size ( subst_ev A i x) = size A\"", "lemma forget_subst_ev [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_ev A a x  = A\"", "lemma subst_ev_id [simp]: \"subst_ev A a (V_var a)  = A\"", "lemma fresh_subst_ev_if [simp]:\n  \"j \\<sharp> (subst_ev A i x ) = ((atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i)))\"", "lemma subst_ev_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (A[i::=t]\\<^sub>e\\<^sub>v)[j::=u]\\<^sub>e\\<^sub>v = A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v\"", "lemma subst_ev_var_flip[simp]:\n  fixes e::e and y::x and x::x\n  assumes \"atom y \\<sharp> e\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> e = e [x::=V_var y]\\<^sub>e\\<^sub>v\"", "lemma subst_ev_flip:\n  fixes e::e and ea::e and c::x\n  assumes \"atom c \\<sharp> (e, ea)\" and \"atom c \\<sharp> (x, xa, e, ea)\" and \"(x \\<leftrightarrow> c) \\<bullet> e = (xa \\<leftrightarrow> c) \\<bullet> ea\" \n  shows \"e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v\"", "lemma subst_ev_var[simp]:\n  \"(AE_val (V_var x))[x::=[z]\\<^sup>v]\\<^sub>e\\<^sub>v = AE_val (V_var z)\"", "lemma subst_ev_commute_full:\n  fixes e::e and w::v and v::v\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x \\<noteq> z\"\n  shows \"subst_ev  (e[z::=w]\\<^sub>e\\<^sub>v) x v = subst_ev  (e[x::=v]\\<^sub>e\\<^sub>v) z w\"", "lemma subst_ev_v_flip1[simp]:\n  fixes e::e\n  assumes \"atom z1 \\<sharp> (z,e)\" and \"atom z1' \\<sharp> (z,e)\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>e\\<^sub>v =  e[z::= ((z1 \\<leftrightarrow> z1') \\<bullet> v)]\\<^sub>e\\<^sub>v\"", "lemma size_subst_cev [simp]: \"size ( subst_cev A i x ) = size A\"", "lemma forget_subst_cev [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_cev A a x  = A\"", "lemma subst_cev_id [simp]: \"subst_cev A a (V_var a)  = A\"", "lemma fresh_subst_cev_if [simp]:\n  \"j \\<sharp> (subst_cev A i x ) = ((atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i)))\"", "lemma subst_cev_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (subst_cev (subst_cev A i t ) j u) = subst_cev A i (subst_vv t j u )\"", "lemma subst_cev_var_flip[simp]:\n  fixes e::ce and y::x and x::x\n  assumes \"atom y \\<sharp> e\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> e = e [x::=V_var y]\\<^sub>c\\<^sub>e\\<^sub>v\"", "lemma subst_cev_flip:\n  fixes e::ce and ea::ce and c::x\n  assumes \"atom c \\<sharp> (e, ea)\" and \"atom c \\<sharp> (x, xa, e, ea)\" and \"(x \\<leftrightarrow> c) \\<bullet> e = (xa \\<leftrightarrow> c) \\<bullet> ea\" \n  shows \"e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\"", "lemma subst_cev_var[simp]:\n  fixes z::x and x::x\n  shows  \"[[x]\\<^sup>v]\\<^sup>c\\<^sup>e [x::=[z]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v = [[z]\\<^sup>v]\\<^sup>c\\<^sup>e\"", "lemma subst_cev_commute_full:\n  fixes e::ce and w::v and v::v\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x \\<noteq> z\"\n  shows \"subst_cev (e[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v) x v  = subst_cev (e[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v) z w \"", "lemma subst_cev_v_flip1[simp]:\n  fixes e::ce\n  assumes \"atom z1 \\<sharp> (z,e)\" and \"atom z1' \\<sharp> (z,e)\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =  e[z::= ((z1 \\<leftrightarrow> z1') \\<bullet> v)]\\<^sub>c\\<^sub>e\\<^sub>v\"", "lemma size_subst_cv [simp]: \"size ( subst_cv A i x ) = size A\"", "lemma forget_subst_cv [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_cv A a x  = A\"", "lemma subst_cv_id [simp]: \"subst_cv A a (V_var a)  = A\"", "lemma fresh_subst_cv_if [simp]:\n  \"j \\<sharp> (subst_cv A i x ) \\<longleftrightarrow> (atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))\"", "lemma subst_cv_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (subst_cv (subst_cv A i t ) j u ) = subst_cv A i (subst_vv t j u )\"", "lemma let_s_size [simp]: \"size s \\<le> size (AS_let x e s)\"", "lemma subst_cv_var_flip[simp]:\n  fixes c::c\n  assumes \"atom y \\<sharp> c\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> c = c[x::=V_var y]\\<^sub>c\\<^sub>v\"", "lemma subst_cv_var_flip1[simp]:\n  fixes c::c\n  assumes \"atom y \\<sharp> c\"\n  shows \"(x \\<leftrightarrow> y) \\<bullet> c = c[x::=V_var y]\\<^sub>c\\<^sub>v\"", "lemma subst_cv_v_flip3[simp]:\n  fixes c::c\n  assumes \"atom z1 \\<sharp> c\" and \"atom z1' \\<sharp> c\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v =  c[z::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v\"", "lemma subst_cv_v_flip[simp]:\n  fixes c::c\n  assumes \"atom x \\<sharp> c\"\n  shows \"((x \\<leftrightarrow> z) \\<bullet> c)[x::=v]\\<^sub>c\\<^sub>v = c [z::=v]\\<^sub>c\\<^sub>v\"", "lemma subst_cv_commute_full:\n  fixes c::c\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x\\<noteq>z\"\n  shows \"(c[z::=w]\\<^sub>c\\<^sub>v)[x::=v]\\<^sub>c\\<^sub>v = (c[x::=v]\\<^sub>c\\<^sub>v)[z::=w]\\<^sub>c\\<^sub>v\"", "lemma subst_cv_eq[simp]:\n  assumes  \"atom z1 \\<sharp> e1\" \n  shows \"(CE_val (V_var z1)  ==  e1 )[z1::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v = (CE_val (V_var x)  ==  e1 )\" (is \"?A = ?B\")", "lemma size_subst_gv [simp]: \"size ( subst_gv G i x ) \\<le> size G\"", "lemma forget_subst_gv [simp]: \"atom a \\<sharp> G \\<Longrightarrow> subst_gv G a x = G\"", "lemma fresh_subst_gv: \"atom a \\<sharp> G \\<Longrightarrow> atom a \\<sharp> v \\<Longrightarrow> atom a \\<sharp> subst_gv G x v\"", "lemma subst_gv_flip: \n  fixes x::x and xa::x and z::x and c::c and b::b and \\<Gamma>::\\<Gamma>\n  assumes \"atom xa \\<sharp> ((x, b, c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>)\"  and \"atom xa \\<sharp> \\<Gamma>\" and \"atom x \\<sharp> \\<Gamma>\" and \"atom x \\<sharp> (z, c)\" and \"atom xa \\<sharp> (z, c)\"\n  shows \"(x \\<leftrightarrow> xa) \\<bullet>  ((x, b, c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>) = (xa, b, c[z::=V_var xa]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>\"", "lemma size_subst_tv [simp]: \"size ( subst_tv A i x ) = size A\"", "lemma forget_subst_tv [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_tv A a x  = A\"", "lemma subst_tv_id [simp]: \"subst_tv A a (V_var a) = A\"", "lemma fresh_subst_tv_if [simp]:\n  \"j \\<sharp> (subst_tv A i x ) \\<longleftrightarrow> (atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))\"", "lemma subst_tv_commute [simp]:\n  \"atom y \\<sharp> \\<tau> \\<Longrightarrow> (\\<tau>[x::= t]\\<^sub>\\<tau>\\<^sub>v)[y::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>[x::= t[y::=v]\\<^sub>v\\<^sub>v]\\<^sub>\\<tau>\\<^sub>v \"", "lemma subst_tv_var_flip [simp]:\n  fixes x::x and xa::x and \\<tau>::\\<tau>\n  assumes \"atom xa \\<sharp> \\<tau>\"\n  shows \"(x \\<leftrightarrow> xa) \\<bullet> \\<tau> = \\<tau>[x::=V_var xa]\\<^sub>\\<tau>\\<^sub>v\"", "lemma subst_tv_commute_full:\n  fixes c::\\<tau>\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x\\<noteq>z\"\n  shows \"(c[z::=w]\\<^sub>\\<tau>\\<^sub>v)[x::=v]\\<^sub>\\<tau>\\<^sub>v = (c[x::=v]\\<^sub>\\<tau>\\<^sub>v)[z::=w]\\<^sub>\\<tau>\\<^sub>v\"", "lemma type_eq_subst_eq:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = \\<lbrace> z2 : b2  |  c2 \\<rbrace>\"\n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\"", "lemma c_of_eq:\n  shows  \"c_of \\<lbrace> x : b | c \\<rbrace> x = c\"", "lemma obtain_fresh_z_c_of:\n  fixes t::\"'b::fs\"\n  obtains z  where \"atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau> | c_of \\<tau> z \\<rbrace>\"", "lemma c_of_fresh:\n  fixes x::x\n  assumes  \"atom x \\<sharp> (t,z)\" \n  shows \"atom x \\<sharp> c_of t z\"", "lemma c_of_switch:\n  fixes z::x\n  assumes \"atom z \\<sharp> t\" \n  shows \"(c_of t z)[z::=V_var x]\\<^sub>c\\<^sub>v = c_of t x\"", "lemma type_eq_subst_eq1:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" and \"atom z1 \\<sharp> c2\" \n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\" and \"b1=b2\" and \" c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2\"", "lemma type_eq_subst_eq2:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" \n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\" and \"b1=b2\" and \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\"", "lemma type_eq_subst_eq3:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" and \"atom z1 \\<sharp> c2\" \n  shows \"c1 = c2[z2::=V_var z1]\\<^sub>c\\<^sub>v\" and \"b1=b2\"", "lemma type_eq_flip:\n  assumes \"atom x \\<sharp> c\"\n  shows \"\\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> x : b | (x \\<leftrightarrow> z ) \\<bullet> c \\<rbrace>\"", "lemma c_of_true:\n  \"c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = C_true\"", "lemma type_eq_subst:\n  assumes \"atom x \\<sharp> c\"\n  shows \"\\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> x : b | c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\"", "lemma type_e_subst_fresh:\n  fixes x::x and z::x\n  assumes \"atom z \\<sharp> (x,v)\" and \"atom x \\<sharp> e\" \n  shows \"\\<lbrace> z : b  | CE_val (V_var z)  ==  e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<lbrace> z : b  | CE_val (V_var z)  ==  e  \\<rbrace>\"", "lemma type_v_subst_fresh:\n  fixes x::x and z::x\n  assumes \"atom z \\<sharp> (x,v)\" and \"atom x \\<sharp> v'\" \n  shows \"\\<lbrace> z : b  | CE_val (V_var z)  ==  CE_val v'  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<lbrace> z : b  | CE_val (V_var z)  ==  CE_val v'  \\<rbrace>\"", "lemma subst_tbase_eq:\n  \"b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v\"", "lemma subst_tv_if:\n  assumes \"atom z1 \\<sharp> (x,v)\" and \"atom z' \\<sharp> (x,v)\" \n  shows \"\\<lbrace> z1 : b  | CE_val (v'[x::=v]\\<^sub>v\\<^sub>v)  ==  CE_val (V_lit l)   IMP  (c'[x::=v]\\<^sub>c\\<^sub>v)[z'::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> = \n         \\<lbrace> z1 : b  | CE_val v'           ==  CE_val (V_lit l)   IMP  c'[z'::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\"", "lemma subst_tv_tid:\n  assumes \"atom za \\<sharp> (x,v)\"\n  shows \"\\<lbrace> za : B_id tid  | TRUE \\<rbrace> = \\<lbrace> za : B_id tid   | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\"", "lemma b_of_subst:\n  \"b_of (\\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v) = b_of \\<tau>\"", "lemma subst_tv_flip:\n  assumes \"\\<tau>'[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\" and \"atom x \\<sharp> (v,\\<tau>)\" and \"atom x' \\<sharp> (v,\\<tau>)\"\n  shows \"((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\"", "lemma subst_cv_true:\n  \"\\<lbrace> z : B_id tid  | TRUE \\<rbrace> = \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\"", "lemma t_eq_supp:\n  assumes \"(\\<lbrace> z : b | c \\<rbrace>) = (\\<lbrace>  z1 : b1 | c1 \\<rbrace>)\"\n  shows \"supp c - { atom z } = supp c1 - { atom z1 }\"", "lemma fresh_t_eq: \n  fixes x::x\n  assumes  \"(\\<lbrace> z : b  | c \\<rbrace>) = (\\<lbrace> zz : b | cc \\<rbrace>)\" and \"atom x \\<sharp> c\" and \"x \\<noteq> zz\"\n  shows \"atom x \\<sharp> cc\"", "lemma subst_dv_iff:\n  \"\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v = dmap (\\<lambda>(u,t). (u, t[x::=v]\\<^sub>\\<tau>\\<^sub>v)) \\<Delta>\"", "lemma size_subst_dv [simp]: \"size ( subst_dv G i x) \\<le> size G\"", "lemma forget_subst_dv [simp]: \"atom a \\<sharp> G \\<Longrightarrow> subst_dv G a x = G\"", "lemma subst_dv_member:\n  assumes \"(u,\\<tau>) \\<in> setD \\<Delta>\"\n  shows  \"(u, \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v) \\<in> setD (\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v)\"", "lemma fresh_subst_dv:\n  fixes x::x\n  assumes \"atom xa \\<sharp> \\<Delta>\" and \"atom xa \\<sharp> v\"\n  shows \"atom xa \\<sharp>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\"", "lemma fresh_subst_dv_if:\n  fixes j::atom and i::x and  x::v and t::\\<Delta>\n  assumes \"j \\<sharp> t \\<and> j \\<sharp> x\" \n  shows  \"(j \\<sharp> subst_dv t i x)\"", "lemma size_subst_sv [simp]:  \"size (subst_sv A i x ) = size A\" and  \"size (subst_branchv B i x ) = size B\"  and  \"size (subst_branchlv C i x ) = size C\"", "lemma forget_subst_sv [simp]: shows  \"atom a \\<sharp> A \\<Longrightarrow> subst_sv A a x = A\" and \"atom a \\<sharp> B \\<Longrightarrow> subst_branchv B a x = B\" and \"atom a \\<sharp> C \\<Longrightarrow> subst_branchlv C a x  = C\"", "lemma subst_sv_id [simp]: \"subst_sv A a (V_var a) = A\" and \"subst_branchv B a (V_var a) = B\" and  \"subst_branchlv C a (V_var a)  = C\"", "lemma fresh_subst_sv_if_rl:\n  shows \n    \"(atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_sv s x v )\" and\n    \"(atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_branchv cs x v)\" and\n    \"(atom x \\<sharp> css \\<and> j \\<sharp> css) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_branchlv css x v )\"", "lemma fresh_subst_sv_if_lr:\n  shows  \"j \\<sharp> (subst_sv s x v) \\<Longrightarrow> (atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x))\" and\n    \"j \\<sharp> (subst_branchv cs x v) \\<Longrightarrow> (atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))\" and       \n    \"j \\<sharp> (subst_branchlv css x v ) \\<Longrightarrow> (atom x \\<sharp> css \\<and> j \\<sharp> css) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x))\"", "lemma fresh_subst_sv_if[simp]:\n  fixes x::x and v::v\n  shows \"j \\<sharp> (subst_sv s x v) \\<longleftrightarrow> (atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x))\" and\n    \"j \\<sharp> (subst_branchv cs x v) \\<longleftrightarrow> (atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))\"", "lemma subst_sv_commute [simp]:\n  fixes A::s and t::v and j::x and i::x\n  shows  \"atom j \\<sharp> A \\<Longrightarrow> (subst_sv (subst_sv A i t)  j u ) = subst_sv A i (subst_vv t j u )\" and\n    \"atom j \\<sharp> B \\<Longrightarrow> (subst_branchv  (subst_branchv B i t ) j u ) = subst_branchv B i (subst_vv t j u )\" and\n    \"atom j \\<sharp> C \\<Longrightarrow> (subst_branchlv  (subst_branchlv C i t) j u ) = subst_branchlv C i (subst_vv t j u   ) \"", "lemma c_eq_perm:\n  assumes \"( (atom z)  \\<rightleftharpoons> (atom z') )  \\<bullet> c = c'\" and \"atom z'  \\<sharp> c\"\n  shows \"\\<lbrace> z : b | c \\<rbrace> = \\<lbrace> z' : b | c' \\<rbrace>\"", "lemma subst_sv_flip:\n  fixes s::s and sa::s and v'::v\n  assumes \"atom c \\<sharp> (s, sa)\" and \"atom c \\<sharp> (v',x, xa, s, sa)\" \"atom x \\<sharp> v'\" and \"atom xa \\<sharp> v'\" and \"(x \\<leftrightarrow> c) \\<bullet> s = (xa \\<leftrightarrow> c) \\<bullet> sa\" \n  shows \"s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v\"", "lemma if_type_eq:\n  fixes \\<Gamma>::\\<Gamma> and v::v and z1::x\n  assumes \"atom z1' \\<sharp> (v, ca, (x, b, c) #\\<^sub>\\<Gamma> \\<Gamma>,  (CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v ))\" and \"atom z1 \\<sharp> v\" \n    and \"atom z1 \\<sharp> (za,ca)\" and \"atom z1' \\<sharp> (za,ca)\"\n  shows \"(\\<lbrace> z1' : ba  | CE_val v  ==  CE_val (V_lit ll)   IMP  ca[za::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>) = \\<lbrace> z1 : ba  | CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>\"", "lemma subst_sv_var_flip:\n  fixes x::x and s::s and z::x\n  shows \"atom x \\<sharp> s \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> s) = s[z::=[x]\\<^sup>v]\\<^sub>s\\<^sub>v\" and \n    \"atom x \\<sharp> cs \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> cs) = subst_branchv cs z [x]\\<^sup>v\" and\n    \"atom x \\<sharp> css \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> css) = subst_branchlv css z [x]\\<^sup>v\"", "lemma size_subst_ft[simp]:  \"size (subst_ft_v A x v) = size A\"", "lemma forget_subst_ft [simp]: shows  \"atom x \\<sharp> A \\<Longrightarrow> subst_ft_v A x a = A\"", "lemma subst_ft_id [simp]: \"subst_ft_v A a (V_var a)  = A\"", "lemma subst_dv_fst_eq:\n  \"fst ` setD (\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v) = fst ` setD \\<Delta>\"", "lemma subst_gv_member_iff:\n  fixes x'::x and x::x and v::v and c'::c\n  assumes \"(x',b',c') \\<in> toSet \\<Gamma>\" and \"atom x \\<notin> atom_dom \\<Gamma>\" \n  shows \"(x',b',c'[x::=v]\\<^sub>c\\<^sub>v) \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\"", "lemma fresh_subst_gv_if:\n  fixes j::atom and i::x and  x::v and t::\\<Gamma>\n  assumes \"j \\<sharp> t \\<and> j \\<sharp> x\" \n  shows  \"(j \\<sharp> subst_gv t i x)\"", "lemma set_GConsD: \"y \\<in> toSet (x #\\<^sub>\\<Gamma> xs) \\<Longrightarrow> y=x \\<or> y \\<in> toSet xs\"", "lemma  subst_g_assoc_cons:\n  assumes \"x \\<noteq> x'\"\n  shows \"(((x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @ G) = ((x', b', c'[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> ((\\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v) @ G))\""], "translations": [["", "lemma subst_v_flip_eq_one:\n  fixes z1::x and z2::x and x1::x and x2::x  \n  assumes \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\" \n    and \"atom x1 \\<sharp> (z1,z2,c1,c2)\"\n  shows \"(c1[z1::=[x1]\\<^sup>v]\\<^sub>v) = (c2[z2::=[x1]\\<^sup>v]\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "have \"(c1[z1::=[x1]\\<^sup>v]\\<^sub>v) = (x1 \\<leftrightarrow> z1) \\<bullet> c1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1", "using assms flip_subst_v"], ["proof (prove)\nusing this:\n  [[atom z1]]lst. c1 = [[atom z2]]lst. c2\n  atom x1 \\<sharp> (z1, z2, c1, c2)\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?c = ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1", "by auto"], ["proof (state)\nthis:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "have  \"(c2[z2::=[x1]\\<^sup>v]\\<^sub>v) = (x1 \\<leftrightarrow> z2) \\<bullet> c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2", "using assms flip_subst_v"], ["proof (prove)\nusing this:\n  [[atom z1]]lst. c1 = [[atom z2]]lst. c2\n  atom x1 \\<sharp> (z1, z2, c1, c2)\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?c = ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2", "by auto"], ["proof (state)\nthis:\n  c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "ultimately"], ["proof (chain)\npicking this:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1\n  c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2", "show ?thesis"], ["proof (prove)\nusing this:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1\n  c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "using Abs1_eq_iff_all(3)[of z1 c1 z2 c2 z1]  assms"], ["proof (prove)\nusing this:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z1) \\<bullet> c1\n  c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v = (x1 \\<leftrightarrow> z2) \\<bullet> c2\n  ([[atom z1]]lst. c1 = [[atom z2]]lst. c2) =\n  (\\<forall>c.\n      atom c \\<sharp> z1 \\<longrightarrow>\n      atom c \\<sharp> (z1, z2, c1, c2) \\<longrightarrow>\n      (z1 \\<leftrightarrow> c) \\<bullet> c1 =\n      (z2 \\<leftrightarrow> c) \\<bullet> c2)\n  [[atom z1]]lst. c1 = [[atom z2]]lst. c2\n  atom x1 \\<sharp> (z1, z2, c1, c2)\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v", "by (metis Abs1_eq_iff_fresh(3) flip_commute)"], ["proof (state)\nthis:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x1 ]\\<^sup>v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_v_flip_eq_two:\n  fixes z1::x and z2::x and x1::x and x2::x \n  assumes \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\" \n  shows \"(c1[z1::=b]\\<^sub>v) = (c2[z2::=b]\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "obtain x::x where *:\"atom x \\<sharp> (z1,z2,c1,c2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x.\n        atom x \\<sharp> (z1, z2, c1, c2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh"], ["proof (prove)\nusing this:\n  (\\<And>a. atom a \\<sharp> ?x \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>x.\n        atom x \\<sharp> (z1, z2, c1, c2) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  atom x \\<sharp> (z1, z2, c1, c2)\n\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "hence \"(c1[z1::=[x]\\<^sup>v]\\<^sub>v) = (c2[z2::=[x]\\<^sup>v]\\<^sub>v)\""], ["proof (prove)\nusing this:\n  atom x \\<sharp> (z1, z2, c1, c2)\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x ]\\<^sup>v]\\<^sub>v", "using subst_v_flip_eq_one[OF assms, of x]"], ["proof (prove)\nusing this:\n  atom x \\<sharp> (z1, z2, c1, c2)\n  atom x \\<sharp> (z1, z2, c1, c2) \\<Longrightarrow>\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x ]\\<^sup>v]\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "hence \"(c1[z1::=[x]\\<^sup>v]\\<^sub>v)[x::=b]\\<^sub>v = (c2[z2::=[x]\\<^sup>v]\\<^sub>v)[x::=b]\\<^sub>v\""], ["proof (prove)\nusing this:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v = c2[z2::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v =\n    c2[z2::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v =\n  c2[z2::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "thus ?thesis"], ["proof (prove)\nusing this:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v =\n  c2[z2::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "using subst_v_simple_commute * fresh_prod4"], ["proof (prove)\nusing this:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v =\n  c2[z2::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v[?x::=?b]\\<^sub>v = ?c[?z::=?b]\\<^sub>v\n  atom x \\<sharp> (z1, z2, c1, c2)\n  ?x \\<sharp> (?a, ?b, ?c, ?d) =\n  (?x \\<sharp> ?a \\<and>\n   ?x \\<sharp> ?b \\<and> ?x \\<sharp> ?c \\<and> ?x \\<sharp> ?d)\n\ngoal (1 subgoal):\n 1. c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  c1[z1::=b]\\<^sub>v = c2[z2::=b]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_v_flip_eq_three:\n  assumes \"[[atom z1]]lst. c1 = [[atom z1']]lst. c1'\"  and \"atom x \\<sharp> c1\" and \"atom x' \\<sharp> (x,z1,z1', c1, c1')\"\n  shows   \"(x \\<leftrightarrow> x') \\<bullet> (c1[z1::=[x]\\<^sup>v]\\<^sub>v) =  c1'[z1'::=[x']\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "have \"atom x' \\<sharp> c1[z1::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v", "using assms fresh_subst_v_if"], ["proof (prove)\nusing this:\n  [[atom z1]]lst. c1 = [[atom z1']]lst. c1'\n  atom x \\<sharp> c1\n  atom x' \\<sharp> (x, z1, z1', c1, c1')\n  ?y \\<sharp> ?a[?x::=?v]\\<^sub>v =\n  (atom ?x \\<sharp> ?a \\<and> ?y \\<sharp> ?a \\<or>\n   ?y \\<sharp> ?v \\<and> (?y \\<sharp> ?a \\<or> ?y = atom ?x))\n\ngoal (1 subgoal):\n 1. atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "hence \"(x \\<leftrightarrow> x') \\<bullet> (c1[z1::=[x]\\<^sup>v]\\<^sub>v) = c1[z1::=[x]\\<^sup>v]\\<^sub>v[x::=[x']\\<^sup>v]\\<^sub>v\""], ["proof (prove)\nusing this:\n  atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v", "using flip_subst_v[of x' \"c1[z1::=[x]\\<^sup>v]\\<^sub>v\" x] flip_commute"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v\n  atom x' \\<sharp> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v \\<Longrightarrow>\n  (x' \\<leftrightarrow> x) \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v\n  (?a \\<leftrightarrow> ?b) = (?b \\<leftrightarrow> ?a)\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "also"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "have \"... = c1[z1::=[x']\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v =\n    c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v", "using subst_v_simple_commute fresh_prod4 assms"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v[?x::=?b]\\<^sub>v = ?c[?z::=?b]\\<^sub>v\n  ?x \\<sharp> (?a, ?b, ?c, ?d) =\n  (?x \\<sharp> ?a \\<and>\n   ?x \\<sharp> ?b \\<and> ?x \\<sharp> ?c \\<and> ?x \\<sharp> ?d)\n  [[atom z1]]lst. c1 = [[atom z1']]lst. c1'\n  atom x \\<sharp> c1\n  atom x' \\<sharp> (x, z1, z1', c1, c1')\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v =\n    c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v =\n  c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "also"], ["proof (state)\nthis:\n  c1[z1::=[ x ]\\<^sup>v]\\<^sub>v[x::=[ x' ]\\<^sup>v]\\<^sub>v =\n  c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "have \"... = c1'[z1'::=[x']\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v = c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "using subst_v_flip_eq_one[of z1 c1 z1' c1' x']"], ["proof (prove)\nusing this:\n  \\<lbrakk>[[atom z1]]lst. c1 = [[atom z1']]lst. c1';\n   atom x' \\<sharp> (z1, z1', c1, c1')\\<rbrakk>\n  \\<Longrightarrow> c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v =\n                    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v = c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "using  assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>[[atom z1]]lst. c1 = [[atom z1']]lst. c1';\n   atom x' \\<sharp> (z1, z1', c1, c1')\\<rbrakk>\n  \\<Longrightarrow> c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v =\n                    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v\n  [[atom z1]]lst. c1 = [[atom z1']]lst. c1'\n  atom x \\<sharp> c1\n  atom x' \\<sharp> (x, z1, z1', c1, c1')\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v = c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c1[z1::=[ x' ]\\<^sup>v]\\<^sub>v = c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n    c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> x') \\<bullet> c1[z1::=[ x ]\\<^sup>v]\\<^sub>v =\n  c1'[z1'::=[ x' ]\\<^sup>v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "section \\<open>Values\\<close>"], ["", "nominal_function \n  subst_vv :: \"v \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> v\" where\n  \"subst_vv (V_lit l) x v = V_lit l\"\n| \"subst_vv (V_var y) x v = (if x = y then v else V_var y)\"\n| \"subst_vv (V_cons tyid c v') x v  = V_cons tyid c (subst_vv v' x v)\"\n| \"subst_vv (V_consp tyid c b v') x v  = V_consp tyid c b (subst_vv v' x v)\"\n| \"subst_vv (V_pair v1 v2) x v = V_pair (subst_vv v1 x v ) (subst_vv v2 x v )\""], ["proof (prove)\ngoal (18 subgoals):\n 1. eqvt subst_vv_graph_aux\n 2. \\<And>x y. subst_vv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>l xa v.\n                   x = ([ l ]\\<^sup>v, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v. x = ([ y ]\\<^sup>v, xa, v) \\<Longrightarrow> P;\n        \\<And>tyid c v' xa v.\n           x = (V_cons tyid c v', xa, v) \\<Longrightarrow> P;\n        \\<And>tyid c b v' xa v.\n           x = (V_consp tyid c b v', xa, v) \\<Longrightarrow> P;\n        \\<And>v1 v2 xa v.\n           x = ([ v1 , v2 ]\\<^sup>v, xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>l x v la xa va.\n       ([ l ]\\<^sup>v, x, v) = ([ la ]\\<^sup>v, xa, va) \\<Longrightarrow>\n       [ l ]\\<^sup>v = [ la ]\\<^sup>v\n 5. \\<And>l x v y xa va.\n       ([ l ]\\<^sup>v, x, v) = ([ y ]\\<^sup>v, xa, va) \\<Longrightarrow>\n       [ l ]\\<^sup>v = (if xa = y then va else [ y ]\\<^sup>v)\n 6. \\<And>l x v tyid c v' xa va.\n       \\<lbrakk>eqvt_at subst_vv_sumC (v', xa, va); True;\n        ([ l ]\\<^sup>v, x, v) = (V_cons tyid c v', xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ l ]\\<^sup>v =\n                         V_cons tyid c (subst_vv_sumC (v', xa, va))\n 7. \\<And>l x v tyid c b v' xa va.\n       \\<lbrakk>eqvt_at subst_vv_sumC (v', xa, va); True;\n        ([ l ]\\<^sup>v, x, v) = (V_consp tyid c b v', xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ l ]\\<^sup>v =\n                         V_consp tyid c b (subst_vv_sumC (v', xa, va))\n 8. \\<And>l x v v1 v2 xa va.\n       \\<lbrakk>eqvt_at subst_vv_sumC (v1, xa, va);\n        eqvt_at subst_vv_sumC (v2, xa, va); True; True;\n        ([ l ]\\<^sup>v, x, v) = ([ v1 , v2 ]\\<^sup>v, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ l ]\\<^sup>v =\n                         [ subst_vv_sumC\n                            (v1, xa,\n                             va) , subst_vv_sumC (v2, xa, va) ]\\<^sup>v\n 9. \\<And>y x v ya xa va.\n       ([ y ]\\<^sup>v, x, v) = ([ ya ]\\<^sup>v, xa, va) \\<Longrightarrow>\n       (if x = y then v else [ y ]\\<^sup>v) =\n       (if xa = ya then va else [ ya ]\\<^sup>v)\n 10. \\<And>y x v tyid c v' xa va.\n        \\<lbrakk>eqvt_at subst_vv_sumC (v', xa, va); True;\n         ([ y ]\\<^sup>v, x, v) = (V_cons tyid c v', xa, va)\\<rbrakk>\n        \\<Longrightarrow> (if x = y then v else [ y ]\\<^sup>v) =\n                          V_cons tyid c (subst_vv_sumC (v', xa, va))\nA total of 18 subgoals...", "by(auto simp: eqvt_def subst_vv_graph_aux_def, metis v.strong_exhaust)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_vv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_vv_abbrev :: \"v \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> v\" (\"_[_::=_]\\<^sub>v\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"v[x::=v']\\<^sub>v\\<^sub>v  \\<equiv> subst_vv v x v'\""], ["", "lemma fresh_subst_vv_if [simp]:\n  \"j \\<sharp> t[i::=x]\\<^sub>v\\<^sub>v  = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using supp_l_empty"], ["proof (prove)\nusing this:\n  supp [ ?l ]\\<^sup>v = {}\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "apply (induct t rule: v.induct,auto simp add: subst_vv.simps fresh_def, auto)"], ["proof (prove)\ngoal (21 subgoals):\n 1. \\<lbrakk>\\<And>l. supp l = {}; j \\<notin> supp x; j \\<in> supp i;\n     j \\<noteq> atom i; atom i \\<in> supp i\\<rbrakk>\n    \\<Longrightarrow> False\n 2. \\<lbrakk>\\<And>l. supp l = {}; j \\<notin> supp x; j \\<noteq> atom i;\n     j \\<in> supp i\\<rbrakk>\n    \\<Longrightarrow> False\n 3. \\<lbrakk>\\<And>l. supp l = {}; j \\<in> supp x; atom i \\<notin> supp i;\n     j \\<notin> supp i\\<rbrakk>\n    \\<Longrightarrow> False\n 4. \\<And>xa.\n       \\<lbrakk>\\<And>l. supp l = {}; i \\<noteq> xa; j \\<notin> supp xa;\n        j \\<in> supp x; atom i \\<in> supp xa\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>xa.\n       \\<lbrakk>\\<And>l. supp l = {}; i \\<noteq> xa; atom i \\<in> supp xa;\n        atom i \\<notin> supp x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> False\n 6. \\<And>x1a x2a x3.\n       \\<lbrakk>\\<And>l. supp l = {};\n        j \\<notin> supp x3[i::=x]\\<^sub>v\\<^sub>v; j \\<notin> supp x1a;\n        j \\<notin> supp x2a; atom i \\<notin> supp x3; j \\<notin> supp x3;\n        j \\<in> supp x; atom i \\<in> supp x1a\\<rbrakk>\n       \\<Longrightarrow> False\n 7. \\<And>x1a x2a x3.\n       \\<lbrakk>\\<And>l. supp l = {};\n        j \\<notin> supp x3[i::=x]\\<^sub>v\\<^sub>v; j \\<notin> supp x1a;\n        j \\<notin> supp x2a; atom i \\<notin> supp x3; j \\<notin> supp x3;\n        j \\<in> supp x; atom i \\<in> supp x2a\\<rbrakk>\n       \\<Longrightarrow> False\n 8. \\<And>x1a x3.\n       \\<lbrakk>\\<And>l. supp l = {};\n        atom i \\<notin> supp x3[i::=x]\\<^sub>v\\<^sub>v;\n        atom i \\<notin> supp x3; atom i \\<notin> supp x; j = atom i;\n        atom i \\<in> supp x1a\\<rbrakk>\n       \\<Longrightarrow> False\n 9. \\<And>x2a x3.\n       \\<lbrakk>\\<And>l. supp l = {};\n        atom i \\<notin> supp x3[i::=x]\\<^sub>v\\<^sub>v;\n        atom i \\<notin> supp x3; atom i \\<notin> supp x; j = atom i;\n        atom i \\<in> supp x2a\\<rbrakk>\n       \\<Longrightarrow> False\n 10. \\<And>x1a x3.\n        \\<lbrakk>\\<And>l. supp l = {};\n         atom i \\<notin> supp x3[i::=x]\\<^sub>v\\<^sub>v;\n         atom i \\<notin> supp x3; atom i \\<notin> supp x; j = atom i;\n         atom i \\<in> supp x1a\\<rbrakk>\n        \\<Longrightarrow> False\nA total of 21 subgoals...", "by (simp add: supp_at_base |metis b.supp supp_b_empty  )+"], ["", "lemma forget_subst_vv [simp]: \"atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v\\<^sub>v = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v\\<^sub>v = tm", "by (induct tm rule: v.induct) (simp_all add: fresh_at_base)"], ["", "lemma subst_vv_id [simp]: \"tm[a::=V_var a]\\<^sub>v\\<^sub>v  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v\\<^sub>v = tm", "by (induct tm rule: v.induct) simp_all"], ["", "lemma subst_vv_commute [simp]:\n  \"atom j \\<sharp> tm \\<Longrightarrow> tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v = tm[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>v\\<^sub>v \""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom j \\<sharp> tm \\<Longrightarrow>\n    tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v =\n    tm[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>v\\<^sub>v", "by (induct tm rule: v.induct) (auto simp: fresh_Pair)"], ["", "lemma subst_vv_commute_full [simp]:\n  \"atom j \\<sharp> t \\<Longrightarrow> atom i \\<sharp> u \\<Longrightarrow> i \\<noteq> j \\<Longrightarrow> tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v = tm[j::=u]\\<^sub>v\\<^sub>v[i::=t]\\<^sub>v\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>atom j \\<sharp> t; atom i \\<sharp> u; i \\<noteq> j\\<rbrakk>\n    \\<Longrightarrow> tm[i::=t]\\<^sub>v\\<^sub>v[j::=u]\\<^sub>v\\<^sub>v =\n                      tm[j::=u]\\<^sub>v\\<^sub>v[i::=t]\\<^sub>v\\<^sub>v", "by (induct tm rule: v.induct) auto"], ["", "lemma subst_vv_var_flip[simp]:\n  fixes v::v\n  assumes \"atom y \\<sharp> v\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> v = v [x::=V_var y]\\<^sub>v\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> v =\n    v[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom y \\<sharp> v\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> v =\n    v[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v", "apply(induct v rule:v.induct)"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>v \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>v =\n       [ xa ]\\<^sup>v[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 2. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>v \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>v =\n       [ xa ]\\<^sup>v[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 3. \\<And>x1a x2a.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x2a \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2a =\n        x2a[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> [ x1a , x2a ]\\<^sup>v\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a , x2a ]\\<^sup>v =\n                         [ x1a , x2a ]\\<^sup>v[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 4. \\<And>x1a x2a x3.\n       \\<lbrakk>atom y \\<sharp> x3 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> V_cons x1a x2a x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> V_cons x1a x2a\n                      x3 =\n                         (V_cons x1a x2a\n                           x3)[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 5. \\<And>x1a x2a x3 x4.\n       \\<lbrakk>atom y \\<sharp> x4 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> V_consp x1a x2a x3 x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> V_consp x1a x2a\n                      x3 x4 =\n                         (V_consp x1a x2a x3\n                           x4)[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v", "apply auto"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> xa \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> xa = xa\n 2. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 3. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a\n 4. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 5. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a", "using  l.fresh l.perm_simps l.strong_exhaust supp_l_empty permute_pure permute_list.simps fresh_def flip_fresh_fresh"], ["proof (prove)\nusing this:\n  ?a \\<sharp> L_num ?int = ?a \\<sharp> ?int\n  ?a \\<sharp> L_true\n  ?a \\<sharp> L_false\n  ?a \\<sharp> L_unit\n  ?a \\<sharp> L_bitvec ?list = ?a \\<sharp> ?list\n  ?p \\<bullet> L_num ?int = L_num (?p \\<bullet> ?int)\n  ?p \\<bullet> L_true = L_true\n  ?p \\<bullet> L_false = L_false\n  ?p \\<bullet> L_unit = L_unit\n  ?p \\<bullet> L_bitvec ?list = L_bitvec (?p \\<bullet> ?list)\n  \\<lbrakk>\\<And>x1. ?y = L_num x1 \\<Longrightarrow> ?P;\n   ?y = L_true \\<Longrightarrow> ?P; ?y = L_false \\<Longrightarrow> ?P;\n   ?y = L_unit \\<Longrightarrow> ?P;\n   \\<And>x5. ?y = L_bitvec x5 \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  supp [ ?l ]\\<^sup>v = {}\n  ?p \\<bullet> ?x = ?x\n  ?p \\<bullet> [] = []\n  ?p \\<bullet> (?x # ?xs) = ?p \\<bullet> ?x # ?p \\<bullet> ?xs\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (5 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> xa \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> xa = xa\n 2. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 3. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a\n 4. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 5. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a", "apply fastforce"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 2. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a\n 3. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 4. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a", "using permute_pure"], ["proof (prove)\nusing this:\n  ?p \\<bullet> ?x = ?x\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 2. \\<And>x1a x2a x3.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x3 =\n                x3[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a\n 3. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x1a = x1a\n 4. \\<And>x1a x2a x4.\n       \\<lbrakk>(y \\<leftrightarrow> x) \\<bullet> x4 =\n                x4[x::=[ y ]\\<^sup>v]\\<^sub>v\\<^sub>v;\n        atom y \\<sharp> x1a; atom y \\<sharp> x2a;\n        atom y \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> x2a = x2a", "apply blast+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "instantiation v :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_vv\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(v, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::v"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using fresh_subst_vv_if[of j t i x] subst_v_v_def"], ["proof (prove)\nusing this:\n  j \\<sharp> t[i::=x]\\<^sub>v\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "by metis"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::v and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "using forget_subst_vv subst_v_v_def"], ["proof (prove)\nusing this:\n  atom ?a \\<sharp> ?tm \\<Longrightarrow> ?tm[?a::=?x]\\<^sub>v\\<^sub>v = ?tm\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::v"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "using subst_vv_id  subst_v_v_def"], ["proof (prove)\nusing this:\n  ?tm[?a::=[ ?a ]\\<^sup>v]\\<^sub>v\\<^sub>v = ?tm\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::v"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using   subst_v_v_def"], ["proof (prove)\nusing this:\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::v and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "using  subst_v_v_def"], ["proof (prove)\nusing this:\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::v and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "using  subst_v_v_def"], ["proof (prove)\nusing this:\n  subst_v = subst_vv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "section \\<open>Expressions\\<close>"], ["", "nominal_function subst_ev :: \"e \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> e\" where\n  \"subst_ev  ( (AE_val v') ) x v = ( (AE_val (subst_vv v' x v)) )\"\n| \"subst_ev  ( (AE_app f v') ) x v  = ( (AE_app f (subst_vv v' x v )) )\"                \n| \"subst_ev  ( (AE_appP f b v') ) x v = ( (AE_appP f b (subst_vv v' x v )) )\"   \n| \"subst_ev  ( (AE_op opp v1 v2) ) x v  = ( (AE_op opp (subst_vv v1 x v ) (subst_vv v2 x v )) )\"\n| \"subst_ev  [#1 v']\\<^sup>e x v = [#1 (subst_vv v' x v )]\\<^sup>e\"\n| \"subst_ev  [#2 v']\\<^sup>e x v = [#2 (subst_vv v' x v )]\\<^sup>e\"\n| \"subst_ev  ( (AE_mvar u)) x v = AE_mvar u\"\n| \"subst_ev  [| v' |]\\<^sup>e x v = [| (subst_vv  v' x v ) |]\\<^sup>e\"\n| \"subst_ev  ( AE_concat v1 v2) x v = AE_concat (subst_vv v1 x v ) (subst_vv v2 x v )\"\n| \"subst_ev  ( AE_split v1 v2) x v = AE_split (subst_vv v1 x v ) (subst_vv v2 x v )\""], ["proof (prove)\ngoal (58 subgoals):\n 1. eqvt subst_ev_graph_aux\n 2. \\<And>x y. subst_ev_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = ([ v' ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>f v' xa v.\n           x = ([ f  v'  ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>f b v' xa v.\n           x = ([f [ b ]  v' ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>opp v1 v2 xa v.\n           x = ([ opp v1 v2 ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v. x = ([#1v' ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v. x = ([#2v' ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v. x = ([ u ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v. x = ([| v' |]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v1 v2 xa v.\n           x = ([ v1 @@ v2 ]\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v1 v2 xa v.\n           x = ([ v1  v2 ]\\<^sup>e, xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>v' x v v'a xa va.\n       ([ v' ]\\<^sup>e, x, v) = ([ v'a ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [ v'a[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>e\n 5. \\<And>v' x v f v'a xa va.\n       ([ v' ]\\<^sup>e, x, v) =\n       ([ f  v'a  ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [ f  v'a[xa::=va]\\<^sub>v\\<^sub>v  ]\\<^sup>e\n 6. \\<And>v' x v f b v'a xa va.\n       ([ v' ]\\<^sup>e, x, v) =\n       ([f [ b ]  v'a ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [f [ b ]  v'a[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>e\n 7. \\<And>v' x v opp v1 v2 xa va.\n       ([ v' ]\\<^sup>e, x, v) =\n       ([ opp v1 v2 ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [ opp v1[xa::=va]\\<^sub>v\\<^sub>v v2[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>e\n 8. \\<And>v' x v v'a xa va.\n       ([ v' ]\\<^sup>e, x, v) = ([#1v'a ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [#1v'a[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>e\n 9. \\<And>v' x v v'a xa va.\n       ([ v' ]\\<^sup>e, x, v) = ([#2v'a ]\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       [#2v'a[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>e\n 10. \\<And>v' x v u xa va.\n        ([ v' ]\\<^sup>e, x, v) = ([ u ]\\<^sup>e, xa, va) \\<Longrightarrow>\n        [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>e = [ u ]\\<^sup>e\nA total of 58 subgoals...", "by(simp add: eqvt_def subst_ev_graph_aux_def,auto)(meson e.strong_exhaust)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_ev_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_ev_abbrev :: \"e \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> e\" (\"_[_::=_]\\<^sub>e\\<^sub>v\" [1000,50,50] 500)\n  where \n    \"e[x::=v']\\<^sub>e\\<^sub>v  \\<equiv> subst_ev e x v' \""], ["", "lemma size_subst_ev [simp]: \"size ( subst_ev A i x) = size A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (A[i::=x]\\<^sub>e\\<^sub>v) = size A", "apply (nominal_induct A avoiding: i x rule: e.strong_induct)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>x i xa.\n       size ([ x ]\\<^sup>e[i::=xa]\\<^sub>e\\<^sub>v) = size [ x ]\\<^sup>e\n 2. \\<And>x1a x2 i x.\n       size ([ x1a  x2  ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v) =\n       size [ x1a  x2  ]\\<^sup>e\n 3. \\<And>x1a x2 x3 i x.\n       size ([x1a [ x2 ]  x3 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v) =\n       size [x1a [ x2 ]  x3 ]\\<^sup>e\n 4. \\<And>x1a x2 x3 i x.\n       size ([ x1a x2 x3 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v) =\n       size [ x1a x2 x3 ]\\<^sup>e\n 5. \\<And>x1a x2 i x.\n       size ([ x1a @@ x2 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v) =\n       size [ x1a @@ x2 ]\\<^sup>e\n 6. \\<And>x i xa.\n       size ([#1x ]\\<^sup>e[i::=xa]\\<^sub>e\\<^sub>v) = size [#1x ]\\<^sup>e\n 7. \\<And>x i xa.\n       size ([#2x ]\\<^sup>e[i::=xa]\\<^sub>e\\<^sub>v) = size [#2x ]\\<^sup>e\n 8. \\<And>x i xa.\n       size ([ x ]\\<^sup>e[i::=xa]\\<^sub>e\\<^sub>v) = size [ x ]\\<^sup>e\n 9. \\<And>x i xa.\n       size ([| x |]\\<^sup>e[i::=xa]\\<^sub>e\\<^sub>v) = size [| x |]\\<^sup>e\n 10. \\<And>x1a x2 i x.\n        size ([ x1a  x2 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v) =\n        size [ x1a  x2 ]\\<^sup>e", "by auto"], ["", "lemma forget_subst_ev [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_ev A a x  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> A \\<Longrightarrow> A[a::=x]\\<^sub>e\\<^sub>v = A", "apply (nominal_induct A avoiding: a x rule: e.strong_induct)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>x a xa.\n       atom a \\<sharp> [ x ]\\<^sup>e \\<Longrightarrow>\n       [ x ]\\<^sup>e[a::=xa]\\<^sub>e\\<^sub>v = [ x ]\\<^sup>e\n 2. \\<And>x1a x2 a x.\n       atom a \\<sharp> [ x1a  x2  ]\\<^sup>e \\<Longrightarrow>\n       [ x1a  x2  ]\\<^sup>e[a::=x]\\<^sub>e\\<^sub>v = [ x1a  x2  ]\\<^sup>e\n 3. \\<And>x1a x2 x3 a x.\n       atom a \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<Longrightarrow>\n       [x1a [ x2 ]  x3 ]\\<^sup>e[a::=x]\\<^sub>e\\<^sub>v =\n       [x1a [ x2 ]  x3 ]\\<^sup>e\n 4. \\<And>x1a x2 x3 a x.\n       atom a \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<Longrightarrow>\n       [ x1a x2 x3 ]\\<^sup>e[a::=x]\\<^sub>e\\<^sub>v = [ x1a x2 x3 ]\\<^sup>e\n 5. \\<And>x1a x2 a x.\n       atom a \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       [ x1a @@ x2 ]\\<^sup>e[a::=x]\\<^sub>e\\<^sub>v = [ x1a @@ x2 ]\\<^sup>e\n 6. \\<And>x a xa.\n       atom a \\<sharp> [#1x ]\\<^sup>e \\<Longrightarrow>\n       [#1x ]\\<^sup>e[a::=xa]\\<^sub>e\\<^sub>v = [#1x ]\\<^sup>e\n 7. \\<And>x a xa.\n       atom a \\<sharp> [#2x ]\\<^sup>e \\<Longrightarrow>\n       [#2x ]\\<^sup>e[a::=xa]\\<^sub>e\\<^sub>v = [#2x ]\\<^sup>e\n 8. \\<And>x a xa.\n       atom a \\<sharp> [ x ]\\<^sup>e \\<Longrightarrow>\n       [ x ]\\<^sup>e[a::=xa]\\<^sub>e\\<^sub>v = [ x ]\\<^sup>e\n 9. \\<And>x a xa.\n       atom a \\<sharp> [| x |]\\<^sup>e \\<Longrightarrow>\n       [| x |]\\<^sup>e[a::=xa]\\<^sub>e\\<^sub>v = [| x |]\\<^sup>e\n 10. \\<And>x1a x2 a x.\n        atom a \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n        [ x1a  x2 ]\\<^sup>e[a::=x]\\<^sub>e\\<^sub>v = [ x1a  x2 ]\\<^sup>e", "by (auto simp: fresh_at_base)"], ["", "lemma subst_ev_id [simp]: \"subst_ev A a (V_var a)  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A[a::=[ a ]\\<^sup>v]\\<^sub>e\\<^sub>v = A", "by (nominal_induct A avoiding: a rule: e.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma fresh_subst_ev_if [simp]:\n  \"j \\<sharp> (subst_ev A i x ) = ((atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> A[i::=x]\\<^sub>e\\<^sub>v =\n    (atom i \\<sharp> A \\<and> j \\<sharp> A \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))", "apply (induct A rule: e.induct)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>xa.\n       j \\<sharp> [ xa ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ xa ]\\<^sup>e \\<and>\n        j \\<sharp> [ xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [ xa ]\\<^sup>e \\<or> j = atom i))\n 2. \\<And>x1a x2.\n       j \\<sharp> [ x1a  x2  ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x1a  x2  ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a  x2  ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a  x2  ]\\<^sup>e \\<or> j = atom i))\n 3. \\<And>x1a x2 x3.\n       j \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<and>\n        j \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<or> j = atom i))\n 4. \\<And>x1a x2 x3.\n       j \\<sharp> [ x1a x2 x3 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<or> j = atom i))\n 5. \\<And>x1a x2.\n       j \\<sharp> [ x1a @@ x2 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<or> j = atom i))\n 6. \\<And>xa.\n       j \\<sharp> [#1xa ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#1xa ]\\<^sup>e \\<and>\n        j \\<sharp> [#1xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [#1xa ]\\<^sup>e \\<or> j = atom i))\n 7. \\<And>xa.\n       j \\<sharp> [#2xa ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#2xa ]\\<^sup>e \\<and>\n        j \\<sharp> [#2xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [#2xa ]\\<^sup>e \\<or> j = atom i))\n 8. \\<And>xa.\n       j \\<sharp> [ xa ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ xa ]\\<^sup>e \\<and>\n        j \\<sharp> [ xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [ xa ]\\<^sup>e \\<or> j = atom i))\n 9. \\<And>xa.\n       j \\<sharp> [| xa |]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [| xa |]\\<^sup>e \\<and>\n        j \\<sharp> [| xa |]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [| xa |]\\<^sup>e \\<or> j = atom i))\n 10. \\<And>x1a x2.\n        j \\<sharp> [ x1a  x2 ]\\<^sup>e[i::=x]\\<^sub>e\\<^sub>v =\n        (atom i \\<sharp> [ x1a  x2 ]\\<^sup>e \\<and> j \\<sharp> [ x1a \n         x2 ]\\<^sup>e \\<or>\n         j \\<sharp> x \\<and>\n         (j \\<sharp> [ x1a  x2 ]\\<^sup>e \\<or> j = atom i))", "unfolding subst_ev.simps fresh_subst_vv_if"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>xa.\n       j \\<sharp> [ xa[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [ xa ]\\<^sup>e \\<and>\n        j \\<sharp> [ xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [ xa ]\\<^sup>e \\<or> j = atom i))\n 2. \\<And>x1a x2.\n       j \\<sharp> [ x1a  x2[i::=x]\\<^sub>v\\<^sub>v  ]\\<^sup>e =\n       (atom i \\<sharp> [ x1a  x2  ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a  x2  ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a  x2  ]\\<^sup>e \\<or> j = atom i))\n 3. \\<And>x1a x2 x3.\n       j \\<sharp> [x1a [ x2 ]  x3[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<and>\n        j \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<or> j = atom i))\n 4. \\<And>x1a x2 x3.\n       j \\<sharp> [ x1a x2[i::=x]\\<^sub>v\\<^sub>v x3[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<or> j = atom i))\n 5. \\<And>x1a x2.\n       j \\<sharp> [ x1a[i::=x]\\<^sub>v\\<^sub>v @@ x2[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<and>\n        j \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and>\n        (j \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<or> j = atom i))\n 6. \\<And>xa.\n       j \\<sharp> [#1xa[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [#1xa ]\\<^sup>e \\<and>\n        j \\<sharp> [#1xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [#1xa ]\\<^sup>e \\<or> j = atom i))\n 7. \\<And>xa.\n       j \\<sharp> [#2xa[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n       (atom i \\<sharp> [#2xa ]\\<^sup>e \\<and>\n        j \\<sharp> [#2xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [#2xa ]\\<^sup>e \\<or> j = atom i))\n 8. \\<And>xa.\n       j \\<sharp> [ xa ]\\<^sup>e =\n       (atom i \\<sharp> [ xa ]\\<^sup>e \\<and>\n        j \\<sharp> [ xa ]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [ xa ]\\<^sup>e \\<or> j = atom i))\n 9. \\<And>xa.\n       j \\<sharp> [| xa[i::=x]\\<^sub>v\\<^sub>v |]\\<^sup>e =\n       (atom i \\<sharp> [| xa |]\\<^sup>e \\<and>\n        j \\<sharp> [| xa |]\\<^sup>e \\<or>\n        j \\<sharp> x \\<and> (j \\<sharp> [| xa |]\\<^sup>e \\<or> j = atom i))\n 10. \\<And>x1a x2.\n        j \\<sharp> [ x1a[i::=x]\\<^sub>v\\<^sub>v \n        x2[i::=x]\\<^sub>v\\<^sub>v ]\\<^sup>e =\n        (atom i \\<sharp> [ x1a  x2 ]\\<^sup>e \\<and> j \\<sharp> [ x1a \n         x2 ]\\<^sup>e \\<or>\n         j \\<sharp> x \\<and>\n         (j \\<sharp> [ x1a  x2 ]\\<^sup>e \\<or> j = atom i))", "apply auto+"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>j \\<sharp> x1a; atom i \\<sharp> x2; j \\<sharp> x2;\n        \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 2. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>j \\<sharp> x1a; j \\<sharp> x2; atom i \\<sharp> x3;\n        j \\<sharp> x3; \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 4. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 5. \\<And>x1a x2 x3.\n       \\<lbrakk>j \\<sharp> x1a; atom i \\<sharp> x2; j \\<sharp> x2;\n        atom i \\<sharp> x3; j \\<sharp> x3; \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 6. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a", "using pure_fresh fresh_opp_all"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x\n  ?z \\<sharp> ?opp\n\ngoal (6 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>j \\<sharp> x1a; atom i \\<sharp> x2; j \\<sharp> x2;\n        \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 2. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>j \\<sharp> x1a; j \\<sharp> x2; atom i \\<sharp> x3;\n        j \\<sharp> x3; \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 4. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 5. \\<And>x1a x2 x3.\n       \\<lbrakk>j \\<sharp> x1a; atom i \\<sharp> x2; j \\<sharp> x2;\n        atom i \\<sharp> x3; j \\<sharp> x3; \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a\n 6. \\<And>x1a.\n       \\<lbrakk>atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x1a", "apply metis+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma subst_ev_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (A[i::=t]\\<^sub>e\\<^sub>v)[j::=u]\\<^sub>e\\<^sub>v = A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom j \\<sharp> A \\<Longrightarrow>\n    (A[i::=t]\\<^sub>e\\<^sub>v)[j::=u]\\<^sub>e\\<^sub>v =\n    A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v", "by (nominal_induct A avoiding: i j t u rule: e.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma subst_ev_var_flip[simp]:\n  fixes e::e and y::x and x::x\n  assumes \"atom y \\<sharp> e\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> e = e [x::=V_var y]\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> e =\n    e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom y \\<sharp> e\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> e =\n    e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "apply(nominal_induct e rule:e.strong_induct)"], ["proof (prove)\ngoal (10 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2  ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2  ]\\<^sup>e =\n       [ x1a  x2  ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2 x3.\n       atom y \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [x1a [ x2 ]  x3 ]\\<^sup>e =\n       [x1a [ x2 ]  x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>x1a x2 x3.\n       atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>e =\n       [ x1a x2 x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 7. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 8. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 9. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 10. \\<And>x1a x2.\n        atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n        x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "apply (simp add: subst_v_v_def)"], ["proof (prove)\ngoal (9 subgoals):\n 1. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2  ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2  ]\\<^sup>e =\n       [ x1a  x2  ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2 x3.\n       atom y \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [x1a [ x2 ]  x3 ]\\<^sup>e =\n       [x1a [ x2 ]  x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2 x3.\n       atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>e =\n       [ x1a x2 x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 7. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 8. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 9. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n       x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "apply (metis (mono_tags, lifting) b.eq_iff b.perm_simps e.fresh e.perm_simps flip_b_id subst_ev.simps subst_vv_var_flip)"], ["proof (prove)\ngoal (8 subgoals):\n 1. \\<And>x1a x2 x3.\n       atom y \\<sharp> [x1a [ x2 ]  x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [x1a [ x2 ]  x3 ]\\<^sup>e =\n       [x1a [ x2 ]  x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2 x3.\n       atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>e =\n       [ x1a x2 x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 7. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 8. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n       x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "apply (metis (mono_tags, lifting) b.eq_iff b.perm_simps e.fresh e.perm_simps flip_b_id subst_ev.simps subst_vv_var_flip)"], ["proof (prove)\ngoal (7 subgoals):\n 1. \\<And>x1a x2 x3.\n       atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>e =\n       [ x1a x2 x3 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 7. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n       x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "subgoal for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e \\<Longrightarrow>\n    (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n    [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "apply (rule_tac y=x in  opp.strong_exhaust)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = plus\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = leq\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = eq\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "using  subst_vv_var_flip flip_def"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?v \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?v =\n  ?v[?x::=[ ?y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n  (?a \\<leftrightarrow> ?b) = (atom ?a \\<rightleftharpoons> atom ?b)\n\ngoal (3 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = plus\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = leq\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<lbrakk>atom y \\<sharp> [ x x2_ x3_ ]\\<^sup>e; x = eq\\<rbrakk>\n    \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x x2_ x3_ ]\\<^sup>e =\n                      [ x x2_ x3_ ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "by (simp add: flip_def permute_pure)+"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n       x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "using  subst_vv_var_flip flip_def"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?v \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?v =\n  ?v[?x::=[ ?y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n  (?a \\<leftrightarrow> ?b) = (atom ?a \\<rightleftharpoons> atom ?b)\n\ngoal (6 subgoals):\n 1. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>e =\n       [ x1a @@ x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 2. \\<And>xa.\n       atom y \\<sharp> [#1xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#1xa ]\\<^sup>e =\n       [#1xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       atom y \\<sharp> [#2xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [#2xa ]\\<^sup>e =\n       [#2xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>e =\n       [ xa ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       atom y \\<sharp> [| xa |]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>e =\n       [| xa |]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 6. \\<And>x1a x2.\n       atom y \\<sharp> [ x1a  x2 ]\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ x1a  x2 ]\\<^sup>e = [ x1a \n       x2 ]\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>e\\<^sub>v", "by (simp add: flip_def permute_pure)+"], ["", "lemma subst_ev_flip:\n  fixes e::e and ea::e and c::x\n  assumes \"atom c \\<sharp> (e, ea)\" and \"atom c \\<sharp> (x, xa, e, ea)\" and \"(x \\<leftrightarrow> c) \\<bullet> e = (xa \\<leftrightarrow> c) \\<bullet> ea\" \n  shows \"e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "have \"e[x::=v']\\<^sub>e\\<^sub>v = (e[x::=V_var c]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v =\n    (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v", "using subst_ev_commute assms"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  (?A[?i::=?t]\\<^sub>e\\<^sub>v)[?j::=?u]\\<^sub>e\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v =\n    (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>e\\<^sub>v =\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>e\\<^sub>v =\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "have \"...  = ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v", "using subst_ev_var_flip assms"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?e \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?e =\n  ?e[?x::=[ ?y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "have \"... = ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v", "using assms flip_commute"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n  (?a \\<leftrightarrow> ?b) = (?b \\<leftrightarrow> ?a)\n\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "have \"... = ea[xa::=v']\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v =\n    ea[xa::=v']\\<^sub>e\\<^sub>v", "using subst_ev_var_flip assms"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?e \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?e =\n  ?e[?x::=[ ?y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v =\n    ea[xa::=v']\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>e\\<^sub>v =\n  ea[xa::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>e\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_ev_var[simp]:\n  \"(AE_val (V_var x))[x::=[z]\\<^sup>v]\\<^sub>e\\<^sub>v = AE_val (V_var z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [ [ x ]\\<^sup>v ]\\<^sup>e[x::=[ z ]\\<^sup>v]\\<^sub>e\\<^sub>v =\n    [ [ z ]\\<^sup>v ]\\<^sup>e", "by auto"], ["", "instantiation e :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_ev\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(e, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::e"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using fresh_subst_ev_if[of j t i x] subst_v_e_def"], ["proof (prove)\nusing this:\n  j \\<sharp> t[i::=x]\\<^sub>e\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "by metis"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::e and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "using forget_subst_ev subst_v_e_def"], ["proof (prove)\nusing this:\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>e\\<^sub>v = ?A\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::e"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "using subst_ev_id  subst_v_e_def"], ["proof (prove)\nusing this:\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>e\\<^sub>v = ?A\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::e"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using subst_ev_commute  subst_v_e_def"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  (?A[?i::=?t]\\<^sub>e\\<^sub>v)[?j::=?u]\\<^sub>e\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::e and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "using  subst_v_e_def"], ["proof (prove)\nusing this:\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::e and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "using  subst_v_e_def"], ["proof (prove)\nusing this:\n  subst_v = subst_ev_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma subst_ev_commute_full:\n  fixes e::e and w::v and v::v\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x \\<noteq> z\"\n  shows \"subst_ev  (e[z::=w]\\<^sub>e\\<^sub>v) x v = subst_ev  (e[x::=v]\\<^sub>e\\<^sub>v) z w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (e[z::=w]\\<^sub>e\\<^sub>v)[x::=v]\\<^sub>e\\<^sub>v =\n    (e[x::=v]\\<^sub>e\\<^sub>v)[z::=w]\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. (e[z::=w]\\<^sub>e\\<^sub>v)[x::=v]\\<^sub>e\\<^sub>v =\n    (e[x::=v]\\<^sub>e\\<^sub>v)[z::=w]\\<^sub>e\\<^sub>v", "by(nominal_induct e rule: e.strong_induct,simp+)"], ["", "lemma subst_ev_v_flip1[simp]:\n  fixes e::e\n  assumes \"atom z1 \\<sharp> (z,e)\" and \"atom z1' \\<sharp> (z,e)\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>e\\<^sub>v =  e[z::= ((z1 \\<leftrightarrow> z1') \\<bullet> v)]\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>e\\<^sub>v =\n    e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> (z, e)\n  atom z1' \\<sharp> (z, e)\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>e\\<^sub>v =\n    e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v", "proof(nominal_induct e rule:e.strong_induct)"], ["proof (state)\ngoal (10 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [ x ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x1a  x2  ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x1a  x2  ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a  x2  ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [ x1a  x2  ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2 x3.\n       \\<lbrakk>atom z1 \\<sharp> (z, [x1a [ x2 ]  x3 ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [x1a [ x2 ]  x3 ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [x1a [ x2 ]  x3 ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [x1a [ x2 ]  x3 ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 4. \\<And>x1a x2 x3.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x1a x2 x3 ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x1a x2 x3 ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a x2 x3 ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [ x1a x2 x3 ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 5. \\<And>x1a x2.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x1a @@ x2 ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x1a @@ x2 ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a @@ x2 ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [ x1a @@ x2 ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 6. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [#1x ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [#1x ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [#1x ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [#1x ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 7. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [#2x ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [#2x ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [#2x ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [#2x ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 8. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x ]\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x ]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [ x ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 9. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [| x |]\\<^sup>e);\n        atom z1' \\<sharp> (z, [| x |]\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [| x |]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v =\n                         [| x |]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v\n 10. \\<And>x1a x2.\n        \\<lbrakk>atom z1 \\<sharp> (z, [ x1a  x2 ]\\<^sup>e);\n         atom z1' \\<sharp> (z, [ x1a  x2 ]\\<^sup>e)\\<rbrakk>\n        \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a \n                          x2 ]\\<^sup>e[z::=v]\\<^sub>e\\<^sub>v = [ x1a \n                          x2 ]\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>e\\<^sub>v", "qed  (simp add: flip_def fresh_Pair swap_fresh_fresh)+"], ["", "section \\<open>Expressions in Constraints\\<close>"], ["", "nominal_function subst_cev :: \"ce \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> ce\" where\n  \"subst_cev ( (CE_val v') ) x v = ( (CE_val (subst_vv  v' x v )) )\" \n| \"subst_cev ( (CE_op opp v1 v2) ) x v = ( (CE_op opp (subst_cev  v1 x v ) (subst_cev v2 x v )) )\"\n| \"subst_cev ( (CE_fst v')) x v = CE_fst (subst_cev  v' x v )\"\n| \"subst_cev ( (CE_snd v')) x v = CE_snd (subst_cev  v' x v )\"\n| \"subst_cev ( (CE_len v')) x v = CE_len (subst_cev  v' x v )\"\n| \"subst_cev ( CE_concat v1 v2) x v = CE_concat (subst_cev v1 x v ) (subst_cev v2 x v )\""], ["proof (prove)\ngoal (24 subgoals):\n 1. eqvt subst_cev_graph_aux\n 2. \\<And>x y. subst_cev_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = ([ v' ]\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>opp v1 v2 xa v.\n           x = ([ opp v1 v2 ]\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v.\n           x = ([#1v']\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v.\n           x = ([#2v']\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v' xa v.\n           x = ([| v' |]\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow> P;\n        \\<And>v1 v2 xa v.\n           x = ([ v1 @@ v2 ]\\<^sup>c\\<^sup>e, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>v' x v v'a xa va.\n       ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n       ([ v'a ]\\<^sup>c\\<^sup>e, xa, va) \\<Longrightarrow>\n       [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n       [ v'a[xa::=va]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e\n 5. \\<And>v' x v opp v1 v2 xa va.\n       \\<lbrakk>eqvt_at subst_cev_sumC (v1, xa, va);\n        eqvt_at subst_cev_sumC (v2, xa, va); True; True;\n        ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n        ([ opp v1 v2 ]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n                         [ opp subst_cev_sumC\n                                (v1, xa,\n                                 va) subst_cev_sumC\n(v2, xa, va) ]\\<^sup>c\\<^sup>e\n 6. \\<And>v' x v v'a xa va.\n       \\<lbrakk>eqvt_at subst_cev_sumC (v'a, xa, va); True;\n        ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n        ([#1v'a]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n                         [#1subst_cev_sumC (v'a, xa, va)]\\<^sup>c\\<^sup>e\n 7. \\<And>v' x v v'a xa va.\n       \\<lbrakk>eqvt_at subst_cev_sumC (v'a, xa, va); True;\n        ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n        ([#2v'a]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n                         [#2subst_cev_sumC (v'a, xa, va)]\\<^sup>c\\<^sup>e\n 8. \\<And>v' x v v'a xa va.\n       \\<lbrakk>eqvt_at subst_cev_sumC (v'a, xa, va); True;\n        ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n        ([| v'a |]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n                         [| subst_cev_sumC (v'a, xa, va) |]\\<^sup>c\\<^sup>e\n 9. \\<And>v' x v v1 v2 xa va.\n       \\<lbrakk>eqvt_at subst_cev_sumC (v1, xa, va);\n        eqvt_at subst_cev_sumC (v2, xa, va); True; True;\n        ([ v' ]\\<^sup>c\\<^sup>e, x, v) =\n        ([ v1 @@ v2 ]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n       \\<Longrightarrow> [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e =\n                         [ subst_cev_sumC\n                            (v1, xa,\n                             va) @@ subst_cev_sumC\n                                     (v2, xa, va) ]\\<^sup>c\\<^sup>e\n 10. \\<And>opp v1 v2 x v oppa v1a v2a xa va.\n        \\<lbrakk>eqvt_at subst_cev_sumC (v1, x, v);\n         eqvt_at subst_cev_sumC (v2, x, v);\n         eqvt_at subst_cev_sumC (v1a, xa, va);\n         eqvt_at subst_cev_sumC (v2a, xa, va); True; True; True; True;\n         ([ opp v1 v2 ]\\<^sup>c\\<^sup>e, x, v) =\n         ([ oppa v1a v2a ]\\<^sup>c\\<^sup>e, xa, va)\\<rbrakk>\n        \\<Longrightarrow> [ opp subst_cev_sumC\n                                 (v1, x,\n                                  v) subst_cev_sumC\n(v2, x, v) ]\\<^sup>c\\<^sup>e =\n                          [ oppa subst_cev_sumC\n                                  (v1a, xa,\n                                   va) subst_cev_sumC\n  (v2a, xa, va) ]\\<^sup>c\\<^sup>e\nA total of 24 subgoals...", "apply (simp add: eqvt_def subst_cev_graph_aux_def,auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>P a.\n       \\<lbrakk>\\<And>v'. a = [ v' ]\\<^sup>c\\<^sup>e \\<Longrightarrow> P;\n        \\<And>opp v1 v2.\n           a = [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<Longrightarrow> P;\n        \\<And>v'. a = [#1v']\\<^sup>c\\<^sup>e \\<Longrightarrow> P;\n        \\<And>v'. a = [#2v']\\<^sup>c\\<^sup>e \\<Longrightarrow> P;\n        \\<And>v'. a = [| v' |]\\<^sup>c\\<^sup>e \\<Longrightarrow> P;\n        \\<And>v1 v2.\n           a = [ v1 @@ v2 ]\\<^sup>c\\<^sup>e \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "by (meson ce.strong_exhaust)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_cev_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_cev_abbrev :: \"ce \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> ce\" (\"_[_::=_]\\<^sub>c\\<^sub>e\\<^sub>v\" [1000,50,50] 500)\n  where \n    \"e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v  \\<equiv> subst_cev  e x v'\""], ["", "lemma size_subst_cev [simp]: \"size ( subst_cev A i x ) = size A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (A[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v) = size A", "by (nominal_induct A avoiding: i x rule: ce.strong_induct,auto)"], ["", "lemma forget_subst_cev [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_cev A a x  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> A \\<Longrightarrow> A[a::=x]\\<^sub>c\\<^sub>e\\<^sub>v = A", "by (nominal_induct A avoiding: a x rule: ce.strong_induct, auto simp: fresh_at_base)"], ["", "lemma subst_cev_id [simp]: \"subst_cev A a (V_var a)  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A[a::=[ a ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v = A", "by (nominal_induct A avoiding: a rule: ce.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma fresh_subst_cev_if [simp]:\n  \"j \\<sharp> (subst_cev A i x ) = ((atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> A[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (atom i \\<sharp> A \\<and> j \\<sharp> A \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))", "proof(nominal_induct A avoiding: i x rule: ce.strong_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>x i xa.\n       j \\<sharp> [ x ]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 2. \\<And>x1a x2 x3 i x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n                   (atom b \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> ba \\<and> (j \\<sharp> x2 \\<or> j = atom b));\n        \\<And>b ba.\n           j \\<sharp> x3[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n            j \\<sharp> ba \\<and> (j \\<sharp> x3 \\<or> j = atom b))\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         (atom\n                           i \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<and>\n                          j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<or>\n                           j = atom i))\n 3. \\<And>x1a x2 i x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1a[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n                   (atom b \\<sharp> x1a \\<and> j \\<sharp> x1a \\<or>\n                    j \\<sharp> ba \\<and> (j \\<sharp> x1a \\<or> j = atom b));\n        \\<And>b ba.\n           j \\<sharp> x2[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n            j \\<sharp> ba \\<and> (j \\<sharp> x2 \\<or> j = atom b))\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         (atom\n                           i \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<and>\n                          j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                           j = atom i))\n 4. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#1x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 5. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#2x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 6. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [| x |]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "case (CE_op opp v1 v2)"], ["proof (state)\nthis:\n  j \\<sharp> v1[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v1 \\<and> j \\<sharp> v1 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v1 \\<or> j = atom ?b))\n  j \\<sharp> v2[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v2 \\<and> j \\<sharp> v2 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v2 \\<or> j = atom ?b))\n\ngoal (6 subgoals):\n 1. \\<And>x i xa.\n       j \\<sharp> [ x ]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 2. \\<And>x1a x2 x3 i x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n                   (atom b \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> ba \\<and> (j \\<sharp> x2 \\<or> j = atom b));\n        \\<And>b ba.\n           j \\<sharp> x3[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n            j \\<sharp> ba \\<and> (j \\<sharp> x3 \\<or> j = atom b))\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         (atom\n                           i \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<and>\n                          j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e \\<or>\n                           j = atom i))\n 3. \\<And>x1a x2 i x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1a[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n                   (atom b \\<sharp> x1a \\<and> j \\<sharp> x1a \\<or>\n                    j \\<sharp> ba \\<and> (j \\<sharp> x1a \\<or> j = atom b));\n        \\<And>b ba.\n           j \\<sharp> x2[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n            j \\<sharp> ba \\<and> (j \\<sharp> x2 \\<or> j = atom b))\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         (atom\n                           i \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<and>\n                          j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                           j = atom i))\n 4. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#1x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 5. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#2x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 6. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [| x |]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> v1[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v1 \\<and> j \\<sharp> v1 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v1 \\<or> j = atom ?b))\n  j \\<sharp> v2[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v2 \\<and> j \\<sharp> v2 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v2 \\<or> j = atom ?b))", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> v1[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v1 \\<and> j \\<sharp> v1 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v1 \\<or> j = atom ?b))\n  j \\<sharp> v2[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v2 \\<and> j \\<sharp> v2 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v2 \\<or> j = atom ?b))\n\ngoal (1 subgoal):\n 1. j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (atom i \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<and>\n     j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or>\n     j \\<sharp> x \\<and>\n     (j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "using fresh_subst_vv_if subst_ev.simps e.supp pure_fresh opp.fresh \n      fresh_e_opp"], ["proof (prove)\nusing this:\n  j \\<sharp> v1[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v1 \\<and> j \\<sharp> v1 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v1 \\<or> j = atom ?b))\n  j \\<sharp> v2[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v2 \\<and> j \\<sharp> v2 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v2 \\<or> j = atom ?b))\n  ?j \\<sharp> ?t[?i::=?x]\\<^sub>v\\<^sub>v =\n  (atom ?i \\<sharp> ?t \\<and> ?j \\<sharp> ?t \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?t \\<or> ?j = atom ?i))\n  [ ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?f  ?v'  ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?f  ?v'[?x::=?v]\\<^sub>v\\<^sub>v  ]\\<^sup>e\n  [?f [ ?b ]  ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [?f [ ?b ]  ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?opp ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#1?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#1?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#2?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#2?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?u ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v = [ ?u ]\\<^sup>e\n  [| ?v' |]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [| ?v'[?x::=?v]\\<^sub>v\\<^sub>v |]\\<^sup>e\n  [ ?v1.0 @@ ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v @@ ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?v1.0  ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v  ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  supp [ ?v ]\\<^sup>e = supp ?v\n  supp [ ?list  ?v  ]\\<^sup>e = supp ?list \\<union> supp ?v\n  supp [?list [ ?b ]  ?v ]\\<^sup>e =\n  supp ?list \\<union> (supp ?b \\<union> supp ?v)\n  supp [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e =\n  supp ?opp \\<union> (supp ?v1.0 \\<union> supp ?v2.0)\n  supp [ ?v1.0 @@ ?v2.0 ]\\<^sup>e = supp ?v1.0 \\<union> supp ?v2.0\n  supp [#1?v ]\\<^sup>e = supp ?v\n  supp [#2?v ]\\<^sup>e = supp ?v\n  supp [ ?u ]\\<^sup>e = supp ?u\n  supp [| ?v |]\\<^sup>e = supp ?v\n  supp [ ?v1.0  ?v2.0 ]\\<^sup>e = supp ?v1.0 \\<union> supp ?v2.0\n  ?a \\<sharp> ?x\n  ?a \\<sharp> plus\n  ?a \\<sharp> leq\n  ?a \\<sharp> eq\n  atom ?z \\<sharp> ?v1.0 \\<and> atom ?z \\<sharp> ?v2.0 \\<Longrightarrow>\n  atom ?z \\<sharp> [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e\n\ngoal (1 subgoal):\n 1. j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (atom i \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<and>\n     j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or>\n     j \\<sharp> x \\<and>\n     (j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "using fresh_opp_all"], ["proof (prove)\nusing this:\n  j \\<sharp> v1[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v1 \\<and> j \\<sharp> v1 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v1 \\<or> j = atom ?b))\n  j \\<sharp> v2[?b::=?ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom ?b \\<sharp> v2 \\<and> j \\<sharp> v2 \\<or>\n   j \\<sharp> ?ba \\<and> (j \\<sharp> v2 \\<or> j = atom ?b))\n  ?j \\<sharp> ?t[?i::=?x]\\<^sub>v\\<^sub>v =\n  (atom ?i \\<sharp> ?t \\<and> ?j \\<sharp> ?t \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?t \\<or> ?j = atom ?i))\n  [ ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?f  ?v'  ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?f  ?v'[?x::=?v]\\<^sub>v\\<^sub>v  ]\\<^sup>e\n  [?f [ ?b ]  ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [?f [ ?b ]  ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?opp ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#1?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#1?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#2?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#2?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?u ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v = [ ?u ]\\<^sup>e\n  [| ?v' |]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [| ?v'[?x::=?v]\\<^sub>v\\<^sub>v |]\\<^sup>e\n  [ ?v1.0 @@ ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v @@ ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?v1.0  ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v  ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  supp [ ?v ]\\<^sup>e = supp ?v\n  supp [ ?list  ?v  ]\\<^sup>e = supp ?list \\<union> supp ?v\n  supp [?list [ ?b ]  ?v ]\\<^sup>e =\n  supp ?list \\<union> (supp ?b \\<union> supp ?v)\n  supp [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e =\n  supp ?opp \\<union> (supp ?v1.0 \\<union> supp ?v2.0)\n  supp [ ?v1.0 @@ ?v2.0 ]\\<^sup>e = supp ?v1.0 \\<union> supp ?v2.0\n  supp [#1?v ]\\<^sup>e = supp ?v\n  supp [#2?v ]\\<^sup>e = supp ?v\n  supp [ ?u ]\\<^sup>e = supp ?u\n  supp [| ?v |]\\<^sup>e = supp ?v\n  supp [ ?v1.0  ?v2.0 ]\\<^sup>e = supp ?v1.0 \\<union> supp ?v2.0\n  ?a \\<sharp> ?x\n  ?a \\<sharp> plus\n  ?a \\<sharp> leq\n  ?a \\<sharp> eq\n  atom ?z \\<sharp> ?v1.0 \\<and> atom ?z \\<sharp> ?v2.0 \\<Longrightarrow>\n  atom ?z \\<sharp> [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e\n  ?z \\<sharp> ?opp\n\ngoal (1 subgoal):\n 1. j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (atom i \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<and>\n     j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or>\n     j \\<sharp> x \\<and>\n     (j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom i \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<and>\n   j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or>\n   j \\<sharp> x \\<and>\n   (j \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x i xa.\n       j \\<sharp> [ x ]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [ x ]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 2. \\<And>x1a x2 i x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1a[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n                   (atom b \\<sharp> x1a \\<and> j \\<sharp> x1a \\<or>\n                    j \\<sharp> ba \\<and> (j \\<sharp> x1a \\<or> j = atom b));\n        \\<And>b ba.\n           j \\<sharp> x2[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n            j \\<sharp> ba \\<and> (j \\<sharp> x2 \\<or> j = atom b))\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         (atom\n                           i \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<and>\n                          j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e \\<or>\n                           j = atom i))\n 3. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#1x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#1x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 4. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [#2x]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [#2x]\\<^sup>c\\<^sup>e \\<or> j = atom i))\n 5. \\<And>x i xa.\n       (\\<And>b ba.\n           j \\<sharp> x[b::=ba]\\<^sub>c\\<^sub>e\\<^sub>v =\n           (atom b \\<sharp> x \\<and> j \\<sharp> x \\<or>\n            j \\<sharp> ba \\<and>\n            (j \\<sharp> x \\<or> j = atom b))) \\<Longrightarrow>\n       j \\<sharp> [| x |]\\<^sup>c\\<^sup>e[i::=xa]\\<^sub>c\\<^sub>e\\<^sub>v =\n       (atom i \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<and>\n        j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or>\n        j \\<sharp> xa \\<and>\n        (j \\<sharp> [| x |]\\<^sup>c\\<^sup>e \\<or> j = atom i))", "qed(auto)+"], ["", "lemma subst_cev_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (subst_cev (subst_cev A i t ) j u) = subst_cev A i (subst_vv t j u )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom j \\<sharp> A \\<Longrightarrow>\n    (A[i::=t]\\<^sub>c\\<^sub>e\\<^sub>v)[j::=u]\\<^sub>c\\<^sub>e\\<^sub>v =\n    A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>e\\<^sub>v", "by (nominal_induct A avoiding: i j t u rule: ce.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma subst_cev_var_flip[simp]:\n  fixes e::ce and y::x and x::x\n  assumes \"atom y \\<sharp> e\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> e = e [x::=V_var y]\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> e =\n    e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom y \\<sharp> e\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> e =\n    e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "proof(nominal_induct e rule:ce.strong_induct)"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>c\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>c\\<^sup>e =\n       [ xa ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "case (CE_val v)"], ["proof (state)\nthis:\n  atom y \\<sharp> [ v ]\\<^sup>c\\<^sup>e\n\ngoal (6 subgoals):\n 1. \\<And>xa.\n       atom y \\<sharp> [ xa ]\\<^sup>c\\<^sup>e \\<Longrightarrow>\n       (y \\<leftrightarrow> x) \\<bullet> [ xa ]\\<^sup>c\\<^sup>e =\n       [ xa ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 6. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom y \\<sharp> [ v ]\\<^sup>c\\<^sup>e", "show ?case"], ["proof (prove)\nusing this:\n  atom y \\<sharp> [ v ]\\<^sup>c\\<^sup>e\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ v ]\\<^sup>c\\<^sup>e =\n    [ v ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "using subst_vv_var_flip"], ["proof (prove)\nusing this:\n  atom y \\<sharp> [ v ]\\<^sup>c\\<^sup>e\n  atom ?y \\<sharp> ?v \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?v =\n  ?v[?x::=[ ?y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ v ]\\<^sup>c\\<^sup>e =\n    [ v ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> x) \\<bullet> [ v ]\\<^sup>c\\<^sup>e =\n  [ v ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "case (CE_op opp v1 v2)"], ["proof (state)\nthis:\n  atom y \\<sharp> v1 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v1 =\n  v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> v2 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v2 =\n  v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "hence yf: \"atom y \\<sharp> v1 \\<and> atom y \\<sharp> v2\""], ["proof (prove)\nusing this:\n  atom y \\<sharp> v1 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v1 =\n  v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> v2 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v2 =\n  v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e\n\ngoal (1 subgoal):\n 1. atom y \\<sharp> v1 \\<and> atom y \\<sharp> v2", "using ce.fresh"], ["proof (prove)\nusing this:\n  atom y \\<sharp> v1 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v1 =\n  v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> v2 \\<Longrightarrow>\n  (y \\<leftrightarrow> x) \\<bullet> v2 =\n  v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  atom y \\<sharp> [ opp v1 v2 ]\\<^sup>c\\<^sup>e\n  ?a \\<sharp> [ ?v ]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?v\n  ?a \\<sharp> [ ?opp ?ce1.0 ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  (?a \\<sharp> ?opp \\<and> ?a \\<sharp> ?ce1.0 \\<and> ?a \\<sharp> ?ce2.0)\n  ?a \\<sharp> [ ?ce1.0 @@ ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  (?a \\<sharp> ?ce1.0 \\<and> ?a \\<sharp> ?ce2.0)\n  ?a \\<sharp> [#1?ce]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n  ?a \\<sharp> [#2?ce]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n  ?a \\<sharp> [| ?ce |]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n\ngoal (1 subgoal):\n 1. atom y \\<sharp> v1 \\<and> atom y \\<sharp> v2", "by blast"], ["proof (state)\nthis:\n  atom y \\<sharp> v1 \\<and> atom y \\<sharp> v2\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "have \" (y \\<leftrightarrow> x) \\<bullet> (CE_op opp v1 v2 ) = CE_op ((y \\<leftrightarrow> x) \\<bullet> opp) ( (y \\<leftrightarrow> x) \\<bullet> v1 ) ( (y \\<leftrightarrow> x) \\<bullet> v2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n    [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e", "using opp.perm_simps ce.perm_simps permute_pure ce.fresh opp.strong_exhaust"], ["proof (prove)\nusing this:\n  ?p \\<bullet> plus = plus\n  ?p \\<bullet> leq = leq\n  ?p \\<bullet> eq = eq\n  ?p \\<bullet> [ ?v ]\\<^sup>c\\<^sup>e = [ ?p \\<bullet> ?v ]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> [ ?opp ?ce1.0 ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  [ ?p \\<bullet> ?opp ?p \\<bullet> ?ce1.0 ?p \\<bullet> ?ce2.0 ]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> [ ?ce1.0 @@ ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  [ ?p \\<bullet> ?ce1.0 @@ ?p \\<bullet> ?ce2.0 ]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> [#1?ce]\\<^sup>c\\<^sup>e =\n  [#1?p \\<bullet> ?ce]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> [#2?ce]\\<^sup>c\\<^sup>e =\n  [#2?p \\<bullet> ?ce]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> [| ?ce |]\\<^sup>c\\<^sup>e =\n  [| ?p \\<bullet> ?ce |]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> ?x = ?x\n  ?a \\<sharp> [ ?v ]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?v\n  ?a \\<sharp> [ ?opp ?ce1.0 ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  (?a \\<sharp> ?opp \\<and> ?a \\<sharp> ?ce1.0 \\<and> ?a \\<sharp> ?ce2.0)\n  ?a \\<sharp> [ ?ce1.0 @@ ?ce2.0 ]\\<^sup>c\\<^sup>e =\n  (?a \\<sharp> ?ce1.0 \\<and> ?a \\<sharp> ?ce2.0)\n  ?a \\<sharp> [#1?ce]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n  ?a \\<sharp> [#2?ce]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n  ?a \\<sharp> [| ?ce |]\\<^sup>c\\<^sup>e = ?a \\<sharp> ?ce\n  \\<lbrakk>?y = plus \\<Longrightarrow> ?P; ?y = leq \\<Longrightarrow> ?P;\n   ?y = eq \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n    [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e", "by presburger"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "have \"... = CE_op ((y \\<leftrightarrow> x) \\<bullet> opp) (v1[x::=V_var y]\\<^sub>c\\<^sub>e\\<^sub>v) (v2 [x::=V_var y]\\<^sub>c\\<^sub>e\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e =\n    [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e", "using yf"], ["proof (prove)\nusing this:\n  atom y \\<sharp> v1 \\<and> atom y \\<sharp> v2\n\ngoal (1 subgoal):\n 1. [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e =\n    [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e", "by (simp add: CE_op.hyps(1) CE_op.hyps(2))"], ["proof (state)\nthis:\n  [ (y \\<leftrightarrow> x) \\<bullet> opp (y \\<leftrightarrow> x) \\<bullet> v1 (y \\<leftrightarrow> x) \\<bullet> v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e\n\ngoal (5 subgoals):\n 1. \\<And>x1a x2 x3.\n       \\<lbrakk>atom y \\<sharp> x2 \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x2 =\n                x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x3 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x3 =\n        x3[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e", "show ?case"], ["proof (prove)\nusing this:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n    [ opp v1 v2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "using subst_cev.simps  opp.perm_simps  opp.strong_exhaust"], ["proof (prove)\nusing this:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ (y \\<leftrightarrow> x) \\<bullet> opp v1[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v v2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e\n  [ ?v' ]\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [ ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e\n  [ ?opp ?v1.0 ?v2.0 ]\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [ ?opp ?v1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v ?v2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e\n  [#1?v']\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [#1?v'[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v]\\<^sup>c\\<^sup>e\n  [#2?v']\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [#2?v'[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v]\\<^sup>c\\<^sup>e\n  [| ?v' |]\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [| ?v'[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v |]\\<^sup>c\\<^sup>e\n  [ ?v1.0 @@ ?v2.0 ]\\<^sup>c\\<^sup>e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v @@ ?v2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v ]\\<^sup>c\\<^sup>e\n  ?p \\<bullet> plus = plus\n  ?p \\<bullet> leq = leq\n  ?p \\<bullet> eq = eq\n  \\<lbrakk>?y = plus \\<Longrightarrow> ?P; ?y = leq \\<Longrightarrow> ?P;\n   ?y = eq \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n    [ opp v1 v2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "by (metis (full_types))"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> x) \\<bullet> [ opp v1 v2 ]\\<^sup>c\\<^sup>e =\n  [ opp v1 v2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (4 subgoals):\n 1. \\<And>x1a x2.\n       \\<lbrakk>atom y \\<sharp> x1a \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> x1a =\n                x1a[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> x2 \\<Longrightarrow>\n        (y \\<leftrightarrow> x) \\<bullet> x2 =\n        x2[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#1xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#1xa]\\<^sup>c\\<^sup>e =\n                         [#1xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [#2xa]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [#2xa]\\<^sup>c\\<^sup>e =\n                         [#2xa]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>xa.\n       \\<lbrakk>atom y \\<sharp> xa \\<Longrightarrow>\n                (y \\<leftrightarrow> x) \\<bullet> xa =\n                xa[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom y \\<sharp> [| xa |]\\<^sup>c\\<^sup>e\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> x) \\<bullet> [| xa |]\\<^sup>c\\<^sup>e =\n                         [| xa |]\\<^sup>c\\<^sup>e[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v", "qed( (auto simp add: permute_pure subst_vv_var_flip)+)"], ["", "lemma subst_cev_flip:\n  fixes e::ce and ea::ce and c::x\n  assumes \"atom c \\<sharp> (e, ea)\" and \"atom c \\<sharp> (x, xa, e, ea)\" and \"(x \\<leftrightarrow> c) \\<bullet> e = (xa \\<leftrightarrow> c) \\<bullet> ea\" \n  shows \"e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "have \"e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = (e[x::=V_var c]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "using subst_ev_commute assms"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  (?A[?i::=?t]\\<^sub>e\\<^sub>v)[?j::=?u]\\<^sub>e\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "have \"...  = ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "using subst_ev_var_flip assms"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?e \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?e =\n  ?e[?x::=[ ?y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  (e[x::=[ c ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "have \"... = ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "using assms flip_commute"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n  (?a \\<leftrightarrow> ?b) = (?b \\<leftrightarrow> ?a)\n\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "also"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> x) \\<bullet> e)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "have \"... = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "using subst_ev_var_flip assms"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?e \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?e =\n  ?e[?x::=[ ?y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n  atom c \\<sharp> (e, ea)\n  atom c \\<sharp> (x, xa, e, ea)\n  (x \\<leftrightarrow> c) \\<bullet> e =\n  (xa \\<leftrightarrow> c) \\<bullet> ea\n\ngoal (1 subgoal):\n 1. ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n    ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  ((c \\<leftrightarrow> xa) \\<bullet> ea)[c::=v']\\<^sub>c\\<^sub>e\\<^sub>v =\n  ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  e[x::=v']\\<^sub>c\\<^sub>e\\<^sub>v = ea[xa::=v']\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_cev_var[simp]:\n  fixes z::x and x::x\n  shows  \"[[x]\\<^sup>v]\\<^sup>c\\<^sup>e [x::=[z]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v = [[z]\\<^sup>v]\\<^sup>c\\<^sup>e\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e[x::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v =\n    [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e", "by auto"], ["", "instantiation ce :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_cev\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(ce, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::ce"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using fresh_subst_cev_if[of j t i x] subst_v_ce_def"], ["proof (prove)\nusing this:\n  j \\<sharp> t[i::=x]\\<^sub>c\\<^sub>e\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "by metis"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::ce and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "using forget_subst_cev subst_v_ce_def"], ["proof (prove)\nusing this:\n  atom ?a \\<sharp> ?A \\<Longrightarrow>\n  ?A[?a::=?x]\\<^sub>c\\<^sub>e\\<^sub>v = ?A\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::ce"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "using subst_cev_id  subst_v_ce_def"], ["proof (prove)\nusing this:\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v = ?A\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::ce"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using subst_cev_commute  subst_v_ce_def"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  (?A[?i::=?t]\\<^sub>c\\<^sub>e\\<^sub>v)[?j::=?u]\\<^sub>c\\<^sub>e\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>e\\<^sub>v\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::ce and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c [z::=V_var x]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "using  subst_v_ce_def"], ["proof (prove)\nusing this:\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::ce and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c [z::=V_var x]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "using  subst_v_ce_def"], ["proof (prove)\nusing this:\n  subst_v = subst_cev_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma subst_cev_commute_full:\n  fixes e::ce and w::v and v::v\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x \\<noteq> z\"\n  shows \"subst_cev (e[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v) x v  = subst_cev (e[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v) z w \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (e[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v)[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (e[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v)[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. (e[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v)[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n    (e[x::=v]\\<^sub>c\\<^sub>e\\<^sub>v)[z::=w]\\<^sub>c\\<^sub>e\\<^sub>v", "by(nominal_induct e rule: ce.strong_induct,simp+)"], ["", "lemma subst_cev_v_flip1[simp]:\n  fixes e::ce\n  assumes \"atom z1 \\<sharp> (z,e)\" and \"atom z1' \\<sharp> (z,e)\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =  e[z::= ((z1 \\<leftrightarrow> z1') \\<bullet> v)]\\<^sub>c\\<^sub>e\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n    e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> (z, e)\n  atom z1' \\<sharp> (z, e)\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n    e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v", "apply(nominal_induct e rule:ce.strong_induct)"], ["proof (prove)\ngoal (6 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>atom z1 \\<sharp> (z, [ x ]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x ]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x ]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [ x ]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v\n 2. \\<And>x1a x2 x3.\n       \\<lbrakk>\\<lbrakk>atom z1 \\<sharp> (z, x2);\n                 atom z1' \\<sharp> (z, x2)\\<rbrakk>\n                \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x2[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                                  x2[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        \\<lbrakk>atom z1 \\<sharp> (z, x3);\n         atom z1' \\<sharp> (z, x3)\\<rbrakk>\n        \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x3[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                          x3[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom z1 \\<sharp> (z, [ x1a x2 x3 ]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x1a x2 x3 ]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [ x1a x2 x3 ]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v\n 3. \\<And>x1a x2.\n       \\<lbrakk>\\<lbrakk>atom z1 \\<sharp> (z, x1a);\n                 atom z1' \\<sharp> (z, x1a)\\<rbrakk>\n                \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x1a[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                                  x1a[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        \\<lbrakk>atom z1 \\<sharp> (z, x2);\n         atom z1' \\<sharp> (z, x2)\\<rbrakk>\n        \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x2[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                          x2[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom z1 \\<sharp> (z, [ x1a @@ x2 ]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [ x1a @@ x2 ]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [ x1a @@ x2 ]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v\n 4. \\<And>x.\n       \\<lbrakk>\\<lbrakk>atom z1 \\<sharp> (z, x);\n                 atom z1' \\<sharp> (z, x)\\<rbrakk>\n                \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                                  x[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom z1 \\<sharp> (z, [#1x]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [#1x]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [#1x]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [#1x]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v\n 5. \\<And>x.\n       \\<lbrakk>\\<lbrakk>atom z1 \\<sharp> (z, x);\n                 atom z1' \\<sharp> (z, x)\\<rbrakk>\n                \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                                  x[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom z1 \\<sharp> (z, [#2x]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [#2x]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [#2x]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [#2x]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v\n 6. \\<And>x.\n       \\<lbrakk>\\<lbrakk>atom z1 \\<sharp> (z, x);\n                 atom z1' \\<sharp> (z, x)\\<rbrakk>\n                \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> x[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                                  x[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v;\n        atom z1 \\<sharp> (z, [| x |]\\<^sup>c\\<^sup>e);\n        atom z1' \\<sharp> (z, [| x |]\\<^sup>c\\<^sup>e)\\<rbrakk>\n       \\<Longrightarrow> (z1 \\<leftrightarrow> z1') \\<bullet> [| x |]\\<^sup>c\\<^sup>e[z::=v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                         [| x |]\\<^sup>c\\<^sup>e[z::=(z1 \\<leftrightarrow> z1') \\<bullet> v]\\<^sub>c\\<^sub>e\\<^sub>v", "by (simp add: flip_def fresh_Pair swap_fresh_fresh)+"], ["", "section \\<open>Constraints\\<close>"], ["", "nominal_function subst_cv :: \"c \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> c\" where\n  \"subst_cv (C_true) x v = C_true\"\n|  \"subst_cv (C_false) x v = C_false\"\n|  \"subst_cv (C_conj c1 c2) x v = C_conj (subst_cv c1 x v ) (subst_cv c2 x v )\"\n|  \"subst_cv (C_disj c1 c2) x v = C_disj (subst_cv c1 x v ) (subst_cv c2 x v )\"\n|  \"subst_cv (C_imp c1 c2) x v = C_imp (subst_cv c1 x v ) (subst_cv c2 x v )\"\n|  \"subst_cv (e1 == e2) x v = ((subst_cev e1 x v ) == (subst_cev e2 x v ))\"\n|  \"subst_cv (C_not c) x v = C_not (subst_cv c x v )\""], ["proof (prove)\ngoal (31 subgoals):\n 1. eqvt subst_cv_graph_aux\n 2. \\<And>x y. subst_cv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (TRUE, xa, v) \\<Longrightarrow> P;\n        \\<And>xa v. x = (FALSE, xa, v) \\<Longrightarrow> P;\n        \\<And>c1 c2 xa v. x = (c1  AND  c2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c1 c2 xa v. x = (c1 OR c2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c1 c2 xa v. x = (c1  IMP  c2 , xa, v) \\<Longrightarrow> P;\n        \\<And>e1 e2 xa v. x = (e1  ==  e2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c xa v. x = (\\<not> c , xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>x v xa va.\n       (TRUE, x, v) = (TRUE, xa, va) \\<Longrightarrow> (TRUE) = (TRUE)\n 5. \\<And>x v xa va.\n       (TRUE, x, v) = (FALSE, xa, va) \\<Longrightarrow> (TRUE) = (FALSE)\n 6. \\<And>x v c1 c2 xa va.\n       \\<lbrakk>eqvt_at subst_cv_sumC (c1, xa, va);\n        eqvt_at subst_cv_sumC (c2, xa, va); True; True;\n        (TRUE, x, v) = (c1  AND  c2 , xa, va)\\<rbrakk>\n       \\<Longrightarrow> (TRUE) =\n                         (subst_cv_sumC\n                           (c1, xa, va)  AND  subst_cv_sumC (c2, xa, va) )\n 7. \\<And>x v c1 c2 xa va.\n       \\<lbrakk>eqvt_at subst_cv_sumC (c1, xa, va);\n        eqvt_at subst_cv_sumC (c2, xa, va); True; True;\n        (TRUE, x, v) = (c1 OR c2 , xa, va)\\<rbrakk>\n       \\<Longrightarrow> (TRUE) =\n                         (subst_cv_sumC\n                           (c1, xa, va) OR subst_cv_sumC (c2, xa, va) )\n 8. \\<And>x v c1 c2 xa va.\n       \\<lbrakk>eqvt_at subst_cv_sumC (c1, xa, va);\n        eqvt_at subst_cv_sumC (c2, xa, va); True; True;\n        (TRUE, x, v) = (c1  IMP  c2 , xa, va)\\<rbrakk>\n       \\<Longrightarrow> (TRUE) =\n                         (subst_cv_sumC\n                           (c1, xa, va)  IMP  subst_cv_sumC (c2, xa, va) )\n 9. \\<And>x v e1 e2 xa va.\n       (TRUE, x, v) = (e1  ==  e2 , xa, va) \\<Longrightarrow>\n       (TRUE) =\n       (e1[xa::=va]\\<^sub>c\\<^sub>e\\<^sub>v  ==  e2[xa::=va]\\<^sub>c\\<^sub>e\\<^sub>v )\n 10. \\<And>x v c xa va.\n        \\<lbrakk>eqvt_at subst_cv_sumC (c, xa, va); True;\n         (TRUE, x, v) = (\\<not> c , xa, va)\\<rbrakk>\n        \\<Longrightarrow> (TRUE) = (\\<not> subst_cv_sumC (c, xa, va) )\nA total of 31 subgoals...", "apply (simp add: eqvt_def subst_cv_graph_aux_def,auto)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>P a.\n       \\<lbrakk>a = (TRUE) \\<Longrightarrow> P;\n        a = (FALSE) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1  AND  c2 ) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1 OR c2 ) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1  IMP  c2 ) \\<Longrightarrow> P;\n        \\<And>e1 e2. a = (e1  ==  e2 ) \\<Longrightarrow> P;\n        \\<And>c. a = (\\<not> c ) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "using c.strong_exhaust"], ["proof (prove)\nusing this:\n  \\<lbrakk>?y = (TRUE) \\<Longrightarrow> ?P;\n   ?y = (FALSE) \\<Longrightarrow> ?P;\n   \\<And>x31 x32. ?y = (x31  AND  x32 ) \\<Longrightarrow> ?P;\n   \\<And>x41 x42. ?y = (x41 OR x42 ) \\<Longrightarrow> ?P;\n   \\<And>x5. ?y = (\\<not> x5 ) \\<Longrightarrow> ?P;\n   \\<And>x61 x62. ?y = (x61  IMP  x62 ) \\<Longrightarrow> ?P;\n   \\<And>x71 x72. ?y = (x71  ==  x72 ) \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. \\<And>P a.\n       \\<lbrakk>a = (TRUE) \\<Longrightarrow> P;\n        a = (FALSE) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1  AND  c2 ) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1 OR c2 ) \\<Longrightarrow> P;\n        \\<And>c1 c2. a = (c1  IMP  c2 ) \\<Longrightarrow> P;\n        \\<And>e1 e2. a = (e1  ==  e2 ) \\<Longrightarrow> P;\n        \\<And>c. a = (\\<not> c ) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "by metis"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_cv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_cv_abbrev :: \"c \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> c\" (\"_[_::=_]\\<^sub>c\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"c[x::=v']\\<^sub>c\\<^sub>v  \\<equiv> subst_cv c x v'\""], ["", "lemma size_subst_cv [simp]: \"size ( subst_cv A i x ) = size A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size A[i::=x]\\<^sub>c\\<^sub>v = size A", "by (nominal_induct A avoiding: i x rule: c.strong_induct,auto)"], ["", "lemma forget_subst_cv [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_cv A a x  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> A \\<Longrightarrow> A[a::=x]\\<^sub>c\\<^sub>v = A", "by (nominal_induct A avoiding: a x rule: c.strong_induct, auto simp: fresh_at_base)"], ["", "lemma subst_cv_id [simp]: \"subst_cv A a (V_var a)  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A[a::=[ a ]\\<^sup>v]\\<^sub>c\\<^sub>v = A", "by (nominal_induct A avoiding: a rule: c.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma fresh_subst_cv_if [simp]:\n  \"j \\<sharp> (subst_cv A i x ) \\<longleftrightarrow> (atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> A[i::=x]\\<^sub>c\\<^sub>v =\n    (atom i \\<sharp> A \\<and> j \\<sharp> A \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))", "by (nominal_induct A avoiding: i x rule: c.strong_induct, (auto simp add: pure_fresh)+)"], ["", "lemma subst_cv_commute [simp]:\n  \"atom j \\<sharp> A \\<Longrightarrow> (subst_cv (subst_cv A i t ) j u ) = subst_cv A i (subst_vv t j u )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom j \\<sharp> A \\<Longrightarrow>\n    A[i::=t]\\<^sub>c\\<^sub>v[j::=u]\\<^sub>c\\<^sub>v =\n    A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>v", "by (nominal_induct A avoiding: i j t u rule: c.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma let_s_size [simp]: \"size s \\<le> size (AS_let x e s)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size s \\<le> size LET x = e IN s", "apply (nominal_induct s avoiding: e x rule: s_branch_s_branch_list.strong_induct(1))"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x e xa. size [x]\\<^sup>s \\<le> size LET xa = e IN [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 e x.\n       \\<lbrakk>atom x1 \\<sharp> e; atom x1 \\<sharp> x;\n        \\<And>b ba. size x3 \\<le> size LET ba = b IN x3\\<rbrakk>\n       \\<Longrightarrow> size LET x1 = x2 IN x3\n                         \\<le> size LET x = e IN LET x1 = x2 IN x3\n 3. \\<And>x1 x2 x3 x4 e x.\n       \\<lbrakk>atom x1 \\<sharp> e; atom x1 \\<sharp> x;\n        \\<And>b ba. size x3 \\<le> size LET ba = b IN x3;\n        \\<And>b ba. size x4 \\<le> size LET ba = b IN x4\\<rbrakk>\n       \\<Longrightarrow> size LET x1 : x2 = x3 IN x4\n                         \\<le> size LET x = e IN LET x1 : x2 = x3 IN x4\n 4. \\<And>x1 x2 x3 e x.\n       \\<lbrakk>\\<And>b ba. size x2 \\<le> size LET ba = b IN x2;\n        \\<And>b ba. size x3 \\<le> size LET ba = b IN x3\\<rbrakk>\n       \\<Longrightarrow> size (IF x1 THEN x2 ELSE x3)\n                         \\<le> size LET x = e IN IF x1 THEN x2 ELSE x3\n 5. \\<And>x1 x2 x3 x4 e x.\n       \\<lbrakk>atom x1 \\<sharp> e; atom x1 \\<sharp> x;\n        \\<And>b ba. size x4 \\<le> size LET ba = b IN x4\\<rbrakk>\n       \\<Longrightarrow> size VAR x1 : x2 = x3 IN x4\n                         \\<le> size LET x = e IN VAR x1 : x2 = x3 IN x4\n 6. \\<And>x1 x2 e x. size x1 ::= x2 \\<le> size LET x = e IN x1 ::= x2\n 7. \\<And>x1 x2 e x.\n       (\\<And>b ba. ?P3.0 (((), b), ba) x2) \\<Longrightarrow>\n       size MATCH x1 WITH { x2 }\n       \\<le> size LET x = e IN MATCH x1 WITH { x2 }\n 8. \\<And>x1 x2 e x.\n       \\<lbrakk>\\<And>b ba. size x1 \\<le> size LET ba = b IN x1;\n        \\<And>b ba. size x2 \\<le> size LET ba = b IN x2\\<rbrakk>\n       \\<Longrightarrow> size (WHILE x1 DO { x2 } )\n                         \\<le> size LET x = e IN WHILE x1 DO { x2 } \n 9. \\<And>x1 x2 e x.\n       \\<lbrakk>\\<And>b ba. size x1 \\<le> size LET ba = b IN x1;\n        \\<And>b ba. size x2 \\<le> size LET ba = b IN x2\\<rbrakk>\n       \\<Longrightarrow> size ( x1 ;; x2 )\n                         \\<le> size LET x = e IN  x1 ;; x2 \n 10. \\<And>x1 x2 e x.\n        (\\<And>b ba. size x2 \\<le> size LET ba = b IN x2) \\<Longrightarrow>\n        size ASSERT x1 IN x2  \\<le> size LET x = e IN ASSERT x1 IN x2 \nA total of 13 subgoals...", "apply auto"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma subst_cv_var_flip[simp]:\n  fixes c::c\n  assumes \"atom y \\<sharp> c\"\n  shows \"(y \\<leftrightarrow> x) \\<bullet> c = c[x::=V_var y]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> c =\n    c[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom y \\<sharp> c\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> x) \\<bullet> c =\n    c[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by(nominal_induct c rule:c.strong_induct,(simp add: flip_subst_v subst_v_ce_def)+)"], ["", "instantiation c :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_cv\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(c, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::c"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using fresh_subst_cv_if[of j t i x] subst_v_c_def"], ["proof (prove)\nusing this:\n  j \\<sharp> t[i::=x]\\<^sub>c\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "by metis"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::c and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "using forget_subst_cv subst_v_c_def"], ["proof (prove)\nusing this:\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>c\\<^sub>v = ?A\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::c"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "using subst_cv_id  subst_v_c_def"], ["proof (prove)\nusing this:\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>c\\<^sub>v = ?A\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::c"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using subst_cv_commute  subst_v_c_def"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  ?A[?i::=?t]\\<^sub>c\\<^sub>v[?j::=?u]\\<^sub>c\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>v\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::c and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "using subst_cv_var_flip subst_v_c_def"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::c and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "using subst_cv_var_flip subst_v_c_def"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma subst_cv_var_flip1[simp]:\n  fixes c::c\n  assumes \"atom y \\<sharp> c\"\n  shows \"(x \\<leftrightarrow> y) \\<bullet> c = c[x::=V_var y]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> y) \\<bullet> c =\n    c[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using subst_cv_var_flip flip_commute"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  (?a \\<leftrightarrow> ?b) = (?b \\<leftrightarrow> ?a)\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> y) \\<bullet> c =\n    c[x::=[ y ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by (metis assms)"], ["", "lemma subst_cv_v_flip3[simp]:\n  fixes c::c\n  assumes \"atom z1 \\<sharp> c\" and \"atom z1' \\<sharp> c\"\n  shows\"(z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v =  c[z::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "consider \"z1' = z\" | \"z1 = z\" | \"atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>z1' = z \\<Longrightarrow> thesis;\n     z1 = z \\<Longrightarrow> thesis;\n     atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n     thesis\\<rbrakk>\n    \\<Longrightarrow> thesis", "by force"], ["proof (state)\nthis:\n  \\<lbrakk>z1' = z \\<Longrightarrow> ?thesis;\n   z1 = z \\<Longrightarrow> ?thesis;\n   atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>z1' = z \\<Longrightarrow> ?thesis;\n   z1 = z \\<Longrightarrow> ?thesis;\n   atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrakk>z1' = z \\<Longrightarrow> ?thesis;\n   z1 = z \\<Longrightarrow> ?thesis;\n   atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n   ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "proof(cases)"], ["proof (state)\ngoal (3 subgoals):\n 1. z1' = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. z1 = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case 1"], ["proof (state)\nthis:\n  z1' = z\n\ngoal (3 subgoals):\n 1. z1' = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. z1 = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  z1' = z", "show ?thesis"], ["proof (prove)\nusing this:\n  z1' = z\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using 1 assms"], ["proof (prove)\nusing this:\n  z1' = z\n  z1' = z\n  atom z1 \\<sharp> c\n  atom z1' \\<sharp> c\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (2 subgoals):\n 1. z1 = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. z1 = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case 2"], ["proof (state)\nthis:\n  z1 = z\n\ngoal (2 subgoals):\n 1. z1 = z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  z1 = z", "show ?thesis"], ["proof (prove)\nusing this:\n  z1 = z\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using 2 assms"], ["proof (prove)\nusing this:\n  z1 = z\n  z1 = z\n  atom z1 \\<sharp> c\n  atom z1' \\<sharp> c\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case 3"], ["proof (state)\nthis:\n  atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z\n\ngoal (1 subgoal):\n 1. atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z \\<Longrightarrow>\n    (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z", "show ?thesis"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> z \\<and> atom z1' \\<sharp> z\n  atom z1 \\<sharp> c\n  atom z1' \\<sharp> c\n\ngoal (1 subgoal):\n 1. (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (z1 \\<leftrightarrow> z1') \\<bullet> c[z::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c[z::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_cv_v_flip[simp]:\n  fixes c::c\n  assumes \"atom x \\<sharp> c\"\n  shows \"((x \\<leftrightarrow> z) \\<bullet> c)[x::=v]\\<^sub>c\\<^sub>v = c [z::=v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> z) \\<bullet> c)[x::=v]\\<^sub>c\\<^sub>v =\n    c[z::=v]\\<^sub>c\\<^sub>v", "using assms subst_v_c_def"], ["proof (prove)\nusing this:\n  atom x \\<sharp> c\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> z) \\<bullet> c)[x::=v]\\<^sub>c\\<^sub>v =\n    c[z::=v]\\<^sub>c\\<^sub>v", "by auto"], ["", "lemma subst_cv_commute_full:\n  fixes c::c\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x\\<noteq>z\"\n  shows \"(c[z::=w]\\<^sub>c\\<^sub>v)[x::=v]\\<^sub>c\\<^sub>v = (c[x::=v]\\<^sub>c\\<^sub>v)[z::=w]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n    c[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. c[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n    c[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "proof(nominal_induct c rule: c.strong_induct)"], ["proof (state)\ngoal (7 subgoals):\n 1. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (TRUE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (TRUE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 2. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (FALSE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (FALSE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  AND  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  AND  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1 OR x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1 OR x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> xa[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  xa[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (\\<not> xa )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (\\<not> xa )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  IMP  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  IMP  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 7. \\<And>x1 x2.\n       \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  ==  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  ==  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "case (C_eq e1 e2)"], ["proof (state)\nthis:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (7 subgoals):\n 1. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (TRUE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (TRUE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 2. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (FALSE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (FALSE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  AND  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  AND  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1 OR x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1 OR x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> xa[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  xa[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (\\<not> xa )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (\\<not> xa )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  IMP  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  IMP  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 7. \\<And>x1 x2.\n       \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  ==  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  ==  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z", "show ?case"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. (e1  ==  e2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n    (e1  ==  e2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "using subst_cev_commute_full"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n  \\<lbrakk>atom ?z \\<sharp> ?v; atom ?x \\<sharp> ?w; ?x \\<noteq> ?z\\<rbrakk>\n  \\<Longrightarrow> (?e[?z::=?w]\\<^sub>c\\<^sub>e\\<^sub>v)[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v =\n                    (?e[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v)[?z::=?w]\\<^sub>c\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. (e1  ==  e2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n    (e1  ==  e2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  (e1  ==  e2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n  (e1  ==  e2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n\ngoal (6 subgoals):\n 1. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (TRUE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (TRUE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 2. \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n    \\<Longrightarrow> (FALSE)[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                      (FALSE)[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  AND  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  AND  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 4. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1 OR x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1 OR x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 5. \\<And>xa.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> xa[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  xa[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (\\<not> xa )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (\\<not> xa )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v\n 6. \\<And>x1 x2.\n       \\<lbrakk>\\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w;\n                 x \\<noteq> z\\<rbrakk>\n                \\<Longrightarrow> x1[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                                  x1[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        \\<lbrakk>atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n        \\<Longrightarrow> x2[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                          x2[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v;\n        atom z \\<sharp> v; atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> (x1  IMP  x2 )[z::=w]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                         (x1  IMP  x2 )[x::=v]\\<^sub>c\\<^sub>v[z::=w]\\<^sub>c\\<^sub>v", "qed(force+)"], ["", "lemma subst_cv_eq[simp]:\n  assumes  \"atom z1 \\<sharp> e1\" \n  shows \"(CE_val (V_var z1)  ==  e1 )[z1::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v = (CE_val (V_var x)  ==  e1 )\" (is \"?A = ?B\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )", "have \"?A = (((CE_val (V_var z1))[z1::=[x]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v) == e1)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  e1 )", "using subst_cv.simps assms"], ["proof (prove)\nusing this:\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n  atom z1 \\<sharp> e1\n\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  e1 )", "by simp"], ["proof (state)\nthis:\n  ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  e1 )\n\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )", "thus ?thesis"], ["proof (prove)\nusing this:\n  ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  e1 )\n\ngoal (1 subgoal):\n 1. ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ([ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )", "by simp"], ["proof (state)\nthis:\n  ([ [ z1 ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )[z1::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ([ [ x ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e1 )\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Variable Context\\<close>"], ["", "text \\<open>The idea of this substitution is to remove x from the context. We really want to add the condition \nthat x is fresh in v but this causes problems with proofs.\\<close>"], ["", "nominal_function subst_gv :: \"\\<Gamma> \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> \\<Gamma>\" where\n  \"subst_gv GNil  x v = GNil\"\n| \"subst_gv ((y,b,c) #\\<^sub>\\<Gamma> \\<Gamma>) x v  = (if x = y then \\<Gamma> else ((y,b,c[x::=v]\\<^sub>c\\<^sub>v)#\\<^sub>\\<Gamma> (subst_gv  \\<Gamma> x v )))\""], ["proof (prove)\ngoal (6 subgoals):\n 1. eqvt subst_gv_graph_aux\n 2. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 5. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 6. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "proof(goal_cases)"], ["proof (state)\ngoal (6 subgoals):\n 1. eqvt subst_gv_graph_aux\n 2. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 5. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 6. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (6 subgoals):\n 1. eqvt subst_gv_graph_aux\n 2. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 5. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 6. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt subst_gv_graph_aux", "by(simp add: eqvt_def subst_gv_graph_aux_def )"], ["proof (state)\nthis:\n  eqvt subst_gv_graph_aux\n\ngoal (5 subgoals):\n 1. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 3. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 4. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 5. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 3. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 4. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 5. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "case (3 P x)"], ["proof (state)\nthis:\n  x = (GNil, ?x, ?v) \\<Longrightarrow> P\n  x = ((?y, ?b, ?c) #\\<^sub>\\<Gamma> ?\\<Gamma>, ?x, ?v) \\<Longrightarrow> P\n\ngoal (5 subgoals):\n 1. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       \\<lbrakk>\\<And>xa v. x = (GNil, xa, v) \\<Longrightarrow> P;\n        \\<And>y b c \\<Gamma> xa v.\n           x =\n           ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 3. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 4. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 5. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "then"], ["proof (chain)\npicking this:\n  x = (GNil, ?x, ?v) \\<Longrightarrow> P\n  x = ((?y, ?b, ?c) #\\<^sub>\\<Gamma> ?\\<Gamma>, ?x, ?v) \\<Longrightarrow> P", "show ?case"], ["proof (prove)\nusing this:\n  x = (GNil, ?x, ?v) \\<Longrightarrow> P\n  x = ((?y, ?b, ?c) #\\<^sub>\\<Gamma> ?\\<Gamma>, ?x, ?v) \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "by (metis neq_GNil_conv prod_cases3)"], ["proof (state)\nthis:\n  P\n\ngoal (4 subgoals):\n 1. \\<And>x y. subst_gv_graph x y \\<Longrightarrow> True\n 2. \\<And>x v xa va.\n       (GNil, x, v) = (GNil, xa, va) \\<Longrightarrow> GNil = GNil\n 3. \\<And>x v y b c \\<Gamma> xa va.\n       \\<lbrakk>xa \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, xa, va);\n        xa \\<noteq> y \\<Longrightarrow> True;\n        (GNil, x, v) =\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> GNil =\n                         (if xa = y then \\<Gamma>\n                          else (y, b,\n                                c[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, xa, va))\n 4. \\<And>y b c \\<Gamma> x v ya ba ca \\<Gamma>' xa va.\n       \\<lbrakk>x \\<noteq> y \\<Longrightarrow>\n                eqvt_at subst_gv_sumC (\\<Gamma>, x, v);\n        xa \\<noteq> ya \\<Longrightarrow>\n        eqvt_at subst_gv_sumC (\\<Gamma>', xa, va);\n        x \\<noteq> y \\<Longrightarrow> True;\n        xa \\<noteq> ya \\<Longrightarrow> True;\n        ((y, b, c) #\\<^sub>\\<Gamma> \\<Gamma>, x, v) =\n        ((ya, ba, ca) #\\<^sub>\\<Gamma> \\<Gamma>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (if x = y then \\<Gamma>\n                          else (y, b,\n                                c[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>, x, v)) =\n                         (if xa = ya then \\<Gamma>'\n                          else (ya, ba,\n                                ca[xa::=va]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                               subst_gv_sumC (\\<Gamma>', xa, va))", "qed(fast+)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_gv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_gv_abbrev :: \"\\<Gamma> \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> \\<Gamma>\" (\"_[_::=_]\\<^sub>\\<Gamma>\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"g[x::=v]\\<^sub>\\<Gamma>\\<^sub>v  \\<equiv> subst_gv g x v\""], ["", "lemma size_subst_gv [simp]: \"size ( subst_gv G i x ) \\<le> size G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size G[i::=x]\\<^sub>\\<Gamma>\\<^sub>v \\<le> size G", "by (induct G,auto)"], ["", "lemma forget_subst_gv [simp]: \"atom a \\<sharp> G \\<Longrightarrow> subst_gv G a x = G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> G \\<Longrightarrow> G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G", "apply (induct G ,auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (a, aa, b) #\\<^sub>\\<Gamma> G\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> b[a::=x]\\<^sub>c\\<^sub>v = b\n 3. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G", "using fresh_GCons fresh_PairD(1) not_self_fresh"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?a \\<sharp> (?x, ?y) \\<Longrightarrow> ?a \\<sharp> ?x\n  atom ?x \\<sharp> ?x = False\n\ngoal (3 subgoals):\n 1. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (a, aa, b) #\\<^sub>\\<Gamma> G\\<rbrakk>\n       \\<Longrightarrow> False\n 2. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> b[a::=x]\\<^sub>c\\<^sub>v = b\n 3. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> b[a::=x]\\<^sub>c\\<^sub>v = b\n 2. \\<And>aa aaa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G;\n        atom a \\<sharp> (aa, aaa, b) #\\<^sub>\\<Gamma> G;\n        a \\<noteq> aa\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Gamma>\\<^sub>v = G", "apply (simp add: fresh_GCons)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma fresh_subst_gv: \"atom a \\<sharp> G \\<Longrightarrow> atom a \\<sharp> v \\<Longrightarrow> atom a \\<sharp> subst_gv G x v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n    \\<Longrightarrow> atom a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "proof(induct G)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>atom a \\<sharp> GNil; atom a \\<sharp> v\\<rbrakk>\n    \\<Longrightarrow> atom a \\<sharp> GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case GNil"], ["proof (state)\nthis:\n  atom a \\<sharp> GNil\n  atom a \\<sharp> v\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom a \\<sharp> GNil; atom a \\<sharp> v\\<rbrakk>\n    \\<Longrightarrow> atom a \\<sharp> GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom a \\<sharp> GNil\n  atom a \\<sharp> v", "show ?case"], ["proof (prove)\nusing this:\n  atom a \\<sharp> GNil\n  atom a \\<sharp> v\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  atom a \\<sharp> GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case (GCons xbc G)"], ["proof (state)\nthis:\n  \\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  atom a \\<sharp> xbc #\\<^sub>\\<Gamma> G\n  atom a \\<sharp> v\n\ngoal (1 subgoal):\n 1. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "obtain x' and b' and c' where xbc: \"xbc = (x',b',c')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>x' b' c'.\n        xbc = (x', b', c') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using prod_cases3"], ["proof (prove)\nusing this:\n  (\\<And>a b c. ?y = (a, b, c) \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>x' b' c'.\n        xbc = (x', b', c') \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  xbc = (x', b', c')\n\ngoal (1 subgoal):\n 1. \\<And>x1 G.\n       \\<lbrakk>\\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        atom a \\<sharp> x1 #\\<^sub>\\<Gamma> G; atom a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          a \\<sharp> (x1 #\\<^sub>\\<Gamma>\nG)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "proof(cases \"x=x'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. x = x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case True"], ["proof (state)\nthis:\n  x = x'\n\ngoal (2 subgoals):\n 1. x = x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "have \"atom a \\<sharp> G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> G", "using GCons fresh_GCons"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  atom a \\<sharp> xbc #\\<^sub>\\<Gamma> G\n  atom a \\<sharp> v\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> G", "by blast"], ["proof (state)\nthis:\n  atom a \\<sharp> G\n\ngoal (2 subgoals):\n 1. x = x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "thus ?thesis"], ["proof (prove)\nusing this:\n  atom a \\<sharp> G\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using subst_gv.simps(2)[of  x' b' c' G] GCons xbc True"], ["proof (prove)\nusing this:\n  atom a \\<sharp> G\n  ((x', b', c') #\\<^sub>\\<Gamma> G)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = x' then G\n   else (x', b', c'[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        G[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  \\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  atom a \\<sharp> xbc #\\<^sub>\\<Gamma> G\n  atom a \\<sharp> v\n  xbc = (x', b', c')\n  x = x'\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by presburger"], ["proof (state)\nthis:\n  atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case False"], ["proof (state)\nthis:\n  x \\<noteq> x'\n\ngoal (1 subgoal):\n 1. x \\<noteq> x' \\<Longrightarrow>\n    atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  x \\<noteq> x'", "show ?thesis"], ["proof (prove)\nusing this:\n  x \\<noteq> x'\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using subst_gv.simps(2)[of  x' b' c' G] GCons xbc False fresh_GCons"], ["proof (prove)\nusing this:\n  x \\<noteq> x'\n  ((x', b', c') #\\<^sub>\\<Gamma> G)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = x' then G\n   else (x', b', c'[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        G[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  \\<lbrakk>atom a \\<sharp> G; atom a \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom a \\<sharp> G[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  atom a \\<sharp> xbc #\\<^sub>\\<Gamma> G\n  atom a \\<sharp> v\n  xbc = (x', b', c')\n  x \\<noteq> x'\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  atom a \\<sharp> (xbc #\\<^sub>\\<Gamma> G)[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_gv_flip: \n  fixes x::x and xa::x and z::x and c::c and b::b and \\<Gamma>::\\<Gamma>\n  assumes \"atom xa \\<sharp> ((x, b, c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>)\"  and \"atom xa \\<sharp> \\<Gamma>\" and \"atom x \\<sharp> \\<Gamma>\" and \"atom x \\<sharp> (z, c)\" and \"atom xa \\<sharp> (z, c)\"\n  shows \"(x \\<leftrightarrow> xa) \\<bullet>  ((x, b, c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>) = (xa, b, c[z::=V_var xa]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "have  \"(x \\<leftrightarrow> xa) \\<bullet>  ((x, b, c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>) =  (( (x \\<leftrightarrow> xa) \\<bullet>  x, b, (x \\<leftrightarrow> xa) \\<bullet>  c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> ((x \\<leftrightarrow> xa) \\<bullet>  \\<Gamma>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "using subst Cons_eqvt flip_fresh_fresh"], ["proof (prove)\nusing this:\n  \\<lbrakk>?s = ?t; ?P ?s\\<rbrakk> \\<Longrightarrow> ?P ?t\n  ?p \\<bullet> (?x # ?xs) = ?p \\<bullet> ?x # ?p \\<bullet> ?xs\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "using G_cons_flip"], ["proof (prove)\nusing this:\n  \\<lbrakk>?s = ?t; ?P ?s\\<rbrakk> \\<Longrightarrow> ?P ?t\n  ?p \\<bullet> (?x # ?xs) = ?p \\<bullet> ?x # ?p \\<bullet> ?xs\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n  (?x \\<leftrightarrow> ?x') \\<bullet> ((?x'', ?b, ?c) #\\<^sub>\\<Gamma>\n  ?\\<Gamma>) =\n  ((?x \\<leftrightarrow> ?x') \\<bullet> ?x'', ?b,\n   (?x \\<leftrightarrow> ?x') \\<bullet> ?c) #\\<^sub>\\<Gamma>\n  (?x \\<leftrightarrow> ?x') \\<bullet> ?\\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "by simp"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n\\<Gamma>) =\n  ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "also"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n\\<Gamma>) =\n  ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "have \"... = ((xa, b, (x \\<leftrightarrow> xa) \\<bullet> c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> ((x \\<leftrightarrow> xa) \\<bullet>  \\<Gamma>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "using assms"], ["proof (prove)\nusing this:\n  atom\n   xa \\<sharp> (x, b, c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n               \\<Gamma>\n  atom xa \\<sharp> \\<Gamma>\n  atom x \\<sharp> \\<Gamma>\n  atom x \\<sharp> (z, c)\n  atom xa \\<sharp> (z, c)\n\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "by fastforce"], ["proof (state)\nthis:\n  ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n  (xa, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "also"], ["proof (state)\nthis:\n  ((x \\<leftrightarrow> xa) \\<bullet> x, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n  (xa, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "have \"... =  ((xa, b,  c[z::=V_var xa]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> ((x \\<leftrightarrow> xa) \\<bullet>  \\<Gamma>))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (xa, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "using assms subst_cv_var_flip"], ["proof (prove)\nusing this:\n  atom\n   xa \\<sharp> (x, b, c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n               \\<Gamma>\n  atom xa \\<sharp> \\<Gamma>\n  atom x \\<sharp> \\<Gamma>\n  atom x \\<sharp> (z, c)\n  atom xa \\<sharp> (z, c)\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. (xa, b,\n     (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>", "by fastforce"], ["proof (state)\nthis:\n  (xa, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "also"], ["proof (state)\nthis:\n  (xa, b,\n   (x \\<leftrightarrow> xa) \\<bullet> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "have \"... =  ((xa, b,  c[z::=V_var xa]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "using assms flip_fresh_fresh"], ["proof (prove)\nusing this:\n  atom\n   xa \\<sharp> (x, b, c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n               \\<Gamma>\n  atom xa \\<sharp> \\<Gamma>\n  atom x \\<sharp> \\<Gamma>\n  atom x \\<sharp> (z, c)\n  atom xa \\<sharp> (z, c)\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (1 subgoal):\n 1. (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "by blast"], ["proof (state)\nthis:\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  (x \\<leftrightarrow> xa) \\<bullet> \\<Gamma> =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "finally"], ["proof (chain)\npicking this:\n  (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n\\<Gamma>) =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "show ?thesis"], ["proof (prove)\nusing this:\n  (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n\\<Gamma>) =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n   c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>) =\n    (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>", "by simp"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> ((x, b,\n c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n\\<Gamma>) =\n  (xa, b, c[z::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> \\<Gamma>\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Types\\<close>"], ["", "nominal_function subst_tv :: \"\\<tau> \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> \\<tau>\" where\n  \"atom z \\<sharp> (x,v) \\<Longrightarrow> subst_tv  \\<lbrace> z : b | c \\<rbrace> x v  = \\<lbrace> z : b | c[x::=v]\\<^sub>c\\<^sub>v \\<rbrace>\""], ["proof (prove)\ngoal (4 subgoals):\n 1. eqvt subst_tv_graph_aux\n 2. \\<And>x y. subst_tv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       (\\<And>z xa v b c.\n           \\<lbrakk>atom z \\<sharp> (xa, v);\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 4. \\<And>z x v b c za xa va ba ca.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (xa, va);\n        (\\<lbrace> z : b  | c \\<rbrace>, x, v) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> z : b  | c[x::=v]\\<^sub>c\\<^sub>v \\<rbrace> =\n                         \\<lbrace> za : ba  | ca[xa::=va]\\<^sub>c\\<^sub>v \\<rbrace>", "apply (simp add: eqvt_def subst_tv_graph_aux_def )"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y. subst_tv_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       (\\<And>z xa v b c.\n           \\<lbrakk>atom z \\<sharp> (xa, v);\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 3. \\<And>z x v b c za xa va ba ca.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (xa, va);\n        (\\<lbrace> z : b  | c \\<rbrace>, x, v) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> z : b  | c[x::=v]\\<^sub>c\\<^sub>v \\<rbrace> =\n                         \\<lbrace> za : ba  | ca[xa::=va]\\<^sub>c\\<^sub>v \\<rbrace>", "apply auto"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P a aa b.\n       (\\<And>z ba c.\n           \\<lbrakk>atom z \\<sharp> (aa, b);\n            a = \\<lbrace> z : ba  | c \\<rbrace>\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x v c za ca cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, ca) \\<longrightarrow>\n           atom cb \\<sharp> (z, za, c, ca) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        atom cb \\<sharp> (c, v, x, ca);\n        atom\n         cb \\<sharp> (z, za, c[x::=v]\\<^sub>c\\<^sub>v,\n                      ca[x::=v]\\<^sub>c\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "subgoal for P a aa b"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z ba c.\n        \\<lbrakk>atom z \\<sharp> (aa, b);\n         a = \\<lbrace> z : ba  | c \\<rbrace>\\<rbrakk>\n        \\<Longrightarrow> P) \\<Longrightarrow>\n    P", "apply(rule_tac y=a and c=\"(aa,b)\" in \\<tau>.strong_exhaust)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 x3.\n       \\<lbrakk>\\<And>z ba c.\n                   \\<lbrakk>atom z \\<sharp> (aa, b);\n                    a = \\<lbrace> z : ba  | c \\<rbrace>\\<rbrakk>\n                   \\<Longrightarrow> P;\n        {atom x1} \\<sharp>* (aa, b);\n        a = \\<lbrace> x1 : x2  | x3 \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> P", "by (auto simp: eqvt_at_def fresh_star_def fresh_Pair fresh_at_base)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, ca) \\<longrightarrow>\n           atom cb \\<sharp> (z, za, c, ca) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        atom cb \\<sharp> (c, v, x, ca);\n        atom\n         cb \\<sharp> (z, za, c[x::=v]\\<^sub>c\\<^sub>v,\n                      ca[x::=v]\\<^sub>c\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "apply (auto simp: eqvt_at_def fresh_star_def fresh_Pair fresh_at_base)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "fix z :: x and c :: c and za :: x and xa :: x and va :: v and ca :: c and cb :: x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "assume a1: \"atom za \\<sharp> va\"  and  a2: \"atom z \\<sharp> va\" and a3: \"\\<forall>cb. atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow> cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow> c[z::=V_var cb]\\<^sub>c\\<^sub>v = ca[za::=V_var cb]\\<^sub>c\\<^sub>v\""], ["proof (state)\nthis:\n  atom za \\<sharp> va\n  atom z \\<sharp> va\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "assume a4: \"atom cb \\<sharp> c\" and a5: \"atom cb \\<sharp> ca\" and a6: \"cb \\<noteq> z\" and a7: \"cb \\<noteq> za\" and \"atom cb \\<sharp> va\" and a8: \"za \\<noteq> xa\" and a9: \"z \\<noteq> xa\""], ["proof (state)\nthis:\n  atom cb \\<sharp> c\n  atom cb \\<sharp> ca\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> va\n  za \\<noteq> xa\n  z \\<noteq> xa\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "assume a10:\"cb \\<noteq> xa\""], ["proof (state)\nthis:\n  cb \\<noteq> xa\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "note assms = a10 a9 a8 a7 a6 a5 a4 a3 a2 a1"], ["proof (state)\nthis:\n  cb \\<noteq> xa\n  z \\<noteq> xa\n  za \\<noteq> xa\n  cb \\<noteq> za\n  cb \\<noteq> z\n  atom cb \\<sharp> ca\n  atom cb \\<sharp> c\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom z \\<sharp> va\n  atom za \\<sharp> va\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "have \"c[z::=V_var cb]\\<^sub>c\\<^sub>v = ca[za::=V_var cb]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  cb \\<noteq> xa\n  z \\<noteq> xa\n  za \\<noteq> xa\n  cb \\<noteq> za\n  cb \\<noteq> z\n  atom cb \\<sharp> ca\n  atom cb \\<sharp> c\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom z \\<sharp> va\n  atom za \\<sharp> va\n\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "hence \"c[z::=V_var cb]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v = ca[za::=V_var cb]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "have \"c[z::=V_var cb]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v = c[xa::=va]\\<^sub>c\\<^sub>v[z::=V_var cb]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using   subst_cv_commute_full[of z va xa \"V_var cb\" ]  assms fresh_def v.supp"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom z \\<sharp> va; atom xa \\<sharp> [ cb ]\\<^sup>v;\n   xa \\<noteq> z\\<rbrakk>\n  \\<Longrightarrow> ?c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n                    ?c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  cb \\<noteq> xa\n  z \\<noteq> xa\n  za \\<noteq> xa\n  cb \\<noteq> za\n  cb \\<noteq> z\n  atom cb \\<sharp> ca\n  atom cb \\<sharp> c\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom z \\<sharp> va\n  atom za \\<sharp> va\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  supp [ ?l ]\\<^sup>v = supp ?l\n  supp [ ?x ]\\<^sup>v = supp ?x\n  supp [ ?v1.0 , ?v2.0 ]\\<^sup>v = supp ?v1.0 \\<union> supp ?v2.0\n  supp (V_cons ?list1.0 ?list2.0 ?v) =\n  supp ?list1.0 \\<union> (supp ?list2.0 \\<union> supp ?v)\n  supp (V_consp ?list1.0 ?list2.0 ?b ?v) =\n  supp ?list1.0 \\<union> (supp ?list2.0 \\<union> (supp ?b \\<union> supp ?v))\n\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by fastforce"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "have \"ca[za::=V_var cb]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v = ca[xa::=va]\\<^sub>c\\<^sub>v[za::=V_var cb]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using   subst_cv_commute_full[of za va xa \"V_var cb\" ]  assms fresh_def v.supp"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom za \\<sharp> va; atom xa \\<sharp> [ cb ]\\<^sup>v;\n   xa \\<noteq> za\\<rbrakk>\n  \\<Longrightarrow> ?c[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n                    ?c[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  cb \\<noteq> xa\n  z \\<noteq> xa\n  za \\<noteq> xa\n  cb \\<noteq> za\n  cb \\<noteq> z\n  atom cb \\<sharp> ca\n  atom cb \\<sharp> c\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom z \\<sharp> va\n  atom za \\<sharp> va\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  supp [ ?l ]\\<^sup>v = supp ?l\n  supp [ ?x ]\\<^sup>v = supp ?x\n  supp [ ?v1.0 , ?v2.0 ]\\<^sup>v = supp ?v1.0 \\<union> supp ?v2.0\n  supp (V_cons ?list1.0 ?list2.0 ?v) =\n  supp ?list1.0 \\<union> (supp ?list2.0 \\<union> supp ?v)\n  supp (V_consp ?list1.0 ?list2.0 ?b ?v) =\n  supp ?list1.0 \\<union> (supp ?list2.0 \\<union> (supp ?b \\<union> supp ?v))\n\ngoal (1 subgoal):\n 1. ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by fastforce"], ["proof (state)\nthis:\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c za ca cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> v; cb \\<noteq> x; atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "ultimately"], ["proof (chain)\npicking this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "show \"c[xa::=va]\\<^sub>c\\<^sub>v[z::=V_var cb]\\<^sub>c\\<^sub>v = ca[xa::=va]\\<^sub>c\\<^sub>v[za::=V_var cb]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_tv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_tv_abbrev :: \"\\<tau> \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> \\<tau>\" (\"_[_::=_]\\<^sub>\\<tau>\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"t[x::=v]\\<^sub>\\<tau>\\<^sub>v  \\<equiv> subst_tv t x v\""], ["", "lemma size_subst_tv [simp]: \"size ( subst_tv A i x ) = size A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size A[i::=x]\\<^sub>\\<tau>\\<^sub>v = size A", "proof (nominal_induct A avoiding: i x  rule: \\<tau>.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> size\n                          \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n                         size \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "case (T_refined_type x' b' c')"], ["proof (state)\nthis:\n  atom x' \\<sharp> i\n  atom x' \\<sharp> x\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> size\n                          \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n                         size \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "then"], ["proof (chain)\npicking this:\n  atom x' \\<sharp> i\n  atom x' \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> i\n  atom x' \\<sharp> x\n\ngoal (1 subgoal):\n 1. size \\<lbrace> x' : b'  | c' \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n    size \\<lbrace> x' : b'  | c' \\<rbrace>", "by auto"], ["proof (state)\nthis:\n  size \\<lbrace> x' : b'  | c' \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n  size \\<lbrace> x' : b'  | c' \\<rbrace>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma forget_subst_tv [simp]: \"atom a \\<sharp> A \\<Longrightarrow> subst_tv A a x  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> A \\<Longrightarrow> A[a::=x]\\<^sub>\\<tau>\\<^sub>v = A", "apply (nominal_induct A avoiding: a x rule: \\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x;\n        atom a \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[a::=x]\\<^sub>\\<tau>\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "apply(auto simp: fresh_at_base)"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma subst_tv_id [simp]: \"subst_tv A a (V_var a) = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A[a::=[ a ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v = A", "by (nominal_induct A avoiding: a rule: \\<tau>.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma fresh_subst_tv_if [simp]:\n  \"j \\<sharp> (subst_tv A i x ) \\<longleftrightarrow> (atom i \\<sharp> A \\<and> j \\<sharp> A) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> A[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n    (atom i \\<sharp> A \\<and> j \\<sharp> A \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> A \\<or> j = atom i))", "apply (nominal_induct A avoiding: i x rule: \\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "using fresh_def supp_b_empty x_fresh_b"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  atom ?x \\<notin> supp ?b\n  atom ?x \\<sharp> ?b\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>\\<tau>\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "by auto"], ["", "lemma subst_tv_commute [simp]:\n  \"atom y \\<sharp> \\<tau> \\<Longrightarrow> (\\<tau>[x::= t]\\<^sub>\\<tau>\\<^sub>v)[y::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>[x::= t[y::=v]\\<^sub>v\\<^sub>v]\\<^sub>\\<tau>\\<^sub>v \""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom y \\<sharp> \\<tau> \\<Longrightarrow>\n    \\<tau>[x::=t]\\<^sub>\\<tau>\\<^sub>v[y::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>[x::=t[y::=v]\\<^sub>v\\<^sub>v]\\<^sub>\\<tau>\\<^sub>v", "by (nominal_induct \\<tau> avoiding: x y t v rule: \\<tau>.strong_induct) (auto simp: fresh_at_base)"], ["", "lemma subst_tv_var_flip [simp]:\n  fixes x::x and xa::x and \\<tau>::\\<tau>\n  assumes \"atom xa \\<sharp> \\<tau>\"\n  shows \"(x \\<leftrightarrow> xa) \\<bullet> \\<tau> = \\<tau>[x::=V_var xa]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "obtain z::x and b and c where zbc: \"atom z \\<sharp> (x,xa, V_var xa) \\<and> \\<tau> = \\<lbrace> z : b | c \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z"], ["proof (prove)\nusing this:\n  (\\<And>z b c.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis prod.inject subst_tv.cases)"], ["proof (state)\nthis:\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "hence \"atom xa \\<notin> supp c - { atom z }\""], ["proof (prove)\nusing this:\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. atom xa \\<notin> supp c - {atom z}", "using \\<tau>.supp[of z b c] fresh_def supp_b_empty assms"], ["proof (prove)\nusing this:\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n  supp \\<lbrace> z : b  | c \\<rbrace> =\n  supp c - set [atom z] \\<union> supp b\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  atom ?x \\<notin> supp ?b\n  atom xa \\<sharp> \\<tau>\n\ngoal (1 subgoal):\n 1. atom xa \\<notin> supp c - {atom z}", "by  auto"], ["proof (state)\nthis:\n  atom xa \\<notin> supp c - {atom z}\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  atom xa \\<notin> supp c - {atom z}\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "have \"xa \\<noteq> z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. xa \\<noteq> z", "using zbc fresh_prod3"], ["proof (prove)\nusing this:\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n  ?x \\<sharp> (?a, ?b, ?c) =\n  (?x \\<sharp> ?a \\<and> ?x \\<sharp> ?b \\<and> ?x \\<sharp> ?c)\n\ngoal (1 subgoal):\n 1. xa \\<noteq> z", "by force"], ["proof (state)\nthis:\n  xa \\<noteq> z\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "ultimately"], ["proof (chain)\npicking this:\n  atom xa \\<notin> supp c - {atom z}\n  xa \\<noteq> z", "have xaf: \"atom xa \\<sharp> c\""], ["proof (prove)\nusing this:\n  atom xa \\<notin> supp c - {atom z}\n  xa \\<noteq> z\n\ngoal (1 subgoal):\n 1. atom xa \\<sharp> c", "using fresh_def"], ["proof (prove)\nusing this:\n  atom xa \\<notin> supp c - {atom z}\n  xa \\<noteq> z\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n\ngoal (1 subgoal):\n 1. atom xa \\<sharp> c", "by auto"], ["proof (state)\nthis:\n  atom xa \\<sharp> c\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "have \"(x \\<leftrightarrow> xa) \\<bullet> \\<tau> = \\<lbrace> z : b | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace>", "by (metis \\<tau>.perm_simps empty_iff flip_at_base_simps(3) flip_fresh_fresh fresh_PairD(1) fresh_PairD(2) fresh_def not_self_fresh supp_b_empty v.fresh(2) zbc)"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "also"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "have \"... =  \\<lbrace> z : b | c[x::=V_var xa]\\<^sub>c\\<^sub>v \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace> =\n    \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "using subst_cv_v_flip xaf"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  ((?x \\<leftrightarrow> ?z) \\<bullet> ?c)[?x::=?v]\\<^sub>c\\<^sub>v =\n  ?c[?z::=?v]\\<^sub>c\\<^sub>v\n  atom xa \\<sharp> c\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace> =\n    \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "by (metis permute_flip_cancel permute_flip_cancel2 subst_cv_var_flip)"], ["proof (state)\nthis:\n  \\<lbrace> z : b  | (x \\<leftrightarrow> xa) \\<bullet> c \\<rbrace> =\n  \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "show ?thesis"], ["proof (prove)\nusing this:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "using subst_tv.simps zbc"], ["proof (prove)\nusing this:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "using fresh_PairD(1) not_self_fresh"], ["proof (prove)\nusing this:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<lbrace> z : b  | c[x::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  atom z \\<sharp> (x, xa, [ xa ]\\<^sup>v) \\<and>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace>\n  ?a \\<sharp> (?x, ?y) \\<Longrightarrow> ?a \\<sharp> ?x\n  atom ?x \\<sharp> ?x = False\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n    \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "by force"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> xa) \\<bullet> \\<tau> =\n  \\<tau>[x::=[ xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "instantiation \\<tau> :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_tv\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(\\<tau>, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::\\<tau>"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "proof(nominal_induct t avoiding: i x rule:\\<tau>.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "case (T_refined_type z b c)"], ["proof (state)\nthis:\n  atom z \\<sharp> i\n  atom z \\<sharp> x\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "hence \" j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v  =  j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace>\""], ["proof (prove)\nusing this:\n  atom z \\<sharp> i\n  atom z \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n    j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace>", "using subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  atom z \\<sharp> i\n  atom z \\<sharp> x\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n    j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace>", "by simp"], ["proof (state)\nthis:\n  j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n  j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "also"], ["proof (state)\nthis:\n  j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n  j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "have \"...  = (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and> j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j \\<sharp> x \\<and> (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace> =\n    (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n     j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n     j \\<sharp> x \\<and>\n     (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))", "unfolding \\<tau>.fresh"], ["proof (prove)\ngoal (1 subgoal):\n 1. ((j \\<sharp> c[i::=x]\\<^sub>c\\<^sub>v \\<or> j \\<in> set [atom z]) \\<and>\n     j \\<sharp> b) =\n    (((atom i \\<sharp> c \\<or> atom i \\<in> set [atom z]) \\<and>\n      atom i \\<sharp> b) \\<and>\n     (j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n     j \\<sharp> x \\<and>\n     ((j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n      j = atom i))", "using subst_v_c_def fresh_subst_v_if"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  ?y \\<sharp> ?a[?x::=?v]\\<^sub>v =\n  (atom ?x \\<sharp> ?a \\<and> ?y \\<sharp> ?a \\<or>\n   ?y \\<sharp> ?v \\<and> (?y \\<sharp> ?a \\<or> ?y = atom ?x))\n\ngoal (1 subgoal):\n 1. ((j \\<sharp> c[i::=x]\\<^sub>c\\<^sub>v \\<or> j \\<in> set [atom z]) \\<and>\n     j \\<sharp> b) =\n    (((atom i \\<sharp> c \\<or> atom i \\<in> set [atom z]) \\<and>\n      atom i \\<sharp> b) \\<and>\n     (j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n     j \\<sharp> x \\<and>\n     ((j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n      j = atom i))", "using T_refined_type.hyps(1) T_refined_type.hyps(2) x_fresh_b"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  ?y \\<sharp> ?a[?x::=?v]\\<^sub>v =\n  (atom ?x \\<sharp> ?a \\<and> ?y \\<sharp> ?a \\<or>\n   ?y \\<sharp> ?v \\<and> (?y \\<sharp> ?a \\<or> ?y = atom ?x))\n  atom z \\<sharp> i\n  atom z \\<sharp> x\n  atom ?x \\<sharp> ?b\n\ngoal (1 subgoal):\n 1. ((j \\<sharp> c[i::=x]\\<^sub>c\\<^sub>v \\<or> j \\<in> set [atom z]) \\<and>\n     j \\<sharp> b) =\n    (((atom i \\<sharp> c \\<or> atom i \\<in> set [atom z]) \\<and>\n      atom i \\<sharp> b) \\<and>\n     (j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n     j \\<sharp> x \\<and>\n     ((j \\<sharp> c \\<or> j \\<in> set [atom z]) \\<and> j \\<sharp> b \\<or>\n      j = atom i))", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> \\<lbrace> z : b  | c[i::=x]\\<^sub>c\\<^sub>v \\<rbrace> =\n  (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n   j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n   j \\<sharp> x \\<and>\n   (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<and>\n                          j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace> \\<or>\n                           j = atom i))", "finally"], ["proof (chain)\npicking this:\n  j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n  (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n   j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n   j \\<sharp> x \\<and>\n   (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n  (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n   j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n   j \\<sharp> x \\<and>\n   (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))\n\ngoal (1 subgoal):\n 1. j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n    (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n     j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n     j \\<sharp> x \\<and>\n     (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> \\<lbrace> z : b  | c \\<rbrace>[i::=x]\\<^sub>v =\n  (atom i \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<and>\n   j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or>\n   j \\<sharp> x \\<and>\n   (j \\<sharp> \\<lbrace> z : b  | c \\<rbrace> \\<or> j = atom i))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::\\<tau> and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "apply(nominal_induct tm avoiding: a x rule:\\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x;\n        atom a \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[a::=x]\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "using subst_v_c_def forget_subst_v subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x;\n        atom a \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[a::=x]\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::\\<tau>"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "apply(nominal_induct tm avoiding: a rule:\\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a.\n       atom x1a \\<sharp> a \\<Longrightarrow>\n       \\<lbrace> x1a : x2a  | x3a \\<rbrace>[a::=[ a ]\\<^sup>v]\\<^sub>v =\n       \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "using subst_v_c_def forget_subst_v subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a.\n       atom x1a \\<sharp> a \\<Longrightarrow>\n       \\<lbrace> x1a : x2a  | x3a \\<rbrace>[a::=[ a ]\\<^sup>v]\\<^sub>v =\n       \\<lbrace> x1a : x2a  | x3a \\<rbrace>", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::\\<tau>"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "apply(nominal_induct tm avoiding: a x rule:\\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> p \\<bullet> t1[x1::=v]\\<^sub>v =\n                         (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using subst_v_c_def forget_subst_v subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> p \\<bullet> t1[x1::=v]\\<^sub>v =\n                         (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::\\<tau> and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "apply(nominal_induct c avoiding: z x rule:\\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a z x.\n       \\<lbrakk>atom x1a \\<sharp> z; atom x1a \\<sharp> x;\n        atom x \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> \\<lbrace> x1a : x2a  | x3a \\<rbrace> =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=[ x ]\\<^sup>v]\\<^sub>v", "using subst_v_c_def flip_subst_v subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?c = ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a z x.\n       \\<lbrakk>atom x1a \\<sharp> z; atom x1a \\<sharp> x;\n        atom x \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> \\<lbrace> x1a : x2a  | x3a \\<rbrace> =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=[ x ]\\<^sup>v]\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::\\<tau> and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "apply(nominal_induct c avoiding:  x v z rule:\\<tau>.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x v z.\n       \\<lbrakk>atom x1a \\<sharp> x; atom x1a \\<sharp> v;\n        atom x1a \\<sharp> z;\n        atom x \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=v]\\<^sub>v", "using subst_v_c_def  subst_tv.simps subst_v_\\<tau>_def fresh_Pair"], ["proof (prove)\nusing this:\n  subst_v = subst_cv_abbrev\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x v z.\n       \\<lbrakk>atom x1a \\<sharp> x; atom x1a \\<sharp> v;\n        atom x1a \\<sharp> z;\n        atom x \\<sharp> \\<lbrace> x1a : x2a  | x3a \\<rbrace>\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=v]\\<^sub>v", "by (metis flip_commute subst_tv_commute subst_tv_var_flip subst_v_\\<tau>_def subst_vv.simps(2))"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "lemma subst_tv_commute_full:\n  fixes c::\\<tau>\n  assumes \"atom z \\<sharp> v\" and \"atom x \\<sharp> w\" and \"x\\<noteq>z\"\n  shows \"(c[z::=w]\\<^sub>\\<tau>\\<^sub>v)[x::=v]\\<^sub>\\<tau>\\<^sub>v = (c[x::=v]\\<^sub>\\<tau>\\<^sub>v)[z::=w]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    c[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. c[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    c[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "proof(nominal_induct c avoiding: x v z w rule: \\<tau>.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x v z w.\n       \\<lbrakk>atom x1a \\<sharp> x; atom x1a \\<sharp> v;\n        atom x1a \\<sharp> z; atom x1a \\<sharp> w; atom z \\<sharp> v;\n        atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "case (T_refined_type x1a x2a x3a)"], ["proof (state)\nthis:\n  atom x1a \\<sharp> x\n  atom x1a \\<sharp> v\n  atom x1a \\<sharp> z\n  atom x1a \\<sharp> w\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x v z w.\n       \\<lbrakk>atom x1a \\<sharp> x; atom x1a \\<sharp> v;\n        atom x1a \\<sharp> z; atom x1a \\<sharp> w; atom z \\<sharp> v;\n        atom x \\<sharp> w; x \\<noteq> z\\<rbrakk>\n       \\<Longrightarrow> \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n                         \\<lbrace> x1a : x2a  | x3a \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom x1a \\<sharp> x\n  atom x1a \\<sharp> v\n  atom x1a \\<sharp> z\n  atom x1a \\<sharp> w\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z", "show ?case"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x\n  atom x1a \\<sharp> v\n  atom x1a \\<sharp> z\n  atom x1a \\<sharp> w\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n\ngoal (1 subgoal):\n 1. \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> x1a : x2a  | x3a \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "using subst_cv_commute_full"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x\n  atom x1a \\<sharp> v\n  atom x1a \\<sharp> z\n  atom x1a \\<sharp> w\n  atom z \\<sharp> v\n  atom x \\<sharp> w\n  x \\<noteq> z\n  \\<lbrakk>atom ?z \\<sharp> ?v; atom ?x \\<sharp> ?w; ?x \\<noteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?c[?z::=?w]\\<^sub>c\\<^sub>v[?x::=?v]\\<^sub>c\\<^sub>v =\n                    ?c[?x::=?v]\\<^sub>c\\<^sub>v[?z::=?w]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> x1a : x2a  | x3a \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  \\<lbrace> x1a : x2a  | x3a \\<rbrace>[z::=w]\\<^sub>\\<tau>\\<^sub>v[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> x1a : x2a  | x3a \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=w]\\<^sub>\\<tau>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma type_eq_subst_eq:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = \\<lbrace> z2 : b2  |  c2 \\<rbrace>\"\n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "using subst_v_flip_eq_two[of z1 c1 z2 c2 v] \\<tau>.eq_iff assms subst_v_c_def"], ["proof (prove)\nusing this:\n  [[atom z1]]lst. c1 = [[atom z2]]lst. c2 \\<Longrightarrow>\n  c1[z1::=v]\\<^sub>v = c2[z2::=v]\\<^sub>v\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "by simp"], ["", "text \\<open>Extract constraint from a type. We cannot just project out the constraint as this would\nmean alpha-equivalent types give different answers \\<close>"], ["", "nominal_function c_of :: \"\\<tau> \\<Rightarrow> x \\<Rightarrow> c\" where\n  \"atom z \\<sharp> x \\<Longrightarrow> c_of (T_refined_type z b c) x = c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (4 subgoals):\n 1. eqvt c_of_graph_aux\n 2. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 4. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "proof(goal_cases)"], ["proof (state)\ngoal (4 subgoals):\n 1. eqvt c_of_graph_aux\n 2. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 4. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case 1"], ["proof (state)\nthis:\n  \n\ngoal (4 subgoals):\n 1. eqvt c_of_graph_aux\n 2. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 4. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. eqvt c_of_graph_aux", "using eqvt_def c_of_graph_aux_def"], ["proof (prove)\nusing this:\n  eqvt ?f \\<equiv> \\<forall>p. p \\<bullet> ?f = ?f\n  c_of_graph_aux \\<equiv>\n  lfp (\\<lambda>p x1 x2.\n          \\<exists>c_of_aux z x b c.\n             x1 = (\\<lbrace> z : b  | c \\<rbrace>, x) \\<and>\n             x2 = c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n             atom z \\<sharp> x)\n\ngoal (1 subgoal):\n 1. eqvt c_of_graph_aux", "by force"], ["proof (state)\nthis:\n  eqvt c_of_graph_aux\n\ngoal (3 subgoals):\n 1. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 3. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 3. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case (2 x y)"], ["proof (state)\nthis:\n  c_of_graph x y\n\ngoal (3 subgoals):\n 1. \\<And>x y. c_of_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 3. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  c_of_graph x y", "show ?case"], ["proof (prove)\nusing this:\n  c_of_graph x y\n\ngoal (1 subgoal):\n 1. True", "using eqvt_def c_of_graph_aux_def"], ["proof (prove)\nusing this:\n  c_of_graph x y\n  eqvt ?f \\<equiv> \\<forall>p. p \\<bullet> ?f = ?f\n  c_of_graph_aux \\<equiv>\n  lfp (\\<lambda>p x1 x2.\n          \\<exists>c_of_aux z x b c.\n             x1 = (\\<lbrace> z : b  | c \\<rbrace>, x) \\<and>\n             x2 = c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n             atom z \\<sharp> x)\n\ngoal (1 subgoal):\n 1. True", "by force"], ["proof (state)\nthis:\n  True\n\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case (3 P x)"], ["proof (state)\nthis:\n  \\<lbrakk>atom ?z \\<sharp> ?x;\n   x = (\\<lbrace> ?z : ?b  | ?c \\<rbrace>, ?x)\\<rbrakk>\n  \\<Longrightarrow> P\n\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>atom ?z \\<sharp> ?x;\n   x = (\\<lbrace> ?z : ?b  | ?c \\<rbrace>, ?x)\\<rbrakk>\n  \\<Longrightarrow> P", "obtain x1::\\<tau> and x2::x where *:\"x = (x1,x2)\""], ["proof (prove)\nusing this:\n  \\<lbrakk>atom ?z \\<sharp> ?x;\n   x = (\\<lbrace> ?z : ?b  | ?c \\<rbrace>, ?x)\\<rbrakk>\n  \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. (\\<And>x1 x2. x = (x1, x2) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by force"], ["proof (state)\nthis:\n  x = (x1, x2)\n\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "obtain z' and b' and c' where \"x1 = \\<lbrace> z' : b' | c' \\<rbrace> \\<and> atom z' \\<sharp> x2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z' b' c'.\n        x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> x2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z"], ["proof (prove)\nusing this:\n  (\\<And>z b c.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z' b' c'.\n        x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> x2 \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and> atom z' \\<sharp> x2\n\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa b c.\n           \\<lbrakk>atom z \\<sharp> xa;\n            x = (\\<lbrace> z : b  | c \\<rbrace>, xa)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and> atom z' \\<sharp> x2", "show ?case"], ["proof (prove)\nusing this:\n  x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and> atom z' \\<sharp> x2\n\ngoal (1 subgoal):\n 1. P", "using 3 *"], ["proof (prove)\nusing this:\n  x1 = \\<lbrace> z' : b'  | c' \\<rbrace> \\<and> atom z' \\<sharp> x2\n  \\<lbrakk>atom ?z \\<sharp> ?x;\n   x = (\\<lbrace> ?z : ?b  | ?c \\<rbrace>, ?x)\\<rbrakk>\n  \\<Longrightarrow> P\n  x = (x1, x2)\n\ngoal (1 subgoal):\n 1. P", "by auto"], ["proof (state)\nthis:\n  P\n\ngoal (1 subgoal):\n 1. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "case (4 z1 x1 b1 c1 z2 x2 b2 c2)"], ["proof (state)\nthis:\n  atom z1 \\<sharp> x1\n  atom z2 \\<sharp> x2\n  (\\<lbrace> z1 : b1  | c1 \\<rbrace>, x1) =\n  (\\<lbrace> z2 : b2  | c2 \\<rbrace>, x2)\n\ngoal (1 subgoal):\n 1. \\<And>z x b c za xa ba ca.\n       \\<lbrakk>atom z \\<sharp> x; atom za \\<sharp> xa;\n        (\\<lbrace> z : b  | c \\<rbrace>, x) =\n        (\\<lbrace> za : ba  | ca \\<rbrace>, xa)\\<rbrakk>\n       \\<Longrightarrow> c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[za::=[ xa ]\\<^sup>v]\\<^sub>c\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom z1 \\<sharp> x1\n  atom z2 \\<sharp> x2\n  (\\<lbrace> z1 : b1  | c1 \\<rbrace>, x1) =\n  (\\<lbrace> z2 : b2  | c2 \\<rbrace>, x2)", "show ?case"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> x1\n  atom z2 \\<sharp> x2\n  (\\<lbrace> z1 : b1  | c1 \\<rbrace>, x1) =\n  (\\<lbrace> z2 : b2  | c2 \\<rbrace>, x2)\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c2[z2::=[ x2 ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using subst_v_flip_eq_two \\<tau>.eq_iff"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> x1\n  atom z2 \\<sharp> x2\n  (\\<lbrace> z1 : b1  | c1 \\<rbrace>, x1) =\n  (\\<lbrace> z2 : b2  | c2 \\<rbrace>, x2)\n  [[atom ?z1.0]]lst. ?c1.0 = [[atom ?z2.0]]lst. ?c2.0 \\<Longrightarrow>\n  ?c1.0[?z1.0::=?b]\\<^sub>v = ?c2.0[?z2.0::=?b]\\<^sub>v\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n\ngoal (1 subgoal):\n 1. c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c2[z2::=[ x2 ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by (metis prod.inject type_eq_subst_eq)"], ["proof (state)\nthis:\n  c1[z1::=[ x1 ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c2[z2::=[ x2 ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All c_of_dom", "by lexicographic_order"], ["", "lemma c_of_eq:\n  shows  \"c_of \\<lbrace> x : b | c \\<rbrace> x = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "proof(nominal_induct \"\\<lbrace> x : b | c \\<rbrace>\" avoiding: x rule: \\<tau>.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "case (T_refined_type x' c')"], ["proof (state)\nthis:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "moreover"], ["proof (state)\nthis:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "hence \"c_of \\<lbrace> x' : b | c' \\<rbrace> x = c'[x'::=V_var x]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n\ngoal (1 subgoal):\n 1. c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n    c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using c_of.simps"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n    c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "moreover"], ["proof (state)\nthis:\n  c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "have \"\\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>", "using T_refined_type  \\<tau>.eq_iff"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n\ngoal (1 subgoal):\n 1. \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>", "by metis"], ["proof (state)\nthis:\n  \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "moreover"], ["proof (state)\nthis:\n  \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "have \"c'[x'::=V_var x]\\<^sub>c\\<^sub>v = c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c", "using  T_refined_type Abs1_eq_iff flip_subst_v subst_v_c_def"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n  ([{atom ?a}]set. ?x = [{atom ?b}]set. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([{atom ?a}]res. ?x = [{atom ?b}]res. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?c = ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c", "by (metis subst_cv_id)"], ["proof (state)\nthis:\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom x]]lst. c\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "ultimately"], ["proof (chain)\npicking this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n  c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c", "show ?case"], ["proof (prove)\nusing this:\n  atom x' \\<sharp> x\n  [[atom x']]lst. c' = [[atom x]]lst. c\n  c_of \\<lbrace> x' : b  | c' \\<rbrace> x =\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  \\<lbrace> x' : b  | c' \\<rbrace> = \\<lbrace> x : b  | c \\<rbrace>\n  c'[x'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c\n\ngoal (1 subgoal):\n 1. c_of \\<lbrace> x : b  | c \\<rbrace> x = c", "by auto"], ["proof (state)\nthis:\n  c_of \\<lbrace> x : b  | c \\<rbrace> x = c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma obtain_fresh_z_c_of:\n  fixes t::\"'b::fs\"\n  obtains z  where \"atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau> | c_of \\<tau> z \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z.\n        atom z \\<sharp> t \\<and>\n        \\<tau> =\n        \\<lbrace> z : b_of\n                       \\<tau>  | c_of \\<tau> z \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>z.\n        atom z \\<sharp> t \\<and>\n        \\<tau> =\n        \\<lbrace> z : b_of\n                       \\<tau>  | c_of \\<tau> z \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "obtain z and c where \"atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau> | c \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z c.\n        atom z \\<sharp> t \\<and>\n        \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z2"], ["proof (prove)\nusing this:\n  (\\<And>z c.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> = \\<lbrace> z : b_of ?\\<tau>  | c \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z c.\n        atom z \\<sharp> t \\<and>\n        \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        atom z \\<sharp> t \\<and>\n        \\<tau> =\n        \\<lbrace> z : b_of\n                       \\<tau>  | c_of \\<tau> z \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "moreover"], ["proof (state)\nthis:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        atom z \\<sharp> t \\<and>\n        \\<tau> =\n        \\<lbrace> z : b_of\n                       \\<tau>  | c_of \\<tau> z \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "hence \"c = c_of \\<tau> z\""], ["proof (prove)\nusing this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n\ngoal (1 subgoal):\n 1. c = c_of \\<tau> z", "using c_of.simps"], ["proof (prove)\nusing this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c = c_of \\<tau> z", "using c_of_eq"], ["proof (prove)\nusing this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  c_of \\<lbrace> ?x : ?b  | ?c \\<rbrace> ?x = ?c\n\ngoal (1 subgoal):\n 1. c = c_of \\<tau> z", "by metis"], ["proof (state)\nthis:\n  c = c_of \\<tau> z\n\ngoal (1 subgoal):\n 1. (\\<And>z.\n        atom z \\<sharp> t \\<and>\n        \\<tau> =\n        \\<lbrace> z : b_of\n                       \\<tau>  | c_of \\<tau> z \\<rbrace> \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "ultimately"], ["proof (chain)\npicking this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n  c = c_of \\<tau> z", "show ?thesis"], ["proof (prove)\nusing this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n  c = c_of \\<tau> z\n\ngoal (1 subgoal):\n 1. thesis", "using that"], ["proof (prove)\nusing this:\n  atom z \\<sharp> t \\<and> \\<tau> = \\<lbrace> z : b_of \\<tau>  | c \\<rbrace>\n  c = c_of \\<tau> z\n  atom ?z \\<sharp> t \\<and>\n  \\<tau> =\n  \\<lbrace> ?z : b_of \\<tau>  | c_of \\<tau> ?z \\<rbrace> \\<Longrightarrow>\n  thesis\n\ngoal (1 subgoal):\n 1. thesis", "by auto"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma c_of_fresh:\n  fixes x::x\n  assumes  \"atom x \\<sharp> (t,z)\" \n  shows \"atom x \\<sharp> c_of t z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "obtain z' and c' where z:\"t = \\<lbrace> z' : b_of t | c' \\<rbrace> \\<and> atom z' \\<sharp> (x,z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z' c'.\n        t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> (x, z) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z_c_of"], ["proof (prove)\nusing this:\n  (\\<And>z.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> =\n      \\<lbrace> z : b_of\n                     ?\\<tau>  | c_of ?\\<tau> z \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z' c'.\n        t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> (x, z) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "hence *:\"c_of t z = c'[z'::=V_var z]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. c_of t z = c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using c_of.simps fresh_Pair"], ["proof (prove)\nusing this:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. c_of t z = c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  c_of t z = c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "have \"(atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and> atom x \\<sharp> b_of t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and>\n    atom x \\<sharp> b_of t", "using \\<tau>.fresh assms z fresh_Pair"], ["proof (prove)\nusing this:\n  ?a \\<sharp> \\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n  ((?a \\<sharp> ?c \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?b)\n  atom x \\<sharp> (t, z)\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. (atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and>\n    atom x \\<sharp> b_of t", "by metis"], ["proof (state)\nthis:\n  (atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and>\n  atom x \\<sharp> b_of t\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "hence \"atom x \\<sharp> c'\""], ["proof (prove)\nusing this:\n  (atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and>\n  atom x \\<sharp> b_of t\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c'", "using fresh_Pair z fresh_at_base(2)"], ["proof (prove)\nusing this:\n  (atom x \\<sharp> c' \\<or> atom x \\<in> set [atom z']) \\<and>\n  atom x \\<sharp> b_of t\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  ?a \\<sharp> ?b = (?a \\<noteq> atom ?b)\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c'", "by fastforce"], ["proof (state)\nthis:\n  atom x \\<sharp> c'\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "moreover"], ["proof (state)\nthis:\n  atom x \\<sharp> c'\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "have \"atom x \\<sharp> V_var z\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> [ z ]\\<^sup>v", "using assms fresh_Pair v.fresh"], ["proof (prove)\nusing this:\n  atom x \\<sharp> (t, z)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  ?a \\<sharp> [ ?l ]\\<^sup>v = ?a \\<sharp> ?l\n  ?a \\<sharp> [ ?x ]\\<^sup>v = ?a \\<sharp> ?x\n  ?a \\<sharp> [ ?v1.0 , ?v2.0 ]\\<^sup>v =\n  (?a \\<sharp> ?v1.0 \\<and> ?a \\<sharp> ?v2.0)\n  ?a \\<sharp> V_cons ?list1.0 ?list2.0 ?v =\n  (?a \\<sharp> ?list1.0 \\<and> ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> V_consp ?list1.0 ?list2.0 ?b ?v =\n  (?a \\<sharp> ?list1.0 \\<and>\n   ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?b \\<and> ?a \\<sharp> ?v)\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> [ z ]\\<^sup>v", "by metis"], ["proof (state)\nthis:\n  atom x \\<sharp> [ z ]\\<^sup>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "ultimately"], ["proof (chain)\npicking this:\n  atom x \\<sharp> c'\n  atom x \\<sharp> [ z ]\\<^sup>v", "show ?thesis"], ["proof (prove)\nusing this:\n  atom x \\<sharp> c'\n  atom x \\<sharp> [ z ]\\<^sup>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "using assms fresh_subst_v_if[of \"atom x\" c' z' \"V_var z\"] subst_v_c_def *"], ["proof (prove)\nusing this:\n  atom x \\<sharp> c'\n  atom x \\<sharp> [ z ]\\<^sup>v\n  atom x \\<sharp> (t, z)\n  atom x \\<sharp> c'[z'::=[ z ]\\<^sup>v]\\<^sub>v =\n  (atom z' \\<sharp> c' \\<and> atom x \\<sharp> c' \\<or>\n   atom x \\<sharp> [ z ]\\<^sup>v \\<and>\n   (atom x \\<sharp> c' \\<or> atom x = atom z'))\n  subst_v = subst_cv_abbrev\n  c_of t z = c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c_of t z", "by metis"], ["proof (state)\nthis:\n  atom x \\<sharp> c_of t z\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma c_of_switch:\n  fixes z::x\n  assumes \"atom z \\<sharp> t\" \n  shows \"(c_of t z)[z::=V_var x]\\<^sub>c\\<^sub>v = c_of t x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "obtain z' and c' where z:\"t = \\<lbrace> z' : b_of t | c' \\<rbrace> \\<and> atom z' \\<sharp> (x,z)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z' c'.\n        t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> (x, z) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z_c_of"], ["proof (prove)\nusing this:\n  (\\<And>z.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> =\n      \\<lbrace> z : b_of\n                     ?\\<tau>  | c_of ?\\<tau> z \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z' c'.\n        t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and>\n        atom z' \\<sharp> (x, z) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "hence \"(atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and> atom z \\<sharp> b_of t\""], ["proof (prove)\nusing this:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n    atom z \\<sharp> b_of t", "using \\<tau>.fresh[of \"atom z\" z' \"b_of t\" c'] assms"], ["proof (prove)\nusing this:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  atom z \\<sharp> \\<lbrace> z' : b_of t  | c' \\<rbrace> =\n  ((atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n   atom z \\<sharp> b_of t)\n  atom z \\<sharp> t\n\ngoal (1 subgoal):\n 1. (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n    atom z \\<sharp> b_of t", "by metis"], ["proof (state)\nthis:\n  (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n  atom z \\<sharp> b_of t\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "moreover"], ["proof (state)\nthis:\n  (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n  atom z \\<sharp> b_of t\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "have \" atom z \\<notin> set [atom z']\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom z \\<notin> set [atom z']", "using z fresh_Pair"], ["proof (prove)\nusing this:\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. atom z \\<notin> set [atom z']", "by force"], ["proof (state)\nthis:\n  atom z \\<notin> set [atom z']\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "ultimately"], ["proof (chain)\npicking this:\n  (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n  atom z \\<sharp> b_of t\n  atom z \\<notin> set [atom z']", "have  **:\"atom z \\<sharp> c'\""], ["proof (prove)\nusing this:\n  (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n  atom z \\<sharp> b_of t\n  atom z \\<notin> set [atom z']\n\ngoal (1 subgoal):\n 1. atom z \\<sharp> c'", "using fresh_Pair z fresh_at_base(2)"], ["proof (prove)\nusing this:\n  (atom z \\<sharp> c' \\<or> atom z \\<in> set [atom z']) \\<and>\n  atom z \\<sharp> b_of t\n  atom z \\<notin> set [atom z']\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  ?a \\<sharp> ?b = (?a \\<noteq> atom ?b)\n\ngoal (1 subgoal):\n 1. atom z \\<sharp> c'", "by metis"], ["proof (state)\nthis:\n  atom z \\<sharp> c'\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "have \"(c_of t z)[z::=V_var x]\\<^sub>c\\<^sub>v = c'[z'::=V_var z]\\<^sub>c\\<^sub>v[z::=V_var x]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using c_of.simps fresh_Pair  z"], ["proof (prove)\nusing this:\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "also"], ["proof (state)\nthis:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "have \"... = c'[z'::=V_var x]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using subst_v_simple_commute subst_v_c_def assms c_of.simps z  **"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>v[?x::=?b]\\<^sub>v = ?c[?z::=?b]\\<^sub>v\n  subst_v = subst_cv_abbrev\n  atom z \\<sharp> t\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n  atom z \\<sharp> c'\n\ngoal (1 subgoal):\n 1. c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  c'[z'::=[ z ]\\<^sup>v]\\<^sub>c\\<^sub>v[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "finally"], ["proof (chain)\npicking this:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "using c_of.simps[of z' x \"b_of t\" c']  fresh_Pair z"], ["proof (prove)\nusing this:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom z' \\<sharp> x \\<Longrightarrow>\n  c_of \\<lbrace> z' : b_of t  | c' \\<rbrace> x =\n  c'[z'::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  t = \\<lbrace> z' : b_of t  | c' \\<rbrace> \\<and> atom z' \\<sharp> (x, z)\n\ngoal (1 subgoal):\n 1. (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x", "by metis"], ["proof (state)\nthis:\n  (c_of t z)[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v = c_of t x\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma type_eq_subst_eq1:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" and \"atom z1 \\<sharp> c2\" \n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\" and \"b1=b2\" and \" c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v &&&\n    b1 = b2 &&& c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\n 2. b1 = b2\n 3. c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "show \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "using type_eq_subst_eq assms"], ["proof (prove)\nusing this:\n  \\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n  \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace> \\<Longrightarrow>\n  ?c1.0[?z1.0::=?v]\\<^sub>c\\<^sub>v = ?c2.0[?z2.0::=?v]\\<^sub>c\\<^sub>v\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n  atom z1 \\<sharp> c2\n\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "by blast"], ["proof (state)\nthis:\n  c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\n\ngoal (2 subgoals):\n 1. b1 = b2\n 2. c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "show \"b1=b2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b1 = b2", "using \\<tau>.eq_iff assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n  atom z1 \\<sharp> c2\n\ngoal (1 subgoal):\n 1. b1 = b2", "by blast"], ["proof (state)\nthis:\n  b1 = b2\n\ngoal (1 subgoal):\n 1. c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "have \"z1 = z2 \\<and> c1 = c2 \\<or> z1 \\<noteq> z2 \\<and> c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. z1 = z2 \\<and> c1 = c2 \\<or>\n    z1 \\<noteq> z2 \\<and>\n    c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2", "using \\<tau>.eq_iff Abs1_eq_iff[of z1 c1 z2 c2] assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([{atom z1}]set. c1 = [{atom z2}]set. c2) =\n  (z1 = z2 \\<and> c1 = c2 \\<or>\n   z1 \\<noteq> z2 \\<and>\n   c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2)\n  ([{atom z1}]res. c1 = [{atom z2}]res. c2) =\n  (z1 = z2 \\<and> c1 = c2 \\<or>\n   z1 \\<noteq> z2 \\<and>\n   c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2)\n  ([[atom z1]]lst. c1 = [[atom z2]]lst. c2) =\n  (z1 = z2 \\<and> c1 = c2 \\<or>\n   z1 \\<noteq> z2 \\<and>\n   c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2)\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n  atom z1 \\<sharp> c2\n\ngoal (1 subgoal):\n 1. z1 = z2 \\<and> c1 = c2 \\<or>\n    z1 \\<noteq> z2 \\<and>\n    c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2", "by blast"], ["proof (state)\nthis:\n  z1 = z2 \\<and> c1 = c2 \\<or>\n  z1 \\<noteq> z2 \\<and>\n  c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2\n\ngoal (1 subgoal):\n 1. c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "thus  \"c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2\""], ["proof (prove)\nusing this:\n  z1 = z2 \\<and> c1 = c2 \\<or>\n  z1 \\<noteq> z2 \\<and>\n  c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2 \\<and> atom z1 \\<sharp> c2\n\ngoal (1 subgoal):\n 1. c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2", "by auto"], ["proof (state)\nthis:\n  c1 = (z1 \\<leftrightarrow> z2) \\<bullet> c2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma type_eq_subst_eq2:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" \n  shows \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\" and \"b1=b2\" and \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v &&&\n    b1 = b2 &&& [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "proof -"], ["proof (state)\ngoal (3 subgoals):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\n 2. b1 = b2\n 3. [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "show \"c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "using type_eq_subst_eq assms"], ["proof (prove)\nusing this:\n  \\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n  \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace> \\<Longrightarrow>\n  ?c1.0[?z1.0::=?v]\\<^sub>c\\<^sub>v = ?c2.0[?z2.0::=?v]\\<^sub>c\\<^sub>v\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n\ngoal (1 subgoal):\n 1. c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v", "by blast"], ["proof (state)\nthis:\n  c1[z1::=v]\\<^sub>c\\<^sub>v = c2[z2::=v]\\<^sub>c\\<^sub>v\n\ngoal (2 subgoals):\n 1. b1 = b2\n 2. [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "show \"b1=b2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b1 = b2", "using \\<tau>.eq_iff assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n\ngoal (1 subgoal):\n 1. b1 = b2", "by blast"], ["proof (state)\nthis:\n  b1 = b2\n\ngoal (1 subgoal):\n 1. [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "show  \"[[atom z1]]lst. c1 = [[atom z2]]lst. c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "using \\<tau>.eq_iff assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n\ngoal (1 subgoal):\n 1. [[atom z1]]lst. c1 = [[atom z2]]lst. c2", "by auto"], ["proof (state)\nthis:\n  [[atom z1]]lst. c1 = [[atom z2]]lst. c2\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma type_eq_subst_eq3:\n  fixes v::v and c1::c\n  assumes \"\\<lbrace> z1 : b1  |  c1 \\<rbrace> = (\\<lbrace> z2 : b2  |  c2 \\<rbrace>)\" and \"atom z1 \\<sharp> c2\" \n  shows \"c1 = c2[z2::=V_var z1]\\<^sub>c\\<^sub>v\" and \"b1=b2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c1 = c2[z2::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v &&& b1 = b2", "using type_eq_subst_eq1 assms  subst_v_c_def"], ["proof (prove)\nusing this:\n  \\<lbrakk>\\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n           \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace>;\n   atom ?z1.0 \\<sharp> ?c2.0\\<rbrakk>\n  \\<Longrightarrow> ?c1.0[?z1.0::=?v]\\<^sub>c\\<^sub>v =\n                    ?c2.0[?z2.0::=?v]\\<^sub>c\\<^sub>v\n  \\<lbrakk>\\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n           \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace>;\n   atom ?z1.0 \\<sharp> ?c2.0\\<rbrakk>\n  \\<Longrightarrow> ?b1.0 = ?b2.0\n  \\<lbrakk>\\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n           \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace>;\n   atom ?z1.0 \\<sharp> ?c2.0\\<rbrakk>\n  \\<Longrightarrow> ?c1.0 = (?z1.0 \\<leftrightarrow> ?z2.0) \\<bullet> ?c2.0\n  \\<lbrace> z1 : b1  | c1 \\<rbrace> = \\<lbrace> z2 : b2  | c2 \\<rbrace>\n  atom z1 \\<sharp> c2\n  subst_v = subst_cv_abbrev\n\ngoal (1 subgoal):\n 1. c1 = c2[z2::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v &&& b1 = b2", "by (metis subst_cv_var_flip)+"], ["", "lemma type_eq_flip:\n  assumes \"atom x \\<sharp> c\"\n  shows \"\\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> x : b | (x \\<leftrightarrow> z ) \\<bullet> c \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> =\n    \\<lbrace> x : b  | (x \\<leftrightarrow> z) \\<bullet> c \\<rbrace>", "using \\<tau>.eq_iff Abs1_eq_iff assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([{atom ?a}]set. ?x = [{atom ?b}]set. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([{atom ?a}]res. ?x = [{atom ?b}]res. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  atom x \\<sharp> c\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> =\n    \\<lbrace> x : b  | (x \\<leftrightarrow> z) \\<bullet> c \\<rbrace>", "by (metis (no_types, lifting) flip_fresh_fresh)"], ["", "lemma c_of_true:\n  \"c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = C_true\""], ["proof (prove)\ngoal (1 subgoal):\n 1. c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = (TRUE)", "proof(nominal_induct \"\\<lbrace> z' : B_bool  | TRUE \\<rbrace>\" avoiding: x rule:\\<tau>.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x =\n                         (TRUE)", "case (T_refined_type x1a x3a)"], ["proof (state)\nthis:\n  atom x1a \\<sharp> x\n  [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x =\n                         (TRUE)", "hence \"\\<lbrace> z' : B_bool  | TRUE \\<rbrace> = \\<lbrace> x1a : B_bool  | x3a \\<rbrace>\""], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x\n  [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n    \\<lbrace> x1a : B_bool  | x3a \\<rbrace>", "using \\<tau>.eq_iff"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x\n  [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n    \\<lbrace> x1a : B_bool  | x3a \\<rbrace>", "by metis"], ["proof (state)\nthis:\n  \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n  \\<lbrace> x1a : B_bool  | x3a \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<And>x1a x3a x.\n       \\<lbrakk>atom x1a \\<sharp> x;\n        [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\\<rbrakk>\n       \\<Longrightarrow> c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x =\n                         (TRUE)", "then"], ["proof (chain)\npicking this:\n  \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n  \\<lbrace> x1a : B_bool  | x3a \\<rbrace>", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n  \\<lbrace> x1a : B_bool  | x3a \\<rbrace>\n\ngoal (1 subgoal):\n 1. c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = (TRUE)", "using subst_cv.simps c_of.simps T_refined_type \n      type_eq_subst_eq3"], ["proof (prove)\nusing this:\n  \\<lbrace> z' : B_bool  | TRUE \\<rbrace> =\n  \\<lbrace> x1a : B_bool  | x3a \\<rbrace>\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n  atom ?z \\<sharp> ?x \\<Longrightarrow>\n  c_of \\<lbrace> ?z : ?b  | ?c \\<rbrace> ?x =\n  ?c[?z::=[ ?x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom x1a \\<sharp> x\n  [[atom x1a]]lst. x3a = [[atom z']]lst. (TRUE)\n  \\<lbrakk>\\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n           \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace>;\n   atom ?z1.0 \\<sharp> ?c2.0\\<rbrakk>\n  \\<Longrightarrow> ?c1.0 = ?c2.0[?z2.0::=[ ?z1.0 ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  \\<lbrakk>\\<lbrace> ?z1.0 : ?b1.0  | ?c1.0 \\<rbrace> =\n           \\<lbrace> ?z2.0 : ?b2.0  | ?c2.0 \\<rbrace>;\n   atom ?z1.0 \\<sharp> ?c2.0\\<rbrakk>\n  \\<Longrightarrow> ?b1.0 = ?b2.0\n\ngoal (1 subgoal):\n 1. c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = (TRUE)", "by (metis type_eq_subst_eq)"], ["proof (state)\nthis:\n  c_of \\<lbrace> z' : B_bool  | TRUE \\<rbrace> x = (TRUE)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma type_eq_subst:\n  assumes \"atom x \\<sharp> c\"\n  shows \"\\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> x : b | c[z::=[x]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> =\n    \\<lbrace> x : b  | c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "using \\<tau>.eq_iff Abs1_eq_iff assms"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([{atom ?a}]set. ?x = [{atom ?b}]set. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([{atom ?a}]res. ?x = [{atom ?b}]res. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  atom x \\<sharp> c\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> =\n    \\<lbrace> x : b  | c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "using subst_cv_var_flip type_eq_flip"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([{atom ?a}]set. ?x = [{atom ?b}]set. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([{atom ?a}]res. ?x = [{atom ?b}]res. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  atom x \\<sharp> c\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom ?x \\<sharp> ?c \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace> =\n  \\<lbrace> ?x : ?b  | (?x \\<leftrightarrow> ?z) \\<bullet> ?c \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> =\n    \\<lbrace> x : b  | c[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<rbrace>", "by auto"], ["", "lemma type_e_subst_fresh:\n  fixes x::x and z::x\n  assumes \"atom z \\<sharp> (x,v)\" and \"atom x \\<sharp> e\" \n  shows \"\\<lbrace> z : b  | CE_val (V_var z)  ==  e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<lbrace> z : b  | CE_val (V_var z)  ==  e  \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e  \\<rbrace>", "using assms subst_tv.simps subst_cv.simps forget_subst_cev"], ["proof (prove)\nusing this:\n  atom z \\<sharp> (x, v)\n  atom x \\<sharp> e\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n  atom ?a \\<sharp> ?A \\<Longrightarrow>\n  ?A[?a::=?x]\\<^sub>c\\<^sub>e\\<^sub>v = ?A\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  e  \\<rbrace>", "by simp"], ["", "lemma type_v_subst_fresh:\n  fixes x::x and z::x\n  assumes \"atom z \\<sharp> (x,v)\" and \"atom x \\<sharp> v'\" \n  shows \"\\<lbrace> z : b  | CE_val (V_var z)  ==  CE_val v'  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<lbrace> z : b  | CE_val (V_var z)  ==  CE_val v'  \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  [ v' ]\\<^sup>c\\<^sup>e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  [ v' ]\\<^sup>c\\<^sup>e  \\<rbrace>", "using assms subst_tv.simps subst_cv.simps"], ["proof (prove)\nusing this:\n  atom z \\<sharp> (x, v)\n  atom x \\<sharp> v'\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  [ v' ]\\<^sup>c\\<^sup>e  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<lbrace> z : b  | [ [ z ]\\<^sup>v ]\\<^sup>c\\<^sup>e  ==  [ v' ]\\<^sup>c\\<^sup>e  \\<rbrace>", "by simp"], ["", "lemma subst_tbase_eq:\n  \"b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "obtain z and b and c where zbc: \"\\<tau> = \\<lbrace> z:b|c\\<rbrace> \\<and> atom z \\<sharp> (x,v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and>\n        atom z \\<sharp> (x, v) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using \\<tau>.exhaust"], ["proof (prove)\nusing this:\n  (\\<And>x1 x2 x3.\n      ?y = \\<lbrace> x1 : x2  | x3 \\<rbrace> \\<Longrightarrow>\n      ?P) \\<Longrightarrow>\n  ?P\n\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and>\n        atom z \\<sharp> (x, v) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by (metis prod.inject subst_tv.cases)"], ["proof (state)\nthis:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "hence \"b_of \\<lbrace> z:b|c\\<rbrace> = b_of \\<lbrace> z:b|c\\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\nusing this:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<lbrace> z : b  | c \\<rbrace> =\n    b_of \\<lbrace> z : b  | c \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "using subst_tv.simps"], ["proof (prove)\nusing this:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. b_of \\<lbrace> z : b  | c \\<rbrace> =\n    b_of \\<lbrace> z : b  | c \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  b_of \\<lbrace> z : b  | c \\<rbrace> =\n  b_of \\<lbrace> z : b  | c \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "thus ?thesis"], ["proof (prove)\nusing this:\n  b_of \\<lbrace> z : b  | c \\<rbrace> =\n  b_of \\<lbrace> z : b  | c \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "using zbc"], ["proof (prove)\nusing this:\n  b_of \\<lbrace> z : b  | c \\<rbrace> =\n  b_of \\<lbrace> z : b  | c \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by blast"], ["proof (state)\nthis:\n  b_of \\<tau> = b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_tv_if:\n  assumes \"atom z1 \\<sharp> (x,v)\" and \"atom z' \\<sharp> (x,v)\" \n  shows \"\\<lbrace> z1 : b  | CE_val (v'[x::=v]\\<^sub>v\\<^sub>v)  ==  CE_val (V_lit l)   IMP  (c'[x::=v]\\<^sub>c\\<^sub>v)[z'::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> = \n         \\<lbrace> z1 : b  | CE_val v'           ==  CE_val (V_lit l)   IMP  c'[z'::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z1 : b  | [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e  ==  [ [ l ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  c'[x::=v]\\<^sub>c\\<^sub>v[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : b  | [ v' ]\\<^sup>c\\<^sup>e  ==  [ [ l ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  c'[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "using subst_cv_commute_full[of z' v x \"V_var z1\" c']  subst_tv.simps subst_vv.simps(1) subst_ev.simps  subst_cv.simps assms"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom z' \\<sharp> v; atom x \\<sharp> [ z1 ]\\<^sup>v;\n   x \\<noteq> z'\\<rbrakk>\n  \\<Longrightarrow> c'[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v[x::=v]\\<^sub>c\\<^sub>v =\n                    c'[x::=v]\\<^sub>c\\<^sub>v[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  [ ?l ]\\<^sup>v[?x::=?v]\\<^sub>v\\<^sub>v = [ ?l ]\\<^sup>v\n  [ ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?f  ?v'  ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?f  ?v'[?x::=?v]\\<^sub>v\\<^sub>v  ]\\<^sup>e\n  [?f [ ?b ]  ?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [?f [ ?b ]  ?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?opp ?v1.0 ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?opp ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#1?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#1?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [#2?v' ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [#2?v'[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?u ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v = [ ?u ]\\<^sup>e\n  [| ?v' |]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [| ?v'[?x::=?v]\\<^sub>v\\<^sub>v |]\\<^sup>e\n  [ ?v1.0 @@ ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v @@ ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  [ ?v1.0  ?v2.0 ]\\<^sup>e[?x::=?v]\\<^sub>e\\<^sub>v =\n  [ ?v1.0[?x::=?v]\\<^sub>v\\<^sub>v  ?v2.0[?x::=?v]\\<^sub>v\\<^sub>v ]\\<^sup>e\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n  atom z1 \\<sharp> (x, v)\n  atom z' \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1 : b  | [ v'[x::=v]\\<^sub>v\\<^sub>v ]\\<^sup>c\\<^sup>e  ==  [ [ l ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  c'[x::=v]\\<^sub>c\\<^sub>v[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : b  | [ v' ]\\<^sup>c\\<^sup>e  ==  [ [ l ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  c'[z'::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by simp"], ["", "lemma subst_tv_tid:\n  assumes \"atom za \\<sharp> (x,v)\"\n  shows \"\\<lbrace> za : B_id tid  | TRUE \\<rbrace> = \\<lbrace> za : B_id tid   | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "using assms subst_tv.simps subst_cv.simps"], ["proof (prove)\nusing this:\n  atom za \\<sharp> (x, v)\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by presburger"], ["", "lemma b_of_subst:\n  \"b_of (\\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v) = b_of \\<tau>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>", "obtain z b c where *:\"\\<tau> = \\<lbrace> z : b | c \\<rbrace> \\<and> atom z \\<sharp> (x,v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and>\n        atom z \\<sharp> (x, v) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh_z"], ["proof (prove)\nusing this:\n  (\\<And>z b c.\n      atom z \\<sharp> ?t \\<and>\n      ?\\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<Longrightarrow>\n      ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>z b c.\n        \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and>\n        atom z \\<sharp> (x, v) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by metis"], ["proof (state)\nthis:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>", "thus ?thesis"], ["proof (prove)\nusing this:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>", "using subst_tv.simps *"], ["proof (prove)\nusing this:\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n  \\<tau> = \\<lbrace> z : b  | c \\<rbrace> \\<and> atom z \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>", "by auto"], ["proof (state)\nthis:\n  b_of \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = b_of \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_tv_flip:\n  assumes \"\\<tau>'[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\" and \"atom x \\<sharp> (v,\\<tau>)\" and \"atom x' \\<sharp> (v,\\<tau>)\"\n  shows \"((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>", "have \"(x' \\<leftrightarrow> x) \\<bullet> v = v \\<and> (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x' \\<leftrightarrow> x) \\<bullet> v = v \\<and>\n    (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>", "using assms flip_fresh_fresh"], ["proof (prove)\nusing this:\n  \\<tau>'[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\n  atom x \\<sharp> (v, \\<tau>)\n  atom x' \\<sharp> (v, \\<tau>)\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (1 subgoal):\n 1. (x' \\<leftrightarrow> x) \\<bullet> v = v \\<and>\n    (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>", "by auto"], ["proof (state)\nthis:\n  (x' \\<leftrightarrow> x) \\<bullet> v = v \\<and>\n  (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>\n\ngoal (1 subgoal):\n 1. ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>", "thus ?thesis"], ["proof (prove)\nusing this:\n  (x' \\<leftrightarrow> x) \\<bullet> v = v \\<and>\n  (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>\n\ngoal (1 subgoal):\n 1. ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>", "using subst_tv.eqvt[of  \"(x' \\<leftrightarrow> x)\"  \\<tau>' x v ] assms"], ["proof (prove)\nusing this:\n  (x' \\<leftrightarrow> x) \\<bullet> v = v \\<and>\n  (x' \\<leftrightarrow> x) \\<bullet> \\<tau> = \\<tau>\n  (x' \\<leftrightarrow> x) \\<bullet> \\<tau>'[x::=v]\\<^sub>\\<tau>\\<^sub>v =\n  ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[(x' \\<leftrightarrow> x) \\<bullet> x::=(x' \\<leftrightarrow> x) \\<bullet> v]\\<^sub>\\<tau>\\<^sub>v\n  \\<tau>'[x::=v]\\<^sub>\\<tau>\\<^sub>v = \\<tau>\n  atom x \\<sharp> (v, \\<tau>)\n  atom x' \\<sharp> (v, \\<tau>)\n\ngoal (1 subgoal):\n 1. ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n    \\<tau>", "by auto"], ["proof (state)\nthis:\n  ((x' \\<leftrightarrow> x) \\<bullet> \\<tau>')[x'::=v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<tau>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_cv_true:\n  \"\\<lbrace> z : B_id tid  | TRUE \\<rbrace> = \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "obtain za::x where \"atom za \\<sharp> (x,v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>za.\n        atom za \\<sharp> (x, v) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using obtain_fresh"], ["proof (prove)\nusing this:\n  (\\<And>a. atom a \\<sharp> ?x \\<Longrightarrow> ?thesis) \\<Longrightarrow>\n  ?thesis\n\ngoal (1 subgoal):\n 1. (\\<And>za.\n        atom za \\<sharp> (x, v) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  atom za \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "hence \"\\<lbrace> z : B_id tid   | TRUE \\<rbrace> = \\<lbrace> za: B_id tid | TRUE \\<rbrace>\""], ["proof (prove)\nusing this:\n  atom za \\<sharp> (x, v)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>", "using \\<tau>.eq_iff Abs1_eq_iff"], ["proof (prove)\nusing this:\n  atom za \\<sharp> (x, v)\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([{atom ?a}]set. ?x = [{atom ?b}]set. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([{atom ?a}]res. ?x = [{atom ?b}]res. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>", "by fastforce"], ["proof (state)\nthis:\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "have  \"\\<lbrace> za : B_id tid   | TRUE \\<rbrace> = \\<lbrace> za : B_id tid   | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "using subst_cv.simps subst_tv.simps"], ["proof (prove)\nusing this:\n  (TRUE)[?x::=?v]\\<^sub>c\\<^sub>v = (TRUE)\n  (FALSE)[?x::=?v]\\<^sub>c\\<^sub>v = (FALSE)\n  (?c1.0  AND  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  AND  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0 OR ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v OR ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?c1.0  IMP  ?c2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?c1.0[?x::=?v]\\<^sub>c\\<^sub>v  IMP  ?c2.0[?x::=?v]\\<^sub>c\\<^sub>v )\n  (?e1.0  ==  ?e2.0 )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (?e1.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v  ==  ?e2.0[?x::=?v]\\<^sub>c\\<^sub>e\\<^sub>v )\n  (\\<not> ?c )[?x::=?v]\\<^sub>c\\<^sub>v =\n  (\\<not> ?c[?x::=?v]\\<^sub>c\\<^sub>v )\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  \\<lbrace> ?z : ?b  | ?c \\<rbrace>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n  \\<lbrace> ?z : ?b  | ?c[?x::=?v]\\<^sub>c\\<^sub>v \\<rbrace>\n\ngoal (1 subgoal):\n 1. \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by (simp add: \\<open>atom za \\<sharp> (x, v)\\<close>)"], ["proof (state)\nthis:\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "ultimately"], ["proof (chain)\npicking this:\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> za : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n    \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v", "by argo"], ["proof (state)\nthis:\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace> =\n  \\<lbrace> z : B_id tid  | TRUE \\<rbrace>[x::=v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma t_eq_supp:\n  assumes \"(\\<lbrace> z : b | c \\<rbrace>) = (\\<lbrace>  z1 : b1 | c1 \\<rbrace>)\"\n  shows \"supp c - { atom z } = supp c1 - { atom z1 }\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "have \"supp c - { atom z } \\<union> supp b = supp c1 - { atom z1 } \\<union> supp b1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1", "using \\<tau>.supp assms"], ["proof (prove)\nusing this:\n  supp \\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n  supp ?c - set [atom ?x] \\<union> supp ?b\n  \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> z1 : b1  | c1 \\<rbrace>\n\ngoal (1 subgoal):\n 1. supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1", "by (metis list.set(1) list.simps(15) sup_bot.right_neutral supp_b_empty)"], ["proof (state)\nthis:\n  supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "moreover"], ["proof (state)\nthis:\n  supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "have \"supp b = supp b1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp b = supp b1", "using assms  \\<tau>.eq_iff"], ["proof (prove)\nusing this:\n  \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> z1 : b1  | c1 \\<rbrace>\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n\ngoal (1 subgoal):\n 1. supp b = supp b1", "by simp"], ["proof (state)\nthis:\n  supp b = supp b1\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "moreover"], ["proof (state)\nthis:\n  supp b = supp b1\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "have \"atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b", "using  supp_b_empty"], ["proof (prove)\nusing this:\n  atom ?x \\<notin> supp ?b\n\ngoal (1 subgoal):\n 1. atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b", "by simp"], ["proof (state)\nthis:\n  atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "ultimately"], ["proof (chain)\npicking this:\n  supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1\n  supp b = supp b1\n  atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b", "show ?thesis"], ["proof (prove)\nusing this:\n  supp c - {atom z} \\<union> supp b = supp c1 - {atom z1} \\<union> supp b1\n  supp b = supp b1\n  atom z1 \\<notin> supp b1 \\<and> atom z \\<notin> supp b\n\ngoal (1 subgoal):\n 1. supp c - {atom z} = supp c1 - {atom z1}", "by (metis \\<tau>.eq_iff \\<tau>.supp assms b.supp(1) list.set(1) list.set(2) sup_bot.right_neutral)"], ["proof (state)\nthis:\n  supp c - {atom z} = supp c1 - {atom z1}\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fresh_t_eq: \n  fixes x::x\n  assumes  \"(\\<lbrace> z : b  | c \\<rbrace>) = (\\<lbrace> zz : b | cc \\<rbrace>)\" and \"atom x \\<sharp> c\" and \"x \\<noteq> zz\"\n  shows \"atom x \\<sharp> cc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "have \"supp c - { atom z } \\<union> supp b = supp cc - { atom zz } \\<union> supp b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b", "using \\<tau>.supp assms"], ["proof (prove)\nusing this:\n  supp \\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n  supp ?c - set [atom ?x] \\<union> supp ?b\n  \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> zz : b  | cc \\<rbrace>\n  atom x \\<sharp> c\n  x \\<noteq> zz\n\ngoal (1 subgoal):\n 1. supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b", "by (metis list.set(1) list.simps(15) sup_bot.right_neutral supp_b_empty)"], ["proof (state)\nthis:\n  supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "moreover"], ["proof (state)\nthis:\n  supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "have \"atom x \\<notin> supp c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<notin> supp c", "using assms fresh_def"], ["proof (prove)\nusing this:\n  \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> zz : b  | cc \\<rbrace>\n  atom x \\<sharp> c\n  x \\<noteq> zz\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n\ngoal (1 subgoal):\n 1. atom x \\<notin> supp c", "by blast"], ["proof (state)\nthis:\n  atom x \\<notin> supp c\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "ultimately"], ["proof (chain)\npicking this:\n  supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b\n  atom x \\<notin> supp c", "have \"atom x \\<notin> supp cc - { atom zz } \\<union> supp b\""], ["proof (prove)\nusing this:\n  supp c - {atom z} \\<union> supp b = supp cc - {atom zz} \\<union> supp b\n  atom x \\<notin> supp c\n\ngoal (1 subgoal):\n 1. atom x \\<notin> supp cc - {atom zz} \\<union> supp b", "by force"], ["proof (state)\nthis:\n  atom x \\<notin> supp cc - {atom zz} \\<union> supp b\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "hence \"atom x \\<notin> supp cc\""], ["proof (prove)\nusing this:\n  atom x \\<notin> supp cc - {atom zz} \\<union> supp b\n\ngoal (1 subgoal):\n 1. atom x \\<notin> supp cc", "using assms"], ["proof (prove)\nusing this:\n  atom x \\<notin> supp cc - {atom zz} \\<union> supp b\n  \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> zz : b  | cc \\<rbrace>\n  atom x \\<sharp> c\n  x \\<noteq> zz\n\ngoal (1 subgoal):\n 1. atom x \\<notin> supp cc", "by simp"], ["proof (state)\nthis:\n  atom x \\<notin> supp cc\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "thus ?thesis"], ["proof (prove)\nusing this:\n  atom x \\<notin> supp cc\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "using fresh_def"], ["proof (prove)\nusing this:\n  atom x \\<notin> supp cc\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> cc", "by auto"], ["proof (state)\nthis:\n  atom x \\<sharp> cc\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Mutable Variable Context\\<close>"], ["", "nominal_function subst_dv :: \"\\<Delta> \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> \\<Delta>\" where\n  \"subst_dv  DNil x v = DNil\"\n| \"subst_dv ((u,t) #\\<^sub>\\<Delta> \\<Delta>) x v  = ((u,t[x::=v]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta> (subst_dv \\<Delta> x v ))\""], ["proof (prove)\ngoal (6 subgoals):\n 1. eqvt subst_dv_graph_aux\n 2. \\<And>x y. subst_dv_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>xa v.\n                   x = ([]\\<^sub>\\<Delta>, xa, v) \\<Longrightarrow> P;\n        \\<And>u t \\<Delta> xa v.\n           x = ((u, t) #\\<^sub>\\<Delta> \\<Delta>, xa, v) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>x v xa va.\n       ([]\\<^sub>\\<Delta>, x, v) =\n       ([]\\<^sub>\\<Delta>, xa, va) \\<Longrightarrow>\n       []\\<^sub>\\<Delta> = []\\<^sub>\\<Delta>\n 5. \\<And>x v u t \\<Delta> xa va.\n       \\<lbrakk>eqvt_at subst_dv_sumC (\\<Delta>, xa, va); True;\n        ([]\\<^sub>\\<Delta>, x, v) =\n        ((u, t) #\\<^sub>\\<Delta> \\<Delta>, xa, va)\\<rbrakk>\n       \\<Longrightarrow> []\\<^sub>\\<Delta> =\n                         (u, t[xa::=va]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n                         subst_dv_sumC (\\<Delta>, xa, va)\n 6. \\<And>u t \\<Delta> x v ua ta \\<Delta>' xa va.\n       \\<lbrakk>eqvt_at subst_dv_sumC (\\<Delta>, x, v);\n        eqvt_at subst_dv_sumC (\\<Delta>', xa, va); True; True;\n        ((u, t) #\\<^sub>\\<Delta> \\<Delta>, x, v) =\n        ((ua, ta) #\\<^sub>\\<Delta> \\<Delta>', xa, va)\\<rbrakk>\n       \\<Longrightarrow> (u, t[x::=v]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n                         subst_dv_sumC (\\<Delta>, x, v) =\n                         (ua,\n                          ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n                         subst_dv_sumC (\\<Delta>', xa, va)", "apply (simp add: eqvt_def subst_dv_graph_aux_def,auto )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>P a.\n       \\<lbrakk>a = []\\<^sub>\\<Delta> \\<Longrightarrow> P;\n        \\<And>u t \\<Delta>.\n           a = (u, t) #\\<^sub>\\<Delta> \\<Delta> \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "using delete_aux.elims"], ["proof (prove)\nusing this:\n  \\<lbrakk>AList.delete_aux ?x ?xa = ?y;\n   \\<And>k.\n      \\<lbrakk>?x = k; ?xa = []; ?y = []\\<rbrakk> \\<Longrightarrow> ?P;\n   \\<And>k k' v xs.\n      \\<lbrakk>?x = k; ?xa = (k', v) # xs;\n       ?y =\n       (if k = k' then xs else (k', v) # AList.delete_aux k xs)\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. \\<And>P a.\n       \\<lbrakk>a = []\\<^sub>\\<Delta> \\<Longrightarrow> P;\n        \\<And>u t \\<Delta>.\n           a = (u, t) #\\<^sub>\\<Delta> \\<Delta> \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "by (metis \\<Delta>.exhaust surj_pair)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_dv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_dv_abbrev :: \"\\<Delta> \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> \\<Delta>\" (\"_[_::=_]\\<^sub>\\<Delta>\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v  \\<equiv> subst_dv \\<Delta> x v \""], ["", "nominal_function dmap :: \"(u*\\<tau> \\<Rightarrow> u*\\<tau>) \\<Rightarrow> \\<Delta> \\<Rightarrow> \\<Delta>\" where\n  \"dmap f DNil  = DNil\"\n| \"dmap  f ((u,t)#\\<^sub>\\<Delta>\\<Delta>)  = (f (u,t) #\\<^sub>\\<Delta> (dmap f \\<Delta> ))\""], ["proof (prove)\ngoal (6 subgoals):\n 1. eqvt dmap_graph_aux\n 2. \\<And>x y. dmap_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>f. x = (f, []\\<^sub>\\<Delta>) \\<Longrightarrow> P;\n        \\<And>f u t \\<Delta>.\n           x = (f, (u, t) #\\<^sub>\\<Delta> \\<Delta>) \\<Longrightarrow>\n           P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>f fa.\n       (f, []\\<^sub>\\<Delta>) = (fa, []\\<^sub>\\<Delta>) \\<Longrightarrow>\n       []\\<^sub>\\<Delta> = []\\<^sub>\\<Delta>\n 5. \\<And>f fa u t \\<Delta>.\n       \\<lbrakk>eqvt_at dmap_sumC (fa, \\<Delta>); True;\n        (f, []\\<^sub>\\<Delta>) =\n        (fa, (u, t) #\\<^sub>\\<Delta> \\<Delta>)\\<rbrakk>\n       \\<Longrightarrow> []\\<^sub>\\<Delta> =\n                         fa (u, t) #\\<^sub>\\<Delta> dmap_sumC (fa, \\<Delta>)\n 6. \\<And>f u t \\<Delta> fa ua ta \\<Delta>'.\n       \\<lbrakk>eqvt_at dmap_sumC (f, \\<Delta>);\n        eqvt_at dmap_sumC (fa, \\<Delta>'); True; True;\n        (f, (u, t) #\\<^sub>\\<Delta> \\<Delta>) =\n        (fa, (ua, ta) #\\<^sub>\\<Delta> \\<Delta>')\\<rbrakk>\n       \\<Longrightarrow> f (u, t) #\\<^sub>\\<Delta> dmap_sumC (f, \\<Delta>) =\n                         fa (ua, ta) #\\<^sub>\\<Delta>\n                         dmap_sumC (fa, \\<Delta>')", "apply (simp add: eqvt_def dmap_graph_aux_def,auto )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>P b.\n       \\<lbrakk>b = []\\<^sub>\\<Delta> \\<Longrightarrow> P;\n        \\<And>u t \\<Delta>.\n           b = (u, t) #\\<^sub>\\<Delta> \\<Delta> \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "using delete_aux.elims"], ["proof (prove)\nusing this:\n  \\<lbrakk>AList.delete_aux ?x ?xa = ?y;\n   \\<And>k.\n      \\<lbrakk>?x = k; ?xa = []; ?y = []\\<rbrakk> \\<Longrightarrow> ?P;\n   \\<And>k k' v xs.\n      \\<lbrakk>?x = k; ?xa = (k', v) # xs;\n       ?y =\n       (if k = k' then xs else (k', v) # AList.delete_aux k xs)\\<rbrakk>\n      \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n\ngoal (1 subgoal):\n 1. \\<And>P b.\n       \\<lbrakk>b = []\\<^sub>\\<Delta> \\<Longrightarrow> P;\n        \\<And>u t \\<Delta>.\n           b = (u, t) #\\<^sub>\\<Delta> \\<Delta> \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P", "by (metis \\<Delta>.exhaust surj_pair)"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All dmap_dom", "by lexicographic_order"], ["", "lemma subst_dv_iff:\n  \"\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v = dmap (\\<lambda>(u,t). (u, t[x::=v]\\<^sub>\\<tau>\\<^sub>v)) \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v =\n    dmap (\\<lambda>(u, t). (u, t[x::=v]\\<^sub>\\<tau>\\<^sub>v)) \\<Delta>", "by(induct \\<Delta>, auto)"], ["", "lemma size_subst_dv [simp]: \"size ( subst_dv G i x) \\<le> size G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size G[i::=x]\\<^sub>\\<Delta>\\<^sub>v \\<le> size G", "by (induct G,auto)"], ["", "lemma forget_subst_dv [simp]: \"atom a \\<sharp> G \\<Longrightarrow> subst_dv G a x = G\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> G \\<Longrightarrow> G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G", "apply (induct G ,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G;\n        atom a \\<sharp> (aa, b) #\\<^sub>\\<Delta> G\\<rbrakk>\n       \\<Longrightarrow> b[a::=x]\\<^sub>\\<tau>\\<^sub>v = b\n 2. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G;\n        atom a \\<sharp> (aa, b) #\\<^sub>\\<Delta> G\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G", "using fresh_DCons fresh_PairD(1) not_self_fresh"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x #\\<^sub>\\<Delta> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?a \\<sharp> (?x, ?y) \\<Longrightarrow> ?a \\<sharp> ?x\n  atom ?x \\<sharp> ?x = False\n\ngoal (2 subgoals):\n 1. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G;\n        atom a \\<sharp> (aa, b) #\\<^sub>\\<Delta> G\\<rbrakk>\n       \\<Longrightarrow> b[a::=x]\\<^sub>\\<tau>\\<^sub>v = b\n 2. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G;\n        atom a \\<sharp> (aa, b) #\\<^sub>\\<Delta> G\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>aa b G.\n       \\<lbrakk>atom a \\<sharp> G \\<Longrightarrow>\n                G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G;\n        atom a \\<sharp> (aa, b) #\\<^sub>\\<Delta> G\\<rbrakk>\n       \\<Longrightarrow> G[a::=x]\\<^sub>\\<Delta>\\<^sub>v = G", "apply (simp add: fresh_DCons)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["", "lemma subst_dv_member:\n  assumes \"(u,\\<tau>) \\<in> setD \\<Delta>\"\n  shows  \"(u, \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v) \\<in> setD (\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (u, \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v)\n    \\<in> setD \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  (u, \\<tau>) \\<in> setD \\<Delta>\n\ngoal (1 subgoal):\n 1. (u, \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v)\n    \\<in> setD \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "by(induct \\<Delta> rule: \\<Delta>_induct,auto)"], ["", "lemma fresh_subst_dv:\n  fixes x::x\n  assumes \"atom xa \\<sharp> \\<Delta>\" and \"atom xa \\<sharp> v\"\n  shows \"atom xa \\<sharp>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom xa \\<sharp> \\<Delta>\n  atom xa \\<sharp> v\n\ngoal (1 subgoal):\n 1. atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "proof(induct \\<Delta> rule:\\<Delta>_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>atom xa \\<sharp> []\\<^sub>\\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n    \\<Longrightarrow> atom\n                       xa \\<sharp> []\\<^sub>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n 2. \\<And>u t \\<Delta>'.\n       \\<lbrakk>\\<lbrakk>atom xa \\<sharp> \\<Delta>';\n                 atom xa \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   xa \\<sharp> \\<Delta>'[x::=v]\\<^sub>\\<Delta>\\<^sub>v;\n        atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>';\n        atom xa \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n \\<Delta>')[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "case DNil"], ["proof (state)\nthis:\n  atom xa \\<sharp> []\\<^sub>\\<Delta>\n  atom xa \\<sharp> v\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom xa \\<sharp> []\\<^sub>\\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n    \\<Longrightarrow> atom\n                       xa \\<sharp> []\\<^sub>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n 2. \\<And>u t \\<Delta>'.\n       \\<lbrakk>\\<lbrakk>atom xa \\<sharp> \\<Delta>';\n                 atom xa \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   xa \\<sharp> \\<Delta>'[x::=v]\\<^sub>\\<Delta>\\<^sub>v;\n        atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>';\n        atom xa \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n \\<Delta>')[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom xa \\<sharp> []\\<^sub>\\<Delta>\n  atom xa \\<sharp> v", "show ?case"], ["proof (prove)\nusing this:\n  atom xa \\<sharp> []\\<^sub>\\<Delta>\n  atom xa \\<sharp> v\n\ngoal (1 subgoal):\n 1. atom xa \\<sharp> []\\<^sub>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  atom xa \\<sharp> []\\<^sub>\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>\\<lbrakk>atom xa \\<sharp> \\<Delta>';\n                 atom xa \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   xa \\<sharp> \\<Delta>'[x::=v]\\<^sub>\\<Delta>\\<^sub>v;\n        atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>';\n        atom xa \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n \\<Delta>')[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>\\<lbrakk>atom xa \\<sharp> \\<Delta>';\n                 atom xa \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   xa \\<sharp> \\<Delta>'[x::=v]\\<^sub>\\<Delta>\\<^sub>v;\n        atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>';\n        atom xa \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n \\<Delta>')[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "case (DCons u t  \\<Delta>)"], ["proof (state)\nthis:\n  \\<lbrakk>atom xa \\<sharp> \\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n  atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>\n  atom xa \\<sharp> v\n\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>\\<lbrakk>atom xa \\<sharp> \\<Delta>';\n                 atom xa \\<sharp> v\\<rbrakk>\n                \\<Longrightarrow> atom\n                                   xa \\<sharp> \\<Delta>'[x::=v]\\<^sub>\\<Delta>\\<^sub>v;\n        atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>';\n        atom xa \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> atom\n                          xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n \\<Delta>')[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  \\<lbrakk>atom xa \\<sharp> \\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n  atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>\n  atom xa \\<sharp> v", "show ?case"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom xa \\<sharp> \\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n  atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>\n  atom xa \\<sharp> v\n\ngoal (1 subgoal):\n 1. atom\n     xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                  \\<Delta>)[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "using subst_dv.simps  subst_v_\\<tau>_def fresh_DCons fresh_Pair"], ["proof (prove)\nusing this:\n  \\<lbrakk>atom xa \\<sharp> \\<Delta>; atom xa \\<sharp> v\\<rbrakk>\n  \\<Longrightarrow> atom xa \\<sharp> \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n  atom xa \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>\n  atom xa \\<sharp> v\n  []\\<^sub>\\<Delta>[?x::=?v]\\<^sub>\\<Delta>\\<^sub>v = []\\<^sub>\\<Delta>\n  ((?u, ?t) #\\<^sub>\\<Delta> ?\\<Delta>)[?x::=?v]\\<^sub>\\<Delta>\\<^sub>v =\n  (?u, ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n  ?\\<Delta>[?x::=?v]\\<^sub>\\<Delta>\\<^sub>v\n  subst_v = subst_tv_abbrev\n  ?a \\<sharp> ?x #\\<^sub>\\<Delta> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. atom\n     xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                  \\<Delta>)[x::=v]\\<^sub>\\<Delta>\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom\n   xa \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                \\<Delta>)[x::=v]\\<^sub>\\<Delta>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fresh_subst_dv_if:\n  fixes j::atom and i::x and  x::v and t::\\<Delta>\n  assumes \"j \\<sharp> t \\<and> j \\<sharp> x\" \n  shows  \"(j \\<sharp> subst_dv t i x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  j \\<sharp> t \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "proof(induct t rule: \\<Delta>_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x \\<Longrightarrow>\n    j \\<sharp> []\\<^sub>\\<Delta>[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n 2. \\<And>u t \\<Delta>'.\n       \\<lbrakk>j \\<sharp> \\<Delta>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Delta>'[i::=x]\\<^sub>\\<Delta>\\<^sub>v;\n        j \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                                     \\<Delta>')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "case DNil"], ["proof (state)\nthis:\n  j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x\n\ngoal (2 subgoals):\n 1. j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x \\<Longrightarrow>\n    j \\<sharp> []\\<^sub>\\<Delta>[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n 2. \\<And>u t \\<Delta>'.\n       \\<lbrakk>j \\<sharp> \\<Delta>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Delta>'[i::=x]\\<^sub>\\<Delta>\\<^sub>v;\n        j \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                                     \\<Delta>')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> []\\<^sub>\\<Delta>[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "using subst_gv.simps fresh_GNil"], ["proof (prove)\nusing this:\n  j \\<sharp> []\\<^sub>\\<Delta> \\<and> j \\<sharp> x\n  GNil[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v = GNil\n  ((?y, ?b, ?c) #\\<^sub>\\<Gamma>\n   ?\\<Gamma>)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = ?y then ?\\<Gamma>\n   else (?y, ?b, ?c[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        ?\\<Gamma>[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  ?a \\<sharp> GNil\n\ngoal (1 subgoal):\n 1. j \\<sharp> []\\<^sub>\\<Delta>[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> []\\<^sub>\\<Delta>[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>j \\<sharp> \\<Delta>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Delta>'[i::=x]\\<^sub>\\<Delta>\\<^sub>v;\n        j \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                                     \\<Delta>')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>j \\<sharp> \\<Delta>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Delta>'[i::=x]\\<^sub>\\<Delta>\\<^sub>v;\n        j \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                                     \\<Delta>')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "case (DCons u' t'  D')"], ["proof (state)\nthis:\n  j \\<sharp> D' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n  j \\<sharp> (u', t') #\\<^sub>\\<Delta> D' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. \\<And>u t \\<Delta>'.\n       \\<lbrakk>j \\<sharp> \\<Delta>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Delta>'[i::=x]\\<^sub>\\<Delta>\\<^sub>v;\n        j \\<sharp> (u, t) #\\<^sub>\\<Delta> \\<Delta>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((u, t) #\\<^sub>\\<Delta>\n                                     \\<Delta>')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> D' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n  j \\<sharp> (u', t') #\\<^sub>\\<Delta> D' \\<and> j \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> D' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n  j \\<sharp> (u', t') #\\<^sub>\\<Delta> D' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> ((u', t') #\\<^sub>\\<Delta> D')[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "unfolding subst_dv.simps"], ["proof (prove)\nusing this:\n  j \\<sharp> D' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n  j \\<sharp> (u', t') #\\<^sub>\\<Delta> D' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> (u', t'[i::=x]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n               D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "using fresh_DCons fresh_subst_tv_if fresh_Pair"], ["proof (prove)\nusing this:\n  j \\<sharp> D' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n  j \\<sharp> (u', t') #\\<^sub>\\<Delta> D' \\<and> j \\<sharp> x\n  ?a \\<sharp> ?x #\\<^sub>\\<Delta> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?j \\<sharp> ?A[?i::=?x]\\<^sub>\\<tau>\\<^sub>v =\n  (atom ?i \\<sharp> ?A \\<and> ?j \\<sharp> ?A \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?A \\<or> ?j = atom ?i))\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. j \\<sharp> (u', t'[i::=x]\\<^sub>\\<tau>\\<^sub>v) #\\<^sub>\\<Delta>\n               D'[i::=x]\\<^sub>\\<Delta>\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  j \\<sharp> ((u', t') #\\<^sub>\\<Delta> D')[i::=x]\\<^sub>\\<Delta>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Statements\\<close>"], ["", "text \\<open> Using ideas from proofs at top of AFP/Launchbury/Substitution.thy.\n       Subproofs borrowed from there; hence the apply style proofs. \\<close>"], ["", "nominal_function (default \"case_sum (\\<lambda>x. Inl undefined) (case_sum (\\<lambda>x. Inl undefined) (\\<lambda>x. Inr undefined))\")\n  subst_sv :: \"s \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> s\"\n  and subst_branchv :: \"branch_s \\<Rightarrow> x \\<Rightarrow> v  \\<Rightarrow> branch_s\" \n  and subst_branchlv :: \"branch_list \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> branch_list\" where\n  \"subst_sv ( (AS_val v') ) x v = (AS_val (subst_vv v' x v  ))\"\n| \"atom y \\<sharp> (x,v) \\<Longrightarrow> subst_sv  (AS_let y  e s) x v = (AS_let y  (e[x::=v]\\<^sub>e\\<^sub>v) (subst_sv s x v ))\"  \n| \"atom y \\<sharp> (x,v) \\<Longrightarrow> subst_sv (AS_let2 y t s1 s2) x v = (AS_let2 y (t[x::=v]\\<^sub>\\<tau>\\<^sub>v) (subst_sv s1 x v ) (subst_sv s2 x v ))\"  \n| \" subst_sv (AS_match v'  cs) x v = AS_match  (v'[x::=v]\\<^sub>v\\<^sub>v)  (subst_branchlv cs x v )\"\n| \"subst_sv (AS_assign y v') x v = AS_assign y (subst_vv v' x v )\"\n| \"subst_sv ( (AS_if v' s1 s2) ) x v = (AS_if (subst_vv v' x v ) (subst_sv s1 x v ) (subst_sv s2 x v ) )\"  \n| \"atom u \\<sharp> (x,v) \\<Longrightarrow> subst_sv (AS_var u \\<tau> v' s) x v = AS_var u (subst_tv \\<tau> x v ) (subst_vv v' x v ) (subst_sv s x v ) \"\n| \"subst_sv (AS_while s1 s2) x v = AS_while (subst_sv s1 x v ) (subst_sv s2 x v )\"\n| \"subst_sv (AS_seq s1 s2) x v = AS_seq (subst_sv s1 x v ) (subst_sv s2 x v )\" \n| \"subst_sv (AS_assert c s) x v = AS_assert (subst_cv c x v) (subst_sv s x v)\"\n| \"atom x1 \\<sharp> (x,v) \\<Longrightarrow>  subst_branchv (AS_branch dc x1 s1 ) x v  = AS_branch dc x1 (subst_sv s1 x v )\" \n\n| \"subst_branchlv (AS_final cs) x v = AS_final (subst_branchv  cs x v )\"\n| \"subst_branchlv (AS_cons cs css) x v = AS_cons (subst_branchv cs x v ) (subst_branchlv css x v )\""], ["proof (prove)\ngoal (94 subgoals):\n 1. eqvt subst_sv_subst_branchv_subst_branchlv_graph_aux\n 2. \\<And>x y.\n       subst_sv_subst_branchv_subst_branchlv_graph x y \\<Longrightarrow>\n       True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           \\<lbrakk>atom u \\<sharp> (xa, v);\n            x = Inl (VAR u : \\<tau> = v' IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>v' x v v'a xa va.\n       Inl ([v']\\<^sup>s, x, v) =\n       Inl ([v'a]\\<^sup>s, xa, va) \\<Longrightarrow>\n       Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n       Inl [v'a[xa::=va]\\<^sub>v\\<^sub>v]\\<^sup>s\n 5. \\<And>v' x v y xa va e s.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, xa, va));\n        True; atom y \\<sharp> (xa, va);\n        Inl ([v']\\<^sup>s, x, v) = Inl (LET y = e IN s, xa, va)\\<rbrakk>\n       \\<Longrightarrow> Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n                         Inl LET y = e[xa::=va]\\<^sub>e\\<^sub>v IN projl\n                              (subst_sv_subst_branchv_subst_branchlv_sumC\n                                (Inl (s, xa, va)))\n 6. \\<And>v' x v y xa va t s1 s2.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, xa, va));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2, xa, va));\n        True; True; atom y \\<sharp> (xa, va);\n        Inl ([v']\\<^sup>s, x, v) =\n        Inl (LET y : t = s1 IN s2, xa, va)\\<rbrakk>\n       \\<Longrightarrow> Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n                         Inl LET y : t[xa::=va]\\<^sub>\\<tau>\\<^sub>v = projl\n                                  (subst_sv_subst_branchv_subst_branchlv_sumC\n                                    (Inl\n(s1, xa,\n va))) IN projl\n           (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2, xa, va)))\n 7. \\<And>v' x v v'a cs xa va.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inr (Inr (cs, xa, va)));\n        True;\n        Inl ([v']\\<^sup>s, x, v) =\n        Inl (MATCH v'a WITH { cs }, xa, va)\\<rbrakk>\n       \\<Longrightarrow> Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n                         Inl MATCH v'a[xa::=va]\\<^sub>v\\<^sub>v WITH { projr\n                                  (projr\n                                    (subst_sv_subst_branchv_subst_branchlv_sumC\n(Inr (Inr (cs, xa, va))))) }\n 8. \\<And>v' x v y v'a xa va.\n       Inl ([v']\\<^sup>s, x, v) = Inl (y ::= v'a, xa, va) \\<Longrightarrow>\n       Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n       Inl y ::= v'a[xa::=va]\\<^sub>v\\<^sub>v\n 9. \\<And>v' x v v'a s1 s2 xa va.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, xa, va));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2, xa, va));\n        True; True;\n        Inl ([v']\\<^sup>s, x, v) =\n        Inl (IF v'a THEN s1 ELSE s2, xa, va)\\<rbrakk>\n       \\<Longrightarrow> Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n                         Inl (IF v'a[xa::=va]\\<^sub>v\\<^sub>v THEN projl\n                              (subst_sv_subst_branchv_subst_branchlv_sumC\n                                (Inl (s1, xa,\nva))) ELSE projl\n            (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2, xa, va))))\n 10. \\<And>v' x v u xa va \\<tau> v'a s.\n        \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va));\n         True; atom u \\<sharp> (xa, va);\n         Inl ([v']\\<^sup>s, x, v) =\n         Inl (VAR u : \\<tau> = v'a IN s, xa, va)\\<rbrakk>\n        \\<Longrightarrow> Inl [v'[x::=v]\\<^sub>v\\<^sub>v]\\<^sup>s =\n                          Inl VAR u : \\<tau>[xa::=va]\\<^sub>\\<tau>\\<^sub>v = v'a[xa::=va]\\<^sub>v\\<^sub>v IN projl\n                                  (subst_sv_subst_branchv_subst_branchlv_sumC\n                                    (Inl (s, xa, va)))\nA total of 94 subgoals...", "apply (auto,simp add: eqvt_def subst_sv_subst_branchv_subst_branchlv_graph_aux_def )"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           x = Inl (VAR u : \\<tau> = v' IN s, xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 4. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 5. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "proof(goal_cases)"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           x = Inl (VAR u : \\<tau> = v' IN s, xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 4. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 5. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "have eqvt_at_proj: \"\\<And> s xa va . eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va)) \\<Longrightarrow> \n           eqvt_at (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a))) (s, xa, va)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s xa va.\n       eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n        (Inl (s, xa, va)) \\<Longrightarrow>\n       eqvt_at\n        (\\<lambda>a.\n            projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n        (s, xa, va)", "apply(simp add: eqvt_at_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s xa va.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       \\<forall>p.\n          p \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s, xa, va))) =\n          projl\n           (subst_sv_subst_branchv_subst_branchlv_sumC\n             (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(rule)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       p \\<bullet> projl\n                    (subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(subst Projl_permute)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       \\<exists>y.\n          subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va)) =\n          Inl y\n 2. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(thin_tac _)+"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s xa va p.\n       \\<exists>y.\n          subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va)) =\n          Inl y\n 2. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply (simp add: subst_sv_subst_branchv_subst_branchlv_sumC_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s xa va.\n       \\<exists>y.\n          THE_default (Inl undefined)\n           (subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))) =\n          Inl y\n 2. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply (simp add: THE_default_def)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>s xa va.\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 2. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply (case_tac \"Ex1 (subst_sv_subst_branchv_subst_branchlv_graph (Inl (s,xa,va)))\")"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s xa va.\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 2. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 3. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s xa va.\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<Longrightarrow>\n       \\<exists>y.\n          The (subst_sv_subst_branchv_subst_branchlv_graph\n                (Inl (s, xa, va))) =\n          Inl y\n 2. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 3. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(auto)[1]"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s xa va x.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y \\<and>\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           y = y'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 2. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 3. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply (erule_tac x=\"x\" in allE)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s xa va x.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            x \\<and>\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 2. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 3. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply simp"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>s xa va x.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y'\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 2. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 3. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(cases rule: subst_sv_subst_branchv_subst_branchlv_graph.cases)"], ["proof (prove)\ngoal (16 subgoals):\n 1. \\<And>s xa va x.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y'\\<rbrakk>\n       \\<Longrightarrow> subst_sv_subst_branchv_subst_branchlv_graph\n                          (?a1.17 s xa va x) (?a2.17 s xa va x)\n 2. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl ([v']\\<^sup>s, xb, v);\n        ?a2.17 s xa va x = Inl [v'[xb::=v]\\<^sub>v\\<^sub>v]\\<^sup>s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 3. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y xb v e sa.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (LET y = e IN sa, xb, v);\n        ?a2.17 s xa va x =\n        Inl LET y = e[xb::=v]\\<^sub>e\\<^sub>v IN projl\n            (subst_sv_subst_branchv_subst_branchlv_sum (Inl (sa, xb, v)));\n        atom y \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (sa, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (sa, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 4. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y xb v t s1\n       s2.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (LET y : t = s1 IN s2, xb, v);\n        ?a2.17 s xa va x =\n        Inl LET y : t[xb::=v]\\<^sub>\\<tau>\\<^sub>v = projl\n                (subst_sv_subst_branchv_subst_branchlv_sum\n                  (Inl (s1, xb,\n                        v))) IN projl\n                                 (subst_sv_subst_branchv_subst_branchlv_sum\n                                   (Inl (s2, xb, v)));\n        atom y \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 5. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' cs xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (MATCH v' WITH { cs }, xb, v);\n        ?a2.17 s xa va x =\n        Inl MATCH v'[xb::=v]\\<^sub>v\\<^sub>v WITH { projr\n               (projr\n                 (subst_sv_subst_branchv_subst_branchlv_sum\n                   (Inr (Inr (cs, xb, v))))) };\n        subst_sv_subst_branchv_subst_branchlv_graph (Inr (Inr (cs, xb, v)))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inr (Inr (cs, xb, v))))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 6. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y v' xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (y ::= v', xb, v);\n        ?a2.17 s xa va x = Inl y ::= v'[xb::=v]\\<^sub>v\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 7. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' s1 s2 xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (IF v' THEN s1 ELSE s2, xb, v);\n        ?a2.17 s xa va x =\n        Inl (IF v'[xb::=v]\\<^sub>v\\<^sub>v THEN projl\n           (subst_sv_subst_branchv_subst_branchlv_sum\n             (Inl (s1, xb,\n                   v))) ELSE projl\n                              (subst_sv_subst_branchv_subst_branchlv_sum\n                                (Inl (s2, xb, v))));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 8. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum u xb v \\<tau>\n       v' sa.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (VAR u : \\<tau> = v' IN sa, xb, v);\n        ?a2.17 s xa va x =\n        Inl VAR u : \\<tau>[xb::=v]\\<^sub>\\<tau>\\<^sub>v = v'[xb::=v]\\<^sub>v\\<^sub>v IN projl\n             (subst_sv_subst_branchv_subst_branchlv_sum (Inl (sa, xb, v)));\n        atom u \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (sa, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (sa, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 9. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum s1 s2 xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        ?a1.17 s xa va x = Inl (WHILE s1 DO { s2 } , xb, v);\n        ?a2.17 s xa va x =\n        Inl (WHILE projl\n                    (subst_sv_subst_branchv_subst_branchlv_sum\n                      (Inl (s1, xb,\n                            v))) DO { projl\n (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s2, xb, v))) } );\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 10. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum s1 s2 xb v.\n        \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                  (Inl (s, xa, va)) x;\n         \\<forall>y'.\n            subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n             y' \\<longrightarrow>\n            x = y';\n         ?a1.17 s xa va x = Inl ( s1 ;; s2 , xb, v);\n         ?a2.17 s xa va x =\n         Inl ( (projl\n                 (subst_sv_subst_branchv_subst_branchlv_sum\n                   (Inl (s1, xb,\n                         v)))) ;; projl\n                                   (subst_sv_subst_branchv_subst_branchlv_sum\n                                     (Inl (s2, xb, v))) );\n         subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n          (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n         subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n          (subst_sv_subst_branchv_subst_branchlv_sum\n            (Inl (s2, xb, v)))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>y.\n                             The (subst_sv_subst_branchv_subst_branchlv_graph\n                                   (Inl (s, xa, va))) =\n                             Inl y\nA total of 16 subgoals...", "apply(assumption)"], ["proof (prove)\ngoal (15 subgoals):\n 1. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl ([v']\\<^sup>s, xb, v);\n        x = Inl [v'[xb::=v]\\<^sub>v\\<^sub>v]\\<^sup>s\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 2. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y xb v e sa.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (LET y = e IN sa, xb, v);\n        x =\n        Inl LET y = e[xb::=v]\\<^sub>e\\<^sub>v IN projl\n            (subst_sv_subst_branchv_subst_branchlv_sum (Inl (sa, xb, v)));\n        atom y \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (sa, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (sa, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 3. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y xb v t s1\n       s2.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (LET y : t = s1 IN s2, xb, v);\n        x =\n        Inl LET y : t[xb::=v]\\<^sub>\\<tau>\\<^sub>v = projl\n                (subst_sv_subst_branchv_subst_branchlv_sum\n                  (Inl (s1, xb,\n                        v))) IN projl\n                                 (subst_sv_subst_branchv_subst_branchlv_sum\n                                   (Inl (s2, xb, v)));\n        atom y \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 4. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' cs xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (MATCH v' WITH { cs }, xb, v);\n        x =\n        Inl MATCH v'[xb::=v]\\<^sub>v\\<^sub>v WITH { projr\n               (projr\n                 (subst_sv_subst_branchv_subst_branchlv_sum\n                   (Inr (Inr (cs, xb, v))))) };\n        subst_sv_subst_branchv_subst_branchlv_graph (Inr (Inr (cs, xb, v)))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inr (Inr (cs, xb, v))))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 5. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum y v' xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (y ::= v', xb, v);\n        x = Inl y ::= v'[xb::=v]\\<^sub>v\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 6. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum v' s1 s2 xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (IF v' THEN s1 ELSE s2, xb, v);\n        x =\n        Inl (IF v'[xb::=v]\\<^sub>v\\<^sub>v THEN projl\n           (subst_sv_subst_branchv_subst_branchlv_sum\n             (Inl (s1, xb,\n                   v))) ELSE projl\n                              (subst_sv_subst_branchv_subst_branchlv_sum\n                                (Inl (s2, xb, v))));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 7. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum u xb v \\<tau>\n       v' sa.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (VAR u : \\<tau> = v' IN sa, xb, v);\n        x =\n        Inl VAR u : \\<tau>[xb::=v]\\<^sub>\\<tau>\\<^sub>v = v'[xb::=v]\\<^sub>v\\<^sub>v IN projl\n             (subst_sv_subst_branchv_subst_branchlv_sum (Inl (sa, xb, v)));\n        atom u \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (sa, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (sa, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 8. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum s1 s2 xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl (WHILE s1 DO { s2 } , xb, v);\n        x =\n        Inl (WHILE projl\n                    (subst_sv_subst_branchv_subst_branchlv_sum\n                      (Inl (s1, xb,\n                            v))) DO { projl\n (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s2, xb, v))) } );\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 9. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum s1 s2 xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inl ( s1 ;; s2 , xb, v);\n        x =\n        Inl ( (projl\n                (subst_sv_subst_branchv_subst_branchlv_sum\n                  (Inl (s1, xb,\n                        v)))) ;; projl\n                                  (subst_sv_subst_branchv_subst_branchlv_sum\n                                    (Inl (s2, xb, v))) );\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v)));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s2, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s2, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 10. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum c sa xb v.\n        \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                  (Inl (s, xa, va)) x;\n         \\<forall>y'.\n            subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n             y' \\<longrightarrow>\n            x = y';\n         Inl (s, xa, va) = Inl (ASSERT c IN sa , xb, v);\n         x =\n         Inl ASSERT c[xb::=v]\\<^sub>c\\<^sub>v IN projl\n            (subst_sv_subst_branchv_subst_branchlv_sum (Inl (sa, xb, v))) ;\n         subst_sv_subst_branchv_subst_branchlv_graph (Inl (sa, xb, v))\n          (subst_sv_subst_branchv_subst_branchlv_sum\n            (Inl (sa, xb, v)))\\<rbrakk>\n        \\<Longrightarrow> \\<exists>y.\n                             The (subst_sv_subst_branchv_subst_branchlv_graph\n                                   (Inl (s, xa, va))) =\n                             Inl y\nA total of 15 subgoals...", "apply(rule_tac x=\"Sum_Type.projl x\" in exI,clarify,rule the1_equality,blast,simp (no_asm) only: sum.sel)+"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum x1 xb v dc s1.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xb, v));\n        x =\n        Inr (Inl  dc x1 \\<Rightarrow> projl\n (subst_sv_subst_branchv_subst_branchlv_sum (Inl (s1, xb, v))) );\n        atom x1 \\<sharp> (xb, v);\n        subst_sv_subst_branchv_subst_branchlv_graph (Inl (s1, xb, v))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inl (s1, xb, v)))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 2. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum cs xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inr (Inr ({ cs }, xb, v));\n        x =\n        Inr (Inr { projl\n                    (projr\n                      (subst_sv_subst_branchv_subst_branchlv_sum\n                        (Inr (Inl (cs, xb, v))))) });\n        subst_sv_subst_branchv_subst_branchlv_graph (Inr (Inl (cs, xb, v)))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inr (Inl (cs, xb, v))))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 3. \\<And>s xa va x subst_sv_subst_branchv_subst_branchlv_sum cs css xb v.\n       \\<lbrakk>subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va)) x;\n        \\<forall>y'.\n           subst_sv_subst_branchv_subst_branchlv_graph (Inl (s, xa, va))\n            y' \\<longrightarrow>\n           x = y';\n        Inl (s, xa, va) = Inr (Inr ( cs | css  , xb, v));\n        x =\n        Inr (Inr  projl\n                   (projr\n                     (subst_sv_subst_branchv_subst_branchlv_sum\n                       (Inr (Inl (cs, xb,\n                                  v))))) | projr\n      (projr\n        (subst_sv_subst_branchv_subst_branchlv_sum\n          (Inr (Inr (css, xb, v)))))  );\n        subst_sv_subst_branchv_subst_branchlv_graph (Inr (Inl (cs, xb, v)))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inr (Inl (cs, xb, v))));\n        subst_sv_subst_branchv_subst_branchlv_graph (Inr (Inr (css, xb, v)))\n         (subst_sv_subst_branchv_subst_branchlv_sum\n           (Inr (Inr (css, xb, v))))\\<rbrakk>\n       \\<Longrightarrow> \\<exists>y.\n                            The (subst_sv_subst_branchv_subst_branchlv_graph\n                                  (Inl (s, xa, va))) =\n                            Inl y\n 4. \\<And>s xa va.\n       \\<not> Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n                    (Inl (s, xa, va))) \\<Longrightarrow>\n       Ex1 (subst_sv_subst_branchv_subst_branchlv_graph\n             (Inl (s, xa, va))) \\<longrightarrow>\n       (\\<exists>y.\n           The (subst_sv_subst_branchv_subst_branchlv_graph\n                 (Inl (s, xa, va))) =\n           Inl y)\n 5. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply blast +"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>s xa va p.\n       \\<forall>p.\n          (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC)\n           (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)) =\n          subst_sv_subst_branchv_subst_branchlv_sumC\n           (Inl (p \\<bullet> s, p \\<bullet> xa,\n                 p \\<bullet> va)) \\<Longrightarrow>\n       projl\n        (p \\<bullet> subst_sv_subst_branchv_subst_branchlv_sumC\n                      (Inl (s, xa, va))) =\n       projl\n        (subst_sv_subst_branchv_subst_branchlv_sumC\n          (Inl (p \\<bullet> s, p \\<bullet> xa, p \\<bullet> va)))", "apply(simp)+"], ["proof (prove)\ngoal:\nNo subgoals!", "done"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (5 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           x = Inl (VAR u : \\<tau> = v' IN s, xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 4. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 5. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "{"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (5 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           x = Inl (VAR u : \\<tau> = v' IN s, xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 4. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 5. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "case (1 P x')"], ["proof (state)\nthis:\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P\n\ngoal (5 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>v' xa v.\n                   x = Inl ([v']\\<^sup>s, xa, v) \\<Longrightarrow> P;\n        \\<And>y xa v e s.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y = e IN s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y xa v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (xa, v);\n            x = Inl (LET y : t = s1 IN s2, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs xa v.\n           x = Inl (MATCH v' WITH { cs }, xa, v) \\<Longrightarrow> P;\n        \\<And>y v' xa v. x = Inl (y ::= v', xa, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 xa v.\n           x = Inl (IF v' THEN s1 ELSE s2, xa, v) \\<Longrightarrow> P;\n        \\<And>u xa v \\<tau> v' s.\n           x = Inl (VAR u : \\<tau> = v' IN s, xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v.\n           x = Inl (WHILE s1 DO { s2 } , xa, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 xa v. x = Inl ( s1 ;; s2 , xa, v) \\<Longrightarrow> P;\n        \\<And>c s xa v. x = Inl (ASSERT c IN s , xa, v) \\<Longrightarrow> P;\n        \\<And>x1 xa v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (xa, v);\n            x = Inr (Inl ( dc x1 \\<Rightarrow> s1 , xa, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs xa v. x = Inr (Inr ({ cs }, xa, v)) \\<Longrightarrow> P;\n        \\<And>cs css xa v.\n           x = Inr (Inr ( cs | css  , xa, v)) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 4. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 5. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "then"], ["proof (chain)\npicking this:\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P", "show ?case"], ["proof (prove)\nusing this:\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P\n\ngoal (1 subgoal):\n 1. P", "proof(cases x')"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inl a\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>b.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inr b\\<rbrakk>\n       \\<Longrightarrow> P", "case (Inl a)"], ["proof (state)\nthis:\n  x' = Inl a\n\ngoal (2 subgoals):\n 1. \\<And>a.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inl a\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>b.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inr b\\<rbrakk>\n       \\<Longrightarrow> P", "thus P"], ["proof (prove)\nusing this:\n  x' = Inl a\n\ngoal (1 subgoal):\n 1. P", "proof(cases a)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa b c.\n       \\<lbrakk>x' = Inl a; a = (aa, b, c)\\<rbrakk> \\<Longrightarrow> P", "case (fields aa bb cc)"], ["proof (state)\nthis:\n  a = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. \\<And>aa b c.\n       \\<lbrakk>x' = Inl a; a = (aa, b, c)\\<rbrakk> \\<Longrightarrow> P", "thus P"], ["proof (prove)\nusing this:\n  a = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. P", "using Inl 1 s_branch_s_branch_list.strong_exhaust fresh_star_insert"], ["proof (prove)\nusing this:\n  a = (aa, bb, cc)\n  x' = Inl a\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P\n  \\<lbrakk>\\<And>x1. ?y = [x1]\\<^sup>s \\<Longrightarrow> ?P;\n   \\<And>x21 x22 x23.\n      \\<lbrakk>{atom x21} \\<sharp>* ?c; ?y = LET x21 = x22 IN x23\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x31 x32 x33 x34.\n      \\<lbrakk>{atom x31} \\<sharp>* ?c;\n       ?y = LET x31 : x32 = x33 IN x34\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x41 x42 x43. ?y = IF x41 THEN x42 ELSE x43 \\<Longrightarrow> ?P;\n   \\<And>x51 x52 x53 x54.\n      \\<lbrakk>{atom x51} \\<sharp>* ?c;\n       ?y = VAR x51 : x52 = x53 IN x54\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x61 x62. ?y = x61 ::= x62 \\<Longrightarrow> ?P;\n   \\<And>x71 x72. ?y = MATCH x71 WITH { x72 } \\<Longrightarrow> ?P;\n   \\<And>x81 x82. ?y = WHILE x81 DO { x82 }  \\<Longrightarrow> ?P;\n   \\<And>x91 x92. ?y =  x91 ;; x92  \\<Longrightarrow> ?P;\n   \\<And>x101 x102. ?y = ASSERT x101 IN x102  \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  (\\<And>x1 x2 x3.\n      \\<lbrakk>{atom x2} \\<sharp>* ?c;\n       ?ya =  x1 x2 \\<Rightarrow> x3 \\<rbrakk>\n      \\<Longrightarrow> ?P) \\<Longrightarrow>\n  ?P\n  \\<lbrakk>\\<And>x1. ?yb = { x1 } \\<Longrightarrow> ?P;\n   \\<And>x21 x22. ?yb =  x21 | x22   \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  insert ?a ?as \\<sharp>* ?x = (?a \\<sharp> ?x \\<and> ?as \\<sharp>* ?x)\n\ngoal (1 subgoal):\n 1. P", "by metis"], ["proof (state)\nthis:\n  P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inr b\\<rbrakk>\n       \\<Longrightarrow> P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>b.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inr b\\<rbrakk>\n       \\<Longrightarrow> P", "case (Inr b)"], ["proof (state)\nthis:\n  x' = Inr b\n\ngoal (1 subgoal):\n 1. \\<And>b.\n       \\<lbrakk>\\<And>v' x v.\n                   x' = Inl ([v']\\<^sup>s, x, v) \\<Longrightarrow> P;\n        \\<And>y x v e s.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y = e IN s, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>y x v t s1 s2.\n           \\<lbrakk>atom y \\<sharp> (x, v);\n            x' = Inl (LET y : t = s1 IN s2, x, v)\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>v' cs x v.\n           x' = Inl (MATCH v' WITH { cs }, x, v) \\<Longrightarrow> P;\n        \\<And>y v' x v. x' = Inl (y ::= v', x, v) \\<Longrightarrow> P;\n        \\<And>v' s1 s2 x v.\n           x' = Inl (IF v' THEN s1 ELSE s2, x, v) \\<Longrightarrow> P;\n        \\<And>u \\<tau> v' s x v.\n           x' = Inl (VAR u : \\<tau> = v' IN s, x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v.\n           x' = Inl (WHILE s1 DO { s2 } , x, v) \\<Longrightarrow> P;\n        \\<And>s1 s2 x v. x' = Inl ( s1 ;; s2 , x, v) \\<Longrightarrow> P;\n        \\<And>c s x v. x' = Inl (ASSERT c IN s , x, v) \\<Longrightarrow> P;\n        \\<And>x1 x v dc s1.\n           \\<lbrakk>atom x1 \\<sharp> (x, v);\n            x' = Inr (Inl ( dc x1 \\<Rightarrow> s1 , x, v))\\<rbrakk>\n           \\<Longrightarrow> P;\n        \\<And>cs x v. x' = Inr (Inr ({ cs }, x, v)) \\<Longrightarrow> P;\n        \\<And>cs css x v.\n           x' = Inr (Inr ( cs | css  , x, v)) \\<Longrightarrow> P;\n        x' = Inr b\\<rbrakk>\n       \\<Longrightarrow> P", "thus P"], ["proof (prove)\nusing this:\n  x' = Inr b\n\ngoal (1 subgoal):\n 1. P", "proof(cases b)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>a. \\<lbrakk>x' = Inr b; b = Inl a\\<rbrakk> \\<Longrightarrow> P\n 2. \\<And>ba. \\<lbrakk>x' = Inr b; b = Inr ba\\<rbrakk> \\<Longrightarrow> P", "case (Inl a)"], ["proof (state)\nthis:\n  b = Inl a\n\ngoal (2 subgoals):\n 1. \\<And>a. \\<lbrakk>x' = Inr b; b = Inl a\\<rbrakk> \\<Longrightarrow> P\n 2. \\<And>ba. \\<lbrakk>x' = Inr b; b = Inr ba\\<rbrakk> \\<Longrightarrow> P", "thus P"], ["proof (prove)\nusing this:\n  b = Inl a\n\ngoal (1 subgoal):\n 1. P", "proof(cases a)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>aa ba c.\n       \\<lbrakk>b = Inl a; a = (aa, ba, c)\\<rbrakk> \\<Longrightarrow> P", "case (fields aa bb cc)"], ["proof (state)\nthis:\n  a = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. \\<And>aa ba c.\n       \\<lbrakk>b = Inl a; a = (aa, ba, c)\\<rbrakk> \\<Longrightarrow> P", "then"], ["proof (chain)\npicking this:\n  a = (aa, bb, cc)", "show ?thesis"], ["proof (prove)\nusing this:\n  a = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. P", "using Inr Inl 1 s_branch_s_branch_list.strong_exhaust fresh_star_insert"], ["proof (prove)\nusing this:\n  a = (aa, bb, cc)\n  x' = Inr b\n  b = Inl a\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P\n  \\<lbrakk>\\<And>x1. ?y = [x1]\\<^sup>s \\<Longrightarrow> ?P;\n   \\<And>x21 x22 x23.\n      \\<lbrakk>{atom x21} \\<sharp>* ?c; ?y = LET x21 = x22 IN x23\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x31 x32 x33 x34.\n      \\<lbrakk>{atom x31} \\<sharp>* ?c;\n       ?y = LET x31 : x32 = x33 IN x34\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x41 x42 x43. ?y = IF x41 THEN x42 ELSE x43 \\<Longrightarrow> ?P;\n   \\<And>x51 x52 x53 x54.\n      \\<lbrakk>{atom x51} \\<sharp>* ?c;\n       ?y = VAR x51 : x52 = x53 IN x54\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x61 x62. ?y = x61 ::= x62 \\<Longrightarrow> ?P;\n   \\<And>x71 x72. ?y = MATCH x71 WITH { x72 } \\<Longrightarrow> ?P;\n   \\<And>x81 x82. ?y = WHILE x81 DO { x82 }  \\<Longrightarrow> ?P;\n   \\<And>x91 x92. ?y =  x91 ;; x92  \\<Longrightarrow> ?P;\n   \\<And>x101 x102. ?y = ASSERT x101 IN x102  \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  (\\<And>x1 x2 x3.\n      \\<lbrakk>{atom x2} \\<sharp>* ?c;\n       ?ya =  x1 x2 \\<Rightarrow> x3 \\<rbrakk>\n      \\<Longrightarrow> ?P) \\<Longrightarrow>\n  ?P\n  \\<lbrakk>\\<And>x1. ?yb = { x1 } \\<Longrightarrow> ?P;\n   \\<And>x21 x22. ?yb =  x21 | x22   \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  insert ?a ?as \\<sharp>* ?x = (?a \\<sharp> ?x \\<and> ?as \\<sharp>* ?x)\n\ngoal (1 subgoal):\n 1. P", "by metis"], ["proof (state)\nthis:\n  P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P\n\ngoal (1 subgoal):\n 1. \\<And>ba. \\<lbrakk>x' = Inr b; b = Inr ba\\<rbrakk> \\<Longrightarrow> P", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>ba. \\<lbrakk>x' = Inr b; b = Inr ba\\<rbrakk> \\<Longrightarrow> P", "case Inr2: (Inr b)"], ["proof (state)\nthis:\n  b__ = Inr b\n\ngoal (1 subgoal):\n 1. \\<And>ba.\n       \\<lbrakk>x' = Inr b__; b__ = Inr ba\\<rbrakk> \\<Longrightarrow> P", "thus P"], ["proof (prove)\nusing this:\n  b__ = Inr b\n\ngoal (1 subgoal):\n 1. P", "proof(cases b)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>a bb c.\n       \\<lbrakk>b__ = Inr b; b = (a, bb, c)\\<rbrakk> \\<Longrightarrow> P", "case (fields aa bb cc)"], ["proof (state)\nthis:\n  b = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. \\<And>a bb c.\n       \\<lbrakk>b__ = Inr b; b = (a, bb, c)\\<rbrakk> \\<Longrightarrow> P", "then"], ["proof (chain)\npicking this:\n  b = (aa, bb, cc)", "show ?thesis"], ["proof (prove)\nusing this:\n  b = (aa, bb, cc)\n\ngoal (1 subgoal):\n 1. P", "using Inr Inr2 1 s_branch_s_branch_list.strong_exhaust fresh_star_insert"], ["proof (prove)\nusing this:\n  b = (aa, bb, cc)\n  x' = Inr b__\n  b__ = Inr b\n  x' = Inl ([?v']\\<^sup>s, ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y = ?e IN ?s, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  \\<lbrakk>atom ?y \\<sharp> (?x, ?v);\n   x' = Inl (LET ?y : ?t = ?s1.0 IN ?s2.0, ?x, ?v)\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inl (MATCH ?v' WITH { ?cs }, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (?y ::= ?v', ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (IF ?v' THEN ?s1.0 ELSE ?s2.0, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (VAR ?u : ?\\<tau> = ?v' IN ?s, ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (WHILE ?s1.0 DO { ?s2.0 } , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl ( ?s1.0 ;; ?s2.0 , ?x, ?v) \\<Longrightarrow> P\n  x' = Inl (ASSERT ?c IN ?s , ?x, ?v) \\<Longrightarrow> P\n  \\<lbrakk>atom ?x1.0 \\<sharp> (?x, ?v);\n   x' = Inr (Inl ( ?dc ?x1.0 \\<Rightarrow> ?s1.0 , ?x, ?v))\\<rbrakk>\n  \\<Longrightarrow> P\n  x' = Inr (Inr ({ ?cs }, ?x, ?v)) \\<Longrightarrow> P\n  x' = Inr (Inr ( ?cs | ?css  , ?x, ?v)) \\<Longrightarrow> P\n  \\<lbrakk>\\<And>x1. ?y = [x1]\\<^sup>s \\<Longrightarrow> ?P;\n   \\<And>x21 x22 x23.\n      \\<lbrakk>{atom x21} \\<sharp>* ?c; ?y = LET x21 = x22 IN x23\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x31 x32 x33 x34.\n      \\<lbrakk>{atom x31} \\<sharp>* ?c;\n       ?y = LET x31 : x32 = x33 IN x34\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x41 x42 x43. ?y = IF x41 THEN x42 ELSE x43 \\<Longrightarrow> ?P;\n   \\<And>x51 x52 x53 x54.\n      \\<lbrakk>{atom x51} \\<sharp>* ?c;\n       ?y = VAR x51 : x52 = x53 IN x54\\<rbrakk>\n      \\<Longrightarrow> ?P;\n   \\<And>x61 x62. ?y = x61 ::= x62 \\<Longrightarrow> ?P;\n   \\<And>x71 x72. ?y = MATCH x71 WITH { x72 } \\<Longrightarrow> ?P;\n   \\<And>x81 x82. ?y = WHILE x81 DO { x82 }  \\<Longrightarrow> ?P;\n   \\<And>x91 x92. ?y =  x91 ;; x92  \\<Longrightarrow> ?P;\n   \\<And>x101 x102. ?y = ASSERT x101 IN x102  \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  (\\<And>x1 x2 x3.\n      \\<lbrakk>{atom x2} \\<sharp>* ?c;\n       ?ya =  x1 x2 \\<Rightarrow> x3 \\<rbrakk>\n      \\<Longrightarrow> ?P) \\<Longrightarrow>\n  ?P\n  \\<lbrakk>\\<And>x1. ?yb = { x1 } \\<Longrightarrow> ?P;\n   \\<And>x21 x22. ?yb =  x21 | x22   \\<Longrightarrow> ?P\\<rbrakk>\n  \\<Longrightarrow> ?P\n  insert ?a ?as \\<sharp>* ?x = (?a \\<sharp> ?x \\<and> ?as \\<sharp>* ?x)\n\ngoal (1 subgoal):\n 1. P", "by metis"], ["proof (state)\nthis:\n  P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  P\n\ngoal (4 subgoals):\n 1. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 3. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 4. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "next"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 3. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 4. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "case (2 y s ya xa va sa c)"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya))\n  atom y \\<sharp> (s, ya)\n  atom va \\<sharp> (s, ya)\n  \\<forall>c.\n     atom c \\<sharp> (xa, sa) \\<longrightarrow>\n     atom c \\<sharp> (y, va, xa, sa) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (xa, ya, s, sa)\n  atom\n   c \\<sharp> (y, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, s, ya))))\n\ngoal (4 subgoals):\n 1. \\<And>y x v s ya sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s, sa) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s =\n           (ya \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 3. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 4. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "thus ?case"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya))\n  atom y \\<sharp> (s, ya)\n  atom va \\<sharp> (s, ya)\n  \\<forall>c.\n     atom c \\<sharp> (xa, sa) \\<longrightarrow>\n     atom c \\<sharp> (y, va, xa, sa) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (xa, ya, s, sa)\n  atom\n   c \\<sharp> (y, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, s, ya))))\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s, ya))) =\n    (va \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya)))", "using eqvt_triple eqvt_at_proj"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya))\n  atom y \\<sharp> (s, ya)\n  atom va \\<sharp> (s, ya)\n  \\<forall>c.\n     atom c \\<sharp> (xa, sa) \\<longrightarrow>\n     atom c \\<sharp> (y, va, xa, sa) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (xa, ya, s, sa)\n  atom\n   c \\<sharp> (y, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, s, ya))))\n  \\<lbrakk>atom ?y \\<sharp> (?xa, ?va); atom ?ya \\<sharp> (?xa, ?va);\n   \\<forall>c.\n      atom c \\<sharp> (?s, ?sa) \\<longrightarrow>\n      atom c \\<sharp> (?y, ?ya, ?s, ?sa) \\<longrightarrow>\n      (?y \\<leftrightarrow> c) \\<bullet> ?s =\n      (?ya \\<leftrightarrow> c) \\<bullet> ?sa;\n   eqvt_at ?f (?s, ?xa, ?va); eqvt_at ?f (?sa, ?xa, ?va);\n   atom ?c \\<sharp> (?s, ?va, ?xa, ?sa);\n   atom\n    ?c \\<sharp> (?y, ?ya, ?f (?s, ?xa, ?va), ?f (?sa, ?xa, ?va))\\<rbrakk>\n  \\<Longrightarrow> (?y \\<leftrightarrow> ?c) \\<bullet> ?f (?s, ?xa, ?va) =\n                    (?ya \\<leftrightarrow> ?c) \\<bullet> ?f (?sa, ?xa, ?va)\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s, ya))) =\n    (va \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya)))", "by blast"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> c) \\<bullet> projl\n                                     (subst_sv_subst_branchv_subst_branchlv_sumC\n (Inl (xa, s, ya))) =\n  (va \\<leftrightarrow> c) \\<bullet> projl\n(subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, s, ya)))\n\ngoal (3 subgoals):\n 1. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 2. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 2. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "case (3 y s2 ya xa va s1a s2a c)"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (va, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya))\n  atom y \\<sharp> (s2, ya)\n  atom s1a \\<sharp> (s2, ya)\n  \\<forall>c.\n     atom c \\<sharp> (va, s2a) \\<longrightarrow>\n     atom c \\<sharp> (y, s1a, va, s2a) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> va =\n     (s1a \\<leftrightarrow> c) \\<bullet> s2a\n  atom c \\<sharp> (va, ya, s2, s2a)\n  atom\n   c \\<sharp> (y, s1a,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (va, s2, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s2a, s2, ya))))\n\ngoal (3 subgoals):\n 1. \\<And>y x v s1 s2 ya s2a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s2, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s2a, x, v));\n        atom y \\<sharp> (x, v); atom ya \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s2, s2a) \\<longrightarrow>\n           atom c \\<sharp> (y, ya, s2, s2a) \\<longrightarrow>\n           (y \\<leftrightarrow> c) \\<bullet> s2 =\n           (ya \\<leftrightarrow> c) \\<bullet> s2a;\n        atom c \\<sharp> (s2, v, x, s2a);\n        atom\n         c \\<sharp> (y, ya,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (y \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s2, x, v))) =\n                         (ya \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s2a, x, v)))\n 2. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 3. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "thus ?case"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (va, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya))\n  atom y \\<sharp> (s2, ya)\n  atom s1a \\<sharp> (s2, ya)\n  \\<forall>c.\n     atom c \\<sharp> (va, s2a) \\<longrightarrow>\n     atom c \\<sharp> (y, s1a, va, s2a) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> va =\n     (s1a \\<leftrightarrow> c) \\<bullet> s2a\n  atom c \\<sharp> (va, ya, s2, s2a)\n  atom\n   c \\<sharp> (y, s1a,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (va, s2, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s2a, s2, ya))))\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (va, s2, ya))) =\n    (s1a \\<leftrightarrow> c) \\<bullet> projl\n   (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya)))", "using eqvt_triple eqvt_at_proj"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (va, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s2, ya))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya))\n  atom y \\<sharp> (s2, ya)\n  atom s1a \\<sharp> (s2, ya)\n  \\<forall>c.\n     atom c \\<sharp> (va, s2a) \\<longrightarrow>\n     atom c \\<sharp> (y, s1a, va, s2a) \\<longrightarrow>\n     (y \\<leftrightarrow> c) \\<bullet> va =\n     (s1a \\<leftrightarrow> c) \\<bullet> s2a\n  atom c \\<sharp> (va, ya, s2, s2a)\n  atom\n   c \\<sharp> (y, s1a,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (va, s2, ya))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s2a, s2, ya))))\n  \\<lbrakk>atom ?y \\<sharp> (?xa, ?va); atom ?ya \\<sharp> (?xa, ?va);\n   \\<forall>c.\n      atom c \\<sharp> (?s, ?sa) \\<longrightarrow>\n      atom c \\<sharp> (?y, ?ya, ?s, ?sa) \\<longrightarrow>\n      (?y \\<leftrightarrow> c) \\<bullet> ?s =\n      (?ya \\<leftrightarrow> c) \\<bullet> ?sa;\n   eqvt_at ?f (?s, ?xa, ?va); eqvt_at ?f (?sa, ?xa, ?va);\n   atom ?c \\<sharp> (?s, ?va, ?xa, ?sa);\n   atom\n    ?c \\<sharp> (?y, ?ya, ?f (?s, ?xa, ?va), ?f (?sa, ?xa, ?va))\\<rbrakk>\n  \\<Longrightarrow> (?y \\<leftrightarrow> ?c) \\<bullet> ?f (?s, ?xa, ?va) =\n                    (?ya \\<leftrightarrow> ?c) \\<bullet> ?f (?sa, ?xa, ?va)\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (1 subgoal):\n 1. (y \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (va, s2, ya))) =\n    (s1a \\<leftrightarrow> c) \\<bullet> projl\n   (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya)))", "by blast"], ["proof (state)\nthis:\n  (y \\<leftrightarrow> c) \\<bullet> projl\n                                     (subst_sv_subst_branchv_subst_branchlv_sumC\n (Inl (va, s2, ya))) =\n  (s1a \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s2a, s2, ya)))\n\ngoal (2 subgoals):\n 1. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "case (4 u xa va s ua sa c)"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va))\n  \\<forall>c.\n     atom c \\<sharp> (s, sa) \\<longrightarrow>\n     atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n     (u \\<leftrightarrow> c) \\<bullet> s =\n     (ua \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (s, va, xa, sa)\n  atom\n   c \\<sharp> (u, ua,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, xa, va))))\n\ngoal (2 subgoals):\n 1. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "moreover"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va))\n  \\<forall>c.\n     atom c \\<sharp> (s, sa) \\<longrightarrow>\n     atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n     (u \\<leftrightarrow> c) \\<bullet> s =\n     (ua \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (s, va, xa, sa)\n  atom\n   c \\<sharp> (u, ua,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, xa, va))))\n\ngoal (2 subgoals):\n 1. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "have \"atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)", "using fresh_Pair u_fresh_xv"], ["proof (prove)\nusing this:\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  atom ?u \\<sharp> (?x, ?v)\n\ngoal (1 subgoal):\n 1. atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)", "by auto"], ["proof (state)\nthis:\n  atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)\n\ngoal (2 subgoals):\n 1. \\<And>u x v s ua sa c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, x, v));\n        \\<forall>c.\n           atom c \\<sharp> (s, sa) \\<longrightarrow>\n           atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n           (u \\<leftrightarrow> c) \\<bullet> s =\n           (ua \\<leftrightarrow> c) \\<bullet> sa;\n        atom c \\<sharp> (s, v, x, sa);\n        atom\n         c \\<sharp> (u, ua,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (sa, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (u \\<leftrightarrow> c) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s, x, v))) =\n                         (ua \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (sa, x, v)))\n 2. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "ultimately"], ["proof (chain)\npicking this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va))\n  \\<forall>c.\n     atom c \\<sharp> (s, sa) \\<longrightarrow>\n     atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n     (u \\<leftrightarrow> c) \\<bullet> s =\n     (ua \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (s, va, xa, sa)\n  atom\n   c \\<sharp> (u, ua,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, xa, va))))\n  atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)", "show ?case"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va))\n  \\<forall>c.\n     atom c \\<sharp> (s, sa) \\<longrightarrow>\n     atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n     (u \\<leftrightarrow> c) \\<bullet> s =\n     (ua \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (s, va, xa, sa)\n  atom\n   c \\<sharp> (u, ua,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, xa, va))))\n  atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)\n\ngoal (1 subgoal):\n 1. (u \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))) =\n    (ua \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va)))", "using eqvt_triple[of u xa va ua s sa]  subst_sv_def eqvt_at_proj"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va))\n  \\<forall>c.\n     atom c \\<sharp> (s, sa) \\<longrightarrow>\n     atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n     (u \\<leftrightarrow> c) \\<bullet> s =\n     (ua \\<leftrightarrow> c) \\<bullet> sa\n  atom c \\<sharp> (s, va, xa, sa)\n  atom\n   c \\<sharp> (u, ua,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s, xa, va))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (sa, xa, va))))\n  atom u \\<sharp> (xa, va) \\<and> atom ua \\<sharp> (xa, va)\n  \\<lbrakk>atom u \\<sharp> (xa, va); atom ua \\<sharp> (xa, va);\n   \\<forall>c.\n      atom c \\<sharp> (s, sa) \\<longrightarrow>\n      atom c \\<sharp> (u, ua, s, sa) \\<longrightarrow>\n      (u \\<leftrightarrow> c) \\<bullet> s =\n      (ua \\<leftrightarrow> c) \\<bullet> sa;\n   eqvt_at ?f (s, xa, va); eqvt_at ?f (sa, xa, va);\n   atom ?c \\<sharp> (s, va, xa, sa);\n   atom ?c \\<sharp> (u, ua, ?f (s, xa, va), ?f (sa, xa, va))\\<rbrakk>\n  \\<Longrightarrow> (u \\<leftrightarrow> ?c) \\<bullet> ?f (s, xa, va) =\n                    (ua \\<leftrightarrow> ?c) \\<bullet> ?f (sa, xa, va)\n  subst_sv \\<equiv>\n  \\<lambda>x0 x1 x2.\n     projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (x0, x1, x2)))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (1 subgoal):\n 1. (u \\<leftrightarrow> c) \\<bullet> projl\n (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s, xa, va))) =\n    (ua \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va)))", "by metis"], ["proof (state)\nthis:\n  (u \\<leftrightarrow> c) \\<bullet> projl\n                                     (subst_sv_subst_branchv_subst_branchlv_sumC\n (Inl (s, xa, va))) =\n  (ua \\<leftrightarrow> c) \\<bullet> projl\n(subst_sv_subst_branchv_subst_branchlv_sumC (Inl (sa, xa, va)))\n\ngoal (1 subgoal):\n 1. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "case (5 x1 s1 x1a xa va s1a c)"], ["proof (state)\nthis:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a))\n  atom x1 \\<sharp> (s1, x1a)\n  atom va \\<sharp> (s1, x1a)\n  \\<forall>c.\n     atom c \\<sharp> (xa, s1a) \\<longrightarrow>\n     atom c \\<sharp> (x1, va, xa, s1a) \\<longrightarrow>\n     (x1 \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> s1a\n  atom c \\<sharp> (xa, x1a, s1, s1a)\n  atom\n   c \\<sharp> (x1, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s1, x1a))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s1a, s1, x1a))))\n\ngoal (1 subgoal):\n 1. \\<And>x1 x v s1 x1a s1a c.\n       \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n                 (Inl (s1, x, v));\n        eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n         (Inl (s1a, x, v));\n        atom x1 \\<sharp> (x, v); atom x1a \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (s1, s1a) \\<longrightarrow>\n           atom c \\<sharp> (x1, x1a, s1, s1a) \\<longrightarrow>\n           (x1 \\<leftrightarrow> c) \\<bullet> s1 =\n           (x1a \\<leftrightarrow> c) \\<bullet> s1a;\n        atom c \\<sharp> (s1, v, x, s1a);\n        atom\n         c \\<sharp> (x1, x1a,\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1, x, v))),\n                     projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (s1a, x, v))))\\<rbrakk>\n       \\<Longrightarrow> (x1 \\<leftrightarrow> c) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (s1, x, v))) =\n                         (x1a \\<leftrightarrow> c) \\<bullet> projl\n                        (subst_sv_subst_branchv_subst_branchlv_sumC\n                          (Inl (s1a, x, v)))", "thus ?case"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a))\n  atom x1 \\<sharp> (s1, x1a)\n  atom va \\<sharp> (s1, x1a)\n  \\<forall>c.\n     atom c \\<sharp> (xa, s1a) \\<longrightarrow>\n     atom c \\<sharp> (x1, va, xa, s1a) \\<longrightarrow>\n     (x1 \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> s1a\n  atom c \\<sharp> (xa, x1a, s1, s1a)\n  atom\n   c \\<sharp> (x1, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s1, x1a))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s1a, s1, x1a))))\n\ngoal (1 subgoal):\n 1. (x1 \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))) =\n    (va \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a)))", "using eqvt_triple eqvt_at_proj"], ["proof (prove)\nusing this:\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a))\n  atom x1 \\<sharp> (s1, x1a)\n  atom va \\<sharp> (s1, x1a)\n  \\<forall>c.\n     atom c \\<sharp> (xa, s1a) \\<longrightarrow>\n     atom c \\<sharp> (x1, va, xa, s1a) \\<longrightarrow>\n     (x1 \\<leftrightarrow> c) \\<bullet> xa =\n     (va \\<leftrightarrow> c) \\<bullet> s1a\n  atom c \\<sharp> (xa, x1a, s1, s1a)\n  atom\n   c \\<sharp> (x1, va,\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (xa, s1, x1a))),\n               projl\n                (subst_sv_subst_branchv_subst_branchlv_sumC\n                  (Inl (s1a, s1, x1a))))\n  \\<lbrakk>atom ?y \\<sharp> (?xa, ?va); atom ?ya \\<sharp> (?xa, ?va);\n   \\<forall>c.\n      atom c \\<sharp> (?s, ?sa) \\<longrightarrow>\n      atom c \\<sharp> (?y, ?ya, ?s, ?sa) \\<longrightarrow>\n      (?y \\<leftrightarrow> c) \\<bullet> ?s =\n      (?ya \\<leftrightarrow> c) \\<bullet> ?sa;\n   eqvt_at ?f (?s, ?xa, ?va); eqvt_at ?f (?sa, ?xa, ?va);\n   atom ?c \\<sharp> (?s, ?va, ?xa, ?sa);\n   atom\n    ?c \\<sharp> (?y, ?ya, ?f (?s, ?xa, ?va), ?f (?sa, ?xa, ?va))\\<rbrakk>\n  \\<Longrightarrow> (?y \\<leftrightarrow> ?c) \\<bullet> ?f (?s, ?xa, ?va) =\n                    (?ya \\<leftrightarrow> ?c) \\<bullet> ?f (?sa, ?xa, ?va)\n  eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n   (Inl (?s, ?xa, ?va)) \\<Longrightarrow>\n  eqvt_at\n   (\\<lambda>a. projl (subst_sv_subst_branchv_subst_branchlv_sumC (Inl a)))\n   (?s, ?xa, ?va)\n\ngoal (1 subgoal):\n 1. (x1 \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))) =\n    (va \\<leftrightarrow> c) \\<bullet> projl\n  (subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a)))", "by blast"], ["proof (state)\nthis:\n  (x1 \\<leftrightarrow> c) \\<bullet> projl\n(subst_sv_subst_branchv_subst_branchlv_sumC (Inl (xa, s1, x1a))) =\n  (va \\<leftrightarrow> c) \\<bullet> projl\n(subst_sv_subst_branchv_subst_branchlv_sumC (Inl (s1a, s1, x1a)))\n\ngoal:\nNo subgoals!", "}"], ["proof (state)\nthis:\n  \\<lbrakk>eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n            (Inl (?xa2, ?s1.2, ?x1a2));\n   eqvt_at subst_sv_subst_branchv_subst_branchlv_sumC\n    (Inl (?s1a2, ?s1.2, ?x1a2));\n   atom ?x1.2 \\<sharp> (?s1.2, ?x1a2); atom ?va2 \\<sharp> (?s1.2, ?x1a2);\n   \\<forall>c.\n      atom c \\<sharp> (?xa2, ?s1a2) \\<longrightarrow>\n      atom c \\<sharp> (?x1.2, ?va2, ?xa2, ?s1a2) \\<longrightarrow>\n      (?x1.2 \\<leftrightarrow> c) \\<bullet> ?xa2 =\n      (?va2 \\<leftrightarrow> c) \\<bullet> ?s1a2;\n   atom ?c2 \\<sharp> (?xa2, ?x1a2, ?s1.2, ?s1a2);\n   atom\n    ?c2 \\<sharp> (?x1.2, ?va2,\n                  projl\n                   (subst_sv_subst_branchv_subst_branchlv_sumC\n                     (Inl (?xa2, ?s1.2, ?x1a2))),\n                  projl\n                   (subst_sv_subst_branchv_subst_branchlv_sumC\n                     (Inl (?s1a2, ?s1.2, ?x1a2))))\\<rbrakk>\n  \\<Longrightarrow> (?x1.2 \\<leftrightarrow> ?c2) \\<bullet> projl\n                       (subst_sv_subst_branchv_subst_branchlv_sumC\n                         (Inl (?xa2, ?s1.2, ?x1a2))) =\n                    (?va2 \\<leftrightarrow> ?c2) \\<bullet> projl\n                      (subst_sv_subst_branchv_subst_branchlv_sumC\n                        (Inl (?s1a2, ?s1.2, ?x1a2)))\n\ngoal:\nNo subgoals!", "qed"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_sv_subst_branchv_subst_branchlv_dom", "by lexicographic_order"], ["", "abbreviation \n  subst_sv_abbrev :: \"s \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> s\" (\"_[_::=_]\\<^sub>s\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"s[x::=v]\\<^sub>s\\<^sub>v  \\<equiv> subst_sv s x v\""], ["", "abbreviation \n  subst_branchv_abbrev :: \"branch_s \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> branch_s\" (\"_[_::=_]\\<^sub>s\\<^sub>v\" [1000,50,50] 1000)\n  where \n    \"s[x::=v]\\<^sub>s\\<^sub>v  \\<equiv> subst_branchv s x v\""], ["", "lemma size_subst_sv [simp]:  \"size (subst_sv A i x ) = size A\" and  \"size (subst_branchv B i x ) = size B\"  and  \"size (subst_branchlv C i x ) = size C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size A[i::=x]\\<^sub>s\\<^sub>v = size A &&&\n    size B[i::=x]\\<^sub>s\\<^sub>v = size B &&&\n    size (subst_branchlv C i x) = size C", "by(nominal_induct A and B and C avoiding: i x rule: s_branch_s_branch_list.strong_induct,auto)"], ["", "lemma forget_subst_sv [simp]: shows  \"atom a \\<sharp> A \\<Longrightarrow> subst_sv A a x = A\" and \"atom a \\<sharp> B \\<Longrightarrow> subst_branchv B a x = B\" and \"atom a \\<sharp> C \\<Longrightarrow> subst_branchlv C a x  = C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom a \\<sharp> A \\<Longrightarrow> A[a::=x]\\<^sub>s\\<^sub>v = A) &&&\n    (atom a \\<sharp> B \\<Longrightarrow> B[a::=x]\\<^sub>s\\<^sub>v = B) &&&\n    (atom a \\<sharp> C \\<Longrightarrow> subst_branchlv C a x = C)", "by (nominal_induct A and B and C avoiding: a x rule: s_branch_s_branch_list.strong_induct,auto simp: fresh_at_base)"], ["", "lemma subst_sv_id [simp]: \"subst_sv A a (V_var a) = A\" and \"subst_branchv B a (V_var a) = B\" and  \"subst_branchlv C a (V_var a)  = C\""], ["proof (prove)\ngoal (1 subgoal):\n 1. A[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = A &&&\n    B[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = B &&&\n    subst_branchlv C a [ a ]\\<^sup>v = C", "proof(nominal_induct A and B and C avoiding: a  rule: s_branch_s_branch_list.strong_induct)"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> LET x1 = x2 IN x3[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 = x2 IN x3\n 3. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 4. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 5. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 6. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 7. \\<And>x1 x2 a.\n       (\\<And>b. subst_branchlv x2 b [ b ]\\<^sup>v = x2) \\<Longrightarrow>\n       MATCH x1 WITH { x2 }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       MATCH x1 WITH { x2 }\n 8. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 9. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 10. \\<And>x1 x2 a.\n        (\\<And>b.\n            x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n        ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n        ASSERT x1 IN x2 \nA total of 13 subgoals...", "case (AS_let x option e s)"], ["proof (state)\nthis:\n  atom x \\<sharp> s\n  e[?b::=[ ?b ]\\<^sup>v]\\<^sub>s\\<^sub>v = e\n\ngoal (13 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> LET x1 = x2 IN x3[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 = x2 IN x3\n 3. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 4. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 5. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 6. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 7. \\<And>x1 x2 a.\n       (\\<And>b. subst_branchlv x2 b [ b ]\\<^sup>v = x2) \\<Longrightarrow>\n       MATCH x1 WITH { x2 }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       MATCH x1 WITH { x2 }\n 8. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 9. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 10. \\<And>x1 x2 a.\n        (\\<And>b.\n            x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n        ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n        ASSERT x1 IN x2 \nA total of 13 subgoals...", "then"], ["proof (chain)\npicking this:\n  atom x \\<sharp> s\n  e[?b::=[ ?b ]\\<^sup>v]\\<^sub>s\\<^sub>v = e", "show ?case"], ["proof (prove)\nusing this:\n  atom x \\<sharp> s\n  e[?b::=[ ?b ]\\<^sup>v]\\<^sub>s\\<^sub>v = e\n\ngoal (1 subgoal):\n 1. LET x = option IN e[s::=[ s ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n    LET x = option IN e", "by (metis (no_types, lifting) fresh_Pair not_None_eq subst_ev_id subst_sv.simps(2) subst_sv.simps(3) subst_tv_id v.fresh(2))"], ["proof (state)\nthis:\n  LET x = option IN e[s::=[ s ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n  LET x = option IN e\n\ngoal (12 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 3. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 4. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 5. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 6. \\<And>x1 x2 a.\n       (\\<And>b. subst_branchlv x2 b [ b ]\\<^sup>v = x2) \\<Longrightarrow>\n       MATCH x1 WITH { x2 }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       MATCH x1 WITH { x2 }\n 7. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 8. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 9. \\<And>x1 x2 a.\n       (\\<And>b.\n           x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n       ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       ASSERT x1 IN x2 \n 10. \\<And>x1 x2 x3 a.\n        \\<lbrakk>atom x2 \\<sharp> a;\n         \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n        \\<Longrightarrow>  x1 x2 \\<Rightarrow> x3 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                           x1 x2 \\<Rightarrow> x3 \nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 3. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 4. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 5. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 6. \\<And>x1 x2 a.\n       (\\<And>b. subst_branchlv x2 b [ b ]\\<^sup>v = x2) \\<Longrightarrow>\n       MATCH x1 WITH { x2 }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       MATCH x1 WITH { x2 }\n 7. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 8. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 9. \\<And>x1 x2 a.\n       (\\<And>b.\n           x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n       ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       ASSERT x1 IN x2 \n 10. \\<And>x1 x2 x3 a.\n        \\<lbrakk>atom x2 \\<sharp> a;\n         \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n        \\<Longrightarrow>  x1 x2 \\<Rightarrow> x3 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                           x1 x2 \\<Rightarrow> x3 \nA total of 12 subgoals...", "case (AS_match v branch_s)"], ["proof (state)\nthis:\n  subst_branchlv branch_s ?b [ ?b ]\\<^sup>v = branch_s\n\ngoal (12 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 3. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 4. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 5. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 6. \\<And>x1 x2 a.\n       (\\<And>b. subst_branchlv x2 b [ b ]\\<^sup>v = x2) \\<Longrightarrow>\n       MATCH x1 WITH { x2 }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       MATCH x1 WITH { x2 }\n 7. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 8. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 9. \\<And>x1 x2 a.\n       (\\<And>b.\n           x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n       ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       ASSERT x1 IN x2 \n 10. \\<And>x1 x2 x3 a.\n        \\<lbrakk>atom x2 \\<sharp> a;\n         \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n        \\<Longrightarrow>  x1 x2 \\<Rightarrow> x3 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                           x1 x2 \\<Rightarrow> x3 \nA total of 12 subgoals...", "then"], ["proof (chain)\npicking this:\n  subst_branchlv branch_s ?b [ ?b ]\\<^sup>v = branch_s", "show ?case"], ["proof (prove)\nusing this:\n  subst_branchlv branch_s ?b [ ?b ]\\<^sup>v = branch_s\n\ngoal (1 subgoal):\n 1. MATCH v WITH { branch_s }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n    MATCH v WITH { branch_s }", "using fresh_Pair not_None_eq subst_ev_id subst_sv.simps subst_sv.simps subst_tv_id v.fresh subst_vv_id"], ["proof (prove)\nusing this:\n  subst_branchlv branch_s ?b [ ?b ]\\<^sup>v = branch_s\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  (?x \\<noteq> None) = (\\<exists>y. ?x = Some y)\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>e\\<^sub>v = ?A\n  [?v']\\<^sup>s[?x::=?v]\\<^sub>s\\<^sub>v =\n  [?v'[?x::=?v]\\<^sub>v\\<^sub>v]\\<^sup>s\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y = ?e IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y = ?e[?x::=?v]\\<^sub>e\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y : ?t = ?s1.0 IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y : ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  MATCH ?v' WITH { ?cs }[?x::=?v]\\<^sub>s\\<^sub>v =\n  MATCH ?v'[?x::=?v]\\<^sub>v\\<^sub>v WITH { subst_branchlv ?cs ?x ?v }\n  ?y ::= ?v'[?x::=?v]\\<^sub>s\\<^sub>v = ?y ::= ?v'[?x::=?v]\\<^sub>v\\<^sub>v\n  (IF ?v' THEN ?s1.0 ELSE ?s2.0)[?x::=?v]\\<^sub>s\\<^sub>v =\n  IF ?v'[?x::=?v]\\<^sub>v\\<^sub>v THEN ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ELSE ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?u \\<sharp> (?x, ?v) \\<Longrightarrow>\n  VAR ?u : ?\\<tau> = ?v' IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  VAR ?u : ?\\<tau>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?v'[?x::=?v]\\<^sub>v\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  (WHILE ?s1.0 DO { ?s2.0 } )[?x::=?v]\\<^sub>s\\<^sub>v =\n  WHILE ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v DO { ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v } \n  ( ?s1.0 ;; ?s2.0 )[?x::=?v]\\<^sub>s\\<^sub>v =\n   ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ;; ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v \n  ASSERT ?c IN ?s [?x::=?v]\\<^sub>s\\<^sub>v =\n  ASSERT ?c[?x::=?v]\\<^sub>c\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v \n  [?v']\\<^sup>s[?x::=?v]\\<^sub>s\\<^sub>v =\n  [?v'[?x::=?v]\\<^sub>v\\<^sub>v]\\<^sup>s\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y = ?e IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y = ?e[?x::=?v]\\<^sub>e\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y : ?t = ?s1.0 IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y : ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  MATCH ?v' WITH { ?cs }[?x::=?v]\\<^sub>s\\<^sub>v =\n  MATCH ?v'[?x::=?v]\\<^sub>v\\<^sub>v WITH { subst_branchlv ?cs ?x ?v }\n  ?y ::= ?v'[?x::=?v]\\<^sub>s\\<^sub>v = ?y ::= ?v'[?x::=?v]\\<^sub>v\\<^sub>v\n  (IF ?v' THEN ?s1.0 ELSE ?s2.0)[?x::=?v]\\<^sub>s\\<^sub>v =\n  IF ?v'[?x::=?v]\\<^sub>v\\<^sub>v THEN ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ELSE ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?u \\<sharp> (?x, ?v) \\<Longrightarrow>\n  VAR ?u : ?\\<tau> = ?v' IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  VAR ?u : ?\\<tau>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?v'[?x::=?v]\\<^sub>v\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  (WHILE ?s1.0 DO { ?s2.0 } )[?x::=?v]\\<^sub>s\\<^sub>v =\n  WHILE ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v DO { ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v } \n  ( ?s1.0 ;; ?s2.0 )[?x::=?v]\\<^sub>s\\<^sub>v =\n   ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ;; ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v \n  ASSERT ?c IN ?s [?x::=?v]\\<^sub>s\\<^sub>v =\n  ASSERT ?c[?x::=?v]\\<^sub>c\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v \n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v = ?A\n  ?a \\<sharp> [ ?l ]\\<^sup>v = ?a \\<sharp> ?l\n  ?a \\<sharp> [ ?x ]\\<^sup>v = ?a \\<sharp> ?x\n  ?a \\<sharp> [ ?v1.0 , ?v2.0 ]\\<^sup>v =\n  (?a \\<sharp> ?v1.0 \\<and> ?a \\<sharp> ?v2.0)\n  ?a \\<sharp> V_cons ?list1.0 ?list2.0 ?v =\n  (?a \\<sharp> ?list1.0 \\<and> ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> V_consp ?list1.0 ?list2.0 ?b ?v =\n  (?a \\<sharp> ?list1.0 \\<and>\n   ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?b \\<and> ?a \\<sharp> ?v)\n  ?tm[?a::=[ ?a ]\\<^sup>v]\\<^sub>v\\<^sub>v = ?tm\n\ngoal (1 subgoal):\n 1. MATCH v WITH { branch_s }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n    MATCH v WITH { branch_s }", "by metis"], ["proof (state)\nthis:\n  MATCH v WITH { branch_s }[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n  MATCH v WITH { branch_s }\n\ngoal (11 subgoals):\n 1. \\<And>x a. [x]\\<^sup>s[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = [x]\\<^sup>s\n 2. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4\n 3. \\<And>x1 x2 x3 a.\n       \\<lbrakk>\\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         IF x1 THEN x2 ELSE x3\n 4. \\<And>x1 x2 x3 x4 a.\n       \\<lbrakk>atom x1 \\<sharp> a;\n        \\<And>b. x4[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4\n 5. \\<And>x1 x2 a. x1 ::= x2[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1 ::= x2\n 6. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         WHILE x1 DO { x2 } \n 7. \\<And>x1 x2 a.\n       \\<lbrakk>\\<And>b. x1[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x1;\n        \\<And>b. x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2\\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 ;; x2 \n 8. \\<And>x1 x2 a.\n       (\\<And>b.\n           x2[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x2) \\<Longrightarrow>\n       ASSERT x1 IN x2 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n       ASSERT x1 IN x2 \n 9. \\<And>x1 x2 x3 a.\n       \\<lbrakk>atom x2 \\<sharp> a;\n        \\<And>b. x3[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x3\\<rbrakk>\n       \\<Longrightarrow>  x1 x2 \\<Rightarrow> x3 [a::=[ a ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                          x1 x2 \\<Rightarrow> x3 \n 10. \\<And>x a.\n        (\\<And>b.\n            x[b::=[ b ]\\<^sup>v]\\<^sub>s\\<^sub>v = x) \\<Longrightarrow>\n        subst_branchlv { x } a [ a ]\\<^sup>v = { x }\nA total of 11 subgoals...", "qed(auto)+"], ["", "lemma fresh_subst_sv_if_rl:\n  shows \n    \"(atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_sv s x v )\" and\n    \"(atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_branchv cs x v)\" and\n    \"(atom x \\<sharp> css \\<and> j \\<sharp> css) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x)) \\<Longrightarrow> j \\<sharp> (subst_branchlv css x v )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom x \\<sharp> s \\<and> j \\<sharp> s \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x) \\<Longrightarrow>\n     j \\<sharp> s[x::=v]\\<^sub>s\\<^sub>v) &&&\n    (atom x \\<sharp> cs \\<and> j \\<sharp> cs \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x) \\<Longrightarrow>\n     j \\<sharp> cs[x::=v]\\<^sub>s\\<^sub>v) &&&\n    (atom x \\<sharp> css \\<and> j \\<sharp> css \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x) \\<Longrightarrow>\n     j \\<sharp> subst_branchlv css x v)", "apply(nominal_induct s and cs and css avoiding: v x rule: s_branch_s_branch_list.strong_induct)"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x v xa.\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and>\n       (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa) \\<Longrightarrow>\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n        j \\<sharp> LET x1 = x2 IN x3 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x4 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n        j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n        j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x4 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n        j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\n 6. \\<And>x1 x2 v x.\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and>\n       (j \\<sharp> x1 ::= x2 \\<or> j = atom x) \\<Longrightarrow>\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> subst_branchlv x2 ba b;\n        atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n        j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x1 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n        j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x1 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp>  x1 ;; x2  \\<and> j \\<sharp>  x1 ;; x2  \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and>\n                    (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n         atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n         j \\<sharp> ASSERT x1 IN x2  \\<or>\n         j \\<sharp> v \\<and>\n         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\\<rbrakk>\n        \\<Longrightarrow> j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\nA total of 13 subgoals...", "using pure_fresh"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x\n\ngoal (13 subgoals):\n 1. \\<And>x v xa.\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and>\n       (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa) \\<Longrightarrow>\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n        j \\<sharp> LET x1 = x2 IN x3 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x4 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n        j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x3 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n        j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x4 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n        j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\n 6. \\<And>x1 x2 v x.\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and>\n       (j \\<sharp> x1 ::= x2 \\<or> j = atom x) \\<Longrightarrow>\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> subst_branchlv x2 ba b;\n        atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n        j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x1 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n        j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and>\n                   (j \\<sharp> x1 \\<or> j = atom ba) \\<Longrightarrow>\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and>\n           (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp>  x1 ;; x2  \\<and> j \\<sharp>  x1 ;; x2  \\<or>\n        j \\<sharp> v \\<and>\n        (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and>\n                    (j \\<sharp> x2 \\<or> j = atom ba) \\<Longrightarrow>\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v;\n         atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n         j \\<sharp> ASSERT x1 IN x2  \\<or>\n         j \\<sharp> v \\<and>\n         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\\<rbrakk>\n        \\<Longrightarrow> j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\nA total of 13 subgoals...", "by force+"], ["", "lemma fresh_subst_sv_if_lr:\n  shows  \"j \\<sharp> (subst_sv s x v) \\<Longrightarrow> (atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x))\" and\n    \"j \\<sharp> (subst_branchv cs x v) \\<Longrightarrow> (atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))\" and       \n    \"j \\<sharp> (subst_branchlv css x v ) \\<Longrightarrow> (atom x \\<sharp> css \\<and> j \\<sharp> css) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (j \\<sharp> s[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n     atom x \\<sharp> s \\<and> j \\<sharp> s \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x)) &&&\n    (j \\<sharp> cs[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n     atom x \\<sharp> cs \\<and> j \\<sharp> cs \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x)) &&&\n    (j \\<sharp> subst_branchlv css x v \\<Longrightarrow>\n     atom x \\<sharp> css \\<and> j \\<sharp> css \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> css \\<or> j = atom x))", "proof(nominal_induct s and cs and css avoiding: v x rule: s_branch_s_branch_list.strong_induct)"], ["proof (state)\ngoal (13 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n                         j \\<sharp> LET x1 = x2 IN x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 6. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                          j \\<sharp> ASSERT x1 IN x2  \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\nA total of 13 subgoals...", "case (AS_branch list x s )"], ["proof (state)\nthis:\n  atom xa__ \\<sharp> v\n  atom xa__ \\<sharp> x\n  j \\<sharp> s[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s \\<and> j \\<sharp> s \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s \\<or> j = atom ?ba)\n  j \\<sharp>  list xa__ \\<Rightarrow> s [x::=v]\\<^sub>s\\<^sub>v\n\ngoal (13 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n                         j \\<sharp> LET x1 = x2 IN x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 6. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                          j \\<sharp> ASSERT x1 IN x2  \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\nA total of 13 subgoals...", "then"], ["proof (chain)\npicking this:\n  atom xa__ \\<sharp> v\n  atom xa__ \\<sharp> x\n  j \\<sharp> s[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s \\<and> j \\<sharp> s \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s \\<or> j = atom ?ba)\n  j \\<sharp>  list xa__ \\<Rightarrow> s [x::=v]\\<^sub>s\\<^sub>v", "show ?case"], ["proof (prove)\nusing this:\n  atom xa__ \\<sharp> v\n  atom xa__ \\<sharp> x\n  j \\<sharp> s[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s \\<and> j \\<sharp> s \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s \\<or> j = atom ?ba)\n  j \\<sharp>  list xa__ \\<Rightarrow> s [x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp>  list xa__ \\<Rightarrow> s  \\<and>\n    j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or> j = atom x)", "using s_branch_s_branch_list.fresh fresh_Pair list.distinct(1) list.set_cases pure_fresh set_ConsD subst_branchv.simps"], ["proof (prove)\nusing this:\n  atom xa__ \\<sharp> v\n  atom xa__ \\<sharp> x\n  j \\<sharp> s[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s \\<and> j \\<sharp> s \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s \\<or> j = atom ?ba)\n  j \\<sharp>  list xa__ \\<Rightarrow> s [x::=v]\\<^sub>s\\<^sub>v\n  ?a \\<sharp> [?v]\\<^sup>s = ?a \\<sharp> ?v\n  ?a \\<sharp> LET ?x = ?e IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?e)\n  ?a \\<sharp> LET ?x : ?\\<tau> = ?s1.0 IN ?s2.0 =\n  ((?a \\<sharp> ?s2.0 \\<or> ?a \\<in> set [atom ?x]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?s1.0)\n  ?a \\<sharp> IF ?v THEN ?s1.0 ELSE ?s2.0 =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> VAR ?u : ?\\<tau> = ?v IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?u]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> ?u ::= ?v = (?a \\<sharp> ?u \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> MATCH ?v WITH { ?branch_list } =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?branch_list)\n  ?a \\<sharp> WHILE ?s1.0 DO { ?s2.0 }  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp>  ?s1.0 ;; ?s2.0  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> ASSERT ?c IN ?s  = (?a \\<sharp> ?c \\<and> ?a \\<sharp> ?s)\n  ?a \\<sharp>  ?list ?x \\<Rightarrow> ?s  =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?list)\n  ?a \\<sharp> { ?branch_s } = ?a \\<sharp> ?branch_s\n  ?a \\<sharp>  ?branch_s | ?branch_list   =\n  (?a \\<sharp> ?branch_s \\<and> ?a \\<sharp> ?branch_list)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  [] \\<noteq> ?x21.0 # ?x22.0\n  \\<lbrakk>?e \\<in> set ?a;\n   \\<And>z2. ?a = ?e # z2 \\<Longrightarrow> ?thesis;\n   \\<And>z1 z2.\n      \\<lbrakk>?a = z1 # z2; ?e \\<in> set z2\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  ?a \\<sharp> ?x\n  ?y \\<in> set (?x # ?xs) \\<Longrightarrow> ?y = ?x \\<or> ?y \\<in> set ?xs\n  atom ?x1.0 \\<sharp> (?x, ?v) \\<Longrightarrow>\n   ?dc ?x1.0 \\<Rightarrow> ?s1.0 [?x::=?v]\\<^sub>s\\<^sub>v =\n   ?dc ?x1.0 \\<Rightarrow> ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v \n\ngoal (1 subgoal):\n 1. atom x \\<sharp>  list xa__ \\<Rightarrow> s  \\<and>\n    j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or> j = atom x)", "by metis"], ["proof (state)\nthis:\n  atom x \\<sharp>  list xa__ \\<Rightarrow> s  \\<and>\n  j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or>\n  j \\<sharp> v \\<and>\n  (j \\<sharp>  list xa__ \\<Rightarrow> s  \\<or> j = atom x)\n\ngoal (12 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n                         j \\<sharp> LET x1 = x2 IN x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 6. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                          j \\<sharp> ASSERT x1 IN x2  \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\nA total of 12 subgoals...", "next"], ["proof (state)\ngoal (12 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n                         j \\<sharp> LET x1 = x2 IN x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 6. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                          j \\<sharp> ASSERT x1 IN x2  \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\nA total of 12 subgoals...", "case (AS_let y e s')"], ["proof (state)\nthis:\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (12 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> LET x1 = x2 IN x3[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 = x2 IN x3 \\<and>\n                         j \\<sharp> LET x1 = x2 IN x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 = x2 IN x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 5. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 6. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                          j \\<sharp> ASSERT x1 IN x2  \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\nA total of 12 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n    j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "proof(cases \"atom x \\<sharp>  (AS_let y e s')\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "case True"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y = e IN s'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "hence \"subst_sv (AS_let y  e s') x v  =  (AS_let y e s')\""], ["proof (prove)\nusing this:\n  atom x \\<sharp> LET y = e IN s'\n\ngoal (1 subgoal):\n 1. LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v = LET y = e IN s'", "using forget_subst_sv"], ["proof (prove)\nusing this:\n  atom x \\<sharp> LET y = e IN s'\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n\ngoal (1 subgoal):\n 1. LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v = LET y = e IN s'", "by simp"], ["proof (state)\nthis:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v = LET y = e IN s'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "hence \"j \\<sharp>  (AS_let y  e s')\""], ["proof (prove)\nusing this:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v = LET y = e IN s'\n\ngoal (1 subgoal):\n 1. j \\<sharp> LET y = e IN s'", "using AS_let"], ["proof (prove)\nusing this:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v = LET y = e IN s'\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. j \\<sharp> LET y = e IN s'", "by argo"], ["proof (state)\nthis:\n  j \\<sharp> LET y = e IN s'\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> LET y = e IN s'", "show ?thesis"], ["proof (prove)\nusing this:\n  j \\<sharp> LET y = e IN s'\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n    j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "using True"], ["proof (prove)\nusing this:\n  j \\<sharp> LET y = e IN s'\n  atom x \\<sharp> LET y = e IN s'\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n    j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "by blast"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n  j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "case False"], ["proof (state)\nthis:\n  \\<not> atom x \\<sharp> LET y = e IN s'\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "have \"subst_sv (AS_let y  e s') x v  = AS_let y  (e[x::=v]\\<^sub>e\\<^sub>v) (s'[x::=v]\\<^sub>s\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v =\n    LET y = e[x::=v]\\<^sub>e\\<^sub>v IN s'[x::=v]\\<^sub>s\\<^sub>v", "using subst_sv.simps(2) AS_let"], ["proof (prove)\nusing this:\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y = ?e IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y = ?e[?x::=?v]\\<^sub>e\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v =\n    LET y = e[x::=v]\\<^sub>e\\<^sub>v IN s'[x::=v]\\<^sub>s\\<^sub>v", "by force"], ["proof (state)\nthis:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v =\n  LET y = e[x::=v]\\<^sub>e\\<^sub>v IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "hence \"((j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and> j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v)\""], ["proof (prove)\nusing this:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v =\n  LET y = e[x::=v]\\<^sub>e\\<^sub>v IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n    j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v", "using s_branch_s_branch_list.fresh AS_let"], ["proof (prove)\nusing this:\n  LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v =\n  LET y = e[x::=v]\\<^sub>e\\<^sub>v IN s'[x::=v]\\<^sub>s\\<^sub>v\n  ?a \\<sharp> [?v]\\<^sup>s = ?a \\<sharp> ?v\n  ?a \\<sharp> LET ?x = ?e IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?e)\n  ?a \\<sharp> LET ?x : ?\\<tau> = ?s1.0 IN ?s2.0 =\n  ((?a \\<sharp> ?s2.0 \\<or> ?a \\<in> set [atom ?x]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?s1.0)\n  ?a \\<sharp> IF ?v THEN ?s1.0 ELSE ?s2.0 =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> VAR ?u : ?\\<tau> = ?v IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?u]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> ?u ::= ?v = (?a \\<sharp> ?u \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> MATCH ?v WITH { ?branch_list } =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?branch_list)\n  ?a \\<sharp> WHILE ?s1.0 DO { ?s2.0 }  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp>  ?s1.0 ;; ?s2.0  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> ASSERT ?c IN ?s  = (?a \\<sharp> ?c \\<and> ?a \\<sharp> ?s)\n  ?a \\<sharp>  ?list ?x \\<Rightarrow> ?s  =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?list)\n  ?a \\<sharp> { ?branch_s } = ?a \\<sharp> ?branch_s\n  ?a \\<sharp>  ?branch_s | ?branch_list   =\n  (?a \\<sharp> ?branch_s \\<and> ?a \\<sharp> ?branch_list)\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n    j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v", "by (simp add: fresh_None)"], ["proof (state)\nthis:\n  (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n  j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s'[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s' \\<or> j = atom ba);\n     j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y = e IN s'\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y = e IN s' \\<and>\n                      j \\<sharp> LET y = e IN s' \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "then"], ["proof (chain)\npicking this:\n  (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n  j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n  j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n    j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "using  AS_let  fresh_None fresh_subst_ev_if list.discI list.set_cases s_branch_s_branch_list.fresh set_ConsD"], ["proof (prove)\nusing this:\n  (j \\<sharp> s'[x::=v]\\<^sub>s\\<^sub>v \\<or> j \\<in> set [atom y]) \\<and>\n  j \\<sharp> None \\<and> j \\<sharp> e[x::=v]\\<^sub>e\\<^sub>v\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s'[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s' \\<and> j \\<sharp> s' \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s' \\<or> j = atom ?ba)\n  j \\<sharp> LET y = e IN s'[x::=v]\\<^sub>s\\<^sub>v\n  ?a \\<sharp> None\n  ?j \\<sharp> ?A[?i::=?x]\\<^sub>e\\<^sub>v =\n  (atom ?i \\<sharp> ?A \\<and> ?j \\<sharp> ?A \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?A \\<or> ?j = atom ?i))\n  ?list = ?x21.0 # ?x22.0 \\<Longrightarrow> ?list \\<noteq> []\n  \\<lbrakk>?e \\<in> set ?a;\n   \\<And>z2. ?a = ?e # z2 \\<Longrightarrow> ?thesis;\n   \\<And>z1 z2.\n      \\<lbrakk>?a = z1 # z2; ?e \\<in> set z2\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  ?a \\<sharp> [?v]\\<^sup>s = ?a \\<sharp> ?v\n  ?a \\<sharp> LET ?x = ?e IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?e)\n  ?a \\<sharp> LET ?x : ?\\<tau> = ?s1.0 IN ?s2.0 =\n  ((?a \\<sharp> ?s2.0 \\<or> ?a \\<in> set [atom ?x]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?s1.0)\n  ?a \\<sharp> IF ?v THEN ?s1.0 ELSE ?s2.0 =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> VAR ?u : ?\\<tau> = ?v IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?u]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> ?u ::= ?v = (?a \\<sharp> ?u \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> MATCH ?v WITH { ?branch_list } =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?branch_list)\n  ?a \\<sharp> WHILE ?s1.0 DO { ?s2.0 }  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp>  ?s1.0 ;; ?s2.0  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> ASSERT ?c IN ?s  = (?a \\<sharp> ?c \\<and> ?a \\<sharp> ?s)\n  ?a \\<sharp>  ?list ?x \\<Rightarrow> ?s  =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?list)\n  ?a \\<sharp> { ?branch_s } = ?a \\<sharp> ?branch_s\n  ?a \\<sharp>  ?branch_s | ?branch_list   =\n  (?a \\<sharp> ?branch_s \\<and> ?a \\<sharp> ?branch_list)\n  ?y \\<in> set (?x # ?xs) \\<Longrightarrow> ?y = ?x \\<or> ?y \\<in> set ?xs\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n    j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)", "by metis"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n  j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y = e IN s' \\<and> j \\<sharp> LET y = e IN s' \\<or>\n  j \\<sharp> v \\<and> (j \\<sharp> LET y = e IN s' \\<or> j = atom x)\n\ngoal (11 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 3. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 4. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 5. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 6. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                         j \\<sharp> ASSERT x1 IN x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\n 10. \\<And>x v xa.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x \\<and> j \\<sharp> x \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x \\<or> j = atom ba);\n         j \\<sharp> subst_branchlv { x } xa v\\<rbrakk>\n        \\<Longrightarrow> atom xa \\<sharp> { x } \\<and>\n                          j \\<sharp> { x } \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> { x } \\<or> j = atom xa)\nA total of 11 subgoals...", "next"], ["proof (state)\ngoal (11 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 3. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 4. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 5. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 6. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                         j \\<sharp> ASSERT x1 IN x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\n 10. \\<And>x v xa.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x \\<and> j \\<sharp> x \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x \\<or> j = atom ba);\n         j \\<sharp> subst_branchlv { x } xa v\\<rbrakk>\n        \\<Longrightarrow> atom xa \\<sharp> { x } \\<and>\n                          j \\<sharp> { x } \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> { x } \\<or> j = atom xa)\nA total of 11 subgoals...", "case (AS_let2 y \\<tau> s1 s2)"], ["proof (state)\nthis:\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s1[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s1 \\<or> j = atom ?ba)\n  j \\<sharp> s2[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s2 \\<or> j = atom ?ba)\n  j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (11 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> LET x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> LET x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> LET x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 3. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 4. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 5. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 6. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 9. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                         j \\<sharp> ASSERT x1 IN x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\n 10. \\<And>x v xa.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x \\<and> j \\<sharp> x \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x \\<or> j = atom ba);\n         j \\<sharp> subst_branchlv { x } xa v\\<rbrakk>\n        \\<Longrightarrow> atom xa \\<sharp> { x } \\<and>\n                          j \\<sharp> { x } \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp> { x } \\<or> j = atom xa)\nA total of 11 subgoals...", "thus ?case"], ["proof (prove)\nusing this:\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s1[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s1 \\<or> j = atom ?ba)\n  j \\<sharp> s2[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s2 \\<or> j = atom ?ba)\n  j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n    j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)", "proof(cases \"atom x \\<sharp>  (AS_let2 y \\<tau> s1 s2)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "case True"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "hence \"subst_sv  (AS_let2 y \\<tau> s1 s2)  x v =  (AS_let2 y \\<tau> s1 s2)\""], ["proof (prove)\nusing this:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (1 subgoal):\n 1. LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n    LET y : \\<tau> = s1 IN s2", "using forget_subst_sv"], ["proof (prove)\nusing this:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n\ngoal (1 subgoal):\n 1. LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n    LET y : \\<tau> = s1 IN s2", "by simp"], ["proof (state)\nthis:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau> = s1 IN s2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "hence \"j \\<sharp>  (AS_let2 y \\<tau> s1 s2)\""], ["proof (prove)\nusing this:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau> = s1 IN s2\n\ngoal (1 subgoal):\n 1. j \\<sharp> LET y : \\<tau> = s1 IN s2", "using AS_let2"], ["proof (prove)\nusing this:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau> = s1 IN s2\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s1[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s1 \\<or> j = atom ?ba)\n  j \\<sharp> s2[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s2 \\<or> j = atom ?ba)\n  j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. j \\<sharp> LET y : \\<tau> = s1 IN s2", "by argo"], ["proof (state)\nthis:\n  j \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (2 subgoals):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)\n 2. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> LET y : \\<tau> = s1 IN s2", "show ?thesis"], ["proof (prove)\nusing this:\n  j \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n    j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)", "using True"], ["proof (prove)\nusing this:\n  j \\<sharp> LET y : \\<tau> = s1 IN s2\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n    j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)", "by blast"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n  j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n  j \\<sharp> v \\<and>\n  (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "case False"], ["proof (state)\nthis:\n  \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "have \"subst_sv (AS_let2 y \\<tau> s1 s2) x v  = AS_let2 y (\\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v) (s1[x::=v]\\<^sub>s\\<^sub>v) (s2[x::=v]\\<^sub>s\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n    LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v", "using subst_sv.simps AS_let2"], ["proof (prove)\nusing this:\n  [?v']\\<^sup>s[?x::=?v]\\<^sub>s\\<^sub>v =\n  [?v'[?x::=?v]\\<^sub>v\\<^sub>v]\\<^sup>s\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y = ?e IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y = ?e[?x::=?v]\\<^sub>e\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?y \\<sharp> (?x, ?v) \\<Longrightarrow>\n  LET ?y : ?t = ?s1.0 IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v =\n  LET ?y : ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v IN ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  MATCH ?v' WITH { ?cs }[?x::=?v]\\<^sub>s\\<^sub>v =\n  MATCH ?v'[?x::=?v]\\<^sub>v\\<^sub>v WITH { subst_branchlv ?cs ?x ?v }\n  ?y ::= ?v'[?x::=?v]\\<^sub>s\\<^sub>v = ?y ::= ?v'[?x::=?v]\\<^sub>v\\<^sub>v\n  (IF ?v' THEN ?s1.0 ELSE ?s2.0)[?x::=?v]\\<^sub>s\\<^sub>v =\n  IF ?v'[?x::=?v]\\<^sub>v\\<^sub>v THEN ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ELSE ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?u \\<sharp> (?x, ?v) \\<Longrightarrow>\n  VAR ?u : ?\\<tau> = ?v' IN ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  VAR ?u : ?\\<tau>[?x::=?v]\\<^sub>\\<tau>\\<^sub>v = ?v'[?x::=?v]\\<^sub>v\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  (WHILE ?s1.0 DO { ?s2.0 } )[?x::=?v]\\<^sub>s\\<^sub>v =\n  WHILE ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v DO { ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v } \n  ( ?s1.0 ;; ?s2.0 )[?x::=?v]\\<^sub>s\\<^sub>v =\n   ?s1.0[?x::=?v]\\<^sub>s\\<^sub>v ;; ?s2.0[?x::=?v]\\<^sub>s\\<^sub>v \n  ASSERT ?c IN ?s [?x::=?v]\\<^sub>s\\<^sub>v =\n  ASSERT ?c[?x::=?v]\\<^sub>c\\<^sub>v IN ?s[?x::=?v]\\<^sub>s\\<^sub>v \n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s1[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s1 \\<or> j = atom ?ba)\n  j \\<sharp> s2[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s2 \\<or> j = atom ?ba)\n  j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n    LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v", "by force"], ["proof (state)\nthis:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<lbrakk>atom y \\<sharp> v; atom y \\<sharp> x;\n     \\<And>ba b.\n        j \\<sharp> s1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s1 \\<or> j = atom ba);\n     \\<And>ba b.\n        j \\<sharp> s2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n        atom ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n        j \\<sharp> b \\<and> (j \\<sharp> s2 \\<or> j = atom ba);\n     j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v;\n     \\<not> atom x \\<sharp> LET y : \\<tau> = s1 IN s2\\<rbrakk>\n    \\<Longrightarrow> atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n                      j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                      j \\<sharp> v \\<and>\n                      (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n                       j = atom x)", "then"], ["proof (chain)\npicking this:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n    j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)", "using  AS_let2\n        fresh_subst_tv_if list.discI list.set_cases s_branch_s_branch_list.fresh(4) set_ConsD"], ["proof (prove)\nusing this:\n  LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v =\n  LET y : \\<tau>[x::=v]\\<^sub>\\<tau>\\<^sub>v = s1[x::=v]\\<^sub>s\\<^sub>v IN s2[x::=v]\\<^sub>s\\<^sub>v\n  atom y \\<sharp> v\n  atom y \\<sharp> x\n  j \\<sharp> s1[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s1 \\<and> j \\<sharp> s1 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s1 \\<or> j = atom ?ba)\n  j \\<sharp> s2[?ba::=?b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?ba \\<sharp> s2 \\<and> j \\<sharp> s2 \\<or>\n  j \\<sharp> ?b \\<and> (j \\<sharp> s2 \\<or> j = atom ?ba)\n  j \\<sharp> LET y : \\<tau> = s1 IN s2[x::=v]\\<^sub>s\\<^sub>v\n  ?j \\<sharp> ?A[?i::=?x]\\<^sub>\\<tau>\\<^sub>v =\n  (atom ?i \\<sharp> ?A \\<and> ?j \\<sharp> ?A \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?A \\<or> ?j = atom ?i))\n  ?list = ?x21.0 # ?x22.0 \\<Longrightarrow> ?list \\<noteq> []\n  \\<lbrakk>?e \\<in> set ?a;\n   \\<And>z2. ?a = ?e # z2 \\<Longrightarrow> ?thesis;\n   \\<And>z1 z2.\n      \\<lbrakk>?a = z1 # z2; ?e \\<in> set z2\\<rbrakk>\n      \\<Longrightarrow> ?thesis\\<rbrakk>\n  \\<Longrightarrow> ?thesis\n  ?a \\<sharp> IF ?v THEN ?s1.0 ELSE ?s2.0 =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?y \\<in> set (?x # ?xs) \\<Longrightarrow> ?y = ?x \\<or> ?y \\<in> set ?xs\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n    j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n    j \\<sharp> v \\<and>\n    (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)", "by auto"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n  j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n  j \\<sharp> v \\<and>\n  (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  atom x \\<sharp> LET y : \\<tau> = s1 IN s2 \\<and>\n  j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or>\n  j \\<sharp> v \\<and>\n  (j \\<sharp> LET y : \\<tau> = s1 IN s2 \\<or> j = atom x)\n\ngoal (10 subgoals):\n 1. \\<And>x v xa.\n       j \\<sharp> [x]\\<^sup>s[xa::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom xa \\<sharp> [x]\\<^sup>s \\<and> j \\<sharp> [x]\\<^sup>s \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> [x]\\<^sup>s \\<or> j = atom xa)\n 2. \\<And>x1 x2 x3 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x3[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x3 \\<and> j \\<sharp> x3 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x3 \\<or> j = atom ba);\n        j \\<sharp> (IF x1 THEN x2 ELSE x3)[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> IF x1 THEN x2 ELSE x3 \\<and>\n                         j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> IF x1 THEN x2 ELSE x3 \\<or> j = atom x)\n 3. \\<And>x1 x2 x3 x4 v x.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           j \\<sharp> x4[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x4 \\<and> j \\<sharp> x4 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x4 \\<or> j = atom ba);\n        j \\<sharp> VAR x1 : x2 = x3 IN x4[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> VAR x1 : x2 = x3 IN x4 \\<and>\n                         j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> VAR x1 : x2 = x3 IN x4 \\<or>\n                          j = atom x)\n 4. \\<And>x1 x2 v x.\n       j \\<sharp> x1 ::= x2[x::=v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n       atom x \\<sharp> x1 ::= x2 \\<and> j \\<sharp> x1 ::= x2 \\<or>\n       j \\<sharp> v \\<and> (j \\<sharp> x1 ::= x2 \\<or> j = atom x)\n 5. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> MATCH x1 WITH { x2 }[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> MATCH x1 WITH { x2 } \\<and>\n                         j \\<sharp> MATCH x1 WITH { x2 } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> MATCH x1 WITH { x2 } \\<or> j = atom x)\n 6. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> (WHILE x1 DO { x2 } )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> WHILE x1 DO { x2 }  \\<and>\n                         j \\<sharp> WHILE x1 DO { x2 }  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> WHILE x1 DO { x2 }  \\<or> j = atom x)\n 7. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n        \\<And>b ba.\n           j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n           atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n           j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ( x1 ;; x2 )[x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp>  x1 ;; x2  \\<and>\n                         j \\<sharp>  x1 ;; x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp>  x1 ;; x2  \\<or> j = atom x)\n 8. \\<And>x1 x2 v x.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x2[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n        j \\<sharp> ASSERT x1 IN x2 [x::=v]\\<^sub>s\\<^sub>v\\<rbrakk>\n       \\<Longrightarrow> atom x \\<sharp> ASSERT x1 IN x2  \\<and>\n                         j \\<sharp> ASSERT x1 IN x2  \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> ASSERT x1 IN x2  \\<or> j = atom x)\n 9. \\<And>x v xa.\n       \\<lbrakk>\\<And>b ba.\n                   j \\<sharp> x[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                   atom ba \\<sharp> x \\<and> j \\<sharp> x \\<or>\n                   j \\<sharp> b \\<and> (j \\<sharp> x \\<or> j = atom ba);\n        j \\<sharp> subst_branchlv { x } xa v\\<rbrakk>\n       \\<Longrightarrow> atom xa \\<sharp> { x } \\<and>\n                         j \\<sharp> { x } \\<or>\n                         j \\<sharp> v \\<and>\n                         (j \\<sharp> { x } \\<or> j = atom xa)\n 10. \\<And>x1 x2 v x.\n        \\<lbrakk>\\<And>b ba.\n                    j \\<sharp> x1[ba::=b]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n                    atom ba \\<sharp> x1 \\<and> j \\<sharp> x1 \\<or>\n                    j \\<sharp> b \\<and> (j \\<sharp> x1 \\<or> j = atom ba);\n         \\<And>b ba.\n            j \\<sharp> subst_branchlv x2 ba b \\<Longrightarrow>\n            atom ba \\<sharp> x2 \\<and> j \\<sharp> x2 \\<or>\n            j \\<sharp> b \\<and> (j \\<sharp> x2 \\<or> j = atom ba);\n         j \\<sharp> subst_branchlv  x1 | x2   x v\\<rbrakk>\n        \\<Longrightarrow> atom x \\<sharp>  x1 | x2   \\<and>\n                          j \\<sharp>  x1 | x2   \\<or>\n                          j \\<sharp> v \\<and>\n                          (j \\<sharp>  x1 | x2   \\<or> j = atom x)", "qed(auto)+"], ["", "lemma fresh_subst_sv_if[simp]:\n  fixes x::x and v::v\n  shows \"j \\<sharp> (subst_sv s x v) \\<longleftrightarrow> (atom x \\<sharp> s \\<and> j \\<sharp> s) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x))\" and\n    \"j \\<sharp> (subst_branchv cs x v) \\<longleftrightarrow> (atom x \\<sharp> cs \\<and> j \\<sharp> cs) \\<or> (j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> s[x::=v]\\<^sub>s\\<^sub>v =\n    (atom x \\<sharp> s \\<and> j \\<sharp> s \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x)) &&&\n    j \\<sharp> cs[x::=v]\\<^sub>s\\<^sub>v =\n    (atom x \\<sharp> cs \\<and> j \\<sharp> cs \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))", "using fresh_subst_sv_if_lr fresh_subst_sv_if_rl"], ["proof (prove)\nusing this:\n  ?j \\<sharp> ?s[?x::=?v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?x \\<sharp> ?s \\<and> ?j \\<sharp> ?s \\<or>\n  ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?s \\<or> ?j = atom ?x)\n  ?j \\<sharp> ?cs[?x::=?v]\\<^sub>s\\<^sub>v \\<Longrightarrow>\n  atom ?x \\<sharp> ?cs \\<and> ?j \\<sharp> ?cs \\<or>\n  ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?cs \\<or> ?j = atom ?x)\n  ?j \\<sharp> subst_branchlv ?css ?x ?v \\<Longrightarrow>\n  atom ?x \\<sharp> ?css \\<and> ?j \\<sharp> ?css \\<or>\n  ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?css \\<or> ?j = atom ?x)\n  atom ?x \\<sharp> ?s \\<and> ?j \\<sharp> ?s \\<or>\n  ?j \\<sharp> ?v \\<and>\n  (?j \\<sharp> ?s \\<or> ?j = atom ?x) \\<Longrightarrow>\n  ?j \\<sharp> ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?cs \\<and> ?j \\<sharp> ?cs \\<or>\n  ?j \\<sharp> ?v \\<and>\n  (?j \\<sharp> ?cs \\<or> ?j = atom ?x) \\<Longrightarrow>\n  ?j \\<sharp> ?cs[?x::=?v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?css \\<and> ?j \\<sharp> ?css \\<or>\n  ?j \\<sharp> ?v \\<and>\n  (?j \\<sharp> ?css \\<or> ?j = atom ?x) \\<Longrightarrow>\n  ?j \\<sharp> subst_branchlv ?css ?x ?v\n\ngoal (1 subgoal):\n 1. j \\<sharp> s[x::=v]\\<^sub>s\\<^sub>v =\n    (atom x \\<sharp> s \\<and> j \\<sharp> s \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> s \\<or> j = atom x)) &&&\n    j \\<sharp> cs[x::=v]\\<^sub>s\\<^sub>v =\n    (atom x \\<sharp> cs \\<and> j \\<sharp> cs \\<or>\n     j \\<sharp> v \\<and> (j \\<sharp> cs \\<or> j = atom x))", "by metis+"], ["", "lemma subst_sv_commute [simp]:\n  fixes A::s and t::v and j::x and i::x\n  shows  \"atom j \\<sharp> A \\<Longrightarrow> (subst_sv (subst_sv A i t)  j u ) = subst_sv A i (subst_vv t j u )\" and\n    \"atom j \\<sharp> B \\<Longrightarrow> (subst_branchv  (subst_branchv B i t ) j u ) = subst_branchv B i (subst_vv t j u )\" and\n    \"atom j \\<sharp> C \\<Longrightarrow> (subst_branchlv  (subst_branchlv C i t) j u ) = subst_branchlv C i (subst_vv t j u   ) \""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom j \\<sharp> A \\<Longrightarrow>\n     A[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n     A[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v) &&&\n    (atom j \\<sharp> B \\<Longrightarrow>\n     B[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n     B[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v) &&&\n    (atom j \\<sharp> C \\<Longrightarrow>\n     subst_branchlv (subst_branchlv C i t) j u =\n     subst_branchlv C i t[j::=u]\\<^sub>v\\<^sub>v)", "apply(nominal_induct A and B and C avoiding: i j t u rule: s_branch_s_branch_list.strong_induct)"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x i j t u.\n       atom j \\<sharp> [x]\\<^sup>s \\<Longrightarrow>\n       [x]\\<^sup>s[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n       [x]\\<^sup>s[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 x3 i j t u.\n       \\<lbrakk>atom x1 \\<sharp> i; atom x1 \\<sharp> j; atom x1 \\<sharp> t;\n        atom x1 \\<sharp> u;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           x3[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x3[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp> LET x1 = x2 IN x3\\<rbrakk>\n       \\<Longrightarrow> LET x1 = x2 IN x3[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         LET x1 = x2 IN x3[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 i j t u.\n       \\<lbrakk>atom x1 \\<sharp> i; atom x1 \\<sharp> j; atom x1 \\<sharp> t;\n        atom x1 \\<sharp> u;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           x3[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x3[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           x4[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x4[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp> LET x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> LET x1 : x2 = x3 IN x4[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         LET x1 : x2 = x3 IN x4[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 4. \\<And>x1 x2 x3 i j t u.\n       \\<lbrakk>\\<And>b ba bb bc.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   x2[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n                   x2[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           x3[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x3[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp> IF x1 THEN x2 ELSE x3\\<rbrakk>\n       \\<Longrightarrow> (IF x1 THEN x2 ELSE x3)[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         (IF x1 THEN x2 ELSE x3)[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 i j t u.\n       \\<lbrakk>atom x1 \\<sharp> i; atom x1 \\<sharp> j; atom x1 \\<sharp> t;\n        atom x1 \\<sharp> u;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           x4[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x4[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp> VAR x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> VAR x1 : x2 = x3 IN x4[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         VAR x1 : x2 = x3 IN x4[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x1 x2 i j t u.\n       atom j \\<sharp> x1 ::= x2 \\<Longrightarrow>\n       x1 ::= x2[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n       x1 ::= x2[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 7. \\<And>x1 x2 i j t u.\n       \\<lbrakk>\\<And>b ba bb bc.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   subst_branchlv (subst_branchlv x2 b bb) ba bc =\n                   subst_branchlv x2 b bb[ba::=bc]\\<^sub>v\\<^sub>v;\n        atom j \\<sharp> MATCH x1 WITH { x2 }\\<rbrakk>\n       \\<Longrightarrow> MATCH x1 WITH { x2 }[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         MATCH x1 WITH { x2 }[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 8. \\<And>x1 x2 i j t u.\n       \\<lbrakk>\\<And>b ba bb bc.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   x1[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n                   x1[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           x2[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x2[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp> WHILE x1 DO { x2 } \\<rbrakk>\n       \\<Longrightarrow> (WHILE x1 DO { x2 } )[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         (WHILE x1 DO { x2 } )[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 9. \\<And>x1 x2 i j t u.\n       \\<lbrakk>\\<And>b ba bb bc.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   x1[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n                   x1[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba bb bc.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           x2[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n           x2[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n        atom j \\<sharp>  x1 ;; x2 \\<rbrakk>\n       \\<Longrightarrow> ( x1 ;; x2 )[i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                         ( x1 ;; x2 )[i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n 10. \\<And>x1 x2 i j t u.\n        \\<lbrakk>\\<And>b ba bb bc.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    x2[b::=bb]\\<^sub>s\\<^sub>v[ba::=bc]\\<^sub>s\\<^sub>v =\n                    x2[b::=bb[ba::=bc]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v;\n         atom j \\<sharp> ASSERT x1 IN x2 \\<rbrakk>\n        \\<Longrightarrow> ASSERT x1 IN x2 [i::=t]\\<^sub>s\\<^sub>v[j::=u]\\<^sub>s\\<^sub>v =\n                          ASSERT x1 IN x2 [i::=t[j::=u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\nA total of 13 subgoals...", "by(auto simp: fresh_at_base)"], ["", "lemma c_eq_perm:\n  assumes \"( (atom z)  \\<rightleftharpoons> (atom z') )  \\<bullet> c = c'\" and \"atom z'  \\<sharp> c\"\n  shows \"\\<lbrace> z : b | c \\<rbrace> = \\<lbrace> z' : b | c' \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> z' : b  | c' \\<rbrace>", "using \\<tau>.eq_iff Abs1_eq_iff(3)"], ["proof (prove)\nusing this:\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   ?x = (?a \\<leftrightarrow> ?b) \\<bullet> ?y \\<and> atom ?a \\<sharp> ?y)\n\ngoal (1 subgoal):\n 1. \\<lbrace> z : b  | c \\<rbrace> = \\<lbrace> z' : b  | c' \\<rbrace>", "by (metis Nominal2_Base.swap_commute assms(1) assms(2) flip_def swap_fresh_fresh)"], ["", "lemma subst_sv_flip:\n  fixes s::s and sa::s and v'::v\n  assumes \"atom c \\<sharp> (s, sa)\" and \"atom c \\<sharp> (v',x, xa, s, sa)\" \"atom x \\<sharp> v'\" and \"atom xa \\<sharp> v'\" and \"(x \\<leftrightarrow> c) \\<bullet> s = (xa \\<leftrightarrow> c) \\<bullet> sa\" \n  shows \"s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \"atom x \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v)\" and xafr: \"atom xa \\<sharp> (sa[xa::=v']\\<^sub>s\\<^sub>v)\" \n    and  \"atom c \\<sharp> ( s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> s[x::=v']\\<^sub>s\\<^sub>v &&&\n    atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v &&&\n    atom c \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)", "using assms"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> s[x::=v']\\<^sub>s\\<^sub>v &&&\n    atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v &&&\n    atom c \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)", "using  fresh_subst_sv_if assms"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n  ?j \\<sharp> ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  (atom ?x \\<sharp> ?s \\<and> ?j \\<sharp> ?s \\<or>\n   ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?s \\<or> ?j = atom ?x))\n  ?j \\<sharp> ?cs[?x::=?v]\\<^sub>s\\<^sub>v =\n  (atom ?x \\<sharp> ?cs \\<and> ?j \\<sharp> ?cs \\<or>\n   ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?cs \\<or> ?j = atom ?x))\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> s[x::=v']\\<^sub>s\\<^sub>v &&&\n    atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v &&&\n    atom c \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)", "by( blast+ ,force)"], ["proof (state)\nthis:\n  atom x \\<sharp> s[x::=v']\\<^sub>s\\<^sub>v\n  atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v\n  atom c \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "hence \"s[x::=v']\\<^sub>s\\<^sub>v = (x \\<leftrightarrow> c) \\<bullet> (s[x::=v']\\<^sub>s\\<^sub>v)\""], ["proof (prove)\nusing this:\n  atom x \\<sharp> s[x::=v']\\<^sub>s\\<^sub>v\n  atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v\n  atom c \\<sharp> (s[x::=v']\\<^sub>s\\<^sub>v, sa[xa::=v']\\<^sub>s\\<^sub>v)\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v =\n    (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v", "by (simp add: flip_fresh_fresh fresh_Pair)"], ["proof (state)\nthis:\n  s[x::=v']\\<^sub>s\\<^sub>v =\n  (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "also"], ["proof (state)\nthis:\n  s[x::=v']\\<^sub>s\\<^sub>v =\n  (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \" ... = ((x \\<leftrightarrow> c) \\<bullet> s)[ ((x \\<leftrightarrow> c) \\<bullet> x) ::= ((x \\<leftrightarrow> c) \\<bullet> v') ]\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v =\n    ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "using subst_sv_subst_branchv_subst_branchlv.eqvt"], ["proof (prove)\nusing this:\n  ?p \\<bullet> ?a[?aa::=?ab]\\<^sub>s\\<^sub>v =\n  (?p \\<bullet> ?a)[?p \\<bullet> ?aa::=?p \\<bullet> ?ab]\\<^sub>s\\<^sub>v\n  ?p \\<bullet> ?b[?ba::=?bb]\\<^sub>s\\<^sub>v =\n  (?p \\<bullet> ?b)[?p \\<bullet> ?ba::=?p \\<bullet> ?bb]\\<^sub>s\\<^sub>v\n  ?p \\<bullet> subst_branchlv ?c ?ca ?cb =\n  subst_branchlv (?p \\<bullet> ?c) (?p \\<bullet> ?ca) (?p \\<bullet> ?cb)\n\ngoal (1 subgoal):\n 1. (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v =\n    ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "by blast"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v =\n  ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "also"], ["proof (state)\nthis:\n  (x \\<leftrightarrow> c) \\<bullet> s[x::=v']\\<^sub>s\\<^sub>v =\n  ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \"... = ((xa \\<leftrightarrow> c) \\<bullet> sa)[ ((x \\<leftrightarrow> c) \\<bullet> x) ::= ((x \\<leftrightarrow> c) \\<bullet> v') ]\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n\ngoal (1 subgoal):\n 1. ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "by presburger"], ["proof (state)\nthis:\n  ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "also"], ["proof (state)\nthis:\n  ((x \\<leftrightarrow> c) \\<bullet> s)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \"... = ((xa \\<leftrightarrow> c) \\<bullet> sa)[ ((xa \\<leftrightarrow> c) \\<bullet> xa) ::= ((xa \\<leftrightarrow> c) \\<bullet> v') ]\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n\ngoal (1 subgoal):\n 1. ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v", "by (metis flip_at_simps(1) flip_fresh_fresh fresh_PairD(1))"], ["proof (state)\nthis:\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "also"], ["proof (state)\nthis:\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(x \\<leftrightarrow> c) \\<bullet> x::=(x \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \"... =  (xa \\<leftrightarrow> c) \\<bullet> (sa[xa::=v']\\<^sub>s\\<^sub>v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v", "using subst_sv_subst_branchv_subst_branchlv.eqvt"], ["proof (prove)\nusing this:\n  ?p \\<bullet> ?a[?aa::=?ab]\\<^sub>s\\<^sub>v =\n  (?p \\<bullet> ?a)[?p \\<bullet> ?aa::=?p \\<bullet> ?ab]\\<^sub>s\\<^sub>v\n  ?p \\<bullet> ?b[?ba::=?bb]\\<^sub>s\\<^sub>v =\n  (?p \\<bullet> ?b)[?p \\<bullet> ?ba::=?p \\<bullet> ?bb]\\<^sub>s\\<^sub>v\n  ?p \\<bullet> subst_branchlv ?c ?ca ?cb =\n  subst_branchlv (?p \\<bullet> ?c) (?p \\<bullet> ?ca) (?p \\<bullet> ?cb)\n\ngoal (1 subgoal):\n 1. ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n    (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v", "by presburger"], ["proof (state)\nthis:\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "also"], ["proof (state)\nthis:\n  ((xa \\<leftrightarrow> c) \\<bullet> sa)[(xa \\<leftrightarrow> c) \\<bullet> xa::=(xa \\<leftrightarrow> c) \\<bullet> v']\\<^sub>s\\<^sub>v =\n  (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "have \"... = sa[xa::=v']\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v =\n    sa[xa::=v']\\<^sub>s\\<^sub>v", "using xafr assms"], ["proof (prove)\nusing this:\n  atom xa \\<sharp> sa[xa::=v']\\<^sub>s\\<^sub>v\n  atom c \\<sharp> (s, sa)\n  atom c \\<sharp> (v', x, xa, s, sa)\n  atom x \\<sharp> v'\n  atom xa \\<sharp> v'\n  (x \\<leftrightarrow> c) \\<bullet> s =\n  (xa \\<leftrightarrow> c) \\<bullet> sa\n\ngoal (1 subgoal):\n 1. (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v =\n    sa[xa::=v']\\<^sub>s\\<^sub>v", "by (simp add: flip_fresh_fresh fresh_Pair)"], ["proof (state)\nthis:\n  (xa \\<leftrightarrow> c) \\<bullet> sa[xa::=v']\\<^sub>s\\<^sub>v =\n  sa[xa::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "finally"], ["proof (chain)\npicking this:\n  s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  s[x::=v']\\<^sub>s\\<^sub>v = sa[xa::=v']\\<^sub>s\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma if_type_eq:\n  fixes \\<Gamma>::\\<Gamma> and v::v and z1::x\n  assumes \"atom z1' \\<sharp> (v, ca, (x, b, c) #\\<^sub>\\<Gamma> \\<Gamma>,  (CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v ))\" and \"atom z1 \\<sharp> v\" \n    and \"atom z1 \\<sharp> (za,ca)\" and \"atom z1' \\<sharp> (za,ca)\"\n  shows \"(\\<lbrace> z1' : ba  | CE_val v  ==  CE_val (V_lit ll)   IMP  ca[za::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>) = \\<lbrace> z1 : ba  | CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "have \"atom z1' \\<sharp> (CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v )\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "using assms fresh_prod4"], ["proof (prove)\nusing this:\n  atom\n   z1' \\<sharp> (v, ca, (x, b, c) #\\<^sub>\\<Gamma> \\<Gamma>,\n                 [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  atom z1 \\<sharp> v\n  atom z1 \\<sharp> (za, ca)\n  atom z1' \\<sharp> (za, ca)\n  ?x \\<sharp> (?a, ?b, ?c, ?d) =\n  (?x \\<sharp> ?a \\<and>\n   ?x \\<sharp> ?b \\<and> ?x \\<sharp> ?c \\<and> ?x \\<sharp> ?d)\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "by blast"], ["proof (state)\nthis:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "moreover"], ["proof (state)\nthis:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "hence \"(CE_val v  ==  CE_val (V_lit ll)   IMP  ca[za::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v) = (z1' \\<leftrightarrow> z1) \\<bullet> (CE_val v  ==  CE_val (V_lit ll)   IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v )\""], ["proof (prove)\nusing this:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "have \"(z1' \\<leftrightarrow> z1) \\<bullet> (CE_val v  ==  CE_val (V_lit ll)   IMP  ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v ) = ( (z1' \\<leftrightarrow> z1) \\<bullet> (CE_val v  ==  CE_val (V_lit ll)) IMP  ((z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "by auto"], ["proof (state)\nthis:\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "also"], ["proof (state)\nthis:\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "have \"... = ((CE_val v  ==  CE_val (V_lit ll))   IMP  ((z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "using \\<open>atom z1 \\<sharp> v\\<close> assms"], ["proof (prove)\nusing this:\n  atom z1 \\<sharp> v\n  atom\n   z1' \\<sharp> (v, ca, (x, b, c) #\\<^sub>\\<Gamma> \\<Gamma>,\n                 [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  atom z1 \\<sharp> v\n  atom z1 \\<sharp> (za, ca)\n  atom z1' \\<sharp> (za, ca)\n\ngoal (1 subgoal):\n 1. ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "by (metis (mono_tags) \\<open>atom z1' \\<sharp> (CE_val v == CE_val (V_lit ll) IMP ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v )\\<close> c.fresh(6) c.fresh(7) ce.fresh(1) flip_at_simps(2) flip_fresh_fresh fresh_at_base_permute_iff fresh_def supp_l_empty v.fresh(1))"], ["proof (state)\nthis:\n  ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "also"], ["proof (state)\nthis:\n  ((z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e )  IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "have \"... =  ((CE_val v  ==  CE_val (V_lit ll))   IMP  (ca[za::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v ))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "using assms"], ["proof (prove)\nusing this:\n  atom\n   z1' \\<sharp> (v, ca, (x, b, c) #\\<^sub>\\<Gamma> \\<Gamma>,\n                 [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  atom z1 \\<sharp> v\n  atom z1 \\<sharp> (za, ca)\n  atom z1' \\<sharp> (za, ca)\n\ngoal (1 subgoal):\n 1. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "by fastforce"], ["proof (state)\nthis:\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  (z1' \\<leftrightarrow> z1) \\<bullet> ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. atom\n     z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<Longrightarrow>\n    ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "finally"], ["proof (chain)\npicking this:\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "show ?thesis"], ["proof (prove)\nusing this:\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n    (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "by auto"], ["proof (state)\nthis:\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "ultimately"], ["proof (chain)\npicking this:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )", "show ?thesis"], ["proof (prove)\nusing this:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "using \\<tau>.eq_iff Abs1_eq_iff(3)[of z1' \"CE_val v  ==  CE_val (V_lit ll) IMP  ca[za::=[z1']\\<^sup>v]\\<^sub>c\\<^sub>v\" \n        z1 \"CE_val v  ==  CE_val (V_lit ll)   IMP ca[za::=[z1]\\<^sup>v]\\<^sub>c\\<^sub>v\"]"], ["proof (prove)\nusing this:\n  atom\n   z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n  (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )\n  (\\<lbrace> ?x : ?b  | ?c \\<rbrace> =\n   \\<lbrace> ?xa : ?ba  | ?ca \\<rbrace>) =\n  ([[atom ?x]]lst. ?c = [[atom ?xa]]lst. ?ca \\<and> ?b = ?ba)\n  ([[atom\n      z1']]lst. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n   [[atom\n      z1]]lst. ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v )) =\n  (z1' = z1 \\<and>\n   ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n   ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<or>\n   z1' \\<noteq> z1 \\<and>\n   ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v ) =\n   (z1' \\<leftrightarrow> z1) \\<bullet> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ) \\<and>\n   atom\n    z1' \\<sharp> ([ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v ))\n\ngoal (1 subgoal):\n 1. \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n    \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>", "by blast"], ["proof (state)\nthis:\n  \\<lbrace> z1' : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1' ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace> =\n  \\<lbrace> z1 : ba  | [ v ]\\<^sup>c\\<^sup>e  ==  [ [ ll ]\\<^sup>v ]\\<^sup>c\\<^sup>e   IMP  ca[za::=[ z1 ]\\<^sup>v]\\<^sub>c\\<^sub>v  \\<rbrace>\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_sv_var_flip:\n  fixes x::x and s::s and z::x\n  shows \"atom x \\<sharp> s \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> s) = s[z::=[x]\\<^sup>v]\\<^sub>s\\<^sub>v\" and \n    \"atom x \\<sharp> cs \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> cs) = subst_branchv cs z [x]\\<^sup>v\" and\n    \"atom x \\<sharp> css \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> css) = subst_branchlv css z [x]\\<^sup>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (atom x \\<sharp> s \\<Longrightarrow>\n     (x \\<leftrightarrow> z) \\<bullet> s =\n     s[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v) &&&\n    (atom x \\<sharp> cs \\<Longrightarrow>\n     (x \\<leftrightarrow> z) \\<bullet> cs =\n     cs[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v) &&&\n    (atom x \\<sharp> css \\<Longrightarrow>\n     (x \\<leftrightarrow> z) \\<bullet> css =\n     subst_branchlv css z [ x ]\\<^sup>v)", "apply(nominal_induct s and cs and css avoiding: z x rule: s_branch_s_branch_list.strong_induct)"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x z xa.\n       atom xa \\<sharp> [x]\\<^sup>s \\<Longrightarrow>\n       (xa \\<leftrightarrow> z) \\<bullet> [x]\\<^sup>s =\n       [x]\\<^sup>s[z::=[ xa ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 = x2 IN x3\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> LET x1 = x2 IN x3 =\n                         LET x1 = x2 IN x3[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> LET x1 : x2 = x3 IN x4 =\n                         LET x1 : x2 = x3 IN x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> IF x1 THEN x2 ELSE x3\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> (IF x1 THEN x2 ELSE x3) =\n                         (IF x1 THEN x2 ELSE x3)[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> VAR x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> VAR x1 : x2 = x3 IN x4 =\n                         VAR x1 : x2 = x3 IN x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x1 x2 z x.\n       atom x \\<sharp> x1 ::= x2 \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> x1 ::= x2 =\n       x1 ::= x2[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 7. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   subst_branchlv x2 b [ ba ]\\<^sup>v;\n        atom x \\<sharp> MATCH x1 WITH { x2 }\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> MATCH x1 WITH { x2 } =\n                         MATCH x1 WITH { x2 }[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 8. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x1 =\n                   x1[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x2 =\n           x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> WHILE x1 DO { x2 } \\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> (WHILE x1 DO { x2 } ) =\n                         (WHILE x1 DO { x2 } )[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 9. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x1 =\n                   x1[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x2 =\n           x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp>  x1 ;; x2 \\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> ( x1 ;; x2 ) =\n                         ( x1 ;; x2 )[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 10. \\<And>x1 x2 z x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                    x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n         atom x \\<sharp> ASSERT x1 IN x2 \\<rbrakk>\n        \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> ASSERT x1 IN x2  =\n                          ASSERT x1 IN x2 [z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\nA total of 13 subgoals...", "using [[simproc del: alpha_lst]]"], ["proof (prove)\ngoal (13 subgoals):\n 1. \\<And>x z xa.\n       atom xa \\<sharp> [x]\\<^sup>s \\<Longrightarrow>\n       (xa \\<leftrightarrow> z) \\<bullet> [x]\\<^sup>s =\n       [x]\\<^sup>s[z::=[ xa ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 = x2 IN x3\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> LET x1 = x2 IN x3 =\n                         LET x1 = x2 IN x3[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> LET x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> LET x1 : x2 = x3 IN x4 =\n                         LET x1 : x2 = x3 IN x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> IF x1 THEN x2 ELSE x3\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> (IF x1 THEN x2 ELSE x3) =\n                         (IF x1 THEN x2 ELSE x3)[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> VAR x1 : x2 = x3 IN x4\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> VAR x1 : x2 = x3 IN x4 =\n                         VAR x1 : x2 = x3 IN x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x1 x2 z x.\n       atom x \\<sharp> x1 ::= x2 \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> x1 ::= x2 =\n       x1 ::= x2[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 7. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   subst_branchlv x2 b [ ba ]\\<^sup>v;\n        atom x \\<sharp> MATCH x1 WITH { x2 }\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> MATCH x1 WITH { x2 } =\n                         MATCH x1 WITH { x2 }[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 8. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x1 =\n                   x1[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x2 =\n           x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> WHILE x1 DO { x2 } \\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> (WHILE x1 DO { x2 } ) =\n                         (WHILE x1 DO { x2 } )[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 9. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x1 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x1 =\n                   x1[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x2 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x2 =\n           x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp>  x1 ;; x2 \\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> ( x1 ;; x2 ) =\n                         ( x1 ;; x2 )[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 10. \\<And>x1 x2 z x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                    x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n         atom x \\<sharp> ASSERT x1 IN x2 \\<rbrakk>\n        \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> ASSERT x1 IN x2  =\n                          ASSERT x1 IN x2 [z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\nA total of 13 subgoals...", "apply (auto  )"], ["proof (prove)\ngoal (12 subgoals):\n 1. \\<And>x z xa.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       x[z::=[ xa ]\\<^sup>v]\\<^sub>v = x[z::=[ xa ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3; atom x \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 7. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x3[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x3[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 8. \\<And>x1 x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 9. \\<And>x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       x2[z::=[ x ]\\<^sup>v]\\<^sub>v = x2[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 10. \\<And>x1 x2 z x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                    subst_branchlv x2 b [ ba ]\\<^sup>v;\n         atom x \\<sharp> x1; atom x \\<sharp> x2\\<rbrakk>\n        \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                          x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\nA total of 12 subgoals...", "(* This unpacks subst, perm *)"], ["proof (prove)\ngoal (12 subgoals):\n 1. \\<And>x z xa.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       x[z::=[ xa ]\\<^sup>v]\\<^sub>v = x[z::=[ xa ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3; atom x \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 7. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x3[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x3[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 8. \\<And>x1 x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 9. \\<And>x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       x2[z::=[ x ]\\<^sup>v]\\<^sub>v = x2[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 10. \\<And>x1 x2 z x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                    subst_branchlv x2 b [ ba ]\\<^sup>v;\n         atom x \\<sharp> x1; atom x \\<sharp> x2\\<rbrakk>\n        \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                          x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\nA total of 12 subgoals...", "using  subst_tv_var_flip  flip_fresh_fresh v.fresh s_branch_s_branch_list.fresh \n    subst_v_\\<tau>_def subst_v_v_def subst_vv_var_flip subst_v_e_def subst_ev_var_flip pure_fresh"], ["proof (prove)\nusing this:\n  atom ?xa \\<sharp> ?\\<tau> \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?xa) \\<bullet> ?\\<tau> =\n  ?\\<tau>[?x::=[ ?xa ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n  ?a \\<sharp> [ ?l ]\\<^sup>v = ?a \\<sharp> ?l\n  ?a \\<sharp> [ ?x ]\\<^sup>v = ?a \\<sharp> ?x\n  ?a \\<sharp> [ ?v1.0 , ?v2.0 ]\\<^sup>v =\n  (?a \\<sharp> ?v1.0 \\<and> ?a \\<sharp> ?v2.0)\n  ?a \\<sharp> V_cons ?list1.0 ?list2.0 ?v =\n  (?a \\<sharp> ?list1.0 \\<and> ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> V_consp ?list1.0 ?list2.0 ?b ?v =\n  (?a \\<sharp> ?list1.0 \\<and>\n   ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?b \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> [?v]\\<^sup>s = ?a \\<sharp> ?v\n  ?a \\<sharp> LET ?x = ?e IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?e)\n  ?a \\<sharp> LET ?x : ?\\<tau> = ?s1.0 IN ?s2.0 =\n  ((?a \\<sharp> ?s2.0 \\<or> ?a \\<in> set [atom ?x]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?s1.0)\n  ?a \\<sharp> IF ?v THEN ?s1.0 ELSE ?s2.0 =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> VAR ?u : ?\\<tau> = ?v IN ?s =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?u]) \\<and>\n   ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> ?u ::= ?v = (?a \\<sharp> ?u \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> MATCH ?v WITH { ?branch_list } =\n  (?a \\<sharp> ?v \\<and> ?a \\<sharp> ?branch_list)\n  ?a \\<sharp> WHILE ?s1.0 DO { ?s2.0 }  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp>  ?s1.0 ;; ?s2.0  =\n  (?a \\<sharp> ?s1.0 \\<and> ?a \\<sharp> ?s2.0)\n  ?a \\<sharp> ASSERT ?c IN ?s  = (?a \\<sharp> ?c \\<and> ?a \\<sharp> ?s)\n  ?a \\<sharp>  ?list ?x \\<Rightarrow> ?s  =\n  ((?a \\<sharp> ?s \\<or> ?a \\<in> set [atom ?x]) \\<and> ?a \\<sharp> ?list)\n  ?a \\<sharp> { ?branch_s } = ?a \\<sharp> ?branch_s\n  ?a \\<sharp>  ?branch_s | ?branch_list   =\n  (?a \\<sharp> ?branch_s \\<and> ?a \\<sharp> ?branch_list)\n  subst_v = subst_tv_abbrev\n  subst_v = subst_vv_abbrev\n  atom ?y \\<sharp> ?v \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?v =\n  ?v[?x::=[ ?y ]\\<^sup>v]\\<^sub>v\\<^sub>v\n  subst_v = subst_ev_abbrev\n  atom ?y \\<sharp> ?e \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?e =\n  ?e[?x::=[ ?y ]\\<^sup>v]\\<^sub>e\\<^sub>v\n  ?a \\<sharp> ?x\n\ngoal (12 subgoals):\n 1. \\<And>x z xa.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       x[z::=[ xa ]\\<^sup>v]\\<^sub>v = x[z::=[ xa ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>e\\<^sub>v\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>atom x1 \\<sharp> z; atom x1 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x4 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x4 =\n           x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x2; atom x \\<sharp> x3; atom x \\<sharp> x4\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 5. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 6. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x2[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x2[z::=[ x ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n 7. \\<And>x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3\\<rbrakk>\n       \\<Longrightarrow> x3[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x3[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 8. \\<And>x1 x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 9. \\<And>x2 z x.\n       atom x \\<sharp> x2 \\<Longrightarrow>\n       x2[z::=[ x ]\\<^sup>v]\\<^sub>v = x2[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\n 10. \\<And>x1 x2 z x.\n        \\<lbrakk>\\<And>b ba.\n                    atom ba \\<sharp> x2 \\<Longrightarrow>\n                    (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                    subst_branchlv x2 b [ ba ]\\<^sup>v;\n         atom x \\<sharp> x1; atom x \\<sharp> x2\\<rbrakk>\n        \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                          x1[z::=[ x ]\\<^sup>v]\\<^sub>v\\<^sub>v\nA total of 12 subgoals...", "apply auto"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 z x.\n       \\<lbrakk>atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 3. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 4. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1", "defer 1"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 2. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 4. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "(* Sometimes defering hard goals to the end makes it easier to finish *)"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 2. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 4. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "using x_fresh_u"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?u\n\ngoal (4 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 2. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 4. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "apply blast"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "(* Next two involve u and flipping with x *)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 3. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "defer 1"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 2. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using x_fresh_u"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?u\n\ngoal (3 subgoals):\n 1. \\<And>x1 x2 x3 z x.\n       \\<lbrakk>atom x2 \\<sharp> z; atom x2 \\<sharp> x;\n        \\<And>b ba.\n           atom ba \\<sharp> x3 \\<Longrightarrow>\n           (ba \\<leftrightarrow> b) \\<bullet> x3 =\n           x3[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> x1 = x1\n 2. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 3. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "apply blast"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n 2. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v", "defer 1"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "using x_fresh_u Abs1_eq_iff'(3) flip_fresh_fresh"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?u\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   (?b \\<leftrightarrow> ?a) \\<bullet> ?x = ?y \\<and> atom ?b \\<sharp> ?x)\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (2 subgoals):\n 1. \\<And>x1 x2 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x2 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x2 =\n                   x2[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x1; atom x \\<sharp> x2;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> x1[z::=[ x ]\\<^sup>v]\\<^sub>v =\n                         x1[z::=[ x ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "apply (simp add: subst_v_c_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "using x_fresh_u Abs1_eq_iff'(3) flip_fresh_fresh"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?u\n  ([[atom ?a]]lst. ?x = [[atom ?b]]lst. ?y) =\n  (?a = ?b \\<and> ?x = ?y \\<or>\n   ?a \\<noteq> ?b \\<and>\n   (?b \\<leftrightarrow> ?a) \\<bullet> ?x = ?y \\<and> atom ?b \\<sharp> ?x)\n  \\<lbrakk>atom ?a \\<sharp> ?x; atom ?b \\<sharp> ?x\\<rbrakk>\n  \\<Longrightarrow> (?a \\<leftrightarrow> ?b) \\<bullet> ?x = ?x\n\ngoal (1 subgoal):\n 1. \\<And>x1 x2 x3 x4 z x.\n       \\<lbrakk>\\<And>b ba.\n                   atom ba \\<sharp> x4 \\<Longrightarrow>\n                   (ba \\<leftrightarrow> b) \\<bullet> x4 =\n                   x4[b::=[ ba ]\\<^sup>v]\\<^sub>s\\<^sub>v;\n        atom x \\<sharp> x4; atom x \\<sharp> x2; atom x \\<sharp> x3;\n        \\<And>a x b.\n           \\<lbrakk>atom a \\<sharp> x; atom b \\<sharp> x\\<rbrakk>\n           \\<Longrightarrow> (a \\<leftrightarrow> b) \\<bullet> x = x;\n        subst_v = subst_tv_abbrev; subst_v = subst_vv_abbrev;\n        subst_v = subst_ev_abbrev; \\<And>a x. a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> [[atom\n                            ((x \\<leftrightarrow> z) \\<bullet> x1)]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v =\n                         [[atom\n                            x1]]lst. x4[z::=[ x ]\\<^sup>v]\\<^sub>s\\<^sub>v", "by (simp add: flip_fresh_fresh)"], ["", "instantiation s :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_sv\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(s, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::s"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "using fresh_subst_sv_if subst_v_s_def"], ["proof (prove)\nusing this:\n  ?j \\<sharp> ?s[?x::=?v]\\<^sub>s\\<^sub>v =\n  (atom ?x \\<sharp> ?s \\<and> ?j \\<sharp> ?s \\<or>\n   ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?s \\<or> ?j = atom ?x))\n  ?j \\<sharp> ?cs[?x::=?v]\\<^sub>s\\<^sub>v =\n  (atom ?x \\<sharp> ?cs \\<and> ?j \\<sharp> ?cs \\<or>\n   ?j \\<sharp> ?v \\<and> (?j \\<sharp> ?cs \\<or> ?j = atom ?x))\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::s and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "using forget_subst_sv subst_v_s_def"], ["proof (prove)\nusing this:\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::s"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "using subst_sv_id  subst_v_s_def"], ["proof (prove)\nusing this:\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>s\\<^sub>v = ?A\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "by simp"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::s"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "using subst_sv_commute  subst_v_s_def"], ["proof (prove)\nusing this:\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  ?A[?i::=?t]\\<^sub>s\\<^sub>v[?j::=?u]\\<^sub>s\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n  atom ?j \\<sharp> ?B \\<Longrightarrow>\n  ?B[?i::=?t]\\<^sub>s\\<^sub>v[?j::=?u]\\<^sub>s\\<^sub>v =\n  ?B[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>s\\<^sub>v\n  atom ?j \\<sharp> ?C \\<Longrightarrow>\n  subst_branchlv (subst_branchlv ?C ?i ?t) ?j ?u =\n  subst_branchlv ?C ?i ?t[?j::=?u]\\<^sub>v\\<^sub>v\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::s and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "using subst_sv_var_flip subst_v_s_def"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?s \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?s =\n  ?s[?z::=[ ?x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?cs \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?cs =\n  ?cs[?z::=[ ?x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?css \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?css =\n  subst_branchlv ?css ?z [ ?x ]\\<^sup>v\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::s and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "using subst_sv_var_flip subst_v_s_def"], ["proof (prove)\nusing this:\n  atom ?x \\<sharp> ?s \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?s =\n  ?s[?z::=[ ?x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?cs \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?cs =\n  ?cs[?z::=[ ?x ]\\<^sup>v]\\<^sub>s\\<^sub>v\n  atom ?x \\<sharp> ?css \\<Longrightarrow>\n  (?x \\<leftrightarrow> ?z) \\<bullet> ?css =\n  subst_branchlv ?css ?z [ ?x ]\\<^sup>v\n  subst_v = subst_sv_abbrev\n\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "by simp"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "section \\<open>Type Definition\\<close>"], ["", "nominal_function subst_ft_v :: \"fun_typ \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> fun_typ\" where\n  \"atom z \\<sharp> (x,v) \\<Longrightarrow> subst_ft_v ( AF_fun_typ z b c t (s::s)) x v = AF_fun_typ z b c[x::=v]\\<^sub>c\\<^sub>v t[x::=v]\\<^sub>\\<tau>\\<^sub>v s[x::=v]\\<^sub>s\\<^sub>v\""], ["proof (prove)\ngoal (4 subgoals):\n 1. eqvt subst_ft_v_graph_aux\n 2. \\<And>x y. subst_ft_v_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       (\\<And>z xa v b c t s.\n           \\<lbrakk>atom z \\<sharp> (xa, v);\n            x = (AF_fun_typ z b c t s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 4. \\<And>z x v b c t s za xa va ba ca ta sa.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (xa, va);\n        (AF_fun_typ z b c t s, x, v) =\n        (AF_fun_typ za ba ca ta sa, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ z b c[x::=v]\\<^sub>c\\<^sub>v\n                          t[x::=v]\\<^sub>\\<tau>\\<^sub>v\n                          s[x::=v]\\<^sub>s\\<^sub>v =\n                         AF_fun_typ za ba ca[xa::=va]\\<^sub>c\\<^sub>v\n                          ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n                          sa[xa::=va]\\<^sub>s\\<^sub>v", "apply(simp add: eqvt_def subst_ft_v_graph_aux_def )"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>x y. subst_ft_v_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       (\\<And>z xa v b c t s.\n           \\<lbrakk>atom z \\<sharp> (xa, v);\n            x = (AF_fun_typ z b c t s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 3. \\<And>z x v b c t s za xa va ba ca ta sa.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (xa, va);\n        (AF_fun_typ z b c t s, x, v) =\n        (AF_fun_typ za ba ca ta sa, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ z b c[x::=v]\\<^sub>c\\<^sub>v\n                          t[x::=v]\\<^sub>\\<tau>\\<^sub>v\n                          s[x::=v]\\<^sub>s\\<^sub>v =\n                         AF_fun_typ za ba ca[xa::=va]\\<^sub>c\\<^sub>v\n                          ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n                          sa[xa::=va]\\<^sub>s\\<^sub>v", "apply(simp add:fun_typ.strong_exhaust )"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P x.\n       (\\<And>z xa v b c t s.\n           \\<lbrakk>atom z \\<sharp> (xa, v);\n            x = (AF_fun_typ z b c t s, xa, v)\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x v b c t s za xa va ba ca ta sa.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (xa, va);\n        (AF_fun_typ z b c t s, x, v) =\n        (AF_fun_typ za ba ca ta sa, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ z b c[x::=v]\\<^sub>c\\<^sub>v\n                          t[x::=v]\\<^sub>\\<tau>\\<^sub>v\n                          s[x::=v]\\<^sub>s\\<^sub>v =\n                         AF_fun_typ za ba ca[xa::=va]\\<^sub>c\\<^sub>v\n                          ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n                          sa[xa::=va]\\<^sub>s\\<^sub>v", "apply(auto)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P a aa b.\n       (\\<And>z ba c t s.\n           \\<lbrakk>atom z \\<sharp> (aa, b);\n            a = AF_fun_typ z ba c t s\\<rbrakk>\n           \\<Longrightarrow> P) \\<Longrightarrow>\n       P\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, t, s, sa, ta, ca) \\<longrightarrow>\n           atom\n            cb \\<sharp> (z, za, ((c, t), s), (ca, ta), sa) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n           t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n           ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n           (z \\<leftrightarrow> cb) \\<bullet> s =\n           (za \\<leftrightarrow> cb) \\<bullet> sa;\n        atom cb \\<sharp> (c, t, s, sa, ta, v, x, ca);\n        atom\n         cb \\<sharp> (z, za,\n                      ((c[x::=v]\\<^sub>c\\<^sub>v,\n                        t[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                       s[x::=v]\\<^sub>s\\<^sub>v),\n                      (ca[x::=v]\\<^sub>c\\<^sub>v,\n                       ta[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                      sa[x::=v]\\<^sub>s\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, t, s, sa, ta, ca) \\<longrightarrow>\n           atom\n            cb \\<sharp> (z, za, ((c, t), s), (ca, ta), sa) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n           t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n           ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n           (z \\<leftrightarrow> cb) \\<bullet> s =\n           (za \\<leftrightarrow> cb) \\<bullet> sa;\n        atom cb \\<sharp> (c, t, s, sa, ta, v, x, ca);\n        atom\n         cb \\<sharp> (z, za,\n                      ((c[x::=v]\\<^sub>c\\<^sub>v,\n                        t[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                       s[x::=v]\\<^sub>s\\<^sub>v),\n                      (ca[x::=v]\\<^sub>c\\<^sub>v,\n                       ta[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                      sa[x::=v]\\<^sub>s\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "apply(rule_tac y=a and c=\"(aa,b)\" in fun_typ.strong_exhaust)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P a aa b x1 x2 x3 x4 x5.\n       \\<lbrakk>\\<And>z ba c t s.\n                   \\<lbrakk>atom z \\<sharp> (aa, b);\n                    a = AF_fun_typ z ba c t s\\<rbrakk>\n                   \\<Longrightarrow> P;\n        {atom x1} \\<sharp>* (aa, b); a = AF_fun_typ x1 x2 x3 x4 x5\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, t, s, sa, ta, ca) \\<longrightarrow>\n           atom\n            cb \\<sharp> (z, za, ((c, t), s), (ca, ta), sa) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n           t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n           ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n           (z \\<leftrightarrow> cb) \\<bullet> s =\n           (za \\<leftrightarrow> cb) \\<bullet> sa;\n        atom cb \\<sharp> (c, t, s, sa, ta, v, x, ca);\n        atom\n         cb \\<sharp> (z, za,\n                      ((c[x::=v]\\<^sub>c\\<^sub>v,\n                        t[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                       s[x::=v]\\<^sub>s\\<^sub>v),\n                      (ca[x::=v]\\<^sub>c\\<^sub>v,\n                       ta[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                      sa[x::=v]\\<^sub>s\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 3. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>atom z \\<sharp> (x, v); atom za \\<sharp> (x, v);\n        \\<forall>cb.\n           atom cb \\<sharp> (c, t, s, sa, ta, ca) \\<longrightarrow>\n           atom\n            cb \\<sharp> (z, za, ((c, t), s), (ca, ta), sa) \\<longrightarrow>\n           c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n           ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n           t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n           ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n           (z \\<leftrightarrow> cb) \\<bullet> s =\n           (za \\<leftrightarrow> cb) \\<bullet> sa;\n        atom cb \\<sharp> (c, t, s, sa, ta, v, x, ca);\n        atom\n         cb \\<sharp> (z, za,\n                      ((c[x::=v]\\<^sub>c\\<^sub>v,\n                        t[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                       s[x::=v]\\<^sub>s\\<^sub>v),\n                      (ca[x::=v]\\<^sub>c\\<^sub>v,\n                       ta[x::=v]\\<^sub>\\<tau>\\<^sub>v),\n                      sa[x::=v]\\<^sub>s\\<^sub>v)\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "apply (auto simp: eqvt_at_def fresh_star_def fresh_Pair fresh_at_base)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "proof(goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "case (1 z xa va c t s za ca ta sa cb)"], ["proof (state)\nthis:\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n\ngoal (2 subgoals):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "hence  \"c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v = ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by (metis flip_commute subst_cv_var_flip)"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "hence  \"c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v = ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\""], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n    ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> c[x::=v]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                         ca[x::=v]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n 2. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v", "show ?case"], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using subst_cv_commute atom_eq_iff fresh_atom fresh_atom_at_base subst_cv_commute_full v.fresh"], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  ?A[?i::=?t]\\<^sub>c\\<^sub>v[?j::=?u]\\<^sub>c\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>v\n  (atom ?a = atom ?b) = (?a = ?b)\n  ?a \\<sharp> ?b = (?a \\<noteq> ?b)\n  ?a \\<sharp> atom ?b = ?a \\<sharp> ?b\n  \\<lbrakk>atom ?z \\<sharp> ?v; atom ?x \\<sharp> ?w; ?x \\<noteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?c[?z::=?w]\\<^sub>c\\<^sub>v[?x::=?v]\\<^sub>c\\<^sub>v =\n                    ?c[?x::=?v]\\<^sub>c\\<^sub>v[?z::=?w]\\<^sub>c\\<^sub>v\n  ?a \\<sharp> [ ?l ]\\<^sup>v = ?a \\<sharp> ?l\n  ?a \\<sharp> [ ?x ]\\<^sup>v = ?a \\<sharp> ?x\n  ?a \\<sharp> [ ?v1.0 , ?v2.0 ]\\<^sup>v =\n  (?a \\<sharp> ?v1.0 \\<and> ?a \\<sharp> ?v2.0)\n  ?a \\<sharp> V_cons ?list1.0 ?list2.0 ?v =\n  (?a \\<sharp> ?list1.0 \\<and> ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> V_consp ?list1.0 ?list2.0 ?b ?v =\n  (?a \\<sharp> ?list1.0 \\<and>\n   ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?b \\<and> ?a \\<sharp> ?v)\n\ngoal (1 subgoal):\n 1. c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "using 1 subst_cv_var_flip  flip_commute"], ["proof (prove)\nusing this:\n  c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v =\n  ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v[xa::=va]\\<^sub>c\\<^sub>v\n  atom ?j \\<sharp> ?A \\<Longrightarrow>\n  ?A[?i::=?t]\\<^sub>c\\<^sub>v[?j::=?u]\\<^sub>c\\<^sub>v =\n  ?A[?i::=?t[?j::=?u]\\<^sub>v\\<^sub>v]\\<^sub>c\\<^sub>v\n  (atom ?a = atom ?b) = (?a = ?b)\n  ?a \\<sharp> ?b = (?a \\<noteq> ?b)\n  ?a \\<sharp> atom ?b = ?a \\<sharp> ?b\n  \\<lbrakk>atom ?z \\<sharp> ?v; atom ?x \\<sharp> ?w; ?x \\<noteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?c[?z::=?w]\\<^sub>c\\<^sub>v[?x::=?v]\\<^sub>c\\<^sub>v =\n                    ?c[?x::=?v]\\<^sub>c\\<^sub>v[?z::=?w]\\<^sub>c\\<^sub>v\n  ?a \\<sharp> [ ?l ]\\<^sup>v = ?a \\<sharp> ?l\n  ?a \\<sharp> [ ?x ]\\<^sup>v = ?a \\<sharp> ?x\n  ?a \\<sharp> [ ?v1.0 , ?v2.0 ]\\<^sup>v =\n  (?a \\<sharp> ?v1.0 \\<and> ?a \\<sharp> ?v2.0)\n  ?a \\<sharp> V_cons ?list1.0 ?list2.0 ?v =\n  (?a \\<sharp> ?list1.0 \\<and> ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?v)\n  ?a \\<sharp> V_consp ?list1.0 ?list2.0 ?b ?v =\n  (?a \\<sharp> ?list1.0 \\<and>\n   ?a \\<sharp> ?list2.0 \\<and> ?a \\<sharp> ?b \\<and> ?a \\<sharp> ?v)\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n  atom ?y \\<sharp> ?c \\<Longrightarrow>\n  (?y \\<leftrightarrow> ?x) \\<bullet> ?c =\n  ?c[?x::=[ ?y ]\\<^sup>v]\\<^sub>c\\<^sub>v\n  (?a \\<leftrightarrow> ?b) = (?b \\<leftrightarrow> ?a)\n\ngoal (1 subgoal):\n 1. c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n    ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  c[xa::=va]\\<^sub>c\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n  ca[xa::=va]\\<^sub>c\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "case (2 z xa va c t s za ca ta sa cb)"], ["proof (state)\nthis:\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n\ngoal (1 subgoal):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "hence  \"t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v = ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\nusing this:\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n\ngoal (1 subgoal):\n 1. t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n    ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "by metis"], ["proof (state)\nthis:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "hence  \"t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v = ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v\""], ["proof (prove)\nusing this:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v =\n    ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>z x v c t s za ca ta sa cb.\n       \\<lbrakk>\\<forall>cb.\n                   atom cb \\<sharp> c \\<and>\n                   atom cb \\<sharp> t \\<and>\n                   atom cb \\<sharp> s \\<and>\n                   atom cb \\<sharp> sa \\<and>\n                   atom cb \\<sharp> ta \\<and>\n                   atom cb \\<sharp> ca \\<longrightarrow>\n                   cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n                   c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n                   ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n                   t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                   ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n                   (z \\<leftrightarrow> cb) \\<bullet> s =\n                   (za \\<leftrightarrow> cb) \\<bullet> sa;\n        z \\<noteq> x; atom z \\<sharp> v; za \\<noteq> x; atom za \\<sharp> v;\n        atom cb \\<sharp> c; cb \\<noteq> z; cb \\<noteq> za;\n        atom cb \\<sharp> t; atom cb \\<sharp> s; atom cb \\<sharp> sa;\n        atom cb \\<sharp> ta; atom cb \\<sharp> v; cb \\<noteq> x;\n        atom cb \\<sharp> ca\\<rbrakk>\n       \\<Longrightarrow> t[x::=v]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n                         ta[x::=v]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v", "show ?case"], ["proof (prove)\nusing this:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n\ngoal (1 subgoal):\n 1. t[xa::=va]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n    ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "using subst_tv_commute_full 2"], ["proof (prove)\nusing this:\n  t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v =\n  ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v[xa::=va]\\<^sub>\\<tau>\\<^sub>v\n  \\<lbrakk>atom ?z \\<sharp> ?v; atom ?x \\<sharp> ?w; ?x \\<noteq> ?z\\<rbrakk>\n  \\<Longrightarrow> ?c[?z::=?w]\\<^sub>\\<tau>\\<^sub>v[?x::=?v]\\<^sub>\\<tau>\\<^sub>v =\n                    ?c[?x::=?v]\\<^sub>\\<tau>\\<^sub>v[?z::=?w]\\<^sub>\\<tau>\\<^sub>v\n  \\<forall>cb.\n     atom cb \\<sharp> c \\<and>\n     atom cb \\<sharp> t \\<and>\n     atom cb \\<sharp> s \\<and>\n     atom cb \\<sharp> sa \\<and>\n     atom cb \\<sharp> ta \\<and> atom cb \\<sharp> ca \\<longrightarrow>\n     cb \\<noteq> z \\<and> cb \\<noteq> za \\<longrightarrow>\n     c[z::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v =\n     ca[za::=[ cb ]\\<^sup>v]\\<^sub>c\\<^sub>v \\<and>\n     t[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n     ta[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v \\<and>\n     (z \\<leftrightarrow> cb) \\<bullet> s =\n     (za \\<leftrightarrow> cb) \\<bullet> sa\n  z \\<noteq> xa\n  atom z \\<sharp> va\n  za \\<noteq> xa\n  atom za \\<sharp> va\n  atom cb \\<sharp> c\n  cb \\<noteq> z\n  cb \\<noteq> za\n  atom cb \\<sharp> t\n  atom cb \\<sharp> s\n  atom cb \\<sharp> sa\n  atom cb \\<sharp> ta\n  atom cb \\<sharp> va\n  cb \\<noteq> xa\n  atom cb \\<sharp> ca\n\ngoal (1 subgoal):\n 1. t[xa::=va]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n    ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v", "by (metis atom_eq_iff fresh_atom fresh_atom_at_base v.fresh(2))"], ["proof (state)\nthis:\n  t[xa::=va]\\<^sub>\\<tau>\\<^sub>v[z::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v =\n  ta[xa::=va]\\<^sub>\\<tau>\\<^sub>v[za::=[ cb ]\\<^sup>v]\\<^sub>\\<tau>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_ft_v_dom", "by lexicographic_order"], ["", "nominal_function subst_ftq_v :: \"fun_typ_q \\<Rightarrow> x \\<Rightarrow> v \\<Rightarrow> fun_typ_q\" where\n  \"atom bv \\<sharp> (x,v) \\<Longrightarrow> subst_ftq_v (AF_fun_typ_some bv ft) x v = (AF_fun_typ_some bv (subst_ft_v ft x v))\" \n|  \"subst_ftq_v (AF_fun_typ_none  ft) x v = (AF_fun_typ_none (subst_ft_v ft x v))\""], ["proof (prove)\ngoal (6 subgoals):\n 1. eqvt subst_ftq_v_graph_aux\n 2. \\<And>x y. subst_ftq_v_graph x y \\<Longrightarrow> True\n 3. \\<And>P x.\n       \\<lbrakk>\\<And>bv xa v ft.\n                   \\<lbrakk>atom bv \\<sharp> (xa, v);\n                    x = (AF_fun_typ_some bv ft, xa, v)\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft xa v.\n           x = (AF_fun_typ_none ft, xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 4. \\<And>bv x v ft bva xa va fta.\n       \\<lbrakk>atom bv \\<sharp> (x, v); atom bva \\<sharp> (xa, va);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_some bva fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_some bva (subst_ft_v fta xa va)\n 5. \\<And>bv x v ft fta xa va.\n       \\<lbrakk>atom bv \\<sharp> (x, v);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_none fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_none (subst_ft_v fta xa va)\n 6. \\<And>ft x v fta xa va.\n       (AF_fun_typ_none ft, x, v) =\n       (AF_fun_typ_none fta, xa, va) \\<Longrightarrow>\n       AF_fun_typ_none (subst_ft_v ft x v) =\n       AF_fun_typ_none (subst_ft_v fta xa va)", "apply(simp add: eqvt_def subst_ftq_v_graph_aux_def )"], ["proof (prove)\ngoal (5 subgoals):\n 1. \\<And>x y. subst_ftq_v_graph x y \\<Longrightarrow> True\n 2. \\<And>P x.\n       \\<lbrakk>\\<And>bv xa v ft.\n                   \\<lbrakk>atom bv \\<sharp> (xa, v);\n                    x = (AF_fun_typ_some bv ft, xa, v)\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft xa v.\n           x = (AF_fun_typ_none ft, xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 3. \\<And>bv x v ft bva xa va fta.\n       \\<lbrakk>atom bv \\<sharp> (x, v); atom bva \\<sharp> (xa, va);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_some bva fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_some bva (subst_ft_v fta xa va)\n 4. \\<And>bv x v ft fta xa va.\n       \\<lbrakk>atom bv \\<sharp> (x, v);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_none fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_none (subst_ft_v fta xa va)\n 5. \\<And>ft x v fta xa va.\n       (AF_fun_typ_none ft, x, v) =\n       (AF_fun_typ_none fta, xa, va) \\<Longrightarrow>\n       AF_fun_typ_none (subst_ft_v ft x v) =\n       AF_fun_typ_none (subst_ft_v fta xa va)", "apply(simp add:fun_typ_q.strong_exhaust )"], ["proof (prove)\ngoal (4 subgoals):\n 1. \\<And>P x.\n       \\<lbrakk>\\<And>bv xa v ft.\n                   \\<lbrakk>atom bv \\<sharp> (xa, v);\n                    x = (AF_fun_typ_some bv ft, xa, v)\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft xa v.\n           x = (AF_fun_typ_none ft, xa, v) \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>bv x v ft bva xa va fta.\n       \\<lbrakk>atom bv \\<sharp> (x, v); atom bva \\<sharp> (xa, va);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_some bva fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_some bva (subst_ft_v fta xa va)\n 3. \\<And>bv x v ft fta xa va.\n       \\<lbrakk>atom bv \\<sharp> (x, v);\n        (AF_fun_typ_some bv ft, x, v) =\n        (AF_fun_typ_none fta, xa, va)\\<rbrakk>\n       \\<Longrightarrow> AF_fun_typ_some bv (subst_ft_v ft x v) =\n                         AF_fun_typ_none (subst_ft_v fta xa va)\n 4. \\<And>ft x v fta xa va.\n       (AF_fun_typ_none ft, x, v) =\n       (AF_fun_typ_none fta, xa, va) \\<Longrightarrow>\n       AF_fun_typ_none (subst_ft_v ft x v) =\n       AF_fun_typ_none (subst_ft_v fta xa va)", "apply(auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>P a aa b.\n       \\<lbrakk>\\<And>bv ft.\n                   \\<lbrakk>atom bv \\<sharp> (aa, b);\n                    a = AF_fun_typ_some bv ft\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft. a = AF_fun_typ_none ft \\<Longrightarrow> P\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>bv x v ft bva fta c.\n       \\<lbrakk>atom bv \\<sharp> (x, v); atom bva \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (ft, fta) \\<longrightarrow>\n           atom c \\<sharp> (bv, bva, ft, fta) \\<longrightarrow>\n           (bv \\<leftrightarrow> c) \\<bullet> ft =\n           (bva \\<leftrightarrow> c) \\<bullet> fta;\n        atom c \\<sharp> (ft, v, x, fta);\n        atom\n         c \\<sharp> (bv, bva, subst_ft_v ft x v,\n                     subst_ft_v fta x v)\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bv \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bva \\<leftrightarrow> c) \\<bullet> v)", "apply(rule_tac y=a and c=\"(aa,b)\" in fun_typ_q.strong_exhaust)"], ["proof (prove)\ngoal (3 subgoals):\n 1. \\<And>P a aa b x11 x12.\n       \\<lbrakk>\\<And>bv ft.\n                   \\<lbrakk>atom bv \\<sharp> (aa, b);\n                    a = AF_fun_typ_some bv ft\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft. a = AF_fun_typ_none ft \\<Longrightarrow> P;\n        {atom x11} \\<sharp>* (aa, b); a = AF_fun_typ_some x11 x12\\<rbrakk>\n       \\<Longrightarrow> P\n 2. \\<And>P a aa b x2.\n       \\<lbrakk>\\<And>bv ft.\n                   \\<lbrakk>atom bv \\<sharp> (aa, b);\n                    a = AF_fun_typ_some bv ft\\<rbrakk>\n                   \\<Longrightarrow> P;\n        \\<And>ft. a = AF_fun_typ_none ft \\<Longrightarrow> P;\n        a = AF_fun_typ_none x2\\<rbrakk>\n       \\<Longrightarrow> P\n 3. \\<And>bv x v ft bva fta c.\n       \\<lbrakk>atom bv \\<sharp> (x, v); atom bva \\<sharp> (x, v);\n        \\<forall>c.\n           atom c \\<sharp> (ft, fta) \\<longrightarrow>\n           atom c \\<sharp> (bv, bva, ft, fta) \\<longrightarrow>\n           (bv \\<leftrightarrow> c) \\<bullet> ft =\n           (bva \\<leftrightarrow> c) \\<bullet> fta;\n        atom c \\<sharp> (ft, v, x, fta);\n        atom\n         c \\<sharp> (bv, bva, subst_ft_v ft x v,\n                     subst_ft_v fta x v)\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bv \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bva \\<leftrightarrow> c) \\<bullet> v)", "apply (auto simp: eqvt_at_def fresh_star_def fresh_Pair fresh_at_base)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>bv x v ft bva fta c.\n       \\<lbrakk>atom bv \\<sharp> v; atom bva \\<sharp> v;\n        \\<forall>c.\n           atom c \\<sharp> ft \\<and> atom c \\<sharp> fta \\<longrightarrow>\n           c \\<noteq> bv \\<and> c \\<noteq> bva \\<longrightarrow>\n           (bv \\<leftrightarrow> c) \\<bullet> ft =\n           (bva \\<leftrightarrow> c) \\<bullet> fta;\n        atom c \\<sharp> ft; c \\<noteq> bv; atom c \\<sharp> v;\n        atom c \\<sharp> fta; c \\<noteq> bva;\n        atom c \\<sharp> subst_ft_v ft x v;\n        atom c \\<sharp> subst_ft_v fta x v\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bv \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bva \\<leftrightarrow> c) \\<bullet> v)", "proof(goal_cases)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>bv x v ft bva fta c.\n       \\<lbrakk>atom bv \\<sharp> v; atom bva \\<sharp> v;\n        \\<forall>c.\n           atom c \\<sharp> ft \\<and> atom c \\<sharp> fta \\<longrightarrow>\n           c \\<noteq> bv \\<and> c \\<noteq> bva \\<longrightarrow>\n           (bv \\<leftrightarrow> c) \\<bullet> ft =\n           (bva \\<leftrightarrow> c) \\<bullet> fta;\n        atom c \\<sharp> ft; c \\<noteq> bv; atom c \\<sharp> v;\n        atom c \\<sharp> fta; c \\<noteq> bva;\n        atom c \\<sharp> subst_ft_v ft x v;\n        atom c \\<sharp> subst_ft_v fta x v\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bv \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bva \\<leftrightarrow> c) \\<bullet> v)", "case (1 bv ft bva fta xa va c)"], ["proof (state)\nthis:\n  atom bv \\<sharp> bva\n  atom xa \\<sharp> bva\n  \\<forall>c.\n     atom c \\<sharp> fta \\<and> atom c \\<sharp> va \\<longrightarrow>\n     c \\<noteq> bv \\<and> c \\<noteq> xa \\<longrightarrow>\n     (bv \\<leftrightarrow> c) \\<bullet> fta =\n     (xa \\<leftrightarrow> c) \\<bullet> va\n  atom c \\<sharp> fta\n  c \\<noteq> bv\n  atom c \\<sharp> bva\n  atom c \\<sharp> va\n  c \\<noteq> xa\n  atom c \\<sharp> subst_ft_v fta ft bva\n  atom c \\<sharp> subst_ft_v va ft bva\n\ngoal (1 subgoal):\n 1. \\<And>bv x v ft bva fta c.\n       \\<lbrakk>atom bv \\<sharp> v; atom bva \\<sharp> v;\n        \\<forall>c.\n           atom c \\<sharp> ft \\<and> atom c \\<sharp> fta \\<longrightarrow>\n           c \\<noteq> bv \\<and> c \\<noteq> bva \\<longrightarrow>\n           (bv \\<leftrightarrow> c) \\<bullet> ft =\n           (bva \\<leftrightarrow> c) \\<bullet> fta;\n        atom c \\<sharp> ft; c \\<noteq> bv; atom c \\<sharp> v;\n        atom c \\<sharp> fta; c \\<noteq> bva;\n        atom c \\<sharp> subst_ft_v ft x v;\n        atom c \\<sharp> subst_ft_v fta x v\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bv \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v\n                          ((bva \\<leftrightarrow> c) \\<bullet> fta) x\n                          ((bva \\<leftrightarrow> c) \\<bullet> v)", "then"], ["proof (chain)\npicking this:\n  atom bv \\<sharp> bva\n  atom xa \\<sharp> bva\n  \\<forall>c.\n     atom c \\<sharp> fta \\<and> atom c \\<sharp> va \\<longrightarrow>\n     c \\<noteq> bv \\<and> c \\<noteq> xa \\<longrightarrow>\n     (bv \\<leftrightarrow> c) \\<bullet> fta =\n     (xa \\<leftrightarrow> c) \\<bullet> va\n  atom c \\<sharp> fta\n  c \\<noteq> bv\n  atom c \\<sharp> bva\n  atom c \\<sharp> va\n  c \\<noteq> xa\n  atom c \\<sharp> subst_ft_v fta ft bva\n  atom c \\<sharp> subst_ft_v va ft bva", "show ?case"], ["proof (prove)\nusing this:\n  atom bv \\<sharp> bva\n  atom xa \\<sharp> bva\n  \\<forall>c.\n     atom c \\<sharp> fta \\<and> atom c \\<sharp> va \\<longrightarrow>\n     c \\<noteq> bv \\<and> c \\<noteq> xa \\<longrightarrow>\n     (bv \\<leftrightarrow> c) \\<bullet> fta =\n     (xa \\<leftrightarrow> c) \\<bullet> va\n  atom c \\<sharp> fta\n  c \\<noteq> bv\n  atom c \\<sharp> bva\n  atom c \\<sharp> va\n  c \\<noteq> xa\n  atom c \\<sharp> subst_ft_v fta ft bva\n  atom c \\<sharp> subst_ft_v va ft bva\n\ngoal (1 subgoal):\n 1. subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n     ((bv \\<leftrightarrow> c) \\<bullet> bva) =\n    subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n     ((xa \\<leftrightarrow> c) \\<bullet> bva)", "using subst_ft_v.simps"], ["proof (prove)\nusing this:\n  atom bv \\<sharp> bva\n  atom xa \\<sharp> bva\n  \\<forall>c.\n     atom c \\<sharp> fta \\<and> atom c \\<sharp> va \\<longrightarrow>\n     c \\<noteq> bv \\<and> c \\<noteq> xa \\<longrightarrow>\n     (bv \\<leftrightarrow> c) \\<bullet> fta =\n     (xa \\<leftrightarrow> c) \\<bullet> va\n  atom c \\<sharp> fta\n  c \\<noteq> bv\n  atom c \\<sharp> bva\n  atom c \\<sharp> va\n  c \\<noteq> xa\n  atom c \\<sharp> subst_ft_v fta ft bva\n  atom c \\<sharp> subst_ft_v va ft bva\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  subst_ft_v (AF_fun_typ ?z ?b ?c ?t ?s) ?x ?v =\n  AF_fun_typ ?z ?b ?c[?x::=?v]\\<^sub>c\\<^sub>v\n   ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v ?s[?x::=?v]\\<^sub>s\\<^sub>v\n\ngoal (1 subgoal):\n 1. subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n     ((bv \\<leftrightarrow> c) \\<bullet> bva) =\n    subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n     ((xa \\<leftrightarrow> c) \\<bullet> bva)", "by (simp add: flip_fresh_fresh)"], ["proof (state)\nthis:\n  subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n   ((bv \\<leftrightarrow> c) \\<bullet> bva) =\n  subst_ft_v ((xa \\<leftrightarrow> c) \\<bullet> va) ft\n   ((xa \\<leftrightarrow> c) \\<bullet> bva)\n\ngoal:\nNo subgoals!", "qed"], ["", "nominal_termination (eqvt)"], ["proof (prove)\ngoal (1 subgoal):\n 1. All subst_ftq_v_dom", "by lexicographic_order"], ["", "lemma size_subst_ft[simp]:  \"size (subst_ft_v A x v) = size A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. size (subst_ft_v A x v) = size A", "by(nominal_induct A  avoiding: x v rule: fun_typ.strong_induct,auto)"], ["", "lemma forget_subst_ft [simp]: shows  \"atom x \\<sharp> A \\<Longrightarrow> subst_ft_v A x a = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> A \\<Longrightarrow> subst_ft_v A x a = A", "by (nominal_induct A  avoiding: a x rule: fun_typ.strong_induct,auto simp: fresh_at_base)"], ["", "lemma subst_ft_id [simp]: \"subst_ft_v A a (V_var a)  = A\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst_ft_v A a [ a ]\\<^sup>v = A", "by(nominal_induct A  avoiding: a  rule: fun_typ.strong_induct,auto)"], ["", "instantiation fun_typ :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_ft_v\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(fun_typ, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::fun_typ"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "apply(nominal_induct t avoiding: i x rule:fun_typ.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (AF_fun_typ x1a x2a x3a x4a\nx5a)[i::=x]\\<^sub>v =\n                         (atom\n                           i \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<and>\n                          j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                           j = atom i))", "apply(simp only: subst_v_fun_typ_def subst_ft_v.simps )"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> subst_ft_v\n                                     (AF_fun_typ x1a x2a x3a x4a x5a) i x =\n                         (atom\n                           i \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<and>\n                          j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                           j = atom i))", "using fun_typ.fresh fresh_subst_v_if"], ["proof (prove)\nusing this:\n  ?a \\<sharp> AF_fun_typ ?x ?b ?c ?\\<tau> ?s =\n  ((?a \\<sharp> ?c \\<and> ?a \\<sharp> ?\\<tau> \\<and> ?a \\<sharp> ?s \\<or>\n    ?a \\<in> set [atom ?x]) \\<and>\n   ?a \\<sharp> ?b)\n  ?y \\<sharp> ?a[?x::=?v]\\<^sub>v =\n  (atom ?x \\<sharp> ?a \\<and> ?y \\<sharp> ?a \\<or>\n   ?y \\<sharp> ?v \\<and> (?y \\<sharp> ?a \\<or> ?y = atom ?x))\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> subst_ft_v\n                                     (AF_fun_typ x1a x2a x3a x4a x5a) i x =\n                         (atom\n                           i \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<and>\n                          j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                          j \\<sharp> x \\<and>\n                          (j \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a \\<or>\n                           j = atom i))", "apply simp"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a i x.\n       \\<lbrakk>atom x1a \\<sharp> i; atom x1a \\<sharp> x;\n        \\<And>y a x v.\n           y \\<sharp> a[x::=v]\\<^sub>v =\n           (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n            y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\\<rbrakk>\n       \\<Longrightarrow> (((atom i \\<sharp> x3a \\<and> j \\<sharp> x3a \\<or>\n                            j \\<sharp> x \\<and>\n                            (j \\<sharp> x3a \\<or> j = atom i)) \\<and>\n                           (atom i \\<sharp> x4a \\<and> j \\<sharp> x4a \\<or>\n                            j \\<sharp> x \\<and>\n                            (j \\<sharp> x4a \\<or> j = atom i)) \\<and>\n                           (atom i \\<sharp> x5a \\<and> j \\<sharp> x5a \\<or>\n                            j \\<sharp> x \\<and>\n                            (j \\<sharp> x5a \\<or> j = atom i)) \\<or>\n                           j = atom x1a) \\<and>\n                          j \\<sharp> x2a) =\n                         ((atom i \\<sharp> x3a \\<and>\n                           atom i \\<sharp> x4a \\<and>\n                           atom i \\<sharp> x5a \\<or>\n                           i = x1a) \\<and>\n                          (j \\<sharp> x3a \\<and>\n                           j \\<sharp> x4a \\<and> j \\<sharp> x5a \\<or>\n                           j = atom x1a) \\<and>\n                          j \\<sharp> x2a \\<or>\n                          j \\<sharp> x \\<and>\n                          ((j \\<sharp> x3a \\<and>\n                            j \\<sharp> x4a \\<and> j \\<sharp> x5a \\<or>\n                            j = atom x1a) \\<and>\n                           j \\<sharp> x2a \\<or>\n                           j = atom i))", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::fun_typ and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom a \\<sharp> tm \\<Longrightarrow> subst_v tm a x  = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm", "proof(nominal_induct tm avoiding: a x rule:fun_typ.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x;\n        atom a \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a x5a)[a::=x]\\<^sub>v =\n                         AF_fun_typ x1a x2a x3a x4a x5a", "case (AF_fun_typ x1a x2a x3a x4a x5a)"], ["proof (state)\nthis:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  atom a \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x;\n        atom a \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a x5a)[a::=x]\\<^sub>v =\n                         AF_fun_typ x1a x2a x3a x4a x5a", "then"], ["proof (chain)\npicking this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  atom a \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a", "show ?case"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  atom a \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\n\ngoal (1 subgoal):\n 1. (AF_fun_typ x1a x2a x3a x4a x5a)[a::=x]\\<^sub>v =\n    AF_fun_typ x1a x2a x3a x4a x5a", "unfolding subst_ft_v.simps subst_v_fun_typ_def fun_typ.fresh"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  (atom a \\<sharp> x3a \\<and>\n   atom a \\<sharp> x4a \\<and> atom a \\<sharp> x5a \\<or>\n   atom a \\<in> set [atom x1a]) \\<and>\n  atom a \\<sharp> x2a\n\ngoal (1 subgoal):\n 1. subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) a x =\n    AF_fun_typ x1a x2a x3a x4a x5a", "using forget_subst_v subst_ft_v.simps subst_v_c_def forget_subst_sv subst_v_\\<tau>_def"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  (atom a \\<sharp> x3a \\<and>\n   atom a \\<sharp> x4a \\<and> atom a \\<sharp> x5a \\<or>\n   atom a \\<in> set [atom x1a]) \\<and>\n  atom a \\<sharp> x2a\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  subst_ft_v (AF_fun_typ ?z ?b ?c ?t ?s) ?x ?v =\n  AF_fun_typ ?z ?b ?c[?x::=?v]\\<^sub>c\\<^sub>v\n   ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  subst_v = subst_cv_abbrev\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n  subst_v = subst_tv_abbrev\n\ngoal (1 subgoal):\n 1. subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) a x =\n    AF_fun_typ x1a x2a x3a x4a x5a", "by fastforce"], ["proof (state)\nthis:\n  (AF_fun_typ x1a x2a x3a x4a x5a)[a::=x]\\<^sub>v =\n  AF_fun_typ x1a x2a x3a x4a x5a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  atom a \\<sharp> tm \\<Longrightarrow> tm[a::=x]\\<^sub>v = tm\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix a::x and tm::fun_typ"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v tm a (V_var a) = tm\""], ["proof (prove)\ngoal (1 subgoal):\n 1. tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm", "proof(nominal_induct tm avoiding: a x rule:fun_typ.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a\n                           x5a)[a::=[ a ]\\<^sup>v]\\<^sub>v =\n                         AF_fun_typ x1a x2a x3a x4a x5a", "case (AF_fun_typ x1a x2a x3a x4a x5a)"], ["proof (state)\nthis:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a a x.\n       \\<lbrakk>atom x1a \\<sharp> a; atom x1a \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a\n                           x5a)[a::=[ a ]\\<^sup>v]\\<^sub>v =\n                         AF_fun_typ x1a x2a x3a x4a x5a", "then"], ["proof (chain)\npicking this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n\ngoal (1 subgoal):\n 1. (AF_fun_typ x1a x2a x3a x4a x5a)[a::=[ a ]\\<^sup>v]\\<^sub>v =\n    AF_fun_typ x1a x2a x3a x4a x5a", "unfolding subst_ft_v.simps subst_v_fun_typ_def fun_typ.fresh"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n\ngoal (1 subgoal):\n 1. subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) a [ a ]\\<^sup>v =\n    AF_fun_typ x1a x2a x3a x4a x5a", "using forget_subst_v subst_ft_v.simps subst_v_c_def forget_subst_sv subst_v_\\<tau>_def"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> a\n  atom x1a \\<sharp> x\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  subst_ft_v (AF_fun_typ ?z ?b ?c ?t ?s) ?x ?v =\n  AF_fun_typ ?z ?b ?c[?x::=?v]\\<^sub>c\\<^sub>v\n   ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  subst_v = subst_cv_abbrev\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n  subst_v = subst_tv_abbrev\n\ngoal (1 subgoal):\n 1. subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) a [ a ]\\<^sup>v =\n    AF_fun_typ x1a x2a x3a x4a x5a", "by fastforce"], ["proof (state)\nthis:\n  (AF_fun_typ x1a x2a x3a x4a x5a)[a::=[ a ]\\<^sup>v]\\<^sub>v =\n  AF_fun_typ x1a x2a x3a x4a x5a\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  tm[a::=[ a ]\\<^sup>v]\\<^sub>v = tm\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::fun_typ"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "proof(nominal_induct t1 avoiding: x1 v rule:fun_typ.strong_induct)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a x1 v.\n       \\<lbrakk>atom x1a \\<sharp> x1; atom x1a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> p \\<bullet> (AF_fun_typ x1a x2a x3a x4a\n x5a)[x1::=v]\\<^sub>v =\n                         (p \\<bullet> AF_fun_typ x1a x2a x3a x4a\n x5a)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "case (AF_fun_typ x1a x2a x3a x4a x5a)"], ["proof (state)\nthis:\n  atom x1a \\<sharp> x1\n  atom x1a \\<sharp> v\n\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a x1 v.\n       \\<lbrakk>atom x1a \\<sharp> x1; atom x1a \\<sharp> v\\<rbrakk>\n       \\<Longrightarrow> p \\<bullet> (AF_fun_typ x1a x2a x3a x4a\n x5a)[x1::=v]\\<^sub>v =\n                         (p \\<bullet> AF_fun_typ x1a x2a x3a x4a\n x5a)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  atom x1a \\<sharp> x1\n  atom x1a \\<sharp> v", "show ?case"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x1\n  atom x1a \\<sharp> v\n\ngoal (1 subgoal):\n 1. p \\<bullet> (AF_fun_typ x1a x2a x3a x4a x5a)[x1::=v]\\<^sub>v =\n    (p \\<bullet> AF_fun_typ x1a x2a x3a x4a\n                  x5a)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "unfolding subst_ft_v.simps subst_v_fun_typ_def fun_typ.fresh"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x1\n  atom x1a \\<sharp> v\n\ngoal (1 subgoal):\n 1. p \\<bullet> subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) x1 v =\n    subst_ft_v (p \\<bullet> AF_fun_typ x1a x2a x3a x4a x5a) (p \\<bullet> x1)\n     (p \\<bullet> v)", "using forget_subst_v subst_ft_v.simps subst_v_c_def forget_subst_sv subst_v_\\<tau>_def"], ["proof (prove)\nusing this:\n  atom x1a \\<sharp> x1\n  atom x1a \\<sharp> v\n  atom ?x \\<sharp> ?a \\<Longrightarrow> ?a[?x::=?v]\\<^sub>v = ?a\n  atom ?z \\<sharp> (?x, ?v) \\<Longrightarrow>\n  subst_ft_v (AF_fun_typ ?z ?b ?c ?t ?s) ?x ?v =\n  AF_fun_typ ?z ?b ?c[?x::=?v]\\<^sub>c\\<^sub>v\n   ?t[?x::=?v]\\<^sub>\\<tau>\\<^sub>v ?s[?x::=?v]\\<^sub>s\\<^sub>v\n  subst_v = subst_cv_abbrev\n  atom ?a \\<sharp> ?A \\<Longrightarrow> ?A[?a::=?x]\\<^sub>s\\<^sub>v = ?A\n  atom ?a \\<sharp> ?B \\<Longrightarrow> ?B[?a::=?x]\\<^sub>s\\<^sub>v = ?B\n  atom ?a \\<sharp> ?C \\<Longrightarrow> subst_branchlv ?C ?a ?x = ?C\n  subst_v = subst_tv_abbrev\n\ngoal (1 subgoal):\n 1. p \\<bullet> subst_ft_v (AF_fun_typ x1a x2a x3a x4a x5a) x1 v =\n    subst_ft_v (p \\<bullet> AF_fun_typ x1a x2a x3a x4a x5a) (p \\<bullet> x1)\n     (p \\<bullet> v)", "by fastforce"], ["proof (state)\nthis:\n  p \\<bullet> (AF_fun_typ x1a x2a x3a x4a x5a)[x1::=v]\\<^sub>v =\n  (p \\<bullet> AF_fun_typ x1a x2a x3a x4a\n                x5a)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::fun_typ and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "apply(nominal_induct c avoiding: x z rule:fun_typ.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a x z.\n       \\<lbrakk>atom x1a \\<sharp> x; atom x1a \\<sharp> z;\n        atom x \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\\<rbrakk>\n       \\<Longrightarrow> (x \\<leftrightarrow> z) \\<bullet> AF_fun_typ x1a\n                      x2a x3a x4a x5a =\n                         (AF_fun_typ x1a x2a x3a x4a\n                           x5a)[z::=[ x ]\\<^sup>v]\\<^sub>v", "by (auto simp add: subst_v_c_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_def)"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::fun_typ and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "apply(nominal_induct c avoiding: z x v rule:fun_typ.strong_induct)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a z x v.\n       \\<lbrakk>atom x1a \\<sharp> z; atom x1a \\<sharp> x;\n        atom x1a \\<sharp> v;\n        atom x \\<sharp> AF_fun_typ x1a x2a x3a x4a x5a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a\n                           x5a)[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v =\n                         (AF_fun_typ x1a x2a x3a x4a x5a)[z::=v]\\<^sub>v", "apply auto"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x1a x2a x3a x4a x5a z x v.\n       \\<lbrakk>atom x1a \\<sharp> z; atom x1a \\<sharp> x;\n        atom x1a \\<sharp> v; atom x \\<sharp> x3a; atom x \\<sharp> x4a;\n        atom x \\<sharp> x5a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ x1a x2a x3a x4a\n                           x5a)[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v =\n                         (AF_fun_typ x1a x2a x3a x4a x5a)[z::=v]\\<^sub>v", "by (auto simp add: subst_v_c_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_def )"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "instantiation fun_typ_q :: has_subst_v\nbegin"], ["", "definition \n  \"subst_v = subst_ftq_v\""], ["", "instance"], ["proof (prove)\ngoal (1 subgoal):\n 1. OFCLASS(fun_typ_q, has_subst_v_class)", "proof"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix j::atom and i::x and  x::v and t::fun_typ_q"], ["proof (state)\ngoal (6 subgoals):\n 1. \\<And>y a x v.\n       y \\<sharp> a[x::=v]\\<^sub>v =\n       (atom x \\<sharp> a \\<and> y \\<sharp> a \\<or>\n        y \\<sharp> v \\<and> (y \\<sharp> a \\<or> y = atom x))\n 2. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 3. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 4. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 5. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 6. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"(j \\<sharp> subst_v t i x) = ((atom i \\<sharp> t \\<and> j \\<sharp> t) \\<or> (j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>v =\n    (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n     j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))", "apply(nominal_induct t avoiding: i x rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (16 subgoals):\n 1. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x;\n        j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v;\n        \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x2a\n 2. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x;\n        j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v;\n        \\<not> j \\<sharp> x; j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> x2a\n 3. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x;\n        j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v;\n        \\<not> j \\<sharp> x2a; j \\<noteq> atom i;\n        j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x2a\n 4. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x;\n        j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v;\n        \\<not> j \\<sharp> x2a; j \\<noteq> atom i;\n        j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; atom i \\<sharp> x2a;\n        j \\<sharp> x2a\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v\n 6. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; atom i \\<sharp> x2a;\n        j = atom x1\\<rbrakk>\n       \\<Longrightarrow> atom\n                          x1 \\<sharp> (AF_fun_typ_some x1\n  x2a)[i::=x]\\<^sub>v\n 7. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j \\<sharp> x; j \\<sharp> x2a\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v\n 8. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j = atom x1\\<rbrakk>\n       \\<Longrightarrow> atom\n                          x1 \\<sharp> (AF_fun_typ_some x1\n  x2a)[i::=x]\\<^sub>v\n 9. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom\n                          i \\<sharp> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v\n 10. \\<And>x i xa.\n        \\<lbrakk>j \\<sharp> (AF_fun_typ_none x)[i::=xa]\\<^sub>v;\n         \\<not> j \\<sharp> xa\\<rbrakk>\n        \\<Longrightarrow> atom i \\<sharp> x\nA total of 16 subgoals...", "apply(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (prove)\ngoal (12 subgoals):\n 1. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; \\<not> j \\<sharp> x;\n        j \\<sharp> subst_ft_v x2a i x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x2a\n 2. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j \\<sharp> subst_ft_v x2a i x;\n        \\<not> j \\<sharp> x; j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> x2a\n 3. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j \\<sharp> subst_ft_v x2a i x;\n        \\<not> j \\<sharp> x2a; j \\<noteq> atom i;\n        j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x2a\n 4. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j \\<sharp> subst_ft_v x2a i x;\n        \\<not> j \\<sharp> x2a; j \\<noteq> atom i;\n        j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> False\n 5. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; j \\<sharp> x; j \\<sharp> x2a;\n        j \\<noteq> atom x1\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> subst_ft_v x2a i x\n 6. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; atom i \\<sharp> x; j = atom i\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> subst_ft_v x2a i x\n 7. \\<And>x i xa.\n       \\<lbrakk>j \\<sharp> subst_ft_v x i xa; \\<not> j \\<sharp> xa\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x\n 8. \\<And>x i xa.\n       \\<lbrakk>j \\<sharp> subst_ft_v x i xa; \\<not> j \\<sharp> xa\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> x\n 9. \\<And>x i xa.\n       \\<lbrakk>j \\<sharp> subst_ft_v x i xa; j \\<noteq> atom i;\n        \\<not> j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> atom i \\<sharp> x\n 10. \\<And>x i xa.\n        \\<lbrakk>j \\<sharp> subst_ft_v x i xa; j \\<noteq> atom i;\n         \\<not> j \\<sharp> x\\<rbrakk>\n        \\<Longrightarrow> False\nA total of 12 subgoals...", "by (metis (no_types) fresh_subst_v_if subst_v_fun_typ_def)+"], ["proof (state)\nthis:\n  j \\<sharp> t[i::=x]\\<^sub>v =\n  (atom i \\<sharp> t \\<and> j \\<sharp> t \\<or>\n   j \\<sharp> x \\<and> (j \\<sharp> t \\<or> j = atom i))\n\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix i::x and t::fun_typ_q and x::v"], ["proof (state)\ngoal (5 subgoals):\n 1. \\<And>x a v. atom x \\<sharp> a \\<Longrightarrow> a[x::=v]\\<^sub>v = a\n 2. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 3. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 4. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 5. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom i \\<sharp> t \\<Longrightarrow> subst_v t i x  = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom i \\<sharp> t \\<Longrightarrow> t[i::=x]\\<^sub>v = t", "apply(nominal_induct t avoiding: i x rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; atom i \\<sharp> x2a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ_some x1 x2a)[i::=x]\\<^sub>v =\n                         AF_fun_typ_some x1 x2a\n 2. \\<And>x i xa.\n       atom i \\<sharp> x \\<Longrightarrow>\n       (AF_fun_typ_none x)[i::=xa]\\<^sub>v = AF_fun_typ_none x", "by(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (state)\nthis:\n  atom i \\<sharp> t \\<Longrightarrow> t[i::=x]\\<^sub>v = t\n\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix i::x and t::fun_typ_q"], ["proof (state)\ngoal (4 subgoals):\n 1. \\<And>a x. a[x::=[ x ]\\<^sup>v]\\<^sub>v = a\n 2. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 3. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 4. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"subst_v t i (V_var i) = t\""], ["proof (prove)\ngoal (1 subgoal):\n 1. t[i::=[ i ]\\<^sup>v]\\<^sub>v = t", "using subst_cv_id  subst_v_fun_typ_def"], ["proof (prove)\nusing this:\n  ?A[?a::=[ ?a ]\\<^sup>v]\\<^sub>c\\<^sub>v = ?A\n  subst_v = subst_ft_v\n\ngoal (1 subgoal):\n 1. t[i::=[ i ]\\<^sup>v]\\<^sub>v = t", "apply(nominal_induct t avoiding: i x rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a i x.\n       \\<lbrakk>atom x1 \\<sharp> x; subst_v = subst_ft_v\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ_some x1\n                           x2a)[i::=[ i ]\\<^sup>v]\\<^sub>v =\n                         AF_fun_typ_some x1 x2a\n 2. \\<And>x i.\n       subst_v = subst_ft_v \\<Longrightarrow>\n       (AF_fun_typ_none x)[i::=[ i ]\\<^sup>v]\\<^sub>v = AF_fun_typ_none x", "by(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (state)\nthis:\n  t[i::=[ i ]\\<^sup>v]\\<^sub>v = t\n\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix p::perm and x1::x and v::v and t1::fun_typ_q"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>p a x v.\n       p \\<bullet> a[x::=v]\\<^sub>v =\n       (p \\<bullet> a)[p \\<bullet> x::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 3. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"p \\<bullet> subst_v t1 x1 v  = subst_v  (p \\<bullet> t1) (p \\<bullet> x1) (p \\<bullet> v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. p \\<bullet> t1[x1::=v]\\<^sub>v =\n    (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "apply(nominal_induct t1 avoiding: v x1 rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a v x1a.\n       atom x1 \\<sharp> v \\<Longrightarrow>\n       p \\<bullet> (AF_fun_typ_some x1 x2a)[x1a::=v]\\<^sub>v =\n       (AF_fun_typ_some (p \\<bullet> x1)\n         (p \\<bullet> x2a))[p \\<bullet> x1a::=p \\<bullet> v]\\<^sub>v\n 2. \\<And>x v x1.\n       p \\<bullet> (AF_fun_typ_none x)[x1::=v]\\<^sub>v =\n       (AF_fun_typ_none\n         (p \\<bullet> x))[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v", "by(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (state)\nthis:\n  p \\<bullet> t1[x1::=v]\\<^sub>v =\n  (p \\<bullet> t1)[p \\<bullet> x1::=p \\<bullet> v]\\<^sub>v\n\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::fun_typ_q and z::x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x c z.\n       atom x \\<sharp> c \\<Longrightarrow>\n       (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show \"atom x \\<sharp> c \\<Longrightarrow> ((x \\<leftrightarrow> z) \\<bullet> c) = c[z::=[x]\\<^sup>v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v", "apply(nominal_induct c avoiding: x z rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a x z.\n       atom x \\<sharp> x2a \\<Longrightarrow>\n       AF_fun_typ_some x1 x2a[z::=[ x ]\\<^sup>v]\\<^sub>v =\n       (AF_fun_typ_some x1 x2a)[z::=[ x ]\\<^sup>v]\\<^sub>v\n 2. \\<And>x xa z.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       AF_fun_typ_none x[z::=[ xa ]\\<^sup>v]\\<^sub>v =\n       (AF_fun_typ_none x)[z::=[ xa ]\\<^sup>v]\\<^sub>v", "by(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  (x \\<leftrightarrow> z) \\<bullet> c = c[z::=[ x ]\\<^sup>v]\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "fix x::x and c::fun_typ_q and z::x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x c z b.\n       atom x \\<sharp> c \\<Longrightarrow>\n       c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=b]\\<^sub>v = c[z::=b]\\<^sub>v", "show  \"atom x \\<sharp> c \\<Longrightarrow> c[z::=[x]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<sharp> c \\<Longrightarrow>\n    c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v", "apply(nominal_induct c avoiding: z x v rule:fun_typ_q.strong_induct,auto)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a z x v.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x \\<sharp> x2a\\<rbrakk>\n       \\<Longrightarrow> (AF_fun_typ_some x1\n                           x2a)[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v =\n                         (AF_fun_typ_some x1 x2a)[z::=v]\\<^sub>v\n 2. \\<And>x z xa v.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       (AF_fun_typ_none x)[z::=[ xa ]\\<^sup>v]\\<^sub>v[xa::=v]\\<^sub>v =\n       (AF_fun_typ_none x)[z::=v]\\<^sub>v", "apply(auto simp add: subst_v_fun_typ_def subst_v_s_def subst_v_\\<tau>_def subst_v_fun_typ_q_def fresh_subst_v_if )"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x1 x2a z x v c.\n       \\<lbrakk>atom x1 \\<sharp> v; atom x \\<sharp> x2a;\n        atom c \\<sharp> (x, v, z, x2a);\n        atom\n         c \\<sharp> (x1, x1,\n                     subst_ft_v (subst_ft_v x2a z [ x ]\\<^sup>v) x v,\n                     subst_ft_v x2a z v)\\<rbrakk>\n       \\<Longrightarrow> subst_ft_v\n                          (subst_ft_v\n                            ((x1 \\<leftrightarrow> c) \\<bullet> x2a) z\n                            [ x ]\\<^sup>v)\n                          x ((x1 \\<leftrightarrow> c) \\<bullet> v) =\n                         subst_ft_v ((x1 \\<leftrightarrow> c) \\<bullet> x2a)\n                          z ((x1 \\<leftrightarrow> c) \\<bullet> v)\n 2. \\<And>x z xa v.\n       atom xa \\<sharp> x \\<Longrightarrow>\n       subst_ft_v (subst_ft_v x z [ xa ]\\<^sup>v) xa v = subst_ft_v x z v", "by (metis subst_v_fun_typ_def flip_bv_x_cancel subst_ft_v.eqvt subst_v_simple_commute v.perm_simps )+"], ["proof (state)\nthis:\n  atom x \\<sharp> c \\<Longrightarrow>\n  c[z::=[ x ]\\<^sup>v]\\<^sub>v[x::=v]\\<^sub>v = c[z::=v]\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "section \\<open>Variable Context\\<close>"], ["", "lemma subst_dv_fst_eq:\n  \"fst ` setD (\\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v) = fst ` setD \\<Delta>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. fst ` setD \\<Delta>[x::=v]\\<^sub>\\<Delta>\\<^sub>v = fst ` setD \\<Delta>", "by(induct \\<Delta> rule: \\<Delta>_induct,simp,force)"], ["", "lemma subst_gv_member_iff:\n  fixes x'::x and x::x and v::v and c'::c\n  assumes \"(x',b',c') \\<in> toSet \\<Gamma>\" and \"atom x \\<notin> atom_dom \\<Gamma>\" \n  shows \"(x',b',c'[x::=v]\\<^sub>c\\<^sub>v) \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "have \"x' \\<noteq> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x' \\<noteq> x", "using assms fresh_dom_free2"], ["proof (prove)\nusing this:\n  (x', b', c') \\<in> toSet \\<Gamma>\n  atom x \\<notin> atom_dom \\<Gamma>\n  atom ?x \\<notin> atom_dom ?\\<Gamma> \\<Longrightarrow>\n  (?x, ?b, ?c) \\<notin> toSet ?\\<Gamma>\n\ngoal (1 subgoal):\n 1. x' \\<noteq> x", "by metis"], ["proof (state)\nthis:\n  x' \\<noteq> x\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  x' \\<noteq> x", "show ?thesis"], ["proof (prove)\nusing this:\n  x' \\<noteq> x\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet \\<Gamma>\n  atom x \\<notin> atom_dom \\<Gamma>\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "proof(induct \\<Gamma> rule: \\<Gamma>_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet GNil;\n     atom x \\<notin> atom_dom GNil\\<rbrakk>\n    \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                      \\<in> toSet GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>\\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n                 atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n                \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                                  \\<in> toSet\n   \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        x' \\<noteq> x;\n        (x', b', c') \\<in> toSet ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>');\n        atom x\n        \\<notin> atom_dom ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>')\\<rbrakk>\n       \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                         \\<in> toSet\n                                ((xa, b, c) #\\<^sub>\\<Gamma>\n                                 \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case GNil"], ["proof (state)\nthis:\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet GNil\n  atom x \\<notin> atom_dom GNil\n\ngoal (2 subgoals):\n 1. \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet GNil;\n     atom x \\<notin> atom_dom GNil\\<rbrakk>\n    \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                      \\<in> toSet GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>\\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n                 atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n                \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                                  \\<in> toSet\n   \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        x' \\<noteq> x;\n        (x', b', c') \\<in> toSet ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>');\n        atom x\n        \\<notin> atom_dom ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>')\\<rbrakk>\n       \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                         \\<in> toSet\n                                ((xa, b, c) #\\<^sub>\\<Gamma>\n                                 \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet GNil\n  atom x \\<notin> atom_dom GNil", "show ?case"], ["proof (prove)\nusing this:\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet GNil\n  atom x \\<notin> atom_dom GNil\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet GNil[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>\\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n                 atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n                \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                                  \\<in> toSet\n   \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        x' \\<noteq> x;\n        (x', b', c') \\<in> toSet ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>');\n        atom x\n        \\<notin> atom_dom ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>')\\<rbrakk>\n       \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                         \\<in> toSet\n                                ((xa, b, c) #\\<^sub>\\<Gamma>\n                                 \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>\\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n                 atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n                \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                                  \\<in> toSet\n   \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        x' \\<noteq> x;\n        (x', b', c') \\<in> toSet ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>');\n        atom x\n        \\<notin> atom_dom ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>')\\<rbrakk>\n       \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                         \\<in> toSet\n                                ((xa, b, c) #\\<^sub>\\<Gamma>\n                                 \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case (GCons x1 b1 c1 \\<Gamma>')"], ["proof (state)\nthis:\n  \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n   atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n  \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom x \\<notin> atom_dom ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>\\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n                 atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n                \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                                  \\<in> toSet\n   \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v;\n        x' \\<noteq> x;\n        (x', b', c') \\<in> toSet ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>');\n        atom x\n        \\<notin> atom_dom ((xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>')\\<rbrakk>\n       \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                         \\<in> toSet\n                                ((xa, b, c) #\\<^sub>\\<Gamma>\n                                 \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "proof(cases \"(x',b',c') = (x1,b1,c1)\")"], ["proof (state)\ngoal (2 subgoals):\n 1. (x', b', c') = (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case True"], ["proof (state)\nthis:\n  (x', b', c') = (x1, b1, c1)\n\ngoal (2 subgoals):\n 1. (x', b', c') = (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "hence \"((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v = ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> (\\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v))\""], ["proof (prove)\nusing this:\n  (x', b', c') = (x1, b1, c1)\n\ngoal (1 subgoal):\n 1. ((x1, b1, c1) #\\<^sub>\\<Gamma>\n     \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n    (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using subst_gv.simps  \\<open>x'\\<noteq>x\\<close>"], ["proof (prove)\nusing this:\n  (x', b', c') = (x1, b1, c1)\n  GNil[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v = GNil\n  ((?y, ?b, ?c) #\\<^sub>\\<Gamma>\n   ?\\<Gamma>)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = ?y then ?\\<Gamma>\n   else (?y, ?b, ?c[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        ?\\<Gamma>[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  x' \\<noteq> x\n\ngoal (1 subgoal):\n 1. ((x1, b1, c1) #\\<^sub>\\<Gamma>\n     \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n    (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (2 subgoals):\n 1. (x', b', c') = (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n 2. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "show ?thesis"], ["proof (prove)\nusing this:\n  ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using True"], ["proof (prove)\nusing this:\n  ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n  \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  (x', b', c') = (x1, b1, c1)\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1) #\\<^sub>\\<Gamma>\n          \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "case False"], ["proof (state)\nthis:\n  (x', b', c') \\<noteq> (x1, b1, c1)\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "have \"x1\\<noteq>x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x1 \\<noteq> x", "using fresh_def fresh_GCons fresh_Pair supp_at_base GCons fresh_dom_free2"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x \\<equiv> ?a \\<notin> supp ?x\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?a \\<sharp> (?x, ?y) = (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?y)\n  supp ?a = {atom ?a}\n  \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n   atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n  \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom x \\<notin> atom_dom ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom ?x \\<notin> atom_dom ?\\<Gamma> \\<Longrightarrow>\n  (?x, ?b, ?c) \\<notin> toSet ?\\<Gamma>\n\ngoal (1 subgoal):\n 1. x1 \\<noteq> x", "by auto"], ["proof (state)\nthis:\n  x1 \\<noteq> x\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "hence \"(x', b', c') \\<in> toSet \\<Gamma>'\""], ["proof (prove)\nusing this:\n  x1 \\<noteq> x\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<in> toSet \\<Gamma>'", "using GCons False toSet.simps"], ["proof (prove)\nusing this:\n  x1 \\<noteq> x\n  \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n   atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n  \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom x \\<notin> atom_dom ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  (x', b', c') \\<noteq> (x1, b1, c1)\n  toSet GNil = {}\n  toSet (?xbc #\\<^sub>\\<Gamma> ?G) = {?xbc} \\<union> toSet ?G\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<in> toSet \\<Gamma>'", "by auto"], ["proof (state)\nthis:\n  (x', b', c') \\<in> toSet \\<Gamma>'\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "moreover"], ["proof (state)\nthis:\n  (x', b', c') \\<in> toSet \\<Gamma>'\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "have \"atom x \\<notin> atom_dom \\<Gamma>'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. atom x \\<notin> atom_dom \\<Gamma>'", "using fresh_GCons GCons dom.simps toSet.simps"], ["proof (prove)\nusing this:\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n   atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n  \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom x \\<notin> atom_dom ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  Syntax.dom ?\\<Gamma> = fst ` toSet ?\\<Gamma>\n  toSet GNil = {}\n  toSet (?xbc #\\<^sub>\\<Gamma> ?G) = {?xbc} \\<union> toSet ?G\n\ngoal (1 subgoal):\n 1. atom x \\<notin> atom_dom \\<Gamma>'", "by simp"], ["proof (state)\nthis:\n  atom x \\<notin> atom_dom \\<Gamma>'\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "ultimately"], ["proof (chain)\npicking this:\n  (x', b', c') \\<in> toSet \\<Gamma>'\n  atom x \\<notin> atom_dom \\<Gamma>'", "have  \"(x', b', c'[x::=v]\\<^sub>c\\<^sub>v) \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\""], ["proof (prove)\nusing this:\n  (x', b', c') \\<in> toSet \\<Gamma>'\n  atom x \\<notin> atom_dom \\<Gamma>'\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using GCons"], ["proof (prove)\nusing this:\n  (x', b', c') \\<in> toSet \\<Gamma>'\n  atom x \\<notin> atom_dom \\<Gamma>'\n  \\<lbrakk>x' \\<noteq> x; (x', b', c') \\<in> toSet \\<Gamma>';\n   atom x \\<notin> atom_dom \\<Gamma>'\\<rbrakk>\n  \\<Longrightarrow> (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n                    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n  x' \\<noteq> x\n  (x', b', c') \\<in> toSet ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n  atom x \\<notin> atom_dom ((x1, b1, c1) #\\<^sub>\\<Gamma> \\<Gamma>')\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "hence \"(x', b', c'[x::=v]\\<^sub>c\\<^sub>v) \\<in> toSet ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> (\\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v))\""], ["proof (prove)\nusing this:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n            \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v)", "by auto"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n          \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v)\n\ngoal (1 subgoal):\n 1. (x', b', c') \\<noteq> (x1, b1, c1) \\<Longrightarrow>\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n          \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v)", "show ?thesis"], ["proof (prove)\nusing this:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n          \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v)\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "using subst_gv.simps \\<open>x1\\<noteq>x\\<close>"], ["proof (prove)\nusing this:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n          \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v)\n  GNil[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v = GNil\n  ((?y, ?b, ?c) #\\<^sub>\\<Gamma>\n   ?\\<Gamma>)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = ?y then ?\\<Gamma>\n   else (?y, ?b, ?c[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        ?\\<Gamma>[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  x1 \\<noteq> x\n\ngoal (1 subgoal):\n 1. (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n    \\<in> toSet\n           ((x1, b1, c1) #\\<^sub>\\<Gamma>\n            \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1) #\\<^sub>\\<Gamma>\n          \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet\n         ((x1, b1, c1) #\\<^sub>\\<Gamma>\n          \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (x', b', c'[x::=v]\\<^sub>c\\<^sub>v)\n  \\<in> toSet \\<Gamma>[x::=v]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma fresh_subst_gv_if:\n  fixes j::atom and i::x and  x::v and t::\\<Gamma>\n  assumes \"j \\<sharp> t \\<and> j \\<sharp> x\" \n  shows  \"(j \\<sharp> subst_gv t i x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "using assms"], ["proof (prove)\nusing this:\n  j \\<sharp> t \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> t[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "proof(induct t rule: \\<Gamma>_induct)"], ["proof (state)\ngoal (2 subgoals):\n 1. j \\<sharp> GNil \\<and> j \\<sharp> x \\<Longrightarrow>\n    j \\<sharp> GNil[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v;\n        j \\<sharp> (xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((xa, b, c) #\\<^sub>\\<Gamma>\n                                     \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "case GNil"], ["proof (state)\nthis:\n  j \\<sharp> GNil \\<and> j \\<sharp> x\n\ngoal (2 subgoals):\n 1. j \\<sharp> GNil \\<and> j \\<sharp> x \\<Longrightarrow>\n    j \\<sharp> GNil[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n 2. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v;\n        j \\<sharp> (xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((xa, b, c) #\\<^sub>\\<Gamma>\n                                     \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> GNil \\<and> j \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> GNil \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> GNil[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "using subst_gv.simps fresh_GNil"], ["proof (prove)\nusing this:\n  j \\<sharp> GNil \\<and> j \\<sharp> x\n  GNil[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v = GNil\n  ((?y, ?b, ?c) #\\<^sub>\\<Gamma>\n   ?\\<Gamma>)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = ?y then ?\\<Gamma>\n   else (?y, ?b, ?c[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        ?\\<Gamma>[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  ?a \\<sharp> GNil\n\ngoal (1 subgoal):\n 1. j \\<sharp> GNil[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> GNil[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v;\n        j \\<sharp> (xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((xa, b, c) #\\<^sub>\\<Gamma>\n                                     \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v;\n        j \\<sharp> (xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((xa, b, c) #\\<^sub>\\<Gamma>\n                                     \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "case (GCons x' b' c' \\<Gamma>')"], ["proof (state)\nthis:\n  j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n  j \\<sharp> (x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. \\<And>xa b c \\<Gamma>'.\n       \\<lbrakk>j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n                j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v;\n        j \\<sharp> (xa, b, c) #\\<^sub>\\<Gamma> \\<Gamma>' \\<and>\n        j \\<sharp> x\\<rbrakk>\n       \\<Longrightarrow> j \\<sharp> ((xa, b, c) #\\<^sub>\\<Gamma>\n                                     \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "then"], ["proof (chain)\npicking this:\n  j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n  j \\<sharp> (x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>' \\<and> j \\<sharp> x", "show ?case"], ["proof (prove)\nusing this:\n  j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n  j \\<sharp> (x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> ((x', b', c') #\\<^sub>\\<Gamma>\n                \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v", "unfolding subst_gv.simps"], ["proof (prove)\nusing this:\n  j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n  j \\<sharp> (x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>' \\<and> j \\<sharp> x\n\ngoal (1 subgoal):\n 1. j \\<sharp> (if i = x' then \\<Gamma>'\n                else (x', b', c'[i::=x]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                     \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v)", "using fresh_GCons fresh_subst_cv_if"], ["proof (prove)\nusing this:\n  j \\<sharp> \\<Gamma>' \\<and> j \\<sharp> x \\<Longrightarrow>\n  j \\<sharp> \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n  j \\<sharp> (x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>' \\<and> j \\<sharp> x\n  ?a \\<sharp> ?x #\\<^sub>\\<Gamma> ?xs =\n  (?a \\<sharp> ?x \\<and> ?a \\<sharp> ?xs)\n  ?j \\<sharp> ?A[?i::=?x]\\<^sub>c\\<^sub>v =\n  (atom ?i \\<sharp> ?A \\<and> ?j \\<sharp> ?A \\<or>\n   ?j \\<sharp> ?x \\<and> (?j \\<sharp> ?A \\<or> ?j = atom ?i))\n\ngoal (1 subgoal):\n 1. j \\<sharp> (if i = x' then \\<Gamma>'\n                else (x', b', c'[i::=x]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n                     \\<Gamma>'[i::=x]\\<^sub>\\<Gamma>\\<^sub>v)", "by auto"], ["proof (state)\nthis:\n  j \\<sharp> ((x', b', c') #\\<^sub>\\<Gamma>\n              \\<Gamma>')[i::=x]\\<^sub>\\<Gamma>\\<^sub>v\n\ngoal:\nNo subgoals!", "qed"], ["", "section \\<open>Lookup\\<close>"], ["", "lemma set_GConsD: \"y \\<in> toSet (x #\\<^sub>\\<Gamma> xs) \\<Longrightarrow> y=x \\<or> y \\<in> toSet xs\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> toSet (x #\\<^sub>\\<Gamma> xs) \\<Longrightarrow>\n    y = x \\<or> y \\<in> toSet xs", "by auto"], ["", "lemma  subst_g_assoc_cons:\n  assumes \"x \\<noteq> x'\"\n  shows \"(((x', b', c') #\\<^sub>\\<Gamma> \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @ G) = ((x', b', c'[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma> ((\\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v) @ G))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ((x', b', c') #\\<^sub>\\<Gamma>\n     \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @\n    G =\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @ G", "using subst_gv.simps append_g.simps assms"], ["proof (prove)\nusing this:\n  GNil[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v = GNil\n  ((?y, ?b, ?c) #\\<^sub>\\<Gamma>\n   ?\\<Gamma>)[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v =\n  (if ?x = ?y then ?\\<Gamma>\n   else (?y, ?b, ?c[?x::=?v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n        ?\\<Gamma>[?x::=?v]\\<^sub>\\<Gamma>\\<^sub>v)\n  GNil @ ?g = ?g\n  (?xbc #\\<^sub>\\<Gamma> ?g1.0) @ ?g2.0 =\n  ?xbc #\\<^sub>\\<Gamma> ?g1.0 @ ?g2.0\n  x \\<noteq> x'\n\ngoal (1 subgoal):\n 1. ((x', b', c') #\\<^sub>\\<Gamma>\n     \\<Gamma>')[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @\n    G =\n    (x', b', c'[x::=v]\\<^sub>c\\<^sub>v) #\\<^sub>\\<Gamma>\n    \\<Gamma>'[x::=v]\\<^sub>\\<Gamma>\\<^sub>v @ G", "by auto"], ["", "end"]]}