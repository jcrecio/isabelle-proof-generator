{"file_name": "/home/qj213/afp-2021-10-22/thys/Farkas/Matrix_Farkas.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Farkas", "problem_names": ["lemma valuate_poly_of_vec: assumes \"w \\<in> carrier_vec n\" \n  and \"v \\<in> carrier_vec n\"  \nshows \"valuate (poly_of_vec v) (val_of_vec w) = v \\<bullet> w\"", "lemma constraints_of_mat_vec_solution_main: assumes A: \"A \\<in> carrier_mat nr nc\" \n  and x: \"x \\<in> carrier_vec nc\"\n  and b: \"b \\<in> carrier_vec nr\" \n  and sol: \"A *\\<^sub>v x \\<le> b\" \n  and c: \"c \\<in> constraints_of_mat_vec A b\" \nshows \"val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c\"", "lemma vars_poly_of_vec: \"vars (poly_of_vec v) \\<subseteq> { 0 ..< dim_vec v}\"", "lemma finite_constraints_of_mat_vec: \"finite (constraints_of_mat_vec A b)\"", "lemma lec_rec_constraints_of_mat_vec: \"lec_rel ` constraints_of_mat_vec A b \\<subseteq> {Leq_Rel}\"", "lemma constraints_of_mat_vec_solution_1: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n    and sol: \"\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b\" \n  shows \"\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c\"", "lemma constraints_of_mat_vec_solution_2: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n    and sol: \"\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c\" \n  shows \"\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b\"", "lemma constraints_of_mat_vec_solution: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n  shows \"(\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b) = \n    (\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c)\"", "lemma farkas_lemma_matrix: fixes A :: \"rat mat\" \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n  and b: \"b \\<in> carrier_vec nr\" \nshows \"(\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b) \\<longleftrightarrow> \n  (\\<forall> y. y \\<ge> 0\\<^sub>v nr \\<longrightarrow> mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\"", "lemma farkas_lemma_matrix': fixes A :: \"rat mat\" \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n  and b: \"b \\<in> carrier_vec nr\" \nshows \"(\\<exists> x \\<ge> 0\\<^sub>v nc. A *\\<^sub>v x = b) \\<longleftrightarrow> \n  (\\<forall> y \\<in> carrier_vec nr. mat_of_row y * A \\<ge> 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], "translations": [["", "lemma valuate_poly_of_vec: assumes \"w \\<in> carrier_vec n\" \n  and \"v \\<in> carrier_vec n\"  \nshows \"valuate (poly_of_vec v) (val_of_vec w) = v \\<bullet> w\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_of_vec v \\<lbrace> val_of_vec w \\<rbrace> = v \\<bullet> w", "using assms"], ["proof (prove)\nusing this:\n  w \\<in> carrier_vec n\n  v \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. poly_of_vec v \\<lbrace> val_of_vec w \\<rbrace> = v \\<bullet> w", "by (transfer, auto simp: val_of_vec_def scalar_prod_def intro: sum.mono_neutral_left)"], ["", "definition constraints_of_mat_vec :: \"rat mat \\<Rightarrow> rat vec \\<Rightarrow> rat le_constraint set\" where\n  \"constraints_of_mat_vec A b = (\\<lambda> i . Leqc (poly_of_vec (row A i)) (b $ i)) ` {0 ..< dim_row A}\""], ["", "lemma constraints_of_mat_vec_solution_main: assumes A: \"A \\<in> carrier_mat nr nc\" \n  and x: \"x \\<in> carrier_vec nc\"\n  and b: \"b \\<in> carrier_vec nr\" \n  and sol: \"A *\\<^sub>v x \\<le> b\" \n  and c: \"c \\<in> constraints_of_mat_vec A b\" \nshows \"val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "from c[unfolded constraints_of_mat_vec_def] A"], ["proof (chain)\npicking this:\n  c \\<in> (\\<lambda>i.\n              Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n          {0..<dim_row A}\n  A \\<in> carrier_mat nr nc", "obtain i where\n    i: \"i < nr\" and c: \"c = Leqc (poly_of_vec (row A i)) (b $ i)\""], ["proof (prove)\nusing this:\n  c \\<in> (\\<lambda>i.\n              Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n          {0..<dim_row A}\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. (\\<And>i.\n        \\<lbrakk>i < nr;\n         c = Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  i < nr\n  c = Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\n\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "from i A"], ["proof (chain)\npicking this:\n  i < nr\n  A \\<in> carrier_mat nr nc", "have ri: \"row A i \\<in> carrier_vec nc\""], ["proof (prove)\nusing this:\n  i < nr\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. row A i \\<in> carrier_vec nc", "by auto"], ["proof (state)\nthis:\n  row A i \\<in> carrier_vec nc\n\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "from sol i A x b"], ["proof (chain)\npicking this:\n  A *\\<^sub>v x \\<le> b\n  i < nr\n  A \\<in> carrier_mat nr nc\n  x \\<in> carrier_vec nc\n  b \\<in> carrier_vec nr", "have sol: \"(A *\\<^sub>v x) $ i \\<le> b $ i\""], ["proof (prove)\nusing this:\n  A *\\<^sub>v x \\<le> b\n  i < nr\n  A \\<in> carrier_mat nr nc\n  x \\<in> carrier_vec nc\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. (A *\\<^sub>v x) $ i \\<le> b $ i", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  dim_vec (A *\\<^sub>v x) = dim_vec b \\<and>\n  (\\<forall>i<dim_vec b. (A *\\<^sub>v x) $ i \\<le> b $ i)\n  i < nr\n  A \\<in> carrier_mat nr nc\n  x \\<in> carrier_vec nc\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. (A *\\<^sub>v x) $ i \\<le> b $ i", "by auto"], ["proof (state)\nthis:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "thus \"val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c\""], ["proof (prove)\nusing this:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c", "unfolding c satisfiable_le_constraint.simps rel_of.simps\n      valuate_poly_of_vec[OF x ri]"], ["proof (prove)\nusing this:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "using A x i"], ["proof (prove)\nusing this:\n  (A *\\<^sub>v x) $ i \\<le> b $ i\n  A \\<in> carrier_mat nr nc\n  x \\<in> carrier_vec nc\n  i < nr\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "by auto"], ["proof (state)\nthis:\n  val_of_vec x \\<Turnstile>\\<^sub>l\\<^sub>e c\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma vars_poly_of_vec: \"vars (poly_of_vec v) \\<subseteq> { 0 ..< dim_vec v}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars (poly_of_vec v) \\<subseteq> {0..<dim_vec v}", "by (transfer', auto)"], ["", "lemma finite_constraints_of_mat_vec: \"finite (constraints_of_mat_vec A b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (constraints_of_mat_vec A b)", "unfolding constraints_of_mat_vec_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. finite\n     ((\\<lambda>i. Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n      {0..<dim_row A})", "by auto"], ["", "lemma lec_rec_constraints_of_mat_vec: \"lec_rel ` constraints_of_mat_vec A b \\<subseteq> {Leq_Rel}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. lec_rel ` constraints_of_mat_vec A b \\<subseteq> {Leq_Rel}", "unfolding constraints_of_mat_vec_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. lec_rel `\n    (\\<lambda>i. Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n    {0..<dim_row A}\n    \\<subseteq> {Leq_Rel}", "by auto"], ["", "lemma constraints_of_mat_vec_solution_1: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n    and sol: \"\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b\" \n  shows \"\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>v.\n       \\<forall>c\\<in>constraints_of_mat_vec A b.\n          v \\<Turnstile>\\<^sub>l\\<^sub>e c", "using constraints_of_mat_vec_solution_main[OF A _ b _] sol"], ["proof (prove)\nusing this:\n  \\<lbrakk>?x \\<in> carrier_vec nc; A *\\<^sub>v ?x \\<le> b;\n   ?c \\<in> constraints_of_mat_vec A b\\<rbrakk>\n  \\<Longrightarrow> val_of_vec ?x \\<Turnstile>\\<^sub>l\\<^sub>e ?c\n  \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. \\<exists>v.\n       \\<forall>c\\<in>constraints_of_mat_vec A b.\n          v \\<Turnstile>\\<^sub>l\\<^sub>e c", "by blast"], ["", "lemma constraints_of_mat_vec_solution_2: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n    and sol: \"\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c\" \n  shows \"\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b", "from sol"], ["proof (chain)\npicking this:\n  \\<exists>v.\n     \\<forall>c\\<in>constraints_of_mat_vec A b.\n        v \\<Turnstile>\\<^sub>l\\<^sub>e c", "obtain v where sol: \"v \\<Turnstile>\\<^sub>l\\<^sub>e c\" if \"c \\<in> constraints_of_mat_vec A b\" for c"], ["proof (prove)\nusing this:\n  \\<exists>v.\n     \\<forall>c\\<in>constraints_of_mat_vec A b.\n        v \\<Turnstile>\\<^sub>l\\<^sub>e c\n\ngoal (1 subgoal):\n 1. (\\<And>v.\n        (\\<And>c.\n            c \\<in> constraints_of_mat_vec A b \\<Longrightarrow>\n            v \\<Turnstile>\\<^sub>l\\<^sub>e c) \\<Longrightarrow>\n        thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  ?c \\<in> constraints_of_mat_vec A b \\<Longrightarrow>\n  v \\<Turnstile>\\<^sub>l\\<^sub>e ?c\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b", "define x where \"x = vec nc (\\<lambda> i. v i)\""], ["proof (state)\nthis:\n  x = vec nc v\n\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b", "proof (intro bexI[of _ x])"], ["proof (state)\ngoal (2 subgoals):\n 1. A *\\<^sub>v x \\<le> b\n 2. x \\<in> carrier_vec nc", "show x: \"x \\<in> carrier_vec nc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. x \\<in> carrier_vec nc", "unfolding x_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec nc v \\<in> carrier_vec nc", "by auto"], ["proof (state)\nthis:\n  x \\<in> carrier_vec nc\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x \\<le> b", "have \"row A i \\<bullet> x \\<le> b $ i\" if \"i < nr\" for i"], ["proof (prove)\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "from that"], ["proof (chain)\npicking this:\n  i < nr", "have \"Leqc (poly_of_vec (row A i)) (b $ i) \\<in> constraints_of_mat_vec A b\""], ["proof (prove)\nusing this:\n  i < nr\n\ngoal (1 subgoal):\n 1. Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\n    \\<in> constraints_of_mat_vec A b", "unfolding constraints_of_mat_vec_def"], ["proof (prove)\nusing this:\n  i < nr\n\ngoal (1 subgoal):\n 1. Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\n    \\<in> (\\<lambda>i.\n              Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n          {0..<dim_row A}", "using A"], ["proof (prove)\nusing this:\n  i < nr\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\n    \\<in> (\\<lambda>i.\n              Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)) `\n          {0..<dim_row A}", "by auto"], ["proof (state)\nthis:\n  Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)\n  \\<in> constraints_of_mat_vec A b\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "from sol[OF this, simplified]"], ["proof (chain)\npicking this:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> \\<le> b $ i", "have \"valuate (poly_of_vec (row A i)) v \\<le> b $ i\""], ["proof (prove)\nusing this:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> \\<le> b $ i\n\ngoal (1 subgoal):\n 1. poly_of_vec (row A i) \\<lbrace> v \\<rbrace> \\<le> b $ i", "by simp"], ["proof (state)\nthis:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> \\<le> b $ i\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "also"], ["proof (state)\nthis:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> \\<le> b $ i\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "have \"valuate (poly_of_vec (row A i)) v = valuate (poly_of_vec (row A i)) (val_of_vec x)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_of_vec (row A i) \\<lbrace> v \\<rbrace> =\n    poly_of_vec (row A i) \\<lbrace> val_of_vec x \\<rbrace>", "by (rule valuate_depend, insert A that, \n          auto simp: x_def val_of_vec_def dest!: set_mp[OF vars_poly_of_vec])"], ["proof (state)\nthis:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> =\n  poly_of_vec (row A i) \\<lbrace> val_of_vec x \\<rbrace>\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "also"], ["proof (state)\nthis:\n  poly_of_vec (row A i) \\<lbrace> v \\<rbrace> =\n  poly_of_vec (row A i) \\<lbrace> val_of_vec x \\<rbrace>\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "have \"\\<dots> = row A i \\<bullet> x\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_of_vec (row A i) \\<lbrace> val_of_vec x \\<rbrace> =\n    row A i \\<bullet> x", "by (subst valuate_poly_of_vec[OF x], insert that A x, auto)"], ["proof (state)\nthis:\n  poly_of_vec (row A i) \\<lbrace> val_of_vec x \\<rbrace> =\n  row A i \\<bullet> x\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "finally"], ["proof (chain)\npicking this:\n  row A i \\<bullet> x \\<le> b $ i", "show ?thesis"], ["proof (prove)\nusing this:\n  row A i \\<bullet> x \\<le> b $ i\n\ngoal (1 subgoal):\n 1. row A i \\<bullet> x \\<le> b $ i", "."], ["proof (state)\nthis:\n  row A i \\<bullet> x \\<le> b $ i\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?i < nr \\<Longrightarrow> row A ?i \\<bullet> x \\<le> b $ ?i\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x \\<le> b", "thus \"A *\\<^sub>v x \\<le> b\""], ["proof (prove)\nusing this:\n  ?i < nr \\<Longrightarrow> row A ?i \\<bullet> x \\<le> b $ ?i\n\ngoal (1 subgoal):\n 1. A *\\<^sub>v x \\<le> b", "unfolding less_eq_vec_def"], ["proof (prove)\nusing this:\n  ?i < nr \\<Longrightarrow> row A ?i \\<bullet> x \\<le> b $ ?i\n\ngoal (1 subgoal):\n 1. dim_vec (A *\\<^sub>v x) = dim_vec b \\<and>\n    (\\<forall>i<dim_vec b. (A *\\<^sub>v x) $ i \\<le> b $ i)", "using x A b"], ["proof (prove)\nusing this:\n  ?i < nr \\<Longrightarrow> row A ?i \\<bullet> x \\<le> b $ ?i\n  x \\<in> carrier_vec nc\n  A \\<in> carrier_mat nr nc\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. dim_vec (A *\\<^sub>v x) = dim_vec b \\<and>\n    (\\<forall>i<dim_vec b. (A *\\<^sub>v x) $ i \\<le> b $ i)", "by auto"], ["proof (state)\nthis:\n  A *\\<^sub>v x \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma constraints_of_mat_vec_solution: \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n    and b: \"b \\<in> carrier_vec nr\" \n  shows \"(\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b) = \n    (\\<exists> v. \\<forall> c \\<in> constraints_of_mat_vec A b. v \\<Turnstile>\\<^sub>l\\<^sub>e c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<exists>v.\n        \\<forall>c\\<in>constraints_of_mat_vec A b.\n           v \\<Turnstile>\\<^sub>l\\<^sub>e c)", "using constraints_of_mat_vec_solution_1[OF assms] constraints_of_mat_vec_solution_2[OF assms]"], ["proof (prove)\nusing this:\n  \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b \\<Longrightarrow>\n  \\<exists>v.\n     \\<forall>c\\<in>constraints_of_mat_vec A b.\n        v \\<Turnstile>\\<^sub>l\\<^sub>e c\n  \\<exists>v.\n     \\<forall>c\\<in>constraints_of_mat_vec A b.\n        v \\<Turnstile>\\<^sub>l\\<^sub>e c \\<Longrightarrow>\n  \\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<exists>v.\n        \\<forall>c\\<in>constraints_of_mat_vec A b.\n           v \\<Turnstile>\\<^sub>l\\<^sub>e c)", "by blast"], ["", "lemma farkas_lemma_matrix: fixes A :: \"rat mat\" \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n  and b: \"b \\<in> carrier_vec nr\" \nshows \"(\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b) \\<longleftrightarrow> \n  (\\<forall> y. y \\<ge> 0\\<^sub>v nr \\<longrightarrow> mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "define cs where \"cs = constraints_of_mat_vec A b\""], ["proof (state)\nthis:\n  cs = constraints_of_mat_vec A b\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have fin: \"finite {0 ..< nr}\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite {0..<nr}", "by auto"], ["proof (state)\nthis:\n  finite {0..<nr}\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have dim: \"dim_row A = nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. dim_row A = nr", "using A"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. dim_row A = nr", "by simp"], ["proof (state)\nthis:\n  dim_row A = nr\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have sum_id: \"(\\<Sum> i = 0..<nr. f i) = sum_list (map f [0..<nr])\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. sum f {0..<nr} = sum_list (map f [0..<nr])", "by (subst sum_list_distinct_conv_sum_set, auto)"], ["proof (state)\nthis:\n  sum ?f1 {0..<nr} = sum_list (map ?f1 [0..<nr])\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"(\\<exists> x \\<in> carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n   (\\<not> (\\<nexists> v. \\<forall> c \\<in> cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<not> (\\<nexists>v.\n                \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c))", "unfolding constraints_of_mat_vec_solution[OF assms] cs_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>v.\n        Ball (constraints_of_mat_vec A b)\n         ((\\<Turnstile>\\<^sub>l\\<^sub>e) v)) =\n    (\\<not> (\\<nexists>v.\n                \\<forall>c\\<in>constraints_of_mat_vec A b.\n                   v \\<Turnstile>\\<^sub>l\\<^sub>e c))", "by simp"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n  (\\<not> (\\<nexists>v.\n              \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n  (\\<not> (\\<nexists>v.\n              \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<not> (\\<nexists>v. \\<forall>i\\<in>{0..<nr}. v \\<Turnstile>\\<^sub>l\\<^sub>e Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> (\\<nexists>v.\n                \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c)) =\n    (\\<not> (\\<nexists>v.\n                \\<forall>i\\<in>{0..<nr}.\n                   v \\<Turnstile>\\<^sub>l\\<^sub>e\n                   Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)))", "unfolding cs_def constraints_of_mat_vec_def dim"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> (\\<nexists>v.\n                \\<forall>c\\<in>(\\<lambda>i.\n                                   Le_Constraint Leq_Rel\n                                    (poly_of_vec (row A i)) (b $ i)) `\n                               {0..<nr}.\n                   v \\<Turnstile>\\<^sub>l\\<^sub>e c)) =\n    (\\<not> (\\<nexists>v.\n                \\<forall>i\\<in>{0..<nr}.\n                   v \\<Turnstile>\\<^sub>l\\<^sub>e\n                   Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)))", "by auto"], ["proof (state)\nthis:\n  (\\<not> (\\<nexists>v.\n              \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c)) =\n  (\\<not> (\\<nexists>v.\n              \\<forall>i\\<in>{0..<nr}.\n                 v \\<Turnstile>\\<^sub>l\\<^sub>e\n                 Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<not> (\\<nexists>v.\n              \\<forall>c\\<in>cs. v \\<Turnstile>\\<^sub>l\\<^sub>e c)) =\n  (\\<not> (\\<nexists>v.\n              \\<forall>i\\<in>{0..<nr}.\n                 v \\<Turnstile>\\<^sub>l\\<^sub>e\n                 Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i)))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n         (\\<Sum>i = 0..<nr. (C i *R poly_of_vec (row A i))) = 0 \\<and>\n         (\\<Sum>i = 0..<nr. (C i * b $ i)) < 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<not> (\\<nexists>v.\n                \\<forall>i\\<in>{0..<nr}.\n                   v \\<Turnstile>\\<^sub>l\\<^sub>e\n                   Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i))) =\n    (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n        (\\<Sum>i = 0..<nr. C i * b $ i) < 0)", "unfolding Farkas'_Lemma_indexed[OF \n        lec_rec_constraints_of_mat_vec[unfolded constraints_of_mat_vec_def], of A b,\n        unfolded dim, OF fin] sum_id sum_list_lec le_constraint.simps \n        sum_list_Leq_Rel map_map o_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>C const.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        ((\\<forall>x\\<in>set [0..<nr].\n             lec_rel\n              (Le_Constraint Leq_Rel\n                (C x *R\n                 lec_poly\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n                (C x *R\n                 lec_const\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x))\n                    (b $ x)))) =\n             Leq_Rel) \\<and>\n         (\\<Sum>x\\<leftarrow>[0..<\n                              nr]. lec_poly\n                                    (Le_Constraint Leq_Rel\n(C x *R lec_poly (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n(C x *R\n lec_const (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x))))) =\n         0 \\<and>\n         (\\<Sum>x\\<leftarrow>[0..<\n                              nr]. lec_const\n                                    (Le_Constraint Leq_Rel\n(C x *R lec_poly (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n(C x *R\n lec_const (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x))))) =\n         const) \\<and>\n        const < 0) =\n    (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        (\\<Sum>i\\<leftarrow>[0..<nr]. C i *R poly_of_vec (row A i)) =\n        0 \\<and>\n        (\\<Sum>i\\<leftarrow>[0..<nr]. C i * b $ i) < 0)", "unfolding sum_id[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>C const.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        ((\\<forall>x\\<in>set [0..<nr].\n             lec_rel\n              (Le_Constraint Leq_Rel\n                (C x *R\n                 lec_poly\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n                (C x *R\n                 lec_const\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x))\n                    (b $ x)))) =\n             Leq_Rel) \\<and>\n         (\\<Sum>x = 0..<nr.\n             lec_poly\n              (Le_Constraint Leq_Rel\n                (C x *R\n                 lec_poly\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n                (C x *R\n                 lec_const\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x))\n                    (b $ x))))) =\n         0 \\<and>\n         (\\<Sum>x = 0..<nr.\n             lec_const\n              (Le_Constraint Leq_Rel\n                (C x *R\n                 lec_poly\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x)) (b $ x)))\n                (C x *R\n                 lec_const\n                  (Le_Constraint Leq_Rel (poly_of_vec (row A x))\n                    (b $ x))))) =\n         const) \\<and>\n        const < 0) =\n    (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n        (\\<Sum>i = 0..<nr. C i * b $ i) < 0)", "by simp"], ["proof (state)\nthis:\n  (\\<not> (\\<nexists>v.\n              \\<forall>i\\<in>{0..<nr}.\n                 v \\<Turnstile>\\<^sub>l\\<^sub>e\n                 Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i))) =\n  (\\<nexists>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n      (\\<Sum>i = 0..<nr. C i * b $ i) < 0)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<not> (\\<nexists>v.\n              \\<forall>i\\<in>{0..<nr}.\n                 v \\<Turnstile>\\<^sub>l\\<^sub>e\n                 Le_Constraint Leq_Rel (poly_of_vec (row A i)) (b $ i))) =\n  (\\<nexists>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n      (\\<Sum>i = 0..<nr. C i * b $ i) < 0)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> C. (\\<forall>i\\<in> {0..<nr}. 0 \\<le> C i) \\<longrightarrow> \n         (\\<Sum>i = 0..<nr. (C i *R poly_of_vec (row A i))) = 0 \\<longrightarrow>\n         (\\<Sum>i = 0..<nr. (C i * b $ i)) \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n        (\\<Sum>i = 0..<nr. C i * b $ i) < 0) =\n    (\\<forall>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n        0 \\<longrightarrow>\n        0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i))", "using not_less"], ["proof (prove)\nusing this:\n  (\\<not> ?x < ?y) = (?y \\<le> ?x)\n\ngoal (1 subgoal):\n 1. (\\<nexists>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n        (\\<Sum>i = 0..<nr. C i * b $ i) < 0) =\n    (\\<forall>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n        0 \\<longrightarrow>\n        0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i))", "by blast"], ["proof (state)\nthis:\n  (\\<nexists>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n      (\\<Sum>i = 0..<nr. C i * b $ i) < 0) =\n  (\\<forall>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<longrightarrow>\n      0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<nexists>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<and>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<and>\n      (\\<Sum>i = 0..<nr. C i * b $ i) < 0) =\n  (\\<forall>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<longrightarrow>\n      0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> y. y \\<ge> 0\\<^sub>v nr \\<longrightarrow> mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>C.\n        (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n        0 \\<longrightarrow>\n        0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "proof ((standard; intro allI impI), goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "case *: (1 y)"], ["proof (state)\nthis:\n  \\<forall>C.\n     (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n     (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<longrightarrow>\n     0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n  0\\<^sub>v nr \\<le> y\n  mat_of_row y * A = 0\\<^sub>m 1 nc\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "define C where \"C = (\\<lambda> i. y $ i)\""], ["proof (state)\nthis:\n  C = ($) y\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "note main = *(1)[rule_format, of C]"], ["proof (state)\nthis:\n  \\<lbrakk>\\<And>i. i \\<in> {0..<nr} \\<Longrightarrow> 0 \\<le> C i;\n   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "from *(2)"], ["proof (chain)\npicking this:\n  0\\<^sub>v nr \\<le> y", "have y: \"y \\<in> carrier_vec nr\" and nonneg: \"\\<And>i. i \\<in> {0..<nr} \\<Longrightarrow> 0 \\<le> C i\""], ["proof (prove)\nusing this:\n  0\\<^sub>v nr \\<le> y\n\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec nr &&&\n    (\\<And>i. i \\<in> {0..<nr} \\<Longrightarrow> 0 \\<le> C i)", "unfolding less_eq_vec_def C_def"], ["proof (prove)\nusing this:\n  dim_vec (0\\<^sub>v nr) = dim_vec y \\<and>\n  (\\<forall>i<dim_vec y. 0\\<^sub>v nr $ i \\<le> y $ i)\n\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec nr &&&\n    (\\<And>i. i \\<in> {0..<nr} \\<Longrightarrow> 0 \\<le> y $ i)", "by auto"], ["proof (state)\nthis:\n  y \\<in> carrier_vec nr\n  ?i1 \\<in> {0..<nr} \\<Longrightarrow> 0 \\<le> C ?i1\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "have sum_0: \"(\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0", "unfolding C_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. y $ i *R poly_of_vec (row A i)) = 0", "unfolding zero_coeff_zero coeff_sum"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<forall>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "fix v"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "have \"(\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = \n            (\\<Sum>i < nr. y $ i * coeff (poly_of_vec (row A i)) v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) =\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v)", "by (rule sum.cong, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v)\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v)\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "have \"\\<dots> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "proof (cases \"v < nc\")"], ["proof (state)\ngoal (2 subgoals):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n 2. \\<not> v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "case False"], ["proof (state)\nthis:\n  \\<not> v < nc\n\ngoal (2 subgoals):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n 2. \\<not> v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "have \"(\\<Sum>i < nr. y $ i * coeff (poly_of_vec (row A i)) v) = \n              (\\<Sum>i < nr. y $ i * 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n    (\\<Sum>i<nr. y $ i * 0)", "by (rule sum.cong[OF refl], rule arg_cong[of _ _ \"\\<lambda> x. _ * x\"], insert A False, transfer, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * 0)\n\ngoal (2 subgoals):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n 2. \\<not> v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * 0)\n\ngoal (2 subgoals):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n 2. \\<not> v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "have \"\\<dots> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * 0) = 0", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * 0) = 0\n\ngoal (2 subgoals):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n 2. \\<not> v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "by simp"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "case True"], ["proof (state)\nthis:\n  v < nc\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "have \"(\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n              (\\<Sum>i<nr. y $ i * row A i $ v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n    (\\<Sum>i<nr. y $ i * row A i $ v)", "by (rule sum.cong[OF refl], rule arg_cong[of _ _ \"\\<lambda> x. _ * x\"], insert A True, transfer, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * row A i $ v)\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) =\n  (\\<Sum>i<nr. y $ i * row A i $ v)\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "have \"\\<dots> = (mat_of_row y * A) $$ (0,v)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * row A i $ v) = (mat_of_row y * A) $$ (0, v)", "unfolding times_mat_def scalar_prod_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * row A i $ v) =\n    mat (dim_row (mat_of_row y)) (dim_col A)\n     (\\<lambda>(i, j).\n         \\<Sum>ia = 0..<dim_vec (col A j).\n            row (mat_of_row y) i $ ia * col A j $ ia) $$\n    (0, v)", "using A y True"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc\n  y \\<in> carrier_vec nr\n  v < nc\n\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * row A i $ v) =\n    mat (dim_row (mat_of_row y)) (dim_col A)\n     (\\<lambda>(i, j).\n         \\<Sum>ia = 0..<dim_vec (col A j).\n            row (mat_of_row y) i $ ia * col A j $ ia) $$\n    (0, v)", "by (auto intro: sum.cong)"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * row A i $ v) = (mat_of_row y * A) $$ (0, v)\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "also"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * row A i $ v) = (mat_of_row y * A) $$ (0, v)\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "have \"\\<dots> = 0\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (mat_of_row y * A) $$ (0, v) = 0", "unfolding *(3)"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>m 1 nc $$ (0, v) = 0", "using True"], ["proof (prove)\nusing this:\n  v < nc\n\ngoal (1 subgoal):\n 1. 0\\<^sub>m 1 nc $$ (0, v) = 0", "by simp"], ["proof (state)\nthis:\n  (mat_of_row y * A) $$ (0, v) = 0\n\ngoal (1 subgoal):\n 1. v < nc \\<Longrightarrow>\n    (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0", "."], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i<nr. y $ i * coeff (poly_of_vec (row A i)) v) = 0\n\ngoal (1 subgoal):\n 1. \\<And>v.\n       (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "finally"], ["proof (chain)\npicking this:\n  (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "show \"(\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0\""], ["proof (prove)\nusing this:\n  (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0", "."], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. coeff (y $ i *R poly_of_vec (row A i)) v) = 0\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "from main[OF nonneg sum_0]"], ["proof (chain)\npicking this:\n  (\\<And>i.\n      i \\<in> {0..<nr} \\<Longrightarrow> i \\<in> {0..<nr}) \\<Longrightarrow>\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "have le: \"0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\""], ["proof (prove)\nusing this:\n  (\\<And>i.\n      i \\<in> {0..<nr} \\<Longrightarrow> i \\<in> {0..<nr}) \\<Longrightarrow>\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "."], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>C.\n                   (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n                   (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) =\n                   0 \\<longrightarrow>\n                   0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i);\n        0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "thus ?case"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n\ngoal (1 subgoal):\n 1. 0 \\<le> y \\<bullet> b", "using y b"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n  y \\<in> carrier_vec nr\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. 0 \\<le> y \\<bullet> b", "unfolding scalar_prod_def C_def"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>i = 0..<nr. y $ i * b $ i)\n  y \\<in> carrier_vec nr\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i = 0..<dim_vec b. y $ i * b $ i)", "by auto"], ["proof (state)\nthis:\n  0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "case *: (2 C)"], ["proof (state)\nthis:\n  \\<forall>y\\<ge>0\\<^sub>v nr.\n     mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n     0 \\<le> y \\<bullet> b\n  \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i\n  (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "define y where \"y = vec nr C\""], ["proof (state)\nthis:\n  y = vec nr C\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "have y: \"y \\<in> carrier_vec nr\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y \\<in> carrier_vec nr", "unfolding y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. vec nr C \\<in> carrier_vec nr", "by auto"], ["proof (state)\nthis:\n  y \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "note main = *(1)[rule_format, of y]"], ["proof (state)\nthis:\n  \\<lbrakk>0\\<^sub>v nr \\<le> y; mat_of_row y * A = 0\\<^sub>m 1 nc\\<rbrakk>\n  \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "from *(2)"], ["proof (chain)\npicking this:\n  \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i", "have y0: \"y \\<ge> 0\\<^sub>v nr\""], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i\n\ngoal (1 subgoal):\n 1. 0\\<^sub>v nr \\<le> y", "unfolding less_eq_vec_def y_def"], ["proof (prove)\nusing this:\n  \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i\n\ngoal (1 subgoal):\n 1. dim_vec (0\\<^sub>v nr) = dim_vec (vec nr C) \\<and>\n    (\\<forall>i<dim_vec (vec nr C). 0\\<^sub>v nr $ i \\<le> vec nr C $ i)", "by auto"], ["proof (state)\nthis:\n  0\\<^sub>v nr \\<le> y\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "have prod0: \"mat_of_row y * A = 0\\<^sub>m 1 nc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "{"], ["proof (state)\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "fix j"], ["proof (state)\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "assume j: \"j < nc\""], ["proof (state)\nthis:\n  j < nc\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "from arg_cong[OF *(3), of \"\\<lambda> x. coeff x j\", unfolded coeff_sum]"], ["proof (chain)\npicking this:\n  (\\<Sum>i = 0..<nr. coeff (C i *R poly_of_vec (row A i)) j) = coeff 0 j", "have \"0 = (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j)\""], ["proof (prove)\nusing this:\n  (\\<Sum>i = 0..<nr. coeff (C i *R poly_of_vec (row A i)) j) = coeff 0 j\n\ngoal (1 subgoal):\n 1. 0 = (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j)", "by simp"], ["proof (state)\nthis:\n  0 = (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j)\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "also"], ["proof (state)\nthis:\n  0 = (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j)\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "have \"\\<dots> = (\\<Sum>i = 0..<nr. C i * row A i $ j)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j) =\n    (\\<Sum>i = 0..<nr. C i * row A i $ j)", "by (rule sum.cong[OF refl], rule arg_cong[of _ _ \"\\<lambda> x. _ * x\"], insert A j, transfer, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j) =\n  (\\<Sum>i = 0..<nr. C i * row A i $ j)\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "also"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. C i * coeff (poly_of_vec (row A i)) j) =\n  (\\<Sum>i = 0..<nr. C i * row A i $ j)\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "have \"\\<dots> = y \\<bullet> col A j\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. C i * row A i $ j) = y \\<bullet> col A j", "unfolding scalar_prod_def y_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. C i * row A i $ j) =\n    (\\<Sum>i = 0..<dim_vec (col A j). vec nr C $ i * col A j $ i)", "using A j"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc\n  j < nc\n\ngoal (1 subgoal):\n 1. (\\<Sum>i = 0..<nr. C i * row A i $ j) =\n    (\\<Sum>i = 0..<dim_vec (col A j). vec nr C $ i * col A j $ i)", "by (intro sum.cong, auto)"], ["proof (state)\nthis:\n  (\\<Sum>i = 0..<nr. C i * row A i $ j) = y \\<bullet> col A j\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "finally"], ["proof (chain)\npicking this:\n  0 = y \\<bullet> col A j", "have \"y \\<bullet> col A j = 0\""], ["proof (prove)\nusing this:\n  0 = y \\<bullet> col A j\n\ngoal (1 subgoal):\n 1. y \\<bullet> col A j = 0", "by simp"], ["proof (state)\nthis:\n  y \\<bullet> col A j = 0\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "}"], ["proof (state)\nthis:\n  ?j3 < nc \\<Longrightarrow> y \\<bullet> col A ?j3 = 0\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "thus ?thesis"], ["proof (prove)\nusing this:\n  ?j3 < nc \\<Longrightarrow> y \\<bullet> col A ?j3 = 0\n\ngoal (1 subgoal):\n 1. mat_of_row y * A = 0\\<^sub>m 1 nc", "by (intro eq_matI, insert A y, auto)"], ["proof (state)\nthis:\n  mat_of_row y * A = 0\\<^sub>m 1 nc\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  mat_of_row y * A = 0\\<^sub>m 1 nc\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "from main[OF y0 prod0]"], ["proof (chain)\npicking this:\n  0 \\<le> y \\<bullet> b", "have \"0 \\<le> y \\<bullet> b\""], ["proof (prove)\nusing this:\n  0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. 0 \\<le> y \\<bullet> b", "."], ["proof (state)\nthis:\n  0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. \\<And>C.\n       \\<lbrakk>\\<forall>y\\<ge>0\\<^sub>v nr.\n                   mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        \\<forall>i\\<in>{0..<nr}. 0 \\<le> C i;\n        (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "thus ?case"], ["proof (prove)\nusing this:\n  0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "unfolding scalar_prod_def y_def"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>i = 0..<dim_vec b. vec nr C $ i * b $ i)\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "using b"], ["proof (prove)\nusing this:\n  0 \\<le> (\\<Sum>i = 0..<dim_vec b. vec nr C $ i * b $ i)\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. 0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)", "by auto"], ["proof (state)\nthis:\n  0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>C.\n      (\\<forall>i\\<in>{0..<nr}. 0 \\<le> C i) \\<longrightarrow>\n      (\\<Sum>i = 0..<nr. C i *R poly_of_vec (row A i)) = 0 \\<longrightarrow>\n      0 \\<le> (\\<Sum>i = 0..<nr. C i * b $ i)) =\n  (\\<forall>y\\<ge>0\\<^sub>v nr.\n      mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "finally"], ["proof (chain)\npicking this:\n  (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n  (\\<forall>y\\<ge>0\\<^sub>v nr.\n      mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n  (\\<forall>y\\<ge>0\\<^sub>v nr.\n      mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n    (\\<forall>y\\<ge>0\\<^sub>v nr.\n        mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "."], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc. A *\\<^sub>v x \\<le> b) =\n  (\\<forall>y\\<ge>0\\<^sub>v nr.\n      mat_of_row y * A = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma farkas_lemma_matrix': fixes A :: \"rat mat\" \n  assumes A: \"A \\<in> carrier_mat nr nc\" \n  and b: \"b \\<in> carrier_vec nr\" \nshows \"(\\<exists> x \\<ge> 0\\<^sub>v nc. A *\\<^sub>v x = b) \\<longleftrightarrow> \n  (\\<forall> y \\<in> carrier_vec nr. mat_of_row y * A \\<ge> 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "define B where \"B = (- 1\\<^sub>m nc) @\\<^sub>r (A @\\<^sub>r -A)\""], ["proof (state)\nthis:\n  B = - 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "define b' where \"b' = 0\\<^sub>v nc @\\<^sub>v (b @\\<^sub>v -b)\""], ["proof (state)\nthis:\n  b' = 0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "define n where \"n = nc + (nr + nr)\""], ["proof (state)\nthis:\n  n = nc + (nr + nr)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have id0: \"0\\<^sub>v (nc + (nr + nr)) = 0\\<^sub>v nc @\\<^sub>v (0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>v (nc + (nr + nr)) =\n    0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr", "by (intro eq_vecI, auto)"], ["proof (state)\nthis:\n  0\\<^sub>v (nc + (nr + nr)) =\n  0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have B: \"B \\<in> carrier_mat n nc\""], ["proof (prove)\ngoal (1 subgoal):\n 1. B \\<in> carrier_mat n nc", "unfolding B_def n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. - 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A\n    \\<in> carrier_mat (nc + (nr + nr)) nc", "using A"], ["proof (prove)\nusing this:\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. - 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A\n    \\<in> carrier_mat (nc + (nr + nr)) nc", "by auto"], ["proof (state)\nthis:\n  B \\<in> carrier_mat n nc\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have b': \"b' \\<in> carrier_vec n\""], ["proof (prove)\ngoal (1 subgoal):\n 1. b' \\<in> carrier_vec n", "unfolding b'_def n_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b\n    \\<in> carrier_vec (nc + (nr + nr))", "using b"], ["proof (prove)\nusing this:\n  b \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. 0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b\n    \\<in> carrier_vec (nc + (nr + nr))", "by auto"], ["proof (state)\nthis:\n  b' \\<in> carrier_vec n\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"(\\<exists> x \\<ge> 0\\<^sub>v nc. A *\\<^sub>v x = b) = (\\<exists> x. x \\<in> carrier_vec nc \\<and> x \\<ge> 0\\<^sub>v nc \\<and> A *\\<^sub>v x = b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<exists>x.\n        x \\<in> carrier_vec nc \\<and>\n        0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)", "by (rule arg_cong[of _ _ Ex], intro ext, insert A b, auto simp: less_eq_vec_def)"], ["proof (state)\nthis:\n  (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n  (\\<exists>x.\n      x \\<in> carrier_vec nc \\<and>\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n  (\\<exists>x.\n      x \\<in> carrier_vec nc \\<and>\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<exists> x \\<in> carrier_vec nc. x \\<ge> 0\\<^sub>v nc \\<and> A *\\<^sub>v x = b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x.\n        x \\<in> carrier_vec nc \\<and>\n        0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n    (\\<exists>x\\<in>carrier_vec nc.\n        0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)", "by blast"], ["proof (state)\nthis:\n  (\\<exists>x.\n      x \\<in> carrier_vec nc \\<and>\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x.\n      x \\<in> carrier_vec nc \\<and>\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<exists> x \\<in> carrier_vec nc. 1\\<^sub>m nc *\\<^sub>v x \\<ge> 0\\<^sub>v nc \\<and> A *\\<^sub>v x \\<le> b \\<and> A *\\<^sub>v x \\<ge> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc.\n        0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n    (\\<exists>x\\<in>carrier_vec nc.\n        0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n        A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x)", "by (rule bex_cong[OF refl], insert A b, auto)"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> x \\<and> A *\\<^sub>v x = b) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<exists> x \\<in> carrier_vec nc. (- 1\\<^sub>m nc) *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and> A *\\<^sub>v x \\<le> b \\<and> (- A) *\\<^sub>v x \\<le> -b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc.\n        0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n        A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x) =\n    (\\<exists>x\\<in>carrier_vec nc.\n        - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n        A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b)", "by (rule bex_cong[OF refl], insert A b, auto simp: less_eq_vec_def)"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      0\\<^sub>v nc \\<le> 1\\<^sub>m nc *\\<^sub>v x \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> b \\<le> A *\\<^sub>v x) =\n  (\\<exists>x\\<in>carrier_vec nc.\n      - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<exists> x \\<in> carrier_vec nc. B *\\<^sub>v x \\<le> b')\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc.\n        - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n        A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b) =\n    (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b')", "by (rule bex_cong[OF refl], insert A b, unfold B_def b'_def, \n      subst append_rows_le[of _ ], (auto)[4], intro conj_cong[OF refl], subst append_rows_le, auto)"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b) =\n  (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc.\n      - 1\\<^sub>m nc *\\<^sub>v x \\<le> 0\\<^sub>v nc \\<and>\n      A *\\<^sub>v x \\<le> b \\<and> - A *\\<^sub>v x \\<le> - b) =\n  (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y\\<ge>0\\<^sub>v n. mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b' \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b') =\n    (\\<forall>y\\<ge>0\\<^sub>v n.\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b')", "by (rule farkas_lemma_matrix[OF B b'])"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b') =\n  (\\<forall>y\\<ge>0\\<^sub>v n.\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<exists>x\\<in>carrier_vec nc. B *\\<^sub>v x \\<le> b') =\n  (\\<forall>y\\<ge>0\\<^sub>v n.\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> y. y \\<in> carrier_vec n \\<longrightarrow> y\\<ge>0\\<^sub>v n \\<longrightarrow> mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b' \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y\\<ge>0\\<^sub>v n.\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b') =\n    (\\<forall>y.\n        y \\<in> carrier_vec n \\<longrightarrow>\n        0\\<^sub>v n \\<le> y \\<longrightarrow>\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b')", "by (intro arg_cong[of _ _ All], intro ext, auto simp: less_eq_vec_def)"], ["proof (state)\nthis:\n  (\\<forall>y\\<ge>0\\<^sub>v n.\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y.\n      y \\<in> carrier_vec n \\<longrightarrow>\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y\\<ge>0\\<^sub>v n.\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y.\n      y \\<in> carrier_vec n \\<longrightarrow>\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> y \\<in> carrier_vec n. y\\<ge>0\\<^sub>v n \\<longrightarrow> mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b' \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y.\n        y \\<in> carrier_vec n \\<longrightarrow>\n        0\\<^sub>v n \\<le> y \\<longrightarrow>\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b') =\n    (\\<forall>y\\<in>carrier_vec n.\n        0\\<^sub>v n \\<le> y \\<longrightarrow>\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b')", "by blast"], ["proof (state)\nthis:\n  (\\<forall>y.\n      y \\<in> carrier_vec n \\<longrightarrow>\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y\\<in>carrier_vec n.\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y.\n      y \\<in> carrier_vec n \\<longrightarrow>\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y\\<in>carrier_vec n.\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b')\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y1 \\<in>carrier_vec nc. \\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc @\\<^sub>v (0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr) \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3  \\<longrightarrow>\n              mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) * ((- 1\\<^sub>m nc) @\\<^sub>r (A @\\<^sub>r -A)) = 0\\<^sub>m 1 nc \n              \\<longrightarrow> 0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet> (0\\<^sub>v nc @\\<^sub>v (b @\\<^sub>v -b)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y\\<in>carrier_vec n.\n        0\\<^sub>v n \\<le> y \\<longrightarrow>\n        mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n        0 \\<le> y \\<bullet> b') =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n              \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n              mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n              (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                      (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b))", "unfolding n_def all_vec_append id0 b'_def B_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>x1\\<in>carrier_vec nc.\n        \\<forall>x1a\\<in>carrier_vec nr.\n           \\<forall>x2\\<in>carrier_vec nr.\n              0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n              \\<le> x1 @\\<^sub>v x1a @\\<^sub>v x2 \\<longrightarrow>\n              mat_of_row (x1 @\\<^sub>v x1a @\\<^sub>v x2) *\n              (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> (x1 @\\<^sub>v x1a @\\<^sub>v x2) \\<bullet>\n                      (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b)) =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n              \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n              mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n              (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                      (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b))", "by auto"], ["proof (state)\nthis:\n  (\\<forall>y\\<in>carrier_vec n.\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n            \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n            mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n            (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                    (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y\\<in>carrier_vec n.\n      0\\<^sub>v n \\<le> y \\<longrightarrow>\n      mat_of_row y * B = 0\\<^sub>m 1 nc \\<longrightarrow>\n      0 \\<le> y \\<bullet> b') =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n            \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n            mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n            (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                    (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b))\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y1 \\<in>carrier_vec nc. \\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              (- mat_of_row y1) + \n              (mat_of_row y2 * A - (mat_of_row y3 * A)) = 0\\<^sub>m 1 nc \n              \\<longrightarrow> y2 \\<bullet> b - y3 \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n              \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n              mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n              (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                      (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b)) =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)", "by (intro ball_cong[OF refl], subst append_vec_le, (auto)[2], subst append_vec_le, (auto)[2], insert A b,\n      subst scalar_prod_append, (auto)[4], subst scalar_prod_append, (auto)[4], \n      subst mat_of_row_mult_append_rows, (auto)[4],\n      subst mat_of_row_mult_append_rows, (auto)[4],\n      subst add_uminus_minus_mat[symmetric], auto)"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n            \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n            mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n            (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                    (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b)) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc @\\<^sub>v 0\\<^sub>v nr @\\<^sub>v 0\\<^sub>v nr\n            \\<le> y1 @\\<^sub>v y2 @\\<^sub>v y3 \\<longrightarrow>\n            mat_of_row (y1 @\\<^sub>v y2 @\\<^sub>v y3) *\n            (- 1\\<^sub>m nc @\\<^sub>r A @\\<^sub>r - A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> (y1 @\\<^sub>v y2 @\\<^sub>v y3) \\<bullet>\n                    (0\\<^sub>v nc @\\<^sub>v b @\\<^sub>v - b)) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y1 \\<in>carrier_vec nc. \\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\n              \\<longrightarrow> y2 \\<bullet> b - y3 \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n              0\\<^sub>m 1 nc \\<longrightarrow>\n              0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 =\n              mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n              0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)", "proof ((intro ball_cong[OF refl] arg_cong2[of _ _ _ _ \"(\\<longrightarrow>)\"] refl, standard), goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n        0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> mat_of_row y1 =\n                         mat_of_row y2 * A - mat_of_row y3 * A\n 2. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\\<rbrakk>\n       \\<Longrightarrow> - mat_of_row y1 +\n                         (mat_of_row y2 * A - mat_of_row y3 * A) =\n                         0\\<^sub>m 1 nc", "case (1 y1 y2 y3)"], ["proof (state)\nthis:\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) = 0\\<^sub>m 1 nc\n\ngoal (2 subgoals):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n        0\\<^sub>m 1 nc\\<rbrakk>\n       \\<Longrightarrow> mat_of_row y1 =\n                         mat_of_row y2 * A - mat_of_row y3 * A\n 2. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\\<rbrakk>\n       \\<Longrightarrow> - mat_of_row y1 +\n                         (mat_of_row y2 * A - mat_of_row y3 * A) =\n                         0\\<^sub>m 1 nc", "from arg_cong[OF 1(4), of \"\\<lambda> x. mat_of_row y1 + x\"]"], ["proof (chain)\npicking this:\n  mat_of_row y1 +\n  (- mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A)) =\n  mat_of_row y1 + 0\\<^sub>m 1 nc", "show ?case"], ["proof (prove)\nusing this:\n  mat_of_row y1 +\n  (- mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A)) =\n  mat_of_row y1 + 0\\<^sub>m 1 nc\n\ngoal (1 subgoal):\n 1. mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A", "using 1(1-3) A"], ["proof (prove)\nusing this:\n  mat_of_row y1 +\n  (- mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A)) =\n  mat_of_row y1 + 0\\<^sub>m 1 nc\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A", "by (subst (asm) assoc_add_mat[symmetric], (auto)[3],\n        subst (asm) add_uminus_minus_mat, (auto)[1],\n        subst (asm) minus_r_inv_mat, force,\n        subst (asm) right_add_zero_mat, force,\n        subst (asm) left_add_zero_mat, force, auto)"], ["proof (state)\nthis:\n  mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\n\ngoal (1 subgoal):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\\<rbrakk>\n       \\<Longrightarrow> - mat_of_row y1 +\n                         (mat_of_row y2 * A - mat_of_row y3 * A) =\n                         0\\<^sub>m 1 nc", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\\<rbrakk>\n       \\<Longrightarrow> - mat_of_row y1 +\n                         (mat_of_row y2 * A - mat_of_row y3 * A) =\n                         0\\<^sub>m 1 nc", "case (2 y1 y2 y3)"], ["proof (state)\nthis:\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\n\ngoal (1 subgoal):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row y2 * A - mat_of_row y3 * A\\<rbrakk>\n       \\<Longrightarrow> - mat_of_row y1 +\n                         (mat_of_row y2 * A - mat_of_row y3 * A) =\n                         0\\<^sub>m 1 nc", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n    0\\<^sub>m 1 nc", "unfolding 2(4)"], ["proof (prove)\ngoal (1 subgoal):\n 1. - (mat_of_row y2 * A - mat_of_row y3 * A) +\n    (mat_of_row y2 * A - mat_of_row y3 * A) =\n    0\\<^sub>m 1 nc", "using 2(1-3) A"], ["proof (prove)\nusing this:\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. - (mat_of_row y2 * A - mat_of_row y3 * A) +\n    (mat_of_row y2 * A - mat_of_row y3 * A) =\n    0\\<^sub>m 1 nc", "by (intro eq_matI, auto)"], ["proof (state)\nthis:\n  - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) = 0\\<^sub>m 1 nc\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 =\n            mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            - mat_of_row y1 + (mat_of_row y2 * A - mat_of_row y3 * A) =\n            0\\<^sub>m 1 nc \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 =\n            mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y1 \\<in>carrier_vec nc. \\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 = mat_of_row (y2 - y3) * A\n              \\<longrightarrow> (y2 - y3) \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 =\n              mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n              0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n              0 \\<le> (y2 - y3) \\<bullet> b)", "by (intro ball_cong[OF refl] imp_cong refl \n      arg_cong2[of _ _ _ _ \"(\\<le>)\"] arg_cong2[of _ _ _ _ \"(=)\"],\n      subst minus_mult_distrib_mat[symmetric], insert A b, auto\n      simp: minus_scalar_prod_distrib mat_of_rows_def \n      intro!: arg_cong[of _ _ \"\\<lambda> x. x * _\"])"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 =\n            mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 =\n            mat_of_row y2 * A - mat_of_row y3 * A \\<longrightarrow>\n            0 \\<le> y2 \\<bullet> b - y3 \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y1 \\<in>carrier_vec nc. \\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              y1 = row (mat_of_row (y2 - y3) * A) 0\n              \\<longrightarrow> (y2 - y3) \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n              0 \\<le> (y2 - y3) \\<bullet> b) =\n    (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n              0 \\<le> (y2 - y3) \\<bullet> b)", "proof (intro ball_cong[OF refl] arg_cong2[of _ _ _ _ \"(\\<longrightarrow>)\"] refl, standard, goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row (y2 - y3) * A\\<rbrakk>\n       \\<Longrightarrow> y1 = row (mat_of_row (y2 - y3) * A) 0\n 2. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        y1 = row (mat_of_row (y2 - y3) * A) 0\\<rbrakk>\n       \\<Longrightarrow> mat_of_row y1 = mat_of_row (y2 - y3) * A", "case (1 y1 y2 y3)"], ["proof (state)\nthis:\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  mat_of_row y1 = mat_of_row (y2 - y3) * A\n\ngoal (2 subgoals):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        mat_of_row y1 = mat_of_row (y2 - y3) * A\\<rbrakk>\n       \\<Longrightarrow> y1 = row (mat_of_row (y2 - y3) * A) 0\n 2. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        y1 = row (mat_of_row (y2 - y3) * A) 0\\<rbrakk>\n       \\<Longrightarrow> mat_of_row y1 = mat_of_row (y2 - y3) * A", "from arg_cong[OF 1(4), of \"\\<lambda> x. row x 0\"] 1(1-3) A"], ["proof (chain)\npicking this:\n  row (mat_of_row y1) 0 = row (mat_of_row (y2 - y3) * A) 0\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  A \\<in> carrier_mat nr nc", "show ?case"], ["proof (prove)\nusing this:\n  row (mat_of_row y1) 0 = row (mat_of_row (y2 - y3) * A) 0\n  y1 \\<in> carrier_vec nc\n  y2 \\<in> carrier_vec nr\n  y3 \\<in> carrier_vec nr\n  A \\<in> carrier_mat nr nc\n\ngoal (1 subgoal):\n 1. y1 = row (mat_of_row (y2 - y3) * A) 0", "by auto"], ["proof (state)\nthis:\n  y1 = row (mat_of_row (y2 - y3) * A) 0\n\ngoal (1 subgoal):\n 1. \\<And>y1 y2 y3.\n       \\<lbrakk>y1 \\<in> carrier_vec nc; y2 \\<in> carrier_vec nr;\n        y3 \\<in> carrier_vec nr;\n        y1 = row (mat_of_row (y2 - y3) * A) 0\\<rbrakk>\n       \\<Longrightarrow> mat_of_row y1 = mat_of_row (y2 - y3) * A", "qed (insert A, auto)"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            mat_of_row y1 = mat_of_row (y2 - y3) * A \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              row (mat_of_row (y2 - y3) * A) 0 \\<in> carrier_vec nc\n              \\<longrightarrow> (y2 - y3) \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y1\\<in>carrier_vec nc.\n        \\<forall>y2\\<in>carrier_vec nr.\n           \\<forall>y3\\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n              0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n              y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n              0 \\<le> (y2 - y3) \\<bullet> b) =\n    (\\<forall>y2\\<in>carrier_vec nr.\n        \\<forall>y3\\<in>carrier_vec nr.\n           0\\<^sub>v nc\n           \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n           row (mat_of_row (y2 - y3) * A) 0\n           \\<in> carrier_vec nc \\<longrightarrow>\n           0 \\<le> (y2 - y3) \\<bullet> b)", "by blast"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         row (mat_of_row (y2 - y3) * A) 0\n         \\<in> carrier_vec nc \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y1\\<in>carrier_vec nc.\n      \\<forall>y2\\<in>carrier_vec nr.\n         \\<forall>y3\\<in>carrier_vec nr.\n            0\\<^sub>v nc \\<le> y1 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n            0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n            y1 = row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n            0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         row (mat_of_row (y2 - y3) * A) 0\n         \\<in> carrier_vec nc \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall>y2 \\<in>carrier_vec nr. \\<forall>y3 \\<in>carrier_vec nr.\n              0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow> 0\\<^sub>v nr \\<le> y2 \\<longrightarrow> 0\\<^sub>v nr \\<le> y3 \n              \\<longrightarrow> (y2 - y3) \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y2\\<in>carrier_vec nr.\n        \\<forall>y3\\<in>carrier_vec nr.\n           0\\<^sub>v nc\n           \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n           row (mat_of_row (y2 - y3) * A) 0\n           \\<in> carrier_vec nc \\<longrightarrow>\n           0 \\<le> (y2 - y3) \\<bullet> b) =\n    (\\<forall>y2\\<in>carrier_vec nr.\n        \\<forall>y3\\<in>carrier_vec nr.\n           0\\<^sub>v nc\n           \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n           0 \\<le> (y2 - y3) \\<bullet> b)", "by (intro ball_cong[OF refl] arg_cong2[of _ _ _ _ \"(\\<longrightarrow>)\"] refl, insert A,\n        auto simp: row_def)"], ["proof (state)\nthis:\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         row (mat_of_row (y2 - y3) * A) 0\n         \\<in> carrier_vec nc \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         row (mat_of_row (y2 - y3) * A) 0\n         \\<in> carrier_vec nc \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> y \\<in> carrier_vec nr. row (mat_of_row y * A) 0 \\<ge> 0\\<^sub>v nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y2\\<in>carrier_vec nr.\n        \\<forall>y3\\<in>carrier_vec nr.\n           0\\<^sub>v nc\n           \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n           0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n           0 \\<le> (y2 - y3) \\<bullet> b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "proof ((standard; intro ballI impI), goal_cases)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>y2\\<in>carrier_vec nr.\n                   \\<forall>y3\\<in>carrier_vec nr.\n                      0\\<^sub>v nc\n                      \\<le> row (mat_of_row (y2 - y3) * A)\n                             0 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n                      0 \\<le> (y2 - y3) \\<bullet> b;\n        y \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "case (1 y)"], ["proof (state)\nthis:\n  \\<forall>y2\\<in>carrier_vec nr.\n     \\<forall>y3\\<in>carrier_vec nr.\n        0\\<^sub>v nc\n        \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n        0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n        0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n        0 \\<le> (y2 - y3) \\<bullet> b\n  y \\<in> carrier_vec nr\n  0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>y2\\<in>carrier_vec nr.\n                   \\<forall>y3\\<in>carrier_vec nr.\n                      0\\<^sub>v nc\n                      \\<le> row (mat_of_row (y2 - y3) * A)\n                             0 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n                      0 \\<le> (y2 - y3) \\<bullet> b;\n        y \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "define y2 where \"y2 = vec nr (\\<lambda> i. if y $ i \\<ge> 0 then y $ i else 0)\""], ["proof (state)\nthis:\n  y2 = vec nr (\\<lambda>i. if 0 \\<le> y $ i then y $ i else 0)\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>y2\\<in>carrier_vec nr.\n                   \\<forall>y3\\<in>carrier_vec nr.\n                      0\\<^sub>v nc\n                      \\<le> row (mat_of_row (y2 - y3) * A)\n                             0 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n                      0 \\<le> (y2 - y3) \\<bullet> b;\n        y \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "define y3 where \"y3 = vec nr (\\<lambda> i. if y $ i \\<ge> 0 then 0 else - y $ i)\""], ["proof (state)\nthis:\n  y3 = vec nr (\\<lambda>i. if 0 \\<le> y $ i then 0 else - y $ i)\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>y2\\<in>carrier_vec nr.\n                   \\<forall>y3\\<in>carrier_vec nr.\n                      0\\<^sub>v nc\n                      \\<le> row (mat_of_row (y2 - y3) * A)\n                             0 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n                      0 \\<le> (y2 - y3) \\<bullet> b;\n        y \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "have y: \"y = y2 - y3\""], ["proof (prove)\ngoal (1 subgoal):\n 1. y = y2 - y3", "unfolding y2_def y3_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. y =\n    vec nr (\\<lambda>i. if 0 \\<le> y $ i then y $ i else 0) -\n    vec nr (\\<lambda>i. if 0 \\<le> y $ i then 0 else - y $ i)", "using 1(2)"], ["proof (prove)\nusing this:\n  y \\<in> carrier_vec nr\n\ngoal (1 subgoal):\n 1. y =\n    vec nr (\\<lambda>i. if 0 \\<le> y $ i then y $ i else 0) -\n    vec nr (\\<lambda>i. if 0 \\<le> y $ i then 0 else - y $ i)", "by (intro eq_vecI, auto)"], ["proof (state)\nthis:\n  y = y2 - y3\n\ngoal (2 subgoals):\n 1. \\<And>y.\n       \\<lbrakk>\\<forall>y2\\<in>carrier_vec nr.\n                   \\<forall>y3\\<in>carrier_vec nr.\n                      0\\<^sub>v nc\n                      \\<le> row (mat_of_row (y2 - y3) * A)\n                             0 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n                      0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n                      0 \\<le> (y2 - y3) \\<bullet> b;\n        y \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> y \\<bullet> b\n 2. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "show ?case"], ["proof (prove)\ngoal (1 subgoal):\n 1. 0 \\<le> y \\<bullet> b", "by (rule 1(1)[rule_format, of y2 y3, folded y, OF _ _ 1(3)],\n       auto simp: y2_def y3_def less_eq_vec_def)"], ["proof (state)\nthis:\n  0 \\<le> y \\<bullet> b\n\ngoal (1 subgoal):\n 1. \\<And>y2 y3.\n       \\<lbrakk>\\<forall>y\\<in>carrier_vec nr.\n                   0\\<^sub>v nc\n                   \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n                   0 \\<le> y \\<bullet> b;\n        y2 \\<in> carrier_vec nr; y3 \\<in> carrier_vec nr;\n        0\\<^sub>v nc \\<le> row (mat_of_row (y2 - y3) * A) 0;\n        0\\<^sub>v nr \\<le> y2; 0\\<^sub>v nr \\<le> y3\\<rbrakk>\n       \\<Longrightarrow> 0 \\<le> (y2 - y3) \\<bullet> b", "qed auto"], ["proof (state)\nthis:\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "also"], ["proof (state)\nthis:\n  (\\<forall>y2\\<in>carrier_vec nr.\n      \\<forall>y3\\<in>carrier_vec nr.\n         0\\<^sub>v nc\n         \\<le> row (mat_of_row (y2 - y3) * A) 0 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y2 \\<longrightarrow>\n         0\\<^sub>v nr \\<le> y3 \\<longrightarrow>\n         0 \\<le> (y2 - y3) \\<bullet> b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "have \"\\<dots> = (\\<forall> y \\<in> carrier_vec nr. mat_of_row y * A \\<ge> 0\\<^sub>m 1 nc \\<longrightarrow> y \\<bullet> b \\<ge> 0)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n        0 \\<le> y \\<bullet> b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "by (intro ball_cong arg_cong2[of _ _ _ _ \"(\\<longrightarrow>)\"] refl,\n      insert A, auto simp: less_eq_vec_def less_eq_mat_def)"], ["proof (state)\nthis:\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>v nc \\<le> row (mat_of_row y * A) 0 \\<longrightarrow>\n      0 \\<le> y \\<bullet> b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "finally"], ["proof (chain)\npicking this:\n  (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)", "show ?thesis"], ["proof (prove)\nusing this:\n  (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal (1 subgoal):\n 1. (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n    (\\<forall>y\\<in>carrier_vec nr.\n        0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n        0 \\<le> y \\<bullet> b)", "."], ["proof (state)\nthis:\n  (\\<exists>x\\<ge>0\\<^sub>v nc. A *\\<^sub>v x = b) =\n  (\\<forall>y\\<in>carrier_vec nr.\n      0\\<^sub>m 1 nc \\<le> mat_of_row y * A \\<longrightarrow>\n      0 \\<le> y \\<bullet> b)\n\ngoal:\nNo subgoals!", "qed"], ["", "end"]]}