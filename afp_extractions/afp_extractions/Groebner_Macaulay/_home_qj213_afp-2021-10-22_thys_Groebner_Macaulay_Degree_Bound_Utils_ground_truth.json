{"file_name": "/home/qj213/afp-2021-10-22/thys/Groebner_Macaulay/Degree_Bound_Utils.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Groebner_Macaulay", "problem_names": ["lemma is_GB_cofactor_boundI:\n  assumes \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"\\<Union>(indets ` G) \\<subseteq> \\<Union>(indets ` F)\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and> (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\"\n  shows \"is_GB_cofactor_bound F b\"", "lemma is_GB_cofactor_boundE:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"\\<Union>(indets ` G) \\<subseteq> \\<Union>(indets ` F)\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                          (\\<forall>f. indets (q f) \\<subseteq> \\<Union>(indets ` F) \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\"", "lemma is_GB_cofactor_boundE_Polys:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\" and \"F \\<subseteq> P[X]\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[X]\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                            (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\"", "lemma is_GB_cofactor_boundE_finite_Polys:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\" and \"finite F\" and \"F \\<subseteq> P[X]\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[X]\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>q. g = (\\<Sum>f\\<in>F. q f * f) \\<and> (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)\"", "lemma is_GB_cofactor_boundI_subset_zero:\n  assumes \"F \\<subseteq> {0}\"\n  shows \"is_GB_cofactor_bound F b\"", "lemma is_hom_GB_boundI:\n  \"(\\<And>g. (\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f) \\<Longrightarrow> g \\<in> punit.reduced_GB F \\<Longrightarrow> poly_deg g \\<le> b) \\<Longrightarrow> is_hom_GB_bound F b\"", "lemma is_hom_GB_boundD:\n  \"is_hom_GB_bound F b \\<Longrightarrow> (\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f) \\<Longrightarrow> g \\<in> punit.reduced_GB F \\<Longrightarrow> poly_deg g \\<le> b\"", "lemma (in extended_ord_pm_powerprod) hom_GB_bound_is_GB_cofactor_bound:\n  assumes \"finite X\" and \"F \\<subseteq> P[X]\" and \"extended_ord.is_hom_GB_bound (homogenize None ` extend_indets ` F) b\"\n  shows \"is_GB_cofactor_bound F b\""], "translations": [["", "lemma is_GB_cofactor_boundI:\n  assumes \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"\\<Union>(indets ` G) \\<subseteq> \\<Union>(indets ` F)\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and> (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\"\n  shows \"is_GB_cofactor_bound F b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "unfolding is_GB_cofactor_bound_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>G.\n       punit.is_Groebner_basis G \\<and>\n       ideal G = ideal F \\<and>\n       \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F) \\<and>\n       (\\<forall>g\\<in>G.\n           \\<exists>F' q.\n              finite F' \\<and>\n              F' \\<subseteq> F \\<and>\n              g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n              (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b))", "using assms"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n  ?g7 \\<in> G \\<Longrightarrow>\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     ?g7 = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\n\ngoal (1 subgoal):\n 1. \\<exists>G.\n       punit.is_Groebner_basis G \\<and>\n       ideal G = ideal F \\<and>\n       \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F) \\<and>\n       (\\<forall>g\\<in>G.\n           \\<exists>F' q.\n              finite F' \\<and>\n              F' \\<subseteq> F \\<and>\n              g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n              (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b))", "by blast"], ["", "lemma is_GB_cofactor_boundE:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"\\<Union>(indets ` G) \\<subseteq> \\<Union>(indets ` F)\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                          (\\<forall>f. indets (q f) \\<subseteq> \\<Union>(indets ` F) \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?X = \"\\<Union>(indets ` F)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms"], ["proof (chain)\npicking this:\n  is_GB_cofactor_bound F b", "obtain G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"\\<Union>(indets ` G) \\<subseteq> ?X\"\n    and 1: \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and> (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\""], ["proof (prove)\nusing this:\n  is_GB_cofactor_bound F b\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (auto simp: is_GB_cofactor_bound_def)"], ["proof (state)\nthis:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n  ?g7 \\<in> G \\<Longrightarrow>\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     ?g7 = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from this(1, 2, 3)"], ["proof (chain)\npicking this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)", "show ?thesis"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "assume \"g \\<in> G\""], ["proof (state)\nthis:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "show \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                (\\<forall>f. indets (q f) \\<subseteq> ?X \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "proof (cases \"g = 0\")"], ["proof (state)\ngoal (2 subgoals):\n 1. g = 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))\n 2. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "case True"], ["proof (state)\nthis:\n  g = 0\n\ngoal (2 subgoals):\n 1. g = 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))\n 2. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "define q where \"q = (\\<lambda>f::('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b. 0::('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b)\""], ["proof (state)\nthis:\n  q = (\\<lambda>f. 0)\n\ngoal (2 subgoals):\n 1. g = 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))\n 2. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "proof (intro exI conjI allI)"], ["proof (state)\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<longrightarrow> ?q1 f = 0", "show \"g = (\\<Sum>f\\<in>{}. q f * f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. g = (\\<Sum>f\\<in>{}. q f * f)", "by (simp add: True q_def)"], ["proof (state)\nthis:\n  g = (\\<Sum>f\\<in>{}. q f * f)\n\ngoal (5 subgoals):\n 1. finite {}\n 2. {} \\<subseteq> F\n 3. \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 4. \\<And>f. poly_deg (q f * f) \\<le> b\n 5. \\<And>f. f \\<notin> {} \\<longrightarrow> q f = 0", "qed (simp_all add: q_def)"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "case False"], ["proof (state)\nthis:\n  g \\<noteq> 0\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "let ?X = \"\\<Union>(indets ` F)\""], ["proof (state)\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "from \\<open>g \\<in> G\\<close>"], ["proof (chain)\npicking this:\n  g \\<in> G", "have \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and> (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\""], ["proof (prove)\nusing this:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "by (rule 1)"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "then"], ["proof (chain)\npicking this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "obtain F' q0 where \"finite F'\" and \"F' \\<subseteq> F\" and g: \"g = (\\<Sum>f\\<in>F'. q0 f * f)\"\n        and q0: \"\\<And>f. f \\<in> F' \\<Longrightarrow> poly_deg (q0 f * f) \\<le> b\""], ["proof (prove)\nusing this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\n\ngoal (1 subgoal):\n 1. (\\<And>F' q0.\n        \\<lbrakk>finite F'; F' \\<subseteq> F;\n         g = (\\<Sum>f\\<in>F'. q0 f * f);\n         \\<And>f.\n            f \\<in> F' \\<Longrightarrow>\n            poly_deg (q0 f * f) \\<le> b\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  finite F'\n  F' \\<subseteq> F\n  g = (\\<Sum>f\\<in>F'. q0 f * f)\n  ?f7 \\<in> F' \\<Longrightarrow> poly_deg (q0 ?f7 * ?f7) \\<le> b\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "define sub where \"sub = (\\<lambda>x::'x. if x \\<in> ?X then\n                                         monomial (1::'b) (Poly_Mapping.single x (1::nat))\n                                       else 1)\""], ["proof (state)\nthis:\n  sub =\n  (\\<lambda>x.\n      if x \\<in> \\<Union> (indets ` F) then monomial (1::'b) (monomial 1 x)\n      else 1)\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "have 1: \"sub x = monomial 1 (monomial 1 x)\" if \"x \\<in> indets g\" for x"], ["proof (prove)\ngoal (1 subgoal):\n 1. sub x = monomial (1::'b) (monomial 1 x)", "proof (simp add: sub_def, rule)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "from that \\<open>g \\<in> G\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> indets g\n  g \\<in> G", "have \"x \\<in> \\<Union>(indets ` G)\""], ["proof (prove)\nusing this:\n  x \\<in> indets g\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union> (indets ` G)", "by blast"], ["proof (state)\nthis:\n  x \\<in> \\<Union> (indets ` G)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "also"], ["proof (state)\nthis:\n  x \\<in> \\<Union> (indets ` G)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "have \"\\<dots> \\<subseteq> ?X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)", "by fact"], ["proof (state)\nthis:\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "finally"], ["proof (chain)\npicking this:\n  x \\<in> \\<Union> (indets ` F)", "obtain f where \"f \\<in> F\" and \"x \\<in> indets f\""], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> F; x \\<in> indets f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  f \\<in> F\n  x \\<in> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "assume \"\\<forall>f\\<in>F. x \\<notin> indets f\""], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "hence \"x \\<notin> indets f\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. x \\<notin> indets f", "using \\<open>f \\<in> F\\<close>"], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. x \\<notin> indets f", ".."], ["proof (state)\nthis:\n  x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "thus \"monomial 1 (monomial (Suc 0) x) = 1\""], ["proof (prove)\nusing this:\n  x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. monomial (1::'a) (monomial (Suc 0) x) = 1", "using \\<open>x \\<in> indets f\\<close>"], ["proof (prove)\nusing this:\n  x \\<notin> indets f\n  x \\<in> indets f\n\ngoal (1 subgoal):\n 1. monomial (1::'a) (monomial (Suc 0) x) = 1", ".."], ["proof (state)\nthis:\n  monomial (1::?'a8) (monomial (Suc 0) x) = 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ?x7 \\<in> indets g \\<Longrightarrow>\n  sub ?x7 = monomial (1::'b) (monomial 1 ?x7)\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "have 2: \"sub x = monomial 1 (monomial 1 x)\" if \"f \\<in> F'\" and \"x \\<in> indets f\" for f x"], ["proof (prove)\ngoal (1 subgoal):\n 1. sub x = monomial (1::'b) (monomial 1 x)", "proof (simp add: sub_def, rule)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "assume \"\\<forall>f\\<in>F. x \\<notin> indets f\""], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "moreover"], ["proof (state)\nthis:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "from that(1) \\<open>F' \\<subseteq> F\\<close>"], ["proof (chain)\npicking this:\n  f \\<in> F'\n  F' \\<subseteq> F", "have \"f \\<in> F\""], ["proof (prove)\nusing this:\n  f \\<in> F'\n  F' \\<subseteq> F\n\ngoal (1 subgoal):\n 1. f \\<in> F", ".."], ["proof (state)\nthis:\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "ultimately"], ["proof (chain)\npicking this:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n  f \\<in> F", "have \"x \\<notin> indets f\""], ["proof (prove)\nusing this:\n  \\<forall>f\\<in>F. x \\<notin> indets f\n  f \\<in> F\n\ngoal (1 subgoal):\n 1. x \\<notin> indets f", ".."], ["proof (state)\nthis:\n  x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. \\<forall>xa\\<in>F. x \\<notin> indets xa \\<Longrightarrow>\n    monomial (1::'b) (monomial (Suc 0) x) = 1", "thus \"monomial 1 (monomial (Suc 0) x) = 1\""], ["proof (prove)\nusing this:\n  x \\<notin> indets f\n\ngoal (1 subgoal):\n 1. monomial (1::'a) (monomial (Suc 0) x) = 1", "using that(2)"], ["proof (prove)\nusing this:\n  x \\<notin> indets f\n  x \\<in> indets f\n\ngoal (1 subgoal):\n 1. monomial (1::'a) (monomial (Suc 0) x) = 1", ".."], ["proof (state)\nthis:\n  monomial (1::?'a8) (monomial (Suc 0) x) = 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<lbrakk>?f7 \\<in> F'; ?x7 \\<in> indets ?f7\\<rbrakk>\n  \\<Longrightarrow> sub ?x7 = monomial (1::'b) (monomial 1 ?x7)\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "have 3: \"poly_subst sub f = f\" if \"f \\<in> F'\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_subst sub f = f", "by (rule poly_subst_id, rule 2, rule that)"], ["proof (state)\nthis:\n  ?f7 \\<in> F' \\<Longrightarrow> poly_subst sub ?f7 = ?f7\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "define q where \"q = (\\<lambda>f. if f \\<in> F' then poly_subst sub (q0 f) else 0)\""], ["proof (state)\nthis:\n  q = (\\<lambda>f. if f \\<in> F' then poly_subst sub (q0 f) else 0)\n\ngoal (1 subgoal):\n 1. g \\<noteq> 0 \\<Longrightarrow>\n    \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "proof (intro exI allI conjI impI)"], ["proof (state)\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "from 1"], ["proof (chain)\npicking this:\n  ?x7 \\<in> indets g \\<Longrightarrow>\n  sub ?x7 = monomial (1::'b) (monomial 1 ?x7)", "have \"g = poly_subst sub g\""], ["proof (prove)\nusing this:\n  ?x7 \\<in> indets g \\<Longrightarrow>\n  sub ?x7 = monomial (1::'b) (monomial 1 ?x7)\n\ngoal (1 subgoal):\n 1. g = poly_subst sub g", "by (rule poly_subst_id[symmetric])"], ["proof (state)\nthis:\n  g = poly_subst sub g\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "also"], ["proof (state)\nthis:\n  g = poly_subst sub g\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "have \"\\<dots> = (\\<Sum>f\\<in>F'. q f * (poly_subst sub f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_subst sub g = (\\<Sum>f\\<in>F'. q f * poly_subst sub f)", "by (simp add: g poly_subst_sum poly_subst_times q_def cong: sum.cong)"], ["proof (state)\nthis:\n  poly_subst sub g = (\\<Sum>f\\<in>F'. q f * poly_subst sub f)\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "also"], ["proof (state)\nthis:\n  poly_subst sub g = (\\<Sum>f\\<in>F'. q f * poly_subst sub f)\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "from refl"], ["proof (chain)\npicking this:\n  ?t = ?t", "have \"\\<dots> = (\\<Sum>f\\<in>F'. q f * f)\""], ["proof (prove)\nusing this:\n  ?t = ?t\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>F'. q f * poly_subst sub f) = (\\<Sum>f\\<in>F'. q f * f)", "proof (rule sum.cong)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> F' \\<Longrightarrow> q x * poly_subst sub x = q x * x", "fix f"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> F' \\<Longrightarrow> q x * poly_subst sub x = q x * x", "assume \"f \\<in> F'\""], ["proof (state)\nthis:\n  f \\<in> F'\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> F' \\<Longrightarrow> q x * poly_subst sub x = q x * x", "hence \"poly_subst sub f = f\""], ["proof (prove)\nusing this:\n  f \\<in> F'\n\ngoal (1 subgoal):\n 1. poly_subst sub f = f", "by (rule 3)"], ["proof (state)\nthis:\n  poly_subst sub f = f\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> F' \\<Longrightarrow> q x * poly_subst sub x = q x * x", "thus \"q f * poly_subst sub f = q f * f\""], ["proof (prove)\nusing this:\n  poly_subst sub f = f\n\ngoal (1 subgoal):\n 1. q f * poly_subst sub f = q f * f", "by simp"], ["proof (state)\nthis:\n  q f * poly_subst sub f = q f * f\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>F'. q f * poly_subst sub f) = (\\<Sum>f\\<in>F'. q f * f)\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. indets (?q1 f) \\<subseteq> \\<Union> (indets ` F)\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "finally"], ["proof (chain)\npicking this:\n  g = (\\<Sum>f\\<in>F'. q f * f)", "show \"g = (\\<Sum>f\\<in>F'. q f * f)\""], ["proof (prove)\nusing this:\n  g = (\\<Sum>f\\<in>F'. q f * f)\n\ngoal (1 subgoal):\n 1. g = (\\<Sum>f\\<in>F'. q f * f)", "."], ["proof (state)\nthis:\n  g = (\\<Sum>f\\<in>F'. q f * f)\n\ngoal (5 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 4. \\<And>f. poly_deg (q f * f) \\<le> b\n 5. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "next"], ["proof (state)\ngoal (5 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 4. \\<And>f. poly_deg (q f * f) \\<le> b\n 5. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "fix f"], ["proof (state)\ngoal (5 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 4. \\<And>f. poly_deg (q f * f) \\<le> b\n 5. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "have \"indets (q f) \\<subseteq> ?X \\<and> poly_deg (q f * f) \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "proof (cases \"f \\<in> F'\")"], ["proof (state)\ngoal (2 subgoals):\n 1. f \\<in> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b\n 2. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "case True"], ["proof (state)\nthis:\n  f \\<in> F'\n\ngoal (2 subgoals):\n 1. f \\<in> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b\n 2. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "hence qf: \"q f = poly_subst sub (q0 f)\""], ["proof (prove)\nusing this:\n  f \\<in> F'\n\ngoal (1 subgoal):\n 1. q f = poly_subst sub (q0 f)", "by (simp add: q_def)"], ["proof (state)\nthis:\n  q f = poly_subst sub (q0 f)\n\ngoal (2 subgoals):\n 1. f \\<in> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b\n 2. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "show ?thesis"], ["proof (prove)\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 2. poly_deg (q f * f) \\<le> b", "show \"indets (q f) \\<subseteq> ?X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F)", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "assume \"x \\<in> indets (q f)\""], ["proof (state)\nthis:\n  x \\<in> indets (q f)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "then"], ["proof (chain)\npicking this:\n  x \\<in> indets (q f)", "obtain y where \"x \\<in> indets (sub y)\""], ["proof (prove)\nusing this:\n  x \\<in> indets (q f)\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x \\<in> indets (sub y) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding qf"], ["proof (prove)\nusing this:\n  x \\<in> indets (poly_subst sub (q0 f))\n\ngoal (1 subgoal):\n 1. (\\<And>y.\n        x \\<in> indets (sub y) \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule in_indets_poly_substE)"], ["proof (state)\nthis:\n  x \\<in> indets (sub y)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "hence y: \"y \\<in> ?X\" and \"x \\<in> indets (monomial (1::'b) (monomial (1::nat) y))\""], ["proof (prove)\nusing this:\n  x \\<in> indets (sub y)\n\ngoal (1 subgoal):\n 1. y \\<in> \\<Union> (indets ` F) &&&\n    x \\<in> indets (monomial (1::'b) (monomial 1 y))", "by (simp_all add: sub_def split: if_splits)"], ["proof (state)\nthis:\n  y \\<in> \\<Union> (indets ` F)\n  x \\<in> indets (monomial (1::'b) (monomial 1 y))\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "from this(2)"], ["proof (chain)\npicking this:\n  x \\<in> indets (monomial (1::'b) (monomial 1 y))", "have \"x = y\""], ["proof (prove)\nusing this:\n  x \\<in> indets (monomial (1::'b) (monomial 1 y))\n\ngoal (1 subgoal):\n 1. x = y", "by (simp add: indets_monomial)"], ["proof (state)\nthis:\n  x = y\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q f) \\<Longrightarrow> x \\<in> \\<Union> (indets ` F)", "with y"], ["proof (chain)\npicking this:\n  y \\<in> \\<Union> (indets ` F)\n  x = y", "show \"x \\<in> ?X\""], ["proof (prove)\nusing this:\n  y \\<in> \\<Union> (indets ` F)\n  x = y\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union> (indets ` F)", "by (simp only:)"], ["proof (state)\nthis:\n  x \\<in> \\<Union> (indets ` F)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "from \\<open>f \\<in> F'\\<close>"], ["proof (chain)\npicking this:\n  f \\<in> F'", "have \"poly_subst sub f = f\""], ["proof (prove)\nusing this:\n  f \\<in> F'\n\ngoal (1 subgoal):\n 1. poly_subst sub f = f", "by (rule 3)"], ["proof (state)\nthis:\n  poly_subst sub f = f\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "hence \"poly_deg (q f * f) = poly_deg (q f * poly_subst sub f)\""], ["proof (prove)\nusing this:\n  poly_subst sub f = f\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) = poly_deg (q f * poly_subst sub f)", "by (simp only:)"], ["proof (state)\nthis:\n  poly_deg (q f * f) = poly_deg (q f * poly_subst sub f)\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg (q f * f) = poly_deg (q f * poly_subst sub f)\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "have \"\\<dots> = poly_deg (poly_subst sub (q0 f * f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg (q f * poly_subst sub f) = poly_deg (poly_subst sub (q0 f * f))", "by (simp only: qf poly_subst_times)"], ["proof (state)\nthis:\n  poly_deg (q f * poly_subst sub f) = poly_deg (poly_subst sub (q0 f * f))\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg (q f * poly_subst sub f) = poly_deg (poly_subst sub (q0 f * f))\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "have \"\\<dots> \\<le> poly_deg (q0 f * f)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg (poly_subst sub (q0 f * f)) \\<le> poly_deg (q0 f * f)", "proof (rule poly_deg_poly_subst_le)"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q0 f * f) \\<Longrightarrow> poly_deg (sub x) \\<le> 1", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> indets (q0 f * f) \\<Longrightarrow> poly_deg (sub x) \\<le> 1", "show \"poly_deg (sub x) \\<le> 1\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg (sub x) \\<le> 1", "by (simp add: sub_def poly_deg_monomial deg_pm_single)"], ["proof (state)\nthis:\n  poly_deg (sub x) \\<le> 1\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  poly_deg (poly_subst sub (q0 f * f)) \\<le> poly_deg (q0 f * f)\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg (poly_subst sub (q0 f * f)) \\<le> poly_deg (q0 f * f)\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "from \\<open>f \\<in> F'\\<close>"], ["proof (chain)\npicking this:\n  f \\<in> F'", "have \"\\<dots> \\<le> b\""], ["proof (prove)\nusing this:\n  f \\<in> F'\n\ngoal (1 subgoal):\n 1. poly_deg (q0 f * f) \\<le> b", "by (rule q0)"], ["proof (state)\nthis:\n  poly_deg (q0 f * f) \\<le> b\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "finally"], ["proof (chain)\npicking this:\n  poly_deg (q f * f) \\<le> b", "show \"poly_deg (q f * f) \\<le> b\""], ["proof (prove)\nusing this:\n  poly_deg (q f * f) \\<le> b\n\ngoal (1 subgoal):\n 1. poly_deg (q f * f) \\<le> b", "."], ["proof (state)\nthis:\n  poly_deg (q f * f) \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n  poly_deg (q f * f) \\<le> b\n\ngoal (1 subgoal):\n 1. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "case False"], ["proof (state)\nthis:\n  f \\<notin> F'\n\ngoal (1 subgoal):\n 1. f \\<notin> F' \\<Longrightarrow>\n    indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "thus ?thesis"], ["proof (prove)\nusing this:\n  f \\<notin> F'\n\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n    poly_deg (q f * f) \\<le> b", "by (simp add: q_def)"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n  poly_deg (q f * f) \\<le> b\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n  poly_deg (q f * f) \\<le> b\n\ngoal (5 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F)\n 4. \\<And>f. poly_deg (q f * f) \\<le> b\n 5. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "thus \"indets (q f) \\<subseteq> ?X\" and \"poly_deg (q f * f) \\<le> b\""], ["proof (prove)\nusing this:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n  poly_deg (q f * f) \\<le> b\n\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> \\<Union> (indets ` F) &&&\n    poly_deg (q f * f) \\<le> b", "by simp_all"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F)\n  poly_deg (q f * f) \\<le> b\n\ngoal (3 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "assume \"f \\<notin> F'\""], ["proof (state)\nthis:\n  f \\<notin> F'\n\ngoal (3 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F\n 3. \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0", "thus \"q f = 0\""], ["proof (prove)\nusing this:\n  f \\<notin> F'\n\ngoal (1 subgoal):\n 1. q f = 0", "by (simp add: q_def)"], ["proof (state)\nthis:\n  q f = 0\n\ngoal (2 subgoals):\n 1. finite F'\n 2. F' \\<subseteq> F", "qed fact+"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma is_GB_cofactor_boundE_Polys:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\" and \"F \\<subseteq> P[X]\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[X]\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                            (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "let ?X = \"\\<Union>(indets ` F)\""], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "have \"?X \\<subseteq> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (indets ` F) \\<subseteq> X", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "assume \"x \\<in> ?X\""], ["proof (state)\nthis:\n  x \\<in> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "then"], ["proof (chain)\npicking this:\n  x \\<in> \\<Union> (indets ` F)", "obtain f where \"f \\<in> F\" and \"x \\<in> indets f\""], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> F; x \\<in> indets f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  f \\<in> F\n  x \\<in> indets f\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "from this(1) assms(2)"], ["proof (chain)\npicking this:\n  f \\<in> F\n  F \\<subseteq> P[X]", "have \"f \\<in> P[X]\""], ["proof (prove)\nusing this:\n  f \\<in> F\n  F \\<subseteq> P[X]\n\ngoal (1 subgoal):\n 1. f \\<in> P[X]", ".."], ["proof (state)\nthis:\n  f \\<in> P[X]\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "hence \"indets f \\<subseteq> X\""], ["proof (prove)\nusing this:\n  f \\<in> P[X]\n\ngoal (1 subgoal):\n 1. indets f \\<subseteq> X", "by (rule PolysD)"], ["proof (state)\nthis:\n  indets f \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> \\<Union> (indets ` F) \\<Longrightarrow> x \\<in> X", "with \\<open>x \\<in> indets f\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> indets f\n  indets f \\<subseteq> X", "show \"x \\<in> X\""], ["proof (prove)\nusing this:\n  x \\<in> indets f\n  indets f \\<subseteq> X\n\ngoal (1 subgoal):\n 1. x \\<in> X", ".."], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  \\<Union> (indets ` F) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(1)"], ["proof (chain)\npicking this:\n  is_GB_cofactor_bound F b", "obtain G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\"\n    and 1: \"\\<Union>(indets ` G) \\<subseteq> ?X\"\n    and 2: \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                            (\\<forall>f. indets (q f) \\<subseteq> ?X \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\nusing this:\n  is_GB_cofactor_bound F b\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule is_GB_cofactor_boundE) blast"], ["proof (state)\nthis:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n  ?g7 \\<in> G \\<Longrightarrow>\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     ?g7 = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from this(1, 2)"], ["proof (chain)\npicking this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F", "show ?thesis"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (2 subgoals):\n 1. G \\<subseteq> P[X]\n 2. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "show \"G \\<subseteq> P[X]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. G \\<subseteq> P[X]", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "assume \"g \\<in> G\""], ["proof (state)\nthis:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "hence \"indets g \\<subseteq> \\<Union>(indets ` G)\""], ["proof (prove)\nusing this:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. indets g \\<subseteq> \\<Union> (indets ` G)", "by blast"], ["proof (state)\nthis:\n  indets g \\<subseteq> \\<Union> (indets ` G)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "also"], ["proof (state)\nthis:\n  indets g \\<subseteq> \\<Union> (indets ` G)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "have \"\\<dots> \\<subseteq> ?X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)", "by fact"], ["proof (state)\nthis:\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "also"], ["proof (state)\nthis:\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "have \"\\<dots> \\<subseteq> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (indets ` F) \\<subseteq> X", "by fact"], ["proof (state)\nthis:\n  \\<Union> (indets ` F) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> G \\<Longrightarrow> x \\<in> P[X]", "finally"], ["proof (chain)\npicking this:\n  indets g \\<subseteq> X", "show \"g \\<in> P[X]\""], ["proof (prove)\nusing this:\n  indets g \\<subseteq> X\n\ngoal (1 subgoal):\n 1. g \\<in> P[X]", "by (rule PolysI_alt)"], ["proof (state)\nthis:\n  g \\<in> P[X]\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  G \\<subseteq> P[X]\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "assume \"g \\<in> G\""], ["proof (state)\nthis:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "hence \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                  (\\<forall>f. indets (q f) \\<subseteq> ?X \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\nusing this:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "by (rule 2)"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "then"], ["proof (chain)\npicking this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))", "obtain F' q where \"finite F'\" and \"F' \\<subseteq> F\" and \"g = (\\<Sum>f\\<in>F'. q f * f)\"\n      and \"\\<And>f. indets (q f) \\<subseteq> ?X\" and \"\\<And>f. poly_deg (q f * f) \\<le> b\" and \"\\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0\""], ["proof (prove)\nusing this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         indets (q f) \\<subseteq> \\<Union> (indets ` F) \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. (\\<And>F' q.\n        \\<lbrakk>finite F'; F' \\<subseteq> F; g = (\\<Sum>f\\<in>F'. q f * f);\n         \\<And>f. indets (q f) \\<subseteq> \\<Union> (indets ` F);\n         \\<And>f. poly_deg (q f * f) \\<le> b;\n         \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  finite F'\n  F' \\<subseteq> F\n  g = (\\<Sum>f\\<in>F'. q f * f)\n  indets (q ?f7) \\<subseteq> \\<Union> (indets ` F)\n  poly_deg (q ?f7 * ?f7) \\<le> b\n  ?f7 \\<notin> F' \\<Longrightarrow> q ?f7 = 0\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f.\n              q f \\<in> P[X] \\<and>\n              poly_deg (q f * f) \\<le> b \\<and>\n              (f \\<notin> F' \\<longrightarrow> q f = 0))", "show \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                  (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           q f \\<in> P[X] \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "proof (intro exI allI conjI impI)"], ["proof (state)\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. ?q1 f \\<in> P[X]\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "fix f"], ["proof (state)\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. ?q1 f \\<in> P[X]\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "from \\<open>indets (q f) \\<subseteq> ?X\\<close> \\<open>?X \\<subseteq> X\\<close>"], ["proof (chain)\npicking this:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F)\n  \\<Union> (indets ` F) \\<subseteq> X", "have \"indets (q f) \\<subseteq> X\""], ["proof (prove)\nusing this:\n  indets (q f) \\<subseteq> \\<Union> (indets ` F)\n  \\<Union> (indets ` F) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. indets (q f) \\<subseteq> X", "by (rule subset_trans)"], ["proof (state)\nthis:\n  indets (q f) \\<subseteq> X\n\ngoal (6 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. ?q1 f \\<in> P[X]\n 5. \\<And>f. poly_deg (?q1 f * f) \\<le> b\n 6. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> ?q1 f = 0", "thus \"q f \\<in> P[X]\""], ["proof (prove)\nusing this:\n  indets (q f) \\<subseteq> X\n\ngoal (1 subgoal):\n 1. q f \\<in> P[X]", "by (rule PolysI_alt)"], ["proof (state)\nthis:\n  q f \\<in> P[X]\n\ngoal (5 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. q (?f19 f) * f)\n 4. \\<And>f. poly_deg (q (?f19 f) * f) \\<le> b\n 5. \\<And>f. f \\<notin> ?F' \\<Longrightarrow> q (?f19 f) = 0", "qed fact+"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         q f \\<in> P[X] \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma is_GB_cofactor_boundE_finite_Polys:\n  fixes F :: \"(('x \\<Rightarrow>\\<^sub>0 nat) \\<Rightarrow>\\<^sub>0 'b::field) set\"\n  assumes \"is_GB_cofactor_bound F b\" and \"finite F\" and \"F \\<subseteq> P[X]\"\n  obtains G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[X]\"\n    and \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>q. g = (\\<Sum>f\\<in>F. q f * f) \\<and> (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>q.\n               g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>q.\n               g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from assms(1, 3)"], ["proof (chain)\npicking this:\n  is_GB_cofactor_bound F b\n  F \\<subseteq> P[X]", "obtain G where \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[X]\"\n    and 1: \"\\<And>g. g \\<in> G \\<Longrightarrow> \\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                            (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\nusing this:\n  is_GB_cofactor_bound F b\n  F \\<subseteq> P[X]\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>F' q.\n               finite F' \\<and>\n               F' \\<subseteq> F \\<and>\n               g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b \\<and>\n                   (f \\<notin> F' \\<longrightarrow> q f = 0))\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule is_GB_cofactor_boundE_Polys) blast"], ["proof (state)\nthis:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  G \\<subseteq> P[X]\n  ?g7 \\<in> G \\<Longrightarrow>\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     ?g7 = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         q f \\<in> P[X] \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. (\\<And>G.\n        \\<lbrakk>punit.is_Groebner_basis G; ideal G = ideal F;\n         G \\<subseteq> P[X];\n         \\<And>g.\n            g \\<in> G \\<Longrightarrow>\n            \\<exists>q.\n               g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n               (\\<forall>f.\n                   q f \\<in> P[X] \\<and>\n                   poly_deg (q f * f) \\<le> b)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "from this(1, 2, 3)"], ["proof (chain)\npicking this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  G \\<subseteq> P[X]", "show ?thesis"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  G \\<subseteq> P[X]\n\ngoal (1 subgoal):\n 1. thesis", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>q.\n          g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n          (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>q.\n          g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n          (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "assume \"g \\<in> G\""], ["proof (state)\nthis:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>q.\n          g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n          (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "hence \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n                            (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b \\<and> (f \\<notin> F' \\<longrightarrow> q f = 0))\""], ["proof (prove)\nusing this:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f.\n           q f \\<in> P[X] \\<and>\n           poly_deg (q f * f) \\<le> b \\<and>\n           (f \\<notin> F' \\<longrightarrow> q f = 0))", "by (rule 1)"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         q f \\<in> P[X] \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>q.\n          g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n          (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "then"], ["proof (chain)\npicking this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         q f \\<in> P[X] \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))", "obtain F' q where \"F' \\<subseteq> F\" and g: \"g = (\\<Sum>f\\<in>F'. q f * f)\"\n      and \"\\<And>f. q f \\<in> P[X]\" and \"\\<And>f. poly_deg (q f * f) \\<le> b\" and 2: \"\\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0\""], ["proof (prove)\nusing this:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f.\n         q f \\<in> P[X] \\<and>\n         poly_deg (q f * f) \\<le> b \\<and>\n         (f \\<notin> F' \\<longrightarrow> q f = 0))\n\ngoal (1 subgoal):\n 1. (\\<And>F' q.\n        \\<lbrakk>F' \\<subseteq> F; g = (\\<Sum>f\\<in>F'. q f * f);\n         \\<And>f. q f \\<in> P[X]; \\<And>f. poly_deg (q f * f) \\<le> b;\n         \\<And>f. f \\<notin> F' \\<Longrightarrow> q f = 0\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  F' \\<subseteq> F\n  g = (\\<Sum>f\\<in>F'. q f * f)\n  q ?f7 \\<in> P[X]\n  poly_deg (q ?f7 * ?f7) \\<le> b\n  ?f7 \\<notin> F' \\<Longrightarrow> q ?f7 = 0\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>q.\n          g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n          (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "show \"\\<exists>q. g = (\\<Sum>f\\<in>F. q f * f) \\<and> (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>q.\n       g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n       (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)", "proof (intro exI conjI impI allI)"], ["proof (state)\ngoal (3 subgoals):\n 1. g = (\\<Sum>f\\<in>F. ?q f * f)\n 2. \\<And>f. ?q f \\<in> P[X]\n 3. \\<And>f. poly_deg (?q f * f) \\<le> b", "from assms(2) \\<open>F' \\<subseteq> F\\<close>"], ["proof (chain)\npicking this:\n  finite F\n  F' \\<subseteq> F", "have \"(\\<Sum>f\\<in>F'. q f * f) = (\\<Sum>f\\<in>F. q f * f)\""], ["proof (prove)\nusing this:\n  finite F\n  F' \\<subseteq> F\n\ngoal (1 subgoal):\n 1. (\\<Sum>f\\<in>F'. q f * f) = (\\<Sum>f\\<in>F. q f * f)", "proof (intro sum.mono_neutral_left ballI)"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F\n 3. \\<And>i.\n       \\<lbrakk>finite F; F' \\<subseteq> F; i \\<in> F - F'\\<rbrakk>\n       \\<Longrightarrow> q i * i = 0", "fix f"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F\n 3. \\<And>i.\n       \\<lbrakk>finite F; F' \\<subseteq> F; i \\<in> F - F'\\<rbrakk>\n       \\<Longrightarrow> q i * i = 0", "assume \"f \\<in> F - F'\""], ["proof (state)\nthis:\n  f \\<in> F - F'\n\ngoal (3 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F\n 3. \\<And>i.\n       \\<lbrakk>finite F; F' \\<subseteq> F; i \\<in> F - F'\\<rbrakk>\n       \\<Longrightarrow> q i * i = 0", "hence \"f \\<notin> F'\""], ["proof (prove)\nusing this:\n  f \\<in> F - F'\n\ngoal (1 subgoal):\n 1. f \\<notin> F'", "by simp"], ["proof (state)\nthis:\n  f \\<notin> F'\n\ngoal (3 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F\n 3. \\<And>i.\n       \\<lbrakk>finite F; F' \\<subseteq> F; i \\<in> F - F'\\<rbrakk>\n       \\<Longrightarrow> q i * i = 0", "hence \"q f = 0\""], ["proof (prove)\nusing this:\n  f \\<notin> F'\n\ngoal (1 subgoal):\n 1. q f = 0", "by (rule 2)"], ["proof (state)\nthis:\n  q f = 0\n\ngoal (3 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F\n 3. \\<And>i.\n       \\<lbrakk>finite F; F' \\<subseteq> F; i \\<in> F - F'\\<rbrakk>\n       \\<Longrightarrow> q i * i = 0", "thus \"q f * f = 0\""], ["proof (prove)\nusing this:\n  q f = 0\n\ngoal (1 subgoal):\n 1. q f * f = 0", "by simp"], ["proof (state)\nthis:\n  q f * f = 0\n\ngoal (2 subgoals):\n 1. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk> \\<Longrightarrow> finite F\n 2. \\<lbrakk>finite F; F' \\<subseteq> F\\<rbrakk>\n    \\<Longrightarrow> F' \\<subseteq> F", "qed"], ["proof (state)\nthis:\n  (\\<Sum>f\\<in>F'. q f * f) = (\\<Sum>f\\<in>F. q f * f)\n\ngoal (3 subgoals):\n 1. g = (\\<Sum>f\\<in>F. ?q f * f)\n 2. \\<And>f. ?q f \\<in> P[X]\n 3. \\<And>f. poly_deg (?q f * f) \\<le> b", "thus \"g = (\\<Sum>f\\<in>F. q f * f)\""], ["proof (prove)\nusing this:\n  (\\<Sum>f\\<in>F'. q f * f) = (\\<Sum>f\\<in>F. q f * f)\n\ngoal (1 subgoal):\n 1. g = (\\<Sum>f\\<in>F. q f * f)", "by (simp only: g)"], ["proof (state)\nthis:\n  g = (\\<Sum>f\\<in>F. q f * f)\n\ngoal (2 subgoals):\n 1. \\<And>f. q f \\<in> P[X]\n 2. \\<And>f. poly_deg (q f * f) \\<le> b", "qed fact+"], ["proof (state)\nthis:\n  \\<exists>q.\n     g = (\\<Sum>f\\<in>F. q f * f) \\<and>\n     (\\<forall>f. q f \\<in> P[X] \\<and> poly_deg (q f * f) \\<le> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  thesis\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma is_GB_cofactor_boundI_subset_zero:\n  assumes \"F \\<subseteq> {0}\"\n  shows \"is_GB_cofactor_bound F b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "using punit.is_Groebner_basis_empty"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis {}\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "proof (rule is_GB_cofactor_boundI)"], ["proof (state)\ngoal (3 subgoals):\n 1. ideal {} = ideal F\n 2. \\<Union> (indets ` {}) \\<subseteq> \\<Union> (indets ` F)\n 3. \\<And>g.\n       g \\<in> {} \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "from assms"], ["proof (chain)\npicking this:\n  F \\<subseteq> {0}", "show \"ideal {} = ideal F\""], ["proof (prove)\nusing this:\n  F \\<subseteq> {0}\n\ngoal (1 subgoal):\n 1. ideal {} = ideal F", "by (metis ideal.span_empty ideal_eq_zero_iff)"], ["proof (state)\nthis:\n  ideal {} = ideal F\n\ngoal (2 subgoals):\n 1. \\<Union> (indets ` {}) \\<subseteq> \\<Union> (indets ` F)\n 2. \\<And>g.\n       g \\<in> {} \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "qed simp_all"], ["", "lemma is_hom_GB_boundI:\n  \"(\\<And>g. (\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f) \\<Longrightarrow> g \\<in> punit.reduced_GB F \\<Longrightarrow> poly_deg g \\<le> b) \\<Longrightarrow> is_hom_GB_bound F b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f;\n         g \\<in> punit.reduced_GB F\\<rbrakk>\n        \\<Longrightarrow> poly_deg g \\<le> b) \\<Longrightarrow>\n    is_hom_GB_bound F b", "unfolding is_hom_GB_bound_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. (\\<And>g.\n        \\<lbrakk>\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f;\n         g \\<in> punit.reduced_GB F\\<rbrakk>\n        \\<Longrightarrow> poly_deg g \\<le> b) \\<Longrightarrow>\n    Ball F homogeneous \\<longrightarrow>\n    (\\<forall>g\\<in>punit.reduced_GB F. poly_deg g \\<le> b)", "by blast"], ["", "lemma is_hom_GB_boundD:\n  \"is_hom_GB_bound F b \\<Longrightarrow> (\\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f) \\<Longrightarrow> g \\<in> punit.reduced_GB F \\<Longrightarrow> poly_deg g \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>is_hom_GB_bound F b;\n     \\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f;\n     g \\<in> punit.reduced_GB F\\<rbrakk>\n    \\<Longrightarrow> poly_deg g \\<le> b", "unfolding is_hom_GB_bound_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<lbrakk>Ball F homogeneous \\<longrightarrow>\n             (\\<forall>g\\<in>punit.reduced_GB F. poly_deg g \\<le> b);\n     \\<And>f. f \\<in> F \\<Longrightarrow> homogeneous f;\n     g \\<in> punit.reduced_GB F\\<rbrakk>\n    \\<Longrightarrow> poly_deg g \\<le> b", "by blast"], ["", "text \\<open>The following is the main theorem in this theory. It shows that a bound for Gr\\\"obner bases of\n  homogenized input sets is always also a cofactor bound for the original input sets.\\<close>"], ["", "lemma (in extended_ord_pm_powerprod) hom_GB_bound_is_GB_cofactor_bound:\n  assumes \"finite X\" and \"F \\<subseteq> P[X]\" and \"extended_ord.is_hom_GB_bound (homogenize None ` extend_indets ` F) b\"\n  shows \"is_GB_cofactor_bound F b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "proof -"], ["proof (state)\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "let ?F = \"homogenize None ` extend_indets ` F\""], ["proof (state)\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "define Y where \"Y = \\<Union> (indets ` F)\""], ["proof (state)\nthis:\n  Y = \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "define G where \"G = restrict_indets ` (extended_ord.punit.reduced_GB ?F)\""], ["proof (state)\nthis:\n  G =\n  restrict_indets `\n  extended_ord.punit.reduced_GB (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "have \"Y \\<subseteq> X\""], ["proof (prove)\ngoal (1 subgoal):\n 1. Y \\<subseteq> X", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "fix x"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "assume \"x \\<in> Y\""], ["proof (state)\nthis:\n  x \\<in> Y\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "then"], ["proof (chain)\npicking this:\n  x \\<in> Y", "obtain f where \"f \\<in> F\" and \"x \\<in> indets f\""], ["proof (prove)\nusing this:\n  x \\<in> Y\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> F; x \\<in> indets f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding Y_def"], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> F; x \\<in> indets f\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  f \\<in> F\n  x \\<in> indets f\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "from this(1) assms(2)"], ["proof (chain)\npicking this:\n  f \\<in> F\n  F \\<subseteq> P[X]", "have \"f \\<in> P[X]\""], ["proof (prove)\nusing this:\n  f \\<in> F\n  F \\<subseteq> P[X]\n\ngoal (1 subgoal):\n 1. f \\<in> P[X]", ".."], ["proof (state)\nthis:\n  f \\<in> P[X]\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "hence \"indets f \\<subseteq> X\""], ["proof (prove)\nusing this:\n  f \\<in> P[X]\n\ngoal (1 subgoal):\n 1. indets f \\<subseteq> X", "by (rule PolysD)"], ["proof (state)\nthis:\n  indets f \\<subseteq> X\n\ngoal (1 subgoal):\n 1. \\<And>x. x \\<in> Y \\<Longrightarrow> x \\<in> X", "with \\<open>x \\<in> indets f\\<close>"], ["proof (chain)\npicking this:\n  x \\<in> indets f\n  indets f \\<subseteq> X", "show \"x \\<in> X\""], ["proof (prove)\nusing this:\n  x \\<in> indets f\n  indets f \\<subseteq> X\n\ngoal (1 subgoal):\n 1. x \\<in> X", ".."], ["proof (state)\nthis:\n  x \\<in> X\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  Y \\<subseteq> X\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "hence \"finite Y\""], ["proof (prove)\nusing this:\n  Y \\<subseteq> X\n\ngoal (1 subgoal):\n 1. finite Y", "using assms(1)"], ["proof (prove)\nusing this:\n  Y \\<subseteq> X\n  finite X\n\ngoal (1 subgoal):\n 1. finite Y", "by (rule finite_subset)"], ["proof (state)\nthis:\n  finite Y\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "moreover"], ["proof (state)\nthis:\n  finite Y\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "have \"F \\<subseteq> P[Y]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. F \\<subseteq> P[Y]", "by (auto simp: Y_def Polys_alt)"], ["proof (state)\nthis:\n  F \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "ultimately"], ["proof (chain)\npicking this:\n  finite Y\n  F \\<subseteq> P[Y]", "have \"punit.is_Groebner_basis G\" and \"ideal G = ideal F\" and \"G \\<subseteq> P[Y]\""], ["proof (prove)\nusing this:\n  finite Y\n  F \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. punit.is_Groebner_basis G &&& ideal G = ideal F &&& G \\<subseteq> P[Y]", "unfolding G_def"], ["proof (prove)\nusing this:\n  finite Y\n  F \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. punit.is_Groebner_basis\n     (restrict_indets `\n      extended_ord.punit.reduced_GB\n       (homogenize None ` extend_indets ` F)) &&&\n    ideal\n     (restrict_indets `\n      extended_ord.punit.reduced_GB (homogenize None ` extend_indets ` F)) =\n    ideal F &&&\n    restrict_indets `\n    extended_ord.punit.reduced_GB (homogenize None ` extend_indets ` F)\n    \\<subseteq> P[Y]", "by (rule restrict_indets_reduced_GB)+"], ["proof (state)\nthis:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n  G \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "from this(1, 2)"], ["proof (chain)\npicking this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F", "show ?thesis"], ["proof (prove)\nusing this:\n  punit.is_Groebner_basis G\n  ideal G = ideal F\n\ngoal (1 subgoal):\n 1. is_GB_cofactor_bound F b", "proof (rule is_GB_cofactor_boundI)"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n 2. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "from \\<open>G \\<subseteq> P[Y]\\<close>"], ["proof (chain)\npicking this:\n  G \\<subseteq> P[Y]", "show \"\\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\""], ["proof (prove)\nusing this:\n  G \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)", "by (auto simp: Y_def Polys_alt)"], ["proof (state)\nthis:\n  \\<Union> (indets ` G) \\<subseteq> \\<Union> (indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "fix g"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "assume \"g \\<in> G\""], ["proof (state)\nthis:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "then"], ["proof (chain)\npicking this:\n  g \\<in> G", "obtain g' where g': \"g' \\<in> extended_ord.punit.reduced_GB ?F\"\n      and g: \"g = restrict_indets g'\""], ["proof (prove)\nusing this:\n  g \\<in> G\n\ngoal (1 subgoal):\n 1. (\\<And>g'.\n        \\<lbrakk>g' \\<in> extended_ord.punit.reduced_GB\n                           (homogenize None ` extend_indets ` F);\n         g = restrict_indets g'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding G_def"], ["proof (prove)\nusing this:\n  g \\<in> restrict_indets `\n          extended_ord.punit.reduced_GB\n           (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. (\\<And>g'.\n        \\<lbrakk>g' \\<in> extended_ord.punit.reduced_GB\n                           (homogenize None ` extend_indets ` F);\n         g = restrict_indets g'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", ".."], ["proof (state)\nthis:\n  g' \\<in> extended_ord.punit.reduced_GB\n            (homogenize None ` extend_indets ` F)\n  g = restrict_indets g'\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "have \"f \\<in> ?F \\<Longrightarrow> homogeneous f\" for f"], ["proof (prove)\ngoal (1 subgoal):\n 1. f \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n    homogeneous f", "by (auto simp: homogeneous_homogenize)"], ["proof (state)\nthis:\n  ?f7 \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f7\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "with assms(3)"], ["proof (chain)\npicking this:\n  extended_ord.is_hom_GB_bound (homogenize None ` extend_indets ` F) b\n  ?f7 \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f7", "have \"poly_deg g' \\<le> b\""], ["proof (prove)\nusing this:\n  extended_ord.is_hom_GB_bound (homogenize None ` extend_indets ` F) b\n  ?f7 \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f7\n\ngoal (1 subgoal):\n 1. poly_deg g' \\<le> b", "using g'"], ["proof (prove)\nusing this:\n  extended_ord.is_hom_GB_bound (homogenize None ` extend_indets ` F) b\n  ?f7 \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f7\n  g' \\<in> extended_ord.punit.reduced_GB\n            (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. poly_deg g' \\<le> b", "by (rule extended_ord.is_hom_GB_boundD)"], ["proof (state)\nthis:\n  poly_deg g' \\<le> b\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "from g'"], ["proof (chain)\npicking this:\n  g' \\<in> extended_ord.punit.reduced_GB\n            (homogenize None ` extend_indets ` F)", "have \"g' \\<in> ideal (extended_ord.punit.reduced_GB ?F)\""], ["proof (prove)\nusing this:\n  g' \\<in> extended_ord.punit.reduced_GB\n            (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. g' \\<in> ideal\n              (extended_ord.punit.reduced_GB\n                (homogenize None ` extend_indets ` F))", "by (rule ideal.span_base)"], ["proof (state)\nthis:\n  g' \\<in> ideal\n            (extended_ord.punit.reduced_GB\n              (homogenize None ` extend_indets ` F))\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "also"], ["proof (state)\nthis:\n  g' \\<in> ideal\n            (extended_ord.punit.reduced_GB\n              (homogenize None ` extend_indets ` F))\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "have \"\\<dots> = ideal ?F\""], ["proof (prove)\ngoal (1 subgoal):\n 1. ideal\n     (extended_ord.punit.reduced_GB (homogenize None ` extend_indets ` F)) =\n    ideal (homogenize None ` extend_indets ` F)", "proof (rule extended_ord.reduced_GB_ideal_Polys)"], ["proof (state)\ngoal (2 subgoals):\n 1. finite ?X\n 2. homogenize None ` extend_indets ` F \\<subseteq> P[?X]", "from \\<open>finite Y\\<close>"], ["proof (chain)\npicking this:\n  finite Y", "show \"finite (insert None (Some ` Y))\""], ["proof (prove)\nusing this:\n  finite Y\n\ngoal (1 subgoal):\n 1. finite (insert None (Some ` Y))", "by simp"], ["proof (state)\nthis:\n  finite (insert None (Some ` Y))\n\ngoal (1 subgoal):\n 1. homogenize None ` extend_indets ` F\n    \\<subseteq> P[insert None (Some ` Y)]", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. homogenize None ` extend_indets ` F\n    \\<subseteq> P[insert None (Some ` Y)]", "show \"?F \\<subseteq> P[insert None (Some ` Y)]\""], ["proof (prove)\ngoal (1 subgoal):\n 1. homogenize None ` extend_indets ` F\n    \\<subseteq> P[insert None (Some ` Y)]", "proof"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "fix f0"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "assume \"f0 \\<in> ?F\""], ["proof (state)\nthis:\n  f0 \\<in> homogenize None ` extend_indets ` F\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "then"], ["proof (chain)\npicking this:\n  f0 \\<in> homogenize None ` extend_indets ` F", "obtain f where \"f \\<in> F\" and f0: \"f0 = homogenize None (extend_indets f)\""], ["proof (prove)\nusing this:\n  f0 \\<in> homogenize None ` extend_indets ` F\n\ngoal (1 subgoal):\n 1. (\\<And>f.\n        \\<lbrakk>f \\<in> F; f0 = homogenize None (extend_indets f)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by blast"], ["proof (state)\nthis:\n  f \\<in> F\n  f0 = homogenize None (extend_indets f)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "from this(1) \\<open>F \\<subseteq> P[Y]\\<close>"], ["proof (chain)\npicking this:\n  f \\<in> F\n  F \\<subseteq> P[Y]", "have \"f \\<in> P[Y]\""], ["proof (prove)\nusing this:\n  f \\<in> F\n  F \\<subseteq> P[Y]\n\ngoal (1 subgoal):\n 1. f \\<in> P[Y]", ".."], ["proof (state)\nthis:\n  f \\<in> P[Y]\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "hence \"extend_indets f \\<in> P[Some ` Y]\""], ["proof (prove)\nusing this:\n  f \\<in> P[Y]\n\ngoal (1 subgoal):\n 1. extend_indets f \\<in> P[Some ` Y]", "by (auto simp: indets_extend_indets Polys_alt)"], ["proof (state)\nthis:\n  extend_indets f \\<in> P[Some ` Y]\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       x \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n       x \\<in> P[insert None (Some ` Y)]", "thus \"f0 \\<in> P[insert None (Some ` Y)]\""], ["proof (prove)\nusing this:\n  extend_indets f \\<in> P[Some ` Y]\n\ngoal (1 subgoal):\n 1. f0 \\<in> P[insert None (Some ` Y)]", "unfolding f0"], ["proof (prove)\nusing this:\n  extend_indets f \\<in> P[Some ` Y]\n\ngoal (1 subgoal):\n 1. homogenize None (extend_indets f) \\<in> P[insert None (Some ` Y)]", "by (rule homogenize_in_Polys)"], ["proof (state)\nthis:\n  f0 \\<in> P[insert None (Some ` Y)]\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  homogenize None ` extend_indets ` F \\<subseteq> P[insert None (Some ` Y)]\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  ideal\n   (extended_ord.punit.reduced_GB (homogenize None ` extend_indets ` F)) =\n  ideal (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "finally"], ["proof (chain)\npicking this:\n  g' \\<in> ideal (homogenize None ` extend_indets ` F)", "have \"g' \\<in> ideal ?F\""], ["proof (prove)\nusing this:\n  g' \\<in> ideal (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. g' \\<in> ideal (homogenize None ` extend_indets ` F)", "."], ["proof (state)\nthis:\n  g' \\<in> ideal (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "with \\<open>\\<And>f. f \\<in> ?F \\<Longrightarrow> homogeneous f\\<close>"], ["proof (chain)\npicking this:\n  ?f \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f\n  g' \\<in> ideal (homogenize None ` extend_indets ` F)", "obtain F0 q where \"finite F0\" and \"F0 \\<subseteq> ?F\"\n      and g': \"g' = (\\<Sum>f\\<in>F0. q f * f)\" and deg_le: \"\\<And>f. poly_deg (q f * f) \\<le> poly_deg g'\""], ["proof (prove)\nusing this:\n  ?f \\<in> homogenize None ` extend_indets ` F \\<Longrightarrow>\n  homogeneous ?f\n  g' \\<in> ideal (homogenize None ` extend_indets ` F)\n\ngoal (1 subgoal):\n 1. (\\<And>F0 q.\n        \\<lbrakk>finite F0;\n         F0 \\<subseteq> homogenize None ` extend_indets ` F;\n         g' = (\\<Sum>f\\<in>F0. q f * f);\n         \\<And>f. poly_deg (q f * f) \\<le> poly_deg g'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule homogeneous_idealE) blast+"], ["proof (state)\nthis:\n  finite F0\n  F0 \\<subseteq> homogenize None ` extend_indets ` F\n  g' = (\\<Sum>f\\<in>F0. q f * f)\n  poly_deg (q ?f7 * ?f7) \\<le> poly_deg g'\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "from this(2)"], ["proof (chain)\npicking this:\n  F0 \\<subseteq> homogenize None ` extend_indets ` F", "obtain F' where \"F' \\<subseteq> F\" and F0: \"F0 = homogenize None ` extend_indets ` F'\"\n      and inj_on: \"inj_on (homogenize None \\<circ> extend_indets) F'\""], ["proof (prove)\nusing this:\n  F0 \\<subseteq> homogenize None ` extend_indets ` F\n\ngoal (1 subgoal):\n 1. (\\<And>F'.\n        \\<lbrakk>F' \\<subseteq> F;\n         F0 = homogenize None ` extend_indets ` F';\n         inj_on (homogenize None \\<circ> extend_indets) F'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding image_comp"], ["proof (prove)\nusing this:\n  F0 \\<subseteq> (homogenize None \\<circ> extend_indets) ` F\n\ngoal (1 subgoal):\n 1. (\\<And>F'.\n        \\<lbrakk>F' \\<subseteq> F;\n         F0 = (homogenize None \\<circ> extend_indets) ` F';\n         inj_on (homogenize None \\<circ> extend_indets) F'\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by (rule subset_imageE_inj)"], ["proof (state)\nthis:\n  F' \\<subseteq> F\n  F0 = homogenize None ` extend_indets ` F'\n  inj_on (homogenize None \\<circ> extend_indets) F'\n\ngoal (1 subgoal):\n 1. \\<And>g.\n       g \\<in> G \\<Longrightarrow>\n       \\<exists>F' q.\n          finite F' \\<and>\n          F' \\<subseteq> F \\<and>\n          g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n          (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "show \"\\<exists>F' q. finite F' \\<and> F' \\<subseteq> F \\<and> g = (\\<Sum>f\\<in>F'. q f * f) \\<and> (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<exists>F' q.\n       finite F' \\<and>\n       F' \\<subseteq> F \\<and>\n       g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n       (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)", "proof (intro exI conjI ballI)"], ["proof (state)\ngoal (4 subgoals):\n 1. finite ?F'\n 2. ?F' \\<subseteq> F\n 3. g = (\\<Sum>f\\<in>?F'. ?q1 f * f)\n 4. \\<And>f. f \\<in> ?F' \\<Longrightarrow> poly_deg (?q1 f * f) \\<le> b", "from inj_on \\<open>finite F0\\<close>"], ["proof (chain)\npicking this:\n  inj_on (homogenize None \\<circ> extend_indets) F'\n  finite F0", "show \"finite F'\""], ["proof (prove)\nusing this:\n  inj_on (homogenize None \\<circ> extend_indets) F'\n  finite F0\n\ngoal (1 subgoal):\n 1. finite F'", "by (simp only: finite_image_iff F0 image_comp)"], ["proof (state)\nthis:\n  finite F'\n\ngoal (3 subgoals):\n 1. F' \\<subseteq> F\n 2. g = (\\<Sum>f\\<in>F'. ?q1 f * f)\n 3. \\<And>f. f \\<in> F' \\<Longrightarrow> poly_deg (?q1 f * f) \\<le> b", "next"], ["proof (state)\ngoal (3 subgoals):\n 1. F' \\<subseteq> F\n 2. g = (\\<Sum>f\\<in>F'. ?q1 f * f)\n 3. \\<And>f. f \\<in> F' \\<Longrightarrow> poly_deg (?q1 f * f) \\<le> b", "from inj_on"], ["proof (chain)\npicking this:\n  inj_on (homogenize None \\<circ> extend_indets) F'", "show \"g = (\\<Sum>f\\<in>F'. (restrict_indets \\<circ> q \\<circ> homogenize None \\<circ> extend_indets) f * f)\""], ["proof (prove)\nusing this:\n  inj_on (homogenize None \\<circ> extend_indets) F'\n\ngoal (1 subgoal):\n 1. g =\n    (\\<Sum>f\\<in>F'.\n       (restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n        extend_indets)\n        f *\n       f)", "by (simp add: g g' F0 restrict_indets_sum restrict_indets_times sum.reindex image_comp o_def)"], ["proof (state)\nthis:\n  g =\n  (\\<Sum>f\\<in>F'.\n     (restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n      extend_indets)\n      f *\n     f)\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "next"], ["proof (state)\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "fix f"], ["proof (state)\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "assume \"f \\<in> F'\""], ["proof (state)\nthis:\n  f \\<in> F'\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "have \"poly_deg ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ> extend_indets) f * f) =\n              poly_deg (restrict_indets (q (homogenize None (extend_indets f)) * homogenize None (extend_indets f)))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg\n     ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n       extend_indets)\n       f *\n      f) =\n    poly_deg\n     (restrict_indets\n       (q (homogenize None (extend_indets f)) *\n        homogenize None (extend_indets f)))", "by (simp add: restrict_indets_times)"], ["proof (state)\nthis:\n  poly_deg\n   ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n     extend_indets)\n     f *\n    f) =\n  poly_deg\n   (restrict_indets\n     (q (homogenize None (extend_indets f)) *\n      homogenize None (extend_indets f)))\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg\n   ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n     extend_indets)\n     f *\n    f) =\n  poly_deg\n   (restrict_indets\n     (q (homogenize None (extend_indets f)) *\n      homogenize None (extend_indets f)))\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "have \"\\<dots> \\<le> poly_deg (q (homogenize None (extend_indets f)) * homogenize None (extend_indets f))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg\n     (restrict_indets\n       (q (homogenize None (extend_indets f)) *\n        homogenize None (extend_indets f)))\n    \\<le> poly_deg\n           (q (homogenize None (extend_indets f)) *\n            homogenize None (extend_indets f))", "by (rule poly_deg_restrict_indets_le)"], ["proof (state)\nthis:\n  poly_deg\n   (restrict_indets\n     (q (homogenize None (extend_indets f)) *\n      homogenize None (extend_indets f)))\n  \\<le> poly_deg\n         (q (homogenize None (extend_indets f)) *\n          homogenize None (extend_indets f))\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg\n   (restrict_indets\n     (q (homogenize None (extend_indets f)) *\n      homogenize None (extend_indets f)))\n  \\<le> poly_deg\n         (q (homogenize None (extend_indets f)) *\n          homogenize None (extend_indets f))\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "have \"\\<dots> \\<le> poly_deg g'\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg\n     (q (homogenize None (extend_indets f)) *\n      homogenize None (extend_indets f))\n    \\<le> poly_deg g'", "by (rule deg_le)"], ["proof (state)\nthis:\n  poly_deg\n   (q (homogenize None (extend_indets f)) *\n    homogenize None (extend_indets f))\n  \\<le> poly_deg g'\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "also"], ["proof (state)\nthis:\n  poly_deg\n   (q (homogenize None (extend_indets f)) *\n    homogenize None (extend_indets f))\n  \\<le> poly_deg g'\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "have \"\\<dots> \\<le> b\""], ["proof (prove)\ngoal (1 subgoal):\n 1. poly_deg g' \\<le> b", "by fact"], ["proof (state)\nthis:\n  poly_deg g' \\<le> b\n\ngoal (2 subgoals):\n 1. F' \\<subseteq> F\n 2. \\<And>f.\n       f \\<in> F' \\<Longrightarrow>\n       poly_deg\n        ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n          extend_indets)\n          f *\n         f)\n       \\<le> b", "finally"], ["proof (chain)\npicking this:\n  poly_deg\n   ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n     extend_indets)\n     f *\n    f)\n  \\<le> b", "show \"poly_deg ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ> extend_indets) f * f) \\<le> b\""], ["proof (prove)\nusing this:\n  poly_deg\n   ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n     extend_indets)\n     f *\n    f)\n  \\<le> b\n\ngoal (1 subgoal):\n 1. poly_deg\n     ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n       extend_indets)\n       f *\n      f)\n    \\<le> b", "."], ["proof (state)\nthis:\n  poly_deg\n   ((restrict_indets \\<circ> q \\<circ> homogenize None \\<circ>\n     extend_indets)\n     f *\n    f)\n  \\<le> b\n\ngoal (1 subgoal):\n 1. F' \\<subseteq> F", "qed fact"], ["proof (state)\nthis:\n  \\<exists>F' q.\n     finite F' \\<and>\n     F' \\<subseteq> F \\<and>\n     g = (\\<Sum>f\\<in>F'. q f * f) \\<and>\n     (\\<forall>f\\<in>F'. poly_deg (q f * f) \\<le> b)\n\ngoal:\nNo subgoals!", "qed"], ["proof (state)\nthis:\n  is_GB_cofactor_bound F b\n\ngoal:\nNo subgoals!", "qed"], ["", "end"], ["", "(* pm_powerprod *)"], ["", "end"], ["", "(* theory *)"]]}