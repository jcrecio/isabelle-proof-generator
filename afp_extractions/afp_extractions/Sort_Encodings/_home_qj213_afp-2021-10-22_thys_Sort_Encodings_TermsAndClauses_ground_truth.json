{"file_name": "/home/qj213/afp-2021-10-22/thys/Sort_Encodings/TermsAndClauses.thy", "working_directory": "/home/qj213/afp-2021-10-22/thys/Sort_Encodings", "problem_names": ["lemma trm_induct[case_names Var Fn, induct type: trm]:\nassumes \"\\<And> x. \\<phi> (Var x)\"\nand \"\\<And> f Tl. list_all \\<phi> Tl \\<Longrightarrow> \\<phi> (Fn f Tl)\"\nshows \"\\<phi> T\"", "lemma subst_cong:\nassumes \"\\<And> x. x \\<in> vars T \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"subst \\<pi>1 T = subst \\<pi>2 T\"", "lemma substA_congA:\nassumes \"\\<And> x. x \\<in> varsA at \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substA \\<pi>1 at = substA \\<pi>2 at\"", "lemma substL_congL:\nassumes \"\\<And> x. x \\<in> varsL l \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substL \\<pi>1 l = substL \\<pi>2 l\"", "lemma substC_congC:\nassumes \"\\<And> x. x \\<in> varsC c \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substC \\<pi>1 c = substC \\<pi>2 c\"", "lemma substPB_congPB:\nassumes \"\\<And> x. x \\<in> varsPB \\<Phi> \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substPB \\<pi>1 \\<Phi> = substPB \\<pi>2 \\<Phi>\"", "lemma vars_subst:\n\"vars (subst \\<pi> T) = (\\<Union> x \\<in> vars T. vars (\\<pi> x))\"", "lemma varsA_substA:\n\"varsA (substA \\<pi> at) = (\\<Union> x \\<in> varsA at. vars (\\<pi> x))\"", "lemma varsL_substL:\n\"varsL (substL \\<pi> l) = (\\<Union> x \\<in> varsL l. vars (\\<pi> x))\"", "lemma varsC_substC:\n\"varsC (substC \\<pi> c) = (\\<Union> x \\<in> varsC c. vars (\\<pi> x))\"", "lemma varsPB_Un[simp]: \"varsPB (\\<Phi>1 \\<union> \\<Phi>2) = varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\"", "lemma varsC_append[simp]: \"varsC (c1 @ c2) = varsC c1 \\<union> varsC c2\"", "lemma varsPB_sappend_incl[simp]:\n\"varsPB (\\<Phi>1 @@ \\<Phi>2) \\<subseteq>  varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\"", "lemma varsPB_sappend[simp]:\nassumes 1: \"\\<Phi>1 \\<noteq> {}\" and 2: \"\\<Phi>2 \\<noteq> {}\"\nshows \"varsPB (\\<Phi>1 @@ \\<Phi>2) = varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\"", "lemma varsPB_substPB:\n\"varsPB (substPB \\<pi> \\<Phi>) = (\\<Union> x \\<in> varsPB \\<Phi>. vars (\\<pi> x))\" (is \"_ = ?K\")", "lemma subst_o:\n\"subst (subst \\<pi>1 o \\<pi>2) T = subst \\<pi>1 (subst \\<pi>2 T)\"", "lemma o_subst:\n\"subst \\<pi>1 o subst \\<pi>2 = subst (subst \\<pi>1 o \\<pi>2)\"", "lemma substA_o:\n\"substA (subst \\<pi>1 o \\<pi>2) at = substA \\<pi>1 (substA \\<pi>2 at)\"", "lemma o_substA:\n\"substA \\<pi>1 o substA \\<pi>2 = substA (subst \\<pi>1 o \\<pi>2)\"", "lemma substL_o:\n\"substL (subst \\<pi>1 o \\<pi>2) l = substL \\<pi>1 (substL \\<pi>2 l)\"", "lemma o_substL:\n\"substL \\<pi>1 o substL \\<pi>2 = substL (subst \\<pi>1 o \\<pi>2)\"", "lemma substC_o:\n\"substC (subst \\<pi>1 o \\<pi>2) c = substC \\<pi>1 (substC \\<pi>2 c)\"", "lemma o_substC:\n\"substC \\<pi>1 o substC \\<pi>2 = substC (subst \\<pi>1 o \\<pi>2)\"", "lemma substPB_o:\n\"substPB (subst \\<pi>1 o \\<pi>2) \\<Phi> = substPB \\<pi>1 (substPB \\<pi>2 \\<Phi>)\"", "lemma o_substPB:\n\"substPB \\<pi>1 o substPB \\<pi>2 = substPB (subst \\<pi>1 o \\<pi>2)\"", "lemma finite_vars: \"finite (vars T)\"", "lemma finite_varsA: \"finite (varsA at)\"", "lemma finite_varsL: \"finite (varsL l)\"", "lemma finite_varsC: \"finite (varsC c)\"", "lemma finite_varsPB: \"finite \\<Phi> \\<Longrightarrow> finite (varsPB \\<Phi>)\""], "translations": [["", "lemma trm_induct[case_names Var Fn, induct type: trm]:\nassumes \"\\<And> x. \\<phi> (Var x)\"\nand \"\\<And> f Tl. list_all \\<phi> Tl \\<Longrightarrow> \\<phi> (Fn f Tl)\"\nshows \"\\<phi> T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<phi> T", "using assms"], ["proof (prove)\nusing this:\n  \\<phi> (Var ?x)\n  list_all \\<phi> ?Tl \\<Longrightarrow> \\<phi> (Fn ?f ?Tl)\n\ngoal (1 subgoal):\n 1. \\<phi> T", "unfolding list_all_iff"], ["proof (prove)\nusing this:\n  \\<phi> (Var ?x)\n  Ball (set ?Tl) \\<phi> \\<Longrightarrow> \\<phi> (Fn ?f ?Tl)\n\ngoal (1 subgoal):\n 1. \\<phi> T", "by (rule trm.induct) metis"], ["", "fun vars where\n\"vars (Var x) = {x}\"\n|\n\"vars (Fn f Tl) = \\<Union> (vars ` (set Tl))\""], ["", "fun varsA where\n\"varsA (Eq T1 T2) = vars T1 \\<union> vars T2\"\n|\n\"varsA (Pr p Tl) = \\<Union> (set (map vars Tl))\""], ["", "fun varsL where\n\"varsL (Pos at) = varsA at\"\n|\n\"varsL (Neg at) = varsA at\""], ["", "definition \"varsC c = \\<Union> (set (map varsL c))\""], ["", "definition \"varsPB \\<Phi> = \\<Union> {varsC c | c. c \\<in> \\<Phi>}\""], ["", "text\\<open>Substitution:\\<close>"], ["", "fun subst where\n\"subst \\<pi> (Var x) = \\<pi> x\"\n|\n\"subst \\<pi> (Fn f Tl) = Fn f (map (subst \\<pi>) Tl)\""], ["", "fun substA where\n\"substA \\<pi> (Eq T1 T2) = Eq (subst \\<pi> T1) (subst \\<pi> T2)\"\n|\n\"substA \\<pi> (Pr p Tl) = Pr p (map (subst \\<pi>) Tl)\""], ["", "fun substL where\n\"substL \\<pi> (Pos at) = Pos (substA \\<pi> at)\"\n|\n\"substL \\<pi> (Neg at) = Neg (substA \\<pi> at)\""], ["", "definition \"substC \\<pi> c = map (substL \\<pi>) c\""], ["", "definition \"substPB \\<pi> \\<Phi> = {substC \\<pi> c | c. c \\<in> \\<Phi>}\""], ["", "lemma subst_cong:\nassumes \"\\<And> x. x \\<in> vars T \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"subst \\<pi>1 T = subst \\<pi>2 T\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst \\<pi>1 T = subst \\<pi>2 T", "using assms"], ["proof (prove)\nusing this:\n  ?x \\<in> vars T \\<Longrightarrow> \\<pi>1 ?x = \\<pi>2 ?x\n\ngoal (1 subgoal):\n 1. subst \\<pi>1 T = subst \\<pi>2 T", "by (induct T, auto simp add: list_all_iff)"], ["", "lemma substA_congA:\nassumes \"\\<And> x. x \\<in> varsA at \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substA \\<pi>1 at = substA \\<pi>2 at\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substA \\<pi>1 at = substA \\<pi>2 at", "using assms subst_cong[of _ \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  ?x \\<in> varsA at \\<Longrightarrow> \\<pi>1 ?x = \\<pi>2 ?x\n  (\\<And>x.\n      x \\<in> vars ?T \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  subst \\<pi>1 ?T = subst \\<pi>2 ?T\n\ngoal (1 subgoal):\n 1. substA \\<pi>1 at = substA \\<pi>2 at", "by (cases at, fastforce+)"], ["", "lemma substL_congL:\nassumes \"\\<And> x. x \\<in> varsL l \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substL \\<pi>1 l = substL \\<pi>2 l\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substL \\<pi>1 l = substL \\<pi>2 l", "using assms substA_congA[of _ \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  ?x \\<in> varsL l \\<Longrightarrow> \\<pi>1 ?x = \\<pi>2 ?x\n  (\\<And>x.\n      x \\<in> varsA ?at \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  substA \\<pi>1 ?at = substA \\<pi>2 ?at\n\ngoal (1 subgoal):\n 1. substL \\<pi>1 l = substL \\<pi>2 l", "by (cases l, auto)"], ["", "lemma substC_congC:\nassumes \"\\<And> x. x \\<in> varsC c \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substC \\<pi>1 c = substC \\<pi>2 c\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substC \\<pi>1 c = substC \\<pi>2 c", "using substL_congL[of _ \\<pi>1 \\<pi>2] assms"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> varsL ?l \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  substL \\<pi>1 ?l = substL \\<pi>2 ?l\n  ?x \\<in> varsC c \\<Longrightarrow> \\<pi>1 ?x = \\<pi>2 ?x\n\ngoal (1 subgoal):\n 1. substC \\<pi>1 c = substC \\<pi>2 c", "unfolding substC_def varsC_def"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> varsL ?l \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  substL \\<pi>1 ?l = substL \\<pi>2 ?l\n  ?x \\<in> \\<Union> (set (map varsL c)) \\<Longrightarrow>\n  \\<pi>1 ?x = \\<pi>2 ?x\n\ngoal (1 subgoal):\n 1. map (substL \\<pi>1) c = map (substL \\<pi>2) c", "by (induct c, auto)"], ["", "lemma substPB_congPB:\nassumes \"\\<And> x. x \\<in> varsPB \\<Phi> \\<Longrightarrow> \\<pi>1 x = \\<pi>2 x\"\nshows \"substPB \\<pi>1 \\<Phi> = substPB \\<pi>2 \\<Phi>\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substPB \\<pi>1 \\<Phi> = substPB \\<pi>2 \\<Phi>", "using substC_congC[of _ \\<pi>1 \\<pi>2] assms"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> varsC ?c \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  substC \\<pi>1 ?c = substC \\<pi>2 ?c\n  ?x \\<in> varsPB \\<Phi> \\<Longrightarrow> \\<pi>1 ?x = \\<pi>2 ?x\n\ngoal (1 subgoal):\n 1. substPB \\<pi>1 \\<Phi> = substPB \\<pi>2 \\<Phi>", "unfolding substPB_def varsPB_def"], ["proof (prove)\nusing this:\n  (\\<And>x.\n      x \\<in> varsC ?c \\<Longrightarrow>\n      \\<pi>1 x = \\<pi>2 x) \\<Longrightarrow>\n  substC \\<pi>1 ?c = substC \\<pi>2 ?c\n  ?x \\<in> \\<Union> {varsC c |c. c \\<in> \\<Phi>} \\<Longrightarrow>\n  \\<pi>1 ?x = \\<pi>2 ?x\n\ngoal (1 subgoal):\n 1. {substC \\<pi>1 c |c. c \\<in> \\<Phi>} =\n    {substC \\<pi>2 c |c. c \\<in> \\<Phi>}", "by simp_all (metis (lifting) substC_congC)"], ["", "lemma vars_subst:\n\"vars (subst \\<pi> T) = (\\<Union> x \\<in> vars T. vars (\\<pi> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. vars (subst \\<pi> T) = (\\<Union>x\\<in>vars T. vars (\\<pi> x))", "by (induct T) (auto simp add: list_all_iff)"], ["", "lemma varsA_substA:\n\"varsA (substA \\<pi> at) = (\\<Union> x \\<in> varsA at. vars (\\<pi> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsA (substA \\<pi> at) = (\\<Union>x\\<in>varsA at. vars (\\<pi> x))", "using vars_subst[of \\<pi>]"], ["proof (prove)\nusing this:\n  vars (subst \\<pi> ?T) = (\\<Union>x\\<in>vars ?T. vars (\\<pi> x))\n\ngoal (1 subgoal):\n 1. varsA (substA \\<pi> at) = (\\<Union>x\\<in>varsA at. vars (\\<pi> x))", "by (cases at, auto)"], ["", "lemma varsL_substL:\n\"varsL (substL \\<pi> l) = (\\<Union> x \\<in> varsL l. vars (\\<pi> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsL (substL \\<pi> l) = (\\<Union>x\\<in>varsL l. vars (\\<pi> x))", "using varsA_substA[of \\<pi>]"], ["proof (prove)\nusing this:\n  varsA (substA \\<pi> ?at) = (\\<Union>x\\<in>varsA ?at. vars (\\<pi> x))\n\ngoal (1 subgoal):\n 1. varsL (substL \\<pi> l) = (\\<Union>x\\<in>varsL l. vars (\\<pi> x))", "by (cases l, auto)"], ["", "lemma varsC_substC:\n\"varsC (substC \\<pi> c) = (\\<Union> x \\<in> varsC c. vars (\\<pi> x))\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsC (substC \\<pi> c) = (\\<Union>x\\<in>varsC c. vars (\\<pi> x))", "apply(induct c)"], ["proof (prove)\ngoal (2 subgoals):\n 1. varsC (substC \\<pi> []) = (\\<Union>x\\<in>varsC []. vars (\\<pi> x))\n 2. \\<And>a c.\n       varsC (substC \\<pi> c) =\n       (\\<Union>x\\<in>varsC c. vars (\\<pi> x)) \\<Longrightarrow>\n       varsC (substC \\<pi> (a # c)) =\n       (\\<Union>x\\<in>varsC (a # c). vars (\\<pi> x))", "unfolding substC_def varsC_def"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<Union> (set (map varsL (map (substL \\<pi>) []))) =\n    (\\<Union>x\\<in>\\<Union> (set (map varsL [])). vars (\\<pi> x))\n 2. \\<And>a c.\n       \\<Union> (set (map varsL (map (substL \\<pi>) c))) =\n       (\\<Union>x\\<in>\\<Union> (set (map varsL c)).\n           vars (\\<pi> x)) \\<Longrightarrow>\n       \\<Union> (set (map varsL (map (substL \\<pi>) (a # c)))) =\n       (\\<Union>x\\<in>\\<Union> (set (map varsL (a # c))). vars (\\<pi> x))", "apply fastforce"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a c.\n       \\<Union> (set (map varsL (map (substL \\<pi>) c))) =\n       (\\<Union>x\\<in>\\<Union> (set (map varsL c)).\n           vars (\\<pi> x)) \\<Longrightarrow>\n       \\<Union> (set (map varsL (map (substL \\<pi>) (a # c)))) =\n       (\\<Union>x\\<in>\\<Union> (set (map varsL (a # c))). vars (\\<pi> x))", "unfolding substC_def varsC_def map_map set_map"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a c.\n       \\<Union> ((varsL \\<circ> substL \\<pi>) ` set c) =\n       (\\<Union>x\\<in>\\<Union> (varsL ` set c).\n           vars (\\<pi> x)) \\<Longrightarrow>\n       \\<Union> ((varsL \\<circ> substL \\<pi>) ` set (a # c)) =\n       (\\<Union>x\\<in>\\<Union> (varsL ` set (a # c)). vars (\\<pi> x))", "unfolding comp_def varsL_substL"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>a c.\n       (\\<Union>x\\<in>set c. \\<Union>x\\<in>varsL x. vars (\\<pi> x)) =\n       (\\<Union>x\\<in>\\<Union> (varsL ` set c).\n           vars (\\<pi> x)) \\<Longrightarrow>\n       (\\<Union>x\\<in>set (a # c). \\<Union>x\\<in>varsL x. vars (\\<pi> x)) =\n       (\\<Union>x\\<in>\\<Union> (varsL ` set (a # c)). vars (\\<pi> x))", "by blast"], ["", "lemma varsPB_Un[simp]: \"varsPB (\\<Phi>1 \\<union> \\<Phi>2) = varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsPB (\\<Phi>1 \\<union> \\<Phi>2) =\n    varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2", "unfolding varsPB_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> {varsC c |c. c \\<in> \\<Phi>1 \\<union> \\<Phi>2} =\n    \\<Union> {varsC c |c. c \\<in> \\<Phi>1} \\<union>\n    \\<Union> {varsC c |c. c \\<in> \\<Phi>2}", "by auto"], ["", "lemma varsC_append[simp]: \"varsC (c1 @ c2) = varsC c1 \\<union> varsC c2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsC (c1 @ c2) = varsC c1 \\<union> varsC c2", "unfolding varsC_def"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<Union> (set (map varsL (c1 @ c2))) =\n    \\<Union> (set (map varsL c1)) \\<union> \\<Union> (set (map varsL c2))", "by auto"], ["", "lemma varsPB_sappend_incl[simp]:\n\"varsPB (\\<Phi>1 @@ \\<Phi>2) \\<subseteq>  varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsPB (\\<Phi>1 @@ \\<Phi>2)\n    \\<subseteq> varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2", "by (unfold varsPB_def sappend_def, fastforce)"], ["", "lemma varsPB_sappend[simp]:\nassumes 1: \"\\<Phi>1 \\<noteq> {}\" and 2: \"\\<Phi>2 \\<noteq> {}\"\nshows \"varsPB (\\<Phi>1 @@ \\<Phi>2) = varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2\""], ["proof (prove)\ngoal (1 subgoal):\n 1. varsPB (\\<Phi>1 @@ \\<Phi>2) = varsPB \\<Phi>1 \\<union> varsPB \\<Phi>2", "proof safe"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n 3. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "fix x"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n 3. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "{"], ["proof (state)\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n 3. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "assume \"x \\<in> varsPB \\<Phi>1\""], ["proof (state)\nthis:\n  x \\<in> varsPB \\<Phi>1\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n 3. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "then"], ["proof (chain)\npicking this:\n  x \\<in> varsPB \\<Phi>1", "obtain c1 c2 where \"x \\<in> varsC c1\" and \"c1 \\<in> \\<Phi>1\" and \"c2 \\<in> \\<Phi>2\""], ["proof (prove)\nusing this:\n  x \\<in> varsPB \\<Phi>1\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2.\n        \\<lbrakk>x \\<in> varsC c1; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 2"], ["proof (prove)\nusing this:\n  x \\<in> varsPB \\<Phi>1\n  \\<Phi>2 \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2.\n        \\<lbrakk>x \\<in> varsC c1; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding varsPB_def"], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> {varsC c |c. c \\<in> \\<Phi>1}\n  \\<Phi>2 \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>c1 c2.\n        \\<lbrakk>x \\<in> varsC c1; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> varsC c1\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (3 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n 3. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "thus \"x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\""], ["proof (prove)\nusing this:\n  x \\<in> varsC c1\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (1 subgoal):\n 1. x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "unfolding sappend_def varsPB_def"], ["proof (prove)\nusing this:\n  x \\<in> varsC c1\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union>\n             {varsC c |c.\n              c \\<in> {al @ bl |al bl.\n                       al \\<in> \\<Phi>1 \\<and> bl \\<in> \\<Phi>2}}", "by fastforce"], ["proof (state)\nthis:\n  x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "}"], ["proof (state)\nthis:\n  x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n  x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "{"], ["proof (state)\nthis:\n  x \\<in> varsPB \\<Phi>1 \\<Longrightarrow>\n  x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "assume \"x \\<in> varsPB \\<Phi>2\""], ["proof (state)\nthis:\n  x \\<in> varsPB \\<Phi>2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "then"], ["proof (chain)\npicking this:\n  x \\<in> varsPB \\<Phi>2", "obtain c1 c2 where \"x \\<in> varsC c2\" and \"c1 \\<in> \\<Phi>1\" and \"c2 \\<in> \\<Phi>2\""], ["proof (prove)\nusing this:\n  x \\<in> varsPB \\<Phi>2\n\ngoal (1 subgoal):\n 1. (\\<And>c2 c1.\n        \\<lbrakk>x \\<in> varsC c2; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "using 1"], ["proof (prove)\nusing this:\n  x \\<in> varsPB \\<Phi>2\n  \\<Phi>1 \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>c2 c1.\n        \\<lbrakk>x \\<in> varsC c2; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding varsPB_def"], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> {varsC c |c. c \\<in> \\<Phi>2}\n  \\<Phi>1 \\<noteq> {}\n\ngoal (1 subgoal):\n 1. (\\<And>c2 c1.\n        \\<lbrakk>x \\<in> varsC c2; c1 \\<in> \\<Phi>1;\n         c2 \\<in> \\<Phi>2\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  x \\<in> varsC c2\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1\n 2. \\<And>x.\n       x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n       x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "thus \"x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\""], ["proof (prove)\nusing this:\n  x \\<in> varsC c2\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (1 subgoal):\n 1. x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)", "unfolding sappend_def varsPB_def"], ["proof (prove)\nusing this:\n  x \\<in> varsC c2\n  c1 \\<in> \\<Phi>1\n  c2 \\<in> \\<Phi>2\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union>\n             {varsC c |c.\n              c \\<in> {al @ bl |al bl.\n                       al \\<in> \\<Phi>1 \\<and> bl \\<in> \\<Phi>2}}", "by fastforce"], ["proof (state)\nthis:\n  x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1", "}"], ["proof (state)\nthis:\n  x \\<in> varsPB \\<Phi>2 \\<Longrightarrow>\n  x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2)\n\ngoal (1 subgoal):\n 1. \\<And>x.\n       \\<lbrakk>x \\<in> varsPB (\\<Phi>1 @@ \\<Phi>2);\n        x \\<notin> varsPB \\<Phi>2\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB \\<Phi>1", "qed(unfold varsPB_def sappend_def, fastforce)"], ["", "lemma varsPB_substPB:\n\"varsPB (substPB \\<pi> \\<Phi>) = (\\<Union> x \\<in> varsPB \\<Phi>. vars (\\<pi> x))\" (is \"_ = ?K\")"], ["proof (prove)\ngoal (1 subgoal):\n 1. varsPB (substPB \\<pi> \\<Phi>) =\n    (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))", "proof safe"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> varsPB (substPB \\<pi> \\<Phi>) \\<Longrightarrow>\n       x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))\n 2. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "fix x"], ["proof (state)\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> varsPB (substPB \\<pi> \\<Phi>) \\<Longrightarrow>\n       x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))\n 2. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "assume \"x \\<in> varsPB (substPB \\<pi> \\<Phi>)\""], ["proof (state)\nthis:\n  x \\<in> varsPB (substPB \\<pi> \\<Phi>)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> varsPB (substPB \\<pi> \\<Phi>) \\<Longrightarrow>\n       x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))\n 2. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "then"], ["proof (chain)\npicking this:\n  x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "obtain c where \"c \\<in> \\<Phi>\" and \"x \\<in> varsC (substC \\<pi> c)\""], ["proof (prove)\nusing this:\n  x \\<in> varsPB (substPB \\<pi> \\<Phi>)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<in> \\<Phi>; x \\<in> varsC (substC \\<pi> c)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding varsPB_def substPB_def"], ["proof (prove)\nusing this:\n  x \\<in> \\<Union> {varsC c |c. c \\<in> {substC \\<pi> c |c. c \\<in> \\<Phi>}}\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<in> \\<Phi>; x \\<in> varsC (substC \\<pi> c)\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  c \\<in> \\<Phi>\n  x \\<in> varsC (substC \\<pi> c)\n\ngoal (2 subgoals):\n 1. \\<And>x.\n       x \\<in> varsPB (substPB \\<pi> \\<Phi>) \\<Longrightarrow>\n       x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))\n 2. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "thus \"x \\<in> ?K\""], ["proof (prove)\nusing this:\n  c \\<in> \\<Phi>\n  x \\<in> varsC (substC \\<pi> c)\n\ngoal (1 subgoal):\n 1. x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))", "unfolding varsC_substC varsPB_def"], ["proof (prove)\nusing this:\n  c \\<in> \\<Phi>\n  x \\<in> (\\<Union>x\\<in>varsC c. vars (\\<pi> x))\n\ngoal (1 subgoal):\n 1. x \\<in> (\\<Union>x\\<in>\\<Union> {varsC c |c. c \\<in> \\<Phi>}.\n                vars (\\<pi> x))", "by auto"], ["proof (state)\nthis:\n  x \\<in> (\\<Union>x\\<in>varsPB \\<Phi>. vars (\\<pi> x))\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "next"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "fix x y"], ["proof (state)\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "assume \"y \\<in> varsPB \\<Phi>\" and x: \"x \\<in> vars (\\<pi> y)\""], ["proof (state)\nthis:\n  y \\<in> varsPB \\<Phi>\n  x \\<in> vars (\\<pi> y)\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "then"], ["proof (chain)\npicking this:\n  y \\<in> varsPB \\<Phi>\n  x \\<in> vars (\\<pi> y)", "obtain c where c: \"c \\<in> \\<Phi>\" and \"y \\<in> varsC c\""], ["proof (prove)\nusing this:\n  y \\<in> varsPB \\<Phi>\n  x \\<in> vars (\\<pi> y)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<in> \\<Phi>; y \\<in> varsC c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "unfolding varsPB_def"], ["proof (prove)\nusing this:\n  y \\<in> \\<Union> {varsC c |c. c \\<in> \\<Phi>}\n  x \\<in> vars (\\<pi> y)\n\ngoal (1 subgoal):\n 1. (\\<And>c.\n        \\<lbrakk>c \\<in> \\<Phi>; y \\<in> varsC c\\<rbrakk>\n        \\<Longrightarrow> thesis) \\<Longrightarrow>\n    thesis", "by auto"], ["proof (state)\nthis:\n  c \\<in> \\<Phi>\n  y \\<in> varsC c\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "hence \"x \\<in> varsC (substC \\<pi> c)\""], ["proof (prove)\nusing this:\n  c \\<in> \\<Phi>\n  y \\<in> varsC c\n\ngoal (1 subgoal):\n 1. x \\<in> varsC (substC \\<pi> c)", "using x"], ["proof (prove)\nusing this:\n  c \\<in> \\<Phi>\n  y \\<in> varsC c\n  x \\<in> vars (\\<pi> y)\n\ngoal (1 subgoal):\n 1. x \\<in> varsC (substC \\<pi> c)", "unfolding varsC_substC"], ["proof (prove)\nusing this:\n  c \\<in> \\<Phi>\n  y \\<in> varsC c\n  x \\<in> vars (\\<pi> y)\n\ngoal (1 subgoal):\n 1. x \\<in> (\\<Union>x\\<in>varsC c. vars (\\<pi> x))", "by auto"], ["proof (state)\nthis:\n  x \\<in> varsC (substC \\<pi> c)\n\ngoal (1 subgoal):\n 1. \\<And>x xa.\n       \\<lbrakk>xa \\<in> varsPB \\<Phi>; x \\<in> vars (\\<pi> xa)\\<rbrakk>\n       \\<Longrightarrow> x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "thus \"x \\<in> varsPB (substPB \\<pi> \\<Phi>)\""], ["proof (prove)\nusing this:\n  x \\<in> varsC (substC \\<pi> c)\n\ngoal (1 subgoal):\n 1. x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "using c"], ["proof (prove)\nusing this:\n  x \\<in> varsC (substC \\<pi> c)\n  c \\<in> \\<Phi>\n\ngoal (1 subgoal):\n 1. x \\<in> varsPB (substPB \\<pi> \\<Phi>)", "unfolding varsPB_def substPB_def"], ["proof (prove)\nusing this:\n  x \\<in> varsC (substC \\<pi> c)\n  c \\<in> \\<Phi>\n\ngoal (1 subgoal):\n 1. x \\<in> \\<Union>\n             {varsC c |c. c \\<in> {substC \\<pi> c |c. c \\<in> \\<Phi>}}", "by auto"], ["proof (state)\nthis:\n  x \\<in> varsPB (substPB \\<pi> \\<Phi>)\n\ngoal:\nNo subgoals!", "qed"], ["", "lemma subst_o:\n\"subst (subst \\<pi>1 o \\<pi>2) T = subst \\<pi>1 (subst \\<pi>2 T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst (subst \\<pi>1 \\<circ> \\<pi>2) T = subst \\<pi>1 (subst \\<pi>2 T)", "apply(induct T)"], ["proof (prove)\ngoal (2 subgoals):\n 1. \\<And>x.\n       subst (subst \\<pi>1 \\<circ> \\<pi>2) (Var x) =\n       subst \\<pi>1 (subst \\<pi>2 (Var x))\n 2. \\<And>f Tl.\n       list_all\n        (\\<lambda>a.\n            subst (subst \\<pi>1 \\<circ> \\<pi>2) a =\n            subst \\<pi>1 (subst \\<pi>2 a))\n        Tl \\<Longrightarrow>\n       subst (subst \\<pi>1 \\<circ> \\<pi>2) (Fn f Tl) =\n       subst \\<pi>1 (subst \\<pi>2 (Fn f Tl))", "by (auto simp add: list_all_iff)"], ["", "lemma o_subst:\n\"subst \\<pi>1 o subst \\<pi>2 = subst (subst \\<pi>1 o \\<pi>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. subst \\<pi>1 \\<circ> subst \\<pi>2 = subst (subst \\<pi>1 \\<circ> \\<pi>2)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (subst \\<pi>1 \\<circ> subst \\<pi>2) x =\n       subst (subst \\<pi>1 \\<circ> \\<pi>2) x", "apply(subst comp_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       subst \\<pi>1 (subst \\<pi>2 x) = subst (subst \\<pi>1 \\<circ> \\<pi>2) x", "unfolding subst_o[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       subst (subst \\<pi>1 \\<circ> \\<pi>2) x =\n       subst (subst \\<pi>1 \\<circ> \\<pi>2) x", ".."], ["", "lemma substA_o:\n\"substA (subst \\<pi>1 o \\<pi>2) at = substA \\<pi>1 (substA \\<pi>2 at)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substA (subst \\<pi>1 \\<circ> \\<pi>2) at =\n    substA \\<pi>1 (substA \\<pi>2 at)", "using subst_o[of \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  subst (subst \\<pi>1 \\<circ> \\<pi>2) ?T = subst \\<pi>1 (subst \\<pi>2 ?T)\n\ngoal (1 subgoal):\n 1. substA (subst \\<pi>1 \\<circ> \\<pi>2) at =\n    substA \\<pi>1 (substA \\<pi>2 at)", "by (cases at, auto)"], ["", "lemma o_substA:\n\"substA \\<pi>1 o substA \\<pi>2 = substA (subst \\<pi>1 o \\<pi>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substA \\<pi>1 \\<circ> substA \\<pi>2 =\n    substA (subst \\<pi>1 \\<circ> \\<pi>2)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (substA \\<pi>1 \\<circ> substA \\<pi>2) x =\n       substA (subst \\<pi>1 \\<circ> \\<pi>2) x", "apply(subst comp_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substA \\<pi>1 (substA \\<pi>2 x) =\n       substA (subst \\<pi>1 \\<circ> \\<pi>2) x", "unfolding substA_o[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substA (subst \\<pi>1 \\<circ> \\<pi>2) x =\n       substA (subst \\<pi>1 \\<circ> \\<pi>2) x", ".."], ["", "lemma substL_o:\n\"substL (subst \\<pi>1 o \\<pi>2) l = substL \\<pi>1 (substL \\<pi>2 l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substL (subst \\<pi>1 \\<circ> \\<pi>2) l = substL \\<pi>1 (substL \\<pi>2 l)", "using substA_o[of \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  substA (subst \\<pi>1 \\<circ> \\<pi>2) ?at =\n  substA \\<pi>1 (substA \\<pi>2 ?at)\n\ngoal (1 subgoal):\n 1. substL (subst \\<pi>1 \\<circ> \\<pi>2) l = substL \\<pi>1 (substL \\<pi>2 l)", "by (cases l, auto)"], ["", "lemma o_substL:\n\"substL \\<pi>1 o substL \\<pi>2 = substL (subst \\<pi>1 o \\<pi>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substL \\<pi>1 \\<circ> substL \\<pi>2 =\n    substL (subst \\<pi>1 \\<circ> \\<pi>2)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (substL \\<pi>1 \\<circ> substL \\<pi>2) x =\n       substL (subst \\<pi>1 \\<circ> \\<pi>2) x", "apply(subst comp_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substL \\<pi>1 (substL \\<pi>2 x) =\n       substL (subst \\<pi>1 \\<circ> \\<pi>2) x", "unfolding substL_o[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substL (subst \\<pi>1 \\<circ> \\<pi>2) x =\n       substL (subst \\<pi>1 \\<circ> \\<pi>2) x", ".."], ["", "lemma substC_o:\n\"substC (subst \\<pi>1 o \\<pi>2) c = substC \\<pi>1 (substC \\<pi>2 c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substC (subst \\<pi>1 \\<circ> \\<pi>2) c = substC \\<pi>1 (substC \\<pi>2 c)", "using substL_o[of \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  substL (subst \\<pi>1 \\<circ> \\<pi>2) ?l = substL \\<pi>1 (substL \\<pi>2 ?l)\n\ngoal (1 subgoal):\n 1. substC (subst \\<pi>1 \\<circ> \\<pi>2) c = substC \\<pi>1 (substC \\<pi>2 c)", "unfolding substC_def"], ["proof (prove)\nusing this:\n  substL (subst \\<pi>1 \\<circ> \\<pi>2) ?l = substL \\<pi>1 (substL \\<pi>2 ?l)\n\ngoal (1 subgoal):\n 1. map (substL (subst \\<pi>1 \\<circ> \\<pi>2)) c =\n    map (substL \\<pi>1) (map (substL \\<pi>2) c)", "by (induct c, auto)"], ["", "lemma o_substC:\n\"substC \\<pi>1 o substC \\<pi>2 = substC (subst \\<pi>1 o \\<pi>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substC \\<pi>1 \\<circ> substC \\<pi>2 =\n    substC (subst \\<pi>1 \\<circ> \\<pi>2)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (substC \\<pi>1 \\<circ> substC \\<pi>2) x =\n       substC (subst \\<pi>1 \\<circ> \\<pi>2) x", "apply(subst comp_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substC \\<pi>1 (substC \\<pi>2 x) =\n       substC (subst \\<pi>1 \\<circ> \\<pi>2) x", "unfolding substC_o[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substC (subst \\<pi>1 \\<circ> \\<pi>2) x =\n       substC (subst \\<pi>1 \\<circ> \\<pi>2) x", ".."], ["", "lemma substPB_o:\n\"substPB (subst \\<pi>1 o \\<pi>2) \\<Phi> = substPB \\<pi>1 (substPB \\<pi>2 \\<Phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substPB (subst \\<pi>1 \\<circ> \\<pi>2) \\<Phi> =\n    substPB \\<pi>1 (substPB \\<pi>2 \\<Phi>)", "using substC_o[of \\<pi>1 \\<pi>2]"], ["proof (prove)\nusing this:\n  substC (subst \\<pi>1 \\<circ> \\<pi>2) ?c = substC \\<pi>1 (substC \\<pi>2 ?c)\n\ngoal (1 subgoal):\n 1. substPB (subst \\<pi>1 \\<circ> \\<pi>2) \\<Phi> =\n    substPB \\<pi>1 (substPB \\<pi>2 \\<Phi>)", "unfolding substPB_def"], ["proof (prove)\nusing this:\n  substC (subst \\<pi>1 \\<circ> \\<pi>2) ?c = substC \\<pi>1 (substC \\<pi>2 ?c)\n\ngoal (1 subgoal):\n 1. {substC (subst \\<pi>1 \\<circ> \\<pi>2) c |c. c \\<in> \\<Phi>} =\n    {substC \\<pi>1 c |c. c \\<in> {substC \\<pi>2 c |c. c \\<in> \\<Phi>}}", "by auto"], ["", "lemma o_substPB:\n\"substPB \\<pi>1 o substPB \\<pi>2 = substPB (subst \\<pi>1 o \\<pi>2)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. substPB \\<pi>1 \\<circ> substPB \\<pi>2 =\n    substPB (subst \\<pi>1 \\<circ> \\<pi>2)", "apply(rule ext)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       (substPB \\<pi>1 \\<circ> substPB \\<pi>2) x =\n       substPB (subst \\<pi>1 \\<circ> \\<pi>2) x", "apply(subst comp_def)"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substPB \\<pi>1 (substPB \\<pi>2 x) =\n       substPB (subst \\<pi>1 \\<circ> \\<pi>2) x", "unfolding substPB_o[symmetric]"], ["proof (prove)\ngoal (1 subgoal):\n 1. \\<And>x.\n       substPB (subst \\<pi>1 \\<circ> \\<pi>2) x =\n       substPB (subst \\<pi>1 \\<circ> \\<pi>2) x", ".."], ["", "lemma finite_vars: \"finite (vars T)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (vars T)", "by(induct T, auto simp add: list_all_iff)"], ["", "lemma finite_varsA: \"finite (varsA at)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (varsA at)", "using finite_vars"], ["proof (prove)\nusing this:\n  finite (vars ?T)\n\ngoal (1 subgoal):\n 1. finite (varsA at)", "by (cases at, auto)"], ["", "lemma finite_varsL: \"finite (varsL l)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (varsL l)", "using finite_varsA"], ["proof (prove)\nusing this:\n  finite (varsA ?at)\n\ngoal (1 subgoal):\n 1. finite (varsL l)", "by (cases l, auto)"], ["", "lemma finite_varsC: \"finite (varsC c)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite (varsC c)", "using finite_varsL"], ["proof (prove)\nusing this:\n  finite (varsL ?l)\n\ngoal (1 subgoal):\n 1. finite (varsC c)", "unfolding varsC_def"], ["proof (prove)\nusing this:\n  finite (varsL ?l)\n\ngoal (1 subgoal):\n 1. finite (\\<Union> (set (map varsL c)))", "by (induct c, auto)"], ["", "lemma finite_varsPB: \"finite \\<Phi> \\<Longrightarrow> finite (varsPB \\<Phi>)\""], ["proof (prove)\ngoal (1 subgoal):\n 1. finite \\<Phi> \\<Longrightarrow> finite (varsPB \\<Phi>)", "using finite_varsC"], ["proof (prove)\nusing this:\n  finite (varsC ?c)\n\ngoal (1 subgoal):\n 1. finite \\<Phi> \\<Longrightarrow> finite (varsPB \\<Phi>)", "unfolding varsPB_def"], ["proof (prove)\nusing this:\n  finite (varsC ?c)\n\ngoal (1 subgoal):\n 1. finite \\<Phi> \\<Longrightarrow>\n    finite (\\<Union> {varsC c |c. c \\<in> \\<Phi>})", "by (auto intro!: finite_Union)"], ["", "end"]]}